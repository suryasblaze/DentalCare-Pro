var Qoe=Object.defineProperty;var ele=(e,t,r)=>t in e?Qoe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var gr=(e,t,r)=>ele(e,typeof t!="symbol"?t+"":t,r);function tle(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rle(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var tA={exports:{}},Tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WM;function nle(){if(WM)return Tn;WM=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(Q){return Q===null||typeof Q!="object"?null:(Q=f&&Q[f]||Q["@@iterator"],typeof Q=="function"?Q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,g={};function y(Q,O,J){this.props=Q,this.context=O,this.refs=g,this.updater=J||m}y.prototype.isReactComponent={},y.prototype.setState=function(Q,O){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,O,"setState")},y.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function b(){}b.prototype=y.prototype;function _(Q,O,J){this.props=Q,this.context=O,this.refs=g,this.updater=J||m}var N=_.prototype=new b;N.constructor=_,w(N,y.prototype),N.isPureReactComponent=!0;var E=Array.isArray,C=Object.prototype.hasOwnProperty,D={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function F(Q,O,J){var X,ne={},ie=null,oe=null;if(O!=null)for(X in O.ref!==void 0&&(oe=O.ref),O.key!==void 0&&(ie=""+O.key),O)C.call(O,X)&&!P.hasOwnProperty(X)&&(ne[X]=O[X]);var de=arguments.length-2;if(de===1)ne.children=J;else if(1<de){for(var V=Array(de),se=0;se<de;se++)V[se]=arguments[se+2];ne.children=V}if(Q&&Q.defaultProps)for(X in de=Q.defaultProps,de)ne[X]===void 0&&(ne[X]=de[X]);return{$$typeof:e,type:Q,key:ie,ref:oe,props:ne,_owner:D.current}}function L(Q,O){return{$$typeof:e,type:Q.type,key:O,ref:Q.ref,props:Q.props,_owner:Q._owner}}function W(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function T(Q){var O={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(J){return O[J]})}var R=/\/+/g;function j(Q,O){return typeof Q=="object"&&Q!==null&&Q.key!=null?T(""+Q.key):O.toString(36)}function Y(Q,O,J,X,ne){var ie=typeof Q;(ie==="undefined"||ie==="boolean")&&(Q=null);var oe=!1;if(Q===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(Q.$$typeof){case e:case t:oe=!0}}if(oe)return oe=Q,ne=ne(oe),Q=X===""?"."+j(oe,0):X,E(ne)?(J="",Q!=null&&(J=Q.replace(R,"$&/")+"/"),Y(ne,O,J,"",function(se){return se})):ne!=null&&(W(ne)&&(ne=L(ne,J+(!ne.key||oe&&oe.key===ne.key?"":(""+ne.key).replace(R,"$&/")+"/")+Q)),O.push(ne)),1;if(oe=0,X=X===""?".":X+":",E(Q))for(var de=0;de<Q.length;de++){ie=Q[de];var V=X+j(ie,de);oe+=Y(ie,O,J,V,ne)}else if(V=h(Q),typeof V=="function")for(Q=V.call(Q),de=0;!(ie=Q.next()).done;)ie=ie.value,V=X+j(ie,de++),oe+=Y(ie,O,J,V,ne);else if(ie==="object")throw O=String(Q),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return oe}function Z(Q,O,J){if(Q==null)return Q;var X=[],ne=0;return Y(Q,X,"","",function(ie){return O.call(J,ie,ne++)}),X}function re(Q){if(Q._status===-1){var O=Q._result;O=O(),O.then(function(J){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=J)},function(J){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=J)}),Q._status===-1&&(Q._status=0,Q._result=O)}if(Q._status===1)return Q._result.default;throw Q._result}var z={current:null},q={transition:null},B={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:q,ReactCurrentOwner:D};function G(){throw Error("act(...) is not supported in production builds of React.")}return Tn.Children={map:Z,forEach:function(Q,O,J){Z(Q,function(){O.apply(this,arguments)},J)},count:function(Q){var O=0;return Z(Q,function(){O++}),O},toArray:function(Q){return Z(Q,function(O){return O})||[]},only:function(Q){if(!W(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Tn.Component=y,Tn.Fragment=r,Tn.Profiler=a,Tn.PureComponent=_,Tn.StrictMode=n,Tn.Suspense=c,Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,Tn.act=G,Tn.cloneElement=function(Q,O,J){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var X=w({},Q.props),ne=Q.key,ie=Q.ref,oe=Q._owner;if(O!=null){if(O.ref!==void 0&&(ie=O.ref,oe=D.current),O.key!==void 0&&(ne=""+O.key),Q.type&&Q.type.defaultProps)var de=Q.type.defaultProps;for(V in O)C.call(O,V)&&!P.hasOwnProperty(V)&&(X[V]=O[V]===void 0&&de!==void 0?de[V]:O[V])}var V=arguments.length-2;if(V===1)X.children=J;else if(1<V){de=Array(V);for(var se=0;se<V;se++)de[se]=arguments[se+2];X.children=de}return{$$typeof:e,type:Q.type,key:ne,ref:ie,props:X,_owner:oe}},Tn.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:i,_context:Q},Q.Consumer=Q},Tn.createElement=F,Tn.createFactory=function(Q){var O=F.bind(null,Q);return O.type=Q,O},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(Q){return{$$typeof:o,render:Q}},Tn.isValidElement=W,Tn.lazy=function(Q){return{$$typeof:d,_payload:{_status:-1,_result:Q},_init:re}},Tn.memo=function(Q,O){return{$$typeof:u,type:Q,compare:O===void 0?null:O}},Tn.startTransition=function(Q){var O=q.transition;q.transition={};try{Q()}finally{q.transition=O}},Tn.unstable_act=G,Tn.useCallback=function(Q,O){return z.current.useCallback(Q,O)},Tn.useContext=function(Q){return z.current.useContext(Q)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(Q){return z.current.useDeferredValue(Q)},Tn.useEffect=function(Q,O){return z.current.useEffect(Q,O)},Tn.useId=function(){return z.current.useId()},Tn.useImperativeHandle=function(Q,O,J){return z.current.useImperativeHandle(Q,O,J)},Tn.useInsertionEffect=function(Q,O){return z.current.useInsertionEffect(Q,O)},Tn.useLayoutEffect=function(Q,O){return z.current.useLayoutEffect(Q,O)},Tn.useMemo=function(Q,O){return z.current.useMemo(Q,O)},Tn.useReducer=function(Q,O,J){return z.current.useReducer(Q,O,J)},Tn.useRef=function(Q){return z.current.useRef(Q)},Tn.useState=function(Q){return z.current.useState(Q)},Tn.useSyncExternalStore=function(Q,O,J){return z.current.useSyncExternalStore(Q,O,J)},Tn.useTransition=function(){return z.current.useTransition()},Tn.version="18.3.1",Tn}var zM;function m4(){return zM||(zM=1,tA.exports=nle()),tA.exports}var S=m4();const Qe=pa(S),lx=tle({__proto__:null,default:Qe},[S]);var t_={},rA={exports:{}},Pl={},nA={exports:{}},aA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM;function ale(){return VM||(VM=1,function(e){function t(q,B){var G=q.length;q.push(B);e:for(;0<G;){var Q=G-1>>>1,O=q[Q];if(0<a(O,B))q[Q]=B,q[G]=O,G=Q;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var B=q[0],G=q.pop();if(G!==B){q[0]=G;e:for(var Q=0,O=q.length,J=O>>>1;Q<J;){var X=2*(Q+1)-1,ne=q[X],ie=X+1,oe=q[ie];if(0>a(ne,G))ie<O&&0>a(oe,ne)?(q[Q]=oe,q[ie]=G,Q=ie):(q[Q]=ne,q[X]=G,Q=X);else if(ie<O&&0>a(oe,G))q[Q]=oe,q[ie]=G,Q=ie;else break e}}return B}function a(q,B){var G=q.sortIndex-B.sortIndex;return G!==0?G:q.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,m=!1,w=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=q)n(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(u)}}function E(q){if(g=!1,N(q),!w)if(r(c)!==null)w=!0,re(C);else{var B=r(u);B!==null&&z(E,B.startTime-q)}}function C(q,B){w=!1,g&&(g=!1,b(F),F=-1),m=!0;var G=h;try{for(N(B),f=r(c);f!==null&&(!(f.expirationTime>B)||q&&!T());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,h=f.priorityLevel;var O=Q(f.expirationTime<=B);B=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),N(B)}else n(c);f=r(c)}if(f!==null)var J=!0;else{var X=r(u);X!==null&&z(E,X.startTime-B),J=!1}return J}finally{f=null,h=G,m=!1}}var D=!1,P=null,F=-1,L=5,W=-1;function T(){return!(e.unstable_now()-W<L)}function R(){if(P!==null){var q=e.unstable_now();W=q;var B=!0;try{B=P(!0,q)}finally{B?j():(D=!1,P=null)}}else D=!1}var j;if(typeof _=="function")j=function(){_(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=R,j=function(){Z.postMessage(null)}}else j=function(){y(R,0)};function re(q){P=q,D||(D=!0,j())}function z(q,B){F=y(function(){q(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,re(C))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(q){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var G=h;h=B;try{return q()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,B){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=h;h=q;try{return B()}finally{h=G}},e.unstable_scheduleCallback=function(q,B,G){var Q=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=G+O,q={id:d++,callback:B,priorityLevel:q,startTime:G,expirationTime:O,sortIndex:-1},G>Q?(q.sortIndex=G,t(u,q),r(c)===null&&q===r(u)&&(g?(b(F),F=-1):g=!0,z(E,G-Q))):(q.sortIndex=O,t(c,q),w||m||(w=!0,re(C))),q},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(q){var B=h;return function(){var G=h;h=B;try{return q.apply(this,arguments)}finally{h=G}}}}(aA)),aA}var HM;function ile(){return HM||(HM=1,nA.exports=ale()),nA.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function sle(){if(GM)return Pl;GM=1;var e=m4(),t=ile();function r(p){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+p,A=1;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(p,v){s(p,v),s(p+"Capture",v)}function s(p,v){for(a[p]=v,p=0;p<v.length;p++)n.add(v[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(p){return c.call(f,p)?!0:c.call(d,p)?!1:u.test(p)?f[p]=!0:(d[p]=!0,!1)}function m(p,v,A,I){if(A!==null&&A.type===0)return!1;switch(typeof v){case"function":case"symbol":return!0;case"boolean":return I?!1:A!==null?!A.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function w(p,v,A,I){if(v===null||typeof v>"u"||m(p,v,A,I))return!0;if(I)return!1;if(A!==null)switch(A.type){case 3:return!v;case 4:return v===!1;case 5:return isNaN(v);case 6:return isNaN(v)||1>v}return!1}function g(p,v,A,I,H,ee,me){this.acceptsBooleans=v===2||v===3||v===4,this.attributeName=I,this.attributeNamespace=H,this.mustUseProperty=A,this.propertyName=p,this.type=v,this.sanitizeURL=ee,this.removeEmptyString=me}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new g(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var v=p[0];y[v]=new g(v,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new g(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new g(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new g(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new g(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new g(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new g(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new g(p,5,!1,p.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var v=p.replace(b,_);y[v]=new g(v,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var v=p.replace(b,_);y[v]=new g(v,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var v=p.replace(b,_);y[v]=new g(v,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new g(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new g(p,1,!1,p.toLowerCase(),null,!0,!0)});function N(p,v,A,I){var H=y.hasOwnProperty(v)?y[v]:null;(H!==null?H.type!==0:I||!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(w(v,A,H,I)&&(A=null),I||H===null?h(v)&&(A===null?p.removeAttribute(v):p.setAttribute(v,""+A)):H.mustUseProperty?p[H.propertyName]=A===null?H.type===3?!1:"":A:(v=H.attributeName,I=H.attributeNamespace,A===null?p.removeAttribute(v):(H=H.type,A=H===3||H===4&&A===!0?"":""+A,I?p.setAttributeNS(I,v,A):p.setAttribute(v,A))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),D=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),q=Symbol.iterator;function B(p){return p===null||typeof p!="object"?null:(p=q&&p[q]||p["@@iterator"],typeof p=="function"?p:null)}var G=Object.assign,Q;function O(p){if(Q===void 0)try{throw Error()}catch(A){var v=A.stack.trim().match(/\n( *(at )?)/);Q=v&&v[1]||""}return`
`+Q+p}var J=!1;function X(p,v){if(!p||J)return"";J=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(xt){var I=xt}Reflect.construct(p,[],v)}else{try{v.call()}catch(xt){I=xt}p.call(v.prototype)}else{try{throw Error()}catch(xt){I=xt}p()}}catch(xt){if(xt&&I&&typeof xt.stack=="string"){for(var H=xt.stack.split(`
`),ee=I.stack.split(`
`),me=H.length-1,Te=ee.length-1;1<=me&&0<=Te&&H[me]!==ee[Te];)Te--;for(;1<=me&&0<=Te;me--,Te--)if(H[me]!==ee[Te]){if(me!==1||Te!==1)do if(me--,Te--,0>Te||H[me]!==ee[Te]){var qe=`
`+H[me].replace(" at new "," at ");return p.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",p.displayName)),qe}while(1<=me&&0<=Te);break}}}finally{J=!1,Error.prepareStackTrace=A}return(p=p?p.displayName||p.name:"")?O(p):""}function ne(p){switch(p.tag){case 5:return O(p.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return p=X(p.type,!1),p;case 11:return p=X(p.type.render,!1),p;case 1:return p=X(p.type,!0),p;default:return""}}function ie(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case P:return"Fragment";case D:return"Portal";case L:return"Profiler";case F:return"StrictMode";case j:return"Suspense";case Y:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case T:return(p.displayName||"Context")+".Consumer";case W:return(p._context.displayName||"Context")+".Provider";case R:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Z:return v=p.displayName||null,v!==null?v:ie(p.type)||"Memo";case re:v=p._payload,p=p._init;try{return ie(p(v))}catch{}}return null}function oe(p){var v=p.type;switch(p.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=v.render,p=p.displayName||p.name||"",v.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(v);case 8:return v===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function de(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function V(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function se(p){var v=V(p)?"checked":"value",A=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),I=""+p[v];if(!p.hasOwnProperty(v)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var H=A.get,ee=A.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return H.call(this)},set:function(me){I=""+me,ee.call(this,me)}}),Object.defineProperty(p,v,{enumerable:A.enumerable}),{getValue:function(){return I},setValue:function(me){I=""+me},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function fe(p){p._valueTracker||(p._valueTracker=se(p))}function te(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var A=v.getValue(),I="";return p&&(I=V(p)?p.checked?"true":"false":p.value),p=I,p!==A?(v.setValue(p),!0):!1}function ke(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Re(p,v){var A=v.checked;return G({},v,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??p._wrapperState.initialChecked})}function Ce(p,v){var A=v.defaultValue==null?"":v.defaultValue,I=v.checked!=null?v.checked:v.defaultChecked;A=de(v.value!=null?v.value:A),p._wrapperState={initialChecked:I,initialValue:A,controlled:v.type==="checkbox"||v.type==="radio"?v.checked!=null:v.value!=null}}function ve(p,v){v=v.checked,v!=null&&N(p,"checked",v,!1)}function Ge(p,v){ve(p,v);var A=de(v.value),I=v.type;if(A!=null)I==="number"?(A===0&&p.value===""||p.value!=A)&&(p.value=""+A):p.value!==""+A&&(p.value=""+A);else if(I==="submit"||I==="reset"){p.removeAttribute("value");return}v.hasOwnProperty("value")?it(p,v.type,A):v.hasOwnProperty("defaultValue")&&it(p,v.type,de(v.defaultValue)),v.checked==null&&v.defaultChecked!=null&&(p.defaultChecked=!!v.defaultChecked)}function pt(p,v,A){if(v.hasOwnProperty("value")||v.hasOwnProperty("defaultValue")){var I=v.type;if(!(I!=="submit"&&I!=="reset"||v.value!==void 0&&v.value!==null))return;v=""+p._wrapperState.initialValue,A||v===p.value||(p.value=v),p.defaultValue=v}A=p.name,A!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,A!==""&&(p.name=A)}function it(p,v,A){(v!=="number"||ke(p.ownerDocument)!==p)&&(A==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+A&&(p.defaultValue=""+A))}var Le=Array.isArray;function ut(p,v,A,I){if(p=p.options,v){v={};for(var H=0;H<A.length;H++)v["$"+A[H]]=!0;for(A=0;A<p.length;A++)H=v.hasOwnProperty("$"+p[A].value),p[A].selected!==H&&(p[A].selected=H),H&&I&&(p[A].defaultSelected=!0)}else{for(A=""+de(A),v=null,H=0;H<p.length;H++){if(p[H].value===A){p[H].selected=!0,I&&(p[H].defaultSelected=!0);return}v!==null||p[H].disabled||(v=p[H])}v!==null&&(v.selected=!0)}}function he(p,v){if(v.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},v,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Ee(p,v){var A=v.value;if(A==null){if(A=v.children,v=v.defaultValue,A!=null){if(v!=null)throw Error(r(92));if(Le(A)){if(1<A.length)throw Error(r(93));A=A[0]}v=A}v==null&&(v=""),A=v}p._wrapperState={initialValue:de(A)}}function Me(p,v){var A=de(v.value),I=de(v.defaultValue);A!=null&&(A=""+A,A!==p.value&&(p.value=A),v.defaultValue==null&&p.defaultValue!==A&&(p.defaultValue=A)),I!=null&&(p.defaultValue=""+I)}function at(p){var v=p.textContent;v===p._wrapperState.initialValue&&v!==""&&v!==null&&(p.value=v)}function ct(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(p,v){return p==null||p==="http://www.w3.org/1999/xhtml"?ct(v):p==="http://www.w3.org/2000/svg"&&v==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Xe,Nt=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(v,A,I,H){MSApp.execUnsafeLocalFunction(function(){return p(v,A,I,H)})}:p}(function(p,v){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=v;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+v.valueOf().toString()+"</svg>",v=Xe.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;v.firstChild;)p.appendChild(v.firstChild)}});function St(p,v){if(v){var A=p.firstChild;if(A&&A===p.lastChild&&A.nodeType===3){A.nodeValue=v;return}}p.textContent=v}var At={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dn=["Webkit","ms","Moz","O"];Object.keys(At).forEach(function(p){dn.forEach(function(v){v=v+p.charAt(0).toUpperCase()+p.substring(1),At[v]=At[p]})});function Nr(p,v,A){return v==null||typeof v=="boolean"||v===""?"":A||typeof v!="number"||v===0||At.hasOwnProperty(p)&&At[p]?(""+v).trim():v+"px"}function mt(p,v){p=p.style;for(var A in v)if(v.hasOwnProperty(A)){var I=A.indexOf("--")===0,H=Nr(A,v[A],I);A==="float"&&(A="cssFloat"),I?p.setProperty(A,H):p[A]=H}}var Dt=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(p,v){if(v){if(Dt[p]&&(v.children!=null||v.dangerouslySetInnerHTML!=null))throw Error(r(137,p));if(v.dangerouslySetInnerHTML!=null){if(v.children!=null)throw Error(r(60));if(typeof v.dangerouslySetInnerHTML!="object"||!("__html"in v.dangerouslySetInnerHTML))throw Error(r(61))}if(v.style!=null&&typeof v.style!="object")throw Error(r(62))}}function Gr(p,v){if(p.indexOf("-")===-1)return typeof v.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Or(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var cr=null,xn=null,Sn=null;function Nn(p){if(p=hp(p)){if(typeof cr!="function")throw Error(r(280));var v=p.stateNode;v&&(v=l0(v),cr(p.stateNode,p.type,v))}}function Pr(p){xn?Sn?Sn.push(p):Sn=[p]:xn=p}function hn(){if(xn){var p=xn,v=Sn;if(Sn=xn=null,Nn(p),v)for(p=0;p<v.length;p++)Nn(v[p])}}function hs(p,v){return p(v)}function Gn(){}var bi=!1;function ot(p,v,A){if(bi)return p(v,A);bi=!0;try{return hs(p,v,A)}finally{bi=!1,(xn!==null||Sn!==null)&&(Gn(),hn())}}function yt(p,v){var A=p.stateNode;if(A===null)return null;var I=l0(A);if(I===null)return null;A=I[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(p=p.type,I=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!I;break e;default:p=!1}if(p)return null;if(A&&typeof A!="function")throw Error(r(231,v,typeof A));return A}var Mr=!1;if(o)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){Mr=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{Mr=!1}function bt(p,v,A,I,H,ee,me,Te,qe){var xt=Array.prototype.slice.call(arguments,3);try{v.apply(A,xt)}catch(Ut){this.onError(Ut)}}var vt=!1,Qt=null,ce=!1,we=null,xe={onError:function(p){vt=!0,Qt=p}};function _e(p,v,A,I,H,ee,me,Te,qe){vt=!1,Qt=null,bt.apply(xe,arguments)}function Ne(p,v,A,I,H,ee,me,Te,qe){if(_e.apply(this,arguments),vt){if(vt){var xt=Qt;vt=!1,Qt=null}else throw Error(r(198));ce||(ce=!0,we=xt)}}function Se(p){var v=p,A=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(A=v.return),p=v.return;while(p)}return v.tag===3?A:null}function Ve(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function ft(p){if(Se(p)!==p)throw Error(r(188))}function et(p){var v=p.alternate;if(!v){if(v=Se(p),v===null)throw Error(r(188));return v!==p?null:p}for(var A=p,I=v;;){var H=A.return;if(H===null)break;var ee=H.alternate;if(ee===null){if(I=H.return,I!==null){A=I;continue}break}if(H.child===ee.child){for(ee=H.child;ee;){if(ee===A)return ft(H),p;if(ee===I)return ft(H),v;ee=ee.sibling}throw Error(r(188))}if(A.return!==I.return)A=H,I=ee;else{for(var me=!1,Te=H.child;Te;){if(Te===A){me=!0,A=H,I=ee;break}if(Te===I){me=!0,I=H,A=ee;break}Te=Te.sibling}if(!me){for(Te=ee.child;Te;){if(Te===A){me=!0,A=ee,I=H;break}if(Te===I){me=!0,I=ee,A=H;break}Te=Te.sibling}if(!me)throw Error(r(189))}}if(A.alternate!==I)throw Error(r(190))}if(A.tag!==3)throw Error(r(188));return A.stateNode.current===A?p:v}function st(p){return p=et(p),p!==null?Je(p):null}function Je(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var v=Je(p);if(v!==null)return v;p=p.sibling}return null}var Ft=t.unstable_scheduleCallback,Jt=t.unstable_cancelCallback,lr=t.unstable_shouldYield,zt=t.unstable_requestPaint,qt=t.unstable_now,Qr=t.unstable_getCurrentPriorityLevel,qn=t.unstable_ImmediatePriority,la=t.unstable_UserBlockingPriority,za=t.unstable_NormalPriority,Vl=t.unstable_LowPriority,Nc=t.unstable_IdlePriority,Go=null,_i=null;function Ac(p){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Go,p,void 0,(p.current.flags&128)===128)}catch{}}var Va=Math.clz32?Math.clz32:Ug,di=Math.log,Bg=Math.LN2;function Ug(p){return p>>>=0,p===0?32:31-(di(p)/Bg|0)|0}var Sf=64,gd=4194304;function Nf(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function fo(p,v){var A=p.pendingLanes;if(A===0)return 0;var I=0,H=p.suspendedLanes,ee=p.pingedLanes,me=A&268435455;if(me!==0){var Te=me&~H;Te!==0?I=Nf(Te):(ee&=me,ee!==0&&(I=Nf(ee)))}else me=A&~H,me!==0?I=Nf(me):ee!==0&&(I=Nf(ee));if(I===0)return 0;if(v!==0&&v!==I&&(v&H)===0&&(H=I&-I,ee=v&-v,H>=ee||H===16&&(ee&4194240)!==0))return v;if((I&4)!==0&&(I|=A&16),v=p.entangledLanes,v!==0)for(p=p.entanglements,v&=I;0<v;)A=31-Va(v),H=1<<A,I|=p[A],v&=~H;return I}function Bh(p,v){switch(p){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(p,v){for(var A=p.suspendedLanes,I=p.pingedLanes,H=p.expirationTimes,ee=p.pendingLanes;0<ee;){var me=31-Va(ee),Te=1<<me,qe=H[me];qe===-1?((Te&A)===0||(Te&I)!==0)&&(H[me]=Bh(Te,v)):qe<=v&&(p.expiredLanes|=Te),ee&=~Te}}function Af(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Wm(){var p=Sf;return Sf<<=1,(Sf&4194240)===0&&(Sf=64),p}function zm(p){for(var v=[],A=0;31>A;A++)v.push(p);return v}function vd(p,v,A){p.pendingLanes|=v,v!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,v=31-Va(v),p[v]=A}function Ry(p,v){var A=p.pendingLanes&~v;p.pendingLanes=v,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=v,p.mutableReadLanes&=v,p.entangledLanes&=v,v=p.entanglements;var I=p.eventTimes;for(p=p.expirationTimes;0<A;){var H=31-Va(A),ee=1<<H;v[H]=0,I[H]=-1,p[H]=-1,A&=~ee}}function Uh(p,v){var A=p.entangledLanes|=v;for(p=p.entanglements;A;){var I=31-Va(A),H=1<<I;H&v|p[I]&v&&(p[I]|=v),A&=~H}}var Yn=0;function qh(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var qg,Vm,Wg,kc,kf,yd=!1,Ef=[],Ha=null,Ec=null,Hl=null,Yr=new Map,Cf=new Map,Cc=[],Pc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hm(p,v){switch(p){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":Yr.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cf.delete(v.pointerId)}}function xd(p,v,A,I,H,ee){return p===null||p.nativeEvent!==ee?(p={blockedOn:v,domEventName:A,eventSystemFlags:I,nativeEvent:ee,targetContainers:[H]},v!==null&&(v=hp(v),v!==null&&Vm(v)),p):(p.eventSystemFlags|=I,v=p.targetContainers,H!==null&&v.indexOf(H)===-1&&v.push(H),p)}function Wh(p,v,A,I,H){switch(v){case"focusin":return Ha=xd(Ha,p,v,A,I,H),!0;case"dragenter":return Ec=xd(Ec,p,v,A,I,H),!0;case"mouseover":return Hl=xd(Hl,p,v,A,I,H),!0;case"pointerover":var ee=H.pointerId;return Yr.set(ee,xd(Yr.get(ee)||null,p,v,A,I,H)),!0;case"gotpointercapture":return ee=H.pointerId,Cf.set(ee,xd(Cf.get(ee)||null,p,v,A,I,H)),!0}return!1}function zh(p){var v=Td(p.target);if(v!==null){var A=Se(v);if(A!==null){if(v=A.tag,v===13){if(v=Ve(A),v!==null){p.blockedOn=v,kf(p.priority,function(){Wg(A)});return}}else if(v===3&&A.stateNode.current.memoizedState.isDehydrated){p.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Vh(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var A=Gh(p.domEventName,p.eventSystemFlags,v[0],p.nativeEvent);if(A===null){A=p.nativeEvent;var I=new A.constructor(A.type,A);fr=I,A.target.dispatchEvent(I),fr=null}else return v=hp(A),v!==null&&Vm(v),p.blockedOn=A,!1;v.shift()}return!0}function zg(p,v,A){Vh(p)&&A.delete(v)}function My(){yd=!1,Ha!==null&&Vh(Ha)&&(Ha=null),Ec!==null&&Vh(Ec)&&(Ec=null),Hl!==null&&Vh(Hl)&&(Hl=null),Yr.forEach(zg),Cf.forEach(zg)}function cu(p,v){p.blockedOn===v&&(p.blockedOn=null,yd||(yd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,My)))}function Gl(p){function v(H){return cu(H,p)}if(0<Ef.length){cu(Ef[0],p);for(var A=1;A<Ef.length;A++){var I=Ef[A];I.blockedOn===p&&(I.blockedOn=null)}}for(Ha!==null&&cu(Ha,p),Ec!==null&&cu(Ec,p),Hl!==null&&cu(Hl,p),Yr.forEach(v),Cf.forEach(v),A=0;A<Cc.length;A++)I=Cc[A],I.blockedOn===p&&(I.blockedOn=null);for(;0<Cc.length&&(A=Cc[0],A.blockedOn===null);)zh(A),A.blockedOn===null&&Cc.shift()}var Yo=E.ReactCurrentBatchConfig,Hh=!0;function Pf(p,v,A,I){var H=Yn,ee=Yo.transition;Yo.transition=null;try{Yn=1,wd(p,v,A,I)}finally{Yn=H,Yo.transition=ee}}function Gm(p,v,A,I){var H=Yn,ee=Yo.transition;Yo.transition=null;try{Yn=4,wd(p,v,A,I)}finally{Yn=H,Yo.transition=ee}}function wd(p,v,A,I){if(Hh){var H=Gh(p,v,A,I);if(H===null)i0(p,v,I,Tf,A),Hm(p,I);else if(Wh(H,p,v,A,I))I.stopPropagation();else if(Hm(p,I),v&4&&-1<Pc.indexOf(p)){for(;H!==null;){var ee=hp(H);if(ee!==null&&qg(ee),ee=Gh(p,v,A,I),ee===null&&i0(p,v,I,Tf,A),ee===H)break;H=ee}H!==null&&I.stopPropagation()}else i0(p,v,I,null,A)}}var Tf=null;function Gh(p,v,A,I){if(Tf=null,p=Or(I),p=Td(p),p!==null)if(v=Se(p),v===null)p=null;else if(A=v.tag,A===13){if(p=Ve(v),p!==null)return p;p=null}else if(A===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null);return Tf=p,null}function Ym(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qr()){case qn:return 1;case la:return 4;case za:case Vl:return 16;case Nc:return 536870912;default:return 16}default:return 16}}var Yl=null,vl=null,yl=null;function Vg(){if(yl)return yl;var p,v=vl,A=v.length,I,H="value"in Yl?Yl.value:Yl.textContent,ee=H.length;for(p=0;p<A&&v[p]===H[p];p++);var me=A-p;for(I=1;I<=me&&v[A-I]===H[ee-I];I++);return yl=H.slice(p,1<I?1-I:void 0)}function Kl(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function po(){return!0}function Yh(){return!1}function Fi(p){function v(A,I,H,ee,me){this._reactName=A,this._targetInst=H,this.type=I,this.nativeEvent=ee,this.target=me,this.currentTarget=null;for(var Te in p)p.hasOwnProperty(Te)&&(A=p[Te],this[Te]=A?A(ee):ee[Te]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?po:Yh,this.isPropagationStopped=Yh,this}return G(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),v}var bd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=Fi(bd),Of=G({},bd,{view:0,detail:0}),Km=Fi(Of),Df,Kh,Tc,Sd=G({},Of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ur,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Tc&&(Tc&&p.type==="mousemove"?(Df=p.screenX-Tc.screenX,Kh=p.screenY-Tc.screenY):Kh=Df=0,Tc=p),Df)},movementY:function(p){return"movementY"in p?p.movementY:Kh}}),Xh=Fi(Sd),Hg=G({},Sd,{dataTransfer:0}),Fy=Fi(Hg),Jh=G({},Of,{relatedTarget:0}),uu=Fi(Jh),Xm=G({},bd,{animationName:0,elapsedTime:0,pseudoElement:0}),Nd=Fi(Xm),Jm=G({},bd,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),U=Fi(Jm),ue=G({},bd,{data:0}),Pe=Fi(ue),Be={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $t(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=kt[p])?!!v[p]:!1}function ur(){return $t}var Fr=G({},Of,{key:function(p){if(p.key){var v=Be[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=Kl(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?tt[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ur,charCode:function(p){return p.type==="keypress"?Kl(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Kl(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),pn=Fi(Fr),fn=G({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),In=Fi(fn),Ga=G({},Of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ur}),ii=Fi(Ga),Si=G({},bd,{propertyName:0,elapsedTime:0,pseudoElement:0}),As=Fi(Si),rs=G({},Sd,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Xl=Fi(rs),Ko=[9,13,27,32],xl=o&&"CompositionEvent"in window,Ad=null;o&&"documentMode"in document&&(Ad=document.documentMode);var Zm=o&&"TextEvent"in window&&!Ad,Zh=o&&(!xl||Ad&&8<Ad&&11>=Ad),If=" ",Qh=!1;function ep(p,v){switch(p){case"keyup":return Ko.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rf(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var si=!1;function tp(p,v){switch(p){case"compositionend":return Rf(v);case"keypress":return v.which!==32?null:(Qh=!0,If);case"textInput":return p=v.data,p===If&&Qh?null:p;default:return null}}function rp(p,v){if(si)return p==="compositionend"||!xl&&ep(p,v)?(p=Vg(),yl=vl=Yl=null,si=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Zh&&v.locale!=="ko"?null:v.data;default:return null}}var np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!np[p.type]:v==="textarea"}function Vs(p,v,A,I){Pr(I),v=Xg(v,"onChange"),0<v.length&&(A=new _d("onChange","change",null,A,I),p.push({event:A,listeners:v}))}var Mf=null,du=null;function Gg(p){n0(p,0)}function Hs(p){var v=zf(p);if(te(v))return p}function ip(p,v){if(p==="change")return v}var Qm=!1;if(o){var sp;if(o){var Oc="oninput"in document;if(!Oc){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),Oc=typeof kd.oninput=="function"}sp=Oc}else sp=!1;Qm=sp&&(!document.documentMode||9<document.documentMode)}function Gs(){Mf&&(Mf.detachEvent("onpropertychange",ks),du=Mf=null)}function ks(p){if(p.propertyName==="value"&&Hs(du)){var v=[];Vs(v,du,p,Or(p)),ot(Gg,v)}}function Ed(p,v,A){p==="focusin"?(Gs(),Mf=v,du=A,Mf.attachEvent("onpropertychange",ks)):p==="focusout"&&Gs()}function fu(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Hs(du)}function hu(p,v){if(p==="click")return Hs(v)}function op(p,v){if(p==="input"||p==="change")return Hs(v)}function pu(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var Kn=typeof Object.is=="function"?Object.is:pu;function mu(p,v){if(Kn(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var A=Object.keys(p),I=Object.keys(v);if(A.length!==I.length)return!1;for(I=0;I<A.length;I++){var H=A[I];if(!c.call(v,H)||!Kn(p[H],v[H]))return!1}return!0}function Es(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Xo(p,v){var A=Es(p);p=0;for(var I;A;){if(A.nodeType===3){if(I=p+A.textContent.length,p<=v&&I>=v)return{node:A,offset:v-p};p=I}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=Es(A)}}function Ff(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?Ff(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function e0(){for(var p=window,v=ke();v instanceof p.HTMLIFrameElement;){try{var A=typeof v.contentWindow.location.href=="string"}catch{A=!1}if(A)p=v.contentWindow;else break;v=ke(p.document)}return v}function Lf(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}function jf(p){var v=e0(),A=p.focusedElem,I=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&Ff(A.ownerDocument.documentElement,A)){if(I!==null&&Lf(A)){if(v=I.start,p=I.end,p===void 0&&(p=v),"selectionStart"in A)A.selectionStart=v,A.selectionEnd=Math.min(p,A.value.length);else if(p=(v=A.ownerDocument||document)&&v.defaultView||window,p.getSelection){p=p.getSelection();var H=A.textContent.length,ee=Math.min(I.start,H);I=I.end===void 0?ee:Math.min(I.end,H),!p.extend&&ee>I&&(H=I,I=ee,ee=H),H=Xo(A,ee);var me=Xo(A,I);H&&me&&(p.rangeCount!==1||p.anchorNode!==H.node||p.anchorOffset!==H.offset||p.focusNode!==me.node||p.focusOffset!==me.offset)&&(v=v.createRange(),v.setStart(H.node,H.offset),p.removeAllRanges(),ee>I?(p.addRange(v),p.extend(me.node,me.offset)):(v.setEnd(me.node,me.offset),p.addRange(v)))}}for(v=[],p=A;p=p.parentNode;)p.nodeType===1&&v.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<v.length;A++)p=v[A],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var $f=o&&"documentMode"in document&&11>=document.documentMode,Jo=null,gu=null,Dc=null,vu=!1;function yu(p,v,A){var I=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;vu||Jo==null||Jo!==ke(I)||(I=Jo,"selectionStart"in I&&Lf(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Dc&&mu(Dc,I)||(Dc=I,I=Xg(gu,"onSelect"),0<I.length&&(v=new _d("onSelect","select",null,v,A),p.push({event:v,listeners:I}),v.target=Jo)))}function Cd(p,v){var A={};return A[p.toLowerCase()]=v.toLowerCase(),A["Webkit"+p]="webkit"+v,A["Moz"+p]="moz"+v,A}var ps={animationend:Cd("Animation","AnimationEnd"),animationiteration:Cd("Animation","AnimationIteration"),animationstart:Cd("Animation","AnimationStart"),transitionend:Cd("Transition","TransitionEnd")},mo={},Na={};o&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function ca(p){if(mo[p])return mo[p];if(!ps[p])return p;var v=ps[p],A;for(A in v)if(v.hasOwnProperty(A)&&A in Na)return mo[p]=v[A];return p}var oi=ca("animationend"),Ni=ca("animationiteration"),Ic=ca("animationstart"),lp=ca("transitionend"),Bf=new Map,t0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rc(p,v){Bf.set(p,v),i(v,[p])}for(var cp=0;cp<t0.length;cp++){var Ys=t0[cp],wl=Ys.toLowerCase(),Yg=Ys[0].toUpperCase()+Ys.slice(1);Rc(wl,"on"+Yg)}Rc(oi,"onAnimationEnd"),Rc(Ni,"onAnimationIteration"),Rc(Ic,"onAnimationStart"),Rc("dblclick","onDoubleClick"),Rc("focusin","onFocus"),Rc("focusout","onBlur"),Rc(lp,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function r0(p,v,A){var I=p.type||"unknown-event";p.currentTarget=A,Ne(I,v,void 0,p),p.currentTarget=null}function n0(p,v){v=(v&4)!==0;for(var A=0;A<p.length;A++){var I=p[A],H=I.event;I=I.listeners;e:{var ee=void 0;if(v)for(var me=I.length-1;0<=me;me--){var Te=I[me],qe=Te.instance,xt=Te.currentTarget;if(Te=Te.listener,qe!==ee&&H.isPropagationStopped())break e;r0(H,Te,xt),ee=qe}else for(me=0;me<I.length;me++){if(Te=I[me],qe=Te.instance,xt=Te.currentTarget,Te=Te.listener,qe!==ee&&H.isPropagationStopped())break e;r0(H,Te,xt),ee=qe}}}if(ce)throw p=we,ce=!1,we=null,p}function Aa(p,v){var A=v[vo];A===void 0&&(A=v[vo]=new Set);var I=p+"__bubble";A.has(I)||(a0(v,p,2,!1),A.add(I))}function Kg(p,v,A){var I=0;v&&(I|=4),a0(A,p,I,v)}var up="_reactListening"+Math.random().toString(36).slice(2);function Uf(p){if(!p[up]){p[up]=!0,n.forEach(function(A){A!=="selectionchange"&&(wb.has(A)||Kg(A,!1,p),Kg(A,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[up]||(v[up]=!0,Kg("selectionchange",!1,v))}}function a0(p,v,A,I){switch(Ym(v)){case 1:var H=Pf;break;case 4:H=Gm;break;default:H=wd}A=H.bind(null,v,A,p),H=void 0,!Mr||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(H=!0),I?H!==void 0?p.addEventListener(v,A,{capture:!0,passive:H}):p.addEventListener(v,A,!0):H!==void 0?p.addEventListener(v,A,{passive:H}):p.addEventListener(v,A,!1)}function i0(p,v,A,I,H){var ee=I;if((v&1)===0&&(v&2)===0&&I!==null)e:for(;;){if(I===null)return;var me=I.tag;if(me===3||me===4){var Te=I.stateNode.containerInfo;if(Te===H||Te.nodeType===8&&Te.parentNode===H)break;if(me===4)for(me=I.return;me!==null;){var qe=me.tag;if((qe===3||qe===4)&&(qe=me.stateNode.containerInfo,qe===H||qe.nodeType===8&&qe.parentNode===H))return;me=me.return}for(;Te!==null;){if(me=Td(Te),me===null)return;if(qe=me.tag,qe===5||qe===6){I=ee=me;continue e}Te=Te.parentNode}}I=I.return}ot(function(){var xt=ee,Ut=Or(A),Vt=[];e:{var Bt=Bf.get(p);if(Bt!==void 0){var wr=_d,Er=p;switch(p){case"keypress":if(Kl(A)===0)break e;case"keydown":case"keyup":wr=pn;break;case"focusin":Er="focus",wr=uu;break;case"focusout":Er="blur",wr=uu;break;case"beforeblur":case"afterblur":wr=uu;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wr=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wr=Fy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wr=ii;break;case oi:case Ni:case Ic:wr=Nd;break;case lp:wr=As;break;case"scroll":wr=Km;break;case"wheel":wr=Xl;break;case"copy":case"cut":case"paste":wr=U;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wr=In}var Tr=(v&4)!==0,Bi=!Tr&&p==="scroll",lt=Tr?Bt!==null?Bt+"Capture":null:Bt;Tr=[];for(var Ye=xt,gt;Ye!==null;){gt=Ye;var Zt=gt.stateNode;if(gt.tag===5&&Zt!==null&&(gt=Zt,lt!==null&&(Zt=yt(Ye,lt),Zt!=null&&Tr.push(s0(Ye,Zt,gt)))),Bi)break;Ye=Ye.return}0<Tr.length&&(Bt=new wr(Bt,Er,null,A,Ut),Vt.push({event:Bt,listeners:Tr}))}}if((v&7)===0){e:{if(Bt=p==="mouseover"||p==="pointerover",wr=p==="mouseout"||p==="pointerout",Bt&&A!==fr&&(Er=A.relatedTarget||A.fromElement)&&(Td(Er)||Er[Cs]))break e;if((wr||Bt)&&(Bt=Ut.window===Ut?Ut:(Bt=Ut.ownerDocument)?Bt.defaultView||Bt.parentWindow:window,wr?(Er=A.relatedTarget||A.toElement,wr=xt,Er=Er?Td(Er):null,Er!==null&&(Bi=Se(Er),Er!==Bi||Er.tag!==5&&Er.tag!==6)&&(Er=null)):(wr=null,Er=xt),wr!==Er)){if(Tr=Xh,Zt="onMouseLeave",lt="onMouseEnter",Ye="mouse",(p==="pointerout"||p==="pointerover")&&(Tr=In,Zt="onPointerLeave",lt="onPointerEnter",Ye="pointer"),Bi=wr==null?Bt:zf(wr),gt=Er==null?Bt:zf(Er),Bt=new Tr(Zt,Ye+"leave",wr,A,Ut),Bt.target=Bi,Bt.relatedTarget=gt,Zt=null,Td(Ut)===xt&&(Tr=new Tr(lt,Ye+"enter",Er,A,Ut),Tr.target=gt,Tr.relatedTarget=Bi,Zt=Tr),Bi=Zt,wr&&Er)t:{for(Tr=wr,lt=Er,Ye=0,gt=Tr;gt;gt=qf(gt))Ye++;for(gt=0,Zt=lt;Zt;Zt=qf(Zt))gt++;for(;0<Ye-gt;)Tr=qf(Tr),Ye--;for(;0<gt-Ye;)lt=qf(lt),gt--;for(;Ye--;){if(Tr===lt||lt!==null&&Tr===lt.alternate)break t;Tr=qf(Tr),lt=qf(lt)}Tr=null}else Tr=null;wr!==null&&bb(Vt,Bt,wr,Tr,!1),Er!==null&&Bi!==null&&bb(Vt,Bi,Er,Tr,!0)}}e:{if(Bt=xt?zf(xt):window,wr=Bt.nodeName&&Bt.nodeName.toLowerCase(),wr==="select"||wr==="input"&&Bt.type==="file")var Dr=ip;else if(ap(Bt))if(Qm)Dr=op;else{Dr=fu;var zr=Ed}else(wr=Bt.nodeName)&&wr.toLowerCase()==="input"&&(Bt.type==="checkbox"||Bt.type==="radio")&&(Dr=hu);if(Dr&&(Dr=Dr(p,xt))){Vs(Vt,Dr,A,Ut);break e}zr&&zr(p,Bt,xt),p==="focusout"&&(zr=Bt._wrapperState)&&zr.controlled&&Bt.type==="number"&&it(Bt,"number",Bt.value)}switch(zr=xt?zf(xt):window,p){case"focusin":(ap(zr)||zr.contentEditable==="true")&&(Jo=zr,gu=xt,Dc=null);break;case"focusout":Dc=gu=Jo=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,yu(Vt,A,Ut);break;case"selectionchange":if($f)break;case"keydown":case"keyup":yu(Vt,A,Ut)}var Vr;if(xl)e:{switch(p){case"compositionstart":var un="onCompositionStart";break e;case"compositionend":un="onCompositionEnd";break e;case"compositionupdate":un="onCompositionUpdate";break e}un=void 0}else si?ep(p,A)&&(un="onCompositionEnd"):p==="keydown"&&A.keyCode===229&&(un="onCompositionStart");un&&(Zh&&A.locale!=="ko"&&(si||un!=="onCompositionStart"?un==="onCompositionEnd"&&si&&(Vr=Vg()):(Yl=Ut,vl="value"in Yl?Yl.value:Yl.textContent,si=!0)),zr=Xg(xt,un),0<zr.length&&(un=new Pe(un,p,null,A,Ut),Vt.push({event:un,listeners:zr}),Vr?un.data=Vr:(Vr=Rf(A),Vr!==null&&(un.data=Vr)))),(Vr=Zm?tp(p,A):rp(p,A))&&(xt=Xg(xt,"onBeforeInput"),0<xt.length&&(Ut=new Pe("onBeforeInput","beforeinput",null,A,Ut),Vt.push({event:Ut,listeners:xt}),Ut.data=Vr))}n0(Vt,v)})}function s0(p,v,A){return{instance:p,listener:v,currentTarget:A}}function Xg(p,v){for(var A=v+"Capture",I=[];p!==null;){var H=p,ee=H.stateNode;H.tag===5&&ee!==null&&(H=ee,ee=yt(p,A),ee!=null&&I.unshift(s0(p,ee,H)),ee=yt(p,v),ee!=null&&I.push(s0(p,ee,H))),p=p.return}return I}function qf(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function bb(p,v,A,I,H){for(var ee=v._reactName,me=[];A!==null&&A!==I;){var Te=A,qe=Te.alternate,xt=Te.stateNode;if(qe!==null&&qe===I)break;Te.tag===5&&xt!==null&&(Te=xt,H?(qe=yt(A,ee),qe!=null&&me.unshift(s0(A,qe,Te))):H||(qe=yt(A,ee),qe!=null&&me.push(s0(A,qe,Te)))),A=A.return}me.length!==0&&p.push({event:v,listeners:me})}var m3=/\r\n?/g,g3=/\u0000|\uFFFD/g;function _b(p){return(typeof p=="string"?p:""+p).replace(m3,`
`).replace(g3,"")}function Jg(p,v,A){if(v=_b(v),_b(p)!==v&&A)throw Error(r(425))}function dp(){}var o0=null,Wf=null;function Ly(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var jy=typeof setTimeout=="function"?setTimeout:void 0,Sb=typeof clearTimeout=="function"?clearTimeout:void 0,Nb=typeof Promise=="function"?Promise:void 0,v3=typeof queueMicrotask=="function"?queueMicrotask:typeof Nb<"u"?function(p){return Nb.resolve(null).then(p).catch(y3)}:jy;function y3(p){setTimeout(function(){throw p})}function $y(p,v){var A=v,I=0;do{var H=A.nextSibling;if(p.removeChild(A),H&&H.nodeType===8)if(A=H.data,A==="/$"){if(I===0){p.removeChild(H),Gl(v);return}I--}else A!=="$"&&A!=="$?"&&A!=="$!"||I++;A=H}while(A);Gl(v)}function Ks(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?")break;if(v==="/$")return null}}return p}function bl(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var A=p.data;if(A==="$"||A==="$!"||A==="$?"){if(v===0)return p;v--}else A==="/$"&&v++}p=p.previousSibling}return null}var go=Math.random().toString(36).slice(2),Mc="__reactFiber$"+go,fp="__reactProps$"+go,Cs="__reactContainer$"+go,vo="__reactEvents$"+go,x3="__reactListeners$"+go,w3="__reactHandles$"+go;function Td(p){var v=p[Mc];if(v)return v;for(var A=p.parentNode;A;){if(v=A[Cs]||A[Mc]){if(A=v.alternate,v.child!==null||A!==null&&A.child!==null)for(p=bl(p);p!==null;){if(A=p[Mc])return A;p=bl(p)}return v}p=A,A=p.parentNode}return null}function hp(p){return p=p[Mc]||p[Cs],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function zf(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(r(33))}function l0(p){return p[fp]||null}var By=[],xu=-1;function Jl(p){return{current:p}}function ua(p){0>xu||(p.current=By[xu],By[xu]=null,xu--)}function ga(p,v){xu++,By[xu]=p.current,p.current=v}var Od={},ms=Jl(Od),yo=Jl(!1),Vf=Od;function pp(p,v){var A=p.type.contextTypes;if(!A)return Od;var I=p.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===v)return I.__reactInternalMemoizedMaskedChildContext;var H={},ee;for(ee in A)H[ee]=v[ee];return I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=v,p.__reactInternalMemoizedMaskedChildContext=H),H}function xo(p){return p=p.childContextTypes,p!=null}function Zg(){ua(yo),ua(ms)}function Ab(p,v,A){if(ms.current!==Od)throw Error(r(168));ga(ms,v),ga(yo,A)}function Uy(p,v,A){var I=p.stateNode;if(v=v.childContextTypes,typeof I.getChildContext!="function")return A;I=I.getChildContext();for(var H in I)if(!(H in v))throw Error(r(108,oe(p)||"Unknown",H));return G({},A,I)}function Hf(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Od,Vf=ms.current,ga(ms,p),ga(yo,yo.current),!0}function kb(p,v,A){var I=p.stateNode;if(!I)throw Error(r(169));A?(p=Uy(p,v,Vf),I.__reactInternalMemoizedMergedChildContext=p,ua(yo),ua(ms),ga(ms,p)):ua(yo),ga(yo,A)}var wu=null,c0=!1,k=!1;function M(p){wu===null?wu=[p]:wu.push(p)}function K(p){c0=!0,M(p)}function ae(){if(!k&&wu!==null){k=!0;var p=0,v=Yn;try{var A=wu;for(Yn=1;p<A.length;p++){var I=A[p];do I=I(!0);while(I!==null)}wu=null,c0=!1}catch(H){throw wu!==null&&(wu=wu.slice(p+1)),Ft(qn,ae),H}finally{Yn=v,k=!1}}return null}var le=[],pe=0,ge=null,ye=0,be=[],Ae=0,Ue=null,rt=1,nt="";function Ke(p,v){le[pe++]=ye,le[pe++]=ge,ge=p,ye=v}function It(p,v,A){be[Ae++]=rt,be[Ae++]=nt,be[Ae++]=Ue,Ue=p;var I=rt;p=nt;var H=32-Va(I)-1;I&=~(1<<H),A+=1;var ee=32-Va(v)+H;if(30<ee){var me=H-H%5;ee=(I&(1<<me)-1).toString(32),I>>=me,H-=me,rt=1<<32-Va(v)+H|A<<H|I,nt=ee+p}else rt=1<<ee|A<<H|I,nt=p}function _t(p){p.return!==null&&(Ke(p,1),It(p,1,0))}function We(p){for(;p===ge;)ge=le[--pe],le[pe]=null,ye=le[--pe],le[pe]=null;for(;p===Ue;)Ue=be[--Ae],be[Ae]=null,nt=be[--Ae],be[Ae]=null,rt=be[--Ae],be[Ae]=null}var ze=null,Ct=null,Et=!1,Tt=null;function mr(p,v){var A=Uc(5,null,null,0);A.elementType="DELETED",A.stateNode=v,A.return=p,v=p.deletions,v===null?(p.deletions=[A],p.flags|=16):v.push(A)}function ir(p,v){switch(p.tag){case 5:var A=p.type;return v=v.nodeType!==1||A.toLowerCase()!==v.nodeName.toLowerCase()?null:v,v!==null?(p.stateNode=v,ze=p,Ct=Ks(v.firstChild),!0):!1;case 6:return v=p.pendingProps===""||v.nodeType!==3?null:v,v!==null?(p.stateNode=v,ze=p,Ct=null,!0):!1;case 13:return v=v.nodeType!==8?null:v,v!==null?(A=Ue!==null?{id:rt,overflow:nt}:null,p.memoizedState={dehydrated:v,treeContext:A,retryLane:1073741824},A=Uc(18,null,null,0),A.stateNode=v,A.return=p,p.child=A,ze=p,Ct=null,!0):!1;default:return!1}}function Lr(p){return(p.mode&1)!==0&&(p.flags&128)===0}function sr(p){if(Et){var v=Ct;if(v){var A=v;if(!ir(p,v)){if(Lr(p))throw Error(r(418));v=Ks(A.nextSibling);var I=ze;v&&ir(p,v)?mr(I,A):(p.flags=p.flags&-4097|2,Et=!1,ze=p)}}else{if(Lr(p))throw Error(r(418));p.flags=p.flags&-4097|2,Et=!1,ze=p}}}function Wn(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ze=p}function zn(p){if(p!==ze)return!1;if(!Et)return Wn(p),Et=!0,!1;var v;if((v=p.tag!==3)&&!(v=p.tag!==5)&&(v=p.type,v=v!=="head"&&v!=="body"&&!Ly(p.type,p.memoizedProps)),v&&(v=Ct)){if(Lr(p))throw Ln(),Error(r(418));for(;v;)mr(p,v),v=Ks(v.nextSibling)}if(Wn(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8){var A=p.data;if(A==="/$"){if(v===0){Ct=Ks(p.nextSibling);break e}v--}else A!=="$"&&A!=="$!"&&A!=="$?"||v++}p=p.nextSibling}Ct=null}}else Ct=ze?Ks(p.stateNode.nextSibling):null;return!0}function Ln(){for(var p=Ct;p;)p=Ks(p.nextSibling)}function yn(){Ct=ze=null,Et=!1}function da(p){Tt===null?Tt=[p]:Tt.push(p)}var va=E.ReactCurrentBatchConfig;function nn(p,v,A){if(p=A.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(r(309));var I=A.stateNode}if(!I)throw Error(r(147,p));var H=I,ee=""+p;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===ee?v.ref:(v=function(me){var Te=H.refs;me===null?delete Te[ee]:Te[ee]=me},v._stringRef=ee,v)}if(typeof p!="string")throw Error(r(284));if(!A._owner)throw Error(r(290,p))}return p}function Ya(p,v){throw p=Object.prototype.toString.call(v),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p))}function Xs(p){var v=p._init;return v(p._payload)}function fi(p){function v(lt,Ye){if(p){var gt=lt.deletions;gt===null?(lt.deletions=[Ye],lt.flags|=16):gt.push(Ye)}}function A(lt,Ye){if(!p)return null;for(;Ye!==null;)v(lt,Ye),Ye=Ye.sibling;return null}function I(lt,Ye){for(lt=new Map;Ye!==null;)Ye.key!==null?lt.set(Ye.key,Ye):lt.set(Ye.index,Ye),Ye=Ye.sibling;return lt}function H(lt,Ye){return lt=kp(lt,Ye),lt.index=0,lt.sibling=null,lt}function ee(lt,Ye,gt){return lt.index=gt,p?(gt=lt.alternate,gt!==null?(gt=gt.index,gt<Ye?(lt.flags|=2,Ye):gt):(lt.flags|=2,Ye)):(lt.flags|=1048576,Ye)}function me(lt){return p&&lt.alternate===null&&(lt.flags|=2),lt}function Te(lt,Ye,gt,Zt){return Ye===null||Ye.tag!==6?(Ye=K3(gt,lt.mode,Zt),Ye.return=lt,Ye):(Ye=H(Ye,gt),Ye.return=lt,Ye)}function qe(lt,Ye,gt,Zt){var Dr=gt.type;return Dr===P?Ut(lt,Ye,gt.props.children,Zt,gt.key):Ye!==null&&(Ye.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===re&&Xs(Dr)===Ye.type)?(Zt=H(Ye,gt.props),Zt.ref=nn(lt,Ye,gt),Zt.return=lt,Zt):(Zt=Hb(gt.type,gt.key,gt.props,null,lt.mode,Zt),Zt.ref=nn(lt,Ye,gt),Zt.return=lt,Zt)}function xt(lt,Ye,gt,Zt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==gt.containerInfo||Ye.stateNode.implementation!==gt.implementation?(Ye=X3(gt,lt.mode,Zt),Ye.return=lt,Ye):(Ye=H(Ye,gt.children||[]),Ye.return=lt,Ye)}function Ut(lt,Ye,gt,Zt,Dr){return Ye===null||Ye.tag!==7?(Ye=v0(gt,lt.mode,Zt,Dr),Ye.return=lt,Ye):(Ye=H(Ye,gt),Ye.return=lt,Ye)}function Vt(lt,Ye,gt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ye=K3(""+Ye,lt.mode,gt),Ye.return=lt,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case C:return gt=Hb(Ye.type,Ye.key,Ye.props,null,lt.mode,gt),gt.ref=nn(lt,null,Ye),gt.return=lt,gt;case D:return Ye=X3(Ye,lt.mode,gt),Ye.return=lt,Ye;case re:var Zt=Ye._init;return Vt(lt,Zt(Ye._payload),gt)}if(Le(Ye)||B(Ye))return Ye=v0(Ye,lt.mode,gt,null),Ye.return=lt,Ye;Ya(lt,Ye)}return null}function Bt(lt,Ye,gt,Zt){var Dr=Ye!==null?Ye.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Dr!==null?null:Te(lt,Ye,""+gt,Zt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case C:return gt.key===Dr?qe(lt,Ye,gt,Zt):null;case D:return gt.key===Dr?xt(lt,Ye,gt,Zt):null;case re:return Dr=gt._init,Bt(lt,Ye,Dr(gt._payload),Zt)}if(Le(gt)||B(gt))return Dr!==null?null:Ut(lt,Ye,gt,Zt,null);Ya(lt,gt)}return null}function wr(lt,Ye,gt,Zt,Dr){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return lt=lt.get(gt)||null,Te(Ye,lt,""+Zt,Dr);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case C:return lt=lt.get(Zt.key===null?gt:Zt.key)||null,qe(Ye,lt,Zt,Dr);case D:return lt=lt.get(Zt.key===null?gt:Zt.key)||null,xt(Ye,lt,Zt,Dr);case re:var zr=Zt._init;return wr(lt,Ye,gt,zr(Zt._payload),Dr)}if(Le(Zt)||B(Zt))return lt=lt.get(gt)||null,Ut(Ye,lt,Zt,Dr,null);Ya(Ye,Zt)}return null}function Er(lt,Ye,gt,Zt){for(var Dr=null,zr=null,Vr=Ye,un=Ye=0,Ds=null;Vr!==null&&un<gt.length;un++){Vr.index>un?(Ds=Vr,Vr=null):Ds=Vr.sibling;var aa=Bt(lt,Vr,gt[un],Zt);if(aa===null){Vr===null&&(Vr=Ds);break}p&&Vr&&aa.alternate===null&&v(lt,Vr),Ye=ee(aa,Ye,un),zr===null?Dr=aa:zr.sibling=aa,zr=aa,Vr=Ds}if(un===gt.length)return A(lt,Vr),Et&&Ke(lt,un),Dr;if(Vr===null){for(;un<gt.length;un++)Vr=Vt(lt,gt[un],Zt),Vr!==null&&(Ye=ee(Vr,Ye,un),zr===null?Dr=Vr:zr.sibling=Vr,zr=Vr);return Et&&Ke(lt,un),Dr}for(Vr=I(lt,Vr);un<gt.length;un++)Ds=wr(Vr,lt,un,gt[un],Zt),Ds!==null&&(p&&Ds.alternate!==null&&Vr.delete(Ds.key===null?un:Ds.key),Ye=ee(Ds,Ye,un),zr===null?Dr=Ds:zr.sibling=Ds,zr=Ds);return p&&Vr.forEach(function(Ep){return v(lt,Ep)}),Et&&Ke(lt,un),Dr}function Tr(lt,Ye,gt,Zt){var Dr=B(gt);if(typeof Dr!="function")throw Error(r(150));if(gt=Dr.call(gt),gt==null)throw Error(r(151));for(var zr=Dr=null,Vr=Ye,un=Ye=0,Ds=null,aa=gt.next();Vr!==null&&!aa.done;un++,aa=gt.next()){Vr.index>un?(Ds=Vr,Vr=null):Ds=Vr.sibling;var Ep=Bt(lt,Vr,aa.value,Zt);if(Ep===null){Vr===null&&(Vr=Ds);break}p&&Vr&&Ep.alternate===null&&v(lt,Vr),Ye=ee(Ep,Ye,un),zr===null?Dr=Ep:zr.sibling=Ep,zr=Ep,Vr=Ds}if(aa.done)return A(lt,Vr),Et&&Ke(lt,un),Dr;if(Vr===null){for(;!aa.done;un++,aa=gt.next())aa=Vt(lt,aa.value,Zt),aa!==null&&(Ye=ee(aa,Ye,un),zr===null?Dr=aa:zr.sibling=aa,zr=aa);return Et&&Ke(lt,un),Dr}for(Vr=I(lt,Vr);!aa.done;un++,aa=gt.next())aa=wr(Vr,lt,un,aa.value,Zt),aa!==null&&(p&&aa.alternate!==null&&Vr.delete(aa.key===null?un:aa.key),Ye=ee(aa,Ye,un),zr===null?Dr=aa:zr.sibling=aa,zr=aa);return p&&Vr.forEach(function(Zoe){return v(lt,Zoe)}),Et&&Ke(lt,un),Dr}function Bi(lt,Ye,gt,Zt){if(typeof gt=="object"&&gt!==null&&gt.type===P&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case C:e:{for(var Dr=gt.key,zr=Ye;zr!==null;){if(zr.key===Dr){if(Dr=gt.type,Dr===P){if(zr.tag===7){A(lt,zr.sibling),Ye=H(zr,gt.props.children),Ye.return=lt,lt=Ye;break e}}else if(zr.elementType===Dr||typeof Dr=="object"&&Dr!==null&&Dr.$$typeof===re&&Xs(Dr)===zr.type){A(lt,zr.sibling),Ye=H(zr,gt.props),Ye.ref=nn(lt,zr,gt),Ye.return=lt,lt=Ye;break e}A(lt,zr);break}else v(lt,zr);zr=zr.sibling}gt.type===P?(Ye=v0(gt.props.children,lt.mode,Zt,gt.key),Ye.return=lt,lt=Ye):(Zt=Hb(gt.type,gt.key,gt.props,null,lt.mode,Zt),Zt.ref=nn(lt,Ye,gt),Zt.return=lt,lt=Zt)}return me(lt);case D:e:{for(zr=gt.key;Ye!==null;){if(Ye.key===zr)if(Ye.tag===4&&Ye.stateNode.containerInfo===gt.containerInfo&&Ye.stateNode.implementation===gt.implementation){A(lt,Ye.sibling),Ye=H(Ye,gt.children||[]),Ye.return=lt,lt=Ye;break e}else{A(lt,Ye);break}else v(lt,Ye);Ye=Ye.sibling}Ye=X3(gt,lt.mode,Zt),Ye.return=lt,lt=Ye}return me(lt);case re:return zr=gt._init,Bi(lt,Ye,zr(gt._payload),Zt)}if(Le(gt))return Er(lt,Ye,gt,Zt);if(B(gt))return Tr(lt,Ye,gt,Zt);Ya(lt,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"?(gt=""+gt,Ye!==null&&Ye.tag===6?(A(lt,Ye.sibling),Ye=H(Ye,gt),Ye.return=lt,lt=Ye):(A(lt,Ye),Ye=K3(gt,lt.mode,Zt),Ye.return=lt,lt=Ye),me(lt)):A(lt,Ye)}return Bi}var Li=fi(!0),ra=fi(!1),Ps=Jl(null),Ts=null,Ka=null,ji=null;function gs(){ji=Ka=Ts=null}function wo(p){var v=Ps.current;ua(Ps),p._currentValue=v}function _l(p,v,A){for(;p!==null;){var I=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,I!==null&&(I.childLanes|=v)):I!==null&&(I.childLanes&v)!==v&&(I.childLanes|=v),p===A)break;p=p.return}}function Xa(p,v){Ts=p,ji=Ka=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&v)!==0&&(kl=!0),p.firstContext=null)}function Ai(p){var v=p._currentValue;if(ji!==p)if(p={context:p,memoizedValue:v,next:null},Ka===null){if(Ts===null)throw Error(r(308));Ka=p,Ts.dependencies={lanes:0,firstContext:p}}else Ka=Ka.next=p;return v}var Zo=null;function Dd(p){Zo===null?Zo=[p]:Zo.push(p)}function bu(p,v,A,I){var H=v.interleaved;return H===null?(A.next=A,Dd(v)):(A.next=H.next,H.next=A),v.interleaved=A,na(p,I)}function na(p,v){p.lanes|=v;var A=p.alternate;for(A!==null&&(A.lanes|=v),A=p,p=p.return;p!==null;)p.childLanes|=v,A=p.alternate,A!==null&&(A.childLanes|=v),A=p,p=p.return;return A.tag===3?A.stateNode:null}var Fc=!1;function Qg(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qy(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Sl(p,v){return{eventTime:p,lane:v,tag:0,payload:null,callback:null,next:null}}function Nl(p,v,A){var I=p.updateQueue;if(I===null)return null;if(I=I.shared,(Xn&2)!==0){var H=I.pending;return H===null?v.next=v:(v.next=H.next,H.next=v),I.pending=v,na(p,A)}return H=I.interleaved,H===null?(v.next=v,Dd(I)):(v.next=H.next,H.next=v),I.interleaved=v,na(p,A)}function Gf(p,v,A){if(v=v.updateQueue,v!==null&&(v=v.shared,(A&4194240)!==0)){var I=v.lanes;I&=p.pendingLanes,A|=I,v.lanes=A,Uh(p,A)}}function Al(p,v){var A=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,A===I)){var H=null,ee=null;if(A=A.firstBaseUpdate,A!==null){do{var me={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};ee===null?H=ee=me:ee=ee.next=me,A=A.next}while(A!==null);ee===null?H=ee=v:ee=ee.next=v}else H=ee=v;A={baseState:I.baseState,firstBaseUpdate:H,lastBaseUpdate:ee,shared:I.shared,effects:I.effects},p.updateQueue=A;return}p=A.lastBaseUpdate,p===null?A.firstBaseUpdate=v:p.next=v,A.lastBaseUpdate=v}function _u(p,v,A,I){var H=p.updateQueue;Fc=!1;var ee=H.firstBaseUpdate,me=H.lastBaseUpdate,Te=H.shared.pending;if(Te!==null){H.shared.pending=null;var qe=Te,xt=qe.next;qe.next=null,me===null?ee=xt:me.next=xt,me=qe;var Ut=p.alternate;Ut!==null&&(Ut=Ut.updateQueue,Te=Ut.lastBaseUpdate,Te!==me&&(Te===null?Ut.firstBaseUpdate=xt:Te.next=xt,Ut.lastBaseUpdate=qe))}if(ee!==null){var Vt=H.baseState;me=0,Ut=xt=qe=null,Te=ee;do{var Bt=Te.lane,wr=Te.eventTime;if((I&Bt)===Bt){Ut!==null&&(Ut=Ut.next={eventTime:wr,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var Er=p,Tr=Te;switch(Bt=v,wr=A,Tr.tag){case 1:if(Er=Tr.payload,typeof Er=="function"){Vt=Er.call(wr,Vt,Bt);break e}Vt=Er;break e;case 3:Er.flags=Er.flags&-65537|128;case 0:if(Er=Tr.payload,Bt=typeof Er=="function"?Er.call(wr,Vt,Bt):Er,Bt==null)break e;Vt=G({},Vt,Bt);break e;case 2:Fc=!0}}Te.callback!==null&&Te.lane!==0&&(p.flags|=64,Bt=H.effects,Bt===null?H.effects=[Te]:Bt.push(Te))}else wr={eventTime:wr,lane:Bt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},Ut===null?(xt=Ut=wr,qe=Vt):Ut=Ut.next=wr,me|=Bt;if(Te=Te.next,Te===null){if(Te=H.shared.pending,Te===null)break;Bt=Te,Te=Bt.next,Bt.next=null,H.lastBaseUpdate=Bt,H.shared.pending=null}}while(!0);if(Ut===null&&(qe=Vt),H.baseState=qe,H.firstBaseUpdate=xt,H.lastBaseUpdate=Ut,v=H.shared.interleaved,v!==null){H=v;do me|=H.lane,H=H.next;while(H!==v)}else ee===null&&(H.shared.lanes=0);h0|=me,p.lanes=me,p.memoizedState=Vt}}function Yf(p,v,A){if(p=v.effects,v.effects=null,p!==null)for(v=0;v<p.length;v++){var I=p[v],H=I.callback;if(H!==null){if(I.callback=null,I=A,typeof H!="function")throw Error(r(191,H));H.call(I)}}}var mp={},Qo=Jl(mp),gp=Jl(mp),Id=Jl(mp);function Su(p){if(p===mp)throw Error(r(174));return p}function vp(p,v){switch(ga(Id,v),ga(gp,p),ga(Qo,mp),p=v.nodeType,p){case 9:case 11:v=(v=v.documentElement)?v.namespaceURI:dt(null,"");break;default:p=p===8?v.parentNode:v,v=p.namespaceURI||null,p=p.tagName,v=dt(v,p)}ua(Qo),ga(Qo,v)}function Lc(){ua(Qo),ua(gp),ua(Id)}function Eb(p){Su(Id.current);var v=Su(Qo.current),A=dt(v,p.type);v!==A&&(ga(gp,p),ga(Qo,A))}function Wy(p){gp.current===p&&(ua(Qo),ua(gp))}var Ia=Jl(0);function Zl(p){for(var v=p;v!==null;){if(v.tag===13){var A=v.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var zy=[];function Vy(){for(var p=0;p<zy.length;p++)zy[p]._workInProgressVersionPrimary=null;zy.length=0}var ev=E.ReactCurrentDispatcher,tv=E.ReactCurrentBatchConfig,jc=0,La=null,ki=null,hi=null,yp=!1,Nu=!1,xp=0,b3=0;function $i(){throw Error(r(321))}function rv(p,v){if(v===null)return!1;for(var A=0;A<v.length&&A<p.length;A++)if(!Kn(p[A],v[A]))return!1;return!0}function u0(p,v,A,I,H,ee){if(jc=ee,La=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,ev.current=p===null||p.memoizedState===null?Noe:Aoe,p=A(I,H),Nu){ee=0;do{if(Nu=!1,xp=0,25<=ee)throw Error(r(301));ee+=1,hi=ki=null,v.updateQueue=null,ev.current=koe,p=A(I,H)}while(Nu)}if(ev.current=Db,v=ki!==null&&ki.next!==null,jc=0,hi=ki=La=null,yp=!1,v)throw Error(r(300));return p}function $c(){var p=xp!==0;return xp=0,p}function Ql(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?La.memoizedState=hi=p:hi=hi.next=p,hi}function el(){if(ki===null){var p=La.alternate;p=p!==null?p.memoizedState:null}else p=ki.next;var v=hi===null?La.memoizedState:hi.next;if(v!==null)hi=v,ki=p;else{if(p===null)throw Error(r(310));ki=p,p={memoizedState:ki.memoizedState,baseState:ki.baseState,baseQueue:ki.baseQueue,queue:ki.queue,next:null},hi===null?La.memoizedState=hi=p:hi=hi.next=p}return hi}function d0(p,v){return typeof v=="function"?v(p):v}function nv(p){var v=el(),A=v.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=p;var I=ki,H=I.baseQueue,ee=A.pending;if(ee!==null){if(H!==null){var me=H.next;H.next=ee.next,ee.next=me}I.baseQueue=H=ee,A.pending=null}if(H!==null){ee=H.next,I=I.baseState;var Te=me=null,qe=null,xt=ee;do{var Ut=xt.lane;if((jc&Ut)===Ut)qe!==null&&(qe=qe.next={lane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),I=xt.hasEagerState?xt.eagerState:p(I,xt.action);else{var Vt={lane:Ut,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null};qe===null?(Te=qe=Vt,me=I):qe=qe.next=Vt,La.lanes|=Ut,h0|=Ut}xt=xt.next}while(xt!==null&&xt!==ee);qe===null?me=I:qe.next=Te,Kn(I,v.memoizedState)||(kl=!0),v.memoizedState=I,v.baseState=me,v.baseQueue=qe,A.lastRenderedState=I}if(p=A.interleaved,p!==null){H=p;do ee=H.lane,La.lanes|=ee,h0|=ee,H=H.next;while(H!==p)}else H===null&&(A.lanes=0);return[v.memoizedState,A.dispatch]}function Rd(p){var v=el(),A=v.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=p;var I=A.dispatch,H=A.pending,ee=v.memoizedState;if(H!==null){A.pending=null;var me=H=H.next;do ee=p(ee,me.action),me=me.next;while(me!==H);Kn(ee,v.memoizedState)||(kl=!0),v.memoizedState=ee,v.baseQueue===null&&(v.baseState=ee),A.lastRenderedState=ee}return[ee,I]}function Cb(){}function Hy(p,v){var A=La,I=el(),H=v(),ee=!Kn(I.memoizedState,H);if(ee&&(I.memoizedState=H,kl=!0),I=I.queue,sv(Tb.bind(null,A,I,p),[p]),I.getSnapshot!==v||ee||hi!==null&&hi.memoizedState.tag&1){if(A.flags|=2048,tl(9,Gy.bind(null,A,I,H,v),void 0,null),Os===null)throw Error(r(349));(jc&30)!==0||Pb(A,v,H)}return H}function Pb(p,v,A){p.flags|=16384,p={getSnapshot:v,value:A},v=La.updateQueue,v===null?(v={lastEffect:null,stores:null},La.updateQueue=v,v.stores=[p]):(A=v.stores,A===null?v.stores=[p]:A.push(p))}function Gy(p,v,A,I){v.value=A,v.getSnapshot=I,wp(v)&&av(p)}function Tb(p,v,A){return A(function(){wp(v)&&av(p)})}function wp(p){var v=p.getSnapshot;p=p.value;try{var A=v();return!Kn(p,A)}catch{return!0}}function av(p){var v=na(p,1);v!==null&&Pu(v,p,1,-1)}function f0(p){var v=Ql();return typeof p=="function"&&(p=p()),v.memoizedState=v.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d0,lastRenderedState:p},v.queue=p,p=p.dispatch=Soe.bind(null,La,p),[v.memoizedState,p]}function tl(p,v,A,I){return p={tag:p,create:v,destroy:A,deps:I,next:null},v=La.updateQueue,v===null?(v={lastEffect:null,stores:null},La.updateQueue=v,v.lastEffect=p.next=p):(A=v.lastEffect,A===null?v.lastEffect=p.next=p:(I=A.next,A.next=p,p.next=I,v.lastEffect=p)),p}function Au(){return el().memoizedState}function ec(p,v,A,I){var H=Ql();La.flags|=p,H.memoizedState=tl(1|v,A,void 0,I===void 0?null:I)}function Kf(p,v,A,I){var H=el();I=I===void 0?null:I;var ee=void 0;if(ki!==null){var me=ki.memoizedState;if(ee=me.destroy,I!==null&&rv(I,me.deps)){H.memoizedState=tl(v,A,ee,I);return}}La.flags|=p,H.memoizedState=tl(1|v,A,ee,I)}function iv(p,v){return ec(8390656,8,p,v)}function sv(p,v){return Kf(2048,8,p,v)}function Ob(p,v){return Kf(4,2,p,v)}function ov(p,v){return Kf(4,4,p,v)}function lv(p,v){if(typeof v=="function")return p=p(),v(p),function(){v(null)};if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function U7(p,v,A){return A=A!=null?A.concat([p]):null,Kf(4,4,lv.bind(null,v,p),A)}function _3(){}function q7(p,v){var A=el();v=v===void 0?null:v;var I=A.memoizedState;return I!==null&&v!==null&&rv(v,I[1])?I[0]:(A.memoizedState=[p,v],p)}function W7(p,v){var A=el();v=v===void 0?null:v;var I=A.memoizedState;return I!==null&&v!==null&&rv(v,I[1])?I[0]:(p=p(),A.memoizedState=[p,v],p)}function z7(p,v,A){return(jc&21)===0?(p.baseState&&(p.baseState=!1,kl=!0),p.memoizedState=A):(Kn(A,v)||(A=Wm(),La.lanes|=A,h0|=A,p.baseState=!0),v)}function boe(p,v){var A=Yn;Yn=A!==0&&4>A?A:4,p(!0);var I=tv.transition;tv.transition={};try{p(!1),v()}finally{Yn=A,tv.transition=I}}function V7(){return el().memoizedState}function _oe(p,v,A){var I=Np(p);if(A={lane:I,action:A,hasEagerState:!1,eagerState:null,next:null},H7(p))G7(v,A);else if(A=bu(p,v,A,I),A!==null){var H=nl();Pu(A,p,I,H),Y7(A,v,I)}}function Soe(p,v,A){var I=Np(p),H={lane:I,action:A,hasEagerState:!1,eagerState:null,next:null};if(H7(p))G7(v,H);else{var ee=p.alternate;if(p.lanes===0&&(ee===null||ee.lanes===0)&&(ee=v.lastRenderedReducer,ee!==null))try{var me=v.lastRenderedState,Te=ee(me,A);if(H.hasEagerState=!0,H.eagerState=Te,Kn(Te,me)){var qe=v.interleaved;qe===null?(H.next=H,Dd(v)):(H.next=qe.next,qe.next=H),v.interleaved=H;return}}catch{}finally{}A=bu(p,v,H,I),A!==null&&(H=nl(),Pu(A,p,I,H),Y7(A,v,I))}}function H7(p){var v=p.alternate;return p===La||v!==null&&v===La}function G7(p,v){Nu=yp=!0;var A=p.pending;A===null?v.next=v:(v.next=A.next,A.next=v),p.pending=v}function Y7(p,v,A){if((A&4194240)!==0){var I=v.lanes;I&=p.pendingLanes,A|=I,v.lanes=A,Uh(p,A)}}var Db={readContext:Ai,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},Noe={readContext:Ai,useCallback:function(p,v){return Ql().memoizedState=[p,v===void 0?null:v],p},useContext:Ai,useEffect:iv,useImperativeHandle:function(p,v,A){return A=A!=null?A.concat([p]):null,ec(4194308,4,lv.bind(null,v,p),A)},useLayoutEffect:function(p,v){return ec(4194308,4,p,v)},useInsertionEffect:function(p,v){return ec(4,2,p,v)},useMemo:function(p,v){var A=Ql();return v=v===void 0?null:v,p=p(),A.memoizedState=[p,v],p},useReducer:function(p,v,A){var I=Ql();return v=A!==void 0?A(v):v,I.memoizedState=I.baseState=v,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:v},I.queue=p,p=p.dispatch=_oe.bind(null,La,p),[I.memoizedState,p]},useRef:function(p){var v=Ql();return p={current:p},v.memoizedState=p},useState:f0,useDebugValue:_3,useDeferredValue:function(p){return Ql().memoizedState=p},useTransition:function(){var p=f0(!1),v=p[0];return p=boe.bind(null,p[1]),Ql().memoizedState=p,[v,p]},useMutableSource:function(){},useSyncExternalStore:function(p,v,A){var I=La,H=Ql();if(Et){if(A===void 0)throw Error(r(407));A=A()}else{if(A=v(),Os===null)throw Error(r(349));(jc&30)!==0||Pb(I,v,A)}H.memoizedState=A;var ee={value:A,getSnapshot:v};return H.queue=ee,iv(Tb.bind(null,I,ee,p),[p]),I.flags|=2048,tl(9,Gy.bind(null,I,ee,A,v),void 0,null),A},useId:function(){var p=Ql(),v=Os.identifierPrefix;if(Et){var A=nt,I=rt;A=(I&~(1<<32-Va(I)-1)).toString(32)+A,v=":"+v+"R"+A,A=xp++,0<A&&(v+="H"+A.toString(32)),v+=":"}else A=b3++,v=":"+v+"r"+A.toString(32)+":";return p.memoizedState=v},unstable_isNewReconciler:!1},Aoe={readContext:Ai,useCallback:q7,useContext:Ai,useEffect:sv,useImperativeHandle:U7,useInsertionEffect:Ob,useLayoutEffect:ov,useMemo:W7,useReducer:nv,useRef:Au,useState:function(){return nv(d0)},useDebugValue:_3,useDeferredValue:function(p){var v=el();return z7(v,ki.memoizedState,p)},useTransition:function(){var p=nv(d0)[0],v=el().memoizedState;return[p,v]},useMutableSource:Cb,useSyncExternalStore:Hy,useId:V7,unstable_isNewReconciler:!1},koe={readContext:Ai,useCallback:q7,useContext:Ai,useEffect:sv,useImperativeHandle:U7,useInsertionEffect:Ob,useLayoutEffect:ov,useMemo:W7,useReducer:Rd,useRef:Au,useState:function(){return Rd(d0)},useDebugValue:_3,useDeferredValue:function(p){var v=el();return ki===null?v.memoizedState=p:z7(v,ki.memoizedState,p)},useTransition:function(){var p=Rd(d0)[0],v=el().memoizedState;return[p,v]},useMutableSource:Cb,useSyncExternalStore:Hy,useId:V7,unstable_isNewReconciler:!1};function ku(p,v){if(p&&p.defaultProps){v=G({},v),p=p.defaultProps;for(var A in p)v[A]===void 0&&(v[A]=p[A]);return v}return v}function S3(p,v,A,I){v=p.memoizedState,A=A(I,v),A=A==null?v:G({},v,A),p.memoizedState=A,p.lanes===0&&(p.updateQueue.baseState=A)}var Ib={isMounted:function(p){return(p=p._reactInternals)?Se(p)===p:!1},enqueueSetState:function(p,v,A){p=p._reactInternals;var I=nl(),H=Np(p),ee=Sl(I,H);ee.payload=v,A!=null&&(ee.callback=A),v=Nl(p,ee,H),v!==null&&(Pu(v,p,H,I),Gf(v,p,H))},enqueueReplaceState:function(p,v,A){p=p._reactInternals;var I=nl(),H=Np(p),ee=Sl(I,H);ee.tag=1,ee.payload=v,A!=null&&(ee.callback=A),v=Nl(p,ee,H),v!==null&&(Pu(v,p,H,I),Gf(v,p,H))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var A=nl(),I=Np(p),H=Sl(A,I);H.tag=2,v!=null&&(H.callback=v),v=Nl(p,H,I),v!==null&&(Pu(v,p,I,A),Gf(v,p,I))}};function K7(p,v,A,I,H,ee,me){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,ee,me):v.prototype&&v.prototype.isPureReactComponent?!mu(A,I)||!mu(H,ee):!0}function X7(p,v,A){var I=!1,H=Od,ee=v.contextType;return typeof ee=="object"&&ee!==null?ee=Ai(ee):(H=xo(v)?Vf:ms.current,I=v.contextTypes,ee=(I=I!=null)?pp(p,H):Od),v=new v(A,ee),p.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ib,p.stateNode=v,v._reactInternals=p,I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=H,p.__reactInternalMemoizedMaskedChildContext=ee),v}function J7(p,v,A,I){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(A,I),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(A,I),v.state!==p&&Ib.enqueueReplaceState(v,v.state,null)}function N3(p,v,A,I){var H=p.stateNode;H.props=A,H.state=p.memoizedState,H.refs={},Qg(p);var ee=v.contextType;typeof ee=="object"&&ee!==null?H.context=Ai(ee):(ee=xo(v)?Vf:ms.current,H.context=pp(p,ee)),H.state=p.memoizedState,ee=v.getDerivedStateFromProps,typeof ee=="function"&&(S3(p,v,ee,A),H.state=p.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(v=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),v!==H.state&&Ib.enqueueReplaceState(H,H.state,null),_u(p,A,H,I),H.state=p.memoizedState),typeof H.componentDidMount=="function"&&(p.flags|=4194308)}function cv(p,v){try{var A="",I=v;do A+=ne(I),I=I.return;while(I);var H=A}catch(ee){H=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:p,source:v,stack:H,digest:null}}function A3(p,v,A){return{value:p,source:null,stack:A??null,digest:v??null}}function k3(p,v){try{console.error(v.value)}catch(A){setTimeout(function(){throw A})}}var Eoe=typeof WeakMap=="function"?WeakMap:Map;function Z7(p,v,A){A=Sl(-1,A),A.tag=3,A.payload={element:null};var I=v.value;return A.callback=function(){Bb||(Bb=!0,U3=I),k3(p,v)},A}function Q7(p,v,A){A=Sl(-1,A),A.tag=3;var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var H=v.value;A.payload=function(){return I(H)},A.callback=function(){k3(p,v)}}var ee=p.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(A.callback=function(){k3(p,v),typeof I!="function"&&(_p===null?_p=new Set([this]):_p.add(this));var me=v.stack;this.componentDidCatch(v.value,{componentStack:me!==null?me:""})}),A}function eM(p,v,A){var I=p.pingCache;if(I===null){I=p.pingCache=new Eoe;var H=new Set;I.set(v,H)}else H=I.get(v),H===void 0&&(H=new Set,I.set(v,H));H.has(A)||(H.add(A),p=Uoe.bind(null,p,v,A),v.then(p,p))}function tM(p){do{var v;if((v=p.tag===13)&&(v=p.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return p;p=p.return}while(p!==null);return null}function rM(p,v,A,I,H){return(p.mode&1)===0?(p===v?p.flags|=65536:(p.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(v=Sl(-1,1),v.tag=2,Nl(A,v,1))),A.lanes|=1),p):(p.flags|=65536,p.lanes=H,p)}var Coe=E.ReactCurrentOwner,kl=!1;function rl(p,v,A,I){v.child=p===null?ra(v,null,A,I):Li(v,p.child,A,I)}function nM(p,v,A,I,H){A=A.render;var ee=v.ref;return Xa(v,H),I=u0(p,v,A,I,ee,H),A=$c(),p!==null&&!kl?(v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~H,Xf(p,v,H)):(Et&&A&&_t(v),v.flags|=1,rl(p,v,I,H),v.child)}function aM(p,v,A,I,H){if(p===null){var ee=A.type;return typeof ee=="function"&&!Y3(ee)&&ee.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(v.tag=15,v.type=ee,iM(p,v,ee,I,H)):(p=Hb(A.type,null,I,v,v.mode,H),p.ref=v.ref,p.return=v,v.child=p)}if(ee=p.child,(p.lanes&H)===0){var me=ee.memoizedProps;if(A=A.compare,A=A!==null?A:mu,A(me,I)&&p.ref===v.ref)return Xf(p,v,H)}return v.flags|=1,p=kp(ee,I),p.ref=v.ref,p.return=v,v.child=p}function iM(p,v,A,I,H){if(p!==null){var ee=p.memoizedProps;if(mu(ee,I)&&p.ref===v.ref)if(kl=!1,v.pendingProps=I=ee,(p.lanes&H)!==0)(p.flags&131072)!==0&&(kl=!0);else return v.lanes=p.lanes,Xf(p,v,H)}return E3(p,v,A,I,H)}function sM(p,v,A){var I=v.pendingProps,H=I.children,ee=p!==null?p.memoizedState:null;if(I.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null,transitions:null},ga(dv,tc),tc|=A;else{if((A&1073741824)===0)return p=ee!==null?ee.baseLanes|A:A,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:p,cachePool:null,transitions:null},v.updateQueue=null,ga(dv,tc),tc|=p,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=ee!==null?ee.baseLanes:A,ga(dv,tc),tc|=I}else ee!==null?(I=ee.baseLanes|A,v.memoizedState=null):I=A,ga(dv,tc),tc|=I;return rl(p,v,H,A),v.child}function oM(p,v){var A=v.ref;(p===null&&A!==null||p!==null&&p.ref!==A)&&(v.flags|=512,v.flags|=2097152)}function E3(p,v,A,I,H){var ee=xo(A)?Vf:ms.current;return ee=pp(v,ee),Xa(v,H),A=u0(p,v,A,I,ee,H),I=$c(),p!==null&&!kl?(v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~H,Xf(p,v,H)):(Et&&I&&_t(v),v.flags|=1,rl(p,v,A,H),v.child)}function lM(p,v,A,I,H){if(xo(A)){var ee=!0;Hf(v)}else ee=!1;if(Xa(v,H),v.stateNode===null)Mb(p,v),X7(v,A,I),N3(v,A,I,H),I=!0;else if(p===null){var me=v.stateNode,Te=v.memoizedProps;me.props=Te;var qe=me.context,xt=A.contextType;typeof xt=="object"&&xt!==null?xt=Ai(xt):(xt=xo(A)?Vf:ms.current,xt=pp(v,xt));var Ut=A.getDerivedStateFromProps,Vt=typeof Ut=="function"||typeof me.getSnapshotBeforeUpdate=="function";Vt||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Te!==I||qe!==xt)&&J7(v,me,I,xt),Fc=!1;var Bt=v.memoizedState;me.state=Bt,_u(v,I,me,H),qe=v.memoizedState,Te!==I||Bt!==qe||yo.current||Fc?(typeof Ut=="function"&&(S3(v,A,Ut,I),qe=v.memoizedState),(Te=Fc||K7(v,A,Te,I,Bt,qe,xt))?(Vt||typeof me.UNSAFE_componentWillMount!="function"&&typeof me.componentWillMount!="function"||(typeof me.componentWillMount=="function"&&me.componentWillMount(),typeof me.UNSAFE_componentWillMount=="function"&&me.UNSAFE_componentWillMount()),typeof me.componentDidMount=="function"&&(v.flags|=4194308)):(typeof me.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=I,v.memoizedState=qe),me.props=I,me.state=qe,me.context=xt,I=Te):(typeof me.componentDidMount=="function"&&(v.flags|=4194308),I=!1)}else{me=v.stateNode,qy(p,v),Te=v.memoizedProps,xt=v.type===v.elementType?Te:ku(v.type,Te),me.props=xt,Vt=v.pendingProps,Bt=me.context,qe=A.contextType,typeof qe=="object"&&qe!==null?qe=Ai(qe):(qe=xo(A)?Vf:ms.current,qe=pp(v,qe));var wr=A.getDerivedStateFromProps;(Ut=typeof wr=="function"||typeof me.getSnapshotBeforeUpdate=="function")||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(Te!==Vt||Bt!==qe)&&J7(v,me,I,qe),Fc=!1,Bt=v.memoizedState,me.state=Bt,_u(v,I,me,H);var Er=v.memoizedState;Te!==Vt||Bt!==Er||yo.current||Fc?(typeof wr=="function"&&(S3(v,A,wr,I),Er=v.memoizedState),(xt=Fc||K7(v,A,xt,I,Bt,Er,qe)||!1)?(Ut||typeof me.UNSAFE_componentWillUpdate!="function"&&typeof me.componentWillUpdate!="function"||(typeof me.componentWillUpdate=="function"&&me.componentWillUpdate(I,Er,qe),typeof me.UNSAFE_componentWillUpdate=="function"&&me.UNSAFE_componentWillUpdate(I,Er,qe)),typeof me.componentDidUpdate=="function"&&(v.flags|=4),typeof me.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof me.componentDidUpdate!="function"||Te===p.memoizedProps&&Bt===p.memoizedState||(v.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Te===p.memoizedProps&&Bt===p.memoizedState||(v.flags|=1024),v.memoizedProps=I,v.memoizedState=Er),me.props=I,me.state=Er,me.context=qe,I=xt):(typeof me.componentDidUpdate!="function"||Te===p.memoizedProps&&Bt===p.memoizedState||(v.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||Te===p.memoizedProps&&Bt===p.memoizedState||(v.flags|=1024),I=!1)}return C3(p,v,A,I,ee,H)}function C3(p,v,A,I,H,ee){oM(p,v);var me=(v.flags&128)!==0;if(!I&&!me)return H&&kb(v,A,!1),Xf(p,v,ee);I=v.stateNode,Coe.current=v;var Te=me&&typeof A.getDerivedStateFromError!="function"?null:I.render();return v.flags|=1,p!==null&&me?(v.child=Li(v,p.child,null,ee),v.child=Li(v,null,Te,ee)):rl(p,v,Te,ee),v.memoizedState=I.state,H&&kb(v,A,!0),v.child}function cM(p){var v=p.stateNode;v.pendingContext?Ab(p,v.pendingContext,v.pendingContext!==v.context):v.context&&Ab(p,v.context,!1),vp(p,v.containerInfo)}function uM(p,v,A,I,H){return yn(),da(H),v.flags|=256,rl(p,v,A,I),v.child}var P3={dehydrated:null,treeContext:null,retryLane:0};function T3(p){return{baseLanes:p,cachePool:null,transitions:null}}function dM(p,v,A){var I=v.pendingProps,H=Ia.current,ee=!1,me=(v.flags&128)!==0,Te;if((Te=me)||(Te=p!==null&&p.memoizedState===null?!1:(H&2)!==0),Te?(ee=!0,v.flags&=-129):(p===null||p.memoizedState!==null)&&(H|=1),ga(Ia,H&1),p===null)return sr(v),p=v.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((v.mode&1)===0?v.lanes=1:p.data==="$!"?v.lanes=8:v.lanes=1073741824,null):(me=I.children,p=I.fallback,ee?(I=v.mode,ee=v.child,me={mode:"hidden",children:me},(I&1)===0&&ee!==null?(ee.childLanes=0,ee.pendingProps=me):ee=Gb(me,I,0,null),p=v0(p,I,A,null),ee.return=v,p.return=v,ee.sibling=p,v.child=ee,v.child.memoizedState=T3(A),v.memoizedState=P3,p):O3(v,me));if(H=p.memoizedState,H!==null&&(Te=H.dehydrated,Te!==null))return Poe(p,v,me,I,Te,H,A);if(ee){ee=I.fallback,me=v.mode,H=p.child,Te=H.sibling;var qe={mode:"hidden",children:I.children};return(me&1)===0&&v.child!==H?(I=v.child,I.childLanes=0,I.pendingProps=qe,v.deletions=null):(I=kp(H,qe),I.subtreeFlags=H.subtreeFlags&14680064),Te!==null?ee=kp(Te,ee):(ee=v0(ee,me,A,null),ee.flags|=2),ee.return=v,I.return=v,I.sibling=ee,v.child=I,I=ee,ee=v.child,me=p.child.memoizedState,me=me===null?T3(A):{baseLanes:me.baseLanes|A,cachePool:null,transitions:me.transitions},ee.memoizedState=me,ee.childLanes=p.childLanes&~A,v.memoizedState=P3,I}return ee=p.child,p=ee.sibling,I=kp(ee,{mode:"visible",children:I.children}),(v.mode&1)===0&&(I.lanes=A),I.return=v,I.sibling=null,p!==null&&(A=v.deletions,A===null?(v.deletions=[p],v.flags|=16):A.push(p)),v.child=I,v.memoizedState=null,I}function O3(p,v){return v=Gb({mode:"visible",children:v},p.mode,0,null),v.return=p,p.child=v}function Rb(p,v,A,I){return I!==null&&da(I),Li(v,p.child,null,A),p=O3(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function Poe(p,v,A,I,H,ee,me){if(A)return v.flags&256?(v.flags&=-257,I=A3(Error(r(422))),Rb(p,v,me,I)):v.memoizedState!==null?(v.child=p.child,v.flags|=128,null):(ee=I.fallback,H=v.mode,I=Gb({mode:"visible",children:I.children},H,0,null),ee=v0(ee,H,me,null),ee.flags|=2,I.return=v,ee.return=v,I.sibling=ee,v.child=I,(v.mode&1)!==0&&Li(v,p.child,null,me),v.child.memoizedState=T3(me),v.memoizedState=P3,ee);if((v.mode&1)===0)return Rb(p,v,me,null);if(H.data==="$!"){if(I=H.nextSibling&&H.nextSibling.dataset,I)var Te=I.dgst;return I=Te,ee=Error(r(419)),I=A3(ee,I,void 0),Rb(p,v,me,I)}if(Te=(me&p.childLanes)!==0,kl||Te){if(I=Os,I!==null){switch(me&-me){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=(H&(I.suspendedLanes|me))!==0?0:H,H!==0&&H!==ee.retryLane&&(ee.retryLane=H,na(p,H),Pu(I,p,H,-1))}return G3(),I=A3(Error(r(421))),Rb(p,v,me,I)}return H.data==="$?"?(v.flags|=128,v.child=p.child,v=qoe.bind(null,p),H._reactRetry=v,null):(p=ee.treeContext,Ct=Ks(H.nextSibling),ze=v,Et=!0,Tt=null,p!==null&&(be[Ae++]=rt,be[Ae++]=nt,be[Ae++]=Ue,rt=p.id,nt=p.overflow,Ue=v),v=O3(v,I.children),v.flags|=4096,v)}function fM(p,v,A){p.lanes|=v;var I=p.alternate;I!==null&&(I.lanes|=v),_l(p.return,v,A)}function D3(p,v,A,I,H){var ee=p.memoizedState;ee===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:I,tail:A,tailMode:H}:(ee.isBackwards=v,ee.rendering=null,ee.renderingStartTime=0,ee.last=I,ee.tail=A,ee.tailMode=H)}function hM(p,v,A){var I=v.pendingProps,H=I.revealOrder,ee=I.tail;if(rl(p,v,I.children,A),I=Ia.current,(I&2)!==0)I=I&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&fM(p,A,v);else if(p.tag===19)fM(p,A,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}I&=1}if(ga(Ia,I),(v.mode&1)===0)v.memoizedState=null;else switch(H){case"forwards":for(A=v.child,H=null;A!==null;)p=A.alternate,p!==null&&Zl(p)===null&&(H=A),A=A.sibling;A=H,A===null?(H=v.child,v.child=null):(H=A.sibling,A.sibling=null),D3(v,!1,H,A,ee);break;case"backwards":for(A=null,H=v.child,v.child=null;H!==null;){if(p=H.alternate,p!==null&&Zl(p)===null){v.child=H;break}p=H.sibling,H.sibling=A,A=H,H=p}D3(v,!0,A,null,ee);break;case"together":D3(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Mb(p,v){(v.mode&1)===0&&p!==null&&(p.alternate=null,v.alternate=null,v.flags|=2)}function Xf(p,v,A){if(p!==null&&(v.dependencies=p.dependencies),h0|=v.lanes,(A&v.childLanes)===0)return null;if(p!==null&&v.child!==p.child)throw Error(r(153));if(v.child!==null){for(p=v.child,A=kp(p,p.pendingProps),v.child=A,A.return=v;p.sibling!==null;)p=p.sibling,A=A.sibling=kp(p,p.pendingProps),A.return=v;A.sibling=null}return v.child}function Toe(p,v,A){switch(v.tag){case 3:cM(v),yn();break;case 5:Eb(v);break;case 1:xo(v.type)&&Hf(v);break;case 4:vp(v,v.stateNode.containerInfo);break;case 10:var I=v.type._context,H=v.memoizedProps.value;ga(Ps,I._currentValue),I._currentValue=H;break;case 13:if(I=v.memoizedState,I!==null)return I.dehydrated!==null?(ga(Ia,Ia.current&1),v.flags|=128,null):(A&v.child.childLanes)!==0?dM(p,v,A):(ga(Ia,Ia.current&1),p=Xf(p,v,A),p!==null?p.sibling:null);ga(Ia,Ia.current&1);break;case 19:if(I=(A&v.childLanes)!==0,(p.flags&128)!==0){if(I)return hM(p,v,A);v.flags|=128}if(H=v.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),ga(Ia,Ia.current),I)break;return null;case 22:case 23:return v.lanes=0,sM(p,v,A)}return Xf(p,v,A)}var pM,I3,mM,gM;pM=function(p,v){for(var A=v.child;A!==null;){if(A.tag===5||A.tag===6)p.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===v)break;for(;A.sibling===null;){if(A.return===null||A.return===v)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},I3=function(){},mM=function(p,v,A,I){var H=p.memoizedProps;if(H!==I){p=v.stateNode,Su(Qo.current);var ee=null;switch(A){case"input":H=Re(p,H),I=Re(p,I),ee=[];break;case"select":H=G({},H,{value:void 0}),I=G({},I,{value:void 0}),ee=[];break;case"textarea":H=he(p,H),I=he(p,I),ee=[];break;default:typeof H.onClick!="function"&&typeof I.onClick=="function"&&(p.onclick=dp)}yr(A,I);var me;A=null;for(xt in H)if(!I.hasOwnProperty(xt)&&H.hasOwnProperty(xt)&&H[xt]!=null)if(xt==="style"){var Te=H[xt];for(me in Te)Te.hasOwnProperty(me)&&(A||(A={}),A[me]="")}else xt!=="dangerouslySetInnerHTML"&&xt!=="children"&&xt!=="suppressContentEditableWarning"&&xt!=="suppressHydrationWarning"&&xt!=="autoFocus"&&(a.hasOwnProperty(xt)?ee||(ee=[]):(ee=ee||[]).push(xt,null));for(xt in I){var qe=I[xt];if(Te=H!=null?H[xt]:void 0,I.hasOwnProperty(xt)&&qe!==Te&&(qe!=null||Te!=null))if(xt==="style")if(Te){for(me in Te)!Te.hasOwnProperty(me)||qe&&qe.hasOwnProperty(me)||(A||(A={}),A[me]="");for(me in qe)qe.hasOwnProperty(me)&&Te[me]!==qe[me]&&(A||(A={}),A[me]=qe[me])}else A||(ee||(ee=[]),ee.push(xt,A)),A=qe;else xt==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,Te=Te?Te.__html:void 0,qe!=null&&Te!==qe&&(ee=ee||[]).push(xt,qe)):xt==="children"?typeof qe!="string"&&typeof qe!="number"||(ee=ee||[]).push(xt,""+qe):xt!=="suppressContentEditableWarning"&&xt!=="suppressHydrationWarning"&&(a.hasOwnProperty(xt)?(qe!=null&&xt==="onScroll"&&Aa("scroll",p),ee||Te===qe||(ee=[])):(ee=ee||[]).push(xt,qe))}A&&(ee=ee||[]).push("style",A);var xt=ee;(v.updateQueue=xt)&&(v.flags|=4)}},gM=function(p,v,A,I){A!==I&&(v.flags|=4)};function Yy(p,v){if(!Et)switch(p.tailMode){case"hidden":v=p.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?p.tail=null:A.sibling=null;break;case"collapsed":A=p.tail;for(var I=null;A!==null;)A.alternate!==null&&(I=A),A=A.sibling;I===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function bo(p){var v=p.alternate!==null&&p.alternate.child===p.child,A=0,I=0;if(v)for(var H=p.child;H!==null;)A|=H.lanes|H.childLanes,I|=H.subtreeFlags&14680064,I|=H.flags&14680064,H.return=p,H=H.sibling;else for(H=p.child;H!==null;)A|=H.lanes|H.childLanes,I|=H.subtreeFlags,I|=H.flags,H.return=p,H=H.sibling;return p.subtreeFlags|=I,p.childLanes=A,v}function Ooe(p,v,A){var I=v.pendingProps;switch(We(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bo(v),null;case 1:return xo(v.type)&&Zg(),bo(v),null;case 3:return I=v.stateNode,Lc(),ua(yo),ua(ms),Vy(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(p===null||p.child===null)&&(zn(v)?v.flags|=4:p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,Tt!==null&&(z3(Tt),Tt=null))),I3(p,v),bo(v),null;case 5:Wy(v);var H=Su(Id.current);if(A=v.type,p!==null&&v.stateNode!=null)mM(p,v,A,I,H),p.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!I){if(v.stateNode===null)throw Error(r(166));return bo(v),null}if(p=Su(Qo.current),zn(v)){I=v.stateNode,A=v.type;var ee=v.memoizedProps;switch(I[Mc]=v,I[fp]=ee,p=(v.mode&1)!==0,A){case"dialog":Aa("cancel",I),Aa("close",I);break;case"iframe":case"object":case"embed":Aa("load",I);break;case"video":case"audio":for(H=0;H<Pd.length;H++)Aa(Pd[H],I);break;case"source":Aa("error",I);break;case"img":case"image":case"link":Aa("error",I),Aa("load",I);break;case"details":Aa("toggle",I);break;case"input":Ce(I,ee),Aa("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!ee.multiple},Aa("invalid",I);break;case"textarea":Ee(I,ee),Aa("invalid",I)}yr(A,ee),H=null;for(var me in ee)if(ee.hasOwnProperty(me)){var Te=ee[me];me==="children"?typeof Te=="string"?I.textContent!==Te&&(ee.suppressHydrationWarning!==!0&&Jg(I.textContent,Te,p),H=["children",Te]):typeof Te=="number"&&I.textContent!==""+Te&&(ee.suppressHydrationWarning!==!0&&Jg(I.textContent,Te,p),H=["children",""+Te]):a.hasOwnProperty(me)&&Te!=null&&me==="onScroll"&&Aa("scroll",I)}switch(A){case"input":fe(I),pt(I,ee,!0);break;case"textarea":fe(I),at(I);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(I.onclick=dp)}I=H,v.updateQueue=I,I!==null&&(v.flags|=4)}else{me=H.nodeType===9?H:H.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=ct(A)),p==="http://www.w3.org/1999/xhtml"?A==="script"?(p=me.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof I.is=="string"?p=me.createElement(A,{is:I.is}):(p=me.createElement(A),A==="select"&&(me=p,I.multiple?me.multiple=!0:I.size&&(me.size=I.size))):p=me.createElementNS(p,A),p[Mc]=v,p[fp]=I,pM(p,v,!1,!1),v.stateNode=p;e:{switch(me=Gr(A,I),A){case"dialog":Aa("cancel",p),Aa("close",p),H=I;break;case"iframe":case"object":case"embed":Aa("load",p),H=I;break;case"video":case"audio":for(H=0;H<Pd.length;H++)Aa(Pd[H],p);H=I;break;case"source":Aa("error",p),H=I;break;case"img":case"image":case"link":Aa("error",p),Aa("load",p),H=I;break;case"details":Aa("toggle",p),H=I;break;case"input":Ce(p,I),H=Re(p,I),Aa("invalid",p);break;case"option":H=I;break;case"select":p._wrapperState={wasMultiple:!!I.multiple},H=G({},I,{value:void 0}),Aa("invalid",p);break;case"textarea":Ee(p,I),H=he(p,I),Aa("invalid",p);break;default:H=I}yr(A,H),Te=H;for(ee in Te)if(Te.hasOwnProperty(ee)){var qe=Te[ee];ee==="style"?mt(p,qe):ee==="dangerouslySetInnerHTML"?(qe=qe?qe.__html:void 0,qe!=null&&Nt(p,qe)):ee==="children"?typeof qe=="string"?(A!=="textarea"||qe!=="")&&St(p,qe):typeof qe=="number"&&St(p,""+qe):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?qe!=null&&ee==="onScroll"&&Aa("scroll",p):qe!=null&&N(p,ee,qe,me))}switch(A){case"input":fe(p),pt(p,I,!1);break;case"textarea":fe(p),at(p);break;case"option":I.value!=null&&p.setAttribute("value",""+de(I.value));break;case"select":p.multiple=!!I.multiple,ee=I.value,ee!=null?ut(p,!!I.multiple,ee,!1):I.defaultValue!=null&&ut(p,!!I.multiple,I.defaultValue,!0);break;default:typeof H.onClick=="function"&&(p.onclick=dp)}switch(A){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(v.flags|=4)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return bo(v),null;case 6:if(p&&v.stateNode!=null)gM(p,v,p.memoizedProps,I);else{if(typeof I!="string"&&v.stateNode===null)throw Error(r(166));if(A=Su(Id.current),Su(Qo.current),zn(v)){if(I=v.stateNode,A=v.memoizedProps,I[Mc]=v,(ee=I.nodeValue!==A)&&(p=ze,p!==null))switch(p.tag){case 3:Jg(I.nodeValue,A,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Jg(I.nodeValue,A,(p.mode&1)!==0)}ee&&(v.flags|=4)}else I=(A.nodeType===9?A:A.ownerDocument).createTextNode(I),I[Mc]=v,v.stateNode=I}return bo(v),null;case 13:if(ua(Ia),I=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Et&&Ct!==null&&(v.mode&1)!==0&&(v.flags&128)===0)Ln(),yn(),v.flags|=98560,ee=!1;else if(ee=zn(v),I!==null&&I.dehydrated!==null){if(p===null){if(!ee)throw Error(r(318));if(ee=v.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(r(317));ee[Mc]=v}else yn(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;bo(v),ee=!1}else Tt!==null&&(z3(Tt),Tt=null),ee=!0;if(!ee)return v.flags&65536?v:null}return(v.flags&128)!==0?(v.lanes=A,v):(I=I!==null,I!==(p!==null&&p.memoizedState!==null)&&I&&(v.child.flags|=8192,(v.mode&1)!==0&&(p===null||(Ia.current&1)!==0?vs===0&&(vs=3):G3())),v.updateQueue!==null&&(v.flags|=4),bo(v),null);case 4:return Lc(),I3(p,v),p===null&&Uf(v.stateNode.containerInfo),bo(v),null;case 10:return wo(v.type._context),bo(v),null;case 17:return xo(v.type)&&Zg(),bo(v),null;case 19:if(ua(Ia),ee=v.memoizedState,ee===null)return bo(v),null;if(I=(v.flags&128)!==0,me=ee.rendering,me===null)if(I)Yy(ee,!1);else{if(vs!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(me=Zl(p),me!==null){for(v.flags|=128,Yy(ee,!1),I=me.updateQueue,I!==null&&(v.updateQueue=I,v.flags|=4),v.subtreeFlags=0,I=A,A=v.child;A!==null;)ee=A,p=I,ee.flags&=14680066,me=ee.alternate,me===null?(ee.childLanes=0,ee.lanes=p,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=me.childLanes,ee.lanes=me.lanes,ee.child=me.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=me.memoizedProps,ee.memoizedState=me.memoizedState,ee.updateQueue=me.updateQueue,ee.type=me.type,p=me.dependencies,ee.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),A=A.sibling;return ga(Ia,Ia.current&1|2),v.child}p=p.sibling}ee.tail!==null&&qt()>fv&&(v.flags|=128,I=!0,Yy(ee,!1),v.lanes=4194304)}else{if(!I)if(p=Zl(me),p!==null){if(v.flags|=128,I=!0,A=p.updateQueue,A!==null&&(v.updateQueue=A,v.flags|=4),Yy(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!me.alternate&&!Et)return bo(v),null}else 2*qt()-ee.renderingStartTime>fv&&A!==1073741824&&(v.flags|=128,I=!0,Yy(ee,!1),v.lanes=4194304);ee.isBackwards?(me.sibling=v.child,v.child=me):(A=ee.last,A!==null?A.sibling=me:v.child=me,ee.last=me)}return ee.tail!==null?(v=ee.tail,ee.rendering=v,ee.tail=v.sibling,ee.renderingStartTime=qt(),v.sibling=null,A=Ia.current,ga(Ia,I?A&1|2:A&1),v):(bo(v),null);case 22:case 23:return H3(),I=v.memoizedState!==null,p!==null&&p.memoizedState!==null!==I&&(v.flags|=8192),I&&(v.mode&1)!==0?(tc&1073741824)!==0&&(bo(v),v.subtreeFlags&6&&(v.flags|=8192)):bo(v),null;case 24:return null;case 25:return null}throw Error(r(156,v.tag))}function Doe(p,v){switch(We(v),v.tag){case 1:return xo(v.type)&&Zg(),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Lc(),ua(yo),ua(ms),Vy(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 5:return Wy(v),null;case 13:if(ua(Ia),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(r(340));yn()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return ua(Ia),null;case 4:return Lc(),null;case 10:return wo(v.type._context),null;case 22:case 23:return H3(),null;case 24:return null;default:return null}}var Fb=!1,_o=!1,Ioe=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function uv(p,v){var A=p.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(I){Ei(p,v,I)}else A.current=null}function R3(p,v,A){try{A()}catch(I){Ei(p,v,I)}}var vM=!1;function Roe(p,v){if(o0=Hh,p=e0(),Lf(p)){if("selectionStart"in p)var A={start:p.selectionStart,end:p.selectionEnd};else e:{A=(A=p.ownerDocument)&&A.defaultView||window;var I=A.getSelection&&A.getSelection();if(I&&I.rangeCount!==0){A=I.anchorNode;var H=I.anchorOffset,ee=I.focusNode;I=I.focusOffset;try{A.nodeType,ee.nodeType}catch{A=null;break e}var me=0,Te=-1,qe=-1,xt=0,Ut=0,Vt=p,Bt=null;t:for(;;){for(var wr;Vt!==A||H!==0&&Vt.nodeType!==3||(Te=me+H),Vt!==ee||I!==0&&Vt.nodeType!==3||(qe=me+I),Vt.nodeType===3&&(me+=Vt.nodeValue.length),(wr=Vt.firstChild)!==null;)Bt=Vt,Vt=wr;for(;;){if(Vt===p)break t;if(Bt===A&&++xt===H&&(Te=me),Bt===ee&&++Ut===I&&(qe=me),(wr=Vt.nextSibling)!==null)break;Vt=Bt,Bt=Vt.parentNode}Vt=wr}A=Te===-1||qe===-1?null:{start:Te,end:qe}}else A=null}A=A||{start:0,end:0}}else A=null;for(Wf={focusedElem:p,selectionRange:A},Hh=!1,Ar=v;Ar!==null;)if(v=Ar,p=v.child,(v.subtreeFlags&1028)!==0&&p!==null)p.return=v,Ar=p;else for(;Ar!==null;){v=Ar;try{var Er=v.alternate;if((v.flags&1024)!==0)switch(v.tag){case 0:case 11:case 15:break;case 1:if(Er!==null){var Tr=Er.memoizedProps,Bi=Er.memoizedState,lt=v.stateNode,Ye=lt.getSnapshotBeforeUpdate(v.elementType===v.type?Tr:ku(v.type,Tr),Bi);lt.__reactInternalSnapshotBeforeUpdate=Ye}break;case 3:var gt=v.stateNode.containerInfo;gt.nodeType===1?gt.textContent="":gt.nodeType===9&&gt.documentElement&&gt.removeChild(gt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Zt){Ei(v,v.return,Zt)}if(p=v.sibling,p!==null){p.return=v.return,Ar=p;break}Ar=v.return}return Er=vM,vM=!1,Er}function Ky(p,v,A){var I=v.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var H=I=I.next;do{if((H.tag&p)===p){var ee=H.destroy;H.destroy=void 0,ee!==void 0&&R3(v,A,ee)}H=H.next}while(H!==I)}}function Lb(p,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var A=v=v.next;do{if((A.tag&p)===p){var I=A.create;A.destroy=I()}A=A.next}while(A!==v)}}function M3(p){var v=p.ref;if(v!==null){var A=p.stateNode;switch(p.tag){case 5:p=A;break;default:p=A}typeof v=="function"?v(p):v.current=p}}function yM(p){var v=p.alternate;v!==null&&(p.alternate=null,yM(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&(delete v[Mc],delete v[fp],delete v[vo],delete v[x3],delete v[w3])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function xM(p){return p.tag===5||p.tag===3||p.tag===4}function wM(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||xM(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function F3(p,v,A){var I=p.tag;if(I===5||I===6)p=p.stateNode,v?A.nodeType===8?A.parentNode.insertBefore(p,v):A.insertBefore(p,v):(A.nodeType===8?(v=A.parentNode,v.insertBefore(p,A)):(v=A,v.appendChild(p)),A=A._reactRootContainer,A!=null||v.onclick!==null||(v.onclick=dp));else if(I!==4&&(p=p.child,p!==null))for(F3(p,v,A),p=p.sibling;p!==null;)F3(p,v,A),p=p.sibling}function L3(p,v,A){var I=p.tag;if(I===5||I===6)p=p.stateNode,v?A.insertBefore(p,v):A.appendChild(p);else if(I!==4&&(p=p.child,p!==null))for(L3(p,v,A),p=p.sibling;p!==null;)L3(p,v,A),p=p.sibling}var Js=null,Eu=!1;function bp(p,v,A){for(A=A.child;A!==null;)bM(p,v,A),A=A.sibling}function bM(p,v,A){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Go,A)}catch{}switch(A.tag){case 5:_o||uv(A,v);case 6:var I=Js,H=Eu;Js=null,bp(p,v,A),Js=I,Eu=H,Js!==null&&(Eu?(p=Js,A=A.stateNode,p.nodeType===8?p.parentNode.removeChild(A):p.removeChild(A)):Js.removeChild(A.stateNode));break;case 18:Js!==null&&(Eu?(p=Js,A=A.stateNode,p.nodeType===8?$y(p.parentNode,A):p.nodeType===1&&$y(p,A),Gl(p)):$y(Js,A.stateNode));break;case 4:I=Js,H=Eu,Js=A.stateNode.containerInfo,Eu=!0,bp(p,v,A),Js=I,Eu=H;break;case 0:case 11:case 14:case 15:if(!_o&&(I=A.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){H=I=I.next;do{var ee=H,me=ee.destroy;ee=ee.tag,me!==void 0&&((ee&2)!==0||(ee&4)!==0)&&R3(A,v,me),H=H.next}while(H!==I)}bp(p,v,A);break;case 1:if(!_o&&(uv(A,v),I=A.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=A.memoizedProps,I.state=A.memoizedState,I.componentWillUnmount()}catch(Te){Ei(A,v,Te)}bp(p,v,A);break;case 21:bp(p,v,A);break;case 22:A.mode&1?(_o=(I=_o)||A.memoizedState!==null,bp(p,v,A),_o=I):bp(p,v,A);break;default:bp(p,v,A)}}function _M(p){var v=p.updateQueue;if(v!==null){p.updateQueue=null;var A=p.stateNode;A===null&&(A=p.stateNode=new Ioe),v.forEach(function(I){var H=Woe.bind(null,p,I);A.has(I)||(A.add(I),I.then(H,H))})}}function Cu(p,v){var A=v.deletions;if(A!==null)for(var I=0;I<A.length;I++){var H=A[I];try{var ee=p,me=v,Te=me;e:for(;Te!==null;){switch(Te.tag){case 5:Js=Te.stateNode,Eu=!1;break e;case 3:Js=Te.stateNode.containerInfo,Eu=!0;break e;case 4:Js=Te.stateNode.containerInfo,Eu=!0;break e}Te=Te.return}if(Js===null)throw Error(r(160));bM(ee,me,H),Js=null,Eu=!1;var qe=H.alternate;qe!==null&&(qe.return=null),H.return=null}catch(xt){Ei(H,v,xt)}}if(v.subtreeFlags&12854)for(v=v.child;v!==null;)SM(v,p),v=v.sibling}function SM(p,v){var A=p.alternate,I=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Cu(v,p),Md(p),I&4){try{Ky(3,p,p.return),Lb(3,p)}catch(Tr){Ei(p,p.return,Tr)}try{Ky(5,p,p.return)}catch(Tr){Ei(p,p.return,Tr)}}break;case 1:Cu(v,p),Md(p),I&512&&A!==null&&uv(A,A.return);break;case 5:if(Cu(v,p),Md(p),I&512&&A!==null&&uv(A,A.return),p.flags&32){var H=p.stateNode;try{St(H,"")}catch(Tr){Ei(p,p.return,Tr)}}if(I&4&&(H=p.stateNode,H!=null)){var ee=p.memoizedProps,me=A!==null?A.memoizedProps:ee,Te=p.type,qe=p.updateQueue;if(p.updateQueue=null,qe!==null)try{Te==="input"&&ee.type==="radio"&&ee.name!=null&&ve(H,ee),Gr(Te,me);var xt=Gr(Te,ee);for(me=0;me<qe.length;me+=2){var Ut=qe[me],Vt=qe[me+1];Ut==="style"?mt(H,Vt):Ut==="dangerouslySetInnerHTML"?Nt(H,Vt):Ut==="children"?St(H,Vt):N(H,Ut,Vt,xt)}switch(Te){case"input":Ge(H,ee);break;case"textarea":Me(H,ee);break;case"select":var Bt=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!ee.multiple;var wr=ee.value;wr!=null?ut(H,!!ee.multiple,wr,!1):Bt!==!!ee.multiple&&(ee.defaultValue!=null?ut(H,!!ee.multiple,ee.defaultValue,!0):ut(H,!!ee.multiple,ee.multiple?[]:"",!1))}H[fp]=ee}catch(Tr){Ei(p,p.return,Tr)}}break;case 6:if(Cu(v,p),Md(p),I&4){if(p.stateNode===null)throw Error(r(162));H=p.stateNode,ee=p.memoizedProps;try{H.nodeValue=ee}catch(Tr){Ei(p,p.return,Tr)}}break;case 3:if(Cu(v,p),Md(p),I&4&&A!==null&&A.memoizedState.isDehydrated)try{Gl(v.containerInfo)}catch(Tr){Ei(p,p.return,Tr)}break;case 4:Cu(v,p),Md(p);break;case 13:Cu(v,p),Md(p),H=p.child,H.flags&8192&&(ee=H.memoizedState!==null,H.stateNode.isHidden=ee,!ee||H.alternate!==null&&H.alternate.memoizedState!==null||(B3=qt())),I&4&&_M(p);break;case 22:if(Ut=A!==null&&A.memoizedState!==null,p.mode&1?(_o=(xt=_o)||Ut,Cu(v,p),_o=xt):Cu(v,p),Md(p),I&8192){if(xt=p.memoizedState!==null,(p.stateNode.isHidden=xt)&&!Ut&&(p.mode&1)!==0)for(Ar=p,Ut=p.child;Ut!==null;){for(Vt=Ar=Ut;Ar!==null;){switch(Bt=Ar,wr=Bt.child,Bt.tag){case 0:case 11:case 14:case 15:Ky(4,Bt,Bt.return);break;case 1:uv(Bt,Bt.return);var Er=Bt.stateNode;if(typeof Er.componentWillUnmount=="function"){I=Bt,A=Bt.return;try{v=I,Er.props=v.memoizedProps,Er.state=v.memoizedState,Er.componentWillUnmount()}catch(Tr){Ei(I,A,Tr)}}break;case 5:uv(Bt,Bt.return);break;case 22:if(Bt.memoizedState!==null){kM(Vt);continue}}wr!==null?(wr.return=Bt,Ar=wr):kM(Vt)}Ut=Ut.sibling}e:for(Ut=null,Vt=p;;){if(Vt.tag===5){if(Ut===null){Ut=Vt;try{H=Vt.stateNode,xt?(ee=H.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(Te=Vt.stateNode,qe=Vt.memoizedProps.style,me=qe!=null&&qe.hasOwnProperty("display")?qe.display:null,Te.style.display=Nr("display",me))}catch(Tr){Ei(p,p.return,Tr)}}}else if(Vt.tag===6){if(Ut===null)try{Vt.stateNode.nodeValue=xt?"":Vt.memoizedProps}catch(Tr){Ei(p,p.return,Tr)}}else if((Vt.tag!==22&&Vt.tag!==23||Vt.memoizedState===null||Vt===p)&&Vt.child!==null){Vt.child.return=Vt,Vt=Vt.child;continue}if(Vt===p)break e;for(;Vt.sibling===null;){if(Vt.return===null||Vt.return===p)break e;Ut===Vt&&(Ut=null),Vt=Vt.return}Ut===Vt&&(Ut=null),Vt.sibling.return=Vt.return,Vt=Vt.sibling}}break;case 19:Cu(v,p),Md(p),I&4&&_M(p);break;case 21:break;default:Cu(v,p),Md(p)}}function Md(p){var v=p.flags;if(v&2){try{e:{for(var A=p.return;A!==null;){if(xM(A)){var I=A;break e}A=A.return}throw Error(r(160))}switch(I.tag){case 5:var H=I.stateNode;I.flags&32&&(St(H,""),I.flags&=-33);var ee=wM(p);L3(p,ee,H);break;case 3:case 4:var me=I.stateNode.containerInfo,Te=wM(p);F3(p,Te,me);break;default:throw Error(r(161))}}catch(qe){Ei(p,p.return,qe)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function Moe(p,v,A){Ar=p,NM(p)}function NM(p,v,A){for(var I=(p.mode&1)!==0;Ar!==null;){var H=Ar,ee=H.child;if(H.tag===22&&I){var me=H.memoizedState!==null||Fb;if(!me){var Te=H.alternate,qe=Te!==null&&Te.memoizedState!==null||_o;Te=Fb;var xt=_o;if(Fb=me,(_o=qe)&&!xt)for(Ar=H;Ar!==null;)me=Ar,qe=me.child,me.tag===22&&me.memoizedState!==null?EM(H):qe!==null?(qe.return=me,Ar=qe):EM(H);for(;ee!==null;)Ar=ee,NM(ee),ee=ee.sibling;Ar=H,Fb=Te,_o=xt}AM(p)}else(H.subtreeFlags&8772)!==0&&ee!==null?(ee.return=H,Ar=ee):AM(p)}}function AM(p){for(;Ar!==null;){var v=Ar;if((v.flags&8772)!==0){var A=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:_o||Lb(5,v);break;case 1:var I=v.stateNode;if(v.flags&4&&!_o)if(A===null)I.componentDidMount();else{var H=v.elementType===v.type?A.memoizedProps:ku(v.type,A.memoizedProps);I.componentDidUpdate(H,A.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var ee=v.updateQueue;ee!==null&&Yf(v,ee,I);break;case 3:var me=v.updateQueue;if(me!==null){if(A=null,v.child!==null)switch(v.child.tag){case 5:A=v.child.stateNode;break;case 1:A=v.child.stateNode}Yf(v,me,A)}break;case 5:var Te=v.stateNode;if(A===null&&v.flags&4){A=Te;var qe=v.memoizedProps;switch(v.type){case"button":case"input":case"select":case"textarea":qe.autoFocus&&A.focus();break;case"img":qe.src&&(A.src=qe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(v.memoizedState===null){var xt=v.alternate;if(xt!==null){var Ut=xt.memoizedState;if(Ut!==null){var Vt=Ut.dehydrated;Vt!==null&&Gl(Vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}_o||v.flags&512&&M3(v)}catch(Bt){Ei(v,v.return,Bt)}}if(v===p){Ar=null;break}if(A=v.sibling,A!==null){A.return=v.return,Ar=A;break}Ar=v.return}}function kM(p){for(;Ar!==null;){var v=Ar;if(v===p){Ar=null;break}var A=v.sibling;if(A!==null){A.return=v.return,Ar=A;break}Ar=v.return}}function EM(p){for(;Ar!==null;){var v=Ar;try{switch(v.tag){case 0:case 11:case 15:var A=v.return;try{Lb(4,v)}catch(qe){Ei(v,A,qe)}break;case 1:var I=v.stateNode;if(typeof I.componentDidMount=="function"){var H=v.return;try{I.componentDidMount()}catch(qe){Ei(v,H,qe)}}var ee=v.return;try{M3(v)}catch(qe){Ei(v,ee,qe)}break;case 5:var me=v.return;try{M3(v)}catch(qe){Ei(v,me,qe)}}}catch(qe){Ei(v,v.return,qe)}if(v===p){Ar=null;break}var Te=v.sibling;if(Te!==null){Te.return=v.return,Ar=Te;break}Ar=v.return}}var Foe=Math.ceil,jb=E.ReactCurrentDispatcher,j3=E.ReactCurrentOwner,Bc=E.ReactCurrentBatchConfig,Xn=0,Os=null,ns=null,Zs=0,tc=0,dv=Jl(0),vs=0,Xy=null,h0=0,$b=0,$3=0,Jy=null,El=null,B3=0,fv=1/0,Jf=null,Bb=!1,U3=null,_p=null,Ub=!1,Sp=null,qb=0,Zy=0,q3=null,Wb=-1,zb=0;function nl(){return(Xn&6)!==0?qt():Wb!==-1?Wb:Wb=qt()}function Np(p){return(p.mode&1)===0?1:(Xn&2)!==0&&Zs!==0?Zs&-Zs:va.transition!==null?(zb===0&&(zb=Wm()),zb):(p=Yn,p!==0||(p=window.event,p=p===void 0?16:Ym(p.type)),p)}function Pu(p,v,A,I){if(50<Zy)throw Zy=0,q3=null,Error(r(185));vd(p,A,I),((Xn&2)===0||p!==Os)&&(p===Os&&((Xn&2)===0&&($b|=A),vs===4&&Ap(p,Zs)),Cl(p,I),A===1&&Xn===0&&(v.mode&1)===0&&(fv=qt()+500,c0&&ae()))}function Cl(p,v){var A=p.callbackNode;ho(p,v);var I=fo(p,p===Os?Zs:0);if(I===0)A!==null&&Jt(A),p.callbackNode=null,p.callbackPriority=0;else if(v=I&-I,p.callbackPriority!==v){if(A!=null&&Jt(A),v===1)p.tag===0?K(PM.bind(null,p)):M(PM.bind(null,p)),v3(function(){(Xn&6)===0&&ae()}),A=null;else{switch(qh(I)){case 1:A=qn;break;case 4:A=la;break;case 16:A=za;break;case 536870912:A=Nc;break;default:A=za}A=LM(A,CM.bind(null,p))}p.callbackPriority=v,p.callbackNode=A}}function CM(p,v){if(Wb=-1,zb=0,(Xn&6)!==0)throw Error(r(327));var A=p.callbackNode;if(hv()&&p.callbackNode!==A)return null;var I=fo(p,p===Os?Zs:0);if(I===0)return null;if((I&30)!==0||(I&p.expiredLanes)!==0||v)v=Vb(p,I);else{v=I;var H=Xn;Xn|=2;var ee=OM();(Os!==p||Zs!==v)&&(Jf=null,fv=qt()+500,m0(p,v));do try{$oe();break}catch(Te){TM(p,Te)}while(!0);gs(),jb.current=ee,Xn=H,ns!==null?v=0:(Os=null,Zs=0,v=vs)}if(v!==0){if(v===2&&(H=Af(p),H!==0&&(I=H,v=W3(p,H))),v===1)throw A=Xy,m0(p,0),Ap(p,I),Cl(p,qt()),A;if(v===6)Ap(p,I);else{if(H=p.current.alternate,(I&30)===0&&!Loe(H)&&(v=Vb(p,I),v===2&&(ee=Af(p),ee!==0&&(I=ee,v=W3(p,ee))),v===1))throw A=Xy,m0(p,0),Ap(p,I),Cl(p,qt()),A;switch(p.finishedWork=H,p.finishedLanes=I,v){case 0:case 1:throw Error(r(345));case 2:g0(p,El,Jf);break;case 3:if(Ap(p,I),(I&130023424)===I&&(v=B3+500-qt(),10<v)){if(fo(p,0)!==0)break;if(H=p.suspendedLanes,(H&I)!==I){nl(),p.pingedLanes|=p.suspendedLanes&H;break}p.timeoutHandle=jy(g0.bind(null,p,El,Jf),v);break}g0(p,El,Jf);break;case 4:if(Ap(p,I),(I&4194240)===I)break;for(v=p.eventTimes,H=-1;0<I;){var me=31-Va(I);ee=1<<me,me=v[me],me>H&&(H=me),I&=~ee}if(I=H,I=qt()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*Foe(I/1960))-I,10<I){p.timeoutHandle=jy(g0.bind(null,p,El,Jf),I);break}g0(p,El,Jf);break;case 5:g0(p,El,Jf);break;default:throw Error(r(329))}}}return Cl(p,qt()),p.callbackNode===A?CM.bind(null,p):null}function W3(p,v){var A=Jy;return p.current.memoizedState.isDehydrated&&(m0(p,v).flags|=256),p=Vb(p,v),p!==2&&(v=El,El=A,v!==null&&z3(v)),p}function z3(p){El===null?El=p:El.push.apply(El,p)}function Loe(p){for(var v=p;;){if(v.flags&16384){var A=v.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var I=0;I<A.length;I++){var H=A[I],ee=H.getSnapshot;H=H.value;try{if(!Kn(ee(),H))return!1}catch{return!1}}}if(A=v.child,v.subtreeFlags&16384&&A!==null)A.return=v,v=A;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ap(p,v){for(v&=~$3,v&=~$b,p.suspendedLanes|=v,p.pingedLanes&=~v,p=p.expirationTimes;0<v;){var A=31-Va(v),I=1<<A;p[A]=-1,v&=~I}}function PM(p){if((Xn&6)!==0)throw Error(r(327));hv();var v=fo(p,0);if((v&1)===0)return Cl(p,qt()),null;var A=Vb(p,v);if(p.tag!==0&&A===2){var I=Af(p);I!==0&&(v=I,A=W3(p,I))}if(A===1)throw A=Xy,m0(p,0),Ap(p,v),Cl(p,qt()),A;if(A===6)throw Error(r(345));return p.finishedWork=p.current.alternate,p.finishedLanes=v,g0(p,El,Jf),Cl(p,qt()),null}function V3(p,v){var A=Xn;Xn|=1;try{return p(v)}finally{Xn=A,Xn===0&&(fv=qt()+500,c0&&ae())}}function p0(p){Sp!==null&&Sp.tag===0&&(Xn&6)===0&&hv();var v=Xn;Xn|=1;var A=Bc.transition,I=Yn;try{if(Bc.transition=null,Yn=1,p)return p()}finally{Yn=I,Bc.transition=A,Xn=v,(Xn&6)===0&&ae()}}function H3(){tc=dv.current,ua(dv)}function m0(p,v){p.finishedWork=null,p.finishedLanes=0;var A=p.timeoutHandle;if(A!==-1&&(p.timeoutHandle=-1,Sb(A)),ns!==null)for(A=ns.return;A!==null;){var I=A;switch(We(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Zg();break;case 3:Lc(),ua(yo),ua(ms),Vy();break;case 5:Wy(I);break;case 4:Lc();break;case 13:ua(Ia);break;case 19:ua(Ia);break;case 10:wo(I.type._context);break;case 22:case 23:H3()}A=A.return}if(Os=p,ns=p=kp(p.current,null),Zs=tc=v,vs=0,Xy=null,$3=$b=h0=0,El=Jy=null,Zo!==null){for(v=0;v<Zo.length;v++)if(A=Zo[v],I=A.interleaved,I!==null){A.interleaved=null;var H=I.next,ee=A.pending;if(ee!==null){var me=ee.next;ee.next=H,I.next=me}A.pending=I}Zo=null}return p}function TM(p,v){do{var A=ns;try{if(gs(),ev.current=Db,yp){for(var I=La.memoizedState;I!==null;){var H=I.queue;H!==null&&(H.pending=null),I=I.next}yp=!1}if(jc=0,hi=ki=La=null,Nu=!1,xp=0,j3.current=null,A===null||A.return===null){vs=1,Xy=v,ns=null;break}e:{var ee=p,me=A.return,Te=A,qe=v;if(v=Zs,Te.flags|=32768,qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var xt=qe,Ut=Te,Vt=Ut.tag;if((Ut.mode&1)===0&&(Vt===0||Vt===11||Vt===15)){var Bt=Ut.alternate;Bt?(Ut.updateQueue=Bt.updateQueue,Ut.memoizedState=Bt.memoizedState,Ut.lanes=Bt.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var wr=tM(me);if(wr!==null){wr.flags&=-257,rM(wr,me,Te,ee,v),wr.mode&1&&eM(ee,xt,v),v=wr,qe=xt;var Er=v.updateQueue;if(Er===null){var Tr=new Set;Tr.add(qe),v.updateQueue=Tr}else Er.add(qe);break e}else{if((v&1)===0){eM(ee,xt,v),G3();break e}qe=Error(r(426))}}else if(Et&&Te.mode&1){var Bi=tM(me);if(Bi!==null){(Bi.flags&65536)===0&&(Bi.flags|=256),rM(Bi,me,Te,ee,v),da(cv(qe,Te));break e}}ee=qe=cv(qe,Te),vs!==4&&(vs=2),Jy===null?Jy=[ee]:Jy.push(ee),ee=me;do{switch(ee.tag){case 3:ee.flags|=65536,v&=-v,ee.lanes|=v;var lt=Z7(ee,qe,v);Al(ee,lt);break e;case 1:Te=qe;var Ye=ee.type,gt=ee.stateNode;if((ee.flags&128)===0&&(typeof Ye.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(_p===null||!_p.has(gt)))){ee.flags|=65536,v&=-v,ee.lanes|=v;var Zt=Q7(ee,Te,v);Al(ee,Zt);break e}}ee=ee.return}while(ee!==null)}IM(A)}catch(Dr){v=Dr,ns===A&&A!==null&&(ns=A=A.return);continue}break}while(!0)}function OM(){var p=jb.current;return jb.current=Db,p===null?Db:p}function G3(){(vs===0||vs===3||vs===2)&&(vs=4),Os===null||(h0&268435455)===0&&($b&268435455)===0||Ap(Os,Zs)}function Vb(p,v){var A=Xn;Xn|=2;var I=OM();(Os!==p||Zs!==v)&&(Jf=null,m0(p,v));do try{joe();break}catch(H){TM(p,H)}while(!0);if(gs(),Xn=A,jb.current=I,ns!==null)throw Error(r(261));return Os=null,Zs=0,vs}function joe(){for(;ns!==null;)DM(ns)}function $oe(){for(;ns!==null&&!lr();)DM(ns)}function DM(p){var v=FM(p.alternate,p,tc);p.memoizedProps=p.pendingProps,v===null?IM(p):ns=v,j3.current=null}function IM(p){var v=p;do{var A=v.alternate;if(p=v.return,(v.flags&32768)===0){if(A=Ooe(A,v,tc),A!==null){ns=A;return}}else{if(A=Doe(A,v),A!==null){A.flags&=32767,ns=A;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{vs=6,ns=null;return}}if(v=v.sibling,v!==null){ns=v;return}ns=v=p}while(v!==null);vs===0&&(vs=5)}function g0(p,v,A){var I=Yn,H=Bc.transition;try{Bc.transition=null,Yn=1,Boe(p,v,A,I)}finally{Bc.transition=H,Yn=I}return null}function Boe(p,v,A,I){do hv();while(Sp!==null);if((Xn&6)!==0)throw Error(r(327));A=p.finishedWork;var H=p.finishedLanes;if(A===null)return null;if(p.finishedWork=null,p.finishedLanes=0,A===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0;var ee=A.lanes|A.childLanes;if(Ry(p,ee),p===Os&&(ns=Os=null,Zs=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||Ub||(Ub=!0,LM(za,function(){return hv(),null})),ee=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||ee){ee=Bc.transition,Bc.transition=null;var me=Yn;Yn=1;var Te=Xn;Xn|=4,j3.current=null,Roe(p,A),SM(A,p),jf(Wf),Hh=!!o0,Wf=o0=null,p.current=A,Moe(A),zt(),Xn=Te,Yn=me,Bc.transition=ee}else p.current=A;if(Ub&&(Ub=!1,Sp=p,qb=H),ee=p.pendingLanes,ee===0&&(_p=null),Ac(A.stateNode),Cl(p,qt()),v!==null)for(I=p.onRecoverableError,A=0;A<v.length;A++)H=v[A],I(H.value,{componentStack:H.stack,digest:H.digest});if(Bb)throw Bb=!1,p=U3,U3=null,p;return(qb&1)!==0&&p.tag!==0&&hv(),ee=p.pendingLanes,(ee&1)!==0?p===q3?Zy++:(Zy=0,q3=p):Zy=0,ae(),null}function hv(){if(Sp!==null){var p=qh(qb),v=Bc.transition,A=Yn;try{if(Bc.transition=null,Yn=16>p?16:p,Sp===null)var I=!1;else{if(p=Sp,Sp=null,qb=0,(Xn&6)!==0)throw Error(r(331));var H=Xn;for(Xn|=4,Ar=p.current;Ar!==null;){var ee=Ar,me=ee.child;if((Ar.flags&16)!==0){var Te=ee.deletions;if(Te!==null){for(var qe=0;qe<Te.length;qe++){var xt=Te[qe];for(Ar=xt;Ar!==null;){var Ut=Ar;switch(Ut.tag){case 0:case 11:case 15:Ky(8,Ut,ee)}var Vt=Ut.child;if(Vt!==null)Vt.return=Ut,Ar=Vt;else for(;Ar!==null;){Ut=Ar;var Bt=Ut.sibling,wr=Ut.return;if(yM(Ut),Ut===xt){Ar=null;break}if(Bt!==null){Bt.return=wr,Ar=Bt;break}Ar=wr}}}var Er=ee.alternate;if(Er!==null){var Tr=Er.child;if(Tr!==null){Er.child=null;do{var Bi=Tr.sibling;Tr.sibling=null,Tr=Bi}while(Tr!==null)}}Ar=ee}}if((ee.subtreeFlags&2064)!==0&&me!==null)me.return=ee,Ar=me;else e:for(;Ar!==null;){if(ee=Ar,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:Ky(9,ee,ee.return)}var lt=ee.sibling;if(lt!==null){lt.return=ee.return,Ar=lt;break e}Ar=ee.return}}var Ye=p.current;for(Ar=Ye;Ar!==null;){me=Ar;var gt=me.child;if((me.subtreeFlags&2064)!==0&&gt!==null)gt.return=me,Ar=gt;else e:for(me=Ye;Ar!==null;){if(Te=Ar,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:Lb(9,Te)}}catch(Dr){Ei(Te,Te.return,Dr)}if(Te===me){Ar=null;break e}var Zt=Te.sibling;if(Zt!==null){Zt.return=Te.return,Ar=Zt;break e}Ar=Te.return}}if(Xn=H,ae(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Go,p)}catch{}I=!0}return I}finally{Yn=A,Bc.transition=v}}return!1}function RM(p,v,A){v=cv(A,v),v=Z7(p,v,1),p=Nl(p,v,1),v=nl(),p!==null&&(vd(p,1,v),Cl(p,v))}function Ei(p,v,A){if(p.tag===3)RM(p,p,A);else for(;v!==null;){if(v.tag===3){RM(v,p,A);break}else if(v.tag===1){var I=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(_p===null||!_p.has(I))){p=cv(A,p),p=Q7(v,p,1),v=Nl(v,p,1),p=nl(),v!==null&&(vd(v,1,p),Cl(v,p));break}}v=v.return}}function Uoe(p,v,A){var I=p.pingCache;I!==null&&I.delete(v),v=nl(),p.pingedLanes|=p.suspendedLanes&A,Os===p&&(Zs&A)===A&&(vs===4||vs===3&&(Zs&130023424)===Zs&&500>qt()-B3?m0(p,0):$3|=A),Cl(p,v)}function MM(p,v){v===0&&((p.mode&1)===0?v=1:(v=gd,gd<<=1,(gd&130023424)===0&&(gd=4194304)));var A=nl();p=na(p,v),p!==null&&(vd(p,v,A),Cl(p,A))}function qoe(p){var v=p.memoizedState,A=0;v!==null&&(A=v.retryLane),MM(p,A)}function Woe(p,v){var A=0;switch(p.tag){case 13:var I=p.stateNode,H=p.memoizedState;H!==null&&(A=H.retryLane);break;case 19:I=p.stateNode;break;default:throw Error(r(314))}I!==null&&I.delete(v),MM(p,A)}var FM;FM=function(p,v,A){if(p!==null)if(p.memoizedProps!==v.pendingProps||yo.current)kl=!0;else{if((p.lanes&A)===0&&(v.flags&128)===0)return kl=!1,Toe(p,v,A);kl=(p.flags&131072)!==0}else kl=!1,Et&&(v.flags&1048576)!==0&&It(v,ye,v.index);switch(v.lanes=0,v.tag){case 2:var I=v.type;Mb(p,v),p=v.pendingProps;var H=pp(v,ms.current);Xa(v,A),H=u0(null,v,I,p,H,A);var ee=$c();return v.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,xo(I)?(ee=!0,Hf(v)):ee=!1,v.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Qg(v),H.updater=Ib,v.stateNode=H,H._reactInternals=v,N3(v,I,p,A),v=C3(null,v,I,!0,ee,A)):(v.tag=0,Et&&ee&&_t(v),rl(null,v,H,A),v=v.child),v;case 16:I=v.elementType;e:{switch(Mb(p,v),p=v.pendingProps,H=I._init,I=H(I._payload),v.type=I,H=v.tag=Voe(I),p=ku(I,p),H){case 0:v=E3(null,v,I,p,A);break e;case 1:v=lM(null,v,I,p,A);break e;case 11:v=nM(null,v,I,p,A);break e;case 14:v=aM(null,v,I,ku(I.type,p),A);break e}throw Error(r(306,I,""))}return v;case 0:return I=v.type,H=v.pendingProps,H=v.elementType===I?H:ku(I,H),E3(p,v,I,H,A);case 1:return I=v.type,H=v.pendingProps,H=v.elementType===I?H:ku(I,H),lM(p,v,I,H,A);case 3:e:{if(cM(v),p===null)throw Error(r(387));I=v.pendingProps,ee=v.memoizedState,H=ee.element,qy(p,v),_u(v,I,null,A);var me=v.memoizedState;if(I=me.element,ee.isDehydrated)if(ee={element:I,isDehydrated:!1,cache:me.cache,pendingSuspenseBoundaries:me.pendingSuspenseBoundaries,transitions:me.transitions},v.updateQueue.baseState=ee,v.memoizedState=ee,v.flags&256){H=cv(Error(r(423)),v),v=uM(p,v,I,A,H);break e}else if(I!==H){H=cv(Error(r(424)),v),v=uM(p,v,I,A,H);break e}else for(Ct=Ks(v.stateNode.containerInfo.firstChild),ze=v,Et=!0,Tt=null,A=ra(v,null,I,A),v.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(yn(),I===H){v=Xf(p,v,A);break e}rl(p,v,I,A)}v=v.child}return v;case 5:return Eb(v),p===null&&sr(v),I=v.type,H=v.pendingProps,ee=p!==null?p.memoizedProps:null,me=H.children,Ly(I,H)?me=null:ee!==null&&Ly(I,ee)&&(v.flags|=32),oM(p,v),rl(p,v,me,A),v.child;case 6:return p===null&&sr(v),null;case 13:return dM(p,v,A);case 4:return vp(v,v.stateNode.containerInfo),I=v.pendingProps,p===null?v.child=Li(v,null,I,A):rl(p,v,I,A),v.child;case 11:return I=v.type,H=v.pendingProps,H=v.elementType===I?H:ku(I,H),nM(p,v,I,H,A);case 7:return rl(p,v,v.pendingProps,A),v.child;case 8:return rl(p,v,v.pendingProps.children,A),v.child;case 12:return rl(p,v,v.pendingProps.children,A),v.child;case 10:e:{if(I=v.type._context,H=v.pendingProps,ee=v.memoizedProps,me=H.value,ga(Ps,I._currentValue),I._currentValue=me,ee!==null)if(Kn(ee.value,me)){if(ee.children===H.children&&!yo.current){v=Xf(p,v,A);break e}}else for(ee=v.child,ee!==null&&(ee.return=v);ee!==null;){var Te=ee.dependencies;if(Te!==null){me=ee.child;for(var qe=Te.firstContext;qe!==null;){if(qe.context===I){if(ee.tag===1){qe=Sl(-1,A&-A),qe.tag=2;var xt=ee.updateQueue;if(xt!==null){xt=xt.shared;var Ut=xt.pending;Ut===null?qe.next=qe:(qe.next=Ut.next,Ut.next=qe),xt.pending=qe}}ee.lanes|=A,qe=ee.alternate,qe!==null&&(qe.lanes|=A),_l(ee.return,A,v),Te.lanes|=A;break}qe=qe.next}}else if(ee.tag===10)me=ee.type===v.type?null:ee.child;else if(ee.tag===18){if(me=ee.return,me===null)throw Error(r(341));me.lanes|=A,Te=me.alternate,Te!==null&&(Te.lanes|=A),_l(me,A,v),me=ee.sibling}else me=ee.child;if(me!==null)me.return=ee;else for(me=ee;me!==null;){if(me===v){me=null;break}if(ee=me.sibling,ee!==null){ee.return=me.return,me=ee;break}me=me.return}ee=me}rl(p,v,H.children,A),v=v.child}return v;case 9:return H=v.type,I=v.pendingProps.children,Xa(v,A),H=Ai(H),I=I(H),v.flags|=1,rl(p,v,I,A),v.child;case 14:return I=v.type,H=ku(I,v.pendingProps),H=ku(I.type,H),aM(p,v,I,H,A);case 15:return iM(p,v,v.type,v.pendingProps,A);case 17:return I=v.type,H=v.pendingProps,H=v.elementType===I?H:ku(I,H),Mb(p,v),v.tag=1,xo(I)?(p=!0,Hf(v)):p=!1,Xa(v,A),X7(v,I,H),N3(v,I,H,A),C3(null,v,I,!0,p,A);case 19:return hM(p,v,A);case 22:return sM(p,v,A)}throw Error(r(156,v.tag))};function LM(p,v){return Ft(p,v)}function zoe(p,v,A,I){this.tag=p,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uc(p,v,A,I){return new zoe(p,v,A,I)}function Y3(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Voe(p){if(typeof p=="function")return Y3(p)?1:0;if(p!=null){if(p=p.$$typeof,p===R)return 11;if(p===Z)return 14}return 2}function kp(p,v){var A=p.alternate;return A===null?(A=Uc(p.tag,v,p.key,p.mode),A.elementType=p.elementType,A.type=p.type,A.stateNode=p.stateNode,A.alternate=p,p.alternate=A):(A.pendingProps=v,A.type=p.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=p.flags&14680064,A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,v=p.dependencies,A.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},A.sibling=p.sibling,A.index=p.index,A.ref=p.ref,A}function Hb(p,v,A,I,H,ee){var me=2;if(I=p,typeof p=="function")Y3(p)&&(me=1);else if(typeof p=="string")me=5;else e:switch(p){case P:return v0(A.children,H,ee,v);case F:me=8,H|=8;break;case L:return p=Uc(12,A,v,H|2),p.elementType=L,p.lanes=ee,p;case j:return p=Uc(13,A,v,H),p.elementType=j,p.lanes=ee,p;case Y:return p=Uc(19,A,v,H),p.elementType=Y,p.lanes=ee,p;case z:return Gb(A,H,ee,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case W:me=10;break e;case T:me=9;break e;case R:me=11;break e;case Z:me=14;break e;case re:me=16,I=null;break e}throw Error(r(130,p==null?p:typeof p,""))}return v=Uc(me,A,v,H),v.elementType=p,v.type=I,v.lanes=ee,v}function v0(p,v,A,I){return p=Uc(7,p,I,v),p.lanes=A,p}function Gb(p,v,A,I){return p=Uc(22,p,I,v),p.elementType=z,p.lanes=A,p.stateNode={isHidden:!1},p}function K3(p,v,A){return p=Uc(6,p,null,v),p.lanes=A,p}function X3(p,v,A){return v=Uc(4,p.children!==null?p.children:[],p.key,v),v.lanes=A,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function Hoe(p,v,A,I,H){this.tag=v,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zm(0),this.expirationTimes=zm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zm(0),this.identifierPrefix=I,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function J3(p,v,A,I,H,ee,me,Te,qe){return p=new Hoe(p,v,A,Te,qe),v===1?(v=1,ee===!0&&(v|=8)):v=0,ee=Uc(3,null,null,v),p.current=ee,ee.stateNode=p,ee.memoizedState={element:I,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(ee),p}function Goe(p,v,A){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:I==null?null:""+I,children:p,containerInfo:v,implementation:A}}function jM(p){if(!p)return Od;p=p._reactInternals;e:{if(Se(p)!==p||p.tag!==1)throw Error(r(170));var v=p;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(xo(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(r(171))}if(p.tag===1){var A=p.type;if(xo(A))return Uy(p,A,v)}return v}function $M(p,v,A,I,H,ee,me,Te,qe){return p=J3(A,I,!0,p,H,ee,me,Te,qe),p.context=jM(null),A=p.current,I=nl(),H=Np(A),ee=Sl(I,H),ee.callback=v??null,Nl(A,ee,H),p.current.lanes=H,vd(p,H,I),Cl(p,I),p}function Yb(p,v,A,I){var H=v.current,ee=nl(),me=Np(H);return A=jM(A),v.context===null?v.context=A:v.pendingContext=A,v=Sl(ee,me),v.payload={element:p},I=I===void 0?null:I,I!==null&&(v.callback=I),p=Nl(H,v,me),p!==null&&(Pu(p,H,me,ee),Gf(p,H,me)),me}function Kb(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function BM(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var A=p.retryLane;p.retryLane=A!==0&&A<v?A:v}}function Z3(p,v){BM(p,v),(p=p.alternate)&&BM(p,v)}function Yoe(){return null}var UM=typeof reportError=="function"?reportError:function(p){console.error(p)};function Q3(p){this._internalRoot=p}Xb.prototype.render=Q3.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(r(409));Yb(p,v,null,null)},Xb.prototype.unmount=Q3.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;p0(function(){Yb(null,p,null,null)}),v[Cs]=null}};function Xb(p){this._internalRoot=p}Xb.prototype.unstable_scheduleHydration=function(p){if(p){var v=kc();p={blockedOn:null,target:p,priority:v};for(var A=0;A<Cc.length&&v!==0&&v<Cc[A].priority;A++);Cc.splice(A,0,p),A===0&&zh(p)}};function eA(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function Jb(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function qM(){}function Koe(p,v,A,I,H){if(H){if(typeof I=="function"){var ee=I;I=function(){var xt=Kb(me);ee.call(xt)}}var me=$M(v,I,p,0,null,!1,!1,"",qM);return p._reactRootContainer=me,p[Cs]=me.current,Uf(p.nodeType===8?p.parentNode:p),p0(),me}for(;H=p.lastChild;)p.removeChild(H);if(typeof I=="function"){var Te=I;I=function(){var xt=Kb(qe);Te.call(xt)}}var qe=J3(p,0,!1,null,null,!1,!1,"",qM);return p._reactRootContainer=qe,p[Cs]=qe.current,Uf(p.nodeType===8?p.parentNode:p),p0(function(){Yb(v,qe,A,I)}),qe}function Zb(p,v,A,I,H){var ee=A._reactRootContainer;if(ee){var me=ee;if(typeof H=="function"){var Te=H;H=function(){var qe=Kb(me);Te.call(qe)}}Yb(v,me,p,H)}else me=Koe(A,v,p,H,I);return Kb(me)}qg=function(p){switch(p.tag){case 3:var v=p.stateNode;if(v.current.memoizedState.isDehydrated){var A=Nf(v.pendingLanes);A!==0&&(Uh(v,A|1),Cl(v,qt()),(Xn&6)===0&&(fv=qt()+500,ae()))}break;case 13:p0(function(){var I=na(p,1);if(I!==null){var H=nl();Pu(I,p,1,H)}}),Z3(p,1)}},Vm=function(p){if(p.tag===13){var v=na(p,134217728);if(v!==null){var A=nl();Pu(v,p,134217728,A)}Z3(p,134217728)}},Wg=function(p){if(p.tag===13){var v=Np(p),A=na(p,v);if(A!==null){var I=nl();Pu(A,p,v,I)}Z3(p,v)}},kc=function(){return Yn},kf=function(p,v){var A=Yn;try{return Yn=p,v()}finally{Yn=A}},cr=function(p,v,A){switch(v){case"input":if(Ge(p,A),v=A.name,A.type==="radio"&&v!=null){for(A=p;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+v)+'][type="radio"]'),v=0;v<A.length;v++){var I=A[v];if(I!==p&&I.form===p.form){var H=l0(I);if(!H)throw Error(r(90));te(I),Ge(I,H)}}}break;case"textarea":Me(p,A);break;case"select":v=A.value,v!=null&&ut(p,!!A.multiple,v,!1)}},hs=V3,Gn=p0;var Xoe={usingClientEntryPoint:!1,Events:[hp,zf,l0,Pr,hn,V3]},Qy={findFiberByHostInstance:Td,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Joe={bundleType:Qy.bundleType,version:Qy.version,rendererPackageName:Qy.rendererPackageName,rendererConfig:Qy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=st(p),p===null?null:p.stateNode},findFiberByHostInstance:Qy.findFiberByHostInstance||Yoe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qb.isDisabled&&Qb.supportsFiber)try{Go=Qb.inject(Joe),_i=Qb}catch{}}return Pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xoe,Pl.createPortal=function(p,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eA(v))throw Error(r(200));return Goe(p,v,null,A)},Pl.createRoot=function(p,v){if(!eA(p))throw Error(r(299));var A=!1,I="",H=UM;return v!=null&&(v.unstable_strictMode===!0&&(A=!0),v.identifierPrefix!==void 0&&(I=v.identifierPrefix),v.onRecoverableError!==void 0&&(H=v.onRecoverableError)),v=J3(p,1,!1,null,null,A,!1,I,H),p[Cs]=v.current,Uf(p.nodeType===8?p.parentNode:p),new Q3(v)},Pl.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=st(v),p=p===null?null:p.stateNode,p},Pl.flushSync=function(p){return p0(p)},Pl.hydrate=function(p,v,A){if(!Jb(v))throw Error(r(200));return Zb(null,p,v,!0,A)},Pl.hydrateRoot=function(p,v,A){if(!eA(p))throw Error(r(405));var I=A!=null&&A.hydratedSources||null,H=!1,ee="",me=UM;if(A!=null&&(A.unstable_strictMode===!0&&(H=!0),A.identifierPrefix!==void 0&&(ee=A.identifierPrefix),A.onRecoverableError!==void 0&&(me=A.onRecoverableError)),v=$M(v,null,p,1,A??null,H,!1,ee,me),p[Cs]=v.current,Uf(p),I)for(p=0;p<I.length;p++)A=I[p],H=A._getVersion,H=H(A._source),v.mutableSourceEagerHydrationData==null?v.mutableSourceEagerHydrationData=[A,H]:v.mutableSourceEagerHydrationData.push(A,H);return new Xb(v)},Pl.render=function(p,v,A){if(!Jb(v))throw Error(r(200));return Zb(null,p,v,!1,A)},Pl.unmountComponentAtNode=function(p){if(!Jb(p))throw Error(r(40));return p._reactRootContainer?(p0(function(){Zb(null,null,p,!1,function(){p._reactRootContainer=null,p[Cs]=null})}),!0):!1},Pl.unstable_batchedUpdates=V3,Pl.unstable_renderSubtreeIntoContainer=function(p,v,A,I){if(!Jb(A))throw Error(r(200));if(p==null||p._reactInternals===void 0)throw Error(r(38));return Zb(p,v,A,!1,I)},Pl.version="18.3.1-next-f1338f8080-20240426",Pl}var YM;function MH(){if(YM)return rA.exports;YM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rA.exports=sle(),rA.exports}var KM;function ole(){if(KM)return t_;KM=1;var e=MH();return t_.createRoot=e.createRoot,t_.hydrateRoot=e.hydrateRoot,t_}var lle=ole(),uy=MH();const cle=pa(uy);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cx.apply(this,arguments)}var Yp;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yp||(Yp={}));const XM="popstate";function ule(e){e===void 0&&(e={});function t(a,i){let{pathname:s="/",search:o="",hash:c=""}=_g(a.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),t6("",{pathname:s,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let s=a.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:y5(i))}function n(a,i){ZO(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return fle(t,r,n,e)}function Ji(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ZO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dle(){return Math.random().toString(36).substr(2,8)}function JM(e,t){return{usr:e.state,key:e.key,idx:t}}function t6(e,t,r,n){return r===void 0&&(r=null),cx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_g(t):t,{state:r,key:t&&t.key||n||dle()})}function y5(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function _g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function fle(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,o=Yp.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(cx({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){o=Yp.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:o,location:g.location,delta:b})}function h(y,b){o=Yp.Push;let _=t6(g.location,y,b);r&&r(_,y),u=d()+1;let N=JM(_,u),E=g.createHref(_);try{s.pushState(N,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(E)}i&&c&&c({action:o,location:g.location,delta:1})}function m(y,b){o=Yp.Replace;let _=t6(g.location,y,b);r&&r(_,y),u=d();let N=JM(_,u),E=g.createHref(_);s.replaceState(N,"",E),i&&c&&c({action:o,location:g.location,delta:0})}function w(y){let b=a.location.origin!=="null"?a.location.origin:a.location.href,_=typeof y=="string"?y:y5(y);return _=_.replace(/ $/,"%20"),Ji(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let g={get action(){return o},get location(){return e(a,s)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(XM,f),c=y,()=>{a.removeEventListener(XM,f),c=null}},createHref(y){return t(a,y)},createURL:w,encodeLocation(y){let b=w(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(y){return s.go(y)}};return g}var ZM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ZM||(ZM={}));function hle(e,t,r){return r===void 0&&(r="/"),ple(e,t,r)}function ple(e,t,r,n){let a=typeof t=="string"?_g(t):t,i=QO(a.pathname||"/",r);if(i==null)return null;let s=FH(e);mle(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=Ele(i);o=Nle(s[c],u)}return o}function FH(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,s,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};c.relativePath.startsWith("/")&&(Ji(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=tm([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Ji(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),FH(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:_le(u,i.index),routesMeta:d})};return e.forEach((i,s)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,s);else for(let c of LH(i.path))a(i,s,c)}),t}function LH(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=LH(n.join("/")),o=[];return o.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...s),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function mle(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Sle(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gle=/^:[\w-]+$/,vle=3,yle=2,xle=1,wle=10,ble=-2,QM=e=>e==="*";function _le(e,t){let r=e.split("/"),n=r.length;return r.some(QM)&&(n+=ble),t&&(n+=yle),r.filter(a=>!QM(a)).reduce((a,i)=>a+(gle.test(i)?vle:i===""?xle:wle),n)}function Sle(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Nle(e,t,r){let{routesMeta:n}=e,a={},i="/",s=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Ale({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:tm([i,f.pathname]),pathnameBase:Ole(tm([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=tm([i,f.pathnameBase]))}return s}function Ale(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=kle(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=o[f]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=o[f];return m&&!w?u[h]=void 0:u[h]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:s,pattern:e}}function kle(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ZO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Ele(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ZO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function QO(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Cle(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?_g(e):e;return{pathname:r?r.startsWith("/")?r:Ple(r,t):t,search:Dle(n),hash:Ile(a)}}function Ple(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function iA(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tle(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function eD(e,t){let r=Tle(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function tD(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=_g(e):(a=cx({},e),Ji(!a.pathname||!a.pathname.includes("?"),iA("?","pathname","search",a)),Ji(!a.pathname||!a.pathname.includes("#"),iA("#","pathname","hash",a)),Ji(!a.search||!a.search.includes("#"),iA("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=Cle(a,o),u=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const tm=e=>e.join("/").replace(/\/\/+/g,"/"),Ole=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ile=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rle(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jH=["post","put","patch","delete"];new Set(jH);const Mle=["get",...jH];new Set(Mle);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ux.apply(this,arguments)}const rD=S.createContext(null),Fle=S.createContext(null),km=S.createContext(null),g4=S.createContext(null),mf=S.createContext({outlet:null,matches:[],isDataRoute:!1}),$H=S.createContext(null);function Lle(e,t){let{relative:r}=t===void 0?{}:t;dy()||Ji(!1);let{basename:n,navigator:a}=S.useContext(km),{hash:i,pathname:s,search:o}=UH(e,{relative:r}),c=s;return n!=="/"&&(c=s==="/"?n:tm([n,s])),a.createHref({pathname:c,search:o,hash:i})}function dy(){return S.useContext(g4)!=null}function Em(){return dy()||Ji(!1),S.useContext(g4).location}function BH(e){S.useContext(km).static||S.useLayoutEffect(e)}function Ss(){let{isDataRoute:e}=S.useContext(mf);return e?Zle():jle()}function jle(){dy()||Ji(!1);let e=S.useContext(rD),{basename:t,future:r,navigator:n}=S.useContext(km),{matches:a}=S.useContext(mf),{pathname:i}=Em(),s=JSON.stringify(eD(a,r.v7_relativeSplatPath)),o=S.useRef(!1);return BH(()=>{o.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=tD(u,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:tm([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,s,i,e])}const $le=S.createContext(null);function Ble(e){let t=S.useContext(mf).outlet;return t&&S.createElement($le.Provider,{value:e},t)}function fy(){let{matches:e}=S.useContext(mf),t=e[e.length-1];return t?t.params:{}}function UH(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=S.useContext(km),{matches:a}=S.useContext(mf),{pathname:i}=Em(),s=JSON.stringify(eD(a,n.v7_relativeSplatPath));return S.useMemo(()=>tD(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function Ule(e,t){return qle(e,t)}function qle(e,t,r,n){dy()||Ji(!1);let{navigator:a,static:i}=S.useContext(km),{matches:s}=S.useContext(mf),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Em(),f;if(t){var h;let b=typeof t=="string"?_g(t):t;u==="/"||(h=b.pathname)!=null&&h.startsWith(u)||Ji(!1),f=b}else f=d;let m=f.pathname||"/",w=m;if(u!=="/"){let b=u.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=hle(e,{pathname:w}),y=Gle(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:tm([u,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:tm([u,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return t&&y?S.createElement(g4.Provider,{value:{location:ux({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Yp.Pop}},y):y}function Wle(){let e=Jle(),t=Rle(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:a},r):null,null)}const zle=S.createElement(Wle,null);class Vle extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(mf.Provider,{value:this.props.routeContext},S.createElement($H.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hle(e){let{routeContext:t,match:r,children:n}=e,a=S.useContext(rD);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(mf.Provider,{value:t},n)}function Gle(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Ji(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,w=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let m,w=!1,g=null,y=null;r&&(m=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||zle,c&&(u<0&&h===0?(Qle("route-fallback"),w=!0,y=null):u===h&&(w=!0,y=f.route.hydrateFallbackElement||null)));let b=t.concat(s.slice(0,h+1)),_=()=>{let N;return m?N=g:w?N=y:f.route.Component?N=S.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=d,S.createElement(Hle,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:N})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?S.createElement(Vle,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var qH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qH||{}),WH=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(WH||{});function Yle(e){let t=S.useContext(rD);return t||Ji(!1),t}function Kle(e){let t=S.useContext(Fle);return t||Ji(!1),t}function Xle(e){let t=S.useContext(mf);return t||Ji(!1),t}function zH(e){let t=Xle(),r=t.matches[t.matches.length-1];return r.route.id||Ji(!1),r.route.id}function Jle(){var e;let t=S.useContext($H),r=Kle(),n=zH();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Zle(){let{router:e}=Yle(qH.UseNavigateStable),t=zH(WH.UseNavigateStable),r=S.useRef(!1);return BH(()=>{r.current=!0}),S.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ux({fromRouteId:t},i)))},[e,t])}const eF={};function Qle(e,t,r){eF[e]||(eF[e]=!0)}function ece(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function r6(e){let{to:t,replace:r,state:n,relative:a}=e;dy()||Ji(!1);let{future:i,static:s}=S.useContext(km),{matches:o}=S.useContext(mf),{pathname:c}=Em(),u=Ss(),d=tD(t,eD(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function VH(e){return Ble(e.context)}function $n(e){Ji(!1)}function tce(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Yp.Pop,navigator:i,static:s=!1,future:o}=e;dy()&&Ji(!1);let c=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:i,static:s,future:ux({v7_relativeSplatPath:!1},o)}),[c,o,i,s]);typeof n=="string"&&(n=_g(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:w="default"}=n,g=S.useMemo(()=>{let y=QO(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:w},navigationType:a}},[c,d,f,h,m,w,a]);return g==null?null:S.createElement(km.Provider,{value:u},S.createElement(g4.Provider,{children:r,value:g}))}function rce(e){let{children:t,location:r}=e;return Ule(n6(t),r)}new Promise(()=>{});function n6(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,a)=>{if(!S.isValidElement(n))return;let i=[...t,a];if(n.type===S.Fragment){r.push.apply(r,n6(n.props.children,i));return}n.type!==$n&&Ji(!1),!n.props.index||!n.props.children||Ji(!1);let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=n6(n.props.children,i)),r.push(s)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a6(){return a6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a6.apply(this,arguments)}function nce(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ace(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ice(e,t){return e.button===0&&(!t||t==="_self")&&!ace(e)}function i6(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function sce(e,t){let r=i6(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const oce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lce="6";try{window.__reactRouterVersion=lce}catch{}const cce="startTransition",tF=lx[cce];function uce(e){let{basename:t,children:r,future:n,window:a}=e,i=S.useRef();i.current==null&&(i.current=ule({window:a,v5Compat:!0}));let s=i.current,[o,c]=S.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},d=S.useCallback(f=>{u&&tF?tF(()=>c(f)):c(f)},[c,u]);return S.useLayoutEffect(()=>s.listen(d),[s,d]),S.useEffect(()=>ece(n),[n]),S.createElement(tce,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}const dce=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yi=S.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:s,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=nce(t,oce),{basename:m}=S.useContext(km),w,g=!1;if(typeof u=="string"&&fce.test(u)&&(w=u,dce))try{let N=new URL(window.location.href),E=u.startsWith("//")?new URL(N.protocol+u):new URL(u),C=QO(E.pathname,m);E.origin===N.origin&&C!=null?u=C+E.search+E.hash:g=!0}catch{}let y=Lle(u,{relative:a}),b=hce(u,{replace:s,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(N){n&&n(N),N.defaultPrevented||b(N)}return S.createElement("a",a6({},h,{href:w||y,onClick:g||i?n:_,ref:r,target:c}))});var rF;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(rF||(rF={}));var nF;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(nF||(nF={}));function hce(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:o}=t===void 0?{}:t,c=Ss(),u=Em(),d=UH(e,{relative:s});return S.useCallback(f=>{if(ice(f,r)){f.preventDefault();let h=n!==void 0?n:y5(u)===y5(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:s,viewTransition:o})}},[u,c,d,n,a,r,e,i,s,o])}function HH(e){let t=S.useRef(i6(e)),r=S.useRef(!1),n=Em(),a=S.useMemo(()=>sce(n.search,r.current?null:t.current),[n.search]),i=Ss(),s=S.useCallback((o,c)=>{const u=i6(typeof o=="function"?o(a):o);r.current=!0,i("?"+u,c)},[i,a]);return[a,s]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Yt=(e,t)=>{const r=S.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,...u},d)=>S.createElement("svg",{ref:d,...pce,width:a,height:a,stroke:n,strokeWidth:s?Number(i)*24/Number(a):i,className:["lucide",`lucide-${mce(e)}`,o].join(" "),...u},[...t.map(([f,h])=>S.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=Yt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Yt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=Yt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=Yt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Yt("Armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z",key:"1e01m0"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Yt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=Yt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=Yt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=Yt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Yt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Yt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=Yt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=Yt("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=Yt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=Yt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=Yt("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Yt("BrainCog",[["path",{d:"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5",key:"1kgmhc"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m15.7 10.4-.9.4",key:"ayzo6p"}],["path",{d:"m9.2 13.2-.9.4",key:"1uzb3g"}],["path",{d:"m13.6 15.7-.4-.9",key:"11ifqf"}],["path",{d:"m10.8 9.2-.4-.9",key:"1pmk2v"}],["path",{d:"m15.7 13.5-.9-.4",key:"7ng02m"}],["path",{d:"m9.2 10.9-.9-.4",key:"1x66zd"}],["path",{d:"m10.5 15.7.4-.9",key:"3js94g"}],["path",{d:"m13.1 9.2.4-.9",key:"18n7mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=Yt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=Yt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=Yt("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Yt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=Yt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=Yt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=Yt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=Yt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Yt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Yt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Yt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Yt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=Yt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=Yt("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=Yt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=Yt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=Yt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=Yt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Yt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=Yt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=Yt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=Yt("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Yt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=Yt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=Yt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=Yt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=Yt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=Yt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=Yt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Yt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=Yt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Yt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=Yt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=Yt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=Yt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Yt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=Yt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Yt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=Yt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=Yt("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=Yt("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=Yt("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=Yt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=Yt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=Yt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=Yt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=Yt("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Yt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Yt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=Yt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=Yt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=Yt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=Yt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=Yt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qce=Yt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wce=Yt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Yt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Yt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zce=Yt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Yt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Yt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=Yt("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=Yt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=Yt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Yt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vce=Yt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Yt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=Yt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Yt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Yt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hce=Yt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gce=Yt("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yce=Yt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kce=Yt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xce=Yt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function uF(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function S4(...e){return t=>{let r=!1;const n=e.map(a=>{const i=uF(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():uF(e[a],null)}}}}function Kr(...e){return S.useCallback(S4(...e),e)}var uA={exports:{}},e2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dF;function Jce(){if(dF)return e2;dF=1;var e=m4(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(o,c,u){var d,f={},h=null,m=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(m=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:o,key:h,ref:m,props:f,_owner:a.current}}return e2.Fragment=r,e2.jsx=s,e2.jsxs=s,e2}var fF;function Zce(){return fF||(fF=1,uA.exports=Jce()),uA.exports}var sD=Zce();const l=sD.jsx,x=sD.jsxs,_r=sD.Fragment;function lm(e){const t=Qce(e),r=S.forwardRef((n,a)=>{const{children:i,...s}=n,o=S.Children.toArray(i),c=o.find(eue);if(c){const u=c.props.children,d=o.map(f=>f===c?S.Children.count(u)>1?S.Children.only(null):S.isValidElement(u)?u.props.children:null:f);return l(t,{...s,ref:a,children:S.isValidElement(u)?S.cloneElement(u,void 0,d):null})}return l(t,{...s,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var oG=lm("Slot");function Qce(e){const t=S.forwardRef((r,n)=>{const{children:a,...i}=r;if(S.isValidElement(a)){const s=rue(a),o=tue(i,a.props);return a.type!==S.Fragment&&(o.ref=n?S4(n,s):s),S.cloneElement(a,o)}return S.Children.count(a)>1?S.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lG=Symbol("radix.slottable");function cG(e){const t=({children:r})=>l(_r,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=lG,t}function eue(e){return S.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lG}function tue(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function rue(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function uG(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=uG(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function gn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=uG(e))&&(n&&(n+=" "),n+=t);return n}const hF=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,pF=gn,Lw=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return pF(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=hF(d)||hF(f);return a[u][h]}),o=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(w=>{let[g,y]=w;return Array.isArray(y)?y.includes({...i,...o}[g]):{...i,...o}[g]===y})?[...u,f,h]:u},[]);return pF(e,s,c,r==null?void 0:r.class,r==null?void 0:r.className)},oD="-",nue=e=>{const t=iue(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const o=s.split(oD);return o[0]===""&&o.length!==1&&o.shift(),dG(o,t)||aue(s)},getConflictingClassGroupIds:(s,o)=>{const c=r[s]||[];return o&&n[s]?[...c,...n[s]]:c}}},dG=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?dG(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(oD);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},mF=/^\[(.+)\]$/,aue=e=>{if(mF.test(e)){const t=mF.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},iue=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return oue(Object.entries(e.classGroups),r).forEach(([i,s])=>{o6(s,n,i,t)}),n},o6=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:gF(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(sue(a)){o6(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,s])=>{o6(s,gF(t,i),r,n)})})},gF=(e,t)=>{let r=e;return t.split(oD).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},sue=e=>e.isThemeGetter,oue=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,o])=>[t+s,o])):i);return[r,a]}):e,lue=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,s)=>{r.set(i,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let s=r.get(i);if(s!==void 0)return s;if((s=n.get(i))!==void 0)return a(i,s),s},set(i,s){r.has(i)?r.set(i,s):a(i,s)}}},fG="!",cue=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,s=o=>{const c=[];let u=0,d=0,f;for(let y=0;y<o.length;y++){let b=o[y];if(u===0){if(b===a&&(n||o.slice(y,y+i)===t)){c.push(o.slice(d,y)),d=y+i;continue}if(b==="/"){f=y;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?o:o.substring(d),m=h.startsWith(fG),w=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:g}};return r?o=>r({className:o,parseClassName:s}):s},uue=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},due=e=>({cache:lue(e.cacheSize),parseClassName:cue(e),...nue(e)}),fue=/\s+/,hue=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],s=e.trim().split(fue);let o="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let w=!!m,g=n(w?h.substring(0,m):h);if(!g){if(!w){o=u+(o.length>0?" "+o:o);continue}if(g=n(h),!g){o=u+(o.length>0?" "+o:o);continue}w=!1}const y=uue(d).join(":"),b=f?y+fG:y,_=b+g;if(i.includes(_))continue;i.push(_);const N=a(g,w);for(let E=0;E<N.length;++E){const C=N[E];i.push(b+C)}o=u+(o.length>0?" "+o:o)}return o};function pue(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=hG(t))&&(n&&(n+=" "),n+=r);return n}const hG=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=hG(e[n]))&&(r&&(r+=" "),r+=t);return r};function mue(e,...t){let r,n,a,i=s;function s(c){const u=t.reduce((d,f)=>f(d),e());return r=due(u),n=r.cache.get,a=r.cache.set,i=o,o(c)}function o(c){const u=n(c);if(u)return u;const d=hue(c,r);return a(c,d),d}return function(){return i(pue.apply(null,arguments))}}const Ja=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},pG=/^\[(?:([a-z-]+):)?(.+)\]$/i,gue=/^\d+\/\d+$/,vue=new Set(["px","full","screen"]),yue=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xue=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wue=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bue=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_ue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zf=e=>Kv(e)||vue.has(e)||gue.test(e),Cp=e=>hy(e,"length",Tue),Kv=e=>!!e&&!Number.isNaN(Number(e)),dA=e=>hy(e,"number",Kv),t2=e=>!!e&&Number.isInteger(Number(e)),Sue=e=>e.endsWith("%")&&Kv(e.slice(0,-1)),An=e=>pG.test(e),Pp=e=>yue.test(e),Nue=new Set(["length","size","percentage"]),Aue=e=>hy(e,Nue,mG),kue=e=>hy(e,"position",mG),Eue=new Set(["image","url"]),Cue=e=>hy(e,Eue,Due),Pue=e=>hy(e,"",Oue),r2=()=>!0,hy=(e,t,r)=>{const n=pG.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Tue=e=>xue.test(e)&&!wue.test(e),mG=()=>!1,Oue=e=>bue.test(e),Due=e=>_ue.test(e),Iue=()=>{const e=Ja("colors"),t=Ja("spacing"),r=Ja("blur"),n=Ja("brightness"),a=Ja("borderColor"),i=Ja("borderRadius"),s=Ja("borderSpacing"),o=Ja("borderWidth"),c=Ja("contrast"),u=Ja("grayscale"),d=Ja("hueRotate"),f=Ja("invert"),h=Ja("gap"),m=Ja("gradientColorStops"),w=Ja("gradientColorStopPositions"),g=Ja("inset"),y=Ja("margin"),b=Ja("opacity"),_=Ja("padding"),N=Ja("saturate"),E=Ja("scale"),C=Ja("sepia"),D=Ja("skew"),P=Ja("space"),F=Ja("translate"),L=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",An,t],R=()=>[An,t],j=()=>["",Zf,Cp],Y=()=>["auto",Kv,An],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",An],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Kv,An];return{cacheSize:500,separator:":",theme:{colors:[r2],spacing:[Zf,Cp],blur:["none","",Pp,An],brightness:Q(),borderColor:[e],borderRadius:["none","","full",Pp,An],borderSpacing:R(),borderWidth:j(),contrast:Q(),grayscale:B(),hueRotate:Q(),invert:B(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[Sue,Cp],inset:T(),margin:T(),opacity:Q(),padding:R(),saturate:Q(),scale:Q(),sepia:B(),skew:Q(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",An]}],container:["container"],columns:[{columns:[Pp]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),An]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",t2,An]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",An]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",t2,An]}],"grid-cols":[{"grid-cols":[r2]}],"col-start-end":[{col:["auto",{span:["full",t2,An]},An]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[r2]}],"row-start-end":[{row:["auto",{span:[t2,An]},An]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",An]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",An]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",An,t]}],"min-w":[{"min-w":[An,t,"min","max","fit"]}],"max-w":[{"max-w":[An,t,"none","full","min","max","fit","prose",{screen:[Pp]},Pp]}],h:[{h:[An,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[An,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[An,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[An,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Pp,Cp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dA]}],"font-family":[{font:[r2]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",An]}],"line-clamp":[{"line-clamp":["none",Kv,dA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zf,An]}],"list-image":[{"list-image":["none",An]}],"list-style-type":[{list:["none","disc","decimal",An]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zf,Cp]}],"underline-offset":[{"underline-offset":["auto",Zf,An]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",An]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",An]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),kue]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Aue]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Cue]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:re()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Zf,An]}],"outline-w":[{outline:[Zf,Cp]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Zf,Cp]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pp,Pue]}],"shadow-color":[{shadow:[r2]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pp,An]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[N]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",An]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",An]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",An]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[t2,An]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",An]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",An]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",An]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zf,Cp,dA]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Rue=mue(Iue);function Lt(...e){return Rue(gn(e))}const hx=Lw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Fe=S.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>l(n?oG:"button",{className:Lt(hx({variant:t,size:r,className:e})),ref:i,...a}));Fe.displayName="Button";function Ht(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Mue(e,t){const r=S.createContext(t),n=i=>{const{children:s,...o}=i,c=S.useMemo(()=>o,Object.values(o));return l(r.Provider,{value:c,children:s})};n.displayName=e+"Provider";function a(i){const s=S.useContext(r);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function es(e,t=[]){let r=[];function n(i,s){const o=S.createContext(s),c=r.length;r=[...r,s];const u=f=>{var b;const{scope:h,children:m,...w}=f,g=((b=h==null?void 0:h[e])==null?void 0:b[c])||o,y=S.useMemo(()=>w,Object.values(w));return l(g.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(f,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||o,w=S.useContext(m);if(w)return w;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(s=>S.createContext(s));return function(o){const c=(o==null?void 0:o[e])||i;return S.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return a.scopeName=e,[n,Fue(a,...t)]}function Fue(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=n.reduce((o,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...o,...f}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var ci=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Lue=lx[" useInsertionEffect ".trim().toString()]||ci;function hl({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,s]=jue({defaultProp:t,onChange:r}),o=e!==void 0,c=o?e:a;{const d=S.useRef(e!==void 0);S.useEffect(()=>{const f=d.current;f!==o&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,n])}const u=S.useCallback(d=>{var f;if(o){const h=$ue(d)?d(e):d;h!==e&&((f=s.current)==null||f.call(s,h))}else i(d)},[o,e,i,s]);return[c,u]}function jue({defaultProp:e,onChange:t}){const[r,n]=S.useState(e),a=S.useRef(r),i=S.useRef(t);return Lue(()=>{i.current=t},[t]),S.useEffect(()=>{var s;a.current!==r&&((s=i.current)==null||s.call(i,r),a.current=r)},[r,a]),[r,n,i]}function $ue(e){return typeof e=="function"}var Bue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vr=Bue.reduce((e,t)=>{const r=lm(`Primitive.${t}`),n=S.forwardRef((a,i)=>{const{asChild:s,...o}=a,c=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l(c,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function lD(e,t){e&&uy.flushSync(()=>e.dispatchEvent(t))}function jw(e){const t=e+"CollectionProvider",[r,n]=es(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:y,children:b}=g,_=Qe.useRef(null),N=Qe.useRef(new Map).current;return l(a,{scope:y,itemMap:N,collectionRef:_,children:b})};s.displayName=t;const o=e+"CollectionSlot",c=lm(o),u=Qe.forwardRef((g,y)=>{const{scope:b,children:_}=g,N=i(o,b),E=Kr(y,N.collectionRef);return l(c,{ref:E,children:_})});u.displayName=o;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=lm(d),m=Qe.forwardRef((g,y)=>{const{scope:b,children:_,...N}=g,E=Qe.useRef(null),C=Kr(y,E),D=i(d,b);return Qe.useEffect(()=>(D.itemMap.set(E,{ref:E,...N}),()=>void D.itemMap.delete(E))),l(h,{[f]:"",ref:C,children:_})});m.displayName=d;function w(g){const y=i(e+"CollectionConsumer",g);return Qe.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const N=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((D,P)=>N.indexOf(D.ref.current)-N.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:s,Slot:u,ItemSlot:m},w,n]}var Uue=S.createContext(void 0);function Sg(e){const t=S.useContext(Uue);return e||t||"ltr"}function Di(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function que(e,t=globalThis==null?void 0:globalThis.document){const r=Di(e);S.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Wue="DismissableLayer",l6="dismissableLayer.update",zue="dismissableLayer.pointerDownOutside",Vue="dismissableLayer.focusOutside",vF,gG=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ng=S.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...c}=e,u=S.useContext(gG),[d,f]=S.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),w=Kr(t,P=>f(P)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),_=d?g.indexOf(d):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,E=_>=b,C=Gue(P=>{const F=P.target,L=[...u.branches].some(W=>W.contains(F));!E||L||(a==null||a(P),s==null||s(P),P.defaultPrevented||o==null||o())},h),D=Yue(P=>{const F=P.target;[...u.branches].some(W=>W.contains(F))||(i==null||i(P),s==null||s(P),P.defaultPrevented||o==null||o())},h);return que(P=>{_===u.layers.size-1&&(n==null||n(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},h),S.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vF=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),yF(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=vF)}},[d,h,r,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),yF())},[d,u]),S.useEffect(()=>{const P=()=>m({});return document.addEventListener(l6,P),()=>document.removeEventListener(l6,P)},[]),l(vr.div,{...c,ref:w,style:{pointerEvents:N?E?"auto":"none":void 0,...e.style},onFocusCapture:Ht(e.onFocusCapture,D.onFocusCapture),onBlurCapture:Ht(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ht(e.onPointerDownCapture,C.onPointerDownCapture)})});Ng.displayName=Wue;var Hue="DismissableLayerBranch",vG=S.forwardRef((e,t)=>{const r=S.useContext(gG),n=S.useRef(null),a=Kr(t,n);return S.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),l(vr.div,{...e,ref:a})});vG.displayName=Hue;function Gue(e,t=globalThis==null?void 0:globalThis.document){const r=Di(e),n=S.useRef(!1),a=S.useRef(()=>{});return S.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){yG(zue,r,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Yue(e,t=globalThis==null?void 0:globalThis.document){const r=Di(e),n=S.useRef(!1);return S.useEffect(()=>{const a=i=>{i.target&&!n.current&&yG(Vue,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function yF(){const e=new CustomEvent(l6);document.dispatchEvent(e)}function yG(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?lD(a,i):a.dispatchEvent(i)}var Kue=Ng,Xue=vG,fA=0;function N4(){S.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xF()),document.body.insertAdjacentElement("beforeend",e[1]??xF()),fA++,()=>{fA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),fA--}},[])}function xF(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var hA="focusScope.autoFocusOnMount",pA="focusScope.autoFocusOnUnmount",wF={bubbles:!1,cancelable:!0},Jue="FocusScope",$w=S.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,c]=S.useState(null),u=Di(a),d=Di(i),f=S.useRef(null),h=Kr(t,g=>c(g)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let g=function(N){if(m.paused||!o)return;const E=N.target;o.contains(E)?f.current=E:Lp(f.current,{select:!0})},y=function(N){if(m.paused||!o)return;const E=N.relatedTarget;E!==null&&(o.contains(E)||Lp(f.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const C of N)C.removedNodes.length>0&&Lp(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const _=new MutationObserver(b);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),_.disconnect()}}},[n,o,m.paused]),S.useEffect(()=>{if(o){_F.add(m);const g=document.activeElement;if(!o.contains(g)){const b=new CustomEvent(hA,wF);o.addEventListener(hA,u),o.dispatchEvent(b),b.defaultPrevented||(Zue(nde(xG(o)),{select:!0}),document.activeElement===g&&Lp(o))}return()=>{o.removeEventListener(hA,u),setTimeout(()=>{const b=new CustomEvent(pA,wF);o.addEventListener(pA,d),o.dispatchEvent(b),b.defaultPrevented||Lp(g??document.body,{select:!0}),o.removeEventListener(pA,d),_F.remove(m)},0)}}},[o,u,d,m]);const w=S.useCallback(g=>{if(!r&&!n||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const _=g.currentTarget,[N,E]=Que(_);N&&E?!g.shiftKey&&b===E?(g.preventDefault(),r&&Lp(N,{select:!0})):g.shiftKey&&b===N&&(g.preventDefault(),r&&Lp(E,{select:!0})):b===_&&g.preventDefault()}},[r,n,m.paused]);return l(vr.div,{tabIndex:-1,...s,ref:h,onKeyDown:w})});$w.displayName=Jue;function Zue(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Lp(n,{select:t}),document.activeElement!==r)return}function Que(e){const t=xG(e),r=bF(t,e),n=bF(t.reverse(),e);return[r,n]}function xG(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function bF(e,t){for(const r of e)if(!ede(r,{upTo:t}))return r}function ede(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tde(e){return e instanceof HTMLInputElement&&"select"in e}function Lp(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&tde(e)&&t&&e.select()}}var _F=rde();function rde(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=SF(e,t),e.unshift(t)},remove(t){var r;e=SF(e,t),(r=e[0])==null||r.resume()}}}function SF(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function nde(e){return e.filter(t=>t.tagName!=="A")}var ade=lx[" useId ".trim().toString()]||(()=>{}),ide=0;function jl(e){const[t,r]=S.useState(ade());return ci(()=>{r(n=>n??String(ide++))},[e]),t?`radix-${t}`:""}const sde=["top","right","bottom","left"],cm=Math.min,lc=Math.max,N5=Math.round,a_=Math.floor,ef=e=>({x:e,y:e}),ode={left:"right",right:"left",bottom:"top",top:"bottom"},lde={start:"end",end:"start"};function c6(e,t,r){return lc(e,cm(t,r))}function yh(e,t){return typeof e=="function"?e(t):e}function xh(e){return e.split("-")[0]}function py(e){return e.split("-")[1]}function cD(e){return e==="x"?"y":"x"}function uD(e){return e==="y"?"height":"width"}function um(e){return["top","bottom"].includes(xh(e))?"y":"x"}function dD(e){return cD(um(e))}function cde(e,t,r){r===void 0&&(r=!1);const n=py(e),a=dD(e),i=uD(a);let s=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=A5(s)),[s,A5(s)]}function ude(e){const t=A5(e);return[u6(e),t,u6(t)]}function u6(e){return e.replace(/start|end/g,t=>lde[t])}function dde(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:s;default:return[]}}function fde(e,t,r,n){const a=py(e);let i=dde(xh(e),r==="start",n);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(u6)))),i}function A5(e){return e.replace(/left|right|bottom|top/g,t=>ode[t])}function hde(e){return{top:0,right:0,bottom:0,left:0,...e}}function wG(e){return typeof e!="number"?hde(e):{top:e,right:e,bottom:e,left:e}}function k5(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function NF(e,t,r){let{reference:n,floating:a}=e;const i=um(t),s=dD(t),o=uD(s),c=xh(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(py(t)){case"start":m[s]-=h*(r&&u?-1:1);break;case"end":m[s]+=h*(r&&u?-1:1);break}return m}const pde=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:s}=r,o=i.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=NF(u,n,c),h=n,m={},w=0;for(let g=0;g<o.length;g++){const{name:y,fn:b}=o[g],{x:_,y:N,data:E,reset:C}=await b({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:s,elements:{reference:e,floating:t}});d=_??d,f=N??f,m={...m,[y]:{...m[y],...E}},C&&w<=50&&(w++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(u=C.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):C.rects),{x:d,y:f}=NF(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function px(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:s,elements:o,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=yh(t,e),w=wG(m),y=o[h?f==="floating"?"reference":"floating":f],b=k5(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),_=f==="floating"?{x:n,y:a,width:s.floating.width,height:s.floating.height}:s.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),E=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},C=k5(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:N,strategy:c}):_);return{top:(b.top-C.top+w.top)/E.y,bottom:(C.bottom-b.bottom+w.bottom)/E.y,left:(b.left-C.left+w.left)/E.x,right:(C.right-b.right+w.right)/E.x}}const mde=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:s,elements:o,middlewareData:c}=t,{element:u,padding:d=0}=yh(e,t)||{};if(u==null)return{};const f=wG(d),h={x:r,y:n},m=dD(a),w=uD(m),g=await s.getDimensions(u),y=m==="y",b=y?"top":"left",_=y?"bottom":"right",N=y?"clientHeight":"clientWidth",E=i.reference[w]+i.reference[m]-h[m]-i.floating[w],C=h[m]-i.reference[m],D=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let P=D?D[N]:0;(!P||!await(s.isElement==null?void 0:s.isElement(D)))&&(P=o.floating[N]||i.floating[w]);const F=E/2-C/2,L=P/2-g[w]/2-1,W=cm(f[b],L),T=cm(f[_],L),R=W,j=P-g[w]-T,Y=P/2-g[w]/2+F,Z=c6(R,Y,j),re=!c.arrow&&py(a)!=null&&Y!==Z&&i.reference[w]/2-(Y<R?W:T)-g[w]/2<0,z=re?Y<R?Y-R:Y-j:0;return{[m]:h[m]+z,data:{[m]:Z,centerOffset:Y-Z-z,...re&&{alignmentOffset:z}},reset:re}}}),gde=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...y}=yh(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=xh(a),_=um(o),N=xh(o)===o,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=h||(N||!g?[A5(o)]:ude(o)),D=w!=="none";!h&&D&&C.push(...fde(o,g,w,E));const P=[o,...C],F=await px(t,y),L=[];let W=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&L.push(F[b]),f){const Y=cde(a,s,E);L.push(F[Y[0]],F[Y[1]])}if(W=[...W,{placement:a,overflows:L}],!L.every(Y=>Y<=0)){var T,R;const Y=(((T=i.flip)==null?void 0:T.index)||0)+1,Z=P[Y];if(Z)return{data:{index:Y,overflows:W},reset:{placement:Z}};let re=(R=W.filter(z=>z.overflows[0]<=0).sort((z,q)=>z.overflows[1]-q.overflows[1])[0])==null?void 0:R.placement;if(!re)switch(m){case"bestFit":{var j;const z=(j=W.filter(q=>{if(D){const B=um(q.placement);return B===_||B==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(B=>B>0).reduce((B,G)=>B+G,0)]).sort((q,B)=>q[1]-B[1])[0])==null?void 0:j[0];z&&(re=z);break}case"initialPlacement":re=o;break}if(a!==re)return{reset:{placement:re}}}return{}}}};function AF(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function kF(e){return sde.some(t=>e[t]>=0)}const vde=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=yh(e,t);switch(n){case"referenceHidden":{const i=await px(t,{...a,elementContext:"reference"}),s=AF(i,r.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:kF(s)}}}case"escaped":{const i=await px(t,{...a,altBoundary:!0}),s=AF(i,r.floating);return{data:{escapedOffsets:s,escaped:kF(s)}}}default:return{}}}}};async function yde(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),s=xh(r),o=py(r),c=um(r)==="y",u=["left","top"].includes(s)?-1:1,d=i&&c?-1:1,f=yh(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof w=="number"&&(m=o==="end"?w*-1:w),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const xde=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:s,middlewareData:o}=t,c=await yde(t,e);return s===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:s}}}}},wde=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:y=>{let{x:b,y:_}=y;return{x:b,y:_}}},...c}=yh(e,t),u={x:r,y:n},d=await px(t,c),f=um(xh(a)),h=cD(f);let m=u[h],w=u[f];if(i){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",_=m+d[y],N=m-d[b];m=c6(_,m,N)}if(s){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",_=w+d[y],N=w-d[b];w=c6(_,w,N)}const g=o.fn({...t,[h]:m,[f]:w});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:s}}}}}},bde=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=yh(e,t),d={x:r,y:n},f=um(a),h=cD(f);let m=d[h],w=d[f];const g=yh(o,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const N=h==="y"?"height":"width",E=i.reference[h]-i.floating[N]+y.mainAxis,C=i.reference[h]+i.reference[N]-y.mainAxis;m<E?m=E:m>C&&(m=C)}if(u){var b,_;const N=h==="y"?"width":"height",E=["top","left"].includes(xh(a)),C=i.reference[f]-i.floating[N]+(E&&((b=s.offset)==null?void 0:b[f])||0)+(E?0:y.crossAxis),D=i.reference[f]+i.reference[N]+(E?0:((_=s.offset)==null?void 0:_[f])||0)-(E?y.crossAxis:0);w<C?w=C:w>D&&(w=D)}return{[h]:m,[f]:w}}}},_de=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:c=()=>{},...u}=yh(e,t),d=await px(t,u),f=xh(a),h=py(a),m=um(a)==="y",{width:w,height:g}=i.floating;let y,b;f==="top"||f==="bottom"?(y=f,b=h===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(b=f,y=h==="end"?"top":"bottom");const _=g-d.top-d.bottom,N=w-d.left-d.right,E=cm(g-d[y],_),C=cm(w-d[b],N),D=!t.middlewareData.shift;let P=E,F=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(F=N),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=_),D&&!h){const W=lc(d.left,0),T=lc(d.right,0),R=lc(d.top,0),j=lc(d.bottom,0);m?F=w-2*(W!==0||T!==0?W+T:lc(d.left,d.right)):P=g-2*(R!==0||j!==0?R+j:lc(d.top,d.bottom))}await c({...t,availableWidth:F,availableHeight:P});const L=await s.getDimensions(o.floating);return w!==L.width||g!==L.height?{reset:{rects:!0}}:{}}}};function A4(){return typeof window<"u"}function my(e){return bG(e)?(e.nodeName||"").toLowerCase():"#document"}function gc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gf(e){var t;return(t=(bG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bG(e){return A4()?e instanceof Node||e instanceof gc(e).Node:!1}function ed(e){return A4()?e instanceof Element||e instanceof gc(e).Element:!1}function cf(e){return A4()?e instanceof HTMLElement||e instanceof gc(e).HTMLElement:!1}function EF(e){return!A4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gc(e).ShadowRoot}function Bw(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=td(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Sde(e){return["table","td","th"].includes(my(e))}function k4(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function fD(e){const t=hD(),r=ed(e)?td(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function Nde(e){let t=dm(e);for(;cf(t)&&!v1(t);){if(fD(t))return t;if(k4(t))return null;t=dm(t)}return null}function hD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function v1(e){return["html","body","#document"].includes(my(e))}function td(e){return gc(e).getComputedStyle(e)}function E4(e){return ed(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dm(e){if(my(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EF(e)&&e.host||gf(e);return EF(t)?t.host:t}function _G(e){const t=dm(e);return v1(t)?e.ownerDocument?e.ownerDocument.body:e.body:cf(t)&&Bw(t)?t:_G(t)}function mx(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=_G(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),s=gc(a);if(i){const o=d6(s);return t.concat(s,s.visualViewport||[],Bw(a)?a:[],o&&r?mx(o):[])}return t.concat(a,mx(a,[],r))}function d6(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function SG(e){const t=td(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=cf(e),i=a?e.offsetWidth:r,s=a?e.offsetHeight:n,o=N5(r)!==i||N5(n)!==s;return o&&(r=i,n=s),{width:r,height:n,$:o}}function pD(e){return ed(e)?e:e.contextElement}function Xv(e){const t=pD(e);if(!cf(t))return ef(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=SG(t);let s=(i?N5(r.width):r.width)/n,o=(i?N5(r.height):r.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Ade=ef(0);function NG(e){const t=gc(e);return!hD()||!t.visualViewport?Ade:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kde(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==gc(e)?!1:t}function Q0(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=pD(e);let s=ef(1);t&&(n?ed(n)&&(s=Xv(n)):s=Xv(e));const o=kde(i,r,n)?NG(i):ef(0);let c=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,f=a.height/s.y;if(i){const h=gc(i),m=n&&ed(n)?gc(n):n;let w=h,g=d6(w);for(;g&&n&&m!==w;){const y=Xv(g),b=g.getBoundingClientRect(),_=td(g),N=b.left+(g.clientLeft+parseFloat(_.paddingLeft))*y.x,E=b.top+(g.clientTop+parseFloat(_.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=N,u+=E,w=gc(g),g=d6(w)}}return k5({width:d,height:f,x:c,y:u})}function mD(e,t){const r=E4(e).scrollLeft;return t?t.left+r:Q0(gf(e)).left+r}function AG(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:mD(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function Ede(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",s=gf(n),o=t?k4(t.floating):!1;if(n===s||o&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ef(1);const d=ef(0),f=cf(n);if((f||!f&&!i)&&((my(n)!=="body"||Bw(s))&&(c=E4(n)),cf(n))){const m=Q0(n);u=Xv(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=s&&!f&&!i?AG(s,c,!0):ef(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function Cde(e){return Array.from(e.getClientRects())}function Pde(e){const t=gf(e),r=E4(e),n=e.ownerDocument.body,a=lc(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=lc(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+mD(e);const o=-r.scrollTop;return td(n).direction==="rtl"&&(s+=lc(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:s,y:o}}function Tde(e,t){const r=gc(e),n=gf(e),a=r.visualViewport;let i=n.clientWidth,s=n.clientHeight,o=0,c=0;if(a){i=a.width,s=a.height;const u=hD();(!u||u&&t==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:s,x:o,y:c}}function Ode(e,t){const r=Q0(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=cf(e)?Xv(e):ef(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:s,height:o,x:c,y:u}}function CF(e,t,r){let n;if(t==="viewport")n=Tde(e,r);else if(t==="document")n=Pde(gf(e));else if(ed(t))n=Ode(t,r);else{const a=NG(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return k5(n)}function kG(e,t){const r=dm(e);return r===t||!ed(r)||v1(r)?!1:td(r).position==="fixed"||kG(r,t)}function Dde(e,t){const r=t.get(e);if(r)return r;let n=mx(e,[],!1).filter(o=>ed(o)&&my(o)!=="body"),a=null;const i=td(e).position==="fixed";let s=i?dm(e):e;for(;ed(s)&&!v1(s);){const o=td(s),c=fD(s);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Bw(s)&&!c&&kG(e,s))?n=n.filter(d=>d!==s):a=o,s=dm(s)}return t.set(e,n),n}function Ide(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const s=[...r==="clippingAncestors"?k4(t)?[]:Dde(t,this._c):[].concat(r),n],o=s[0],c=s.reduce((u,d)=>{const f=CF(t,d,a);return u.top=lc(f.top,u.top),u.right=cm(f.right,u.right),u.bottom=cm(f.bottom,u.bottom),u.left=lc(f.left,u.left),u},CF(t,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Rde(e){const{width:t,height:r}=SG(e);return{width:t,height:r}}function Mde(e,t,r){const n=cf(t),a=gf(t),i=r==="fixed",s=Q0(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const c=ef(0);if(n||!n&&!i)if((my(t)!=="body"||Bw(a))&&(o=E4(t)),n){const h=Q0(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else a&&(c.x=mD(a));const u=a&&!n&&!i?AG(a,o):ef(0),d=s.left+o.scrollLeft-c.x-u.x,f=s.top+o.scrollTop-c.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function mA(e){return td(e).position==="static"}function PF(e,t){if(!cf(e)||td(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gf(e)===r&&(r=r.ownerDocument.body),r}function EG(e,t){const r=gc(e);if(k4(e))return r;if(!cf(e)){let a=dm(e);for(;a&&!v1(a);){if(ed(a)&&!mA(a))return a;a=dm(a)}return r}let n=PF(e,t);for(;n&&Sde(n)&&mA(n);)n=PF(n,t);return n&&v1(n)&&mA(n)&&!fD(n)?r:n||Nde(e)||r}const Fde=async function(e){const t=this.getOffsetParent||EG,r=this.getDimensions,n=await r(e.floating);return{reference:Mde(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Lde(e){return td(e).direction==="rtl"}const jde={convertOffsetParentRelativeRectToViewportRelativeRect:Ede,getDocumentElement:gf,getClippingRect:Ide,getOffsetParent:EG,getElementRects:Fde,getClientRects:Cde,getDimensions:Rde,getScale:Xv,isElement:ed,isRTL:Lde};function CG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $de(e,t){let r=null,n;const a=gf(e);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(o||t(),!h||!m)return;const w=a_(f),g=a_(a.clientWidth-(d+h)),y=a_(a.clientHeight-(f+m)),b=a_(d),N={rootMargin:-w+"px "+-g+"px "+-y+"px "+-b+"px",threshold:lc(0,cm(1,c))||1};let E=!0;function C(D){const P=D[0].intersectionRatio;if(P!==c){if(!E)return s();P?s(!1,P):n=setTimeout(()=>{s(!1,1e-7)},1e3)}P===1&&!CG(u,e.getBoundingClientRect())&&s(),E=!1}try{r=new IntersectionObserver(C,{...N,root:a.ownerDocument})}catch{r=new IntersectionObserver(C,N)}r.observe(e)}return s(!0),i}function Bde(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=pD(e),d=a||i?[...u?mx(u):[],...mx(t)]:[];d.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const f=u&&o?$de(u,r):null;let h=-1,m=null;s&&(m=new ResizeObserver(b=>{let[_]=b;_&&_.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var N;(N=m)==null||N.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let w,g=c?Q0(e):null;c&&y();function y(){const b=Q0(e);g&&!CG(g,b)&&r(),g=b,w=requestAnimationFrame(y)}return r(),()=>{var b;d.forEach(_=>{a&&_.removeEventListener("scroll",r),i&&_.removeEventListener("resize",r)}),f==null||f(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const Ude=xde,qde=wde,Wde=gde,zde=_de,Vde=vde,TF=mde,Hde=bde,Gde=(e,t,r)=>{const n=new Map,a={platform:jde,...r},i={...a.platform,_c:n};return pde(e,t,{...a,platform:i})};var Z_=typeof document<"u"?S.useLayoutEffect:S.useEffect;function E5(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!E5(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!E5(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function PG(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function OF(e,t){const r=PG(e);return Math.round(t*r)/r}function gA(e){const t=S.useRef(e);return Z_(()=>{t.current=e}),t}function Yde(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:c,open:u}=e,[d,f]=S.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=S.useState(n);E5(h,n)||m(n);const[w,g]=S.useState(null),[y,b]=S.useState(null),_=S.useCallback(q=>{q!==D.current&&(D.current=q,g(q))},[]),N=S.useCallback(q=>{q!==P.current&&(P.current=q,b(q))},[]),E=i||w,C=s||y,D=S.useRef(null),P=S.useRef(null),F=S.useRef(d),L=c!=null,W=gA(c),T=gA(a),R=gA(u),j=S.useCallback(()=>{if(!D.current||!P.current)return;const q={placement:t,strategy:r,middleware:h};T.current&&(q.platform=T.current),Gde(D.current,P.current,q).then(B=>{const G={...B,isPositioned:R.current!==!1};Y.current&&!E5(F.current,G)&&(F.current=G,uy.flushSync(()=>{f(G)}))})},[h,t,r,T,R]);Z_(()=>{u===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[u]);const Y=S.useRef(!1);Z_(()=>(Y.current=!0,()=>{Y.current=!1}),[]),Z_(()=>{if(E&&(D.current=E),C&&(P.current=C),E&&C){if(W.current)return W.current(E,C,j);j()}},[E,C,j,W,L]);const Z=S.useMemo(()=>({reference:D,floating:P,setReference:_,setFloating:N}),[_,N]),re=S.useMemo(()=>({reference:E,floating:C}),[E,C]),z=S.useMemo(()=>{const q={position:r,left:0,top:0};if(!re.floating)return q;const B=OF(re.floating,d.x),G=OF(re.floating,d.y);return o?{...q,transform:"translate("+B+"px, "+G+"px)",...PG(re.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:G}},[r,o,re.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:j,refs:Z,elements:re,floatingStyles:z}),[d,j,Z,re,z])}const Kde=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?TF({element:n.current,padding:a}).fn(r):{}:n?TF({element:n,padding:a}).fn(r):{}}}},Xde=(e,t)=>({...Ude(e),options:[e,t]}),Jde=(e,t)=>({...qde(e),options:[e,t]}),Zde=(e,t)=>({...Hde(e),options:[e,t]}),Qde=(e,t)=>({...Wde(e),options:[e,t]}),efe=(e,t)=>({...zde(e),options:[e,t]}),tfe=(e,t)=>({...Vde(e),options:[e,t]}),rfe=(e,t)=>({...Kde(e),options:[e,t]});var nfe="Arrow",TG=S.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return l(vr.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:l("polygon",{points:"0,0 30,0 15,10"})})});TG.displayName=nfe;var afe=TG;function C4(e){const[t,r]=S.useState(void 0);return ci(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;r({width:s,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var gD="Popper",[OG,Cm]=es(gD),[ife,DG]=OG(gD),IG=e=>{const{__scopePopper:t,children:r}=e,[n,a]=S.useState(null);return l(ife,{scope:t,anchor:n,onAnchorChange:a,children:r})};IG.displayName=gD;var RG="PopperAnchor",MG=S.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=DG(RG,r),s=S.useRef(null),o=Kr(t,s);return S.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||s.current)}),n?null:l(vr.div,{...a,ref:o})});MG.displayName=RG;var vD="PopperContent",[sfe,ofe]=OG(vD),FG=S.forwardRef((e,t)=>{var oe,de,V,se,fe,te;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:w,...g}=e,y=DG(vD,r),[b,_]=S.useState(null),N=Kr(t,ke=>_(ke)),[E,C]=S.useState(null),D=C4(E),P=(D==null?void 0:D.width)??0,F=(D==null?void 0:D.height)??0,L=n+(i!=="center"?"-"+i:""),W=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],R=T.length>0,j={padding:W,boundary:T.filter(cfe),altBoundary:R},{refs:Y,floatingStyles:Z,placement:re,isPositioned:z,middlewareData:q}=Yde({strategy:"fixed",placement:L,whileElementsMounted:(...ke)=>Bde(...ke,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Xde({mainAxis:a+F,alignmentAxis:s}),c&&Jde({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Zde():void 0,...j}),c&&Qde({...j}),efe({...j,apply:({elements:ke,rects:Re,availableWidth:Ce,availableHeight:ve})=>{const{width:Ge,height:pt}=Re.reference,it=ke.floating.style;it.setProperty("--radix-popper-available-width",`${Ce}px`),it.setProperty("--radix-popper-available-height",`${ve}px`),it.setProperty("--radix-popper-anchor-width",`${Ge}px`),it.setProperty("--radix-popper-anchor-height",`${pt}px`)}}),E&&rfe({element:E,padding:o}),ufe({arrowWidth:P,arrowHeight:F}),h&&tfe({strategy:"referenceHidden",...j})]}),[B,G]=$G(re),Q=Di(w);ci(()=>{z&&(Q==null||Q())},[z,Q]);const O=(oe=q.arrow)==null?void 0:oe.x,J=(de=q.arrow)==null?void 0:de.y,X=((V=q.arrow)==null?void 0:V.centerOffset)!==0,[ne,ie]=S.useState();return ci(()=>{b&&ie(window.getComputedStyle(b).zIndex)},[b]),l("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:z?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(se=q.transformOrigin)==null?void 0:se.x,(fe=q.transformOrigin)==null?void 0:fe.y].join(" "),...((te=q.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l(sfe,{scope:r,placedSide:B,onArrowChange:C,arrowX:O,arrowY:J,shouldHideArrow:X,children:l(vr.div,{"data-side":B,"data-align":G,...g,ref:N,style:{...g.style,animation:z?void 0:"none"}})})})});FG.displayName=vD;var LG="PopperArrow",lfe={top:"bottom",right:"left",bottom:"top",left:"right"},jG=S.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=ofe(LG,n),s=lfe[i.placedSide];return l("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l(afe,{...a,ref:r,style:{...a.style,display:"block"}})})});jG.displayName=LG;function cfe(e){return e!==null}var ufe=e=>({name:"transformOrigin",options:e,fn(t){var y,b,_;const{placement:r,rects:n,middlewareData:a}=t,s=((y=a.arrow)==null?void 0:y.centerOffset)!==0,o=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=$G(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=a.arrow)==null?void 0:b.x)??0)+o/2,m=(((_=a.arrow)==null?void 0:_.y)??0)+c/2;let w="",g="";return u==="bottom"?(w=s?f:`${h}px`,g=`${-c}px`):u==="top"?(w=s?f:`${h}px`,g=`${n.floating.height+c}px`):u==="right"?(w=`${-c}px`,g=s?f:`${m}px`):u==="left"&&(w=`${n.floating.width+c}px`,g=s?f:`${m}px`),{data:{x:w,y:g}}}});function $G(e){const[t,r="center"]=e.split("-");return[t,r]}var P4=IG,Uw=MG,T4=FG,O4=jG,dfe="Portal",gy=S.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[a,i]=S.useState(!1);ci(()=>i(!0),[]);const s=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?cle.createPortal(l(vr.div,{...n,ref:t}),s):null});gy.displayName=dfe;function ffe(e,t){return S.useReducer((r,n)=>t[r][n]??r,e)}var uo=e=>{const{present:t,children:r}=e,n=hfe(t),a=typeof r=="function"?r({present:n.isPresent}):S.Children.only(r),i=Kr(n.ref,pfe(a));return typeof r=="function"||n.isPresent?S.cloneElement(a,{ref:i}):null};uo.displayName="Presence";function hfe(e){const[t,r]=S.useState(),n=S.useRef({}),a=S.useRef(e),i=S.useRef("none"),s=e?"mounted":"unmounted",[o,c]=ffe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=i_(n.current);i.current=o==="mounted"?u:"none"},[o]),ci(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=i_(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ci(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=i_(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=i_(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:S.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function i_(e){return(e==null?void 0:e.animationName)||"none"}function pfe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var vA="rovingFocusGroup.onEntryFocus",mfe={bubbles:!1,cancelable:!0},qw="RovingFocusGroup",[f6,BG,gfe]=jw(qw),[vfe,vy]=es(qw,[gfe]),[yfe,xfe]=vfe(qw),UG=S.forwardRef((e,t)=>l(f6.Provider,{scope:e.__scopeRovingFocusGroup,children:l(f6.Slot,{scope:e.__scopeRovingFocusGroup,children:l(wfe,{...e,ref:t})})}));UG.displayName=qw;var wfe=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=S.useRef(null),m=Kr(t,h),w=Sg(i),[g,y]=hl({prop:s,defaultProp:o??null,onChange:c,caller:qw}),[b,_]=S.useState(!1),N=Di(u),E=BG(r),C=S.useRef(!1),[D,P]=S.useState(0);return S.useEffect(()=>{const F=h.current;if(F)return F.addEventListener(vA,N),()=>F.removeEventListener(vA,N)},[N]),l(yfe,{scope:r,orientation:n,dir:w,loop:a,currentTabStopId:g,onItemFocus:S.useCallback(F=>y(F),[y]),onItemShiftTab:S.useCallback(()=>_(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(F=>F+1),[]),onFocusableItemRemove:S.useCallback(()=>P(F=>F-1),[]),children:l(vr.div,{tabIndex:b||D===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Ht(e.onMouseDown,()=>{C.current=!0}),onFocus:Ht(e.onFocus,F=>{const L=!C.current;if(F.target===F.currentTarget&&L&&!b){const W=new CustomEvent(vA,mfe);if(F.currentTarget.dispatchEvent(W),!W.defaultPrevented){const T=E().filter(re=>re.focusable),R=T.find(re=>re.active),j=T.find(re=>re.id===g),Z=[R,j,...T].filter(Boolean).map(re=>re.ref.current);zG(Z,d)}}C.current=!1}),onBlur:Ht(e.onBlur,()=>_(!1))})})}),qG="RovingFocusGroupItem",WG=S.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:s,...o}=e,c=jl(),u=i||c,d=xfe(qG,r),f=d.currentTabStopId===u,h=BG(r),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:g}=d;return S.useEffect(()=>{if(n)return m(),()=>w()},[n,m,w]),l(f6.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:l(vr.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Ht(e.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:Ht(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ht(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=Sfe(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let N=h().filter(E=>E.focusable).map(E=>E.ref.current);if(b==="last")N.reverse();else if(b==="prev"||b==="next"){b==="prev"&&N.reverse();const E=N.indexOf(y.currentTarget);N=d.loop?Nfe(N,E+1):N.slice(E+1)}setTimeout(()=>zG(N))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:g!=null}):s})})});WG.displayName=qG;var bfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _fe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Sfe(e,t,r){const n=_fe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return bfe[n]}function zG(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Nfe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var yD=UG,xD=WG,Afe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},pv=new WeakMap,s_=new WeakMap,o_={},yA=0,VG=function(e){return e&&(e.host||VG(e.parentNode))},kfe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=VG(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Efe=function(e,t,r,n){var a=kfe(t,Array.isArray(e)?e:[e]);o_[r]||(o_[r]=new WeakMap);var i=o_[r],s=[],o=new Set,c=new Set(a),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(o.has(h))d(h);else try{var m=h.getAttribute(n),w=m!==null&&m!=="false",g=(pv.get(h)||0)+1,y=(i.get(h)||0)+1;pv.set(h,g),i.set(h,y),s.push(h),g===1&&w&&s_.set(h,!0),y===1&&h.setAttribute(r,"true"),w||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),o.clear(),yA++,function(){s.forEach(function(f){var h=pv.get(f)-1,m=i.get(f)-1;pv.set(f,h),i.set(f,m),h||(s_.has(f)||f.removeAttribute(n),s_.delete(f)),m||f.removeAttribute(r)}),yA--,yA||(pv=new WeakMap,pv=new WeakMap,s_=new WeakMap,o_={})}},D4=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=Afe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),Efe(n,a,r,"aria-hidden")):function(){return null}},zd=function(){return zd=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},zd.apply(this,arguments)};function HG(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Cfe(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Q_="right-scroll-bar-position",e5="width-before-scroll-bar",Pfe="with-scroll-bars-hidden",Tfe="--removed-body-scroll-bar-size";function xA(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ofe(e,t){var r=S.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Dfe=typeof window<"u"?S.useLayoutEffect:S.useEffect,DF=new WeakMap;function Ife(e,t){var r=Ofe(null,function(n){return e.forEach(function(a){return xA(a,n)})});return Dfe(function(){var n=DF.get(r);if(n){var a=new Set(n),i=new Set(e),s=r.current;a.forEach(function(o){i.has(o)||xA(o,null)}),i.forEach(function(o){a.has(o)||xA(o,s)})}DF.set(r,e)},[e]),r}function Rfe(e){return e}function Mfe(e,t){t===void 0&&(t=Rfe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var s=t(i,n);return r.push(s),function(){r=r.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(n=!0;r.length;){var s=r;r=[],s.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){n=!0;var s=[];if(r.length){var o=r;r=[],o.forEach(i),s=r}var c=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),r}}}};return a}function Ffe(e){e===void 0&&(e={});var t=Mfe(null);return t.options=zd({async:!0,ssr:!1},e),t}var GG=function(e){var t=e.sideCar,r=HG(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,zd({},r))};GG.isSideCarExport=!0;function Lfe(e,t){return e.useMedium(t),GG}var YG=Ffe(),wA=function(){},I4=S.forwardRef(function(e,t){var r=S.useRef(null),n=S.useState({onScrollCapture:wA,onWheelCapture:wA,onTouchMoveCapture:wA}),a=n[0],i=n[1],s=e.forwardProps,o=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,w=e.inert,g=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,_=e.gapMode,N=HG(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,C=Ife([r,t]),D=zd(zd({},N),a);return S.createElement(S.Fragment,null,d&&S.createElement(E,{sideCar:YG,removeScrollBar:u,shards:f,noIsolation:m,inert:w,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:_}),s?S.cloneElement(S.Children.only(o),zd(zd({},D),{ref:C})):S.createElement(b,zd({},D,{className:c,ref:C}),o))});I4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};I4.classNames={fullWidth:e5,zeroRight:Q_};var jfe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $fe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jfe();return t&&e.setAttribute("nonce",t),e}function Bfe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ufe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qfe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=$fe())&&(Bfe(t,r),Ufe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Wfe=function(){var e=qfe();return function(t,r){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},KG=function(){var e=Wfe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},zfe={left:0,top:0,right:0,gap:0},bA=function(e){return parseInt(e||"",10)||0},Vfe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[bA(r),bA(n),bA(a)]},Hfe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zfe;var t=Vfe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Gfe=KG(),Jv="data-scroll-locked",Yfe=function(e,t,r,n){var a=e.left,i=e.top,s=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Pfe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Jv,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Q_,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(e5,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Q_," .").concat(Q_,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(e5," .").concat(e5,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Jv,`] {
    `).concat(Tfe,": ").concat(o,`px;
  }
`)},IF=function(){var e=parseInt(document.body.getAttribute(Jv)||"0",10);return isFinite(e)?e:0},Kfe=function(){S.useEffect(function(){return document.body.setAttribute(Jv,(IF()+1).toString()),function(){var e=IF()-1;e<=0?document.body.removeAttribute(Jv):document.body.setAttribute(Jv,e.toString())}},[])},Xfe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Kfe();var i=S.useMemo(function(){return Hfe(a)},[a]);return S.createElement(Gfe,{styles:Yfe(i,!t,a,r?"":"!important")})},h6=!1;if(typeof window<"u")try{var l_=Object.defineProperty({},"passive",{get:function(){return h6=!0,!0}});window.addEventListener("test",l_,l_),window.removeEventListener("test",l_,l_)}catch{h6=!1}var mv=h6?{passive:!1}:!1,Jfe=function(e){return e.tagName==="TEXTAREA"},XG=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Jfe(e)&&r[t]==="visible")},Zfe=function(e){return XG(e,"overflowY")},Qfe=function(e){return XG(e,"overflowX")},RF=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=JG(e,n);if(a){var i=ZG(e,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ehe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},the=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},JG=function(e,t){return e==="v"?Zfe(t):Qfe(t)},ZG=function(e,t){return e==="v"?ehe(t):the(t)},rhe=function(e,t){return e==="h"&&t==="rtl"?-1:1},nhe=function(e,t,r,n,a){var i=rhe(e,window.getComputedStyle(t).direction),s=i*n,o=r.target,c=t.contains(o),u=!1,d=s>0,f=0,h=0;do{var m=ZG(e,o),w=m[0],g=m[1],y=m[2],b=g-y-i*w;(w||b)&&JG(e,o)&&(f+=b,h+=w),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},c_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},MF=function(e){return[e.deltaX,e.deltaY]},FF=function(e){return e&&"current"in e?e.current:e},ahe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ihe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},she=0,gv=[];function ohe(e){var t=S.useRef([]),r=S.useRef([0,0]),n=S.useRef(),a=S.useState(she++)[0],i=S.useState(KG)[0],s=S.useRef(e);S.useEffect(function(){s.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=Cfe([e.lockRef.current],(e.shards||[]).map(FF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=S.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!s.current.allowPinchZoom;var b=c_(g),_=r.current,N="deltaX"in g?g.deltaX:_[0]-b[0],E="deltaY"in g?g.deltaY:_[1]-b[1],C,D=g.target,P=Math.abs(N)>Math.abs(E)?"h":"v";if("touches"in g&&P==="h"&&D.type==="range")return!1;var F=RF(P,D);if(!F)return!0;if(F?C=P:(C=P==="v"?"h":"v",F=RF(P,D)),!F)return!1;if(!n.current&&"changedTouches"in g&&(N||E)&&(n.current=C),!C)return!0;var L=n.current||C;return nhe(L,y,g,L==="h"?N:E)},[]),c=S.useCallback(function(g){var y=g;if(!(!gv.length||gv[gv.length-1]!==i)){var b="deltaY"in y?MF(y):c_(y),_=t.current.filter(function(C){return C.name===y.type&&(C.target===y.target||y.target===C.shadowParent)&&ahe(C.delta,b)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var N=(s.current.shards||[]).map(FF).filter(Boolean).filter(function(C){return C.contains(y.target)}),E=N.length>0?o(y,N[0]):!s.current.noIsolation;E&&y.cancelable&&y.preventDefault()}}},[]),u=S.useCallback(function(g,y,b,_){var N={name:g,delta:y,target:b,should:_,shadowParent:lhe(b)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(E){return E!==N})},1)},[]),d=S.useCallback(function(g){r.current=c_(g),n.current=void 0},[]),f=S.useCallback(function(g){u(g.type,MF(g),g.target,o(g,e.lockRef.current))},[]),h=S.useCallback(function(g){u(g.type,c_(g),g.target,o(g,e.lockRef.current))},[]);S.useEffect(function(){return gv.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,mv),document.addEventListener("touchmove",c,mv),document.addEventListener("touchstart",d,mv),function(){gv=gv.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,mv),document.removeEventListener("touchmove",c,mv),document.removeEventListener("touchstart",d,mv)}},[]);var m=e.removeScrollBar,w=e.inert;return S.createElement(S.Fragment,null,w?S.createElement(i,{styles:ihe(a)}):null,m?S.createElement(Xfe,{gapMode:e.gapMode}):null)}function lhe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const che=Lfe(YG,ohe);var Ww=S.forwardRef(function(e,t){return S.createElement(I4,zd({},e,{ref:t,sideCar:che}))});Ww.classNames=I4.classNames;var p6=["Enter"," "],uhe=["ArrowDown","PageUp","Home"],QG=["ArrowUp","PageDown","End"],dhe=[...uhe,...QG],fhe={ltr:[...p6,"ArrowRight"],rtl:[...p6,"ArrowLeft"]},hhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zw="Menu",[gx,phe,mhe]=jw(zw),[Ag,eY]=es(zw,[mhe,Cm,vy]),R4=Cm(),tY=vy(),[ghe,kg]=Ag(zw),[vhe,Vw]=Ag(zw),rY=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:s=!0}=e,o=R4(t),[c,u]=S.useState(null),d=S.useRef(!1),f=Di(i),h=Sg(a);return S.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),l(P4,{...o,children:l(ghe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:l(vhe,{scope:t,onClose:S.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:s,children:n})})})};rY.displayName=zw;var yhe="MenuAnchor",wD=S.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=R4(r);return l(Uw,{...a,...n,ref:t})});wD.displayName=yhe;var bD="MenuPortal",[xhe,nY]=Ag(bD,{forceMount:void 0}),aY=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=kg(bD,t);return l(xhe,{scope:t,forceMount:r,children:l(uo,{present:r||i.open,children:l(gy,{asChild:!0,container:a,children:n})})})};aY.displayName=bD;var eu="MenuContent",[whe,_D]=Ag(eu),iY=S.forwardRef((e,t)=>{const r=nY(eu,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=kg(eu,e.__scopeMenu),s=Vw(eu,e.__scopeMenu);return l(gx.Provider,{scope:e.__scopeMenu,children:l(uo,{present:n||i.open,children:l(gx.Slot,{scope:e.__scopeMenu,children:s.modal?l(bhe,{...a,ref:t}):l(_he,{...a,ref:t})})})})}),bhe=S.forwardRef((e,t)=>{const r=kg(eu,e.__scopeMenu),n=S.useRef(null),a=Kr(t,n);return S.useEffect(()=>{const i=n.current;if(i)return D4(i)},[]),l(SD,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ht(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),_he=S.forwardRef((e,t)=>{const r=kg(eu,e.__scopeMenu);return l(SD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),She=lm("MenuContent.ScrollLock"),SD=S.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:w,...g}=e,y=kg(eu,r),b=Vw(eu,r),_=R4(r),N=tY(r),E=phe(r),[C,D]=S.useState(null),P=S.useRef(null),F=Kr(t,P,y.onContentChange),L=S.useRef(0),W=S.useRef(""),T=S.useRef(0),R=S.useRef(null),j=S.useRef("right"),Y=S.useRef(0),Z=w?Ww:S.Fragment,re=w?{as:She,allowPinchZoom:!0}:void 0,z=B=>{var oe,de;const G=W.current+B,Q=E().filter(V=>!V.disabled),O=document.activeElement,J=(oe=Q.find(V=>V.ref.current===O))==null?void 0:oe.textValue,X=Q.map(V=>V.textValue),ne=Mhe(X,G,J),ie=(de=Q.find(V=>V.textValue===ne))==null?void 0:de.ref.current;(function V(se){W.current=se,window.clearTimeout(L.current),se!==""&&(L.current=window.setTimeout(()=>V(""),1e3))})(G),ie&&setTimeout(()=>ie.focus())};S.useEffect(()=>()=>window.clearTimeout(L.current),[]),N4();const q=S.useCallback(B=>{var Q,O;return j.current===((Q=R.current)==null?void 0:Q.side)&&Lhe(B,(O=R.current)==null?void 0:O.area)},[]);return l(whe,{scope:r,searchRef:W,onItemEnter:S.useCallback(B=>{q(B)&&B.preventDefault()},[q]),onItemLeave:S.useCallback(B=>{var G;q(B)||((G=P.current)==null||G.focus(),D(null))},[q]),onTriggerLeave:S.useCallback(B=>{q(B)&&B.preventDefault()},[q]),pointerGraceTimerRef:T,onPointerGraceIntentChange:S.useCallback(B=>{R.current=B},[]),children:l(Z,{...re,children:l($w,{asChild:!0,trapped:a,onMountAutoFocus:Ht(i,B=>{var G;B.preventDefault(),(G=P.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:l(Ng,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:l(yD,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:D,onEntryFocus:Ht(c,B=>{b.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:l(T4,{role:"menu","aria-orientation":"vertical","data-state":bY(y.open),"data-radix-menu-content":"",dir:b.dir,..._,...g,ref:F,style:{outline:"none",...g.style},onKeyDown:Ht(g.onKeyDown,B=>{const Q=B.target.closest("[data-radix-menu-content]")===B.currentTarget,O=B.ctrlKey||B.altKey||B.metaKey,J=B.key.length===1;Q&&(B.key==="Tab"&&B.preventDefault(),!O&&J&&z(B.key));const X=P.current;if(B.target!==X||!dhe.includes(B.key))return;B.preventDefault();const ie=E().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);QG.includes(B.key)&&ie.reverse(),Ihe(ie)}),onBlur:Ht(e.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(L.current),W.current="")}),onPointerMove:Ht(e.onPointerMove,vx(B=>{const G=B.target,Q=Y.current!==B.clientX;if(B.currentTarget.contains(G)&&Q){const O=B.clientX>Y.current?"right":"left";j.current=O,Y.current=B.clientX}}))})})})})})})});iY.displayName=eu;var Nhe="MenuGroup",ND=S.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return l(vr.div,{role:"group",...n,ref:t})});ND.displayName=Nhe;var Ahe="MenuLabel",sY=S.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return l(vr.div,{...n,ref:t})});sY.displayName=Ahe;var C5="MenuItem",LF="menu.itemSelect",M4=S.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=S.useRef(null),s=Vw(C5,e.__scopeMenu),o=_D(C5,e.__scopeMenu),c=Kr(t,i),u=S.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(LF,{bubbles:!0,cancelable:!0});f.addEventListener(LF,m=>n==null?void 0:n(m),{once:!0}),lD(f,h),h.defaultPrevented?u.current=!1:s.onClose()}};return l(oY,{...a,ref:c,disabled:r,onClick:Ht(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:Ht(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Ht(e.onKeyDown,f=>{const h=o.searchRef.current!=="";r||h&&f.key===" "||p6.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});M4.displayName=C5;var oY=S.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,s=_D(C5,r),o=tY(r),c=S.useRef(null),u=Kr(t,c),[d,f]=S.useState(!1),[h,m]=S.useState("");return S.useEffect(()=>{const w=c.current;w&&m((w.textContent??"").trim())},[i.children]),l(gx.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:l(xD,{asChild:!0,...o,focusable:!n,children:l(vr.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Ht(e.onPointerMove,vx(w=>{n?s.onItemLeave(w):(s.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ht(e.onPointerLeave,vx(w=>s.onItemLeave(w))),onFocus:Ht(e.onFocus,()=>f(!0)),onBlur:Ht(e.onBlur,()=>f(!1))})})})}),khe="MenuCheckboxItem",lY=S.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return l(hY,{scope:e.__scopeMenu,checked:r,children:l(M4,{role:"menuitemcheckbox","aria-checked":P5(r)?"mixed":r,...a,ref:t,"data-state":kD(r),onSelect:Ht(a.onSelect,()=>n==null?void 0:n(P5(r)?!0:!r),{checkForDefaultPrevented:!1})})})});lY.displayName=khe;var cY="MenuRadioGroup",[Ehe,Che]=Ag(cY,{value:void 0,onValueChange:()=>{}}),uY=S.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Di(n);return l(Ehe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:l(ND,{...a,ref:t})})});uY.displayName=cY;var dY="MenuRadioItem",fY=S.forwardRef((e,t)=>{const{value:r,...n}=e,a=Che(dY,e.__scopeMenu),i=r===a.value;return l(hY,{scope:e.__scopeMenu,checked:i,children:l(M4,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":kD(i),onSelect:Ht(n.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,r)},{checkForDefaultPrevented:!1})})})});fY.displayName=dY;var AD="MenuItemIndicator",[hY,Phe]=Ag(AD,{checked:!1}),pY=S.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=Phe(AD,r);return l(uo,{present:n||P5(i.checked)||i.checked===!0,children:l(vr.span,{...a,ref:t,"data-state":kD(i.checked)})})});pY.displayName=AD;var The="MenuSeparator",mY=S.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return l(vr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});mY.displayName=The;var Ohe="MenuArrow",gY=S.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=R4(r);return l(O4,{...a,...n,ref:t})});gY.displayName=Ohe;var Dhe="MenuSub",[BZe,vY]=Ag(Dhe),A2="MenuSubTrigger",yY=S.forwardRef((e,t)=>{const r=kg(A2,e.__scopeMenu),n=Vw(A2,e.__scopeMenu),a=vY(A2,e.__scopeMenu),i=_D(A2,e.__scopeMenu),s=S.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=S.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),c(null)}},[o,c]),l(wD,{asChild:!0,...u,children:l(oY,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":bY(r.open),...e,ref:S4(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ht(e.onPointerMove,vx(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Ht(e.onPointerLeave,vx(f=>{var m,w;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const g=(w=r.content)==null?void 0:w.dataset.side,y=g==="right",b=y?-5:5,_=h[y?"left":"right"],N=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:_,y:h.top},{x:N,y:h.top},{x:N,y:h.bottom},{x:_,y:h.bottom}],side:g}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ht(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||fhe[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});yY.displayName=A2;var xY="MenuSubContent",wY=S.forwardRef((e,t)=>{const r=nY(eu,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=kg(eu,e.__scopeMenu),s=Vw(eu,e.__scopeMenu),o=vY(xY,e.__scopeMenu),c=S.useRef(null),u=Kr(t,c);return l(gx.Provider,{scope:e.__scopeMenu,children:l(uo,{present:n||i.open,children:l(gx.Slot,{scope:e.__scopeMenu,children:l(SD,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;s.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ht(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ht(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:Ht(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=hhe[s.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=o.trigger)==null||m.focus(),d.preventDefault())})})})})})});wY.displayName=xY;function bY(e){return e?"open":"closed"}function P5(e){return e==="indeterminate"}function kD(e){return P5(e)?"indeterminate":e?"checked":"unchecked"}function Ihe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Rhe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Mhe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=Rhe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==r));const c=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Fhe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],c=t[s],u=o.x,d=o.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function Lhe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Fhe(r,t)}function vx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var jhe=rY,$he=wD,Bhe=aY,Uhe=iY,qhe=ND,Whe=sY,zhe=M4,Vhe=lY,Hhe=uY,Ghe=fY,Yhe=pY,Khe=mY,Xhe=gY,Jhe=yY,Zhe=wY,F4="DropdownMenu",[Qhe,UZe]=es(F4,[eY]),gl=eY(),[epe,_Y]=Qhe(F4),SY=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,c=gl(t),u=S.useRef(null),[d,f]=hl({prop:a,defaultProp:i??!1,onChange:s,caller:F4});return l(epe,{scope:t,triggerId:jl(),triggerRef:u,contentId:jl(),open:d,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(h=>!h),[f]),modal:o,children:l(jhe,{...c,open:d,onOpenChange:f,dir:n,modal:o,children:r})})};SY.displayName=F4;var NY="DropdownMenuTrigger",AY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=_Y(NY,r),s=gl(r);return l($he,{asChild:!0,...s,children:l(vr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:S4(t,i.triggerRef),onPointerDown:Ht(e.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Ht(e.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});AY.displayName=NY;var tpe="DropdownMenuPortal",kY=e=>{const{__scopeDropdownMenu:t,...r}=e,n=gl(t);return l(Bhe,{...n,...r})};kY.displayName=tpe;var EY="DropdownMenuContent",CY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=_Y(EY,r),i=gl(r),s=S.useRef(!1);return l(Uhe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Ht(e.onCloseAutoFocus,o=>{var c;s.current||(c=a.triggerRef.current)==null||c.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:Ht(e.onInteractOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});CY.displayName=EY;var rpe="DropdownMenuGroup",npe=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(qhe,{...a,...n,ref:t})});npe.displayName=rpe;var ape="DropdownMenuLabel",PY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Whe,{...a,...n,ref:t})});PY.displayName=ape;var ipe="DropdownMenuItem",TY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(zhe,{...a,...n,ref:t})});TY.displayName=ipe;var spe="DropdownMenuCheckboxItem",OY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Vhe,{...a,...n,ref:t})});OY.displayName=spe;var ope="DropdownMenuRadioGroup",lpe=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Hhe,{...a,...n,ref:t})});lpe.displayName=ope;var cpe="DropdownMenuRadioItem",DY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Ghe,{...a,...n,ref:t})});DY.displayName=cpe;var upe="DropdownMenuItemIndicator",IY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Yhe,{...a,...n,ref:t})});IY.displayName=upe;var dpe="DropdownMenuSeparator",RY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Khe,{...a,...n,ref:t})});RY.displayName=dpe;var fpe="DropdownMenuArrow",hpe=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Xhe,{...a,...n,ref:t})});hpe.displayName=fpe;var ppe="DropdownMenuSubTrigger",MY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Jhe,{...a,...n,ref:t})});MY.displayName=ppe;var mpe="DropdownMenuSubContent",FY=S.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return l(Zhe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FY.displayName=mpe;var gpe=SY,vpe=AY,ype=kY,LY=CY,jY=PY,$Y=TY,BY=OY,UY=DY,qY=IY,WY=RY,zY=MY,VY=FY;const xpe=gpe,wpe=vpe,bpe=S.forwardRef(({className:e,inset:t,children:r,...n},a)=>x(zY,{ref:a,className:Lt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,l(sm,{className:"ml-auto h-4 w-4"})]}));bpe.displayName=zY.displayName;const _pe=S.forwardRef(({className:e,...t},r)=>l(VY,{ref:r,className:Lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));_pe.displayName=VY.displayName;const HY=S.forwardRef(({className:e,sideOffset:t=4,...r},n)=>l(ype,{children:l(LY,{ref:n,sideOffset:t,className:Lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));HY.displayName=LY.displayName;const k2=S.forwardRef(({className:e,inset:t,...r},n)=>l($Y,{ref:n,className:Lt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));k2.displayName=$Y.displayName;const Spe=S.forwardRef(({className:e,children:t,checked:r,...n},a)=>x(BY,{ref:a,className:Lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[l("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l(qY,{children:l(g1,{className:"h-4 w-4"})})}),t]}));Spe.displayName=BY.displayName;const Npe=S.forwardRef(({className:e,children:t,...r},n)=>x(UY,{ref:n,className:Lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[l("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l(qY,{children:l(ZH,{className:"h-2 w-2 fill-current"})})}),t]}));Npe.displayName=UY.displayName;const GY=S.forwardRef(({className:e,inset:t,...r},n)=>l(jY,{ref:n,className:Lt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));GY.displayName=jY.displayName;const m6=S.forwardRef(({className:e,...t},r)=>l(WY,{ref:r,className:Lt("-mx-1 my-1 h-px bg-muted",e),...t}));m6.displayName=WY.displayName;const ht=S.forwardRef(({className:e,type:t,...r},n)=>l("input",{type:t,className:Lt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ht.displayName="Input";var _A={exports:{}},SA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jF;function Ape(){if(jF)return SA;jF=1;var e=m4();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function o(f,h){var m=h(),w=n({inst:{value:m,getSnapshot:h}}),g=w[0].inst,y=w[1];return i(function(){g.value=m,g.getSnapshot=h,c(g)&&y({inst:g})},[f,m,h]),a(function(){return c(g)&&y({inst:g}),f(function(){c(g)&&y({inst:g})})},[f]),s(m),m}function c(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return SA.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,SA}var $F;function kpe(){return $F||($F=1,_A.exports=Ape()),_A.exports}var Epe=kpe();function Cpe(){return Epe.useSyncExternalStore(Ppe,()=>!0,()=>!1)}function Ppe(){return()=>{}}var ED="Avatar",[Tpe,qZe]=es(ED),[Ope,YY]=Tpe(ED),KY=S.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=S.useState("idle");return l(Ope,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:l(vr.span,{...n,ref:t})})});KY.displayName=ED;var XY="AvatarImage",JY=S.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,s=YY(XY,r),o=Dpe(n,i),c=Di(u=>{a(u),s.onImageLoadingStatusChange(u)});return ci(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?l(vr.img,{...i,ref:t,src:n}):null});JY.displayName=XY;var ZY="AvatarFallback",QY=S.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=YY(ZY,r),[s,o]=S.useState(n===void 0);return S.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(c)}},[n]),s&&i.imageLoadingStatus!=="loaded"?l(vr.span,{...a,ref:t}):null});QY.displayName=ZY;function BF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Dpe(e,{referrerPolicy:t,crossOrigin:r}){const n=Cpe(),a=S.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[s,o]=S.useState(()=>BF(i,e));return ci(()=>{o(BF(i,e))},[i,e]),ci(()=>{const c=f=>()=>{o(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),s}var eK=KY,tK=JY,rK=QY;const L4=S.forwardRef(({className:e,...t},r)=>l(eK,{ref:r,className:Lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));L4.displayName=eK.displayName;const CD=S.forwardRef(({className:e,...t},r)=>l(tK,{ref:r,className:Lt("aspect-square h-full w-full",e),...t}));CD.displayName=tK.displayName;const j4=S.forwardRef(({className:e,...t},r)=>l(rK,{ref:r,className:Lt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));j4.displayName=rK.displayName;const Ipe="modulepreload",Rpe=function(e){return"/DentalCare-Pro/"+e},UF={},uf=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let s=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=s(r.map(u=>{if(u=Rpe(u),u in UF)return;UF[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Ipe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,w)=>{h.addEventListener("load",m),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Mpe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uf(async()=>{const{default:n}=await Promise.resolve().then(()=>yy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class PD extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fpe extends PD{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lpe extends PD{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jpe extends PD{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var g6;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(g6||(g6={}));var $pe=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Bpe{constructor(t,{headers:r={},customFetch:n,region:a=g6.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Mpe(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return $pe(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:s}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;s&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=s):typeof s=="string"?(o["Content-Type"]="text/plain",u=s):typeof FormData<"u"&&s instanceof FormData?u=s:(o["Content-Type"]="application/json",u=JSON.stringify(s)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:u}).catch(w=>{throw new Fpe(w)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Lpe(d);if(!d.ok)throw new jpe(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Is={},vv={},yv={},xv={},wv={},bv={},Upe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},y1=Upe();const qpe=y1.fetch,nK=y1.fetch.bind(y1),aK=y1.Headers,Wpe=y1.Request,zpe=y1.Response,yy=Object.freeze(Object.defineProperty({__proto__:null,Headers:aK,Request:Wpe,Response:zpe,default:nK,fetch:qpe},Symbol.toStringTag,{value:"Module"})),Vpe=rle(yy);var u_={},qF;function iK(){if(qF)return u_;qF=1,Object.defineProperty(u_,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return u_.default=e,u_}var WF;function sK(){if(WF)return bv;WF=1;var e=bv&&bv.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(bv,"__esModule",{value:!0});const t=e(Vpe),r=e(iK());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=Object.assign({},this.headers),this.headers[i]=s,this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h;let m=null,w=null,g=null,y=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const C=await u.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=C:w=JSON.parse(C))}const N=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),E=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");N&&E&&E.length>1&&(g=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(m={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,g=null,y=406,b="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const N=await u.text();try{m=JSON.parse(N),Array.isArray(m)&&u.status===404&&(w=[],m=null,y=200,b="OK")}catch{u.status===404&&N===""?(y=204,b="No Content"):m={message:N}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,y=200,b="OK"),m&&this.shouldThrowOnError)throw new r.default(m)}return{error:m,data:w,count:g,status:y,statusText:b}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,s)}returns(){return this}overrideTypes(){return this}}return bv.default=n,bv}var zF;function oK(){if(zF)return wv;zF=1;var e=wv&&wv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wv,"__esModule",{value:!0});const t=e(sK());class r extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:o=s}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,s?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`,u==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return wv.default=r,wv}var VF;function TD(){if(VF)return xv;VF=1;var e=xv&&xv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xv,"__esModule",{value:!0});const t=e(oK());class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const s=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:s,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${c}fts${u}.${i}`),this}match(a){return Object.entries(a).forEach(([i,s])=>{this.url.searchParams.append(i,`eq.${s}`)}),this}not(a,i,s){return this.url.searchParams.append(a,`not.${i}.${s}`),this}or(a,{foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,i,s){return this.url.searchParams.append(a,`${i}.${s}`),this}}return xv.default=r,xv}var HF;function lK(){if(HF)return yv;HF=1;var e=yv&&yv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yv,"__esModule",{value:!0});const t=e(TD());class r{constructor(a,{headers:i={},schema:s,fetch:o}){this.url=a,this.headers=i,this.schema=s,this.fetch=o}select(a,{head:i=!1,count:s}={}){const o=i?"HEAD":"GET";let c=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),s&&(this.headers.Prefer=`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:s=!0}={}){const o="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),s||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:o,defaultToNull:c=!0}={}){const u="POST",d=[`resolution=${s?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),c||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const s="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",s=[];return a&&s.push(`count=${a}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return yv.default=r,yv}var n2={},a2={},GF;function Hpe(){return GF||(GF=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.version=void 0,a2.version="0.0.0-automated"),a2}var YF;function Gpe(){if(YF)return n2;YF=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.DEFAULT_HEADERS=void 0;const e=Hpe();return n2.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},n2}var KF;function Ype(){if(KF)return vv;KF=1;var e=vv&&vv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(vv,"__esModule",{value:!0});const t=e(lK()),r=e(TD()),n=Gpe();class a{constructor(s,{headers:o={},schema:c,fetch:u}={}){this.url=s,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),o),this.schemaName=c,this.fetch=u}from(s){const o=new URL(`${this.url}/${s}`);return new t.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new a(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:c=!1,get:u=!1,count:d}={}){let f;const h=new URL(`${this.url}/rpc/${s}`);let m;c||u?(f=c?"HEAD":"GET",Object.entries(o).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{h.searchParams.append(g,y)})):(f="POST",m=o);const w=Object.assign({},this.headers);return d&&(w.Prefer=`count=${d}`),new r.default({method:f,url:h,headers:w,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return vv.default=a,vv}var XF;function Kpe(){if(XF)return Is;XF=1;var e=Is&&Is.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Is,"__esModule",{value:!0}),Is.PostgrestError=Is.PostgrestBuilder=Is.PostgrestTransformBuilder=Is.PostgrestFilterBuilder=Is.PostgrestQueryBuilder=Is.PostgrestClient=void 0;const t=e(Ype());Is.PostgrestClient=t.default;const r=e(lK());Is.PostgrestQueryBuilder=r.default;const n=e(TD());Is.PostgrestFilterBuilder=n.default;const a=e(oK());Is.PostgrestTransformBuilder=a.default;const i=e(sK());Is.PostgrestBuilder=i.default;const s=e(iK());return Is.PostgrestError=s.default,Is.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:s.default},Is}var Xpe=Kpe();const Jpe=pa(Xpe),{PostgrestClient:Zpe,PostgrestQueryBuilder:WZe,PostgrestFilterBuilder:zZe,PostgrestTransformBuilder:VZe,PostgrestBuilder:HZe,PostgrestError:GZe}=Jpe,Qpe="2.11.2",eme={"X-Client-Info":`realtime-js/${Qpe}`},tme="1.0.0",cK=1e4,rme=1e3;var Zv;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zv||(Zv={}));var nc;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nc||(nc={}));var Lu;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Lu||(Lu={}));var v6;(function(e){e.websocket="websocket"})(v6||(v6={}));var P0;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(P0||(P0={}));class nme{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+a));s=s+a;const c=n.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class uK{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ja;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ja||(ja={}));const JF=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,s)=>(i[s]=ame(s,e,t,a),i),{})},ame=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,s=r[e];return i&&!n.includes(i)?dK(i,s):y6(s)},dK=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return lme(t,r)}switch(e){case ja.bool:return ime(t);case ja.float4:case ja.float8:case ja.int2:case ja.int4:case ja.int8:case ja.numeric:case ja.oid:return sme(t);case ja.json:case ja.jsonb:return ome(t);case ja.timestamp:return cme(t);case ja.abstime:case ja.date:case ja.daterange:case ja.int4range:case ja.int8range:case ja.money:case ja.reltime:case ja.text:case ja.time:case ja.timestamptz:case ja.timetz:case ja.tsrange:case ja.tstzrange:return y6(t);default:return y6(t)}},y6=e=>e,ime=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sme=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ome=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},lme=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(o=>dK(t,o))}return e},cme=e=>typeof e=="string"?e.replace(" ","T"):e,fK=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class NA{constructor(t,r,n={},a=cK){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ZF;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ZF||(ZF={}));class $2{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$2.syncState(this.state,a,i,s),this.pendingDiffs.forEach(c=>{this.state=$2.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=$2.syncDiff(this.state,a,i,s),o())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(i,(u,d)=>{s[u]||(c[u]=d)}),this.map(s,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),w=d.filter(y=>m.indexOf(y.presence_ref)<0),g=f.filter(y=>h.indexOf(y.presence_ref)<0);w.length>0&&(o[u]=w),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[o].unshift(...h)}n(o,d,c)}),this.map(s,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var QF;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(QF||(QF={}));var eL;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(eL||(eL={}));var sc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sc||(sc={}));class OD{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=nc.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new NA(this,Lu.join,this.params,this.timeout),this.rejoinTimer=new uK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nc.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nc.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=nc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nc.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lu.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new $2(this),this.broadcastEndpointURL=fK(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:s,private:o}}=this.params;this._onError(d=>t==null?void 0:t(sc.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(sc.CLOSED));const c={},u={broadcast:i,presence:s,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(sc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,w=[];for(let g=0;g<m;g++){const y=h[g],{filter:{event:b,schema:_,table:N,filter:E}}=y,C=d&&d[g];if(C&&C.event===b&&C.schema===_&&C.table===N&&C.filter===E)w.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),t==null||t(sc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(sc.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(sc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nc.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lu.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new NA(this,Lu.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new NA(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=Lu;if(n&&[o,c,u,d].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var w,g,y;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(m=>m.callback(h,n)):(i=this.bindings[s])===null||i===void 0||i.filter(m=>{var w,g,y,b,_,N;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const E=m.id,C=(w=m.filter)===null||w===void 0?void 0:w.event;return E&&((g=r.ids)===null||g===void 0?void 0:g.includes(E))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(_=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return E==="*"||E===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:g,table:y,commit_timestamp:b,type:_,errors:N}=w;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:b,eventType:_,new:{},old:{},errors:N}),this._getPayloadRecords(w))}m.callback(h,n)})}_isClosed(){return this.state===nc.closed}_isJoined(){return this.state===nc.joined}_isJoining(){return this.state===nc.joining}_isLeaving(){return this.state===nc.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&OD.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Lu.close,{},t)}_onError(t){this._on(Lu.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nc.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=JF(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=JF(t.columns,t.old_record)),r}}const ume=()=>{},dme=typeof WebSocket<"u",fme=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hme{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=eme,this.params={},this.timeout=cK,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ume,this.conn=null,this.sendBuffer=[],this.serializer=new nme,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>uf(async()=>{const{default:c}=await Promise.resolve().then(()=>yy);return{default:c}},void 0).then(({default:c})=>c(...o)):s=fetch,(...o)=>s(...o)},this.endPoint=`${t}/${v6.websocket}`,this.httpEndpoint=fK(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,s)=>s(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new uK(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(dme){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new pme(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),uf(async()=>{const{default:t}=await import("./browser-CVPkOrHY.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:tme}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zv.connecting:return P0.Connecting;case Zv.open:return P0.Open;case Zv.closing:return P0.Closing;default:return P0.Closed}}isConnected(){return this.connectionState()===P0.Open}channel(t,r={config:{}}){const n=new OD(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:i}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Lu.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(rme,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:s}=r;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${s&&"("+s+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(a,i,s)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Lu.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([fme],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class pme{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zv.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class DD extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Rs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class mme extends DD{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class x6 extends DD{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var gme=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const hK=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uf(async()=>{const{default:n}=await Promise.resolve().then(()=>yy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},vme=()=>gme(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield uf(()=>Promise.resolve().then(()=>yy),void 0)).Response:Response}),w6=e=>{if(Array.isArray(e))return e.map(r=>w6(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=w6(n)}),t};var Eg=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const AA=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yme=(e,t,r)=>Eg(void 0,void 0,void 0,function*(){const n=yield vme();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new mme(AA(a),e.status||500))}).catch(a=>{t(new x6(AA(a),a))}):t(new x6(AA(e),e))}),xme=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Hw(e,t,r,n,a,i){return Eg(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,xme(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>yme(c,o,n))})})}function T5(e,t,r,n){return Eg(this,void 0,void 0,function*(){return Hw(e,"GET",t,r,n)})}function qp(e,t,r,n,a){return Eg(this,void 0,void 0,function*(){return Hw(e,"POST",t,n,a,r)})}function wme(e,t,r,n,a){return Eg(this,void 0,void 0,function*(){return Hw(e,"PUT",t,n,a,r)})}function bme(e,t,r,n){return Eg(this,void 0,void 0,function*(){return Hw(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function pK(e,t,r,n,a){return Eg(this,void 0,void 0,function*(){return Hw(e,"DELETE",t,n,a,r)})}var Tl=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const _me={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sme{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=hK(a)}uploadOrUpdate(t,r,n,a){return Tl(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},tL),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Rs(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Tl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Tl(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:tL.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Rs(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Tl(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield qp(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),s=new URL(this.url+i.url),o=s.searchParams.get("token");if(!o)throw new DD("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(Rs(n))return{data:null,error:n};throw n}})}update(t,r,n){return Tl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Tl(this,void 0,void 0,function*(){try{return{data:yield qp(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Tl(this,void 0,void 0,function*(){try{return{data:{path:(yield qp(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Tl(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield qp(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Tl(this,void 0,void 0,function*(){try{const a=yield qp(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}download(t,r){return Tl(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield T5(this.fetch,`${this.url}/${a}/${o}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Rs(o))return{data:null,error:o};throw o}})}info(t){return Tl(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield T5(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:w6(n),error:null}}catch(n){if(Rs(n))return{data:null,error:n};throw n}})}exists(t){return Tl(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield bme(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Rs(n)&&n instanceof x6){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return Tl(this,void 0,void 0,function*(){try{return{data:yield pK(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}list(t,r,n){return Tl(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},_me),r),{prefix:t||""});return{data:yield qp(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Rs(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Nme="2.7.1",Ame={"X-Client-Info":`storage-js/${Nme}`};var _v=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class kme{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Ame),r),this.fetch=hK(n)}listBuckets(){return _v(this,void 0,void 0,function*(){try{return{data:yield T5(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Rs(t))return{data:null,error:t};throw t}})}getBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield T5(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return _v(this,void 0,void 0,function*(){try{return{data:yield qp(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rs(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return _v(this,void 0,void 0,function*(){try{return{data:yield wme(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Rs(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield qp(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield pK(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Rs(r))return{data:null,error:r};throw r}})}}class Eme extends kme{constructor(t,r={},n){super(t,r,n)}from(t){return new Sme(this.url,this.headers,t,this.fetch)}}const Cme="2.49.4";let E2="";typeof Deno<"u"?E2="deno":typeof document<"u"?E2="web":typeof navigator<"u"&&navigator.product==="ReactNative"?E2="react-native":E2="node";const Pme={"X-Client-Info":`supabase-js-${E2}/${Cme}`},Tme={headers:Pme},Ome={schema:"public"},Dme={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ime={};var Rme=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Mme=e=>{let t;return e?t=e:typeof fetch>"u"?t=nK:t=fetch,(...r)=>t(...r)},Fme=()=>typeof Headers>"u"?aK:Headers,Lme=(e,t,r)=>{const n=Mme(r),a=Fme();return(i,s)=>Rme(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},s),{headers:u}))})};var jme=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function $me(e){return e.replace(/\/$/,"")}function Bme(e,t){const{db:r,auth:n,realtime:a,global:i}=e,{db:s,auth:o,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},u),i),accessToken:()=>jme(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const mK="2.69.1",Lv=30*1e3,b6=3,kA=b6*Lv,Ume="http://localhost:9999",qme="supabase.auth.token",Wme={"X-Client-Info":`gotrue-js/${mK}`},_6="X-Supabase-Api-Version",gK={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zme=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vme=6e5;class ID extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function kn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Hme extends ID{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Gme(e){return kn(e)&&e.name==="AuthApiError"}class vK extends ID{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Pm extends ID{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class jp extends Pm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yme(e){return kn(e)&&e.name==="AuthSessionMissingError"}class EA extends Pm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class d_ extends Pm{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class f_ extends Pm{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Kme(e){return kn(e)&&e.name==="AuthImplicitGrantRedirectError"}class rL extends Pm{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class S6 extends Pm{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function CA(e){return kn(e)&&e.name==="AuthRetryableFetchError"}class nL extends Pm{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class B2 extends Pm{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const aL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),iL=` 	
\r=`.split(""),Xme=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<iL.length;t+=1)e[iL[t].charCodeAt(0)]=-2;for(let t=0;t<aL.length;t+=1)e[aL[t].charCodeAt(0)]=t;return e})();function yK(e,t,r){const n=Xme[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function sL(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{Qme(s,n,r)};for(let s=0;s<e.length;s+=1)yK(e.charCodeAt(s),a,i);return t.join("")}function Jme(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Zme(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Jme(n,t)}}function Qme(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function e0e(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)yK(e.charCodeAt(a),r,n);return new Uint8Array(t)}function t0e(e){const t=[];return Zme(e,r=>t.push(r)),new Uint8Array(t)}function r0e(e){return Math.round(Date.now()/1e3)+e}function n0e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const jd=()=>typeof window<"u"&&typeof document<"u",y0={tested:!1,writable:!1},U2=()=>{if(!jd())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(y0.tested)return y0.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),y0.tested=!0,y0.writable=!0}catch{y0.tested=!0,y0.writable=!1}return y0.writable};function a0e(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const xK=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uf(async()=>{const{default:n}=await Promise.resolve().then(()=>yy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},i0e=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wK=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},h_=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},p_=async(e,t)=>{await e.removeItem(t)};class $4{constructor(){this.promise=new $4.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}$4.promiseConstructor=Promise;function PA(e){const t=e.split(".");if(t.length!==3)throw new B2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!zme.test(t[n]))throw new B2("JWT not in base64url format");return{header:JSON.parse(sL(t[0])),payload:JSON.parse(sL(t[1])),signature:e0e(t[2]),raw:{header:t[0],payload:t[1]}}}async function s0e(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function o0e(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){n(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function l0e(e){return("0"+e.toString(16)).substr(-2)}function c0e(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,l0e).join("")}async function u0e(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function d0e(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await u0e(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sv(e,t,r=!1){const n=c0e();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await wK(e,`${t}-code-verifier`,a);const i=await d0e(n);return[i,n===i?"plain":"s256"]}const f0e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function h0e(e){const t=e.headers.get(_6);if(!t||!t.match(f0e))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function p0e(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function m0e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var g0e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const N0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),v0e=[502,503,504];async function oL(e){var t;if(!i0e(e))throw new S6(N0(e),0);if(v0e.includes(e.status))throw new S6(N0(e),e.status);let r;try{r=await e.json()}catch(i){throw new vK(N0(i),i)}let n;const a=h0e(e);if(a&&a.getTime()>=gK["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nL(N0(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new jp}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new nL(N0(r),e.status,r.weak_password.reasons);throw new Hme(N0(r),e.status||500,n)}const y0e=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function jn(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[_6]||(i[_6]=gK["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const s=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await x0e(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function x0e(e,t,r,n,a,i){const s=y0e(t,n,a,i);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new S6(N0(c),0)}if(o.ok||await oL(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await oL(c)}}function $p(e){var t;let r=null;S0e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=r0e(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function lL(e){const t=$p(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Hp(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function w0e(e){return{data:e,error:null}}function b0e(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,s=g0e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function _0e(e){return e}function S0e(e){return e.access_token&&e.refresh_token&&e.expires_in}var N0e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class A0e{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xK(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await jn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(kn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await jn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hp})}catch(n){if(kn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=N0e(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await jn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:b0e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(kn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await jn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Hp})}catch(r){if(kn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,s,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await jn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:_0e});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(kn(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await jn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Hp})}catch(r){if(kn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await jn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Hp})}catch(n){if(kn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await jn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hp})}catch(n){if(kn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await jn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(kn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await jn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(kn(r))return{data:null,error:r};throw r}}}const k0e={getItem:e=>U2()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{U2()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{U2()&&globalThis.localStorage.removeItem(e)}};function cL(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function E0e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nv={debug:!!(globalThis&&U2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bK extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C0e extends bK{}async function P0e(e,t,r){Nv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nv.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Nv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Nv.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Nv.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C0e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nv.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}E0e();const T0e={url:Ume,storageKey:qme,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wme,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uL(e,t,r){return await r()}class yx{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yx.nextInstanceID,yx.nextInstanceID+=1,this.instanceID>0&&jd()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},T0e),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new A0e({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=xK(a.fetch),this.lock=a.lock||uL,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:jd()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=P0e:this.lock=uL,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:U2()?this.storage=k0e:(this.memoryStorage={},this.storage=cL(this.memoryStorage)):(this.memoryStorage={},this.storage=cL(this.memoryStorage)),jd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mK}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=a0e(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),jd()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Kme(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return kn(r)?{error:r}:{error:new vK("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await jn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:$p}),{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(kn(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await Sv(this.storage,this.storageKey)),i=await jn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:w},xform:$p})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await jn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$p})}else throw new d_("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(kn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:s,options:o}=t;r=await jn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lL})}else if("phone"in t){const{phone:i,password:s,options:o}=t;r=await jn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lL})}else throw new d_("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new EA}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(kn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await h_(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:s}=await jn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:$p});if(await p_(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new EA}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(kn(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:s}=t,o=await jn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$p}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new EA}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(kn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,s;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sv(this.storage,this.storageKey));const{error:f}=await jn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await jn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new d_("You must provide either an email or phone number.")}catch(o){if(kn(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await jn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:$p});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(kn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await Sv(this.storage,this.storageKey)),await jn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:w0e})}catch(i){if(kn(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new jp;const{error:a}=await jn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(kn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:s}=await jn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:s,error:o}=await jn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o}}throw new d_("You must provide either an email or phone number and a type")}catch(r){if(kn(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await h_(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<kA:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!s&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await jn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Hp}):await this._useSession(async r=>{var n,a,i;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jp}:await jn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Hp})})}catch(r){if(kn(r))return Yme(r)&&(await this._removeSession(),await p_(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new jp;const s=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Sv(this.storage,this.storageKey));const{data:u,error:d}=await jn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:Hp});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(kn(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jp;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:s}=PA(t.access_token);if(s.exp&&(n=s.exp,a=n<=r),a){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(kn(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new jp;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(kn(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!jd())throw new f_("No browser detected.");if(t.error||t.error_description||t.error_code)throw new f_(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new f_("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new rL("No code detected.");const{data:_,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!s||!u)throw new f_("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=Lv&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=h-f;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,h,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(n){if(kn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await h_(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const s=(n=a.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(Gme(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await p_(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=n0e(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Sv(this.storage,this.storageKey,!0));try{return await jn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(kn(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(kn(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var s,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await jn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return jd()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(kn(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)throw s;return await jn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(kn(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await o0e(async a=>(a>0&&await s0e(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await jn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$p})),(a,i)=>{const s=200*Math.pow(2,a);return i&&CA(i)&&Date.now()+s-n<Lv})}catch(n){if(this._debug(r,"error",n),kn(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),jd()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await h_(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<kA;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${kA}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),CA(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new jp;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $4;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new jp;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),kn(i)){const s={session:null,error:i};return CA(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(s),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await wK(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await p_(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&jd()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Lv);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Lv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Lv}ms, refresh threshold is ${b6} ticks`),a<=b6&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bK)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jd()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,s]=await Sv(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await jn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(kn(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:s}=r;if(s)return{data:null,error:s};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await jn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(kn(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:s,error:o}=await jn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(r){if(kn(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await jn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(kn(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(s=>s.factor_type==="totp"&&s.status==="verified"),i=n.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=PA(a.access_token);let o=null;s.aal&&(o=s.aal);let c=o;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=s.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(s=>s.kid===t);if(n||(n=this.jwks.keys.find(s=>s.kid===t),n&&this.jwks_cached_at+Vme>Date.now()))return n;const{data:a,error:i}=await jn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new B2("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(s=>s.kid===t),!n)throw new B2("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:m,error:w}=await this.getSession();if(w||!m.session)return{data:null,error:w};n=m.session.access_token}const{header:a,payload:i,signature:s,raw:{header:o,payload:c}}=PA(n);if(p0e(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:s},error:null}}const u=m0e(a.alg),d=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,t0e(`${o}.${c}`)))throw new B2("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(n){if(kn(n))return{data:null,error:n};throw n}}}yx.nextInstanceID=0;const O0e=yx;class D0e extends O0e{constructor(t){super(t)}}var I0e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function o(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class R0e{constructor(t,r,n){var a,i,s;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=$me(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ome,realtime:Ime,auth:Object.assign(Object.assign({},Dme),{storageKey:c}),global:Tme},d=Bme(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=Lme(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Zpe(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Bpe(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Eme(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return I0e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:s,lock:o,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new D0e({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:s,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new hme(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const M0e=(e,t,r)=>new R0e(e,t,r),F0e="https://syevxwuraxjpvkcclmjj.supabase.co",L0e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5ZXZ4d3VyYXhqcHZrY2NsbWpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwOTM0MjksImV4cCI6MjA1ODY2OTQyOX0.Uog7kEtPXYQJDZ3TqKanmteMRK0c_qEIBnmCxFgQTv0",$e=M0e(F0e,L0e,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),_K=S.createContext(void 0);function j0e({children:e}){const[t,r]=S.useState(null),[n,a]=S.useState(!0),i=S.useCallback(async(c,u)=>{let d=null,f=null;try{const h=await $e.from("profiles").select("*").eq("id",c).single();if(d=h.data,f=h.error,f)console.error("[fetchUserProfile] Error during profile fetch:",f.message),r(null);else if(d){const m=d,w=m.role??"doctor",g={...m,role:w,email:u};r(g)}else console.warn(`[fetchUserProfile] Profile query succeeded but returned no data for user: ${c}`),r(null)}catch(h){console.error("[fetchUserProfile] UNEXPECTED EXCEPTION caught:",h.message),r(null)}},[]),s=S.useRef(!1);S.useEffect(()=>{s.current=!1;let c=!0;const u=async(f,h)=>{c&&(f==="TOKEN_REFRESHED"?console.log("[AuthContext] Token refreshed successfully."):f==="SIGNED_OUT"?(console.log("[AuthContext] SIGNED_OUT event received. Setting user to null."),r(null)):h!=null&&h.user?(!t||t.id!==h.user.id)&&await i(h.user.id,h.user.email):f==="INITIAL_SESSION"&&!s.current&&r(null),s.current||(a(!1),s.current=!0))},{data:{subscription:d}}=$e.auth.onAuthStateChange((f,h)=>{u(f,h).catch(m=>{console.error(`[AuthContext] Error in handleAuthStateChange for Event: ${f}`,m),c&&(r(null),s.current||(a(!1),s.current=!0))})});return()=>{c=!1,d.unsubscribe()}},[i]);const o={user:t,loading:n,signIn:async(c,u)=>{const{error:d}=await $e.auth.signInWithPassword({email:c,password:u});if(d)throw d},signOut:async()=>{const{error:c}=await $e.auth.signOut();if(r(null),c)throw console.error("Error signing out:",c),c}};return l(_K.Provider,{value:o,children:e})}function ui(){const e=S.useContext(_K);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const $0e=1,B0e=1e6;let TA=0;function U0e(){return TA=(TA+1)%Number.MAX_VALUE,TA.toString()}const OA=new Map,dL=e=>{if(OA.has(e))return;const t=setTimeout(()=>{OA.delete(e),q2({type:"REMOVE_TOAST",toastId:e})},B0e);OA.set(e,t)},q0e=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,$0e)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?dL(r):e.toasts.forEach(n=>{dL(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},t5=[];let r5={toasts:[]};function q2(e){r5=q0e(r5,e),t5.forEach(t=>{t(r5)})}function Wi({...e}){const t=U0e(),r=a=>q2({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>q2({type:"DISMISS_TOAST",toastId:t});return q2({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function _n(){const[e,t]=S.useState(r5);return S.useEffect(()=>(t5.push(t),()=>{const r=t5.indexOf(t);r>-1&&t5.splice(r,1)}),[e]),{...e,toast:Wi,dismiss:r=>q2({type:"DISMISS_TOAST",toastId:r})}}const W0e=()=>{const{user:e}=ui(),[t,r]=S.useState([]),n=S.useRef(null);return S.useEffect(()=>{if(!e){r([]);return}if((async()=>{const{data:c,error:u}=await $e.from("notifications").select("*").eq("user_id",e.id).eq("is_read",!1).order("created_at",{ascending:!1});u?(console.error("Error fetching notifications from `notifications` table:",u),Wi({title:"Error",description:"Could not fetch notifications.",variant:"destructive"})):(console.log("Fetched notifications:",c),r(c||[]))})(),!n.current&&e){const c=`notifications-channel-${e.id}`;console.log(`Attempting to subscribe to channel: ${c}`),n.current=$e.channel(c),n.current.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},u=>{if(console.log("[useNotifications] Realtime event received:",u),u.eventType==="INSERT"&&u.new){const d=u.new;console.log("[useNotifications] Realtime INSERT detected:",d),r(f=>{if(console.log("[useNotifications] Attempting state update via realtime. Prev length:",f.length),f.some(m=>m.id===d.id))return console.log(`[useNotifications] Duplicate notification ID ${d.id} detected in realtime update, skipping state update.`),f;const h=[d,...f];return console.log("[useNotifications] State update successful via realtime. New length:",h.length),h})}else console.log("[useNotifications] Received non-insert or unexpected payload via realtime:",u)}).subscribe((u,d)=>{console.log(`Channel ${c} subscription status: ${u}`),u===sc.SUBSCRIBED?console.log(`Successfully subscribed to notifications channel: ${c}`):u===sc.CHANNEL_ERROR?(console.error(`Notifications subscription error on channel ${c}:`,d),Wi({title:"Realtime Error",description:`Connection error for notifications: ${(d==null?void 0:d.message)||"Unknown error"}`,variant:"destructive"})):u===sc.TIMED_OUT?(console.warn(`Notifications subscription timed out on channel ${c}.`),Wi({title:"Realtime Warning",description:"Notification connection timed out.",variant:"default"})):u===sc.CLOSED&&console.log(`Notifications channel closed: ${c}.`)})}return()=>{if(n.current){const c=n.current,u=c.topic;console.log(`Attempting to unsubscribe from channel: ${u}`),$e.removeChannel(c).then(d=>{console.log(`Unsubscribed from notifications channel ${u}:`,d)}).catch(d=>{console.error(`Error removing notifications channel ${u}:`,d)}).finally(()=>{n.current===c&&(n.current=null)})}}},[e]),{notifications:t,markAsRead:async o=>{const{error:c}=await $e.from("notifications").update({is_read:!0}).eq("id",o);c?console.error("Error marking notification as read:",c):r(u=>u.map(d=>d.id===o?{...d,is_read:!0}:d))},createNotification:async(o,c,u)=>{try{const d=new Date;d.setHours(d.getHours()-2);const f=d.toISOString(),{count:h,error:m}=await $e.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",o).eq("message",c).gte("created_at",f);if(m&&console.error("Error checking for existing notifications:",m),h&&h>0){console.log(`Skipping notification creation: Identical notification found within the last 2 hours for message: "${c}"`);return}const w={user_id:o,message:c,link_url:u,is_read:!1},{data:g,error:y}=await $e.from("notifications").insert([w]).select();y?(console.error("Error creating notification:",y),Wi({title:"Error",description:`Could not create notification: ${y.message}`,variant:"destructive"})):(console.log("Notification created:",g),"Notification"in window&&Notification.permission==="granted"?new Notification("New Notification",{body:c,icon:"/dentalcarelogo.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(b=>{b==="granted"&&new Notification("New Notification",{body:c,icon:"/dentalcarelogo.png"})}))}catch(d){console.error("Error creating notification:",d)}},clearNotification:async o=>{r(u=>u.map(d=>d.id===o?{...d,is_read:!0}:d).filter(d=>!(d.id===o&&d.is_read)));const{error:c}=await $e.from("notifications").update({is_read:!0}).eq("id",o).eq("user_id",e==null?void 0:e.id);c?(console.error("Error marking notification as read (clearing):",c),Wi({title:"Error",description:"Could not clear notification. It may reappear.",variant:"destructive"})):r(u=>u.filter(d=>d.id!==o))}}},or=S.forwardRef(({className:e,...t},r)=>l("div",{ref:r,className:Lt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));or.displayName="Card";const xr=S.forwardRef(({className:e,...t},r)=>l("div",{ref:r,className:Lt("flex flex-col space-y-1.5 p-6",e),...t}));xr.displayName="CardHeader";const br=S.forwardRef(({className:e,...t},r)=>l("h3",{ref:r,className:Lt("text-2xl font-semibold leading-none tracking-tight",e),...t}));br.displayName="CardTitle";const _c=S.forwardRef(({className:e,...t},r)=>l("p",{ref:r,className:Lt("text-sm text-muted-foreground",e),...t}));_c.displayName="CardDescription";const hr=S.forwardRef(({className:e,...t},r)=>l("div",{ref:r,className:Lt("p-6 pt-0",e),...t}));hr.displayName="CardContent";const eg=S.forwardRef(({className:e,...t},r)=>l("div",{ref:r,className:Lt("flex items-center p-6 pt-0",e),...t}));eg.displayName="CardFooter";function pr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Sa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ua(e,t){const r=pr(e);return isNaN(t)?Sa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function pl(e,t){const r=pr(e);if(isNaN(t))return Sa(e,NaN);if(!t)return r;const n=r.getDate(),a=Sa(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function SK(e,t){const{years:r=0,months:n=0,weeks:a=0,days:i=0,hours:s=0,minutes:o=0,seconds:c=0}=t,u=pr(e),d=n||r?pl(u,n+r*12):u,f=i||a?Ua(d,i+a*7):d,h=o+s*60,w=(c+h*60)*1e3;return Sa(e,f.getTime()+w)}function z0e(e,t){const r=+pr(e);return Sa(e,r+t)}const RD=6048e5,V0e=864e5,xx=6e4,B4=36e5,H0e=1e3,fL=525600,qv=43200,O5=1440;function NK(e,t){return z0e(e,t*B4)}let G0e={};function Ph(){return G0e}function co(e,t){var o,c,u,d;const r=Ph(),n=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=pr(e),i=a.getDay(),s=(i<n?7:0)+i-n;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function wh(e){return co(e,{weekStartsOn:1})}function AK(e){const t=pr(e),r=t.getFullYear(),n=Sa(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=wh(n),i=Sa(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const s=wh(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function Dl(e){const t=pr(e);return t.setHours(0,0,0,0),t}function df(e){const t=pr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Wu(e,t){const r=Dl(e),n=Dl(t),a=+r-df(r),i=+n-df(n);return Math.round((a-i)/V0e)}function Y0e(e){const t=AK(e),r=Sa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),wh(r)}function x1(e,t){const r=t*7;return Ua(e,r)}function K0e(e,t){return pl(e,t*12)}function X0e(e){let t;return e.forEach(function(r){const n=pr(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function J0e(e){let t;return e.forEach(r=>{const n=pr(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function W2(e,t){const r=pr(e),n=pr(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function kK(e){return Sa(e,Date.now())}function ll(e,t){const r=Dl(e),n=Dl(t);return+r==+n}function MD(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Bp(e){if(!MD(e)&&typeof e!="number")return!1;const t=pr(e);return!isNaN(Number(t))}function w1(e,t){const r=pr(e),n=pr(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function Z0e(e,t,r){const n=co(e,r),a=co(t,r),i=+n-df(n),s=+a-df(a);return Math.round((i-s)/RD)}function Q0e(e,t){const r=pr(e),n=pr(t),a=hL(r,n),i=Math.abs(Wu(r,n));r.setDate(r.getDate()-a*i);const s=+(hL(r,n)===-a),o=a*(i-s);return o===0?0:o}function hL(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function EK(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function n5(e,t){return+pr(e)-+pr(t)}function Qv(e){const t=pr(e);return t.setHours(23,59,59,999),t}function fm(e){const t=pr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ege(e){const t=pr(e);return+Qv(t)==+fm(t)}function tge(e,t){const r=pr(e),n=pr(t),a=W2(r,n),i=Math.abs(w1(r,n));let s;if(i<1)s=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let o=W2(r,n)===-a;ege(pr(e))&&i===1&&W2(e,n)===1&&(o=!1),s=a*(i-Number(o))}return s===0?0:s}function CK(e,t,r){const n=n5(e,t)/1e3;return EK(r==null?void 0:r.roundingMethod)(n)}function z2(e,t){const r=pr(e.start),n=pr(e.end);let a=+r>+n;const i=a?+r:+n,s=a?n:r;s.setHours(0,0,0,0);let o=1;const c=[];for(;+s<=i;)c.push(pr(s)),s.setDate(s.getDate()+o),s.setHours(0,0,0,0);return a?c.reverse():c}function rge(e,t){const r=pr(e.start),n=pr(e.end);let a=+r>+n;const i=a?+r:+n;let s=a?n:r;s.setMinutes(0,0,0);let o=1;const c=[];for(;+s<=i;)c.push(pr(s)),s=NK(s,o);return a?c.reverse():c}function Ws(e){const t=pr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function PK(e){const t=pr(e),r=Sa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function R0(e,t){var o,c,u,d;const r=Ph(),n=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=pr(e),i=a.getDay(),s=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+s),a.setHours(23,59,59,999),a}function TK(e){return R0(e,{weekStartsOn:1})}const nge={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},age=(e,t,r)=>{let n;const a=nge[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function DA(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ige={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lge={date:DA({formats:ige,defaultWidth:"full"}),time:DA({formats:sge,defaultWidth:"full"}),dateTime:DA({formats:oge,defaultWidth:"full"})},cge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uge=(e,t,r,n)=>cge[e];function i2(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const dge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vge=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yge={ordinalNumber:vge,era:i2({values:dge,defaultWidth:"wide"}),quarter:i2({values:fge,defaultWidth:"wide",argumentCallback:e=>e-1}),month:i2({values:hge,defaultWidth:"wide"}),day:i2({values:pge,defaultWidth:"wide"}),dayPeriod:i2({values:mge,defaultWidth:"wide",formattingValues:gge,defaultFormattingWidth:"wide"})};function s2(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?wge(o,f=>f.test(s)):xge(o,f=>f.test(s));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function xge(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function wge(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function bge(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=r.valueCallback?r.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const _ge=/^(\d+)(th|st|nd|rd)?/i,Sge=/\d+/i,Nge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Age={any:[/^b/i,/^(a|c)/i]},kge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ege={any:[/1/i,/2/i,/3/i,/4/i]},Cge={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Oge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ige={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rge={ordinalNumber:bge({matchPattern:_ge,parsePattern:Sge,valueCallback:e=>parseInt(e,10)}),era:s2({matchPatterns:Nge,defaultMatchWidth:"wide",parsePatterns:Age,defaultParseWidth:"any"}),quarter:s2({matchPatterns:kge,defaultMatchWidth:"wide",parsePatterns:Ege,defaultParseWidth:"any",valueCallback:e=>e+1}),month:s2({matchPatterns:Cge,defaultMatchWidth:"wide",parsePatterns:Pge,defaultParseWidth:"any"}),day:s2({matchPatterns:Tge,defaultMatchWidth:"wide",parsePatterns:Oge,defaultParseWidth:"any"}),dayPeriod:s2({matchPatterns:Dge,defaultMatchWidth:"any",parsePatterns:Ige,defaultParseWidth:"any"})},Gw={code:"en-US",formatDistance:age,formatLong:lge,formatRelative:uge,localize:yge,match:Rge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mge(e){const t=pr(e);return Wu(t,PK(t))+1}function FD(e){const t=pr(e),r=+wh(t)-+Y0e(t);return Math.round(r/RD)+1}function LD(e,t){var d,f,h,m;const r=pr(e),n=r.getFullYear(),a=Ph(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=Sa(e,0);s.setFullYear(n+1,0,i),s.setHours(0,0,0,0);const o=co(s,t),c=Sa(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=co(c,t);return r.getTime()>=o.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Fge(e,t){var o,c,u,d;const r=Ph(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=LD(e,t),i=Sa(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),co(i,t)}function jD(e,t){const r=pr(e),n=+co(r,t)-+Fge(r,t);return Math.round(n/RD)+1}function Rn(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Tp={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Rn(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Rn(r+1,2)},d(e,t){return Rn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Rn(e.getHours()%12||12,t.length)},H(e,t){return Rn(e.getHours(),t.length)},m(e,t){return Rn(e.getMinutes(),t.length)},s(e,t){return Rn(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Rn(a,t.length)}},Av={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pL={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Tp.y(e,t)},Y:function(e,t,r,n){const a=LD(e,n),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return Rn(s,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Rn(i,t.length)},R:function(e,t){const r=AK(e);return Rn(r,t.length)},u:function(e,t){const r=e.getFullYear();return Rn(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Rn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Rn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Tp.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Rn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=jD(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Rn(a,t.length)},I:function(e,t,r){const n=FD(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Rn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Tp.d(e,t)},D:function(e,t,r){const n=Mge(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Rn(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Rn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Rn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Rn(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Av.noon:n===0?a=Av.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Av.evening:n>=12?a=Av.afternoon:n>=4?a=Av.morning:a=Av.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Tp.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Tp.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Rn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Rn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Tp.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Tp.s(e,t)},S:function(e,t){return Tp.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return gL(n);case"XXXX":case"XX":return A0(n);case"XXXXX":case"XXX":default:return A0(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return gL(n);case"xxxx":case"xx":return A0(n);case"xxxxx":case"xxx":default:return A0(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+mL(n,":");case"OOOO":default:return"GMT"+A0(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+mL(n,":");case"zzzz":default:return"GMT"+A0(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Rn(n,t.length)},T:function(e,t,r){const n=e.getTime();return Rn(n,t.length)}};function mL(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Rn(i,2)}function gL(e,t){return e%60===0?(e>0?"-":"+")+Rn(Math.abs(e)/60,2):A0(e,t)}function A0(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Rn(Math.trunc(n/60),2),i=Rn(n%60,2);return r+a+t+i}const vL=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},OK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Lge=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return vL(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",vL(n,t)).replace("{{time}}",OK(a,t))},N6={p:OK,P:Lge},jge=/^D+$/,$ge=/^Y+$/,Bge=["D","DD","YY","YYYY"];function DK(e){return jge.test(e)}function IK(e){return $ge.test(e)}function A6(e,t,r){const n=Uge(e,t,r);if(console.warn(n),Bge.includes(e))throw new RangeError(n)}function Uge(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zge=/^'([^]*?)'?$/,Vge=/''/g,Hge=/[a-zA-Z]/;function Mt(e,t,r){var d,f,h,m,w,g,y,b;const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Gw,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=(r==null?void 0:r.weekStartsOn)??((g=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((b=(y=n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0,o=pr(e);if(!Bp(o))throw new RangeError("Invalid time value");let c=t.match(Wge).map(_=>{const N=_[0];if(N==="p"||N==="P"){const E=N6[N];return E(_,a.formatLong)}return _}).join("").match(qge).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const N=_[0];if(N==="'")return{isToken:!1,value:Gge(_)};if(pL[N])return{isToken:!0,value:_};if(N.match(Hge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:_}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return c.map(_=>{if(!_.isToken)return _.value;const N=_.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&IK(N)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&DK(N))&&A6(N,t,String(e));const E=pL[N[0]];return E(o,N,a.localize,u)}).join("")}function Gge(e){const t=e.match(zge);return t?t[1].replace(Vge,"'"):e}function Yge(e,t,r){const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Gw,i=2520,s=W2(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:s});let c,u;s>0?(c=pr(t),u=pr(e)):(c=pr(e),u=pr(t));const d=CK(u,c),f=(df(u)-df(c))/1e3,h=Math.round((d-f)/60);let m;if(h<2)return r!=null&&r.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):h===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",h,o);if(h<45)return a.formatDistance("xMinutes",h,o);if(h<90)return a.formatDistance("aboutXHours",1,o);if(h<O5){const w=Math.round(h/60);return a.formatDistance("aboutXHours",w,o)}else{if(h<i)return a.formatDistance("xDays",1,o);if(h<qv){const w=Math.round(h/O5);return a.formatDistance("xDays",w,o)}else if(h<qv*2)return m=Math.round(h/qv),a.formatDistance("aboutXMonths",m,o)}if(m=tge(u,c),m<12){const w=Math.round(h/qv);return a.formatDistance("xMonths",w,o)}else{const w=m%12,g=Math.trunc(m/12);return w<3?a.formatDistance("aboutXYears",g,o):w<9?a.formatDistance("overXYears",g,o):a.formatDistance("almostXYears",g+1,o)}}function RK(e,t,r){const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Gw,i=W2(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:i});let o,c;i>0?(o=pr(t),c=pr(e)):(o=pr(e),c=pr(t));const u=EK((r==null?void 0:r.roundingMethod)??"round"),d=c.getTime()-o.getTime(),f=d/xx,h=df(c)-df(o),m=(d-h)/xx,w=r==null?void 0:r.unit;let g;if(w?g=w:f<1?g="second":f<60?g="minute":f<O5?g="hour":m<qv?g="day":m<fL?g="month":g="year",g==="second"){const y=u(d/1e3);return a.formatDistance("xSeconds",y,s)}else if(g==="minute"){const y=u(f);return a.formatDistance("xMinutes",y,s)}else if(g==="hour"){const y=u(f/60);return a.formatDistance("xHours",y,s)}else if(g==="day"){const y=u(m/O5);return a.formatDistance("xDays",y,s)}else if(g==="month"){const y=u(m/qv);return y===12&&w!=="month"?a.formatDistance("xYears",1,s):a.formatDistance("xMonths",y,s)}else{const y=u(m/fL);return a.formatDistance("xYears",y,s)}}function Kge(e,t){return Yge(e,kK(e),t)}function yL(e,t){const r=pr(e);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");let n="",a="";const i="-",s=":";{const o=Rn(r.getDate(),2),c=Rn(r.getMonth()+1,2);n=`${Rn(r.getFullYear(),4)}${i}${c}${i}${o}`}{const o=r.getTimezoneOffset();if(o!==0){const m=Math.abs(o),w=Rn(Math.trunc(m/60),2),g=Rn(m%60,2);a=`${o<0?"+":"-"}${w}:${g}`}else a="Z";const c=Rn(r.getHours(),2),u=Rn(r.getMinutes(),2),d=Rn(r.getSeconds(),2),f=n===""?"":"T",h=[c,u,d].join(s);n=`${n}${f}${h}${a}`}return n}function Xge(e){const t=pr(e),r=t.getFullYear(),n=t.getMonth(),a=Sa(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Jge(){return Object.assign({},Ph())}function Zge(e){let r=pr(e).getDay();return r===0&&(r=7),r}function Qge(e){return Math.trunc(+pr(e)/1e3)}function eve(e){const t=pr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function tve(e,t){return Z0e(eve(e),Ws(e),t)+1}function k6(e,t){const r=pr(e),n=pr(t);return r.getTime()>n.getTime()}function ah(e,t){const r=pr(e),n=pr(t);return+r<+n}function rve(e,t){const r=t instanceof Date?Sa(t,0):new t(0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}const nve=10;class MK{constructor(){gr(this,"subPriority",0)}validate(t,r){return!0}}class ave extends MK{constructor(t,r,n,a,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=a,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class ive extends MK{constructor(){super(...arguments);gr(this,"priority",nve);gr(this,"subPriority",-1)}set(r,n){return n.timestampIsSet?r:Sa(r,rve(r,Date))}}class ma{run(t,r,n,a){const i=this.parse(t,r,n,a);return i?{setter:new ave(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class sve extends ma{constructor(){super(...arguments);gr(this,"priority",140);gr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const Ki={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Vd={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Xi(e,t){return e&&{value:t(e.value),rest:e.rest}}function yi(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Hd(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,s=r[5]?parseInt(r[5],10):0;return{value:n*(a*B4+i*xx+s*H0e),rest:t.slice(r[0].length)}}function FK(e){return yi(Ki.anyDigitsSigned,e)}function Ri(e,t){switch(e){case 1:return yi(Ki.singleDigit,t);case 2:return yi(Ki.twoDigits,t);case 3:return yi(Ki.threeDigits,t);case 4:return yi(Ki.fourDigits,t);default:return yi(new RegExp("^\\d{1,"+e+"}"),t)}}function D5(e,t){switch(e){case 1:return yi(Ki.singleDigitSigned,t);case 2:return yi(Ki.twoDigitsSigned,t);case 3:return yi(Ki.threeDigitsSigned,t);case 4:return yi(Ki.fourDigitsSigned,t);default:return yi(new RegExp("^-?\\d{1,"+e+"}"),t)}}function $D(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function LK(e,t){const r=t>0,n=r?t:1-t;let a;if(n<=50)a=e||100;else{const i=n+50,s=Math.trunc(i/100)*100,o=e>=i%100;a=e+s-(o?100:0)}return r?a:1-a}function jK(e){return e%400===0||e%4===0&&e%100!==0}class ove extends ma{constructor(){super(...arguments);gr(this,"priority",130);gr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const i=s=>({year:s,isTwoDigitYear:n==="yy"});switch(n){case"y":return Xi(Ri(4,r),i);case"yo":return Xi(a.ordinalNumber(r,{unit:"year"}),i);default:return Xi(Ri(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const i=r.getFullYear();if(a.isTwoDigitYear){const o=LK(a.year,i);return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}const s=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}}class lve extends ma{constructor(){super(...arguments);gr(this,"priority",130);gr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const i=s=>({year:s,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Xi(Ri(4,r),i);case"Yo":return Xi(a.ordinalNumber(r,{unit:"year"}),i);default:return Xi(Ri(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,i){const s=LD(r,i);if(a.isTwoDigitYear){const c=LK(a.year,s);return r.setFullYear(c,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),co(r,i)}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),co(r,i)}}class cve extends ma{constructor(){super(...arguments);gr(this,"priority",130);gr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return D5(n==="R"?4:n.length,r)}set(r,n,a){const i=Sa(r,0);return i.setFullYear(a,0,4),i.setHours(0,0,0,0),wh(i)}}class uve extends ma{constructor(){super(...arguments);gr(this,"priority",130);gr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return D5(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class dve extends ma{constructor(){super(...arguments);gr(this,"priority",120);gr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return Ri(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class fve extends ma{constructor(){super(...arguments);gr(this,"priority",120);gr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return Ri(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class hve extends ma{constructor(){super(...arguments);gr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);gr(this,"priority",110)}parse(r,n,a){const i=s=>s-1;switch(n){case"M":return Xi(yi(Ki.month,r),i);case"MM":return Xi(Ri(2,r),i);case"Mo":return Xi(a.ordinalNumber(r,{unit:"month"}),i);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class pve extends ma{constructor(){super(...arguments);gr(this,"priority",110);gr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const i=s=>s-1;switch(n){case"L":return Xi(yi(Ki.month,r),i);case"LL":return Xi(Ri(2,r),i);case"Lo":return Xi(a.ordinalNumber(r,{unit:"month"}),i);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function mve(e,t,r){const n=pr(e),a=jD(n,r)-t;return n.setDate(n.getDate()-a*7),n}class gve extends ma{constructor(){super(...arguments);gr(this,"priority",100);gr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return yi(Ki.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return Ri(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,i){return co(mve(r,a,i),i)}}function vve(e,t){const r=pr(e),n=FD(r)-t;return r.setDate(r.getDate()-n*7),r}class yve extends ma{constructor(){super(...arguments);gr(this,"priority",100);gr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return yi(Ki.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return Ri(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return wh(vve(r,a))}}const xve=[31,28,31,30,31,30,31,31,30,31,30,31],wve=[31,29,31,30,31,30,31,31,30,31,30,31];class bve extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"subPriority",1);gr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return yi(Ki.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return Ri(n.length,r)}}validate(r,n){const a=r.getFullYear(),i=jK(a),s=r.getMonth();return i?n>=1&&n<=wve[s]:n>=1&&n<=xve[s]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class _ve extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"subpriority",1);gr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return yi(Ki.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return Ri(n.length,r)}}validate(r,n){const a=r.getFullYear();return jK(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function BD(e,t,r){var f,h,m,w;const n=Ph(),a=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((w=(m=n.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??0,i=pr(e),s=i.getDay(),c=(t%7+7)%7,u=7-a,d=t<0||t>6?t-(s+u)%7:(c+u)%7-(s+u)%7;return Ua(i,d)}class Sve extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=BD(r,a,i),r.setHours(0,0,0,0),r}}class Nve extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,i){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Xi(Ri(n.length,r),s);case"eo":return Xi(a.ordinalNumber(r,{unit:"day"}),s);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=BD(r,a,i),r.setHours(0,0,0,0),r}}class Ave extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,i){const s=o=>{const c=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Xi(Ri(n.length,r),s);case"co":return Xi(a.ordinalNumber(r,{unit:"day"}),s);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=BD(r,a,i),r.setHours(0,0,0,0),r}}function kve(e,t){const r=pr(e),n=Zge(r),a=t-n;return Ua(r,a)}class Eve extends ma{constructor(){super(...arguments);gr(this,"priority",90);gr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const i=s=>s===0?7:s;switch(n){case"i":case"ii":return Ri(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Xi(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return Xi(a.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Xi(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Xi(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=kve(r,a),r.setHours(0,0,0,0),r}}class Cve extends ma{constructor(){super(...arguments);gr(this,"priority",80);gr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours($D(a),0,0,0),r}}class Pve extends ma{constructor(){super(...arguments);gr(this,"priority",80);gr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours($D(a),0,0,0),r}}class Tve extends ma{constructor(){super(...arguments);gr(this,"priority",80);gr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours($D(a),0,0,0),r}}class Ove extends ma{constructor(){super(...arguments);gr(this,"priority",70);gr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return yi(Ki.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return Ri(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const i=r.getHours()>=12;return i&&a<12?r.setHours(a+12,0,0,0):!i&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class Dve extends ma{constructor(){super(...arguments);gr(this,"priority",70);gr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return yi(Ki.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return Ri(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class Ive extends ma{constructor(){super(...arguments);gr(this,"priority",70);gr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return yi(Ki.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return Ri(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class Rve extends ma{constructor(){super(...arguments);gr(this,"priority",70);gr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return yi(Ki.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return Ri(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const i=a<=24?a%24:a;return r.setHours(i,0,0,0),r}}class Mve extends ma{constructor(){super(...arguments);gr(this,"priority",60);gr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return yi(Ki.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return Ri(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class Fve extends ma{constructor(){super(...arguments);gr(this,"priority",50);gr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return yi(Ki.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return Ri(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class Lve extends ma{constructor(){super(...arguments);gr(this,"priority",30);gr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=i=>Math.trunc(i*Math.pow(10,-n.length+3));return Xi(Ri(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class jve extends ma{constructor(){super(...arguments);gr(this,"priority",10);gr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Hd(Vd.basicOptionalMinutes,r);case"XX":return Hd(Vd.basic,r);case"XXXX":return Hd(Vd.basicOptionalSeconds,r);case"XXXXX":return Hd(Vd.extendedOptionalSeconds,r);case"XXX":default:return Hd(Vd.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Sa(r,r.getTime()-df(r)-a)}}class $ve extends ma{constructor(){super(...arguments);gr(this,"priority",10);gr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Hd(Vd.basicOptionalMinutes,r);case"xx":return Hd(Vd.basic,r);case"xxxx":return Hd(Vd.basicOptionalSeconds,r);case"xxxxx":return Hd(Vd.extendedOptionalSeconds,r);case"xxx":default:return Hd(Vd.extended,r)}}set(r,n,a){return n.timestampIsSet?r:Sa(r,r.getTime()-df(r)-a)}}class Bve extends ma{constructor(){super(...arguments);gr(this,"priority",40);gr(this,"incompatibleTokens","*")}parse(r){return FK(r)}set(r,n,a){return[Sa(r,a*1e3),{timestampIsSet:!0}]}}class Uve extends ma{constructor(){super(...arguments);gr(this,"priority",20);gr(this,"incompatibleTokens","*")}parse(r){return FK(r)}set(r,n,a){return[Sa(r,a),{timestampIsSet:!0}]}}const qve={G:new sve,y:new ove,Y:new lve,R:new cve,u:new uve,Q:new dve,q:new fve,M:new hve,L:new pve,w:new gve,I:new yve,d:new bve,D:new _ve,E:new Sve,e:new Nve,c:new Ave,i:new Eve,a:new Cve,b:new Pve,B:new Tve,h:new Ove,H:new Dve,K:new Ive,k:new Rve,m:new Mve,s:new Fve,S:new Lve,X:new jve,x:new $ve,t:new Bve,T:new Uve},Wve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vve=/^'([^]*?)'?$/,Hve=/''/g,Gve=/\S/,Yve=/[a-zA-Z]/;function xL(e,t,r,n){var g,y,b,_;const a=Jge(),i=a.locale??Gw,s=a.firstWeekContainsDate??((y=(g=a.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,o=a.weekStartsOn??((_=(b=a.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??0;if(t==="")return e===""?pr(r):Sa(r,NaN);const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i},u=[new ive],d=t.match(zve).map(N=>{const E=N[0];if(E in N6){const C=N6[E];return C(N,i.formatLong)}return N}).join("").match(Wve),f=[];for(let N of d){IK(N)&&A6(N,t,e),DK(N)&&A6(N,t,e);const E=N[0],C=qve[E];if(C){const{incompatibleTokens:D}=C;if(Array.isArray(D)){const F=f.find(L=>D.includes(L.token)||L.token===E);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${N}\` at the same time`)}else if(C.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);f.push({token:E,fullToken:N});const P=C.run(e,N,i.match,c);if(!P)return Sa(r,NaN);u.push(P.setter),e=P.rest}else{if(E.match(Yve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");if(N==="''"?N="'":E==="'"&&(N=Kve(N)),e.indexOf(N)===0)e=e.slice(N.length);else return Sa(r,NaN)}}if(e.length>0&&Gve.test(e))return Sa(r,NaN);const h=u.map(N=>N.priority).sort((N,E)=>E-N).filter((N,E,C)=>C.indexOf(N)===E).map(N=>u.filter(E=>E.priority===N).sort((E,C)=>C.subPriority-E.subPriority)).map(N=>N[0]);let m=pr(r);if(isNaN(m.getTime()))return Sa(r,NaN);const w={};for(const N of h){if(!N.validate(m,c))return Sa(r,NaN);const E=N.set(m,w,c);Array.isArray(E)?(m=E[0],Object.assign(w,E[1])):m=E}return Sa(r,m)}function Kve(e){return e.match(Vve)[1].replace(Hve,"'")}function Xve(e){return+pr(e)<Date.now()}function U4(e,t){const r=pr(e),n=pr(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Jve(e,t){const r=pr(e),n=pr(t);return r.getFullYear()===n.getFullYear()}function Op(e){return ll(e,kK(e))}function x0(e,t){const r=+pr(e),[n,a]=[+pr(t.start),+pr(t.end)].sort((i,s)=>i-s);return r>=n&&r<=a}function IA(e,t){return Ua(e,-t)}function Wr(e,t){const n=t1e(e);let a;if(n.date){const c=r1e(n.date,2);a=n1e(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let s=0,o;if(n.time&&(s=a1e(n.time),isNaN(s)))return new Date(NaN);if(n.timezone){if(o=i1e(n.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(i+s),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+s+o)}const m_={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Qve=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,e1e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function t1e(e){const t={},r=e.split(m_.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],m_.timeZoneDelimiter.test(t.date)&&(t.date=e.split(m_.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=m_.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function r1e(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function n1e(e,t){if(t===null)return new Date(NaN);const r=e.match(Zve);if(!r)return new Date(NaN);const n=!!r[4],a=o2(r[1]),i=o2(r[2])-1,s=o2(r[3]),o=o2(r[4]),c=o2(r[5])-1;if(n)return u1e(t,o,c)?s1e(t,o,c):new Date(NaN);{const u=new Date(0);return!l1e(t,i,s)||!c1e(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,s)),u)}}function o2(e){return e?parseInt(e):1}function a1e(e){const t=e.match(Qve);if(!t)return NaN;const r=RA(t[1]),n=RA(t[2]),a=RA(t[3]);return d1e(r,n,a)?r*B4+n*xx+a*1e3:NaN}function RA(e){return e&&parseFloat(e.replace(",","."))||0}function i1e(e){if(e==="Z")return 0;const t=e.match(e1e);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return f1e(n,a)?r*(n*B4+a*xx):NaN}function s1e(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const o1e=[31,null,31,30,31,30,31,31,30,31,30,31];function $K(e){return e%400===0||e%4===0&&e%100!==0}function l1e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(o1e[t]||($K(e)?29:28))}function c1e(e,t){return t>=1&&t<=($K(e)?366:365)}function u1e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function d1e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function f1e(e,t){return t>=0&&t<=59}function MA(e,t){const r=pr(e),n=r.getFullYear(),a=r.getDate(),i=Sa(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const s=Xge(i);return r.setMonth(t,Math.min(a,s)),r}function h1e(e,t){const r=pr(e);return r.setHours(t),r}function p1e(e,t){const r=pr(e);return r.setMinutes(t),r}function wL(e,t){const r=pr(e);return isNaN(+r)?Sa(e,NaN):(r.setFullYear(t),r)}function E6(e,t){return pl(e,-t)}function wx(e,t){return NK(e,-t)}function m1e(e,t){return x1(e,-1)}function g1e({notifications:e,onClose:t,onMarkAsRead:r,onClearNotification:n}){const a=i=>{i.is_read||r(i.id)};return x(or,{className:"fixed top-16 right-4 z-50 w-96 shadow-lg border bg-card text-card-foreground",children:[" ",x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-lg font-medium",children:"Notifications"}),l(Fe,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Close notifications",children:l(Qu,{className:"h-4 w-4"})})]}),l(hr,{className:"p-0",children:x("div",{className:"max-h-[calc(100vh-10rem)] overflow-y-auto",children:[" ",e.length===0?l("p",{className:"text-sm text-muted-foreground text-center p-4",children:"No new notifications."}):e.map(i=>x("div",{className:Lt("flex flex-col border-b p-3 hover:bg-muted/50 cursor-pointer",i.is_read===!0?"opacity-70":"font-medium"),onClick:()=>a(i),role:"button",tabIndex:0,onKeyDown:s=>s.key==="Enter"&&a(i),children:[x("div",{className:"flex justify-between items-center w-full",children:[" ",l("span",{className:"text-sm flex-grow mr-2",children:i.message})," ",l(Fe,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:s=>{s.stopPropagation(),n(i.id)},"aria-label":"Clear notification",children:l(Qu,{className:"h-3 w-3"})})]}),x("div",{className:"flex justify-between items-center mt-1",children:[l("span",{className:"text-xs text-muted-foreground",children:i.created_at?Kge(new Date(i.created_at),{addSuffix:!0}):"Just now"}),i.is_read!==!0&&l("span",{title:"Mark as read",className:"text-primary"})]})]},i.id))]})})]})}const v1e=Lw("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vc({className:e,variant:t,...r}){return l("div",{className:Lt(v1e({variant:t}),e),...r})}const y1e=(e,t)=>{if(e){const r=e.split(" ");if(r.length>1)return`${r[0][0]}${r[r.length-1][0]}`.toUpperCase();if(r.length===1&&r[0].length>0)return r[0].substring(0,2).toUpperCase()}return t?t.substring(0,2).toUpperCase():"U"};function x1e({user:e}){const{toast:t}=_n(),r=Ss(),{user:n,signOut:a}=ui(),[i,s]=S.useState(""),[o,c]=S.useState(!1),{notifications:u,markAsRead:d,clearNotification:f}=W0e(),h=S.useMemo(()=>u.filter(P=>P.is_read!==!0).length,[u]),m=P=>{s(P.target.value)},w=P=>{if(P.key==="Enter"&&i.trim()){const F=i.trim();r(`/search?q=${encodeURIComponent(F)}`),s("")}},g=async()=>{try{await a(),t({title:"Logged out successfully"}),r("/login")}catch(P){console.error("Logout failed:",P),t({title:"Logout Failed",description:P.message||"An unexpected error occurred.",variant:"destructive"})}},y=()=>{c(P=>!P)},b=()=>{c(!1)};S.useEffect(()=>{const P=F=>{const L=document.getElementById("notification-panel"),W=document.getElementById("notification-trigger");L&&!L.contains(F.target)&&W&&!W.contains(F.target)&&b()};return o?document.addEventListener("mousedown",P):document.removeEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[o]);const _=e==null?void 0:e.display_name,N=e==null?void 0:e.avatar_url,E=e==null?void 0:e.email,[C,D]=S.useState("https://i.postimg.cc/j2qGSXwJ/facetslogo.png");return S.useEffect(()=>{const P=()=>{const L=localStorage.getItem("customClinicLogo");D(L||"https://i.postimg.cc/j2qGSXwJ/facetslogo.png")};P();const F=L=>{L.key==="customClinicLogo"&&P()};return window.addEventListener("storage",F),()=>{window.removeEventListener("storage",F)}},[]),x(_r,{children:[l("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:x("div",{className:"container flex h-14 items-center",children:[l("div",{className:"mr-4 hidden md:flex",children:l("div",{className:"flex items-center",children:l(Yi,{to:"/dashboard",className:"flex items-center space-x-2",children:l("img",{src:C,alt:"Facets Dental Logo",className:"h-10"})})})}),x("div",{className:"flex flex-1 items-center justify-between space-x-2 md:justify-end",children:[l("div",{className:"w-full flex-1 md:w-auto md:flex-none",children:x("div",{className:"relative",children:[l(w4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),l(ht,{placeholder:"Search...",className:"pl-8 md:w-[300px] lg:w-[400px]",value:i,onChange:m,onKeyDown:w})]})}),x("div",{className:"flex items-center gap-2",children:[x(Fe,{id:"notification-trigger",variant:"ghost",size:"icon",className:"relative","aria-label":"Notifications",onClick:y,children:[l(v4,{className:"h-4 w-4"}),h>0&&l(vc,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 justify-center rounded-full p-0 text-xs",children:h>9?"9+":h})]}),x(xpe,{children:[l(wpe,{asChild:!0,children:l(Fe,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:x(L4,{className:"h-8 w-8",children:[l(CD,{src:N||"https://syevxwuraxjpvkcclmjj.supabase.co/storage/v1/object/public/avatars/68f6a588-b802-4e33-8c6b-3de2d070d3bf-1744191950747.jpg",alt:_||E||"User"}),l(j4,{children:y1e(_,E)})]})})}),x(HY,{className:"w-56",align:"end",forceMount:!0,children:[l(GY,{className:"font-normal",children:x("div",{className:"flex flex-col space-y-1",children:[l("p",{className:"text-sm font-medium leading-none",children:_||"User Name"}),l("p",{className:"text-xs leading-none text-muted-foreground",children:E||"user@example.com"})]})}),l(m6,{}),l(k2,{asChild:!0,children:l(Yi,{to:"/profile",children:"Profile"})}),l(k2,{asChild:!0,children:l(Yi,{to:"/settings",children:"Settings"})}),l(k2,{asChild:!0,children:l(Yi,{to:"/payments-subscription",children:"Payments & Subscription"})}),l(m6,{}),l(k2,{onClick:g,className:"cursor-pointer",children:"Log out"})]})]})]})]})]})}),o&&l("div",{id:"notification-panel",className:"absolute top-0 right-0 z-50 mt-14 mr-4",children:l(g1e,{notifications:u,onClose:b,onMarkAsRead:d,onClearNotification:f})})]})}var q4="Collapsible",[w1e,BK]=es(q4),[b1e,UD]=w1e(q4),UK=S.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:s,...o}=e,[c,u]=hl({prop:n,defaultProp:a??!1,onChange:s,caller:q4});return l(b1e,{scope:r,disabled:i,contentId:jl(),open:c,onOpenToggle:S.useCallback(()=>u(d=>!d),[u]),children:l(vr.div,{"data-state":WD(c),"data-disabled":i?"":void 0,...o,ref:t})})});UK.displayName=q4;var qK="CollapsibleTrigger",WK=S.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=UD(qK,r);return l(vr.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":WD(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:Ht(e.onClick,a.onOpenToggle)})});WK.displayName=qK;var qD="CollapsibleContent",zK=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=UD(qD,e.__scopeCollapsible);return l(uo,{present:r||a.open,children:({present:i})=>l(_1e,{...n,ref:t,present:i})})});zK.displayName=qD;var _1e=S.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=e,s=UD(qD,r),[o,c]=S.useState(n),u=S.useRef(null),d=Kr(t,u),f=S.useRef(0),h=f.current,m=S.useRef(0),w=m.current,g=s.open||o,y=S.useRef(g),b=S.useRef(void 0);return S.useEffect(()=>{const _=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(_)},[]),ci(()=>{const _=u.current;if(_){b.current=b.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const N=_.getBoundingClientRect();f.current=N.height,m.current=N.width,y.current||(_.style.transitionDuration=b.current.transitionDuration,_.style.animationName=b.current.animationName),c(n)}},[s.open,n]),l(vr.div,{"data-state":WD(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:g&&a})});function WD(e){return e?"open":"closed"}var S1e=UK,N1e=WK,A1e=zK,cd="Accordion",k1e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zD,E1e,C1e]=jw(cd),[W4,YZe]=es(cd,[C1e,BK]),VD=BK(),VK=Qe.forwardRef((e,t)=>{const{type:r,...n}=e,a=n,i=n;return l(zD.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?l(D1e,{...i,ref:t}):l(O1e,{...a,ref:t})})});VK.displayName=cd;var[HK,P1e]=W4(cd),[GK,T1e]=W4(cd,{collapsible:!1}),O1e=Qe.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...s}=e,[o,c]=hl({prop:r,defaultProp:n??"",onChange:a,caller:cd});return l(HK,{scope:e.__scopeAccordion,value:Qe.useMemo(()=>o?[o]:[],[o]),onItemOpen:c,onItemClose:Qe.useCallback(()=>i&&c(""),[i,c]),children:l(GK,{scope:e.__scopeAccordion,collapsible:i,children:l(YK,{...s,ref:t})})})}),D1e=Qe.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[s,o]=hl({prop:r,defaultProp:n??[],onChange:a,caller:cd}),c=Qe.useCallback(d=>o((f=[])=>[...f,d]),[o]),u=Qe.useCallback(d=>o((f=[])=>f.filter(h=>h!==d)),[o]);return l(HK,{scope:e.__scopeAccordion,value:s,onItemOpen:c,onItemClose:u,children:l(GK,{scope:e.__scopeAccordion,collapsible:!0,children:l(YK,{...i,ref:t})})})}),[I1e,z4]=W4(cd),YK=Qe.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...s}=e,o=Qe.useRef(null),c=Kr(o,t),u=E1e(r),f=Sg(a)==="ltr",h=Ht(e.onKeyDown,m=>{var F;if(!k1e.includes(m.key))return;const w=m.target,g=u().filter(L=>{var W;return!((W=L.ref.current)!=null&&W.disabled)}),y=g.findIndex(L=>L.ref.current===w),b=g.length;if(y===-1)return;m.preventDefault();let _=y;const N=0,E=b-1,C=()=>{_=y+1,_>E&&(_=N)},D=()=>{_=y-1,_<N&&(_=E)};switch(m.key){case"Home":_=N;break;case"End":_=E;break;case"ArrowRight":i==="horizontal"&&(f?C():D());break;case"ArrowDown":i==="vertical"&&C();break;case"ArrowLeft":i==="horizontal"&&(f?D():C());break;case"ArrowUp":i==="vertical"&&D();break}const P=_%b;(F=g[P].ref.current)==null||F.focus()});return l(I1e,{scope:r,disabled:n,direction:a,orientation:i,children:l(zD.Slot,{scope:r,children:l(vr.div,{...s,"data-orientation":i,ref:c,onKeyDown:n?void 0:h})})})}),I5="AccordionItem",[R1e,HD]=W4(I5),KK=Qe.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...a}=e,i=z4(I5,r),s=P1e(I5,r),o=VD(r),c=jl(),u=n&&s.value.includes(n)||!1,d=i.disabled||e.disabled;return l(R1e,{scope:r,open:u,disabled:d,triggerId:c,children:l(S1e,{"data-orientation":i.orientation,"data-state":tX(u),...o,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?s.onItemOpen(n):s.onItemClose(n)}})})});KK.displayName=I5;var XK="AccordionHeader",JK=Qe.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=z4(cd,r),i=HD(XK,r);return l(vr.h3,{"data-orientation":a.orientation,"data-state":tX(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});JK.displayName=XK;var C6="AccordionTrigger",ZK=Qe.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=z4(cd,r),i=HD(C6,r),s=T1e(C6,r),o=VD(r);return l(zD.ItemSlot,{scope:r,children:l(N1e,{"aria-disabled":i.open&&!s.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...o,...n,ref:t})})});ZK.displayName=C6;var QK="AccordionContent",eX=Qe.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=z4(cd,r),i=HD(QK,r),s=VD(r);return l(A1e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...s,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});eX.displayName=QK;function tX(e){return e?"open":"closed"}var M1e=VK,F1e=KK,L1e=JK,rX=ZK,nX=eX;const V4=M1e,no=S.forwardRef(({className:e,...t},r)=>l(F1e,{ref:r,className:Lt("border-b",e),...t}));no.displayName="AccordionItem";const ao=S.forwardRef(({className:e,children:t,...r},n)=>l(L1e,{className:"flex",children:x(rX,{ref:n,className:Lt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,l(aD,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ao.displayName=rX.displayName;const io=S.forwardRef(({className:e,children:t,...r},n)=>l(nX,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:l("div",{className:Lt("pb-4 pt-0",e),children:t})}));io.displayName=nX.displayName;const j1e=[{name:"Dashboard",href:"/",icon:Tce},{name:"Appointments",href:"/appointments",icon:Oi},{name:"Patients",href:"/patients",icon:_4},{name:"Treatment Plans",href:"/treatment-plans",icon:b4},{name:"Patient Medical Record",href:"/patient-medical-records",icon:b5},{name:"Inventory",href:"/inventory",icon:aG,children:[{name:"Purchases",href:"/purchases"},{name:"Urgent Purchase Entry",href:"/purchases/urgent"},{name:"Invoices",href:"/inventory/invoices"},{name:"Create Adjustment",href:"/inventory/create-adjustment"},{name:"Stock Take",href:"/inventory/stock-take"}]},{name:"Assets",href:"/assets",icon:GH},{name:"Reports",href:"/reports",icon:yce},{name:"Reminders",href:"/reminders",icon:v4},{name:"Settings",href:"/settings",icon:qce},{name:"Inv. Approvals",href:"/inventory-approvals",icon:rG,roles:["admin","owner","doctor"]}],$1e=["Inventory","Assets","Reports","Reminders"];function B1e(){const e=Em(),{user:t}=ui(),r=j1e.filter(n=>!t||!t.role?!1:n.roles&&Array.isArray(n.roles)?n.roles.includes(t.role):t.role==="admin"||t.role==="owner"?!0:t.role==="doctor"?!$1e.includes(n.name):!1);return!t||r.length===0?null:l("div",{className:"hidden border-r bg-background md:block md:w-64",children:x("div",{className:"flex h-full flex-col gap-2",children:[l("div",{className:"flex h-14 items-center border-b px-4",children:x(Yi,{to:"/",className:"flex items-center gap-2 font-semibold",children:[l("img",{src:"https://i.postimg.cc/bwDhkb5H/dentalcare.png",alt:"Dental Care Logo",className:"h-12"})," "]})}),l("div",{className:"flex-1 overflow-auto py-2",children:l("nav",{className:"grid items-start px-2 text-sm font-medium",children:r.map(n=>{const a=n.icon,i=n.children&&n.children.some(s=>e.pathname.startsWith(s.href))||e.pathname.startsWith(n.href);if(n.children){const s=i?n.name:"";return l(V4,{type:"single",collapsible:!0,defaultValue:s,className:"w-full",children:x(no,{value:n.name,className:"border-b-0",children:[l(ao,{className:Lt("w-full justify-start gap-2 rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground [&[data-state=open]>svg]:rotate-180",e.pathname===n.href?"bg-secondary text-secondary-foreground":"hover:bg-muted"),children:x(Yi,{to:n.href,className:"flex items-center flex-grow gap-2",onClick:o=>o.stopPropagation(),children:[" ",l(a,{className:"h-4 w-4"}),l("span",{children:n.name})]})}),x(io,{className:"pt-1 pb-0 pl-7",children:[" ",l("nav",{className:"grid gap-1",children:n.children.map(o=>{const c=e.pathname===o.href;return l(Yi,{to:o.href,children:l(Fe,{variant:c?"secondary":"ghost",size:"sm",className:Lt("w-full justify-start gap-2 pl-2",{"bg-secondary text-secondary-foreground":c}),children:o.name})},o.href)})})]})]})},n.name)}return l(Yi,{to:n.href,children:x(Fe,{variant:i?"secondary":"ghost",className:Lt("w-full justify-start gap-2 rounded-md px-3 py-2 text-sm font-medium",{"bg-secondary text-secondary-foreground":i}),children:[l(a,{className:"h-4 w-4"}),n.name]})},n.href)})})})]})})}const aX=async()=>{const{data:e,error:t}=await $e.from("reminders").select("*").order("reminder_datetime",{ascending:!0});if(t)throw console.error("Error fetching reminders:",t),new Error("Failed to fetch reminders.");return e.map(r=>({...r,recurrence_config:typeof r.recurrence_config=="string"?JSON.parse(r.recurrence_config):r.recurrence_config||{type:"none"}}))},U1e=async e=>{const{data:t,error:r}=await $e.from("reminders").insert(e).select().single();if(r)throw console.error("Error creating reminder:",r),new Error("Failed to create reminder.");return t},iX=async(e,t)=>{const{data:r,error:n}=await $e.from("reminders").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating reminder:",n),new Error("Failed to update reminder.");return r},q1e=async e=>{const{error:t}=await $e.from("reminders").delete().eq("id",e);if(t)throw console.error("Error deleting reminder:",t),new Error("Failed to delete reminder.")},g_=60*1e3;function sX(){const{user:e}=ui(),{toast:t}=_n(),[r,n]=S.useState("Notification"in window?Notification.permission:"default"),a=S.useRef(new Map),[i,s]=S.useState(new Set),o=S.useRef(null);return S.useEffect(()=>{if(!("Notification"in window))return;const c=Notification.permission;n(c),c!=="granted"&&c!=="denied"&&Notification.requestPermission().then(u=>{n(u)})},[]),S.useEffect(()=>{if(!e)return;const c=setInterval(async()=>{try{const u=await aX(),d=new Date;u.forEach(f=>{var w;if(!f.is_active)return;let h=[];const m=new Date(f.reminder_datetime);if(((w=f.recurrence_config)==null?void 0:w.type)==="daily"){const g=W1e(f,d);g&&(h=z1e(f,g))}else(!f.recurrence_config||f.recurrence_config.type==="none")&&(m>=d&&n5(d,m)<g_?h=[m]:Xve(m)&&n5(d,m)<g_&&(h=[m]));h.forEach(g=>{const y=n5(d,g),b=`${f.id}-${g.toISOString()}`,_=a.current.has(b);if(y>=0&&y<g_&&!_){"Notification"in window&&Notification.permission==="granted"&&new Notification("Dental Care Reminder",{body:f.message,icon:"/ransferent.svg",tag:b}),t({title:"Reminder Due",description:f.message,duration:1e4}),a.current.set(b,d.getTime()),s(E=>new Set(E).add(f.id)),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{s(new Set),o.current=null},6e4);const N=d.getTime()-24*60*60*1e3;for(const[E,C]of a.current.entries())C<N&&a.current.delete(E)}})})}catch(u){console.error("Error checking reminders for notifications:",u)}},g_);return()=>{clearInterval(c)}},[e,r,t]),S.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]),{permission:r,activeReminderIds:i}}function W1e(e,t){if(!e.recurrence_config||e.recurrence_config.type!=="daily")return null;const r=new Date(e.reminder_datetime),n=e.recurrence_config.interval||1,a=new Date(r);if(a.setHours(0,0,0,0),a>t)return null;let i=a;for(;;){const s=Ua(i,n);if(s>t)break;i=s}return i}function z1e(e,t){var o;const r=new Date(e.reminder_datetime),n=((o=e.recurrence_config)==null?void 0:o.times_per_day)||1;if(n<=0)return[];const a=[],i=new Date(t);i.setHours(0,0,0,0);let s=new Date(i);if(s.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),s<r&&s.toDateString()===r.toDateString()&&(s=r),n===1)s>=r&&s.toDateString()===t.toDateString()&&a.push(s);else{const c=864e5/n;for(let u=0;u<n;u++){const d=new Date(s.getTime()+u*c);d.getDate()===t.getDate()&&d>=r&&a.push(d)}}return a}const bL=e=>new Promise(t=>setTimeout(t,e)),_L=e=>{const t=new Date;if(t.setHours(0,0,0,0),e.expiry_date){const r=new Date(e.expiry_date);if(r.setHours(0,0,0,0),r<t)return"Expired"}return(e.quantity??0)<=(e.low_stock_threshold??0)?"Low Stock":"In Stock"},V1e=30;function H1e(){const{toast:e}=_n(),{user:t}=ui(),r=S.useRef(new Set),n=S.useRef(new Set),a=S.useRef(null),i=S.useCallback((o,c)=>{if(!("Notification"in window)){console.warn("This browser does not support desktop notification");return}const u=()=>{Notification.requestPermission().then(d=>{d==="granted"?new Notification(o,c):console.warn("Desktop notification permission denied.")})};Notification.permission==="granted"?new Notification(o,c):Notification.permission!=="denied"&&u()},[]),s=S.useCallback(async o=>{if(!t)return;const c=new Date;c.setHours(0,0,0,0);const u=new Date(c);u.setDate(c.getDate()+V1e),console.log(`[InventoryAlerts] Check running. Today (normalized): ${c.toISOString()}, Threshold Date: ${u.toISOString()}`);const d=new Set,f=new Set,h=[];for(const m of o){const w=_L(m),g=m.id;if(w==="Low Stock"){const y="low_stock",b=wx(new Date,12),{count:_,error:N}=await $e.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",g).eq("item_type","inventory").eq("notification_type",y).gte("created_at",b.toISOString());if(N&&console.error("Error checking recent low stock notifications:",N),!N&&_===0){console.log(`[InventoryAlerts] PASSED low stock check for item "${m.item_name}". Queueing notification.`),d.add(g);const E=`Item "${m.item_name}" is low on stock (${m.quantity??0} remaining).`,C=`/inventory?highlight=${g}`,D=`low-stock-${g}`;h.push({title:"Low Stock Alert",description:E,variant:"warning",tag:D}),i("Low Stock Alert",{body:E,tag:D});try{const{error:P}=await $e.from("notifications").insert({user_id:t.id,message:E,link_url:C,item_id:g,item_type:"inventory",notification_type:y});if(P)throw P}catch(P){console.error("Error inserting low stock notification:",P)}}else!N&&_&&_>0&&console.log(`[InventoryAlerts] Skipped low stock notification for item "${m.item_name}" (sent recently).`)}if(m.expiry_date){const y=new Date(m.expiry_date),b=new Date(y.getFullYear(),y.getMonth(),y.getDate());if(console.log(`[InventoryAlerts] Checking expiry for item "${m.item_name}" (ID: ${g}). Expiry Date (normalized): ${b.toISOString()}`),b>=c&&b<=u){const _="expiry_soon",N=wx(new Date,12),{count:E,error:C}=await $e.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",g).eq("item_type","inventory").eq("notification_type",_).gte("created_at",N.toISOString());if(C&&console.error("Error checking recent expiry notifications:",C),!C&&E===0){console.log(`[InventoryAlerts] PASSED expiry check for item "${m.item_name}". Queueing notification.`),f.add(g);const D=`Item "${m.item_name}" is expiring on ${b.toLocaleDateString()}.`,P=`/inventory?highlight=${g}`,F=`expiry-soon-${g}`;h.push({title:"Expiry Soon Alert",description:D,variant:"default",tag:F}),i("Expiry Soon Alert",{body:D,tag:F});try{const{error:L}=await $e.from("notifications").insert({user_id:t.id,message:D,link_url:P,item_id:g,item_type:"inventory",notification_type:_});if(L)throw L}catch(L){console.error("Error inserting expiry soon notification:",L)}}else!C&&E&&E>0&&console.log(`[InventoryAlerts] Skipped expiry soon notification for item "${m.item_name}" (sent recently).`)}}}if(d.size>0&&(r.current=new Set([...r.current,...d])),f.size>0&&(n.current=new Set([...n.current,...f])),h.length>0){console.log(`[InventoryAlerts] Processing ${h.length} queued toasts...`),await bL(2e3);for(const m of h)console.log(`[InventoryAlerts] >>> Showing toast: ${m.title} - ${m.description}`),e({title:m.title,description:m.description,variant:m.variant,duration:1/0}),console.log(`[InventoryAlerts] <<< Shown toast: ${m.title}`),await bL(2e3);console.log("[InventoryAlerts] Finished processing queued toasts.")}},[e,t,i]);return S.useEffect(()=>{t&&(async()=>{try{const{data:c,error:u}=await $e.from("inventory_items").select("*");if(u)throw u;c&&s(c)}catch(c){console.error("Error fetching initial inventory for alerts:",c)}})()},[s,t]),S.useEffect(()=>{if(!$e)return;const o=c=>{const u=c.new;u&&(s([u]),_L(u)==="In Stock"&&r.current.has(u.id)&&r.current.delete(u.id))};return a.current=$e.channel("inventory_items_alerts").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},o).subscribe((c,u)=>{c==="SUBSCRIBED"||(c==="CHANNEL_ERROR"||c==="TIMED_OUT"||c==="CLOSED"?console.error(`Inventory Alert Realtime subscription ${c}:`,u):c==="CHANNEL_ERROR"?console.error("Realtime channel error, attempting to resubscribe...",u):(c==="TIMED_OUT"||c==="CLOSED")&&console.warn(`Inventory Alert Realtime subscription ${c}.`,u))}),()=>{const c=a.current;c&&($e.removeChannel(c).catch(u=>console.error("Error removing inventory alert channel:",u)),a.current=null)}},[$e,s,t]),null}const SL=e=>new Promise(t=>setTimeout(t,e)),G1e=30;function Y1e(){console.log("[AssetAlerts] Hook initializing...");const{toast:e}=_n(),{user:t}=ui(),r=S.useRef(new Set),n=S.useRef(new Set),a=S.useRef(null),i=S.useCallback((o,c)=>{if(!("Notification"in window)){console.warn("This browser does not support desktop notification");return}const u=()=>{Notification.requestPermission().then(d=>{d==="granted"?new Notification(o,c):console.warn("Desktop notification permission denied.")})};Notification.permission==="granted"?new Notification(o,c):Notification.permission!=="denied"&&u()},[]),s=S.useCallback(async o=>{if(console.log("[AssetAlerts] checkAndNotifyAssets called with:",o),!t){console.log("[AssetAlerts] checkAndNotifyAssets skipped (no user).");return}const c=new Date;c.setHours(0,0,0,0);const u=new Date(c);u.setDate(c.getDate()+G1e),console.log(`[AssetAlerts] Check running. Today (normalized): ${c.toISOString()}, Threshold Date: ${u.toISOString()}`);const d=new Set,f=new Set,h=[];for(const m of o){const w=m.id;if(m.next_maintenance_due_date){const g=new Date(m.next_maintenance_due_date),y=new Date(g.getFullYear(),g.getMonth(),g.getDate());if(console.log(`[AssetAlerts] Checking maintenance for asset "${m.asset_name}" (ID: ${w}). Due Date (normalized): ${y.toISOString()}`),y>=c&&y<=u){const b="maintenance_due",_=wx(new Date,12),{count:N,error:E}=await $e.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",w).eq("item_type","asset").eq("notification_type",b).gte("created_at",_.toISOString());if(E?console.error("Error checking recent maintenance notifications:",E):console.log(`[AssetAlerts] Maintenance Throttling Check Result for ${m.asset_name}: Count=${N}`),!E&&N===0){console.log(`[AssetAlerts] PASSED maintenance check for asset "${m.asset_name}". Triggering notification.`),d.add(w);const C=`Asset "${m.asset_name}" requires maintenance by ${y.toLocaleDateString()}.`,D=`/assets?highlight=${w}`,P=`maintenance-due-${w}`;h.push({title:"Maintenance Due Soon",description:C,variant:"default",tag:P}),i("Maintenance Due Soon",{body:C,tag:P});try{const{error:F}=await $e.from("notifications").insert({user_id:t.id,message:C,link_url:D,item_id:w,item_type:"asset",notification_type:b});if(F)throw F}catch(F){console.error("Error inserting maintenance notification:",F)}}else!E&&N&&N>0&&console.log(`[AssetAlerts] Skipped maintenance notification for asset "${m.asset_name}" (sent recently).`)}}if(m.warranty_expiry_date){const g=new Date(m.warranty_expiry_date),y=new Date(g.getFullYear(),g.getMonth(),g.getDate());if(console.log(`[AssetAlerts] Checking warranty for asset "${m.asset_name}" (ID: ${w}). Expiry Date (normalized): ${y.toISOString()}`),y>=c&&y<=u){const b="warranty_expiry",_=wx(new Date,12),{count:N,error:E}=await $e.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",w).eq("item_type","asset").eq("notification_type",b).gte("created_at",_.toISOString());if(E?console.error("Error checking recent warranty notifications:",E):console.log(`[AssetAlerts] Warranty Throttling Check Result for ${m.asset_name}: Count=${N}`),!E&&N===0){console.log(`[AssetAlerts] PASSED warranty check for asset "${m.asset_name}". Triggering notification.`),f.add(w);const C=`Warranty for asset "${m.asset_name}" expires on ${y.toLocaleDateString()}.`,D=`/assets?highlight=${w}`,P=`warranty-expiry-${w}`;h.push({title:"Warranty Expiring Soon",description:C,variant:"default",tag:P}),i("Warranty Expiring Soon",{body:C,tag:P});try{const{error:F}=await $e.from("notifications").insert({user_id:t.id,message:C,link_url:D,item_id:w,item_type:"asset",notification_type:b});if(F)throw F}catch(F){console.error("Error inserting warranty notification:",F)}}else!E&&N&&N>0&&console.log(`[AssetAlerts] Skipped warranty notification for asset "${m.asset_name}" (sent recently).`)}}}if(d.size>0&&(r.current=new Set([...r.current,...d])),f.size>0&&(n.current=new Set([...n.current,...f])),h.length>0){console.log(`[AssetAlerts] Processing ${h.length} queued toasts...`),await SL(2e3);for(const m of h)console.log(`[AssetAlerts] >>> Showing toast: ${m.title} - ${m.description}`),e({title:m.title,description:m.description,variant:m.variant,duration:1/0}),console.log(`[AssetAlerts] <<< Shown toast: ${m.title}`),await SL(2e3);console.log("[AssetAlerts] Finished processing queued toasts.")}},[e,t,i]);return S.useEffect(()=>{const o=async()=>{console.log("[AssetAlerts] Starting initial fetch...");try{const{data:c,error:u}=await $e.from("assets").select("*");if(u)throw console.error("Error fetching initial assets for alerts:",u),u;c?(console.log("[AssetAlerts] Initial fetch successful, data:",c),s(c)):console.log("[AssetAlerts] Initial fetch returned no data.")}catch{}};t&&(console.log("[AssetAlerts] User found, calling fetchInitialData."),o())},[s,t]),S.useEffect(()=>{if(!$e||!t)return;const o=u=>{console.log("[AssetAlerts] Asset change detected:",u);const d=u.new;d&&s([d])},c=`asset-alerts-channel-${t.id}`;return console.log(`[AssetAlerts] Attempting to subscribe to channel: ${c}`),a.current=$e.channel(c).on("postgres_changes",{event:"*",schema:"public",table:"assets"},o).subscribe((u,d)=>{console.log(`[AssetAlerts] Channel ${c} subscription status: ${u}`),u==="SUBSCRIBED"||(u==="CHANNEL_ERROR"||u==="TIMED_OUT"||u==="CLOSED")&&console.error(`[AssetAlerts] Asset Alert Realtime subscription ${u} on ${c}:`,d)}),()=>{const u=a.current;if(u){const d=u.topic;console.log(`[AssetAlerts] Attempting to unsubscribe from channel: ${d}`),$e.removeChannel(u).catch(f=>console.error(`[AssetAlerts] Error removing asset alert channel ${d}:`,f)).finally(()=>{a.current===u&&(a.current=null)})}}},[$e,s,t]),null}function K1e(){return sX(),H1e(),Y1e(),x("div",{className:"min-h-screen bg-background",children:[" ",x("div",{className:"flex h-screen",children:[l(B1e,{}),x("div",{className:"flex flex-col flex-1 overflow-hidden",children:[l(x1e,{}),l("main",{className:"flex-1 overflow-y-auto",children:l("div",{className:"container py-6",children:l(VH,{})})})]})]})]})}class FA extends Error{constructor(r,n,a){super(`Transaction failed during ${r}: ${n.message}`);gr(this,"operation");gr(this,"partialData");gr(this,"originalError");this.name="TransactionError",this.operation=r,this.originalError=n,this.partialData=a}}async function NL(e,t){const r=[];let n=!0,a;try{await $e.rpc("begin_transaction");for(let i=0;i<e.length;i++)try{const s=await e[i]();r.push(s)}catch(s){throw n=!1,a=new FA(`Operation ${i}`,s,r),t&&i>0,a}return await $e.rpc("commit_transaction"),{success:!0,data:r.length===1?r[0]:r}}catch(i){try{await $e.rpc("rollback_transaction")}catch(s){console.error("Transaction rollback failed:",s)}return{success:!1,error:i instanceof FA?i:new FA("Unknown",i)}}}class X1e{constructor(t=5*60*1e3){gr(this,"cache");gr(this,"defaultTTL");this.cache=new Map,this.defaultTTL=t}set(t,r,n){this.cache.set(t,{data:r,timestamp:Date.now()+(n??this.defaultTTL)})}get(t){const r=this.cache.get(t);if(r){if(r.timestamp<Date.now()){this.invalidate(t);return}return r.data}}invalidate(t){this.cache.delete(t)}invalidatePattern(t){this.cache.forEach((r,n)=>{t.test(n)&&this.invalidate(n)})}clear(){this.cache.clear()}}const er=new X1e;function GD(e,t){return $e.channel(`public:${e}`).on("postgres_changes",{event:"*",schema:"public",table:e},r=>{er.invalidatePattern(new RegExp(`^${e}`)),t(r)}).subscribe()}const Rt={storage:{async uploadFile(e,t){try{const r=e.name.split(".").pop(),n=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${r}`,{data:a,error:i}=await $e.storage.from("medical-records").upload(n,e,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:s}}=$e.storage.from("medical-records").getPublicUrl(a.path);return{path:a.path,url:s,name:e.name,size:e.size,type:e.type}}catch(r){throw console.error("Error uploading file:",r),r}},async deleteFile(e,t){try{const{error:r}=await $e.storage.from(t).remove([e]);if(r)throw r;return!0}catch(r){throw console.error(`Error deleting file from bucket ${t}:`,r),r}},async uploadInventoryPhoto(e,t){const r="inventory-photos";try{const n=e.name.split(".").pop(),a=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${n}`,{data:i,error:s}=await $e.storage.from(r).upload(a,e,{cacheControl:"3600",upsert:!1});if(s)throw s;const{data:{publicUrl:o}}=$e.storage.from(r).getPublicUrl(i.path);return{path:i.path,url:o,name:e.name,size:e.size,type:e.type}}catch(n){throw console.error(`Error uploading to ${r}:`,n),n}},async uploadAssetPhoto(e,t){const r="asset-photos";try{const n=e.name.split(".").pop(),a=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${n}`,{data:i,error:s}=await $e.storage.from(r).upload(a,e,{cacheControl:"3600",upsert:!1});if(s)throw s;const{data:{publicUrl:o}}=$e.storage.from(r).getPublicUrl(i.path);return{path:i.path,url:o,name:e.name,size:e.size,type:e.type}}catch(n){throw console.error(`Error uploading to ${r}:`,n),n}}},staff:{async getAll(){const e=er.get("staff:all");if(e)return e;const{data:t,error:r}=await $e.from("staff").select("*").order("created_at",{ascending:!1});if(r)throw r;return er.set("staff:all",t),t||[]},async getDoctors(){const e=er.get("staff:doctors");if(e)return e;const{data:t,error:r}=await $e.from("staff").select("*").eq("role","doctor").order("created_at",{ascending:!1});if(r)throw r;return er.set("staff:doctors",t),t||[]},async getAvailableDoctors(e,t){try{const r=new Date(e),n=new Date(t),a=r.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),i=`${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`,s=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`,o=await Rt.staff.getDoctors(),{data:c,error:u}=await $e.from("absences").select("staff_id").lt("start_time",t).gt("end_time",e);u&&console.error("Error fetching overlapping absences:",u);const d=new Set((c==null?void 0:c.map(h=>h.staff_id))||[]);return o.filter(h=>{if(d.has(h.id))return!1;try{let m=[];if(typeof h.working_hours=="string")m=JSON.parse(h.working_hours);else if(Array.isArray(h.working_hours))m=h.working_hours;else return!1;const w=m.find(y=>y.day.toLowerCase()===a);return!(!w||w.is_open===!1||!(i>=w.start&&s<=w.end))}catch(m){return console.error(`Error processing working hours for doctor ${h.id}:`,h.working_hours,m),!1}})}catch(r){return console.error("Error getting available doctors:",r),[]}},async create(e){typeof e.working_hours=="object"&&e.working_hours!==null&&(e.working_hours=JSON.stringify(e.working_hours));const{data:t,error:r}=await $e.from("staff").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^staff/),t},async update(e,t){const{data:r,error:n}=await $e.from("staff").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidatePattern(/^staff/),r}},absences:{async getAll(){const e="absences:all",t=er.get(e);if(t)return t;try{const{data:r,error:n}=await $e.from("absences").select("*").order("start_time",{ascending:!1});if(n)throw n;if(!r)return[];const a=await Rt.staff.getAll(),i=new Map(a.map(o=>[o.id,o])),s=r.map(o=>{const c=o.staff_id?i.get(o.staff_id):null;return{...o,staff:c?{id:c.id,first_name:c.first_name,last_name:c.last_name}:null}});return er.set(e,s),s}catch(r){throw console.error("Error in api.absences.getAll:",r),r}},async create(e){if(!e.staff_id||!e.start_time||!e.end_time)throw new Error("Missing required fields for absence creation.");if(new Date(e.end_time)<=new Date(e.start_time))throw new Error("End time must be after start time.");const{data:t,error:r}=await $e.from("absences").insert(e).select().single();if(r)throw r;if(!t)throw new Error("Absence creation returned no data");return er.invalidate("absences:all"),t},async delete(e){const{error:t}=await $e.from("absences").delete().eq("id",e);if(t)throw t;er.invalidate("absences:all")}},patients:{async schedulePatientCommunication(e){const{data:t,error:r}=await $e.from("patient_communications").insert(e).select().single();if(r)throw r;return er.invalidate(`patient_communications:${e.patient_id}`),t},async getPatientCommunications(e){const t=`patient_communications:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("patient_communications").select("*").eq("patient_id",e).order("created_at",{ascending:!1});if(a)throw a;return er.set(t,n),n||[]},async generateTreatmentPlan(e,t){var r,n;try{const[a,i]=await Promise.all([Rt.patients.getMedicalRecords(e),Rt.patients.getTreatmentPlans(e)]),s=[],o=[],c=await $e.auth.getSession(),u=(n=(r=c==null?void 0:c.data)==null?void 0:r.session)==null?void 0:n.access_token;if(!u)throw new Error("User not authenticated");const d=await fetch("/functions/v1/treatment-ai",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({patientId:e,currentIssue:t,medicalHistory:a,previousTreatments:i,assessments:s,diagnosticImages:o})});if(!d.ok)throw new Error("Failed to generate treatment plan");return await d.json()}catch(a){throw console.error("Error generating treatment plan:",a),a}},async getAll(){const e="patients:all",t=er.get("patients:all");if(t)return t;const{data:r,error:n}=await $e.from("patients").select("*").order("created_at",{ascending:!1});if(n)throw n;return er.set(e,r),r},async getById(e){const t=`patients:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("patients").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&er.set(t,n),n},async search(e){const{data:t,error:r}=await $e.from("patients").select().or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,phone.ilike.%${e}%,registration_number.ilike.%${e}%`).order("created_at",{ascending:!1});if(r)throw r;return t},async create(e){const{data:t,error:r}=await $e.from("patients").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^patients/),t},async update(e,t){const{data:r,error:n}=await $e.from("patients").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidate(`patients:${e}`),er.invalidate("patients:all"),r},async getMedicalRecords(e){const t=e?`medical_records:${e}`:"medical_records:all",r=er.get(t);if(r)return r;let n=$e.from("medical_records").select(`
          *,
          staff:created_by ( first_name, last_name ),
          medical_record_teeth (
            teeth ( id, description )
          )
        `).order("record_date",{ascending:!1});e&&(n=n.eq("patient_id",e));const{data:a,error:i}=await n;if(i)throw i;er.set(t,a);const s=(a==null?void 0:a.map(o=>{const c=Array.isArray(o.medical_record_teeth)?o.medical_record_teeth.map(d=>d.teeth).filter(d=>d!==null):[],u={...o};return delete u.medical_record_teeth,u.teeth=c,u}))||[];return console.log("API getMedicalRecords processedData:",s),s},async getTreatmentPlans(e=null){let t=$e.from("treatment_plans").select(`
          *,
          treatments (*),
          metadata:treatment_plan_metadata(*),
          visits:treatment_visits(*),
          teeth:treatment_plan_teeth(
            tooth_id
          ),
          patient:patients!treatment_plans_patient_id_fkey (
            id,
            first_name,
            last_name,
            gender,
            age,
            registration_number
          )
        `).order("created_at",{ascending:!1});e&&(t=t.eq("patient_id",e));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching treatment plans:",n),n;return r==null?void 0:r.map(i=>({...i,patient:i.patient?{full_name:`${i.patient.first_name} ${i.patient.last_name}`,age:i.patient.age,gender:i.patient.gender,registration_number:i.patient.registration_number}:void 0}))},async createMedicalRecord(e,t){const n={...e,record_type:(o=>{switch(o){case"consultation":return"examination";case"diagnosis":return"examination";case"treatment":return"procedure";case"prescription":return"prescription";case"lab_result":return"lab_result";case"other":return"note";default:return"note"}})(e.record_type)};console.log("API inserting mapped record:",n);const{data:a,error:i}=await $e.from("medical_records").insert(n).select().single();if(i)throw console.error("Error creating medical record:",i),i;if(!a)throw new Error("Failed to create medical record: No data returned.");const s=a.id;if(t&&t.length>0){const o=t.map(u=>({medical_record_id:s,tooth_id:u})),{error:c}=await $e.from("medical_record_teeth").insert(o);if(c)throw console.error("Error linking teeth to medical record:",c),c}return e.patient_id&&er.invalidate(`medical_records:${e.patient_id}`),er.invalidate("medical_records:all"),a},async updateMedicalRecord(e,t){const{data:r,error:n}=await $e.from("medical_records").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidate(`medical_records:${t.patient_id}`),er.invalidate("medical_records:all"),r},async deleteMedicalRecord(e){const{data:t}=await $e.from("medical_records").select("patient_id").eq("id",e).single(),{error:r}=await $e.from("medical_records").delete().eq("id",e);if(r)throw r;t&&er.invalidate(`medical_records:${t.patient_id}`),er.invalidate("medical_records:all")},async getPatientDentalHistoryTeeth(e){if(!e)return console.warn("getPatientDentalHistoryTeeth called without patientId"),[];const t=`patient_dental_history_teeth:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("patient_dental_history_teeth").select("tooth_id, conditions").eq("patient_id",e);if(a)throw console.error(`Error fetching dental history teeth for patient ${e}:`,a),a;const i=(n||[]).map(s=>({tooth_id:s.tooth_id,conditions:Array.isArray(s.conditions)?s.conditions.filter(o=>typeof o=="string"):[]}));return er.set(t,i,60*1e3),console.log(`Fetched dental history teeth list for patient ${e}:`,JSON.stringify(i)),i},async savePatientDentalHistoryTeethWithConditions(e,t){if(!e)throw new Error("Patient ID is required to save dental history teeth with conditions.");console.log(`Saving dental history teeth map (with conditions) for patient ${e}:`,JSON.stringify(t));const r=Object.keys(t).map(Number),n=$e.from("patient_dental_history_teeth").delete().eq("patient_id",e);r.length>0&&n.not("tooth_id","in",`(${r.join(",")})`);const{error:a}=await n;if(a)throw console.error(`Error deleting old dental history teeth (with conditions) for patient ${e}:`,a),a;if(console.log(`Deleted stale dental history teeth (with conditions) for patient ${e}.`),r.length>0){const i=r.map(o=>{var c;return{patient_id:e,tooth_id:o,conditions:(c=t[o])!=null&&c.conditions&&Array.isArray(t[o].conditions)?t[o].conditions:["healthy"]}}),{error:s}=await $e.from("patient_dental_history_teeth").upsert(i,{onConflict:"patient_id, tooth_id"});if(s)throw console.error(`Error upserting dental history teeth (with conditions) for patient ${e}:`,s),s;console.log(`Upserted dental history teeth (with conditions) for patient ${e}.`)}else console.log(`No dental history teeth in map for patient ${e}, only performed delete (with conditions).`);return er.invalidate(`patient_dental_history_teeth:${e}`),{success:!0}},async getPatientDentalHistoryTeethMap(e){if(!e)return console.warn("getPatientDentalHistoryTeethMap called without patientId"),{};const{data:t,error:r}=await $e.from("patient_dental_history_teeth").select("tooth_id, conditions").eq("patient_id",e);if(r)throw console.error(`Error fetching dental history teeth map for patient ${e}:`,r),r;const n={};return t&&t.forEach(a=>{const i=Array.isArray(a.conditions)&&a.conditions.length>0?a.conditions:["healthy"];n[a.tooth_id]={conditions:i}}),console.log(`Fetched and formatted dental history teeth map for patient ${e}:`,JSON.stringify(n)),n},async getPatientToothConditions(e){if(!e)return console.warn("getPatientToothConditions called without patientId"),[];const t=`patient_tooth_conditions:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("patient_tooth_conditions").select("*").eq("patient_id",e);if(a)throw console.error(`Error fetching tooth conditions for patient ${e}:`,a),a;const i=n||[];return er.set(t,i,60*1e3),i},async savePatientToothConditionsDetailed(e,t){if(!e)throw new Error("Patient ID is required for savePatientToothConditionsDetailed.");if(!Array.isArray(t))throw new Error("Invalid conditions input: must be an array.");console.log(`Executing savePatientToothConditionsDetailed for patient ${e} with conditions:`,t);const n=await NL([async()=>{console.log(`Transaction Step 1: Deleting existing conditions for patient ${e}`);const{error:a}=await $e.from("patient_tooth_conditions").delete().eq("patient_id",e);if(a)throw console.error(`Transaction Step 1 FAILED: Error deleting conditions for patient ${e}:`,a),a;return console.log(`Transaction Step 1 SUCCESS: Deleted existing conditions for patient ${e}`),!0},async()=>{if(t.length===0)return console.log(`Transaction Step 2: No new conditions to insert for patient ${e}. Skipping insert.`),[];const a=t.map(o=>({...o,patient_id:e}));console.log(`Transaction Step 2: Inserting ${a.length} new conditions for patient ${e}:`,a);const{data:i,error:s}=await $e.from("patient_tooth_conditions").insert(a).select();if(s)throw console.error(`Transaction Step 2 FAILED: Error inserting conditions for patient ${e}:`,s),s;return console.log(`Transaction Step 2 SUCCESS: Inserted conditions for patient ${e}. Result:`,i),i||[]}]);if(n.success)return console.log(`Transaction successful for patient ${e}.`),er.invalidate(`patient_tooth_conditions:${e}`),{success:!0,data:n.data?n.data[1]:[]};throw console.error(`Transaction failed for patient ${e}:`,n.error),n.error||new Error("Unknown transaction error saving tooth conditions.")},async createTreatmentPlan(e,t){const{data:r,error:n}=await $e.from("treatment_plans").insert(e).select().single();if(n)return console.error("Error creating treatment plan:",n),{error:n};if(!r)return{error:new Error("Failed to create treatment plan: No data returned.")};if(t&&t.length>0){const a=t.map(s=>({treatment_plan_id:r.id,tooth_id:s})),{error:i}=await $e.from("treatment_plan_teeth").insert(a);if(i)return console.error("Error linking teeth to treatment plan:",i),{error:i}}return{data:r,error:null}},async getVisitsByPlanId(e){if(!e)return console.warn("[api.patients.getVisitsByPlanId] planId is required, exiting."),[];console.log(`[api.patients.getVisitsByPlanId] Attempting for planId: ${e} (Querying 'treatments' table)`);const t=`treatments_as_visits:plan:${e}`,r=er.get(t);if(r)return console.log(`[api.patients.getVisitsByPlanId] Cache hit for planId: ${e}`,r),r;console.log(`[api.patients.getVisitsByPlanId] Cache miss for planId: ${e}`),console.log(`[api.patients.getVisitsByPlanId] PRE-SUPABASE call for planId: ${e} (Targeting 'treatments')`);let n,a;try{const s=await $e.from("treatments").select("id").eq("plan_id",e);n=s.data,a=s.error,console.log(`[api.patients.getVisitsByPlanId] POST-SUPABASE call for planId: ${e}. Response data from 'treatments':`,n,"Response error:",a)}catch(s){throw console.error(`[api.patients.getVisitsByPlanId] NATIVE ERROR during Supabase call for planId ${e} (Targeting 'treatments'):`,s),s}if(a)throw console.error(`[api.patients.getVisitsByPlanId] Supabase returned error for plan ${e} (Targeting 'treatments'):`,a),a;const i=n||[];return console.log(`[api.patients.getVisitsByPlanId] Result for planId ${e} from 'treatments' before caching and returning:`,i),er.set(t,i),i},async createTreatmentPlanMetadata(e){const{data:t,error:r}=await $e.from("treatment_plan_metadata").insert(e).select().single();return{data:t,error:r}},async createTreatmentVisit(e){const t={...e,scheduled_date:e.scheduled_date?e.scheduled_date.toISOString().split("T")[0]:null},{data:r,error:n}=await $e.from("treatment_visits").insert([t]).select().single();if(n)throw n;return r},async createTreatmentVisitsBatch(e){const{data:t,error:r}=await $e.from("treatment_visits").insert(e).select();return r?(console.error("Error in createTreatmentVisitsBatch:",r),{data:null,error:r}):{data:t,error:null}},async getTreatmentPlanDetails(e){const{data:t,error:r}=await $e.from("treatment_plans").select(`
          *,
          metadata:treatment_plan_metadata(*),
          visits:treatment_visits(*),
          teeth:treatment_plan_teeth(
            tooth_id
          )
        `).eq("id",e).single();return r?(console.error("Error fetching treatment plan details:",r),{error:r}):{data:t,error:null}},async updateTreatmentPlan(e,t){const{data:r,error:n}=await $e.from("treatment_plans").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidatePattern(/^treatment_plans/),r},async deleteTreatmentPlan(e){const{data:t}=await $e.from("treatment_plans").select("patient_id").eq("id",e).single(),{error:r}=await $e.from("treatment_plans").delete().eq("id",e);if(r)throw r;t&&er.invalidate(`treatment_plans:${t.patient_id}`),er.invalidate("treatment_plans:all")},async createTreatmentPlanWithTreatments(e,t){const r=[async()=>{const{data:a,error:i}=await $e.from("treatment_plans").insert(e).select().single();if(i)throw i;if(!a)throw new Error("Treatment plan creation returned no data");return a},async a=>{if(!a||!a.id)throw new Error("Failed to get ID from created treatment plan");const i=t.map(c=>({...c,plan_id:a.id}));if(i.length===0)return[];const{data:s,error:o}=await $e.from("treatments").insert(i).select();if(o)throw o;if(!s)throw new Error("Treatment creation returned no data");return s}],n=await NL([()=>r[0](),()=>r[1]({})]);if(n.success&&n.data){const a=n.data[0];a&&a.patient_id&&(er.invalidate(`treatment_plans:${a.patient_id}`),er.invalidate("treatment_plans:all"))}return n},async createTreatment(e){const{data:t,error:r}=await $e.from("treatments").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^treatment_plans/),t},async updateTreatment(e,t){const{data:r,error:n}=await $e.from("treatments").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidatePattern(/^treatment_plans/),r},async deleteTreatment(e){const{error:t}=await $e.from("treatments").delete().eq("id",e);if(t)throw t;er.invalidatePattern(/^treatment_plans/)},async uploadProfilePhoto(e,t){try{const r=await Rt.storage.uploadFile(e,t);return await Rt.patients.update(t,{profile_photo_url:r.url}),r}catch(r){throw console.error("Error uploading profile photo:",r),r}},async uploadSignature(e,t){try{const r=await Rt.storage.uploadFile(e,t);return await Rt.patients.update(t,{signature_url:r.url}),r}catch(r){throw console.error("Error uploading signature:",r),r}},async addDocument(e,t,r,n=""){try{const a=await Rt.storage.uploadFile(e,t),i=await Rt.patients.getById(t);if(!i)throw new Error("Patient not found");const s=Array.isArray(i.documents)?i.documents:[];return s.push({...a,docType:r,notes:n,dateAdded:new Date().toISOString()}),await Rt.patients.update(t,{documents:s}),a}catch(a){throw console.error("Error adding document:",a),a}},async removeDocument(e,t){try{const r=await Rt.patients.getById(e);if(!r)throw new Error("Patient not found");const n=(Array.isArray(r.documents)?r.documents:[]).filter(a=>a.path!==t);return await Rt.patients.update(e,{documents:n}),await Rt.storage.deleteFile(t,"medical-records"),!0}catch(r){throw console.error("Error removing document:",r),r}},async getTreatmentVisitById(e){const t=`treatment_visit:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("treatment_visits").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw console.error("Error fetching treatment visit by ID:",a),a;return n&&er.set(t,n),n},async savePatientDentalHistoryTeethWithConditions(e,t){if(!e)throw new Error("Patient ID is required to save dental history teeth with conditions.");console.log(`Saving dental history teeth map (with conditions) for patient ${e}:`,JSON.stringify(t));const r=Object.keys(t).map(Number),n=$e.from("patient_dental_history_teeth").delete().eq("patient_id",e);r.length>0&&n.not("tooth_id","in",`(${r.join(",")})`);const{error:a}=await n;if(a)throw console.error(`Error deleting old dental history teeth (with conditions) for patient ${e}:`,a),a;if(console.log(`Deleted stale dental history teeth (with conditions) for patient ${e}.`),r.length>0){const i=r.map(o=>{var c;return{patient_id:e,tooth_id:o,conditions:(c=t[o])!=null&&c.conditions&&Array.isArray(t[o].conditions)?t[o].conditions:["healthy"]}}),{error:s}=await $e.from("patient_dental_history_teeth").upsert(i,{onConflict:"patient_id, tooth_id"});if(s)throw console.error(`Error upserting dental history teeth (with conditions) for patient ${e}:`,s),s;console.log(`Upserted dental history teeth (with conditions) for patient ${e}.`)}else console.log(`No dental history teeth in map for patient ${e}, only performed delete (with conditions).`);return er.invalidate(`patient_dental_history_teeth:${e}`),{success:!0}}},inventory:{async getAll(){const e="inventory:all",t=er.get(e);if(t)return t;const{data:r,error:n}=await $e.from("inventory_items").select("*").order("created_at",{ascending:!1});if(n)throw n;return er.set(e,r||[]),r||[]},async getById(e){const t=`inventory:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("inventory_items").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&er.set(t,n),n},async create(e){const{data:t,error:r}=await $e.from("inventory_items").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^inventory/),t},async update(e,t){const{data:r,error:n}=await $e.from("inventory_items").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidate(`inventory:${e}`),er.invalidate("inventory:all"),r},async delete(e){const t=await Rt.inventory.getById(e);if(t!=null&&t.photo_url)try{const a=new URL(t.photo_url).pathname.split("/inventory-photos/")[1];a&&await Rt.storage.deleteFile(a,"inventory-photos")}catch(n){console.error("Error parsing/deleting inventory photo URL:",n)}const{error:r}=await $e.from("inventory_items").delete().eq("id",e);if(r)throw r;er.invalidate(`inventory:${e}`),er.invalidate("inventory:all")},async uploadPhoto(e,t){const r=await Rt.storage.uploadInventoryPhoto(e,t);return await Rt.inventory.update(t,{photo_url:r.url}),r}},assets:{async getAll(){const e="assets:all",t=er.get(e);if(t)return t;const{data:r,error:n}=await $e.from("assets").select("*").order("created_at",{ascending:!1});if(n)throw n;return er.set(e,r||[]),r||[]},async getById(e){const t=`assets:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("assets").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&er.set(t,n),n},async create(e){const{data:t,error:r}=await $e.from("assets").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^assets/),t},async update(e,t){const{data:r,error:n}=await $e.from("assets").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidate(`assets:${e}`),er.invalidate("assets:all"),r},async delete(e){const t=await Rt.assets.getById(e);if(t!=null&&t.photo_url)try{const a=new URL(t.photo_url).pathname.split("/asset-photos/")[1];a&&await Rt.storage.deleteFile(a,"asset-photos")}catch(n){console.error("Error parsing/deleting asset photo URL:",n)}const{error:r}=await $e.from("assets").delete().eq("id",e);if(r)throw r;er.invalidate(`assets:${e}`),er.invalidate("assets:all")},async uploadPhoto(e,t){const r=await Rt.storage.uploadAssetPhoto(e,t);return await Rt.assets.update(t,{photo_url:r.url}),r}},communications:{async schedule(e){var t,r;try{const n=await $e.auth.getSession(),a=(r=(t=n==null?void 0:n.data)==null?void 0:t.session)==null?void 0:r.access_token;a||console.warn("No access token found for scheduling communication.");const i=await fetch("/functions/v1/patient-communication",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify(e)});if(!i.ok){const o=await i.json();throw new Error(o.error||`Failed to schedule communication: ${i.statusText}`)}const s=await i.json();return console.log("Communication scheduled successfully:",s),s}catch(n){throw console.error("Error scheduling communication:",n),n}},async cancelByAppointment(e){var t,r;try{const n=await $e.auth.getSession(),a=(r=(t=n==null?void 0:n.data)==null?void 0:t.session)==null?void 0:r.access_token;a||console.warn("No access token found for cancelling communication.");const i=await fetch("/functions/v1/patient-communication/cancel-by-appointment",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify({appointmentId:e})});if(!i.ok){const o=await i.json();throw new Error(o.error||`Failed to cancel communications: ${i.statusText}`)}const s=await i.json();return console.log(`Communications cancellation requested for appointment ${e}:`,s),s}catch(n){throw console.error(`Error cancelling communications for appointment ${e}:`,n),n}}},appointments:{async getAll(){const e="appointments:all",t=er.get("appointments:all");if(t)return t;const{data:r,error:n}=await $e.from("appointments").select(`
          *,
          patients (id, first_name, last_name, email, phone),
          staff (id, first_name, last_name, role) 
        `).order("start_time",{ascending:!0});if(n)throw n;return er.set(e,r),r||[]},async getByDateRange(e,t){const r=`appointments:range:${e}:${t}`,n=er.get("appointments:range");if(n)return n;const{data:a,error:i}=await $e.from("appointments").select(`
         *,
         patients (id, first_name, last_name, email, phone),
         staff (id, first_name, last_name, role, specialization)
       `).gte("start_time",e).lte("start_time",t).order("start_time",{ascending:!0});if(i)throw i;return er.set(r,a,60*1e3),a||[]},async getByPatientId(e){const t=`appointments:patient:${e}`,r=er.get(t);if(r)return r;const{data:n,error:a}=await $e.from("appointments").select(`
          *,
          patients (id, first_name, last_name),
          staff (id, first_name, last_name)
        `).eq("patient_id",e).order("start_time",{ascending:!1});if(a)throw a;return er.set(t,n||[],60*1e3),n||[]},async create(e){const{data:t,error:r}=await $e.from("appointments").insert(e).select().single();if(r)throw r;return er.invalidatePattern(/^appointments/),t},async update(e,t){const{data:r,error:n}=await $e.from("appointments").update(t).eq("id",e).select().single();if(n)throw n;return er.invalidatePattern(/^appointments/),r},async cancel(e){const{data:t,error:r}=await $e.from("appointments").update({status:"cancelled"}).eq("id",e).select().single();if(r)throw r;return er.invalidatePattern(/^appointments/),t},async getAppointmentsByTreatmentIds(e){if(!e||e.length===0)return[];const{data:t,error:r}=await $e.from("appointments").select(`
          *,
          staff:staff_id (
            id,
            first_name,
            last_name,
            role,
            specialization
          )
        `).in("treatment_id",e);if(r)throw console.error("Error fetching appointments by treatment IDs:",r),r;return t||[]}},settings:{async get(){const e="clinic_settings",t=er.get(e);if(t)return t;const{data:r,error:n}=await $e.from("clinic_settings").select().order("created_at",{ascending:!1}).limit(1);if(n&&n.code!=="PGRST116")throw n;const a=(r==null?void 0:r[0])||{id:"",name:"DentalCare Pro",address:"123 Healthcare Avenue",phone:"+1234567890",email:"info@dentalcarepro.com",website:"https://dentalcarepro.com",working_hours:[{day:"monday",start:"09:00",end:"17:00",is_open:!0},{day:"tuesday",start:"09:00",end:"17:00",is_open:!0},{day:"wednesday",start:"09:00",end:"17:00",is_open:!0},{day:"thursday",start:"09:00",end:"17:00",is_open:!0},{day:"friday",start:"09:00",end:"17:00",is_open:!0},{day:"saturday",start:"10:00",end:"14:00",is_open:!1},{day:"sunday",start:"10:00",end:"14:00",is_open:!1}],notification_preferences:{reminder_time:"24h",system_updates:!0,sms_notifications:!0,email_notifications:!0,appointment_reminders:!0},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return er.set(e,a),a},async update(e){if(!e.id){const i={...e,name:e.name||"Default Clinic Name"},{data:s,error:o}=await $e.from("clinic_settings").insert(i).select().single();if(o)throw o;return er.invalidate("clinic_settings"),s}const{id:t,...r}=e,{data:n,error:a}=await $e.from("clinic_settings").update(r).eq("id",t).select().single();if(a)throw a;return er.invalidate("clinic_settings"),n}},async getTreatmentMatrixOptions(){const e="treatmentMatrixOptionsPairs",t=er.get(e);if(t)return t;try{const{data:r,error:n}=await $e.from("ai_treatment_planning_matrix").select("domain, condition").not("domain","is",null).not("condition","is",null);if(n)throw n;const a=r?Array.from(new Map(r.map(s=>[`${s.domain}-${s.condition}`,s])).values()):[];a.sort((s,o)=>s.domain<o.domain?-1:s.domain>o.domain?1:s.condition<o.condition?-1:s.condition>o.condition?1:0);const i=a;return er.set(e,i,60*60*1e3),i}catch(r){return console.error("Error fetching treatment matrix options pairs:",r),[]}},async getMatrixDetails(e,t){const r=`matrixDetails:${e}:${t}`,n=er.get(r);if(n!==void 0)return n;try{const{data:a,error:i}=await $e.from("ai_treatment_planning_matrix").select("*").eq("domain",e).eq("condition",t).limit(1).maybeSingle();if(i&&i.code!=="PGRST116")throw i;return er.set(r,a,5*60*1e3),a}catch(a){return console.error(`Error fetching matrix details for ${e}/${t}:`,a),null}},async getVisitsByPlanId(e){if(!e)return[];const{data:t,error:r}=await $e.from("treatment_visits").select("id").eq("treatment_plan_id",e);if(r)throw console.error(`Error fetching visits for plan ${e}:`,r),r;return t||[]},async uploadProfilePhoto(e,t){try{const r=await Rt.storage.uploadFile(e,t);return await Rt.patients.update(t,{profile_photo_url:r.url}),r}catch(r){throw console.error("Error uploading profile photo:",r),r}},async uploadSignature(e,t){try{const r=await Rt.storage.uploadFile(e,t);return await Rt.patients.update(t,{signature_url:r.url}),r}catch(r){throw console.error("Error uploading signature:",r),r}},async addDocument(e,t,r,n=""){try{const a=await Rt.storage.uploadFile(e,t),i=await Rt.patients.getById(t);if(!i)throw new Error("Patient not found");const s=Array.isArray(i.documents)?i.documents:[];return s.push({...a,docType:r,notes:n,dateAdded:new Date().toISOString()}),await Rt.patients.update(t,{documents:s}),a}catch(a){throw console.error("Error adding document:",a),a}},async removeDocument(e,t){try{const r=await Rt.patients.getById(e);if(!r)throw new Error("Patient not found");const n=(Array.isArray(r.documents)?r.documents:[]).filter(a=>a.path!==t);return await Rt.patients.update(e,{documents:n}),await Rt.storage.deleteFile(t,"medical-records"),!0}catch(r){throw console.error("Error removing document:",r),r}}};function Fa({heading:e,text:t,children:r,className:n}){return x("div",{className:Lt("grid gap-1",n),children:[l("h1",{className:"text-2xl font-semibold tracking-tight",children:e}),t&&l("p",{className:"text-muted-foreground",children:t}),r]})}function P6(e,[t,r]){return Math.min(r,Math.max(t,e))}function H4(e){const t=S.useRef({value:e,previous:e});return S.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var oX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),J1e="VisuallyHidden",G4=S.forwardRef((e,t)=>l(vr.span,{...e,ref:t,style:{...oX,...e.style}}));G4.displayName=J1e;var Z1e=G4,Q1e=[" ","Enter","ArrowUp","ArrowDown"],eye=[" ","Enter"],tg="Select",[Y4,K4,tye]=jw(tg),[xy,KZe]=es(tg,[tye,Cm]),X4=Cm(),[rye,Tm]=xy(tg),[nye,aye]=xy(tg),lX=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:w}=e,g=X4(t),[y,b]=S.useState(null),[_,N]=S.useState(null),[E,C]=S.useState(!1),D=Sg(u),[P,F]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:tg}),[L,W]=hl({prop:s,defaultProp:o,onChange:c,caller:tg}),T=S.useRef(null),R=y?w||!!y.closest("form"):!0,[j,Y]=S.useState(new Set),Z=Array.from(j).map(re=>re.props.value).join(";");return l(P4,{...g,children:x(rye,{required:m,scope:t,trigger:y,onTriggerChange:b,valueNode:_,onValueNodeChange:N,valueNodeHasChildren:E,onValueNodeHasChildrenChange:C,contentId:jl(),value:L,onValueChange:W,open:P,onOpenChange:F,dir:D,triggerPointerDownPosRef:T,disabled:h,children:[l(Y4.Provider,{scope:t,children:l(nye,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback(re=>{Y(z=>new Set(z).add(re))},[]),onNativeOptionRemove:S.useCallback(re=>{Y(z=>{const q=new Set(z);return q.delete(re),q})},[]),children:r})}),R?x(DX,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:L,onChange:re=>W(re.target.value),disabled:h,form:w,children:[L===void 0?l("option",{value:""}):null,Array.from(j)]},Z):null]})})};lX.displayName=tg;var cX="SelectTrigger",uX=S.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=X4(r),s=Tm(cX,r),o=s.disabled||n,c=Kr(t,s.onTriggerChange),u=K4(r),d=S.useRef("touch"),[f,h,m]=RX(g=>{const y=u().filter(N=>!N.disabled),b=y.find(N=>N.value===s.value),_=MX(y,g,b);_!==void 0&&s.onValueChange(_.value)}),w=g=>{o||(s.onOpenChange(!0),m()),g&&(s.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return l(Uw,{asChild:!0,...i,children:l(vr.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":IX(s.value)?"":void 0,...a,ref:c,onClick:Ht(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&w(g)}),onPointerDown:Ht(a.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(w(g),g.preventDefault())}),onKeyDown:Ht(a.onKeyDown,g=>{const y=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(y&&g.key===" ")&&Q1e.includes(g.key)&&(w(),g.preventDefault())})})})});uX.displayName=cX;var dX="SelectValue",fX=S.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:s="",...o}=e,c=Tm(dX,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Kr(t,c.onValueNodeChange);return ci(()=>{u(d)},[u,d]),l(vr.span,{...o,ref:f,style:{pointerEvents:"none"},children:IX(c.value)?l(_r,{children:s}):i})});fX.displayName=dX;var iye="SelectIcon",hX=S.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return l(vr.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});hX.displayName=iye;var sye="SelectPortal",pX=e=>l(gy,{asChild:!0,...e});pX.displayName=sye;var rg="SelectContent",mX=S.forwardRef((e,t)=>{const r=Tm(rg,e.__scopeSelect),[n,a]=S.useState();if(ci(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?uy.createPortal(l(gX,{scope:e.__scopeSelect,children:l(Y4.Slot,{scope:e.__scopeSelect,children:l("div",{children:e.children})})}),i):null}return l(vX,{...e,ref:t})});mX.displayName=rg;var Mu=10,[gX,Om]=xy(rg),oye="SelectContentImpl",lye=lm("SelectContent.RemoveScroll"),vX=S.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:y,...b}=e,_=Tm(rg,r),[N,E]=S.useState(null),[C,D]=S.useState(null),P=Kr(t,oe=>E(oe)),[F,L]=S.useState(null),[W,T]=S.useState(null),R=K4(r),[j,Y]=S.useState(!1),Z=S.useRef(!1);S.useEffect(()=>{if(N)return D4(N)},[N]),N4();const re=S.useCallback(oe=>{const[de,...V]=R().map(te=>te.ref.current),[se]=V.slice(-1),fe=document.activeElement;for(const te of oe)if(te===fe||(te==null||te.scrollIntoView({block:"nearest"}),te===de&&C&&(C.scrollTop=0),te===se&&C&&(C.scrollTop=C.scrollHeight),te==null||te.focus(),document.activeElement!==fe))return},[R,C]),z=S.useCallback(()=>re([F,N]),[re,F,N]);S.useEffect(()=>{j&&z()},[j,z]);const{onOpenChange:q,triggerPointerDownPosRef:B}=_;S.useEffect(()=>{if(N){let oe={x:0,y:0};const de=se=>{var fe,te;oe={x:Math.abs(Math.round(se.pageX)-(((fe=B.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(se.pageY)-(((te=B.current)==null?void 0:te.y)??0))}},V=se=>{oe.x<=10&&oe.y<=10?se.preventDefault():N.contains(se.target)||q(!1),document.removeEventListener("pointermove",de),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",V,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",V,{capture:!0})}}},[N,q,B]),S.useEffect(()=>{const oe=()=>q(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[q]);const[G,Q]=RX(oe=>{const de=R().filter(fe=>!fe.disabled),V=de.find(fe=>fe.ref.current===document.activeElement),se=MX(de,oe,V);se&&setTimeout(()=>se.ref.current.focus())}),O=S.useCallback((oe,de,V)=>{const se=!Z.current&&!V;(_.value!==void 0&&_.value===de||se)&&(L(oe),se&&(Z.current=!0))},[_.value]),J=S.useCallback(()=>N==null?void 0:N.focus(),[N]),X=S.useCallback((oe,de,V)=>{const se=!Z.current&&!V;(_.value!==void 0&&_.value===de||se)&&T(oe)},[_.value]),ne=n==="popper"?T6:yX,ie=ne===T6?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:y}:{};return l(gX,{scope:r,content:N,viewport:C,onViewportChange:D,itemRefCallback:O,selectedItem:F,onItemLeave:J,itemTextRefCallback:X,focusSelectedItem:z,selectedItemText:W,position:n,isPositioned:j,searchRef:G,children:l(Ww,{as:lye,allowPinchZoom:!0,children:l($w,{asChild:!0,trapped:_.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:Ht(a,oe=>{var de;(de=_.trigger)==null||de.focus({preventScroll:!0}),oe.preventDefault()}),children:l(Ng,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:l(ne,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:oe=>oe.preventDefault(),...b,...ie,onPlaced:()=>Y(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ht(b.onKeyDown,oe=>{const de=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!de&&oe.key.length===1&&Q(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let se=R().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const fe=oe.target,te=se.indexOf(fe);se=se.slice(te+1)}setTimeout(()=>re(se)),oe.preventDefault()}})})})})})})});vX.displayName=oye;var cye="SelectItemAlignedPosition",yX=S.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Tm(rg,r),s=Om(rg,r),[o,c]=S.useState(null),[u,d]=S.useState(null),f=Kr(t,P=>d(P)),h=K4(r),m=S.useRef(!1),w=S.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:b,focusSelectedItem:_}=s,N=S.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&g&&y&&b){const P=i.trigger.getBoundingClientRect(),F=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),W=b.getBoundingClientRect();if(i.dir!=="rtl"){const fe=W.left-F.left,te=L.left-fe,ke=P.left-te,Re=P.width+ke,Ce=Math.max(Re,F.width),ve=window.innerWidth-Mu,Ge=P6(te,[Mu,Math.max(Mu,ve-Ce)]);o.style.minWidth=Re+"px",o.style.left=Ge+"px"}else{const fe=F.right-W.right,te=window.innerWidth-L.right-fe,ke=window.innerWidth-P.right-te,Re=P.width+ke,Ce=Math.max(Re,F.width),ve=window.innerWidth-Mu,Ge=P6(te,[Mu,Math.max(Mu,ve-Ce)]);o.style.minWidth=Re+"px",o.style.right=Ge+"px"}const T=h(),R=window.innerHeight-Mu*2,j=g.scrollHeight,Y=window.getComputedStyle(u),Z=parseInt(Y.borderTopWidth,10),re=parseInt(Y.paddingTop,10),z=parseInt(Y.borderBottomWidth,10),q=parseInt(Y.paddingBottom,10),B=Z+re+j+q+z,G=Math.min(y.offsetHeight*5,B),Q=window.getComputedStyle(g),O=parseInt(Q.paddingTop,10),J=parseInt(Q.paddingBottom,10),X=P.top+P.height/2-Mu,ne=R-X,ie=y.offsetHeight/2,oe=y.offsetTop+ie,de=Z+re+oe,V=B-de;if(de<=X){const fe=T.length>0&&y===T[T.length-1].ref.current;o.style.bottom="0px";const te=u.clientHeight-g.offsetTop-g.offsetHeight,ke=Math.max(ne,ie+(fe?J:0)+te+z),Re=de+ke;o.style.height=Re+"px"}else{const fe=T.length>0&&y===T[0].ref.current;o.style.top="0px";const ke=Math.max(X,Z+g.offsetTop+(fe?O:0)+ie)+V;o.style.height=ke+"px",g.scrollTop=de-X+g.offsetTop}o.style.margin=`${Mu}px 0`,o.style.minHeight=G+"px",o.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,o,u,g,y,b,i.dir,n]);ci(()=>N(),[N]);const[E,C]=S.useState();ci(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const D=S.useCallback(P=>{P&&w.current===!0&&(N(),_==null||_(),w.current=!1)},[N,_]);return l(dye,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:D,children:l("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:l(vr.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});yX.displayName=cye;var uye="SelectPopperPosition",T6=S.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Mu,...i}=e,s=X4(r);return l(T4,{...s,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});T6.displayName=uye;var[dye,YD]=xy(rg,{}),O6="SelectViewport",xX=S.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Om(O6,r),s=YD(O6,r),o=Kr(t,i.onViewportChange),c=S.useRef(0);return x(_r,{children:[l("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),l(Y4.Slot,{scope:r,children:l(vr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ht(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=s;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const w=window.innerHeight-Mu*2,g=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),b=Math.max(g,y);if(b<w){const _=b+m,N=Math.min(w,_),E=_-N;f.style.height=N+"px",f.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});xX.displayName=O6;var wX="SelectGroup",[fye,hye]=xy(wX),pye=S.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=jl();return l(fye,{scope:r,id:a,children:l(vr.div,{role:"group","aria-labelledby":a,...n,ref:t})})});pye.displayName=wX;var bX="SelectLabel",_X=S.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=hye(bX,r);return l(vr.div,{id:a.id,...n,ref:t})});_X.displayName=bX;var R5="SelectItem",[mye,SX]=xy(R5),NX=S.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...s}=e,o=Tm(R5,r),c=Om(R5,r),u=o.value===n,[d,f]=S.useState(i??""),[h,m]=S.useState(!1),w=Kr(t,_=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,_,n,a)}),g=jl(),y=S.useRef("touch"),b=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l(mye,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:S.useCallback(_=>{f(N=>N||((_==null?void 0:_.textContent)??"").trim())},[]),children:l(Y4.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:l(vr.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:w,onFocus:Ht(s.onFocus,()=>m(!0)),onBlur:Ht(s.onBlur,()=>m(!1)),onClick:Ht(s.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:Ht(s.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:Ht(s.onPointerDown,_=>{y.current=_.pointerType}),onPointerMove:Ht(s.onPointerMove,_=>{var N;y.current=_.pointerType,a?(N=c.onItemLeave)==null||N.call(c):y.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ht(s.onPointerLeave,_=>{var N;_.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Ht(s.onKeyDown,_=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&_.key===" "||(eye.includes(_.key)&&b(),_.key===" "&&_.preventDefault())})})})})});NX.displayName=R5;var C2="SelectItemText",AX=S.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,s=Tm(C2,r),o=Om(C2,r),c=SX(C2,r),u=aye(C2,r),[d,f]=S.useState(null),h=Kr(t,b=>f(b),c.onItemTextChange,b=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,w=S.useMemo(()=>l("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return ci(()=>(g(w),()=>y(w)),[g,y,w]),x(_r,{children:[l(vr.span,{id:c.textId,...i,ref:h}),c.isSelected&&s.valueNode&&!s.valueNodeHasChildren?uy.createPortal(i.children,s.valueNode):null]})});AX.displayName=C2;var kX="SelectItemIndicator",EX=S.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return SX(kX,r).isSelected?l(vr.span,{"aria-hidden":!0,...n,ref:t}):null});EX.displayName=kX;var D6="SelectScrollUpButton",CX=S.forwardRef((e,t)=>{const r=Om(D6,e.__scopeSelect),n=YD(D6,e.__scopeSelect),[a,i]=S.useState(!1),s=Kr(t,n.onScrollButtonChange);return ci(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?l(TX,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});CX.displayName=D6;var I6="SelectScrollDownButton",PX=S.forwardRef((e,t)=>{const r=Om(I6,e.__scopeSelect),n=YD(I6,e.__scopeSelect),[a,i]=S.useState(!1),s=Kr(t,n.onScrollButtonChange);return ci(()=>{if(r.viewport&&r.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?l(TX,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});PX.displayName=I6;var TX=S.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Om("SelectScrollButton",r),s=S.useRef(null),o=K4(r),c=S.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return S.useEffect(()=>()=>c(),[c]),ci(()=>{var d;const u=o().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),l(vr.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ht(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:Ht(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:Ht(a.onPointerLeave,()=>{c()})})}),gye="SelectSeparator",OX=S.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return l(vr.div,{"aria-hidden":!0,...n,ref:t})});OX.displayName=gye;var R6="SelectArrow",vye=S.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=X4(r),i=Tm(R6,r),s=Om(R6,r);return i.open&&s.position==="popper"?l(O4,{...a,...n,ref:t}):null});vye.displayName=R6;var yye="SelectBubbleInput",DX=S.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=S.useRef(null),i=Kr(n,a),s=H4(t);return S.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&d){const f=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(f)}},[s,t]),l(vr.select,{...r,style:{...oX,...r.style},ref:i,defaultValue:t})});DX.displayName=yye;function IX(e){return e===""||e===void 0}function RX(e){const t=Di(e),r=S.useRef(""),n=S.useRef(0),a=S.useCallback(s=>{const o=r.current+s;t(o),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),i=S.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function MX(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=xye(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==r));const c=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function xye(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var wye=lX,FX=uX,bye=fX,_ye=hX,Sye=pX,LX=mX,Nye=xX,jX=_X,$X=NX,Aye=AX,kye=EX,BX=CX,UX=PX,qX=OX;const Ur=wye,qr=bye,jr=S.forwardRef(({className:e,children:t,...r},n)=>x(FX,{ref:n,className:Lt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,l(_ye,{asChild:!0,children:l(aD,{className:"h-4 w-4 opacity-50"})})]}));jr.displayName=FX.displayName;const WX=S.forwardRef(({className:e,...t},r)=>l(BX,{ref:r,className:Lt("flex cursor-default items-center justify-center py-1",e),...t,children:l(Nce,{className:"h-4 w-4"})}));WX.displayName=BX.displayName;const zX=S.forwardRef(({className:e,...t},r)=>l(UX,{ref:r,className:Lt("flex cursor-default items-center justify-center py-1",e),...t,children:l(aD,{className:"h-4 w-4"})}));zX.displayName=UX.displayName;const $r=S.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>l(Sye,{children:x(LX,{ref:a,className:Lt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[l(WX,{}),l(Nye,{className:Lt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),l(zX,{})]})}));$r.displayName=LX.displayName;const Eye=S.forwardRef(({className:e,...t},r)=>l(jX,{ref:r,className:Lt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Eye.displayName=jX.displayName;const wt=S.forwardRef(({className:e,children:t,...r},n)=>x($X,{ref:n,className:Lt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[l("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l(kye,{children:l(g1,{className:"h-4 w-4"})})}),l(Aye,{children:t})]}));wt.displayName=$X.displayName;const Cye=S.forwardRef(({className:e,...t},r)=>l(qX,{ref:r,className:Lt("-mx-1 my-1 h-px bg-muted",e),...t}));Cye.displayName=qX.displayName;var LA,AL;function Wl(){if(AL)return LA;AL=1;var e=Array.isArray;return LA=e,LA}var jA,kL;function VX(){if(kL)return jA;kL=1;var e=typeof e_=="object"&&e_&&e_.Object===Object&&e_;return jA=e,jA}var $A,EL;function vf(){if(EL)return $A;EL=1;var e=VX(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return $A=r,$A}var BA,CL;function Yw(){if(CL)return BA;CL=1;var e=vf(),t=e.Symbol;return BA=t,BA}var UA,PL;function Pye(){if(PL)return UA;PL=1;var e=Yw(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,a=e?e.toStringTag:void 0;function i(s){var o=r.call(s,a),c=s[a];try{s[a]=void 0;var u=!0}catch{}var d=n.call(s);return u&&(o?s[a]=c:delete s[a]),d}return UA=i,UA}var qA,TL;function Tye(){if(TL)return qA;TL=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return qA=r,qA}var WA,OL;function Th(){if(OL)return WA;OL=1;var e=Yw(),t=Pye(),r=Tye(),n="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?t(o):r(o)}return WA=s,WA}var zA,DL;function Oh(){if(DL)return zA;DL=1;function e(t){return t!=null&&typeof t=="object"}return zA=e,zA}var VA,IL;function wy(){if(IL)return VA;IL=1;var e=Th(),t=Oh(),r="[object Symbol]";function n(a){return typeof a=="symbol"||t(a)&&e(a)==r}return VA=n,VA}var HA,RL;function KD(){if(RL)return HA;RL=1;var e=Wl(),t=wy(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(e(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return HA=a,HA}var GA,ML;function Dm(){if(ML)return GA;ML=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return GA=e,GA}var YA,FL;function XD(){if(FL)return YA;FL=1;var e=Th(),t=Dm(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!t(o))return!1;var c=e(o);return c==n||c==a||c==r||c==i}return YA=s,YA}var KA,LL;function Oye(){if(LL)return KA;LL=1;var e=vf(),t=e["__core-js_shared__"];return KA=t,KA}var XA,jL;function Dye(){if(jL)return XA;jL=1;var e=Oye(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return XA=r,XA}var JA,$L;function HX(){if($L)return JA;$L=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return JA=r,JA}var ZA,BL;function Iye(){if(BL)return ZA;BL=1;var e=XD(),t=Dye(),r=Dm(),n=HX(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,c=s.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||t(h))return!1;var m=e(h)?d:i;return m.test(n(h))}return ZA=f,ZA}var QA,UL;function Rye(){if(UL)return QA;UL=1;function e(t,r){return t==null?void 0:t[r]}return QA=e,QA}var ek,qL;function Cg(){if(qL)return ek;qL=1;var e=Iye(),t=Rye();function r(n,a){var i=t(n,a);return e(i)?i:void 0}return ek=r,ek}var tk,WL;function J4(){if(WL)return tk;WL=1;var e=Cg(),t=e(Object,"create");return tk=t,tk}var rk,zL;function Mye(){if(zL)return rk;zL=1;var e=J4();function t(){this.__data__=e?e(null):{},this.size=0}return rk=t,rk}var nk,VL;function Fye(){if(VL)return nk;VL=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return nk=e,nk}var ak,HL;function Lye(){if(HL)return ak;HL=1;var e=J4(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(e){var o=s[i];return o===t?void 0:o}return n.call(s,i)?s[i]:void 0}return ak=a,ak}var ik,GL;function jye(){if(GL)return ik;GL=1;var e=J4(),t=Object.prototype,r=t.hasOwnProperty;function n(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return ik=n,ik}var sk,YL;function $ye(){if(YL)return sk;YL=1;var e=J4(),t="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&a===void 0?t:a,this}return sk=r,sk}var ok,KL;function Bye(){if(KL)return ok;KL=1;var e=Mye(),t=Fye(),r=Lye(),n=jye(),a=$ye();function i(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ok=i,ok}var lk,XL;function Uye(){if(XL)return lk;XL=1;function e(){this.__data__=[],this.size=0}return lk=e,lk}var ck,JL;function JD(){if(JL)return ck;JL=1;function e(t,r){return t===r||t!==t&&r!==r}return ck=e,ck}var uk,ZL;function Z4(){if(ZL)return uk;ZL=1;var e=JD();function t(r,n){for(var a=r.length;a--;)if(e(r[a][0],n))return a;return-1}return uk=t,uk}var dk,QL;function qye(){if(QL)return dk;QL=1;var e=Z4(),t=Array.prototype,r=t.splice;function n(a){var i=this.__data__,s=e(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return dk=n,dk}var fk,e9;function Wye(){if(e9)return fk;e9=1;var e=Z4();function t(r){var n=this.__data__,a=e(n,r);return a<0?void 0:n[a][1]}return fk=t,fk}var hk,t9;function zye(){if(t9)return hk;t9=1;var e=Z4();function t(r){return e(this.__data__,r)>-1}return hk=t,hk}var pk,r9;function Vye(){if(r9)return pk;r9=1;var e=Z4();function t(r,n){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return pk=t,pk}var mk,n9;function Q4(){if(n9)return mk;n9=1;var e=Uye(),t=qye(),r=Wye(),n=zye(),a=Vye();function i(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,mk=i,mk}var gk,a9;function ZD(){if(a9)return gk;a9=1;var e=Cg(),t=vf(),r=e(t,"Map");return gk=r,gk}var vk,i9;function Hye(){if(i9)return vk;i9=1;var e=Bye(),t=Q4(),r=ZD();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return vk=n,vk}var yk,s9;function Gye(){if(s9)return yk;s9=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return yk=e,yk}var xk,o9;function eN(){if(o9)return xk;o9=1;var e=Gye();function t(r,n){var a=r.__data__;return e(n)?a[typeof n=="string"?"string":"hash"]:a.map}return xk=t,xk}var wk,l9;function Yye(){if(l9)return wk;l9=1;var e=eN();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return wk=t,wk}var bk,c9;function Kye(){if(c9)return bk;c9=1;var e=eN();function t(r){return e(this,r).get(r)}return bk=t,bk}var _k,u9;function Xye(){if(u9)return _k;u9=1;var e=eN();function t(r){return e(this,r).has(r)}return _k=t,_k}var Sk,d9;function Jye(){if(d9)return Sk;d9=1;var e=eN();function t(r,n){var a=e(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Sk=t,Sk}var Nk,f9;function QD(){if(f9)return Nk;f9=1;var e=Hye(),t=Yye(),r=Kye(),n=Xye(),a=Jye();function i(s){var o=-1,c=s==null?0:s.length;for(this.clear();++o<c;){var u=s[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Nk=i,Nk}var Ak,h9;function GX(){if(h9)return Ak;h9=1;var e=QD(),t="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],c=i.cache;if(c.has(o))return c.get(o);var u=n.apply(this,s);return i.cache=c.set(o,u)||c,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,Ak=r,Ak}var kk,p9;function Zye(){if(p9)return kk;p9=1;var e=GX(),t=500;function r(n){var a=e(n,function(s){return i.size===t&&i.clear(),s}),i=a.cache;return a}return kk=r,kk}var Ek,m9;function Qye(){if(m9)return Ek;m9=1;var e=Zye(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(s,o,c,u){i.push(c?u.replace(r,"$1"):o||s)}),i});return Ek=n,Ek}var Ck,g9;function eI(){if(g9)return Ck;g9=1;function e(t,r){for(var n=-1,a=t==null?0:t.length,i=Array(a);++n<a;)i[n]=r(t[n],n,t);return i}return Ck=e,Ck}var Pk,v9;function e2e(){if(v9)return Pk;v9=1;var e=Yw(),t=eI(),r=Wl(),n=wy(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return t(o,s)+"";if(n(o))return i?i.call(o):"";var c=o+"";return c=="0"&&1/o==-1/0?"-0":c}return Pk=s,Pk}var Tk,y9;function YX(){if(y9)return Tk;y9=1;var e=e2e();function t(r){return r==null?"":e(r)}return Tk=t,Tk}var Ok,x9;function KX(){if(x9)return Ok;x9=1;var e=Wl(),t=KD(),r=Qye(),n=YX();function a(i,s){return e(i)?i:t(i,s)?[i]:r(n(i))}return Ok=a,Ok}var Dk,w9;function tN(){if(w9)return Dk;w9=1;var e=wy();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Dk=t,Dk}var Ik,b9;function tI(){if(b9)return Ik;b9=1;var e=KX(),t=tN();function r(n,a){a=e(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[t(a[i++])];return i&&i==s?n:void 0}return Ik=r,Ik}var Rk,_9;function XX(){if(_9)return Rk;_9=1;var e=tI();function t(r,n,a){var i=r==null?void 0:e(r,n);return i===void 0?a:i}return Rk=t,Rk}var t2e=XX();const yc=pa(t2e);var Mk,S9;function r2e(){if(S9)return Mk;S9=1;function e(t){return t==null}return Mk=e,Mk}var n2e=r2e();const mn=pa(n2e);var Fk,N9;function a2e(){if(N9)return Fk;N9=1;var e=Th(),t=Wl(),r=Oh(),n="[object String]";function a(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Fk=a,Fk}var i2e=a2e();const ng=pa(i2e);var s2e=XD();const Zr=pa(s2e);var o2e=Dm();const by=pa(o2e);var Lk={exports:{}},ya={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A9;function l2e(){if(A9)return ya;A9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function g(y){if(typeof y=="object"&&y!==null){var b=y.$$typeof;switch(b){case e:switch(y=y.type,y){case r:case a:case n:case u:case d:return y;default:switch(y=y&&y.$$typeof,y){case o:case s:case c:case h:case f:case i:return y;default:return b}}case t:return b}}}return ya.ContextConsumer=s,ya.ContextProvider=i,ya.Element=e,ya.ForwardRef=c,ya.Fragment=r,ya.Lazy=h,ya.Memo=f,ya.Portal=t,ya.Profiler=a,ya.StrictMode=n,ya.Suspense=u,ya.SuspenseList=d,ya.isAsyncMode=function(){return!1},ya.isConcurrentMode=function(){return!1},ya.isContextConsumer=function(y){return g(y)===s},ya.isContextProvider=function(y){return g(y)===i},ya.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},ya.isForwardRef=function(y){return g(y)===c},ya.isFragment=function(y){return g(y)===r},ya.isLazy=function(y){return g(y)===h},ya.isMemo=function(y){return g(y)===f},ya.isPortal=function(y){return g(y)===t},ya.isProfiler=function(y){return g(y)===a},ya.isStrictMode=function(y){return g(y)===n},ya.isSuspense=function(y){return g(y)===u},ya.isSuspenseList=function(y){return g(y)===d},ya.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===a||y===n||y===u||y===d||y===m||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===f||y.$$typeof===i||y.$$typeof===s||y.$$typeof===c||y.$$typeof===w||y.getModuleId!==void 0)},ya.typeOf=g,ya}var k9;function c2e(){return k9||(k9=1,Lk.exports=l2e()),Lk.exports}var u2e=c2e(),jk,E9;function JX(){if(E9)return jk;E9=1;var e=Th(),t=Oh(),r="[object Number]";function n(a){return typeof a=="number"||t(a)&&e(a)==r}return jk=n,jk}var $k,C9;function d2e(){if(C9)return $k;C9=1;var e=JX();function t(r){return e(r)&&r!=+r}return $k=t,$k}var f2e=d2e();const _y=pa(f2e);var h2e=JX();const p2e=pa(h2e);var cl=function(t){return t===0?0:t>0?1:-1},M0=function(t){return ng(t)&&t.indexOf("%")===t.length-1},Xt=function(t){return p2e(t)&&!_y(t)},bs=function(t){return Xt(t)||ng(t)},m2e=0,Pg=function(t){var r=++m2e;return"".concat(t||"").concat(r)},ul=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xt(t)&&!ng(t))return n;var i;if(M0(t)){var s=t.indexOf("%");i=r*parseFloat(t.slice(0,s))/100}else i=+t;return _y(i)&&(i=n),a&&i>r&&(i=r),i},Gp=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},g2e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},xs=function(t,r){return Xt(t)&&Xt(r)?function(n){return t+n*(r-t)}:function(){return r}};function M5(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):yc(n,t))===r})}var v2e=function(t,r){return Xt(t)&&Xt(r)?t-r:ng(t)&&ng(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function e1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function M6(e){"@babel/helpers - typeof";return M6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M6(e)}var y2e=["viewBox","children"],x2e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P9=["points","pathLength"],Bk={svg:y2e,polygon:P9,polyline:P9},rI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],F5=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(S.isValidElement(t)&&(n=t.props),!by(n))return null;var a={};return Object.keys(n).forEach(function(i){rI.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},w2e=function(t,r,n){return function(a){return t(r,n,a),null}},ag=function(t,r,n){if(!by(t)||M6(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var s=t[i];rI.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=w2e(s,r,n))}),a},b2e=["children"],_2e=["children"];function T9(e,t){if(e==null)return{};var r=S2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function F6(e){"@babel/helpers - typeof";return F6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F6(e)}var O9={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},hh=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},D9=null,Uk=null,nI=function e(t){if(t===D9&&Array.isArray(Uk))return Uk;var r=[];return S.Children.forEach(t,function(n){mn(n)||(u2e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Uk=r,D9=t,r};function xc(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return hh(a)}):n=[hh(t)],nI(e).forEach(function(a){var i=yc(a,"type.displayName")||yc(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ic(e,t){var r=xc(e,t);return r&&r[0]}var I9=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Xt(n)||n<=0||!Xt(a)||a<=0)},N2e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],A2e=function(t){return t&&t.type&&ng(t.type)&&N2e.indexOf(t.type)>=0},ZX=function(t){return t&&F6(t)==="object"&&"clipDot"in t},k2e=function(t,r,n,a){var i,s=(i=Bk==null?void 0:Bk[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Zr(t)&&(a&&s.includes(r)||x2e.includes(r))||n&&rI.includes(r)},Rr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(S.isValidElement(t)&&(a=t.props),!by(a))return null;var i={};return Object.keys(a).forEach(function(s){var o;k2e((o=a)===null||o===void 0?void 0:o[s],s,r,n)&&(i[s]=a[s])}),i},L6=function e(t,r){if(t===r)return!0;var n=S.Children.count(t);if(n!==S.Children.count(r))return!1;if(n===0)return!0;if(n===1)return R9(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!R9(i,s))return!1}return!0},R9=function(t,r){if(mn(t)&&mn(r))return!0;if(!mn(t)&&!mn(r)){var n=t.props||{},a=n.children,i=T9(n,b2e),s=r.props||{},o=s.children,c=T9(s,_2e);return a&&o?e1(i,c)&&L6(a,o):!a&&!o?e1(i,c):!1}return!1},M9=function(t,r){var n=[],a={};return nI(t).forEach(function(i,s){if(A2e(i))n.push(i);else if(i){var o=hh(i.type),c=r[o]||{},u=c.handler,d=c.once;if(u&&(!d||!a[o])){var f=u(i,o,s);n.push(f),a[o]=!0}}}),n},E2e=function(t){var r=t&&t.type;return r&&O9[r]?O9[r]:null},C2e=function(t,r){return nI(r).indexOf(t)},P2e=["children","width","height","viewBox","className","style","title","desc"];function j6(){return j6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j6.apply(this,arguments)}function T2e(e,t){if(e==null)return{};var r=O2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $6(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,s=e.style,o=e.title,c=e.desc,u=T2e(e,P2e),d=a||{width:r,height:n,x:0,y:0},f=gn("recharts-surface",i);return Qe.createElement("svg",j6({},Rr(u,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Qe.createElement("title",null,o),Qe.createElement("desc",null,c),t)}var D2e=["children","className"];function B6(){return B6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B6.apply(this,arguments)}function I2e(e,t){if(e==null)return{};var r=R2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Fn=Qe.forwardRef(function(e,t){var r=e.children,n=e.className,a=I2e(e,D2e),i=gn("recharts-layer",n);return Qe.createElement("g",B6({className:i},Rr(a,!0),{ref:t}),r)}),Gu=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},qk,F9;function M2e(){if(F9)return qk;F9=1;function e(t,r,n){var a=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(i);++a<i;)s[a]=t[a+r];return s}return qk=e,qk}var Wk,L9;function F2e(){if(L9)return Wk;L9=1;var e=M2e();function t(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:e(r,n,a)}return Wk=t,Wk}var zk,j9;function QX(){if(j9)return zk;j9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+e+a+i+"]");function c(u){return o.test(u)}return zk=c,zk}var Vk,$9;function L2e(){if($9)return Vk;$9=1;function e(t){return t.split("")}return Vk=e,Vk}var Hk,B9;function j2e(){if(B9)return Hk;B9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+r+n,i="\\ufe0e\\ufe0f",s="["+e+"]",o="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+c+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",w=u+"?",g="["+i+"]?",y="(?:"+m+"(?:"+[d,f,h].join("|")+")"+g+w+")*",b=g+w+y,_="(?:"+[d+o+"?",o,f,h,s].join("|")+")",N=RegExp(c+"(?="+c+")|"+_+b,"g");function E(C){return C.match(N)||[]}return Hk=E,Hk}var Gk,U9;function $2e(){if(U9)return Gk;U9=1;var e=L2e(),t=QX(),r=j2e();function n(a){return t(a)?r(a):e(a)}return Gk=n,Gk}var Yk,q9;function B2e(){if(q9)return Yk;q9=1;var e=F2e(),t=QX(),r=$2e(),n=YX();function a(i){return function(s){s=n(s);var o=t(s)?r(s):void 0,c=o?o[0]:s.charAt(0),u=o?e(o,1).join(""):s.slice(1);return c[i]()+u}}return Yk=a,Yk}var Kk,W9;function U2e(){if(W9)return Kk;W9=1;var e=B2e(),t=e("toUpperCase");return Kk=t,Kk}var q2e=U2e();const rN=pa(q2e);function Ba(e){return function(){return e}}const eJ=Math.cos,L5=Math.sin,ud=Math.sqrt,j5=Math.PI,nN=2*j5,U6=Math.PI,q6=2*U6,k0=1e-6,W2e=q6-k0;function tJ(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function z2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tJ;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class V2e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tJ:z2e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,o=this._y1,c=n-t,u=a-r,d=s-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>k0)if(!(Math.abs(f*c-u*d)>k0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,w=a-o,g=c*c+u*u,y=m*m+w*w,b=Math.sqrt(g),_=Math.sqrt(h),N=i*Math.tan((U6-Math.acos((g+h-y)/(2*b*_)))/2),E=N/_,C=N/b;Math.abs(E-1)>k0&&this._append`L${t+E*d},${r+E*f}`,this._append`A${i},${i},0,0,${+(f*m>d*w)},${this._x1=t+C*c},${this._y1=r+C*u}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^s,h=s?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>k0||Math.abs(this._y1-d)>k0)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%q6+q6),h>W2e?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>k0&&this._append`A${n},${n},0,${+(h>=U6)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function aI(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new V2e(t)}function iI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rJ(e){this._context=e}rJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function aN(e){return new rJ(e)}function nJ(e){return e[0]}function aJ(e){return e[1]}function iJ(e,t){var r=Ba(!0),n=null,a=aN,i=null,s=aI(o);e=typeof e=="function"?e:e===void 0?nJ:Ba(e),t=typeof t=="function"?t:t===void 0?aJ:Ba(t);function o(c){var u,d=(c=iI(c)).length,f,h=!1,m;for(n==null&&(i=a(m=s())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ba(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ba(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ba(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function v_(e,t,r){var n=null,a=Ba(!0),i=null,s=aN,o=null,c=aI(u);e=typeof e=="function"?e:e===void 0?nJ:Ba(+e),t=typeof t=="function"?t:Ba(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?aJ:Ba(+r);function u(f){var h,m,w,g=(f=iI(f)).length,y,b=!1,_,N=new Array(g),E=new Array(g);for(i==null&&(o=s(_=c())),h=0;h<=g;++h){if(!(h<g&&a(y=f[h],h,f))===b)if(b=!b)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),w=h-1;w>=m;--w)o.point(N[w],E[w]);o.lineEnd(),o.areaEnd()}b&&(N[h]=+e(y,h,f),E[h]=+t(y,h,f),o.point(n?+n(y,h,f):N[h],r?+r(y,h,f):E[h]))}if(_)return o=null,_+""||null}function d(){return iJ().defined(a).curve(s).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ba(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ba(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ba(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ba(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ba(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ba(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ba(!!f),u):a},u.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),u):s},u.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),u):i},u}class sJ{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function H2e(e){return new sJ(e,!0)}function G2e(e){return new sJ(e,!1)}const sI={draw(e,t){const r=ud(t/j5);e.moveTo(r,0),e.arc(0,0,r,0,nN)}},Y2e={draw(e,t){const r=ud(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},oJ=ud(1/3),K2e=oJ*2,X2e={draw(e,t){const r=ud(t/K2e),n=r*oJ;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},J2e={draw(e,t){const r=ud(t),n=-r/2;e.rect(n,n,r,r)}},Z2e=.8908130915292852,lJ=L5(j5/10)/L5(7*j5/10),Q2e=L5(nN/10)*lJ,exe=-eJ(nN/10)*lJ,txe={draw(e,t){const r=ud(t*Z2e),n=Q2e*r,a=exe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const s=nN*i/5,o=eJ(s),c=L5(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},Xk=ud(3),rxe={draw(e,t){const r=-ud(t/(Xk*3));e.moveTo(0,r*2),e.lineTo(-Xk*r,-r),e.lineTo(Xk*r,-r),e.closePath()}},qc=-.5,Wc=ud(3)/2,W6=1/ud(12),nxe=(W6/2+1)*3,axe={draw(e,t){const r=ud(t/nxe),n=r/2,a=r*W6,i=n,s=r*W6+r,o=-i,c=s;e.moveTo(n,a),e.lineTo(i,s),e.lineTo(o,c),e.lineTo(qc*n-Wc*a,Wc*n+qc*a),e.lineTo(qc*i-Wc*s,Wc*i+qc*s),e.lineTo(qc*o-Wc*c,Wc*o+qc*c),e.lineTo(qc*n+Wc*a,qc*a-Wc*n),e.lineTo(qc*i+Wc*s,qc*s-Wc*i),e.lineTo(qc*o+Wc*c,qc*c-Wc*o),e.closePath()}};function ixe(e,t){let r=null,n=aI(a);e=typeof e=="function"?e:Ba(e||sI),t=typeof t=="function"?t:Ba(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ba(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ba(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function $5(){}function B5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function cJ(e){this._context=e}cJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sxe(e){return new cJ(e)}function uJ(e){this._context=e}uJ.prototype={areaStart:$5,areaEnd:$5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:B5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oxe(e){return new uJ(e)}function dJ(e){this._context=e}dJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:B5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lxe(e){return new dJ(e)}function fJ(e){this._context=e}fJ.prototype={areaStart:$5,areaEnd:$5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function cxe(e){return new fJ(e)}function z9(e){return e<0?-1:1}function V9(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),o=(i*a+s*n)/(n+a);return(z9(i)+z9(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(o))||0}function H9(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Jk(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,s-o*r,i,s)}function U5(e){this._context=e}U5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jk(this,this._t0,H9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Jk(this,H9(this,r=V9(this,e,t)),r);break;default:Jk(this,this._t0,r=V9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hJ(e){this._context=new pJ(e)}(hJ.prototype=Object.create(U5.prototype)).point=function(e,t){U5.prototype.point.call(this,t,e)};function pJ(e){this._context=e}pJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function uxe(e){return new U5(e)}function dxe(e){return new hJ(e)}function mJ(e){this._context=e}mJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=G9(e),a=G9(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function G9(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function fxe(e){return new mJ(e)}function iN(e,t){this._context=e,this._t=t}iN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function hxe(e){return new iN(e,.5)}function pxe(e){return new iN(e,0)}function mxe(e){return new iN(e,1)}function b1(e,t){if((s=e.length)>1)for(var r=1,n,a,i=e[t[0]],s,o=i.length;r<s;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function z6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function gxe(e,t){return e[t]}function vxe(e){const t=[];return t.key=e,t}function yxe(){var e=Ba([]),t=z6,r=b1,n=gxe;function a(i){var s=Array.from(e.apply(this,arguments),vxe),o,c=s.length,u=-1,d;for(const f of i)for(o=0,++u;o<c;++o)(s[o][u]=[0,+n(f,s[o].key,u,i)]).data=f;for(o=0,d=iI(t(s));o<c;++o)s[d[o]].index=o;return r(s,d),s}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ba(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ba(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?z6:typeof i=="function"?i:Ba(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??b1,a):r},a}function xxe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}b1(e,t)}}function wxe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var s=0,o=0;s<a;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}b1(e,t)}}function bxe(e,t){if(!(!((s=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var o=0,c=0,u=0;o<s;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,w=0;w<o;++w){var g=e[t[w]],y=g[n][1]||0,b=g[n-1][1]||0;m+=y-b}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,b1(e,t)}}function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}var _xe=["type","size","sizeType"];function V6(){return V6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V6.apply(this,arguments)}function Y9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y9(Object(r),!0).forEach(function(n){Sxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sxe(e,t,r){return t=Nxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nxe(e){var t=Axe(e,"string");return bx(t)=="symbol"?t:t+""}function Axe(e,t){if(bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kxe(e,t){if(e==null)return{};var r=Exe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Exe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var gJ={symbolCircle:sI,symbolCross:Y2e,symbolDiamond:X2e,symbolSquare:J2e,symbolStar:txe,symbolTriangle:rxe,symbolWye:axe},Cxe=Math.PI/180,Pxe=function(t){var r="symbol".concat(rN(t));return gJ[r]||sI},Txe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Cxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Oxe=function(t,r){gJ["symbol".concat(rN(t))]=r},oI=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,s=t.sizeType,o=s===void 0?"area":s,c=kxe(t,_xe),u=K9(K9({},c),{},{type:n,size:i,sizeType:o}),d=function(){var y=Pxe(n),b=ixe().type(y).size(Txe(i,o,n));return b()},f=u.className,h=u.cx,m=u.cy,w=Rr(u,!0);return h===+h&&m===+m&&i===+i?Qe.createElement("path",V6({},w,{className:gn("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};oI.registerSymbol=Oxe;function _1(e){"@babel/helpers - typeof";return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_1(e)}function X9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X9(Object(r),!0).forEach(function(n){_x(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ixe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yJ(n.key),n)}}function Mxe(e,t,r){return t&&Rxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fxe(e,t,r){return t=q5(t),Lxe(e,vJ()?Reflect.construct(t,r||[],q5(e).constructor):t.apply(e,r))}function Lxe(e,t){if(t&&(_1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jxe(e)}function jxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vJ=function(){return!!e})()}function q5(e){return q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q5(e)}function $xe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H6(e,t)}function H6(e,t){return H6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H6(e,t)}function _x(e,t,r){return t=yJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yJ(e){var t=Bxe(e,"string");return _1(t)=="symbol"?t:t+""}function Bxe(e,t){if(_1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tu=32,lI=function(e){function t(){return Ixe(this,t),Fxe(this,t,arguments)}return $xe(t,e),Mxe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Tu/2,s=Tu/6,o=Tu/3,c=n.inactive?a:n.color;if(n.type==="plainline")return l("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Tu,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return l("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Tu,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return l("path",{stroke:"none",fill:c,d:"M0,".concat(Tu/8,"h").concat(Tu,"v").concat(Tu*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Qe.isValidElement(n.legendIcon)){var u=Dxe({},n);return delete u.legendIcon,Qe.cloneElement(n.legendIcon,u)}return l(oI,{fill:c,cx:i,cy:i,size:Tu,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,o=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Tu,height:Tu},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,w){var g=m.formatter||c,y=gn(_x(_x({"recharts-legend-item":!0},"legend-item-".concat(w),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Zr(m.value)?null:m.value;Gu(!Zr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=m.inactive?u:m.color;return x("li",{className:y,style:f,...ag(n.props,m,w),children:[l($6,{width:s,height:s,viewBox:d,style:h,children:n.renderIcon(m)}),l("span",{className:"recharts-legend-item-text",style:{color:_},children:g?g(b,m,w):b})]},"legend-item-".concat(w))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return l("ul",{className:"recharts-default-legend",style:o,children:this.renderItems()})}}])}(S.PureComponent);_x(lI,"displayName","Legend");_x(lI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Zk,J9;function Uxe(){if(J9)return Zk;J9=1;var e=Q4();function t(){this.__data__=new e,this.size=0}return Zk=t,Zk}var Qk,Z9;function qxe(){if(Z9)return Qk;Z9=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Qk=e,Qk}var eE,Q9;function Wxe(){if(Q9)return eE;Q9=1;function e(t){return this.__data__.get(t)}return eE=e,eE}var tE,ej;function zxe(){if(ej)return tE;ej=1;function e(t){return this.__data__.has(t)}return tE=e,tE}var rE,tj;function Vxe(){if(tj)return rE;tj=1;var e=Q4(),t=ZD(),r=QD(),n=200;function a(i,s){var o=this.__data__;if(o instanceof e){var c=o.__data__;if(!t||c.length<n-1)return c.push([i,s]),this.size=++o.size,this;o=this.__data__=new r(c)}return o.set(i,s),this.size=o.size,this}return rE=a,rE}var nE,rj;function xJ(){if(rj)return nE;rj=1;var e=Q4(),t=Uxe(),r=qxe(),n=Wxe(),a=zxe(),i=Vxe();function s(o){var c=this.__data__=new e(o);this.size=c.size}return s.prototype.clear=t,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,nE=s,nE}var aE,nj;function Hxe(){if(nj)return aE;nj=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return aE=t,aE}var iE,aj;function Gxe(){if(aj)return iE;aj=1;function e(t){return this.__data__.has(t)}return iE=e,iE}var sE,ij;function wJ(){if(ij)return sE;ij=1;var e=QD(),t=Hxe(),r=Gxe();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new e;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,sE=n,sE}var oE,sj;function bJ(){if(sj)return oE;sj=1;function e(t,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(t[n],n,t))return!0;return!1}return oE=e,oE}var lE,oj;function _J(){if(oj)return lE;oj=1;function e(t,r){return t.has(r)}return lE=e,lE}var cE,lj;function SJ(){if(lj)return cE;lj=1;var e=wJ(),t=bJ(),r=_J(),n=1,a=2;function i(s,o,c,u,d,f){var h=c&n,m=s.length,w=o.length;if(m!=w&&!(h&&w>m))return!1;var g=f.get(s),y=f.get(o);if(g&&y)return g==o&&y==s;var b=-1,_=!0,N=c&a?new e:void 0;for(f.set(s,o),f.set(o,s);++b<m;){var E=s[b],C=o[b];if(u)var D=h?u(C,E,b,o,s,f):u(E,C,b,s,o,f);if(D!==void 0){if(D)continue;_=!1;break}if(N){if(!t(o,function(P,F){if(!r(N,F)&&(E===P||d(E,P,c,u,f)))return N.push(F)})){_=!1;break}}else if(!(E===C||d(E,C,c,u,f))){_=!1;break}}return f.delete(s),f.delete(o),_}return cE=i,cE}var uE,cj;function Yxe(){if(cj)return uE;cj=1;var e=vf(),t=e.Uint8Array;return uE=t,uE}var dE,uj;function Kxe(){if(uj)return dE;uj=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(a,i){n[++r]=[i,a]}),n}return dE=e,dE}var fE,dj;function cI(){if(dj)return fE;dj=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(a){n[++r]=a}),n}return fE=e,fE}var hE,fj;function Xxe(){if(fj)return hE;fj=1;var e=Yw(),t=Yxe(),r=JD(),n=SJ(),a=Kxe(),i=cI(),s=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",m="[object RegExp]",w="[object Set]",g="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",_="[object DataView]",N=e?e.prototype:void 0,E=N?N.valueOf:void 0;function C(D,P,F,L,W,T,R){switch(F){case _:if(D.byteLength!=P.byteLength||D.byteOffset!=P.byteOffset)return!1;D=D.buffer,P=P.buffer;case b:return!(D.byteLength!=P.byteLength||!T(new t(D),new t(P)));case c:case u:case h:return r(+D,+P);case d:return D.name==P.name&&D.message==P.message;case m:case g:return D==P+"";case f:var j=a;case w:var Y=L&s;if(j||(j=i),D.size!=P.size&&!Y)return!1;var Z=R.get(D);if(Z)return Z==P;L|=o,R.set(D,P);var re=n(j(D),j(P),L,W,T,R);return R.delete(D),re;case y:if(E)return E.call(D)==E.call(P)}return!1}return hE=C,hE}var pE,hj;function NJ(){if(hj)return pE;hj=1;function e(t,r){for(var n=-1,a=r.length,i=t.length;++n<a;)t[i+n]=r[n];return t}return pE=e,pE}var mE,pj;function Jxe(){if(pj)return mE;pj=1;var e=NJ(),t=Wl();function r(n,a,i){var s=a(n);return t(n)?s:e(s,i(n))}return mE=r,mE}var gE,mj;function Zxe(){if(mj)return gE;mj=1;function e(t,r){for(var n=-1,a=t==null?0:t.length,i=0,s=[];++n<a;){var o=t[n];r(o,n,t)&&(s[i++]=o)}return s}return gE=e,gE}var vE,gj;function Qxe(){if(gj)return vE;gj=1;function e(){return[]}return vE=e,vE}var yE,vj;function ewe(){if(vj)return yE;vj=1;var e=Zxe(),t=Qxe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),e(a(s),function(o){return n.call(s,o)}))}:t;return yE=i,yE}var xE,yj;function twe(){if(yj)return xE;yj=1;function e(t,r){for(var n=-1,a=Array(t);++n<t;)a[n]=r(n);return a}return xE=e,xE}var wE,xj;function rwe(){if(xj)return wE;xj=1;var e=Th(),t=Oh(),r="[object Arguments]";function n(a){return t(a)&&e(a)==r}return wE=n,wE}var bE,wj;function uI(){if(wj)return bE;wj=1;var e=rwe(),t=Oh(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(s){return t(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return bE=i,bE}var P2={exports:{}},_E,bj;function nwe(){if(bj)return _E;bj=1;function e(){return!1}return _E=e,_E}P2.exports;var _j;function AJ(){return _j||(_j=1,function(e,t){var r=vf(),n=nwe(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,o=s?r.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||n;e.exports=u}(P2,P2.exports)),P2.exports}var SE,Sj;function dI(){if(Sj)return SE;Sj=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<a}return SE=r,SE}var NE,Nj;function fI(){if(Nj)return NE;Nj=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return NE=t,NE}var AE,Aj;function awe(){if(Aj)return AE;Aj=1;var e=Th(),t=fI(),r=Oh(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",m="[object Set]",w="[object String]",g="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",N="[object Float64Array]",E="[object Int8Array]",C="[object Int16Array]",D="[object Int32Array]",P="[object Uint8Array]",F="[object Uint8ClampedArray]",L="[object Uint16Array]",W="[object Uint32Array]",T={};T[_]=T[N]=T[E]=T[C]=T[D]=T[P]=T[F]=T[L]=T[W]=!0,T[n]=T[a]=T[y]=T[i]=T[b]=T[s]=T[o]=T[c]=T[u]=T[d]=T[f]=T[h]=T[m]=T[w]=T[g]=!1;function R(j){return r(j)&&t(j.length)&&!!T[e(j)]}return AE=R,AE}var kE,kj;function kJ(){if(kj)return kE;kj=1;function e(t){return function(r){return t(r)}}return kE=e,kE}var T2={exports:{}};T2.exports;var Ej;function iwe(){return Ej||(Ej=1,function(e,t){var r=VX(),n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o}(T2,T2.exports)),T2.exports}var EE,Cj;function EJ(){if(Cj)return EE;Cj=1;var e=awe(),t=kJ(),r=iwe(),n=r&&r.isTypedArray,a=n?t(n):e;return EE=a,EE}var CE,Pj;function swe(){if(Pj)return CE;Pj=1;var e=twe(),t=uI(),r=Wl(),n=AJ(),a=dI(),i=EJ(),s=Object.prototype,o=s.hasOwnProperty;function c(u,d){var f=r(u),h=!f&&t(u),m=!f&&!h&&n(u),w=!f&&!h&&!m&&i(u),g=f||h||m||w,y=g?e(u.length,String):[],b=y.length;for(var _ in u)(d||o.call(u,_))&&!(g&&(_=="length"||m&&(_=="offset"||_=="parent")||w&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||a(_,b)))&&y.push(_);return y}return CE=c,CE}var PE,Tj;function owe(){if(Tj)return PE;Tj=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||e;return r===a}return PE=t,PE}var TE,Oj;function CJ(){if(Oj)return TE;Oj=1;function e(t,r){return function(n){return t(r(n))}}return TE=e,TE}var OE,Dj;function lwe(){if(Dj)return OE;Dj=1;var e=CJ(),t=e(Object.keys,Object);return OE=t,OE}var DE,Ij;function cwe(){if(Ij)return DE;Ij=1;var e=owe(),t=lwe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var s=[];for(var o in Object(i))n.call(i,o)&&o!="constructor"&&s.push(o);return s}return DE=a,DE}var IE,Rj;function Kw(){if(Rj)return IE;Rj=1;var e=XD(),t=fI();function r(n){return n!=null&&t(n.length)&&!e(n)}return IE=r,IE}var RE,Mj;function sN(){if(Mj)return RE;Mj=1;var e=swe(),t=cwe(),r=Kw();function n(a){return r(a)?e(a):t(a)}return RE=n,RE}var ME,Fj;function uwe(){if(Fj)return ME;Fj=1;var e=Jxe(),t=ewe(),r=sN();function n(a){return e(a,r,t)}return ME=n,ME}var FE,Lj;function dwe(){if(Lj)return FE;Lj=1;var e=uwe(),t=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o,c,u,d){var f=o&t,h=e(i),m=h.length,w=e(s),g=w.length;if(m!=g&&!f)return!1;for(var y=m;y--;){var b=h[y];if(!(f?b in s:n.call(s,b)))return!1}var _=d.get(i),N=d.get(s);if(_&&N)return _==s&&N==i;var E=!0;d.set(i,s),d.set(s,i);for(var C=f;++y<m;){b=h[y];var D=i[b],P=s[b];if(c)var F=f?c(P,D,b,s,i,d):c(D,P,b,i,s,d);if(!(F===void 0?D===P||u(D,P,o,c,d):F)){E=!1;break}C||(C=b=="constructor")}if(E&&!C){var L=i.constructor,W=s.constructor;L!=W&&"constructor"in i&&"constructor"in s&&!(typeof L=="function"&&L instanceof L&&typeof W=="function"&&W instanceof W)&&(E=!1)}return d.delete(i),d.delete(s),E}return FE=a,FE}var LE,jj;function fwe(){if(jj)return LE;jj=1;var e=Cg(),t=vf(),r=e(t,"DataView");return LE=r,LE}var jE,$j;function hwe(){if($j)return jE;$j=1;var e=Cg(),t=vf(),r=e(t,"Promise");return jE=r,jE}var $E,Bj;function PJ(){if(Bj)return $E;Bj=1;var e=Cg(),t=vf(),r=e(t,"Set");return $E=r,$E}var BE,Uj;function pwe(){if(Uj)return BE;Uj=1;var e=Cg(),t=vf(),r=e(t,"WeakMap");return BE=r,BE}var UE,qj;function mwe(){if(qj)return UE;qj=1;var e=fwe(),t=ZD(),r=hwe(),n=PJ(),a=pwe(),i=Th(),s=HX(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",m=s(e),w=s(t),g=s(r),y=s(n),b=s(a),_=i;return(e&&_(new e(new ArrayBuffer(1)))!=h||t&&_(new t)!=o||r&&_(r.resolve())!=u||n&&_(new n)!=d||a&&_(new a)!=f)&&(_=function(N){var E=i(N),C=E==c?N.constructor:void 0,D=C?s(C):"";if(D)switch(D){case m:return h;case w:return o;case g:return u;case y:return d;case b:return f}return E}),UE=_,UE}var qE,Wj;function gwe(){if(Wj)return qE;Wj=1;var e=xJ(),t=SJ(),r=Xxe(),n=dwe(),a=mwe(),i=Wl(),s=AJ(),o=EJ(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function w(g,y,b,_,N,E){var C=i(g),D=i(y),P=C?d:a(g),F=D?d:a(y);P=P==u?f:P,F=F==u?f:F;var L=P==f,W=F==f,T=P==F;if(T&&s(g)){if(!s(y))return!1;C=!0,L=!1}if(T&&!L)return E||(E=new e),C||o(g)?t(g,y,b,_,N,E):r(g,y,P,b,_,N,E);if(!(b&c)){var R=L&&m.call(g,"__wrapped__"),j=W&&m.call(y,"__wrapped__");if(R||j){var Y=R?g.value():g,Z=j?y.value():y;return E||(E=new e),N(Y,Z,b,_,E)}}return T?(E||(E=new e),n(g,y,b,_,N,E)):!1}return qE=w,qE}var WE,zj;function hI(){if(zj)return WE;zj=1;var e=gwe(),t=Oh();function r(n,a,i,s,o){return n===a?!0:n==null||a==null||!t(n)&&!t(a)?n!==n&&a!==a:e(n,a,i,s,r,o)}return WE=r,WE}var zE,Vj;function vwe(){if(Vj)return zE;Vj=1;var e=xJ(),t=hI(),r=1,n=2;function a(i,s,o,c){var u=o.length,d=u,f=!c;if(i==null)return!d;for(i=Object(i);u--;){var h=o[u];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<d;){h=o[u];var m=h[0],w=i[m],g=h[1];if(f&&h[2]){if(w===void 0&&!(m in i))return!1}else{var y=new e;if(c)var b=c(w,g,m,i,s,y);if(!(b===void 0?t(g,w,r|n,c,y):b))return!1}}return!0}return zE=a,zE}var VE,Hj;function TJ(){if(Hj)return VE;Hj=1;var e=Dm();function t(r){return r===r&&!e(r)}return VE=t,VE}var HE,Gj;function ywe(){if(Gj)return HE;Gj=1;var e=TJ(),t=sN();function r(n){for(var a=t(n),i=a.length;i--;){var s=a[i],o=n[s];a[i]=[s,o,e(o)]}return a}return HE=r,HE}var GE,Yj;function OJ(){if(Yj)return GE;Yj=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return GE=e,GE}var YE,Kj;function xwe(){if(Kj)return YE;Kj=1;var e=vwe(),t=ywe(),r=OJ();function n(a){var i=t(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||e(s,a,i)}}return YE=n,YE}var KE,Xj;function wwe(){if(Xj)return KE;Xj=1;function e(t,r){return t!=null&&r in Object(t)}return KE=e,KE}var XE,Jj;function bwe(){if(Jj)return XE;Jj=1;var e=KX(),t=uI(),r=Wl(),n=dI(),a=fI(),i=tN();function s(o,c,u){c=e(c,o);for(var d=-1,f=c.length,h=!1;++d<f;){var m=i(c[d]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++d!=f?h:(f=o==null?0:o.length,!!f&&a(f)&&n(m,f)&&(r(o)||t(o)))}return XE=s,XE}var JE,Zj;function _we(){if(Zj)return JE;Zj=1;var e=wwe(),t=bwe();function r(n,a){return n!=null&&t(n,a,e)}return JE=r,JE}var ZE,Qj;function Swe(){if(Qj)return ZE;Qj=1;var e=hI(),t=XX(),r=_we(),n=KD(),a=TJ(),i=OJ(),s=tN(),o=1,c=2;function u(d,f){return n(d)&&a(f)?i(s(d),f):function(h){var m=t(h,d);return m===void 0&&m===f?r(h,d):e(f,m,o|c)}}return ZE=u,ZE}var QE,e$;function Sy(){if(e$)return QE;e$=1;function e(t){return t}return QE=e,QE}var eC,t$;function Nwe(){if(t$)return eC;t$=1;function e(t){return function(r){return r==null?void 0:r[t]}}return eC=e,eC}var tC,r$;function Awe(){if(r$)return tC;r$=1;var e=tI();function t(r){return function(n){return e(n,r)}}return tC=t,tC}var rC,n$;function kwe(){if(n$)return rC;n$=1;var e=Nwe(),t=Awe(),r=KD(),n=tN();function a(i){return r(i)?e(n(i)):t(i)}return rC=a,rC}var nC,a$;function yf(){if(a$)return nC;a$=1;var e=xwe(),t=Swe(),r=Sy(),n=Wl(),a=kwe();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?t(s[0],s[1]):e(s):a(s)}return nC=i,nC}var aC,i$;function DJ(){if(i$)return aC;i$=1;function e(t,r,n,a){for(var i=t.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(t[s],s,t))return s;return-1}return aC=e,aC}var iC,s$;function Ewe(){if(s$)return iC;s$=1;function e(t){return t!==t}return iC=e,iC}var sC,o$;function Cwe(){if(o$)return sC;o$=1;function e(t,r,n){for(var a=n-1,i=t.length;++a<i;)if(t[a]===r)return a;return-1}return sC=e,sC}var oC,l$;function Pwe(){if(l$)return oC;l$=1;var e=DJ(),t=Ewe(),r=Cwe();function n(a,i,s){return i===i?r(a,i,s):e(a,t,s)}return oC=n,oC}var lC,c$;function Twe(){if(c$)return lC;c$=1;var e=Pwe();function t(r,n){var a=r==null?0:r.length;return!!a&&e(r,n,0)>-1}return lC=t,lC}var cC,u$;function Owe(){if(u$)return cC;u$=1;function e(t,r,n){for(var a=-1,i=t==null?0:t.length;++a<i;)if(n(r,t[a]))return!0;return!1}return cC=e,cC}var uC,d$;function Dwe(){if(d$)return uC;d$=1;function e(){}return uC=e,uC}var dC,f$;function Iwe(){if(f$)return dC;f$=1;var e=PJ(),t=Dwe(),r=cI(),n=1/0,a=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return dC=a,dC}var fC,h$;function Rwe(){if(h$)return fC;h$=1;var e=wJ(),t=Twe(),r=Owe(),n=_J(),a=Iwe(),i=cI(),s=200;function o(c,u,d){var f=-1,h=t,m=c.length,w=!0,g=[],y=g;if(d)w=!1,h=r;else if(m>=s){var b=u?null:a(c);if(b)return i(b);w=!1,h=n,y=new e}else y=u?[]:g;e:for(;++f<m;){var _=c[f],N=u?u(_):_;if(_=d||_!==0?_:0,w&&N===N){for(var E=y.length;E--;)if(y[E]===N)continue e;u&&y.push(N),g.push(_)}else h(y,N,d)||(y!==g&&y.push(N),g.push(_))}return g}return fC=o,fC}var hC,p$;function Mwe(){if(p$)return hC;p$=1;var e=yf(),t=Rwe();function r(n,a){return n&&n.length?t(n,e(a,2)):[]}return hC=r,hC}var Fwe=Mwe();const m$=pa(Fwe);function IJ(e,t,r){return t===!0?m$(e,r):Zr(t)?m$(e,t):e}function S1(e){"@babel/helpers - typeof";return S1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S1(e)}var Lwe=["ref"];function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){oN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MJ(n.key),n)}}function $we(e,t,r){return t&&v$(e.prototype,t),r&&v$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bwe(e,t,r){return t=W5(t),Uwe(e,RJ()?Reflect.construct(t,r||[],W5(e).constructor):t.apply(e,r))}function Uwe(e,t){if(t&&(S1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qwe(e)}function qwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RJ=function(){return!!e})()}function W5(e){return W5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W5(e)}function Wwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G6(e,t)}function G6(e,t){return G6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G6(e,t)}function oN(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=zwe(e,"string");return S1(t)=="symbol"?t:t+""}function zwe(e,t){if(S1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(S1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Vwe(e,t){if(e==null)return{};var r=Hwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Gwe(e){return e.value}function Ywe(e,t){if(Qe.isValidElement(e))return Qe.cloneElement(e,t);if(typeof e=="function")return Qe.createElement(e,t);t.ref;var r=Vwe(t,Lwe);return l(lI,{...r})}var y$=1,Yu=function(e){function t(){var r;jwe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Bwe(this,t,[].concat(a)),oN(r,"lastBoundingBox",{width:-1,height:-1}),r}return Wwe(t,e),$we(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>y$||Math.abs(a.height-this.lastBoundingBox.height)>y$)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Qf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,o=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var w=this.getBBoxSnapshot();h={top:((d||0)-w.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Qf(Qf({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,o=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Qf(Qf({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return l("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m},children:Ywe(i,Qf(Qf({},this.props),{},{payload:IJ(d,u,Gwe)}))})}}],[{key:"getWithHeight",value:function(n,a){var i=Qf(Qf({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&Xt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])}(S.PureComponent);oN(Yu,"displayName","Legend");oN(Yu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var pC,x$;function Kwe(){if(x$)return pC;x$=1;var e=Yw(),t=uI(),r=Wl(),n=e?e.isConcatSpreadable:void 0;function a(i){return r(i)||t(i)||!!(n&&i&&i[n])}return pC=a,pC}var mC,w$;function FJ(){if(w$)return mC;w$=1;var e=NJ(),t=Kwe();function r(n,a,i,s,o){var c=-1,u=n.length;for(i||(i=t),o||(o=[]);++c<u;){var d=n[c];a>0&&i(d)?a>1?r(d,a-1,i,s,o):e(o,d):s||(o[o.length]=d)}return o}return mC=r,mC}var gC,b$;function Xwe(){if(b$)return gC;b$=1;function e(t){return function(r,n,a){for(var i=-1,s=Object(r),o=a(r),c=o.length;c--;){var u=o[t?c:++i];if(n(s[u],u,s)===!1)break}return r}}return gC=e,gC}var vC,_$;function Jwe(){if(_$)return vC;_$=1;var e=Xwe(),t=e();return vC=t,vC}var yC,S$;function LJ(){if(S$)return yC;S$=1;var e=Jwe(),t=sN();function r(n,a){return n&&e(n,a,t)}return yC=r,yC}var xC,N$;function Zwe(){if(N$)return xC;N$=1;var e=Kw();function t(r,n){return function(a,i){if(a==null)return a;if(!e(a))return r(a,i);for(var s=a.length,o=n?s:-1,c=Object(a);(n?o--:++o<s)&&i(c[o],o,c)!==!1;);return a}}return xC=t,xC}var wC,A$;function pI(){if(A$)return wC;A$=1;var e=LJ(),t=Zwe(),r=t(e);return wC=r,wC}var bC,k$;function jJ(){if(k$)return bC;k$=1;var e=pI(),t=Kw();function r(n,a){var i=-1,s=t(n)?Array(n.length):[];return e(n,function(o,c,u){s[++i]=a(o,c,u)}),s}return bC=r,bC}var _C,E$;function Qwe(){if(E$)return _C;E$=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return _C=e,_C}var SC,C$;function ebe(){if(C$)return SC;C$=1;var e=wy();function t(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,o=e(r),c=n!==void 0,u=n===null,d=n===n,f=e(n);if(!u&&!f&&!o&&r>n||o&&c&&d&&!u&&!f||i&&c&&d||!a&&d||!s)return 1;if(!i&&!o&&!f&&r<n||f&&a&&s&&!i&&!o||u&&a&&s||!c&&s||!d)return-1}return 0}return SC=t,SC}var NC,P$;function tbe(){if(P$)return NC;P$=1;var e=ebe();function t(r,n,a){for(var i=-1,s=r.criteria,o=n.criteria,c=s.length,u=a.length;++i<c;){var d=e(s[i],o[i]);if(d){if(i>=u)return d;var f=a[i];return d*(f=="desc"?-1:1)}}return r.index-n.index}return NC=t,NC}var AC,T$;function rbe(){if(T$)return AC;T$=1;var e=eI(),t=tI(),r=yf(),n=jJ(),a=Qwe(),i=kJ(),s=tbe(),o=Sy(),c=Wl();function u(d,f,h){f.length?f=e(f,function(g){return c(g)?function(y){return t(y,g.length===1?g[0]:g)}:g}):f=[o];var m=-1;f=e(f,i(r));var w=n(d,function(g,y,b){var _=e(f,function(N){return N(g)});return{criteria:_,index:++m,value:g}});return a(w,function(g,y){return s(g,y,h)})}return AC=u,AC}var kC,O$;function nbe(){if(O$)return kC;O$=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return kC=e,kC}var EC,D$;function abe(){if(D$)return EC;D$=1;var e=nbe(),t=Math.max;function r(n,a,i){return a=t(a===void 0?n.length-1:a,0),function(){for(var s=arguments,o=-1,c=t(s.length-a,0),u=Array(c);++o<c;)u[o]=s[a+o];o=-1;for(var d=Array(a+1);++o<a;)d[o]=s[o];return d[a]=i(u),e(n,this,d)}}return EC=r,EC}var CC,I$;function ibe(){if(I$)return CC;I$=1;function e(t){return function(){return t}}return CC=e,CC}var PC,R$;function $J(){if(R$)return PC;R$=1;var e=Cg(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return PC=t,PC}var TC,M$;function sbe(){if(M$)return TC;M$=1;var e=ibe(),t=$J(),r=Sy(),n=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return TC=n,TC}var OC,F$;function obe(){if(F$)return OC;F$=1;var e=800,t=16,r=Date.now;function n(a){var i=0,s=0;return function(){var o=r(),c=t-(o-s);if(s=o,c>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return OC=n,OC}var DC,L$;function lbe(){if(L$)return DC;L$=1;var e=sbe(),t=obe(),r=t(e);return DC=r,DC}var IC,j$;function cbe(){if(j$)return IC;j$=1;var e=Sy(),t=abe(),r=lbe();function n(a,i){return r(t(a,i,e),a+"")}return IC=n,IC}var RC,$$;function lN(){if($$)return RC;$$=1;var e=JD(),t=Kw(),r=dI(),n=Dm();function a(i,s,o){if(!n(o))return!1;var c=typeof s;return(c=="number"?t(o)&&r(s,o.length):c=="string"&&s in o)?e(o[s],i):!1}return RC=a,RC}var MC,B$;function ube(){if(B$)return MC;B$=1;var e=FJ(),t=rbe(),r=cbe(),n=lN(),a=r(function(i,s){if(i==null)return[];var o=s.length;return o>1&&n(i,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),t(i,e(s,1),[])});return MC=a,MC}var dbe=ube();const mI=pa(dbe);function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}function Y6(){return Y6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y6.apply(this,arguments)}function fbe(e,t){return gbe(e)||mbe(e,t)||pbe(e,t)||hbe()}function hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pbe(e,t){if(e){if(typeof e=="string")return U$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U$(e,t)}}function U$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function gbe(e){if(Array.isArray(e))return e}function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){vbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vbe(e,t,r){return t=ybe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ybe(e){var t=xbe(e,"string");return Sx(t)=="symbol"?t:t+""}function xbe(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wbe(e){return Array.isArray(e)&&bs(e[0])&&bs(e[1])?e.join(" ~ "):e}var bbe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,s=t.itemStyle,o=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,w=t.labelClassName,g=t.label,y=t.labelFormatter,b=t.accessibilityLayer,_=b===void 0?!1:b,N=function(){if(d&&d.length){var R={padding:0,margin:0},j=(h?mI(d,h):d).map(function(Y,Z){if(Y.type==="none")return null;var re=FC({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},o),z=Y.formatter||f||wbe,q=Y.value,B=Y.name,G=q,Q=B;if(z&&G!=null&&Q!=null){var O=z(q,B,Y,Z,d);if(Array.isArray(O)){var J=fbe(O,2);G=J[0],Q=J[1]}else G=O}return Qe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:re},bs(Q)?Qe.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,bs(Q)?Qe.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Qe.createElement("span",{className:"recharts-tooltip-item-value"},G),Qe.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return Qe.createElement("ul",{className:"recharts-tooltip-item-list",style:R},j)}return null},E=FC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=FC({margin:0},u),D=!mn(g),P=D?g:"",F=gn("recharts-default-tooltip",m),L=gn("recharts-tooltip-label",w);D&&y&&d!==void 0&&d!==null&&(P=y(g,d));var W=_?{role:"status","aria-live":"assertive"}:{};return Qe.createElement("div",Y6({className:F,style:E},W),Qe.createElement("p",{className:L,style:C},Qe.isValidElement(P)?P:"".concat(P)),N())};function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function y_(e,t,r){return t=_be(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _be(e){var t=Sbe(e,"string");return Nx(t)=="symbol"?t:t+""}function Sbe(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l2="recharts-tooltip-wrapper",Nbe={visibility:"hidden"};function Abe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return gn(l2,y_(y_(y_(y_({},"".concat(l2,"-right"),Xt(r)&&t&&Xt(t.x)&&r>=t.x),"".concat(l2,"-left"),Xt(r)&&t&&Xt(t.x)&&r<t.x),"".concat(l2,"-bottom"),Xt(n)&&t&&Xt(t.y)&&n>=t.y),"".concat(l2,"-top"),Xt(n)&&t&&Xt(t.y)&&n<t.y))}function W$(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Xt(i[n]))return i[n];var d=r[n]-o-a,f=r[n]+a;if(t[n])return s[n]?d:f;if(s[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var w=f+o,g=c[n]+u;return w>g?Math.max(d,c[n]):Math.max(f,c[n])}function kbe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Ebe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipBox,o=e.useTranslate3d,c=e.viewBox,u,d,f;return s.height>0&&s.width>0&&r?(d=W$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=W$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=kbe({translateX:d,translateY:f,useTranslate3d:o})):u=Nbe,{cssProperties:u,cssClasses:Abe({translateX:d,translateY:f,coordinate:r})}}function N1(e){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N1(e)}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){X6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pbe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UJ(n.key),n)}}function Tbe(e,t,r){return t&&Pbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Obe(e,t,r){return t=z5(t),Dbe(e,BJ()?Reflect.construct(t,r||[],z5(e).constructor):t.apply(e,r))}function Dbe(e,t){if(t&&(N1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ibe(e)}function Ibe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BJ=function(){return!!e})()}function z5(e){return z5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z5(e)}function Rbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K6(e,t)}function K6(e,t){return K6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},K6(e,t)}function X6(e,t,r){return t=UJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=Mbe(e,"string");return N1(t)=="symbol"?t:t+""}function Mbe(e,t){if(N1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(N1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var H$=1,Fbe=function(e){function t(){var r;Cbe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Obe(this,t,[].concat(a)),X6(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),X6(r,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Rbe(t,e),Tbe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>H$||Math.abs(n.height-this.state.lastBoundingBox.height)>H$)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,w=a.position,g=a.reverseDirection,y=a.useTranslate3d,b=a.viewBox,_=a.wrapperStyle,N=Ebe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:m,position:w,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:b}),E=N.cssClasses,C=N.cssProperties,D=V$(V$({transition:h&&i?"transform ".concat(o,"ms ").concat(c):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},_);return l("div",{tabIndex:-1,className:E,style:D,ref:function(F){n.wrapperNode=F},children:u})}}])}(S.PureComponent),Lbe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Im={isSsr:Lbe()};function A1(e){"@babel/helpers - typeof";return A1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A1(e)}function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){gI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WJ(n.key),n)}}function Bbe(e,t,r){return t&&$be(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ube(e,t,r){return t=V5(t),qbe(e,qJ()?Reflect.construct(t,r||[],V5(e).constructor):t.apply(e,r))}function qbe(e,t){if(t&&(A1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wbe(e)}function Wbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qJ=function(){return!!e})()}function V5(e){return V5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V5(e)}function zbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J6(e,t)}function J6(e,t){return J6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},J6(e,t)}function gI(e,t,r){return t=WJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WJ(e){var t=Vbe(e,"string");return A1(t)=="symbol"?t:t+""}function Vbe(e,t){if(A1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(A1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hbe(e){return e.dataKey}function Gbe(e,t){return Qe.isValidElement(e)?Qe.cloneElement(e,t):typeof e=="function"?Qe.createElement(e,t):l(bbe,{...t})}var ti=function(e){function t(){return jbe(this,t),Ube(this,t,arguments)}return zbe(t,e),Bbe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,w=a.payload,g=a.payloadUniqBy,y=a.position,b=a.reverseDirection,_=a.useTranslate3d,N=a.viewBox,E=a.wrapperStyle,C=w??[];f&&C.length&&(C=IJ(w.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),g,Hbe));var D=C.length>0;return l(Fbe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:D,offset:m,position:y,reverseDirection:b,useTranslate3d:_,viewBox:N,wrapperStyle:E,children:Gbe(u,Y$(Y$({},this.props),{},{payload:C}))})}}])}(S.PureComponent);gI(ti,"displayName","Tooltip");gI(ti,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Im.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var LC,K$;function Ybe(){if(K$)return LC;K$=1;var e=vf(),t=function(){return e.Date.now()};return LC=t,LC}var jC,X$;function Kbe(){if(X$)return jC;X$=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return jC=t,jC}var $C,J$;function Xbe(){if(J$)return $C;J$=1;var e=Kbe(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return $C=r,$C}var BC,Z$;function zJ(){if(Z$)return BC;Z$=1;var e=Xbe(),t=Dm(),r=wy(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||s.test(u)?o(u.slice(2),f?2:8):a.test(u)?n:+u}return BC=c,BC}var UC,Q$;function Jbe(){if(Q$)return UC;Q$=1;var e=Dm(),t=Ybe(),r=zJ(),n="Expected a function",a=Math.max,i=Math.min;function s(o,c,u){var d,f,h,m,w,g,y=0,b=!1,_=!1,N=!0;if(typeof o!="function")throw new TypeError(n);c=r(c)||0,e(u)&&(b=!!u.leading,_="maxWait"in u,h=_?a(r(u.maxWait)||0,c):h,N="trailing"in u?!!u.trailing:N);function E(j){var Y=d,Z=f;return d=f=void 0,y=j,m=o.apply(Z,Y),m}function C(j){return y=j,w=setTimeout(F,c),b?E(j):m}function D(j){var Y=j-g,Z=j-y,re=c-Y;return _?i(re,h-Z):re}function P(j){var Y=j-g,Z=j-y;return g===void 0||Y>=c||Y<0||_&&Z>=h}function F(){var j=t();if(P(j))return L(j);w=setTimeout(F,D(j))}function L(j){return w=void 0,N&&d?E(j):(d=f=void 0,m)}function W(){w!==void 0&&clearTimeout(w),y=0,d=g=f=w=void 0}function T(){return w===void 0?m:L(t())}function R(){var j=t(),Y=P(j);if(d=arguments,f=this,g=j,Y){if(w===void 0)return C(g);if(_)return clearTimeout(w),w=setTimeout(F,c),E(g)}return w===void 0&&(w=setTimeout(F,c)),m}return R.cancel=W,R.flush=T,R}return UC=s,UC}var qC,eB;function Zbe(){if(eB)return qC;eB=1;var e=Jbe(),t=Dm(),r="Expected a function";function n(a,i,s){var o=!0,c=!0;if(typeof a!="function")throw new TypeError(r);return t(s)&&(o="leading"in s?!!s.leading:o,c="trailing"in s?!!s.trailing:c),e(a,i,{leading:o,maxWait:i,trailing:c})}return qC=n,qC}var Qbe=Zbe();const VJ=pa(Qbe);function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(n){e_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e_e(e,t,r){return t=t_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t_e(e){var t=r_e(e,"string");return Ax(t)=="symbol"?t:t+""}function r_e(e,t){if(Ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n_e(e,t){return o_e(e)||s_e(e,t)||i_e(e,t)||a_e()}function a_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i_e(e,t){if(e){if(typeof e=="string")return rB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rB(e,t)}}function rB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function o_e(e){if(Array.isArray(e))return e}var Oo=S.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,s=i===void 0?"100%":i,o=e.height,c=o===void 0?"100%":o,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,w=e.debounce,g=w===void 0?0:w,y=e.id,b=e.className,_=e.onResize,N=e.style,E=N===void 0?{}:N,C=S.useRef(null),D=S.useRef();D.current=_,S.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var P=S.useState({containerWidth:a.width,containerHeight:a.height}),F=n_e(P,2),L=F[0],W=F[1],T=S.useCallback(function(j,Y){W(function(Z){var re=Math.round(j),z=Math.round(Y);return Z.containerWidth===re&&Z.containerHeight===z?Z:{containerWidth:re,containerHeight:z}})},[]);S.useEffect(function(){var j=function(B){var G,Q=B[0].contentRect,O=Q.width,J=Q.height;T(O,J),(G=D.current)===null||G===void 0||G.call(D,O,J)};g>0&&(j=VJ(j,g,{trailing:!0,leading:!1}));var Y=new ResizeObserver(j),Z=C.current.getBoundingClientRect(),re=Z.width,z=Z.height;return T(re,z),Y.observe(C.current),function(){Y.disconnect()}},[T,g]);var R=S.useMemo(function(){var j=L.containerWidth,Y=L.containerHeight;if(j<0||Y<0)return null;Gu(M0(s)||M0(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Gu(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=M0(s)?j:s,re=M0(c)?Y:c;r&&r>0&&(Z?re=Z/r:re&&(Z=re*r),h&&re>h&&(re=h)),Gu(Z>0||re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,re,s,c,d,f,r);var z=!Array.isArray(m)&&hh(m.type).endsWith("Chart");return Qe.Children.map(m,function(q){return Qe.isValidElement(q)?S.cloneElement(q,x_({width:Z,height:re},z?{style:x_({height:"100%",width:"100%",maxHeight:re,maxWidth:Z},q.props.style)}:{})):q})},[r,m,c,h,f,d,L,s]);return l("div",{id:y?"".concat(y):void 0,className:gn("recharts-responsive-container",b),style:x_(x_({},E),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:C,children:R})}),Xc=function(t){return null};Xc.displayName="Cell";function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){l_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l_e(e,t,r){return t=c_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c_e(e){var t=u_e(e,"string");return kx(t)=="symbol"?t:t+""}function u_e(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kv={widthCache:{},cacheCount:0},d_e=2e3,f_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aB="recharts_measurement_span";function h_e(e){var t=Z6({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var V2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Im.isSsr)return{width:0,height:0};var n=h_e(r),a=JSON.stringify({text:t,copyStyle:n});if(kv.widthCache[a])return kv.widthCache[a];try{var i=document.getElementById(aB);i||(i=document.createElement("span"),i.setAttribute("id",aB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=Z6(Z6({},f_e),n);Object.assign(i.style,s),i.textContent="".concat(t);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return kv.widthCache[a]=c,++kv.cacheCount>d_e&&(kv.cacheCount=0,kv.widthCache={}),c}catch{return{width:0,height:0}}},p_e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}function H5(e,t){return y_e(e)||v_e(e,t)||g_e(e,t)||m_e()}function m_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_e(e,t){if(e){if(typeof e=="string")return iB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iB(e,t)}}function iB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function y_e(e){if(Array.isArray(e))return e}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b_e(n.key),n)}}function w_e(e,t,r){return t&&sB(e.prototype,t),r&&sB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b_e(e){var t=__e(e,"string");return Ex(t)=="symbol"?t:t+""}function __e(e,t){if(Ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,S_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,N_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},A_e=Object.keys(HJ),Wv="NaN";function k_e(e,t){return e*HJ[t]}var w_=function(){function e(t,r){x_e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!S_e.test(r)&&(this.num=NaN,this.unit=""),A_e.includes(r)&&(this.num=k_e(t,r),this.unit="px")}return w_e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=N_e.exec(r))!==null&&n!==void 0?n:[],i=H5(a,3),s=i[1],o=i[2];return new e(parseFloat(s),o??"")}}])}();function GJ(e){if(e.includes(Wv))return Wv;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=oB.exec(t))!==null&&r!==void 0?r:[],a=H5(n,4),i=a[1],s=a[2],o=a[3],c=w_.parse(i??""),u=w_.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Wv;t=t.replace(oB,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=lB.exec(t))!==null&&f!==void 0?f:[],m=H5(h,4),w=m[1],g=m[2],y=m[3],b=w_.parse(w??""),_=w_.parse(y??""),N=g==="+"?b.add(_):b.subtract(_);if(N.isNaN())return Wv;t=t.replace(lB,N.toString())}return t}var cB=/\(([^()]*)\)/;function E_e(e){for(var t=e;t.includes("(");){var r=cB.exec(t),n=H5(r,2),a=n[1];t=t.replace(cB,GJ(a))}return t}function C_e(e){var t=e.replace(/\s+/g,"");return t=E_e(t),t=GJ(t),t}function P_e(e){try{return C_e(e)}catch{return Wv}}function WC(e){var t=P_e(e.slice(5,-1));return t===Wv?"":t}var T_e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],O_e=["dx","dy","angle","className","breakAll"];function uB(e,t){if(e==null)return{};var r=D_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function D_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dB(e,t){return F_e(e)||M_e(e,t)||R_e(e,t)||I_e()}function I_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R_e(e,t){if(e){if(typeof e=="string")return fB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fB(e,t)}}function fB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function F_e(e){if(Array.isArray(e))return e}var YJ=/[ \f\n\r\t\v\u2028\u2029]+/,KJ=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];mn(r)||(n?i=r.toString().split(""):i=r.toString().split(YJ));var s=i.map(function(c){return{word:c,width:V2(c,a).width}}),o=n?0:V2(" ",a).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},L_e=function(t,r,n,a,i){var s=t.maxLines,o=t.children,c=t.style,u=t.breakAll,d=Xt(s),f=o,h=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(re,z){var q=z.word,B=z.width,G=re[re.length-1];if(G&&(a==null||i||G.width+B+n<Number(a)))G.words.push(q),G.width+=B+n;else{var Q={words:[q],width:B};re.push(Q)}return re},[])},m=h(r),w=function(Z){return Z.reduce(function(re,z){return re.width>z.width?re:z})};if(!d)return m;for(var g="…",y=function(Z){var re=f.slice(0,Z),z=KJ({breakAll:u,style:c,children:re+g}).wordsWithComputedWidth,q=h(z),B=q.length>s||w(q).width>Number(a);return[B,q]},b=0,_=f.length-1,N=0,E;b<=_&&N<=f.length-1;){var C=Math.floor((b+_)/2),D=C-1,P=y(D),F=dB(P,2),L=F[0],W=F[1],T=y(C),R=dB(T,1),j=R[0];if(!L&&!j&&(b=C+1),L&&j&&(_=C-1),!L&&j){E=W;break}N++}return E||m},hB=function(t){var r=mn(t)?[]:t.toString().split(YJ);return[{words:r}]},j_e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,s=t.breakAll,o=t.maxLines;if((r||n)&&!Im.isSsr){var c,u,d=KJ({breakAll:s,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return hB(a);return L_e({breakAll:s,children:a,maxLines:o,style:i},c,u,r,n)}return hB(a)},pB="#808080",ig=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.lineHeight,o=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,w=t.verticalAnchor,g=w===void 0?"end":w,y=t.fill,b=y===void 0?pB:y,_=uB(t,T_e),N=S.useMemo(function(){return j_e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:f,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,f,_.style,_.width]),E=_.dx,C=_.dy,D=_.angle,P=_.className,F=_.breakAll,L=uB(_,O_e);if(!bs(n)||!bs(i))return null;var W=n+(Xt(E)?E:0),T=i+(Xt(C)?C:0),R;switch(g){case"start":R=WC("calc(".concat(u,")"));break;case"middle":R=WC("calc(".concat((N.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:R=WC("calc(".concat(N.length-1," * -").concat(o,")"));break}var j=[];if(f){var Y=N[0].width,Z=_.width;j.push("scale(".concat((Xt(Z)?Z/Y:1)/Y,")"))}return D&&j.push("rotate(".concat(D,", ").concat(W,", ").concat(T,")")),j.length&&(L.transform=j.join(" ")),l("text",{...Rr(L,!0),x:W,y:T,className:gn("recharts-text",P),textAnchor:m,fill:b.includes("url")?pB:b,children:N.map(function(re,z){var q=re.words.join(F?"":" ");return l("tspan",{x:W,dy:z===0?R:o,children:q},"".concat(q,"-").concat(z))})})};function rm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $_e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vI(e){let t,r,n;e.length!==2?(t=rm,r=(o,c)=>rm(e(o),c),n=(o,c)=>e(o)-c):(t=e===rm||e===$_e?e:B_e,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:s,right:i}}function B_e(){return 0}function XJ(e){return e===null?NaN:+e}function*U_e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const q_e=vI(rm),Xw=q_e.right;vI(XJ).center;class mB extends Map{constructor(t,r=V_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(gB(this,t))}has(t){return super.has(gB(this,t))}set(t,r){return super.set(W_e(this,t),r)}delete(t){return super.delete(z_e(this,t))}}function gB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function W_e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function z_e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function V_e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function H_e(e=rm){if(e===rm)return JJ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function JJ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const G_e=Math.sqrt(50),Y_e=Math.sqrt(10),K_e=Math.sqrt(2);function G5(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=G_e?10:i>=Y_e?5:i>=K_e?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/s,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?G5(e,t,r*2):[o,c,u]}function Q6(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,s]=n?G5(t,e,r):G5(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(s<0)for(let u=0;u<o;++u)c[u]=(i-u)/-s;else for(let u=0;u<o;++u)c[u]=(i-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(a+u)/-s;else for(let u=0;u<o;++u)c[u]=(a+u)*s;return c}function e8(e,t,r){return t=+t,e=+e,r=+r,G5(e,t,r)[2]}function t8(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?e8(t,e,r):e8(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function vB(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function yB(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ZJ(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?JJ:H_e(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),w=Math.min(n,Math.floor(t+(c-u)*f/c+h));ZJ(e,t,m,w,a)}const i=e[t];let s=r,o=n;for(c2(e,r,t),a(e[n],i)>0&&c2(e,r,n);s<o;){for(c2(e,s,o),++s,--o;a(e[s],i)<0;)++s;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?c2(e,r,o):(++o,c2(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function c2(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function X_e(e,t,r){if(e=Float64Array.from(U_e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return yB(e);if(t>=1)return vB(e);var n,a=(n-1)*t,i=Math.floor(a),s=vB(ZJ(e,i).subarray(0,i+1)),o=yB(e.subarray(i+1));return s+(o-s)*(a-i)}}function J_e(e,t,r=XJ){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),s=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return s+(o-s)*(a-i)}}function Z_e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function iu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Dh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const r8=Symbol("implicit");function yI(){var e=new mB,t=[],r=[],n=r8;function a(i){let s=e.get(i);if(s===void 0){if(n!==r8)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new mB;for(const s of i)e.has(s)||e.set(s,t.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return yI(t,r).unknown(n)},iu.apply(a,arguments),a}function Cx(){var e=yI().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,s,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,w=m?a:n,g=m?n:a;i=(g-w)/Math.max(1,h-c+u*2),o&&(i=Math.floor(i)),w+=(g-w-i*(h-c))*d,s=i*(1-c),o&&(w=Math.round(w),s=Math.round(s));var y=Z_e(h).map(function(b){return w+i*b});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Cx(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},iu.apply(f(),arguments)}function QJ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return QJ(t())},e}function H2(){return QJ(Cx.apply(null,arguments).paddingInner(1))}function xI(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function eZ(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jw(){}var Px=.7,Y5=1/Px,t1="\\s*([+-]?\\d+)\\s*",Tx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Q_e=/^#([0-9a-f]{3,8})$/,e5e=new RegExp(`^rgb\\(${t1},${t1},${t1}\\)$`),t5e=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),r5e=new RegExp(`^rgba\\(${t1},${t1},${t1},${Tx}\\)$`),n5e=new RegExp(`^rgba\\(${tf},${tf},${tf},${Tx}\\)$`),a5e=new RegExp(`^hsl\\(${Tx},${tf},${tf}\\)$`),i5e=new RegExp(`^hsla\\(${Tx},${tf},${tf},${Tx}\\)$`),xB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xI(Jw,Ox,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wB,formatHex:wB,formatHex8:s5e,formatHsl:o5e,formatRgb:bB,toString:bB});function wB(){return this.rgb().formatHex()}function s5e(){return this.rgb().formatHex8()}function o5e(){return tZ(this).formatHsl()}function bB(){return this.rgb().formatRgb()}function Ox(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Q_e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_B(t):r===3?new Il(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?b_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?b_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=e5e.exec(e))?new Il(t[1],t[2],t[3],1):(t=t5e.exec(e))?new Il(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=r5e.exec(e))?b_(t[1],t[2],t[3],t[4]):(t=n5e.exec(e))?b_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=a5e.exec(e))?AB(t[1],t[2]/100,t[3]/100,1):(t=i5e.exec(e))?AB(t[1],t[2]/100,t[3]/100,t[4]):xB.hasOwnProperty(e)?_B(xB[e]):e==="transparent"?new Il(NaN,NaN,NaN,0):null}function _B(e){return new Il(e>>16&255,e>>8&255,e&255,1)}function b_(e,t,r,n){return n<=0&&(e=t=r=NaN),new Il(e,t,r,n)}function l5e(e){return e instanceof Jw||(e=Ox(e)),e?(e=e.rgb(),new Il(e.r,e.g,e.b,e.opacity)):new Il}function n8(e,t,r,n){return arguments.length===1?l5e(e):new Il(e,t,r,n??1)}function Il(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}xI(Il,n8,eZ(Jw,{brighter(e){return e=e==null?Y5:Math.pow(Y5,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Px:Math.pow(Px,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Il(W0(this.r),W0(this.g),W0(this.b),K5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SB,formatHex:SB,formatHex8:c5e,formatRgb:NB,toString:NB}));function SB(){return`#${F0(this.r)}${F0(this.g)}${F0(this.b)}`}function c5e(){return`#${F0(this.r)}${F0(this.g)}${F0(this.b)}${F0((isNaN(this.opacity)?1:this.opacity)*255)}`}function NB(){const e=K5(this.opacity);return`${e===1?"rgb(":"rgba("}${W0(this.r)}, ${W0(this.g)}, ${W0(this.b)}${e===1?")":`, ${e})`}`}function K5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function W0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function F0(e){return e=W0(e),(e<16?"0":"")+e.toString(16)}function AB(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Uu(e,t,r,n)}function tZ(e){if(e instanceof Uu)return new Uu(e.h,e.s,e.l,e.opacity);if(e instanceof Jw||(e=Ox(e)),!e)return new Uu;if(e instanceof Uu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,o=i-a,c=(i+a)/2;return o?(t===i?s=(r-n)/o+(r<n)*6:r===i?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?i+a:2-i-a,s*=60):o=c>0&&c<1?0:s,new Uu(s,o,c,e.opacity)}function u5e(e,t,r,n){return arguments.length===1?tZ(e):new Uu(e,t,r,n??1)}function Uu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}xI(Uu,u5e,eZ(Jw,{brighter(e){return e=e==null?Y5:Math.pow(Y5,e),new Uu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Px:Math.pow(Px,e),new Uu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Il(zC(e>=240?e-240:e+120,a,n),zC(e,a,n),zC(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Uu(kB(this.h),__(this.s),__(this.l),K5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=K5(this.opacity);return`${e===1?"hsl(":"hsla("}${kB(this.h)}, ${__(this.s)*100}%, ${__(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kB(e){return e=(e||0)%360,e<0?e+360:e}function __(e){return Math.max(0,Math.min(1,e||0))}function zC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const wI=e=>()=>e;function d5e(e,t){return function(r){return e+r*t}}function f5e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function h5e(e){return(e=+e)==1?rZ:function(t,r){return r-t?f5e(t,r,e):wI(isNaN(t)?r:t)}}function rZ(e,t){var r=t-e;return r?d5e(e,r):wI(isNaN(e)?t:e)}const EB=function e(t){var r=h5e(t);function n(a,i){var s=r((a=n8(a)).r,(i=n8(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),u=rZ(a.opacity,i.opacity);return function(d){return a.r=s(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function p5e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function m5e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function g5e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Ny(e[s],t[s]);for(;s<r;++s)i[s]=t[s];return function(o){for(s=0;s<n;++s)i[s]=a[s](o);return i}}function v5e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function X5(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function y5e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Ny(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var a8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VC=new RegExp(a8.source,"g");function x5e(e){return function(){return e}}function w5e(e){return function(t){return e(t)+""}}function b5e(e,t){var r=a8.lastIndex=VC.lastIndex=0,n,a,i,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=a8.exec(e))&&(a=VC.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(a=a[0])?o[s]?o[s]+=a:o[++s]=a:(o[++s]=null,c.push({i:s,x:X5(n,a)})),r=VC.lastIndex;return r<t.length&&(i=t.slice(r),o[s]?o[s]+=i:o[++s]=i),o.length<2?c[0]?w5e(c[0].x):x5e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Ny(e,t){var r=typeof t,n;return t==null||r==="boolean"?wI(t):(r==="number"?X5:r==="string"?(n=Ox(t))?(t=n,EB):b5e:t instanceof Ox?EB:t instanceof Date?v5e:m5e(t)?p5e:Array.isArray(t)?g5e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?y5e:X5)(e,t)}function bI(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function _5e(e,t){t===void 0&&(t=e,e=Ny);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[o](s-o)}}function S5e(e){return function(){return e}}function J5(e){return+e}var CB=[0,1];function dl(e){return e}function i8(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:S5e(isNaN(t)?NaN:.5)}function N5e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function A5e(e,t,r){var n=e[0],a=e[1],i=t[0],s=t[1];return a<n?(n=i8(a,n),i=r(s,i)):(n=i8(n,a),i=r(i,s)),function(o){return i(n(o))}}function k5e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)a[s]=i8(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(o){var c=Xw(e,o,1,n)-1;return i[c](a[c](o))}}function Zw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cN(){var e=CB,t=CB,r=Ny,n,a,i,s=dl,o,c,u;function d(){var h=Math.min(e.length,t.length);return s!==dl&&(s=N5e(e[0],e[h-1])),o=h>2?k5e:A5e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=o(e.map(n),t,r)))(n(s(h)))}return f.invert=function(h){return s(a((u||(u=o(t,e.map(n),X5)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,J5),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=bI,d()},f.clamp=function(h){return arguments.length?(s=h?!0:dl,d()):s!==dl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function _I(){return cN()(dl,dl)}function E5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Z5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function k1(e){return e=Z5(Math.abs(e)),e?e[1]:NaN}function C5e(e,t){return function(r,n){for(var a=r.length,i=[],s=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(t)}}function P5e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var T5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dx(e){if(!(t=T5e.exec(e)))throw new Error("invalid format: "+e);var t;return new SI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dx.prototype=SI.prototype;function SI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function O5e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var nZ;function D5e(e,t){var r=Z5(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(nZ=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Z5(e,Math.max(0,t+i-1))[0]}function PB(e,t){var r=Z5(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const TB={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:E5e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>PB(e*100,t),r:PB,s:D5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OB(e){return e}var DB=Array.prototype.map,IB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function I5e(e){var t=e.grouping===void 0||e.thousands===void 0?OB:C5e(DB.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?OB:P5e(DB.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Dx(f);var h=f.fill,m=f.align,w=f.sign,g=f.symbol,y=f.zero,b=f.width,_=f.comma,N=f.precision,E=f.trim,C=f.type;C==="n"?(_=!0,C="g"):TB[C]||(N===void 0&&(N=12),E=!0,C="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",P=g==="$"?n:/[%p]/.test(C)?s:"",F=TB[C],L=/[defgprs%]/.test(C);N=N===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function W(T){var R=D,j=P,Y,Z,re;if(C==="c")j=F(T)+j,T="";else{T=+T;var z=T<0||1/T<0;if(T=isNaN(T)?c:F(Math.abs(T),N),E&&(T=O5e(T)),z&&+T==0&&w!=="+"&&(z=!1),R=(z?w==="("?w:o:w==="-"||w==="("?"":w)+R,j=(C==="s"?IB[8+nZ/3]:"")+j+(z&&w==="("?")":""),L){for(Y=-1,Z=T.length;++Y<Z;)if(re=T.charCodeAt(Y),48>re||re>57){j=(re===46?a+T.slice(Y+1):T.slice(Y))+j,T=T.slice(0,Y);break}}}_&&!y&&(T=t(T,1/0));var q=R.length+T.length+j.length,B=q<b?new Array(b-q+1).join(h):"";switch(_&&y&&(T=t(B+T,B.length?b-j.length:1/0),B=""),m){case"<":T=R+T+j+B;break;case"=":T=R+B+T+j;break;case"^":T=B.slice(0,q=B.length>>1)+R+T+j+B.slice(q);break;default:T=B+R+T+j;break}return i(T)}return W.toString=function(){return f+""},W}function d(f,h){var m=u((f=Dx(f),f.type="f",f)),w=Math.max(-8,Math.min(8,Math.floor(k1(h)/3)))*3,g=Math.pow(10,-w),y=IB[8+w/3];return function(b){return m(g*b)+y}}return{format:u,formatPrefix:d}}var S_,NI,aZ;R5e({thousands:",",grouping:[3],currency:["$",""]});function R5e(e){return S_=I5e(e),NI=S_.format,aZ=S_.formatPrefix,S_}function M5e(e){return Math.max(0,-k1(Math.abs(e)))}function F5e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k1(t)/3)))*3-k1(Math.abs(e)))}function L5e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,k1(t)-k1(e))+1}function iZ(e,t,r,n){var a=t8(e,t,r),i;switch(n=Dx(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=F5e(a,s))&&(n.precision=i),aZ(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=L5e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=M5e(a))&&(n.precision=i-(n.type==="%")*2);break}}return NI(n)}function Rm(e){var t=e.domain;return e.ticks=function(r){var n=t();return Q6(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return iZ(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,s=n[a],o=n[i],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=a,a=i,i=u);d-- >0;){if(u=e8(s,o,r),u===c)return n[a]=s,n[i]=o,t(n);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function Q5(){var e=_I();return e.copy=function(){return Zw(e,Q5())},iu.apply(e,arguments),Rm(e)}function sZ(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,J5),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return sZ(e).unknown(t)},e=arguments.length?Array.from(e,J5):[0,1],Rm(r)}function oZ(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),e[r]=t.floor(a),e[n]=t.ceil(i),e}function RB(e){return Math.log(e)}function MB(e){return Math.exp(e)}function j5e(e){return-Math.log(-e)}function $5e(e){return-Math.exp(-e)}function B5e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function U5e(e){return e===10?B5e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q5e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FB(e){return(t,r)=>-e(-t,r)}function AI(e){const t=e(RB,MB),r=t.domain;let n=10,a,i;function s(){return a=q5e(n),i=U5e(n),r()[0]<0?(a=FB(a),i=FB(i),e(j5e,$5e)):e(RB,MB),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),w,g;const y=o==null?10:+o;let b=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(w=1;w<n;++w)if(g=h<0?w/i(-h):w*i(h),!(g<u)){if(g>d)break;b.push(g)}}else for(;h<=m;++h)for(w=n-1;w>=1;--w)if(g=h>0?w/i(-h):w*i(h),!(g<u)){if(g>d)break;b.push(g)}b.length*2<y&&(b=Q6(u,d,y))}else b=Q6(h,m,Math.min(m-h,y)).map(i);return f?b.reverse():b},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Dx(c)).precision==null&&(c.trim=!0),c=NI(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(oZ(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function lZ(){const e=AI(cN()).domain([1,10]);return e.copy=()=>Zw(e,lZ()).base(e.base()),iu.apply(e,arguments),e}function LB(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function jB(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kI(e){var t=1,r=e(LB(t),jB(t));return r.constant=function(n){return arguments.length?e(LB(t=+n),jB(t)):t},Rm(r)}function cZ(){var e=kI(cN());return e.copy=function(){return Zw(e,cZ()).constant(e.constant())},iu.apply(e,arguments)}function $B(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function W5e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function z5e(e){return e<0?-e*e:e*e}function EI(e){var t=e(dl,dl),r=1;function n(){return r===1?e(dl,dl):r===.5?e(W5e,z5e):e($B(r),$B(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Rm(t)}function CI(){var e=EI(cN());return e.copy=function(){return Zw(e,CI()).exponent(e.exponent())},iu.apply(e,arguments),e}function V5e(){return CI.apply(null,arguments).exponent(.5)}function BB(e){return Math.sign(e)*e*e}function H5e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uZ(){var e=_I(),t=[0,1],r=!1,n;function a(i){var s=H5e(e(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return e.invert(BB(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,J5)).map(BB)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return uZ(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},iu.apply(a,arguments),Rm(a)}function dZ(){var e=[],t=[],r=[],n;function a(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=J_e(e,s/o);return i}function i(s){return s==null||isNaN(s=+s)?n:t[Xw(r,s)]}return i.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(rm),a()},i.range=function(s){return arguments.length?(t=Array.from(s),a()):t.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return dZ().domain(e).range(t).unknown(n)},iu.apply(i,arguments)}function fZ(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function s(c){return c!=null&&c<=c?a[Xw(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},s.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(i=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return fZ().domain([e,t]).range(a).unknown(i)},iu.apply(Rm(s),arguments)}function hZ(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Xw(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var s=t.indexOf(i);return[e[s-1],e[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return hZ().domain(e).range(t).unknown(r)},iu.apply(a,arguments)}const HC=new Date,GC=new Date;function Ns(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const s=a(i),o=a.ceil(i);return i-s<o-i?s:o},a.offset=(i,s)=>(t(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<s)||!(o>0))return c;let u;do c.push(u=new Date(+i)),t(i,o),e(i);while(u<i&&i<s);return c},a.filter=i=>Ns(s=>{if(s>=s)for(;e(s),!i(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!i(s););else for(;--o>=0;)for(;t(s,1),!i(s););}),r&&(a.count=(i,s)=>(HC.setTime(+i),GC.setTime(+s),e(HC),e(GC),Math.floor(r(HC,GC))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const eS=Ns(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);eS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ns(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):eS);eS.range;const lh=1e3,Qc=lh*60,ch=Qc*60,bh=ch*24,PI=bh*7,UB=bh*30,YC=bh*365,L0=Ns(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lh)},(e,t)=>(t-e)/lh,e=>e.getUTCSeconds());L0.range;const TI=Ns(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh)},(e,t)=>{e.setTime(+e+t*Qc)},(e,t)=>(t-e)/Qc,e=>e.getMinutes());TI.range;const OI=Ns(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qc)},(e,t)=>(t-e)/Qc,e=>e.getUTCMinutes());OI.range;const DI=Ns(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lh-e.getMinutes()*Qc)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getHours());DI.range;const II=Ns(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ch)},(e,t)=>(t-e)/ch,e=>e.getUTCHours());II.range;const Qw=Ns(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qc)/bh,e=>e.getDate()-1);Qw.range;const uN=Ns(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bh,e=>e.getUTCDate()-1);uN.range;const pZ=Ns(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bh,e=>Math.floor(e/bh));pZ.range;function Tg(e){return Ns(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Qc)/PI)}const dN=Tg(0),tS=Tg(1),G5e=Tg(2),Y5e=Tg(3),E1=Tg(4),K5e=Tg(5),X5e=Tg(6);dN.range;tS.range;G5e.range;Y5e.range;E1.range;K5e.range;X5e.range;function Og(e){return Ns(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/PI)}const fN=Og(0),rS=Og(1),J5e=Og(2),Z5e=Og(3),C1=Og(4),Q5e=Og(5),eSe=Og(6);fN.range;rS.range;J5e.range;Z5e.range;C1.range;Q5e.range;eSe.range;const RI=Ns(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());RI.range;const MI=Ns(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());MI.range;const _h=Ns(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_h.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ns(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_h.range;const Sh=Ns(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ns(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Sh.range;function mZ(e,t,r,n,a,i){const s=[[L0,1,lh],[L0,5,5*lh],[L0,15,15*lh],[L0,30,30*lh],[i,1,Qc],[i,5,5*Qc],[i,15,15*Qc],[i,30,30*Qc],[a,1,ch],[a,3,3*ch],[a,6,6*ch],[a,12,12*ch],[n,1,bh],[n,2,2*bh],[r,1,PI],[t,1,UB],[t,3,3*UB],[e,1,YC]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),w=m?m.range(u,+d+1):[];return h?w.reverse():w}function c(u,d,f){const h=Math.abs(d-u)/f,m=vI(([,,y])=>y).right(s,h);if(m===s.length)return e.every(t8(u/YC,d/YC,f));if(m===0)return eS.every(Math.max(t8(u,d,f),1));const[w,g]=s[h/s[m-1][2]<s[m][2]/h?m-1:m];return w.every(g)}return[o,c]}const[tSe,rSe]=mZ(Sh,MI,fN,pZ,II,OI),[nSe,aSe]=mZ(_h,RI,dN,Qw,DI,TI);function KC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function XC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function u2(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function iSe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=d2(a),d=f2(a),f=d2(i),h=f2(i),m=d2(s),w=f2(s),g=d2(o),y=f2(o),b=d2(c),_=f2(c),N={a:z,A:q,b:B,B:G,c:null,d:GB,e:GB,f:CSe,g:jSe,G:BSe,H:ASe,I:kSe,j:ESe,L:gZ,m:PSe,M:TSe,p:Q,q:O,Q:XB,s:JB,S:OSe,u:DSe,U:ISe,V:RSe,w:MSe,W:FSe,x:null,X:null,y:LSe,Y:$Se,Z:USe,"%":KB},E={a:J,A:X,b:ne,B:ie,c:null,d:YB,e:YB,f:VSe,g:t4e,G:n4e,H:qSe,I:WSe,j:zSe,L:yZ,m:HSe,M:GSe,p:oe,q:de,Q:XB,s:JB,S:YSe,u:KSe,U:XSe,V:JSe,w:ZSe,W:QSe,x:null,X:null,y:e4e,Y:r4e,Z:a4e,"%":KB},C={a:W,A:T,b:R,B:j,c:Y,d:VB,e:VB,f:bSe,g:zB,G:WB,H:HB,I:HB,j:vSe,L:wSe,m:gSe,M:ySe,p:L,q:mSe,Q:SSe,s:NSe,S:xSe,u:uSe,U:dSe,V:fSe,w:cSe,W:hSe,x:Z,X:re,y:zB,Y:WB,Z:pSe,"%":_Se};N.x=D(r,N),N.X=D(n,N),N.c=D(t,N),E.x=D(r,E),E.X=D(n,E),E.c=D(t,E);function D(V,se){return function(fe){var te=[],ke=-1,Re=0,Ce=V.length,ve,Ge,pt;for(fe instanceof Date||(fe=new Date(+fe));++ke<Ce;)V.charCodeAt(ke)===37&&(te.push(V.slice(Re,ke)),(Ge=qB[ve=V.charAt(++ke)])!=null?ve=V.charAt(++ke):Ge=ve==="e"?" ":"0",(pt=se[ve])&&(ve=pt(fe,Ge)),te.push(ve),Re=ke+1);return te.push(V.slice(Re,ke)),te.join("")}}function P(V,se){return function(fe){var te=u2(1900,void 0,1),ke=F(te,V,fe+="",0),Re,Ce;if(ke!=fe.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(se&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Re=XC(u2(te.y,0,1)),Ce=Re.getUTCDay(),Re=Ce>4||Ce===0?rS.ceil(Re):rS(Re),Re=uN.offset(Re,(te.V-1)*7),te.y=Re.getUTCFullYear(),te.m=Re.getUTCMonth(),te.d=Re.getUTCDate()+(te.w+6)%7):(Re=KC(u2(te.y,0,1)),Ce=Re.getDay(),Re=Ce>4||Ce===0?tS.ceil(Re):tS(Re),Re=Qw.offset(Re,(te.V-1)*7),te.y=Re.getFullYear(),te.m=Re.getMonth(),te.d=Re.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Ce="Z"in te?XC(u2(te.y,0,1)).getUTCDay():KC(u2(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Ce+5)%7:te.w+te.U*7-(Ce+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,XC(te)):KC(te)}}function F(V,se,fe,te){for(var ke=0,Re=se.length,Ce=fe.length,ve,Ge;ke<Re;){if(te>=Ce)return-1;if(ve=se.charCodeAt(ke++),ve===37){if(ve=se.charAt(ke++),Ge=C[ve in qB?se.charAt(ke++):ve],!Ge||(te=Ge(V,fe,te))<0)return-1}else if(ve!=fe.charCodeAt(te++))return-1}return te}function L(V,se,fe){var te=u.exec(se.slice(fe));return te?(V.p=d.get(te[0].toLowerCase()),fe+te[0].length):-1}function W(V,se,fe){var te=m.exec(se.slice(fe));return te?(V.w=w.get(te[0].toLowerCase()),fe+te[0].length):-1}function T(V,se,fe){var te=f.exec(se.slice(fe));return te?(V.w=h.get(te[0].toLowerCase()),fe+te[0].length):-1}function R(V,se,fe){var te=b.exec(se.slice(fe));return te?(V.m=_.get(te[0].toLowerCase()),fe+te[0].length):-1}function j(V,se,fe){var te=g.exec(se.slice(fe));return te?(V.m=y.get(te[0].toLowerCase()),fe+te[0].length):-1}function Y(V,se,fe){return F(V,t,se,fe)}function Z(V,se,fe){return F(V,r,se,fe)}function re(V,se,fe){return F(V,n,se,fe)}function z(V){return s[V.getDay()]}function q(V){return i[V.getDay()]}function B(V){return c[V.getMonth()]}function G(V){return o[V.getMonth()]}function Q(V){return a[+(V.getHours()>=12)]}function O(V){return 1+~~(V.getMonth()/3)}function J(V){return s[V.getUTCDay()]}function X(V){return i[V.getUTCDay()]}function ne(V){return c[V.getUTCMonth()]}function ie(V){return o[V.getUTCMonth()]}function oe(V){return a[+(V.getUTCHours()>=12)]}function de(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var se=D(V+="",N);return se.toString=function(){return V},se},parse:function(V){var se=P(V+="",!1);return se.toString=function(){return V},se},utcFormat:function(V){var se=D(V+="",E);return se.toString=function(){return V},se},utcParse:function(V){var se=P(V+="",!0);return se.toString=function(){return V},se}}}var qB={"-":"",_:" ",0:"0"},zs=/^\s*\d+/,sSe=/^%/,oSe=/[\\^$*+?|[\]().{}]/g;function oa(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function lSe(e){return e.replace(oSe,"\\$&")}function d2(e){return new RegExp("^(?:"+e.map(lSe).join("|")+")","i")}function f2(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function cSe(e,t,r){var n=zs.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function uSe(e,t,r){var n=zs.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function dSe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function fSe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function hSe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function WB(e,t,r){var n=zs.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function zB(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function pSe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function mSe(e,t,r){var n=zs.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function gSe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function VB(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function vSe(e,t,r){var n=zs.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function HB(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ySe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function xSe(e,t,r){var n=zs.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function wSe(e,t,r){var n=zs.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function bSe(e,t,r){var n=zs.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _Se(e,t,r){var n=sSe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function SSe(e,t,r){var n=zs.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function NSe(e,t,r){var n=zs.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function GB(e,t){return oa(e.getDate(),t,2)}function ASe(e,t){return oa(e.getHours(),t,2)}function kSe(e,t){return oa(e.getHours()%12||12,t,2)}function ESe(e,t){return oa(1+Qw.count(_h(e),e),t,3)}function gZ(e,t){return oa(e.getMilliseconds(),t,3)}function CSe(e,t){return gZ(e,t)+"000"}function PSe(e,t){return oa(e.getMonth()+1,t,2)}function TSe(e,t){return oa(e.getMinutes(),t,2)}function OSe(e,t){return oa(e.getSeconds(),t,2)}function DSe(e){var t=e.getDay();return t===0?7:t}function ISe(e,t){return oa(dN.count(_h(e)-1,e),t,2)}function vZ(e){var t=e.getDay();return t>=4||t===0?E1(e):E1.ceil(e)}function RSe(e,t){return e=vZ(e),oa(E1.count(_h(e),e)+(_h(e).getDay()===4),t,2)}function MSe(e){return e.getDay()}function FSe(e,t){return oa(tS.count(_h(e)-1,e),t,2)}function LSe(e,t){return oa(e.getFullYear()%100,t,2)}function jSe(e,t){return e=vZ(e),oa(e.getFullYear()%100,t,2)}function $Se(e,t){return oa(e.getFullYear()%1e4,t,4)}function BSe(e,t){var r=e.getDay();return e=r>=4||r===0?E1(e):E1.ceil(e),oa(e.getFullYear()%1e4,t,4)}function USe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oa(t/60|0,"0",2)+oa(t%60,"0",2)}function YB(e,t){return oa(e.getUTCDate(),t,2)}function qSe(e,t){return oa(e.getUTCHours(),t,2)}function WSe(e,t){return oa(e.getUTCHours()%12||12,t,2)}function zSe(e,t){return oa(1+uN.count(Sh(e),e),t,3)}function yZ(e,t){return oa(e.getUTCMilliseconds(),t,3)}function VSe(e,t){return yZ(e,t)+"000"}function HSe(e,t){return oa(e.getUTCMonth()+1,t,2)}function GSe(e,t){return oa(e.getUTCMinutes(),t,2)}function YSe(e,t){return oa(e.getUTCSeconds(),t,2)}function KSe(e){var t=e.getUTCDay();return t===0?7:t}function XSe(e,t){return oa(fN.count(Sh(e)-1,e),t,2)}function xZ(e){var t=e.getUTCDay();return t>=4||t===0?C1(e):C1.ceil(e)}function JSe(e,t){return e=xZ(e),oa(C1.count(Sh(e),e)+(Sh(e).getUTCDay()===4),t,2)}function ZSe(e){return e.getUTCDay()}function QSe(e,t){return oa(rS.count(Sh(e)-1,e),t,2)}function e4e(e,t){return oa(e.getUTCFullYear()%100,t,2)}function t4e(e,t){return e=xZ(e),oa(e.getUTCFullYear()%100,t,2)}function r4e(e,t){return oa(e.getUTCFullYear()%1e4,t,4)}function n4e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?C1(e):C1.ceil(e),oa(e.getUTCFullYear()%1e4,t,4)}function a4e(){return"+0000"}function KB(){return"%"}function XB(e){return+e}function JB(e){return Math.floor(+e/1e3)}var Ev,wZ,bZ;i4e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function i4e(e){return Ev=iSe(e),wZ=Ev.format,Ev.parse,bZ=Ev.utcFormat,Ev.utcParse,Ev}function s4e(e){return new Date(e)}function o4e(e){return e instanceof Date?+e:+new Date(+e)}function FI(e,t,r,n,a,i,s,o,c,u){var d=_I(),f=d.invert,h=d.domain,m=u(".%L"),w=u(":%S"),g=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),_=u("%b %d"),N=u("%B"),E=u("%Y");function C(D){return(c(D)<D?m:o(D)<D?w:s(D)<D?g:i(D)<D?y:n(D)<D?a(D)<D?b:_:r(D)<D?N:E)(D)}return d.invert=function(D){return new Date(f(D))},d.domain=function(D){return arguments.length?h(Array.from(D,o4e)):h().map(s4e)},d.ticks=function(D){var P=h();return e(P[0],P[P.length-1],D??10)},d.tickFormat=function(D,P){return P==null?C:u(P)},d.nice=function(D){var P=h();return(!D||typeof D.range!="function")&&(D=t(P[0],P[P.length-1],D??10)),D?h(oZ(P,D)):d},d.copy=function(){return Zw(d,FI(e,t,r,n,a,i,s,o,c,u))},d}function l4e(){return iu.apply(FI(nSe,aSe,_h,RI,dN,Qw,DI,TI,L0,wZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function c4e(){return iu.apply(FI(tSe,rSe,Sh,MI,fN,uN,II,OI,L0,bZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hN(){var e=0,t=1,r,n,a,i,s=dl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(a===0?.5:(f=(i(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var m,w;return arguments.length?([m,w]=h,s=f(m,w),u):[s(0),s(1)]}}return u.range=d(Ny),u.rangeRound=d(bI),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Mm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _Z(){var e=Rm(hN()(dl));return e.copy=function(){return Mm(e,_Z())},Dh.apply(e,arguments)}function SZ(){var e=AI(hN()).domain([1,10]);return e.copy=function(){return Mm(e,SZ()).base(e.base())},Dh.apply(e,arguments)}function NZ(){var e=kI(hN());return e.copy=function(){return Mm(e,NZ()).constant(e.constant())},Dh.apply(e,arguments)}function LI(){var e=EI(hN());return e.copy=function(){return Mm(e,LI()).exponent(e.exponent())},Dh.apply(e,arguments)}function u4e(){return LI.apply(null,arguments).exponent(.5)}function AZ(){var e=[],t=dl;function r(n){if(n!=null&&!isNaN(n=+n))return t((Xw(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(rm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>X_e(e,i/n))},r.copy=function(){return AZ(t).domain(e)},Dh.apply(r,arguments)}function pN(){var e=0,t=.5,r=1,n=1,a,i,s,o,c,u=dl,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?o:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),s=d(r=+r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function w(g){return function(y){var b,_,N;return arguments.length?([b,_,N]=y,u=_5e(g,[b,_,N]),m):[u(0),u(.5),u(1)]}}return m.range=w(Ny),m.rangeRound=w(bI),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,a=g(e),i=g(t),s=g(r),o=a===i?0:.5/(i-a),c=i===s?0:.5/(s-i),n=i<a?-1:1,m}}function kZ(){var e=Rm(pN()(dl));return e.copy=function(){return Mm(e,kZ())},Dh.apply(e,arguments)}function EZ(){var e=AI(pN()).domain([.1,1,10]);return e.copy=function(){return Mm(e,EZ()).base(e.base())},Dh.apply(e,arguments)}function CZ(){var e=kI(pN());return e.copy=function(){return Mm(e,CZ()).constant(e.constant())},Dh.apply(e,arguments)}function jI(){var e=EI(pN());return e.copy=function(){return Mm(e,jI()).exponent(e.exponent())},Dh.apply(e,arguments)}function d4e(){return jI.apply(null,arguments).exponent(.5)}const ZB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Cx,scaleDiverging:kZ,scaleDivergingLog:EZ,scaleDivergingPow:jI,scaleDivergingSqrt:d4e,scaleDivergingSymlog:CZ,scaleIdentity:sZ,scaleImplicit:r8,scaleLinear:Q5,scaleLog:lZ,scaleOrdinal:yI,scalePoint:H2,scalePow:CI,scaleQuantile:dZ,scaleQuantize:fZ,scaleRadial:uZ,scaleSequential:_Z,scaleSequentialLog:SZ,scaleSequentialPow:LI,scaleSequentialQuantile:AZ,scaleSequentialSqrt:u4e,scaleSequentialSymlog:NZ,scaleSqrt:V5e,scaleSymlog:cZ,scaleThreshold:hZ,scaleTime:l4e,scaleUtc:c4e,tickFormat:iZ},Symbol.toStringTag,{value:"Module"}));var JC,QB;function mN(){if(QB)return JC;QB=1;var e=wy();function t(r,n,a){for(var i=-1,s=r.length;++i<s;){var o=r[i],c=n(o);if(c!=null&&(u===void 0?c===c&&!e(c):a(c,u)))var u=c,d=o}return d}return JC=t,JC}var ZC,eU;function PZ(){if(eU)return ZC;eU=1;function e(t,r){return t>r}return ZC=e,ZC}var QC,tU;function f4e(){if(tU)return QC;tU=1;var e=mN(),t=PZ(),r=Sy();function n(a){return a&&a.length?e(a,r,t):void 0}return QC=n,QC}var h4e=f4e();const Kp=pa(h4e);var eP,rU;function TZ(){if(rU)return eP;rU=1;function e(t,r){return t<r}return eP=e,eP}var tP,nU;function p4e(){if(nU)return tP;nU=1;var e=mN(),t=TZ(),r=Sy();function n(a){return a&&a.length?e(a,r,t):void 0}return tP=n,tP}var m4e=p4e();const gN=pa(m4e);var rP,aU;function g4e(){if(aU)return rP;aU=1;var e=eI(),t=yf(),r=jJ(),n=Wl();function a(i,s){var o=n(i)?e:r;return o(i,t(s,3))}return rP=a,rP}var nP,iU;function v4e(){if(iU)return nP;iU=1;var e=FJ(),t=g4e();function r(n,a){return e(t(n,a),1)}return nP=r,nP}var y4e=v4e();const x4e=pa(y4e);var aP,sU;function w4e(){if(sU)return aP;sU=1;var e=hI();function t(r,n){return e(r,n)}return aP=t,aP}var b4e=w4e();const sg=pa(b4e);var Ay=1e9,_4e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BI,li=!0,ru="[DecimalError] ",z0=ru+"Invalid argument: ",$I=ru+"Exponent out of range: ",ky=Math.floor,E0=Math.pow,S4e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fc,Ms=1e7,Za=7,OZ=9007199254740991,nS=ky(OZ/Za),kr={};kr.absoluteValue=kr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};kr.comparedTo=kr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kr.decimalPlaces=kr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Za;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};kr.dividedBy=kr.div=function(e){return ph(this,new this.constructor(e))};kr.dividedToIntegerBy=kr.idiv=function(e){var t=this,r=t.constructor;return Ma(ph(t,new r(e),0,1),r.precision)};kr.equals=kr.eq=function(e){return!this.cmp(e)};kr.exponent=function(){return ds(this)};kr.greaterThan=kr.gt=function(e){return this.cmp(e)>0};kr.greaterThanOrEqualTo=kr.gte=function(e){return this.cmp(e)>=0};kr.isInteger=kr.isint=function(){return this.e>this.d.length-2};kr.isNegative=kr.isneg=function(){return this.s<0};kr.isPositive=kr.ispos=function(){return this.s>0};kr.isZero=function(){return this.s===0};kr.lessThan=kr.lt=function(e){return this.cmp(e)<0};kr.lessThanOrEqualTo=kr.lte=function(e){return this.cmp(e)<1};kr.logarithm=kr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(fc))throw Error(ru+"NaN");if(r.s<1)throw Error(ru+(r.s?"NaN":"-Infinity"));return r.eq(fc)?new n(0):(li=!1,t=ph(Ix(r,i),Ix(e,i),i),li=!0,Ma(t,a))};kr.minus=kr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RZ(t,e):DZ(t,(e.s=-e.s,e))};kr.modulo=kr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ru+"NaN");return r.s?(li=!1,t=ph(r,e,0,1).times(e),li=!0,r.minus(t)):Ma(new n(r),a)};kr.naturalExponential=kr.exp=function(){return IZ(this)};kr.naturalLogarithm=kr.ln=function(){return Ix(this)};kr.negated=kr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};kr.plus=kr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DZ(t,e):RZ(t,(e.s=-e.s,e))};kr.precision=kr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(z0+e);if(t=ds(a)+1,n=a.d.length-1,r=n*Za+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};kr.squareRoot=kr.sqrt=function(){var e,t,r,n,a,i,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(ru+"NaN")}for(e=ds(o),li=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=Gd(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ky((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=s=r+3;;)if(i=n,n=i.plus(ph(o,i,s+2)).times(.5),Gd(i.d).slice(0,s)===(t=Gd(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&t=="4999"){if(Ma(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;s+=4}return li=!0,Ma(n,r)};kr.times=kr.mul=function(e){var t,r,n,a,i,s,o,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,s=c,c=u,u=s),i=[],s=c+u,n=s;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+m[n]*h[a-n-1]+t,i[a--]=o%Ms|0,t=o/Ms|0;i[a]=(i[a]+t)%Ms|0}for(;!i[--s];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,li?Ma(e,f.precision):e};kr.toDecimalPlaces=kr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ff(e,0,Ay),t===void 0?t=n.rounding:ff(t,0,8),Ma(r,e+ds(r)+1,t))};kr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=og(n,!0):(ff(e,0,Ay),t===void 0?t=a.rounding:ff(t,0,8),n=Ma(new a(n),e+1,t),r=og(n,!0,e+1)),r};kr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?og(a):(ff(e,0,Ay),t===void 0?t=i.rounding:ff(t,0,8),n=Ma(new i(a),e+ds(a)+1,t),r=og(n.abs(),!1,e+ds(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kr.toInteger=kr.toint=function(){var e=this,t=e.constructor;return Ma(new t(e),ds(e)+1,t.rounding)};kr.toNumber=function(){return+this};kr.toPower=kr.pow=function(e){var t,r,n,a,i,s,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(fc);if(o=new c(o),!o.s){if(e.s<1)throw Error(ru+"Infinity");return o}if(o.eq(fc))return o;if(n=c.precision,e.eq(fc))return Ma(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,i=o.s,s){if((r=d<0?-d:d)<=OZ){for(a=new c(fc),t=Math.ceil(n/Za+4),li=!1;r%2&&(a=a.times(o),lU(a.d,t)),r=ky(r/2),r!==0;)o=o.times(o),lU(o.d,t);return li=!0,e.s<0?new c(fc).div(a):Ma(a,n)}}else if(i<0)throw Error(ru+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,li=!1,a=e.times(Ix(o,n+u)),li=!0,a=IZ(a),a.s=i,a};kr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=ds(a),n=og(a,r<=i.toExpNeg||r>=i.toExpPos)):(ff(e,1,Ay),t===void 0?t=i.rounding:ff(t,0,8),a=Ma(new i(a),e,t),r=ds(a),n=og(a,e<=r||r<=i.toExpNeg,e)),n};kr.toSignificantDigits=kr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ff(e,1,Ay),t===void 0?t=n.rounding:ff(t,0,8)),Ma(new n(r),e,t)};kr.toString=kr.valueOf=kr.val=kr.toJSON=kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ds(e),r=e.constructor;return og(e,t<=r.toExpNeg||t>=r.toExpPos)};function DZ(e,t){var r,n,a,i,s,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),li?Ma(t,f):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),i=s-a,i){for(i<0?(n=c,i=-i,o=u.length):(n=u,a=s,o=c.length),s=Math.ceil(f/Za),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=u.length,o-i<0&&(i=o,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Ms|0,c[i]%=Ms;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,li?Ma(t,f):t}function ff(e,t,r){if(e!==~~e||e<t||e>r)throw Error(z0+e)}function Gd(e){var t,r,n,a=e.length-1,i="",s=e[0];if(a>0){for(i+=s,t=1;t<a;t++)n=e[t]+"",r=Za-n.length,r&&(i+=Wp(r)),i+=n;s=e[t],n=s+"",r=Za-n.length,r&&(i+=Wp(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var ph=function(){function e(n,a){var i,s=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+s,n[o]=i%Ms|0,s=i/Ms|0;return s&&n.unshift(s),n}function t(n,a,i,s){var o,c;if(i!=s)c=i>s?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Ms+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var o,c,u,d,f,h,m,w,g,y,b,_,N,E,C,D,P,F,L=n.constructor,W=n.s==a.s?1:-1,T=n.d,R=a.d;if(!n.s)return new L(n);if(!a.s)throw Error(ru+"Division by zero");for(c=n.e-a.e,P=R.length,C=T.length,m=new L(W),w=m.d=[],u=0;R[u]==(T[u]||0);)++u;if(R[u]>(T[u]||0)&&--c,i==null?_=i=L.precision:s?_=i+(ds(n)-ds(a))+1:_=i,_<0)return new L(0);if(_=_/Za+2|0,u=0,P==1)for(d=0,R=R[0],_++;(u<C||d)&&_--;u++)N=d*Ms+(T[u]||0),w[u]=N/R|0,d=N%R|0;else{for(d=Ms/(R[0]+1)|0,d>1&&(R=e(R,d),T=e(T,d),P=R.length,C=T.length),E=P,g=T.slice(0,P),y=g.length;y<P;)g[y++]=0;F=R.slice(),F.unshift(0),D=R[0],R[1]>=Ms/2&&++D;do d=0,o=t(R,g,P,y),o<0?(b=g[0],P!=y&&(b=b*Ms+(g[1]||0)),d=b/D|0,d>1?(d>=Ms&&(d=Ms-1),f=e(R,d),h=f.length,y=g.length,o=t(f,g,h,y),o==1&&(d--,r(f,P<h?F:R,h))):(d==0&&(o=d=1),f=R.slice()),h=f.length,h<y&&f.unshift(0),r(g,f,y),o==-1&&(y=g.length,o=t(R,g,P,y),o<1&&(d++,r(g,P<y?F:R,y))),y=g.length):o===0&&(d++,g=[0]),w[u++]=d,o&&g[0]?g[y++]=T[E]||0:(g=[T[E]],y=1);while((E++<C||g[0]!==void 0)&&_--)}return w[0]||w.shift(),m.e=c,Ma(m,s?i+ds(m)+1:i)}}();function IZ(e,t){var r,n,a,i,s,o,c=0,u=0,d=e.constructor,f=d.precision;if(ds(e)>16)throw Error($I+ds(e));if(!e.s)return new d(fc);for(li=!1,o=f,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(E0(2,u))/Math.LN10*2+5|0,o+=n,r=a=i=new d(fc),d.precision=o;;){if(a=Ma(a.times(e),o),r=r.times(++c),s=i.plus(ph(a,r,o)),Gd(s.d).slice(0,o)===Gd(i.d).slice(0,o)){for(;u--;)i=Ma(i.times(i),o);return d.precision=f,t==null?(li=!0,Ma(i,f)):i}i=s}}function ds(e){for(var t=e.e*Za,r=e.d[0];r>=10;r/=10)t++;return t}function iP(e,t,r){if(t>e.LN10.sd())throw li=!0,r&&(e.precision=r),Error(ru+"LN10 precision limit exceeded");return Ma(new e(e.LN10),t)}function Wp(e){for(var t="";e--;)t+="0";return t}function Ix(e,t){var r,n,a,i,s,o,c,u,d,f=1,h=10,m=e,w=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(ru+(m.s?"NaN":"-Infinity"));if(m.eq(fc))return new g(0);if(t==null?(li=!1,u=y):u=t,m.eq(10))return t==null&&(li=!0),iP(g,u);if(u+=h,g.precision=u,r=Gd(w),n=r.charAt(0),i=ds(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Gd(m.d),n=r.charAt(0),f++;i=ds(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return c=iP(g,u+2,y).times(i+""),m=Ix(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=y,t==null?(li=!0,Ma(m,y)):m;for(o=s=m=ph(m.minus(fc),m.plus(fc),u),d=Ma(m.times(m),u),a=3;;){if(s=Ma(s.times(d),u),c=o.plus(ph(s,new g(a),u)),Gd(c.d).slice(0,u)===Gd(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(iP(g,u+2,y).times(i+""))),o=ph(o,new g(f),u),g.precision=y,t==null?(li=!0,Ma(o,y)):o;o=c,a+=2}}function oU(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ky(r/Za),e.d=[],n=(r+1)%Za,r<0&&(n+=Za),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Za;n<a;)e.d.push(+t.slice(n,n+=Za));t=t.slice(n),n=Za-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),li&&(e.e>nS||e.e<-nS))throw Error($I+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ma(e,t,r){var n,a,i,s,o,c,u,d,f=e.d;for(s=1,i=f[0];i>=10;i/=10)s++;if(n=t-s,n<0)n+=Za,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Za),i=f.length,d>=i)return e;for(u=i=f[d],s=1;i>=10;i/=10)s++;n%=Za,a=n-Za+s}if(r!==void 0&&(i=E0(10,s-a-1),o=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/E0(10,s-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ds(e),f.length=1,t=t-i-1,f[0]=E0(10,(Za-t%Za)%Za),e.e=ky(-t/Za)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=E0(10,Za-n),f[d]=a>0?(u/E0(10,s-a)%E0(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Ms&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Ms)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(li&&(e.e>nS||e.e<-nS))throw Error($I+ds(e));return e}function RZ(e,t){var r,n,a,i,s,o,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),li?Ma(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(d=s<0,d?(r=c,s=-s,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(m/Za),o)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}s=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>s;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Ms-1;--c[i],c[a]+=Ms}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,li?Ma(t,m):t):new h(0)}function og(e,t,r){var n,a=ds(e),i=Gd(e.d),s=i.length;return t?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Wp(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Wp(-a-1)+i,r&&(n=r-s)>0&&(i+=Wp(n))):a>=s?(i+=Wp(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Wp(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Wp(n))),e.s<0?"-"+i:i}function lU(e,t){if(e.length>t)return e.length=t,!0}function MZ(e){var t,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(z0+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return oU(s,i.toString())}else if(typeof i!="string")throw Error(z0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,S4e.test(i))oU(s,i);else throw Error(z0+i)}if(a.prototype=kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=MZ,a.config=a.set=N4e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function N4e(e){if(!e||typeof e!="object")throw Error(ru+"Object expected");var t,r,n,a=["precision",1,Ay,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ky(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(z0+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(z0+r+": "+n);return this}var BI=MZ(_4e);fc=new BI(1);const Ta=BI;function A4e(e){return P4e(e)||C4e(e)||E4e(e)||k4e()}function k4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4e(e,t){if(e){if(typeof e=="string")return s8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s8(e,t)}}function C4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function P4e(e){if(Array.isArray(e))return s8(e)}function s8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T4e=function(t){return t},FZ={},LZ=function(t){return t===FZ},cU=function(t){return function r(){return arguments.length===0||arguments.length===1&&LZ(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},O4e=function e(t,r){return t===1?r:cU(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(o){return o!==FZ}).length;return s>=t?r.apply(void 0,a):e(t-s,cU(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=a.map(function(f){return LZ(f)?c.shift():f});return r.apply(void 0,A4e(d).concat(c))}))})},vN=function(t){return O4e(t.length,t)},o8=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},D4e=vN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),I4e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return T4e;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},l8=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},jZ=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(o,c){return o===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function R4e(e){var t;return e===0?t=1:t=Math.floor(new Ta(e).abs().log(10).toNumber())+1,t}function M4e(e,t,r){for(var n=new Ta(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var F4e=vN(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),L4e=vN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),j4e=vN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const yN={rangeStep:M4e,getDigitCount:R4e,interpolateNumber:F4e,uninterpolateNumber:L4e,uninterpolateTruncation:j4e};function c8(e){return U4e(e)||B4e(e)||$Z(e)||$4e()}function $4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function U4e(e){if(Array.isArray(e))return u8(e)}function Rx(e,t){return z4e(e)||W4e(e,t)||$Z(e,t)||q4e()}function q4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Z(e,t){if(e){if(typeof e=="string")return u8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u8(e,t)}}function u8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W4e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function z4e(e){if(Array.isArray(e))return e}function BZ(e){var t=Rx(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function UZ(e,t,r){if(e.lte(0))return new Ta(0);var n=yN.getDigitCount(e.toNumber()),a=new Ta(10).pow(n),i=e.div(a),s=n!==1?.05:.1,o=new Ta(Math.ceil(i.div(s).toNumber())).add(r).mul(s),c=o.mul(a);return t?c:new Ta(Math.ceil(c))}function V4e(e,t,r){var n=1,a=new Ta(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ta(10).pow(yN.getDigitCount(e)-1),a=new Ta(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ta(Math.floor(e)))}else e===0?a=new Ta(Math.floor((t-1)/2)):r||(a=new Ta(Math.floor(e)));var s=Math.floor((t-1)/2),o=I4e(D4e(function(c){return a.add(new Ta(c-s).mul(n)).toNumber()}),o8);return o(0,t)}function qZ(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ta(0),tickMin:new Ta(0),tickMax:new Ta(0)};var i=UZ(new Ta(t).sub(e).div(r-1),n,a),s;e<=0&&t>=0?s=new Ta(0):(s=new Ta(e).add(t).div(2),s=s.sub(new Ta(s).mod(i)));var o=Math.ceil(s.sub(e).div(i).toNumber()),c=Math.ceil(new Ta(t).sub(s).div(i).toNumber()),u=o+c+1;return u>r?qZ(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,o=t>0?o:o+(r-u)),{step:i,tickMin:s.sub(new Ta(o).mul(i)),tickMax:s.add(new Ta(c).mul(i))})}function H4e(e){var t=Rx(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),o=BZ([r,n]),c=Rx(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(c8(o8(0,a-1).map(function(){return 1/0}))):[].concat(c8(o8(0,a-1).map(function(){return-1/0})),[d]);return r>n?l8(f):f}if(u===d)return V4e(u,a,i);var h=qZ(u,d,s,i),m=h.step,w=h.tickMin,g=h.tickMax,y=yN.rangeStep(w,g.add(new Ta(.1).mul(m)),m);return r>n?l8(y):y}function G4e(e,t){var r=Rx(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=BZ([n,a]),o=Rx(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=UZ(new Ta(u).sub(c).div(d-1),i,0),h=[].concat(c8(yN.rangeStep(new Ta(c),new Ta(u).sub(new Ta(.99).mul(f)),f)),[u]);return n>a?l8(h):h}var Y4e=jZ(H4e),K4e=jZ(G4e),X4e="Invariant failed";function lg(e,t){throw new Error(X4e)}var J4e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function P1(e){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P1(e)}function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aS.apply(this,arguments)}function Z4e(e,t){return rNe(e)||tNe(e,t)||eNe(e,t)||Q4e()}function Q4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eNe(e,t){if(e){if(typeof e=="string")return uU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uU(e,t)}}function uU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function rNe(e){if(Array.isArray(e))return e}function nNe(e,t){if(e==null)return{};var r=aNe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aNe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sNe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VZ(n.key),n)}}function oNe(e,t,r){return t&&sNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lNe(e,t,r){return t=iS(t),cNe(e,WZ()?Reflect.construct(t,r||[],iS(e).constructor):t.apply(e,r))}function cNe(e,t){if(t&&(P1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uNe(e)}function uNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WZ=function(){return!!e})()}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iS(e)}function dNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d8(e,t)}function d8(e,t){return d8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},d8(e,t)}function zZ(e,t,r){return t=VZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VZ(e){var t=fNe(e,"string");return P1(t)=="symbol"?t:t+""}function fNe(e,t){if(P1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(P1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eb=function(e){function t(){return iNe(this,t),lNe(this,t,arguments)}return dNe(t,e),oNe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,o=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=nNe(n,J4e),m=Rr(h,!1);this.props.direction==="x"&&d.type!=="number"&&lg();var w=c.map(function(g){var y=u(g,o),b=y.x,_=y.y,N=y.value,E=y.errorVal;if(!E)return null;var C=[],D,P;if(Array.isArray(E)){var F=Z4e(E,2);D=F[0],P=F[1]}else D=P=E;if(i==="vertical"){var L=d.scale,W=_+a,T=W+s,R=W-s,j=L(N-D),Y=L(N+P);C.push({x1:Y,y1:T,x2:Y,y2:R}),C.push({x1:j,y1:W,x2:Y,y2:W}),C.push({x1:j,y1:T,x2:j,y2:R})}else if(i==="horizontal"){var Z=f.scale,re=b+a,z=re-s,q=re+s,B=Z(N-D),G=Z(N+P);C.push({x1:z,y1:G,x2:q,y2:G}),C.push({x1:re,y1:B,x2:re,y2:G}),C.push({x1:z,y1:B,x2:q,y2:B})}return Qe.createElement(Fn,aS({className:"recharts-errorBar",key:"bar-".concat(C.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},m),C.map(function(Q){return Qe.createElement("line",aS({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return Qe.createElement(Fn,{className:"recharts-errorBars"},w)}}])}(Qe.Component);zZ(eb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});zZ(eb,"displayName","ErrorBar");function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function dU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dU(Object(r),!0).forEach(function(n){hNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hNe(e,t,r){return t=pNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pNe(e){var t=mNe(e,"string");return Mx(t)=="symbol"?t:t+""}function mNe(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HZ=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,s=ic(r,Yu);if(!s)return null;var o=Yu.defaultProps,c=o!==void 0?w0(w0({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,w=m.sectors||m.data||[];return d.concat(w.map(function(g){return{type:s.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?w0(w0({},h),f.props):{},w=m.dataKey,g=m.name,y=m.legendType,b=m.hide;return{inactive:b,dataKey:w,type:c.iconType||y||"square",color:UI(f),value:g||w,payload:m}}),w0(w0(w0({},c),Yu.getWithHeight(s,a)),{},{payload:u,item:s})};function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}function fU(e){return xNe(e)||yNe(e)||vNe(e)||gNe()}function gNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vNe(e,t){if(e){if(typeof e=="string")return f8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f8(e,t)}}function yNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xNe(e){if(Array.isArray(e))return f8(e)}function f8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hU(Object(r),!0).forEach(function(n){r1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r1(e,t,r){return t=wNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wNe(e){var t=bNe(e,"string");return Fx(t)=="symbol"?t:t+""}function bNe(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gi(e,t,r){return mn(e)||mn(t)?r:bs(t)?yc(e,t,r):Zr(t)?t(e):r}function G2(e,t,r,n){var a=x4e(e,function(o){return Gi(o,t)});if(r==="number"){var i=a.filter(function(o){return Xt(o)||parseFloat(o)});return i.length?[gN(i),Kp(i)]:[1/0,-1/0]}var s=n?a.filter(function(o){return!mn(o)}):a;return s.map(function(o){return bs(o)||o instanceof Date?o:""})}var _Ne=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<o;u++){var d=u>0?a[u-1].coordinate:a[o-1].coordinate,f=a[u].coordinate,h=u>=o-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(cl(f-d)!==cl(h-f)){var w=[];if(cl(h-f)===cl(c[1]-c[0])){m=h;var g=f+c[1]-c[0];w[0]=Math.min(g,(g+d)/2),w[1]=Math.max(g,(g+d)/2)}else{m=d;var y=h+c[1]-c[0];w[0]=Math.min(f,(y+f)/2),w[1]=Math.max(f,(y+f)/2)}var b=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>b[0]&&t<=b[1]||t>=w[0]&&t<=w[1]){s=a[u].index;break}}else{var _=Math.min(d,h),N=Math.max(d,h);if(t>(_+f)/2&&t<=(N+f)/2){s=a[u].index;break}}}else for(var E=0;E<o;E++)if(E===0&&t<=(n[E].coordinate+n[E+1].coordinate)/2||E>0&&E<o-1&&t>(n[E].coordinate+n[E-1].coordinate)/2&&t<=(n[E].coordinate+n[E+1].coordinate)/2||E===o-1&&t>(n[E].coordinate+n[E-1].coordinate)/2){s=n[E].index;break}return s},UI=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Pi(Pi({},t.type.defaultProps),t.props):t.props,s=i.stroke,o=i.fill,c;switch(a){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},SNe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},o=Object.keys(i),c=0,u=o.length;c<u;c++)for(var d=i[o[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var w=d[f[h]],g=w.items,y=w.cateAxisId,b=g.filter(function(P){return hh(P.type).indexOf("Bar")>=0});if(b&&b.length){var _=b[0].type.defaultProps,N=_!==void 0?Pi(Pi({},_),b[0].props):b[0].props,E=N.barSize,C=N[y];s[C]||(s[C]=[]);var D=mn(E)?r:E;s[C].push({item:b[0],stackList:b.slice(1),barSize:mn(D)?void 0:ul(D,n,0)})}}return s},NNe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,s=i===void 0?[]:i,o=t.maxBarSize,c=s.length;if(c<1)return null;var u=ul(r,a,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,m=a/c,w=s.reduce(function(E,C){return E+C.barSize||0},0);w+=(c-1)*u,w>=a&&(w-=(c-1)*u,u=0),w>=a&&m>0&&(h=!0,m*=.9,w=c*m);var g=(a-w)/2>>0,y={offset:g-u,size:0};d=s.reduce(function(E,C){var D={item:C.item,position:{offset:y.offset+y.size+u,size:h?m:C.barSize}},P=[].concat(fU(E),[D]);return y=P[P.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(F){P.push({item:F,position:y})}),P},f)}else{var b=ul(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var _=(a-2*b-(c-1)*u)/c;_>1&&(_>>=0);var N=o===+o?Math.min(_,o):_;d=s.reduce(function(E,C,D){var P=[].concat(fU(E),[{item:C.item,position:{offset:b+(_+u)*D+(_-N)/2,size:N}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(F){P.push({item:F,position:P[P.length-1].position})}),P},f)}return d},ANe=function(t,r,n,a){var i=n.children,s=n.width,o=n.margin,c=s-(o.left||0)-(o.right||0),u=HZ({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,w=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&w==="middle")&&m!=="center"&&Xt(t[m]))return Pi(Pi({},t),{},r1({},m,t[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&w!=="middle"&&Xt(t[w]))return Pi(Pi({},t),{},r1({},w,t[w]+(h||0)))}return t},kNe=function(t,r,n){return mn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},GZ=function(t,r,n,a,i){var s=r.props.children,o=xc(s,eb).filter(function(u){return kNe(a,i,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Gi(d,n);if(mn(f))return u;var h=Array.isArray(f)?[gN(f),Kp(f)]:[f,f],m=c.reduce(function(w,g){var y=Gi(d,g,0),b=h[0]-Math.abs(Array.isArray(y)?y[0]:y),_=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(b,w[0]),Math.max(_,w[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},ENe=function(t,r,n,a,i){var s=r.map(function(o){return GZ(t,o,n,i,a)}).filter(function(o){return!mn(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},YZ=function(t,r,n,a,i){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&GZ(t,c,u,a)||G2(t,u,n,i)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},KZ=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},XZ=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,s,o=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(s=!0),c.coordinate});return i||o.push(r),s||o.push(n),o},uh=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,s=t.type,o=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?cl(o[0]-o[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!_y(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},sP=new WeakMap,N_=function(t,r){if(typeof r!="function")return t;sP.has(t)||sP.set(t,new WeakMap);var n=sP.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},JZ=function(t,r,n){var a=t.scale,i=t.type,s=t.layout,o=t.axisType;if(a==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Cx(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Q5(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:H2(),realScaleType:"point"}:i==="category"?{scale:Cx(),realScaleType:"band"}:{scale:Q5(),realScaleType:"linear"};if(ng(a)){var c="scale".concat(rN(a));return{scale:(ZB[c]||H2)(),realScaleType:ZB[c]?c:"point"}}return Zr(a)?{scale:a}:{scale:H2(),realScaleType:"point"}},pU=1e-4,ZZ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-pU,s=Math.max(a[0],a[1])+pU,o=t(r[0]),c=t(r[n-1]);(o<i||o>s||c<i||c>s)&&t.domain([r[0],r[n-1]])}},CNe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},PNe=function(t,r){if(!r||r.length!==2||!Xt(r[0])||!Xt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Xt(t[0])||t[0]<n)&&(i[0]=n),(!Xt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},TNe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0,o=0;o<r;++o){var c=_y(t[o][n][1])?t[o][n][0]:t[o][n][1];c>=0?(t[o][n][0]=i,t[o][n][1]=i+c,i=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+c,s=t[o][n][1])}},ONe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var o=_y(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=i,t[s][n][1]=i+o,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},DNe={sign:TNe,expand:xxe,none:b1,silhouette:wxe,wiggle:bxe,positive:ONe},INe=function(t,r,n){var a=r.map(function(o){return o.props.dataKey}),i=DNe[n],s=yxe().keys(a).value(function(o,c){return+Gi(o,c,0)}).order(z6).offset(i);return s(t)},RNe=function(t,r,n,a,i,s){if(!t)return null;var o=s?r.reverse():r,c={},u=o.reduce(function(f,h){var m,w=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Pi(Pi({},h.type.defaultProps),h.props):h.props,g=w.stackId,y=w.hide;if(y)return f;var b=w[n],_=f[b]||{hasStack:!1,stackGroups:{}};if(bs(g)){var N=_.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};N.items.push(h),_.hasStack=!0,_.stackGroups[g]=N}else _.stackGroups[Pg("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Pi(Pi({},f),{},r1({},b,_))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var w={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,y){var b=m.stackGroups[y];return Pi(Pi({},g),{},r1({},y,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:INe(t,b.items,i)}))},w)}return Pi(Pi({},f),{},r1({},h,m))},d)},QZ=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,o=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Y4e(u,i,o);return t.domain([gN(d),Kp(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=K4e(f,i,o);return{niceTicks:h}}return null};function sS(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!mn(a[t.dataKey])){var o=M5(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Gi(a,mn(s)?t.dataKey:s);return mn(c)?null:t.scale(c)}var mU=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,s=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var c=Gi(s,r.dataKey,r.domain[o]);return mn(c)?null:r.scale(c)-i/2+a},MNe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},FNe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Pi(Pi({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(bs(i)){var s=r[i];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},LNe=function(t){return t.reduce(function(r,n){return[gN(n.concat([r[0]]).filter(Xt)),Kp(n.concat([r[1]]).filter(Xt))]},[1/0,-1/0])},eQ=function(t,r,n){return Object.keys(t).reduce(function(a,i){var s=t[i],o=s.stackedData,c=o.reduce(function(u,d){var f=LNe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},gU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h8=function(t,r,n){if(Zr(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Xt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(gU.test(t[0])){var i=+gU.exec(t[0])[1];a[0]=r[0]-i}else Zr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Xt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(vU.test(t[1])){var s=+vU.exec(t[1])[1];a[1]=r[1]+s}else Zr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},oS=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=mI(r,function(f){return f.coordinate}),s=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},yU=function(t,r,n){return!t||!t.length||sg(t,yc(n,"type.defaultProps.domain"))?r:t},tQ=function(t,r){var n=t.type.defaultProps?Pi(Pi({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,s=n.unit,o=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Pi(Pi({},Rr(t,!1)),{},{dataKey:a,unit:s,formatter:o,name:i||a,color:UI(t),value:Gi(r,a),type:c,payload:r,chartType:u,hide:d})};function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function xU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xU(Object(r),!0).forEach(function(n){rQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rQ(e,t,r){return t=jNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jNe(e){var t=$Ne(e,"string");return Lx(t)=="symbol"?t:t+""}function $Ne(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BNe(e,t){return zNe(e)||WNe(e,t)||qNe(e,t)||UNe()}function UNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qNe(e,t){if(e){if(typeof e=="string")return wU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wU(e,t)}}function wU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function zNe(e){if(Array.isArray(e))return e}var lS=Math.PI/180,VNe=function(t){return t*180/Math.PI},qa=function(t,r,n,a){return{x:t+Math.cos(-lS*a)*n,y:r+Math.sin(-lS*a)*n}},nQ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},HNe=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.startAngle,u=t.endAngle,d=ul(t.cx,s,s/2),f=ul(t.cy,o,o/2),h=nQ(s,o,n),m=ul(t.innerRadius,h,0),w=ul(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(y,b){var _=r[b],N=_.domain,E=_.reversed,C;if(mn(_.range))a==="angleAxis"?C=[c,u]:a==="radiusAxis"&&(C=[m,w]),E&&(C=[C[1],C[0]]);else{C=_.range;var D=C,P=BNe(D,2);c=P[0],u=P[1]}var F=JZ(_,i),L=F.realScaleType,W=F.scale;W.domain(N).range(C),ZZ(W);var T=QZ(W,ih(ih({},_),{},{realScaleType:L})),R=ih(ih(ih({},_),T),{},{range:C,radius:w,realScaleType:L,scale:W,cx:d,cy:f,innerRadius:m,outerRadius:w,startAngle:c,endAngle:u});return ih(ih({},y),{},rQ({},b,R))},{})},GNe=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},YNe=function(t,r){var n=t.x,a=t.y,i=r.cx,s=r.cy,o=GNe({x:n,y:a},{x:i,y:s});if(o<=0)return{radius:o};var c=(n-i)/o,u=Math.acos(c);return a>s&&(u=2*Math.PI-u),{radius:o,angle:VNe(u),angleInRadian:u}},KNe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},XNe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),o=Math.min(i,s);return t+o*360},bU=function(t,r){var n=t.x,a=t.y,i=YNe({x:n,y:a},r),s=i.radius,o=i.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=KNe(r),f=d.startAngle,h=d.endAngle,m=o,w;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;w=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;w=m>=h&&m<=f}return w?ih(ih({},r),{},{radius:s,angle:XNe(m,r)}):null},aQ=function(t){return!S.isValidElement(t)&&!Zr(t)&&typeof t!="boolean"?t.className:""};function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}var JNe=["offset"];function ZNe(e){return r3e(e)||t3e(e)||e3e(e)||QNe()}function QNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e3e(e,t){if(e){if(typeof e=="string")return p8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p8(e,t)}}function t3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r3e(e){if(Array.isArray(e))return p8(e)}function p8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n3e(e,t){if(e==null)return{};var r=a3e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ys(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_U(Object(r),!0).forEach(function(n){i3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i3e(e,t,r){return t=s3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s3e(e){var t=o3e(e,"string");return jx(t)=="symbol"?t:t+""}function o3e(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l3e=function(t){var r=t.value,n=t.formatter,a=mn(t.children)?r:t.children;return Zr(n)?n(a):a},c3e=function(t,r){var n=cl(r-t),a=Math.min(Math.abs(r-t),360);return n*a},u3e=function(t,r,n){var a=t.position,i=t.viewBox,s=t.offset,o=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,w=c.endAngle,g=c.clockWise,y=(f+h)/2,b=c3e(m,w),_=b>=0?1:-1,N,E;a==="insideStart"?(N=m+_*s,E=g):a==="insideEnd"?(N=w-_*s,E=!g):a==="end"&&(N=w+_*s,E=g),E=b<=0?E:!E;var C=qa(u,d,y,N),D=qa(u,d,y,N+(E?1:-1)*359),P="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(E?0:1,`,
    `).concat(D.x,",").concat(D.y),F=mn(t.id)?Pg("recharts-radial-line-"):t.id;return x("text",{...n,dominantBaseline:"central",className:gn("recharts-radial-bar-label",o),children:[l("defs",{children:l("path",{id:F,d:P})}),l("textPath",{xlinkHref:"#".concat(F),children:r})]})},d3e=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,s=i.cx,o=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=qa(s,o,u+n,h),w=m.x,g=m.y;return{x:w,y:g,textAnchor:w>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,b=qa(s,o,y,h),_=b.x,N=b.y;return{x:_,y:N,textAnchor:"middle",verticalAnchor:"middle"}},f3e=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,s=r,o=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",w=f>0?"start":"end",g=u>=0?1:-1,y=g*a,b=g>0?"end":"start",_=g>0?"start":"end";if(i==="top"){var N={x:o+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return ys(ys({},N),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var E={x:o+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:w};return ys(ys({},E),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var C={x:o-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return ys(ys({},C),n?{width:Math.max(C.x-n.x,0),height:d}:{})}if(i==="right"){var D={x:o+u+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return ys(ys({},D),n?{width:Math.max(n.x+n.width-D.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return i==="insideLeft"?ys({x:o+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},P):i==="insideRight"?ys({x:o+u-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},P):i==="insideTop"?ys({x:o+u/2,y:c+h,textAnchor:"middle",verticalAnchor:w},P):i==="insideBottom"?ys({x:o+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},P):i==="insideTopLeft"?ys({x:o+y,y:c+h,textAnchor:_,verticalAnchor:w},P):i==="insideTopRight"?ys({x:o+u-y,y:c+h,textAnchor:b,verticalAnchor:w},P):i==="insideBottomLeft"?ys({x:o+y,y:c+d-h,textAnchor:_,verticalAnchor:m},P):i==="insideBottomRight"?ys({x:o+u-y,y:c+d-h,textAnchor:b,verticalAnchor:m},P):by(i)&&(Xt(i.x)||M0(i.x))&&(Xt(i.y)||M0(i.y))?ys({x:o+ul(i.x,u),y:c+ul(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):ys({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},h3e=function(t){return"cx"in t&&Xt(t.cx)};function $s(e){var t=e.offset,r=t===void 0?5:t,n=n3e(e,JNe),a=ys({offset:r},n),i=a.viewBox,s=a.position,o=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||mn(o)&&mn(c)&&!S.isValidElement(u)&&!Zr(u))return null;if(S.isValidElement(u))return S.cloneElement(u,a);var m;if(Zr(u)){if(m=S.createElement(u,a),S.isValidElement(m))return m}else m=l3e(a);var w=h3e(i),g=Rr(a,!0);if(w&&(s==="insideStart"||s==="insideEnd"||s==="end"))return u3e(a,m,g);var y=w?d3e(a):f3e(a);return l(ig,{className:gn("recharts-label",f),...g,...y,breakAll:h,children:m})}$s.displayName="Label";var iQ=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,s=t.endAngle,o=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,w=t.left,g=t.width,y=t.height,b=t.clockWise,_=t.labelViewBox;if(_)return _;if(Xt(g)&&Xt(y)){if(Xt(f)&&Xt(h))return{x:f,y:h,width:g,height:y};if(Xt(m)&&Xt(w))return{x:m,y:w,width:g,height:y}}return Xt(f)&&Xt(h)?{x:f,y:h,width:0,height:0}:Xt(r)&&Xt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:b}:t.viewBox?t.viewBox:{}},p3e=function(t,r){return t?t===!0?l($s,{viewBox:r},"label-implicit"):bs(t)?l($s,{viewBox:r,value:t},"label-implicit"):S.isValidElement(t)?t.type===$s?S.cloneElement(t,{key:"label-implicit",viewBox:r}):l($s,{content:t,viewBox:r},"label-implicit"):Zr(t)?l($s,{content:t,viewBox:r},"label-implicit"):by(t)?S.createElement($s,{viewBox:r,...t,key:"label-implicit"}):null:null},m3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=iQ(t),s=xc(a,$s).map(function(c,u){return S.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return s;var o=p3e(t.label,r||i);return[o].concat(ZNe(s))};$s.parseViewBox=iQ;$s.renderCallByParent=m3e;var oP,SU;function g3e(){if(SU)return oP;SU=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return oP=e,oP}var v3e=g3e();const y3e=pa(v3e);function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}var x3e=["valueAccessor"],w3e=["data","dataKey","clockWise","id","textBreakAll"];function b3e(e){return A3e(e)||N3e(e)||S3e(e)||_3e()}function _3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S3e(e,t){if(e){if(typeof e=="string")return m8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,t)}}function N3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A3e(e){if(Array.isArray(e))return m8(e)}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NU(Object(r),!0).forEach(function(n){k3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k3e(e,t,r){return t=E3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E3e(e){var t=C3e(e,"string");return $x(t)=="symbol"?t:t+""}function C3e(e,t){if($x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e,t){if(e==null)return{};var r=P3e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var T3e=function(t){return Array.isArray(t.value)?y3e(t.value):t.value};function rf(e){var t=e.valueAccessor,r=t===void 0?T3e:t,n=kU(e,x3e),a=n.data,i=n.dataKey,s=n.clockWise,o=n.id,c=n.textBreakAll,u=kU(n,w3e);return!a||!a.length?null:l(Fn,{className:"recharts-label-list",children:a.map(function(d,f){var h=mn(i)?r(d,f):Gi(d&&d.payload,i),m=mn(o)?{}:{id:"".concat(o,"-").concat(f)};return S.createElement($s,{...Rr(d,!0),...u,...m,parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:$s.parseViewBox(mn(s)?d:AU(AU({},d),{},{clockWise:s})),key:"label-".concat(f),index:f})})})}rf.displayName="LabelList";function O3e(e,t){return e?e===!0?l(rf,{data:t},"labelList-implicit"):Qe.isValidElement(e)||Zr(e)?l(rf,{data:t,content:e},"labelList-implicit"):by(e)?S.createElement(rf,{data:t,...e,key:"labelList-implicit"}):null:null}function D3e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=xc(n,rf).map(function(s,o){return S.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!r)return a;var i=O3e(e.label,t);return[i].concat(b3e(a))}rf.renderCallByParent=D3e;function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function g8(){return g8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g8.apply(this,arguments)}function EU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EU(Object(r),!0).forEach(function(n){I3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I3e(e,t,r){return t=R3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R3e(e){var t=M3e(e,"string");return Bx(t)=="symbol"?t:t+""}function M3e(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F3e=function(t,r){var n=cl(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},A_=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,s=t.sign,o=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(o?1:-1)+a,f=Math.asin(c/d)/lS,h=u?i:i+s*f,m=qa(r,n,d,h),w=qa(r,n,a,h),g=u?i-s*f:i,y=qa(r,n,d*Math.cos(f*lS),g);return{center:m,circleTangency:w,lineTangency:y,theta:f}},sQ=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.startAngle,o=t.endAngle,c=F3e(s,o),u=s+c,d=qa(r,n,i,s),f=qa(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=qa(r,n,a,s),w=qa(r,n,a,u);h+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},L3e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=cl(d-u),h=A_({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),m=h.circleTangency,w=h.lineTangency,g=h.theta,y=A_({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),b=y.circleTangency,_=y.lineTangency,N=y.theta,E=c?Math.abs(u-d):Math.abs(u-d)-g-N;if(E<0)return o?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):sQ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var C="M ".concat(w.x,",").concat(w.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
  `);if(a>0){var D=A_({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),P=D.circleTangency,F=D.lineTangency,L=D.theta,W=A_({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),T=W.circleTangency,R=W.lineTangency,j=W.theta,Y=c?Math.abs(u-d):Math.abs(u-d)-L-j;if(Y<0&&s===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Y>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(F.x,",").concat(F.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},j3e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oQ=function(t){var r=CU(CU({},j3e),t),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(s<i||d===f)return null;var m=gn("recharts-sector",h),w=s-i,g=ul(o,w,0,!0),y;return g>0&&Math.abs(d-f)<360?y=L3e({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,w/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=sQ({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:d,endAngle:f}),Qe.createElement("path",g8({},Rr(r,!0),{className:m,d:y,role:"img"}))};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function v8(){return v8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v8.apply(this,arguments)}function PU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PU(Object(r),!0).forEach(function(n){$3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $3e(e,t,r){return t=B3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B3e(e){var t=U3e(e,"string");return Ux(t)=="symbol"?t:t+""}function U3e(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OU={curveBasisClosed:oxe,curveBasisOpen:lxe,curveBasis:sxe,curveBumpX:H2e,curveBumpY:G2e,curveLinearClosed:cxe,curveLinear:aN,curveMonotoneX:uxe,curveMonotoneY:dxe,curveNatural:fxe,curveStep:hxe,curveStepAfter:mxe,curveStepBefore:pxe},k_=function(t){return t.x===+t.x&&t.y===+t.y},h2=function(t){return t.x},p2=function(t){return t.y},q3e=function(t,r){if(Zr(t))return t;var n="curve".concat(rN(t));return(n==="curveMonotone"||n==="curveBump")&&r?OU["".concat(n).concat(r==="vertical"?"Y":"X")]:OU[n]||aN},W3e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,s=t.baseLine,o=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=q3e(n,o),f=u?i.filter(function(g){return k_(g)}):i,h;if(Array.isArray(s)){var m=u?s.filter(function(g){return k_(g)}):s,w=f.map(function(g,y){return TU(TU({},g),{},{base:m[y]})});return o==="vertical"?h=v_().y(p2).x1(h2).x0(function(g){return g.base.x}):h=v_().x(h2).y1(p2).y0(function(g){return g.base.y}),h.defined(k_).curve(d),h(w)}return o==="vertical"&&Xt(s)?h=v_().y(p2).x1(h2).x0(s):Xt(s)?h=v_().x(h2).y1(p2).y0(s):h=iJ().x(h2).y(p2),h.defined(k_).curve(d),h(f)},V0=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?W3e(t):a;return Qe.createElement("path",v8({},Rr(t,!1),F5(t),{className:gn("recharts-curve",r),d:s,ref:i}))},lP={exports:{}},cP,DU;function z3e(){if(DU)return cP;DU=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cP=e,cP}var uP,IU;function V3e(){if(IU)return uP;IU=1;var e=z3e();function t(){}function r(){}return r.resetWarningCache=t,uP=function(){function n(s,o,c,u,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},uP}var RU;function H3e(){return RU||(RU=1,lP.exports=V3e()()),lP.exports}var G3e=H3e();const xa=pa(G3e);var Y3e=Object.getOwnPropertyNames,K3e=Object.getOwnPropertySymbols,X3e=Object.prototype.hasOwnProperty;function MU(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function E_(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,s=i.get(r),o=i.get(n);if(s&&o)return s===n&&o===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function FU(e){return Y3e(e).concat(K3e(e))}var J3e=Object.hasOwn||function(e,t){return X3e.call(e,t)};function Dg(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Z3e="__v",Q3e="__o",eAe="_owner",LU=Object.getOwnPropertyDescriptor,jU=Object.keys;function tAe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function rAe(e,t){return Dg(e.getTime(),t.getTime())}function nAe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function aAe(e,t){return e===t}function $U(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),s,o,c=0;(s=i.next())&&!s.done;){for(var u=t.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(a[f]){f++;continue}var h=s.value,m=o.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var iAe=Dg;function sAe(e,t,r){var n=jU(e),a=n.length;if(jU(t).length!==a)return!1;for(;a-- >0;)if(!lQ(e,t,r,n[a]))return!1;return!0}function m2(e,t,r){var n=FU(e),a=n.length;if(FU(t).length!==a)return!1;for(var i,s,o;a-- >0;)if(i=n[a],!lQ(e,t,r,i)||(s=LU(e,i),o=LU(t,i),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function oAe(e,t){return Dg(e.valueOf(),t.valueOf())}function lAe(e,t){return e.source===t.source&&e.flags===t.flags}function BU(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),s,o;(s=i.next())&&!s.done;){for(var c=t.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!a[d]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function cAe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function uAe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function lQ(e,t,r,n){return(n===eAe||n===Q3e||n===Z3e)&&(e.$$typeof||t.$$typeof)?!0:J3e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var dAe="[object Arguments]",fAe="[object Boolean]",hAe="[object Date]",pAe="[object Error]",mAe="[object Map]",gAe="[object Number]",vAe="[object Object]",yAe="[object RegExp]",xAe="[object Set]",wAe="[object String]",bAe="[object URL]",_Ae=Array.isArray,UU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,qU=Object.assign,SAe=Object.prototype.toString.call.bind(Object.prototype.toString);function NAe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(w,g,y){if(w===g)return!0;if(w==null||g==null)return!1;var b=typeof w;if(b!==typeof g)return!1;if(b!=="object")return b==="number"?s(w,g,y):b==="function"?a(w,g,y):!1;var _=w.constructor;if(_!==g.constructor)return!1;if(_===Object)return o(w,g,y);if(_Ae(w))return t(w,g,y);if(UU!=null&&UU(w))return f(w,g,y);if(_===Date)return r(w,g,y);if(_===RegExp)return u(w,g,y);if(_===Map)return i(w,g,y);if(_===Set)return d(w,g,y);var N=SAe(w);return N===hAe?r(w,g,y):N===yAe?u(w,g,y):N===mAe?i(w,g,y):N===xAe?d(w,g,y):N===vAe?typeof w.then!="function"&&typeof g.then!="function"&&o(w,g,y):N===bAe?h(w,g,y):N===pAe?n(w,g,y):N===dAe?o(w,g,y):N===fAe||N===gAe||N===wAe?c(w,g,y):!1}}function AAe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?m2:tAe,areDatesEqual:rAe,areErrorsEqual:nAe,areFunctionsEqual:aAe,areMapsEqual:n?MU($U,m2):$U,areNumbersEqual:iAe,areObjectsEqual:n?m2:sAe,arePrimitiveWrappersEqual:oAe,areRegExpsEqual:lAe,areSetsEqual:n?MU(BU,m2):BU,areTypedArraysEqual:n?m2:cAe,areUrlsEqual:uAe};if(r&&(a=qU({},a,r(a))),t){var i=E_(a.areArraysEqual),s=E_(a.areMapsEqual),o=E_(a.areObjectsEqual),c=E_(a.areSetsEqual);a=qU({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return a}function kAe(e){return function(t,r,n,a,i,s,o){return e(t,r,o)}}function EAe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,s)}}var CAe=Fm();Fm({strict:!0});Fm({circular:!0});Fm({circular:!0,strict:!0});Fm({createInternalComparator:function(){return Dg}});Fm({strict:!0,createInternalComparator:function(){return Dg}});Fm({circular:!0,createInternalComparator:function(){return Dg}});Fm({circular:!0,createInternalComparator:function(){return Dg},strict:!0});function Fm(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,s=i===void 0?!1:i,o=AAe(e),c=NAe(o),u=n?n(c):kAe(c);return EAe({circular:r,comparator:c,createState:a,equals:u,strict:s})}function PAe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function WU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):PAe(a)};requestAnimationFrame(n)}function y8(e){"@babel/helpers - typeof";return y8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y8(e)}function TAe(e){return RAe(e)||IAe(e)||DAe(e)||OAe()}function OAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DAe(e,t){if(e){if(typeof e=="string")return zU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zU(e,t)}}function zU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RAe(e){if(Array.isArray(e))return e}function MAe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,o=TAe(s),c=o[0],u=o.slice(1);if(typeof c=="number"){WU(a.bind(null,u),c);return}a(c),WU(a.bind(null,u));return}y8(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function VU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(r),!0).forEach(function(n){cQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cQ(e,t,r){return t=FAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FAe(e){var t=LAe(e,"string");return qx(t)==="symbol"?t:String(t)}function LAe(e,t){if(qx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jAe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},$Ae=function(t){return t},BAe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Y2=function(t,r){return Object.keys(r).reduce(function(n,a){return HU(HU({},n),{},cQ({},a,t(a,r[a])))},{})},GU=function(t,r,n){return t.map(function(a){return"".concat(BAe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function UAe(e,t){return zAe(e)||WAe(e,t)||uQ(e,t)||qAe()}function qAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function zAe(e){if(Array.isArray(e))return e}function VAe(e){return YAe(e)||GAe(e)||uQ(e)||HAe()}function HAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uQ(e,t){if(e){if(typeof e=="string")return x8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x8(e,t)}}function GAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YAe(e){if(Array.isArray(e))return x8(e)}function x8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cS=1e-4,dQ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},fQ=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},YU=function(t,r){return function(n){var a=dQ(t,r);return fQ(a,n)}},KAe=function(t,r){return function(n){var a=dQ(t,r),i=[].concat(VAe(a.map(function(s,o){return s*o}).slice(1)),[0]);return fQ(i,n)}},KU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,o=1;break;case"ease":a=.25,i=.1,s=.25,o=1;break;case"ease-in":a=.42,i=0,s=1,o=1;break;case"ease-out":a=.42,i=0,s=.58,o=1;break;case"ease-in-out":a=0,i=0,s=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=UAe(u,4);a=d[0],i=d[1],s=d[2],o=d[3]}}}var f=YU(a,s),h=YU(i,o),m=KAe(a,s),w=function(b){return b>1?1:b<0?0:b},g=function(b){for(var _=b>1?1:b,N=_,E=0;E<8;++E){var C=f(N)-_,D=m(N);if(Math.abs(C-_)<cS||D<cS)return h(N);N=w(N-C/D)}return h(N)};return g.isStepper=!1,g},XAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,s=t.dt,o=s===void 0?17:s,c=function(d,f,h){var m=-(d-f)*n,w=h*i,g=h+(m-w)*o/1e3,y=h*o/1e3+d;return Math.abs(y-f)<cS&&Math.abs(g)<cS?[f,0]:[y,g]};return c.isStepper=!0,c.dt=o,c},JAe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return KU(a);case"spring":return XAe();default:if(a.split("(")[0]==="cubic-bezier")return KU(a)}return typeof a=="function"?a:null};function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function XU(e){return eke(e)||QAe(e)||hQ(e)||ZAe()}function ZAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eke(e){if(Array.isArray(e))return b8(e)}function JU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(r),!0).forEach(function(n){w8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w8(e,t,r){return t=tke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tke(e){var t=rke(e,"string");return Wx(t)==="symbol"?t:String(t)}function rke(e,t){if(Wx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nke(e,t){return ske(e)||ike(e,t)||hQ(e,t)||ake()}function ake(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hQ(e,t){if(e){if(typeof e=="string")return b8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b8(e,t)}}function b8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ike(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function ske(e){if(Array.isArray(e))return e}var uS=function(t,r,n){return t+(r-t)*n},_8=function(t){var r=t.from,n=t.to;return r!==n},oke=function e(t,r,n){var a=Y2(function(i,s){if(_8(s)){var o=t(s.from,s.to,s.velocity),c=nke(o,2),u=c[0],d=c[1];return to(to({},s),{},{from:u,velocity:d})}return s},r);return n<1?Y2(function(i,s){return _8(s)?to(to({},s),{},{velocity:uS(s.velocity,a[i].velocity,n),from:uS(s.from,a[i].from,n)}):s},r):e(t,a,n-1)};const lke=function(e,t,r,n,a){var i=jAe(e,t),s=i.reduce(function(y,b){return to(to({},y),{},w8({},b,[e[b],t[b]]))},{}),o=i.reduce(function(y,b){return to(to({},y),{},w8({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Y2(function(b,_){return _.from},o)},m=function(){return!Object.values(o).filter(_8).length},w=function(b){u||(u=b);var _=b-u,N=_/r.dt;o=oke(r,o,N),a(to(to(to({},e),t),h())),u=b,m()||(c=requestAnimationFrame(f))},g=function(b){d||(d=b);var _=(b-d)/n,N=Y2(function(C,D){return uS.apply(void 0,XU(D).concat([r(_)]))},s);if(a(to(to(to({},e),t),N)),_<1)c=requestAnimationFrame(f);else{var E=Y2(function(C,D){return uS.apply(void 0,XU(D).concat([r(1)]))},s);a(to(to(to({},e),t),E))}};return f=r.isStepper?w:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function T1(e){"@babel/helpers - typeof";return T1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T1(e)}var cke=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uke(e,t){if(e==null)return{};var r=dke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dke(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function dP(e){return mke(e)||pke(e)||hke(e)||fke()}function fke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hke(e,t){if(e){if(typeof e=="string")return S8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S8(e,t)}}function pke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mke(e){if(Array.isArray(e))return S8(e)}function S8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(r),!0).forEach(function(n){O2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O2(e,t,r){return t=pQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pQ(n.key),n)}}function yke(e,t,r){return t&&vke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pQ(e){var t=xke(e,"string");return T1(t)==="symbol"?t:String(t)}function xke(e,t){if(T1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(T1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N8(e,t)}function N8(e,t){return N8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},N8(e,t)}function bke(e){var t=_ke();return function(){var n=dS(e),a;if(t){var i=dS(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return A8(this,a)}}function A8(e,t){if(t&&(T1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k8(e)}function k8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _ke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dS(e){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dS(e)}var rd=function(e){wke(r,e);var t=bke(r);function r(n,a){var i;gke(this,r),i=t.call(this,n,a);var s=i.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,m=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(k8(i)),i.changeStyle=i.changeStyle.bind(k8(i)),!o||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),A8(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},A8(i);i.state={style:c?O2({},c,u):u}}else i.state={style:{}};return i}return yke(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,o=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(o){if(!s){var m={style:c?O2({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(CAe(a.to,d)&&a.canBegin&&a.isActive)){var w=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=w||u?f:a.to;if(this.state&&h){var y={style:c?O2({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(y)}this.runAnimation(Ou(Ou({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,o=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=lke(s,o,JAe(u),c,this.changeStyle),w=function(){i.stopJSAnimation=m()};this.manager.start([h,d,w,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,o=a.begin,c=a.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,y,b){if(b===0)return g;var _=y.duration,N=y.easing,E=N===void 0?"ease":N,C=y.style,D=y.properties,P=y.onAnimationEnd,F=b>0?s[b-1]:y,L=D||Object.keys(C);if(typeof E=="function"||E==="spring")return[].concat(dP(g),[i.runJSAnimation.bind(i,{from:F.style,to:C,duration:_,easing:E}),_]);var W=GU(L,_,E),T=Ou(Ou(Ou({},F.style),C),{},{transition:W});return[].concat(dP(g),[T,_,P]).filter($Ae)};return this.manager.start([c].concat(dP(s.reduce(m,[d,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=MAe());var i=a.begin,s=a.duration,o=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,w=this.manager;if(this.unSubscribe=w.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=o?O2({},o,c):c,y=GU(Object.keys(g),s,u);w.start([d,i,Ou(Ou({},g),{},{transition:y}),s,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=uke(a,cke),u=S.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!o||u===0||s<=0)return i;var f=function(m){var w=m.props,g=w.style,y=g===void 0?{}:g,b=w.className,_=S.cloneElement(m,Ou(Ou({},c),{},{style:Ou(Ou({},y),d),className:b}));return _};return u===1?f(S.Children.only(i)):l("div",{children:S.Children.map(i,function(h){return f(h)})})}}]),r}(S.PureComponent);rd.displayName="Animate";rd.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};rd.propTypes={from:xa.oneOfType([xa.object,xa.string]),to:xa.oneOfType([xa.object,xa.string]),attributeName:xa.string,duration:xa.number,begin:xa.number,easing:xa.oneOfType([xa.string,xa.func]),steps:xa.arrayOf(xa.shape({duration:xa.number.isRequired,style:xa.object.isRequired,easing:xa.oneOfType([xa.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xa.func]),properties:xa.arrayOf("string"),onAnimationEnd:xa.func})),children:xa.oneOfType([xa.node,xa.func]),isActive:xa.bool,canBegin:xa.bool,onAnimationEnd:xa.func,shouldReAnimate:xa.bool,onAnimationStart:xa.func,onAnimationReStart:xa.func};function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function Ske(e,t){return Eke(e)||kke(e,t)||Ake(e,t)||Nke()}function Nke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ake(e,t){if(e){if(typeof e=="string")return QU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QU(e,t)}}function QU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function Eke(e){if(Array.isArray(e))return e}function eq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eq(Object(r),!0).forEach(function(n){Cke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cke(e,t,r){return t=Pke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pke(e){var t=Tke(e,"string");return zx(t)=="symbol"?t:t+""}function Tke(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rq=function(t,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>s?s:i[h];d="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+o*f[1])),d+="L ".concat(t+n,",").concat(r+a-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-o*f[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var w=Math.min(s,i);d="M ".concat(t,",").concat(r+o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+c*w,",").concat(r,`
            L `).concat(t+n-c*w,",").concat(r,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+n,",").concat(r+o*w,`
            L `).concat(t+n,",").concat(r+a-o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t+n-c*w,",").concat(r+a,`
            L `).concat(t+c*w,",").concat(r+a,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(t,",").concat(r+a-o*w," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},Oke=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,s=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(i,i+o),d=Math.max(i,i+o),f=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},Dke={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qI=function(t){var r=tq(tq({},Dke),t),n=S.useRef(),a=S.useState(-1),i=Ske(a,2),s=i[0],o=i[1];S.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&o(E)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,w=r.animationEasing,g=r.animationDuration,y=r.animationBegin,b=r.isAnimationActive,_=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var N=gn("recharts-rectangle",m);return _?l(rd,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:w,isActive:_,children:function(E){var C=E.width,D=E.height,P=E.x,F=E.y;return l(rd,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:b,easing:w,children:l("path",{...Rr(r,!0),className:N,d:rq(P,F,C,D,h),ref:n})})}}):l("path",{...Rr(r,!0),className:N,d:rq(c,u,d,f,h)})},Ike=["points","className","baseLinePoints","connectNulls"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(this,arguments)}function Rke(e,t){if(e==null)return{};var r=Mke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nq(e){return $ke(e)||jke(e)||Lke(e)||Fke()}function Fke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lke(e,t){if(e){if(typeof e=="string")return E8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E8(e,t)}}function jke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ke(e){if(Array.isArray(e))return E8(e)}function E8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var aq=function(t){return t&&t.x===+t.x&&t.y===+t.y},Bke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){aq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),aq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},K2=function(t,r){var n=Bke(t);r&&(n=[n.reduce(function(i,s){return[].concat(nq(i),nq(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Uke=function(t,r,n){var a=K2(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(K2(r.reverse(),n).slice(1))},qke=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,s=Rke(t,Ike);if(!r||!r.length)return null;var o=gn("recharts-polygon",n);if(a&&a.length){var c=s.stroke&&s.stroke!=="none",u=Uke(r,a,i);return Qe.createElement("g",{className:o},Qe.createElement("path",zv({},Rr(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?Qe.createElement("path",zv({},Rr(s,!0),{fill:"none",d:K2(r,i)})):null,c?Qe.createElement("path",zv({},Rr(s,!0),{fill:"none",d:K2(a,i)})):null)}var d=K2(r,i);return Qe.createElement("path",zv({},Rr(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function C8(){return C8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C8.apply(this,arguments)}var tb=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,s=gn("recharts-dot",i);return r===+r&&n===+n&&a===+a?Qe.createElement("circle",C8({},Rr(t,!1),F5(t),{className:s,cx:r,cy:n,r:a})):null};function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}var Wke=["x","y","top","left","width","height","className"];function P8(){return P8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P8.apply(this,arguments)}function iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iq(Object(r),!0).forEach(function(n){Vke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vke(e,t,r){return t=Hke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hke(e){var t=Gke(e,"string");return Vx(t)=="symbol"?t:t+""}function Gke(e,t){if(Vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yke(e,t){if(e==null)return{};var r=Kke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Xke=function(t,r,n,a,i,s){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},Jke=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,s=t.top,o=s===void 0?0:s,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,w=t.className,g=Yke(t,Wke),y=zke({x:n,y:i,top:o,left:u,width:f,height:m},g);return!Xt(n)||!Xt(i)||!Xt(f)||!Xt(m)||!Xt(o)||!Xt(u)?null:Qe.createElement("path",P8({},Rr(y,!0),{className:gn("recharts-cross",w),d:Xke(n,i,f,m,o,u)}))},fP,sq;function Zke(){if(sq)return fP;sq=1;var e=mN(),t=PZ(),r=yf();function n(a,i){return a&&a.length?e(a,r(i,2),t):void 0}return fP=n,fP}var Qke=Zke();const eEe=pa(Qke);var hP,oq;function tEe(){if(oq)return hP;oq=1;var e=mN(),t=yf(),r=TZ();function n(a,i){return a&&a.length?e(a,t(i,2),r):void 0}return hP=n,hP}var rEe=tEe();const nEe=pa(rEe);var aEe=["cx","cy","angle","ticks","axisLine"],iEe=["ticks","tick","angle","tickFormatter","stroke"];function O1(e){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O1(e)}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){xN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cq(e,t){if(e==null)return{};var r=sEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gQ(n.key),n)}}function lEe(e,t,r){return t&&uq(e.prototype,t),r&&uq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cEe(e,t,r){return t=fS(t),uEe(e,mQ()?Reflect.construct(t,r||[],fS(e).constructor):t.apply(e,r))}function uEe(e,t){if(t&&(O1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dEe(e)}function dEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mQ=function(){return!!e})()}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fS(e)}function fEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T8(e,t)}function T8(e,t){return T8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T8(e,t)}function xN(e,t,r){return t=gQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gQ(e){var t=hEe(e,"string");return O1(t)=="symbol"?t:t+""}function hEe(e,t){if(O1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(O1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wN=function(e){function t(){return oEe(this,t),cEe(this,t,arguments)}return fEe(t,e),lEe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,o=i.cx,c=i.cy;return qa(o,c,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=eEe(o,function(d){return d.coordinate||0}),u=nEe(o,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,o=n.ticks,c=n.axisLine,u=cq(n,aEe),d=o.reduce(function(w,g){return[Math.min(w[0],g.coordinate),Math.max(w[1],g.coordinate)]},[1/0,-1/0]),f=qa(a,i,d[0],s),h=qa(a,i,d[1],s),m=b0(b0(b0({},Rr(u,!1)),{},{fill:"none"},Rr(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return l("line",{className:"recharts-polar-radius-axis-line",...m})}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.angle,c=a.tickFormatter,u=a.stroke,d=cq(a,iEe),f=this.getTickTextAnchor(),h=Rr(d,!1),m=Rr(s,!1),w=i.map(function(g,y){var b=n.getTickValueCoord(g),_=b0(b0(b0(b0({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:y},b),{},{payload:g});return l(Fn,{className:gn("recharts-polar-radius-axis-tick",aQ(s)),...ag(n.props,g,y),children:t.renderTickItem(s,_,c?c(g.value,y):g.value)},"tick-".concat(g.coordinate))});return l(Fn,{className:"recharts-polar-radius-axis-ticks",children:w})}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:x(Fn,{className:gn("recharts-polar-radius-axis",this.props.className),children:[i&&this.renderAxisLine(),s&&this.renderTicks(),$s.renderCallByParent(this.props,this.getViewBox())]})}}],[{key:"renderTickItem",value:function(n,a,i){var s;return Qe.isValidElement(n)?s=Qe.cloneElement(n,a):Zr(n)?s=n(a):s=l(ig,{...a,className:"recharts-polar-radius-axis-tick-value",children:i}),s}}])}(S.PureComponent);xN(wN,"displayName","PolarRadiusAxis");xN(wN,"axisType","radiusAxis");xN(wN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function D1(e){"@babel/helpers - typeof";return D1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D1(e)}function dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dq(Object(r),!0).forEach(function(n){bN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yQ(n.key),n)}}function mEe(e,t,r){return t&&fq(e.prototype,t),r&&fq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gEe(e,t,r){return t=hS(t),vEe(e,vQ()?Reflect.construct(t,r||[],hS(e).constructor):t.apply(e,r))}function vEe(e,t){if(t&&(D1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yEe(e)}function yEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vQ=function(){return!!e})()}function hS(e){return hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hS(e)}function xEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O8(e,t)}function O8(e,t){return O8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},O8(e,t)}function bN(e,t,r){return t=yQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yQ(e){var t=wEe(e,"string");return D1(t)=="symbol"?t:t+""}function wEe(e,t){if(D1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(D1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bEe=Math.PI/180,_Ee=1e-5,_N=function(e){function t(){return pEe(this,t),gEe(this,t,arguments)}return xEe(t,e),mEe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,o=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=qa(i,s,o,n.coordinate),h=qa(i,s,o+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*bEe),s;return i>_Ee?s=a==="outer"?"start":"end":i<-1e-5?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,o=n.axisLine,c=n.axisLineType,u=_0(_0({},Rr(this.props,!1)),{},{fill:"none"},Rr(o,!1));if(c==="circle")return l(tb,{className:"recharts-polar-angle-axis-line",...u,cx:a,cy:i,r:s});var d=this.props.ticks,f=d.map(function(h){return qa(a,i,s,h.coordinate)});return l(qke,{className:"recharts-polar-angle-axis-line",...u,points:f})}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,o=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Rr(this.props,!1),f=Rr(s,!1),h=_0(_0({},d),{},{fill:"none"},Rr(o,!1)),m=i.map(function(w,g){var y=n.getTickLineCoord(w),b=n.getTickTextAnchor(w),_=_0(_0(_0({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:w,x:y.x2,y:y.y2});return x(Fn,{className:gn("recharts-polar-angle-axis-tick",aQ(s)),...ag(n.props,w,g),children:[o&&l("line",{className:"recharts-polar-angle-axis-tick-line",...h,...y}),s&&t.renderTickItem(s,_,c?c(w.value,g):w.value)]},"tick-".concat(w.coordinate))});return l(Fn,{className:"recharts-polar-angle-axis-ticks",children:m})}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:x(Fn,{className:gn("recharts-polar-angle-axis",this.props.className),children:[s&&this.renderAxisLine(),this.renderTicks()]})}}],[{key:"renderTickItem",value:function(n,a,i){var s;return Qe.isValidElement(n)?s=Qe.cloneElement(n,a):Zr(n)?s=n(a):s=l(ig,{...a,className:"recharts-polar-angle-axis-tick-value",children:i}),s}}])}(S.PureComponent);bN(_N,"displayName","PolarAngleAxis");bN(_N,"axisType","angleAxis");bN(_N,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pP,hq;function SEe(){if(hq)return pP;hq=1;var e=CJ(),t=e(Object.getPrototypeOf,Object);return pP=t,pP}var mP,pq;function NEe(){if(pq)return mP;pq=1;var e=Th(),t=SEe(),r=Oh(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,o=i.hasOwnProperty,c=s.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var f=t(d);if(f===null)return!0;var h=o.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==c}return mP=u,mP}var AEe=NEe();const kEe=pa(AEe);var gP,mq;function EEe(){if(mq)return gP;mq=1;var e=Th(),t=Oh(),r="[object Boolean]";function n(a){return a===!0||a===!1||t(a)&&e(a)==r}return gP=n,gP}var CEe=EEe();const PEe=pa(CEe);function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function TEe(e,t){return REe(e)||IEe(e,t)||DEe(e,t)||OEe()}function OEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DEe(e,t){if(e){if(typeof e=="string")return gq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gq(e,t)}}function gq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function REe(e){if(Array.isArray(e))return e}function vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vq(Object(r),!0).forEach(function(n){MEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MEe(e,t,r){return t=FEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FEe(e){var t=LEe(e,"string");return Hx(t)=="symbol"?t:t+""}function LEe(e,t){if(Hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xq=function(t,r,n,a,i){var s=n-a,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-s/2,",").concat(r+i),o+="L ".concat(t+n-s/2-a,",").concat(r+i),o+="L ".concat(t,",").concat(r," Z"),o},jEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$Ee=function(t){var r=yq(yq({},jEe),t),n=S.useRef(),a=S.useState(-1),i=TEe(a,2),s=i[0],o=i[1];S.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&o(N)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,w=r.animationEasing,g=r.animationDuration,y=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var _=gn("recharts-trapezoid",m);return b?l(rd,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:w,isActive:b,children:function(N){var E=N.upperWidth,C=N.lowerWidth,D=N.height,P=N.x,F=N.y;return l(rd,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:w,children:l("path",{...Rr(r,!0),className:_,d:xq(P,F,E,C,D),ref:n})})}}):l("g",{children:l("path",{...Rr(r,!0),className:_,d:xq(c,u,d,f,h)})})},BEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function UEe(e,t){if(e==null)return{};var r=qEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wq(Object(r),!0).forEach(function(n){WEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WEe(e,t,r){return t=zEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zEe(e){var t=VEe(e,"string");return Gx(t)=="symbol"?t:t+""}function VEe(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HEe(e,t){return pS(pS({},t),e)}function GEe(e,t){return e==="symbols"}function bq(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return l(qI,{...r});case"trapezoid":return l($Ee,{...r});case"sector":return l(oQ,{...r});case"symbols":if(GEe(t))return l(oI,{...r});break;default:return null}}function YEe(e){return S.isValidElement(e)?e.props:e}function xQ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?HEe:n,i=e.activeClassName,s=i===void 0?"recharts-active-shape":i,o=e.isActive,c=UEe(e,BEe),u;if(S.isValidElement(t))u=S.cloneElement(t,pS(pS({},c),YEe(t)));else if(Zr(t))u=t(c);else if(kEe(t)&&!PEe(t)){var d=a(t,c);u=l(bq,{shapeType:r,elementProps:d})}else{var f=c;u=l(bq,{shapeType:r,elementProps:f})}return o?l(Fn,{className:s,children:u}):u}function SN(e,t){return t!=null&&"trapezoids"in e.props}function NN(e,t){return t!=null&&"sectors"in e.props}function Yx(e,t){return t!=null&&"points"in e.props}function KEe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function XEe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function JEe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function ZEe(e,t){var r;return SN(e,t)?r=KEe:NN(e,t)?r=XEe:Yx(e,t)&&(r=JEe),r}function QEe(e,t){var r;return SN(e,t)?r="trapezoids":NN(e,t)?r="sectors":Yx(e,t)&&(r="points"),r}function eCe(e,t){if(SN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(NN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Yx(e,t)?t.payload:{}}function tCe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=QEe(r,t),i=eCe(r,t),s=n.filter(function(c,u){var d=sg(i,c),f=r.props[a].filter(function(w){var g=ZEe(r,t);return g(w,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),o=n.indexOf(s[s.length-1]);return o}var a5;function I1(e){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I1(e)}function _q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(r),!0).forEach(function(n){Jc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bQ(n.key),n)}}function nCe(e,t,r){return t&&Sq(e.prototype,t),r&&Sq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aCe(e,t,r){return t=mS(t),iCe(e,wQ()?Reflect.construct(t,r||[],mS(e).constructor):t.apply(e,r))}function iCe(e,t){if(t&&(I1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sCe(e)}function sCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wQ=function(){return!!e})()}function mS(e){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mS(e)}function oCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D8(e,t)}function D8(e,t){return D8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},D8(e,t)}function Jc(e,t,r){return t=bQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bQ(e){var t=lCe(e,"string");return I1(t)=="symbol"?t:t+""}function lCe(e,t){if(I1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(I1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $o=function(e){function t(r){var n;return rCe(this,t),n=aCe(this,t,[r]),Jc(n,"pieRef",null),Jc(n,"sectorRefs",[]),Jc(n,"id",Pg("recharts-pie-")),Jc(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Zr(a)&&a()}),Jc(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Zr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return oCe(t,e),nCe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.label,o=i.labelLine,c=i.dataKey,u=i.valueKey,d=Rr(this.props,!1),f=Rr(s,!1),h=Rr(o,!1),m=s&&s.offsetRadius||20,w=n.map(function(g,y){var b=(g.startAngle+g.endAngle)/2,_=qa(g.cx,g.cy,g.outerRadius+m,b),N=$a($a($a($a({},d),g),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(_.x,g.cx)},_),E=$a($a($a($a({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:y,points:[qa(g.cx,g.cy,g.outerRadius,b),_]}),C=c;return mn(c)&&mn(u)?C="value":mn(c)&&(C=u),x(Fn,{children:[o&&t.renderLabelLineItem(o,E,"line"),t.renderLabelItem(s,N,Gi(g,C))]},"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y))});return l(Fn,{className:"recharts-pie-labels",children:w})}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,s=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?s:h,w=$a($a({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return S.createElement(Fn,{ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector",...ag(a.props,u,d),key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)},l(xQ,{option:m,isActive:f,shapeType:"sector",...w}))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,s=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return l(rd,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd,children:function(w){var g=w.t,y=[],b=i&&i[0],_=b.startAngle;return i.forEach(function(N,E){var C=h&&h[E],D=E>0?yc(N,"paddingAngle",0):0;if(C){var P=xs(C.endAngle-C.startAngle,N.endAngle-N.startAngle),F=$a($a({},N),{},{startAngle:_+D,endAngle:_+P(g)+D});y.push(F),_=F.endAngle}else{var L=N.endAngle,W=N.startAngle,T=xs(0,L-W),R=T(g),j=$a($a({},N),{},{startAngle:_+D,endAngle:_+R+D});y.push(j),_=j.endAngle}}),l(Fn,{children:n.renderSectorsStatically(y)})}},"pie-".concat(d,"-").concat(m))}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var s=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,s=this.state.prevSectors;return i&&a&&a.length&&(!s||!sg(s,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,s=a.sectors,o=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,w=this.state.isAnimationFinished;if(i||!s||!s.length||!Xt(u)||!Xt(d)||!Xt(f)||!Xt(h))return null;var g=gn("recharts-pie",o);return x(Fn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){n.pieRef=b},children:[this.renderSectors(),c&&this.renderLabels(s),$s.renderCallByParent(this.props,null,!1),(!m||w)&&rf.renderCallByParent(this.props,s,!1)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(Qe.isValidElement(n))return Qe.cloneElement(n,a);if(Zr(n))return n(a);var s=gn("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return S.createElement(V0,{...a,key:i,type:"linear",className:s})}},{key:"renderLabelItem",value:function(n,a,i){if(Qe.isValidElement(n))return Qe.cloneElement(n,a);var s=i;if(Zr(n)&&(s=n(a),Qe.isValidElement(s)))return s;var o=gn("recharts-pie-label-text",typeof n!="boolean"&&!Zr(n)?n.className:"");return l(ig,{...a,alignmentBaseline:"middle",className:o,children:s})}}])}(S.PureComponent);a5=$o;Jc($o,"displayName","Pie");Jc($o,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Im.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Jc($o,"parseDeltaAngle",function(e,t){var r=cl(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Jc($o,"getRealPieData",function(e){var t=e.data,r=e.children,n=Rr(e,!1),a=xc(r,Xc);return t&&t.length?t.map(function(i,s){return $a($a($a({payload:i},n),i),a&&a[s]&&a[s].props)}):a&&a.length?a.map(function(i){return $a($a({},n),i.props)}):[]});Jc($o,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,s=nQ(a,i),o=n+ul(e.cx,a,a/2),c=r+ul(e.cy,i,i/2),u=ul(e.innerRadius,s,0),d=ul(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Jc($o,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?$a($a({},t.type.defaultProps),t.props):t.props,a=a5.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,s=n.startAngle,o=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),w=a5.parseCoordinateOfPie(n,r),g=a5.parseDeltaAngle(s,o),y=Math.abs(g),b=u;mn(u)&&mn(f)?(Gu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):mn(u)&&(Gu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var _=a.filter(function(F){return Gi(F,b,0)!==0}).length,N=(y>=360?_:_-1)*c,E=y-_*m-N,C=a.reduce(function(F,L){var W=Gi(L,b,0);return F+(Xt(W)?W:0)},0),D;if(C>0){var P;D=a.map(function(F,L){var W=Gi(F,b,0),T=Gi(F,d,L),R=(Xt(W)?W:0)/C,j;L?j=P.endAngle+cl(g)*c*(W!==0?1:0):j=s;var Y=j+cl(g)*((W!==0?m:0)+R*E),Z=(j+Y)/2,re=(w.innerRadius+w.outerRadius)/2,z=[{name:T,value:W,payload:F,dataKey:b,type:h}],q=qa(w.cx,w.cy,re,Z);return P=$a($a($a({percent:R,cornerRadius:i,name:T,tooltipPayload:z,midAngle:Z,middleRadius:re,tooltipPosition:q},F),w),{},{value:Gi(F,b),startAngle:j,endAngle:Y,payload:F,paddingAngle:cl(g)*c}),P})}return $a($a({},w),{},{sectors:D,data:a})});var vP,Nq;function cCe(){if(Nq)return vP;Nq=1;var e=Math.ceil,t=Math.max;function r(n,a,i,s){for(var o=-1,c=t(e((a-n)/(i||1)),0),u=Array(c);c--;)u[s?c:++o]=n,n+=i;return u}return vP=r,vP}var yP,Aq;function _Q(){if(Aq)return yP;Aq=1;var e=zJ(),t=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return yP=n,yP}var xP,kq;function uCe(){if(kq)return xP;kq=1;var e=cCe(),t=lN(),r=_Q();function n(a){return function(i,s,o){return o&&typeof o!="number"&&t(i,s,o)&&(s=o=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),o=o===void 0?i<s?1:-1:r(o),e(i,s,o,a)}}return xP=n,xP}var wP,Eq;function dCe(){if(Eq)return wP;Eq=1;var e=uCe(),t=e();return wP=t,wP}var fCe=dCe();const gS=pa(fCe);function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function Cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cq(Object(r),!0).forEach(function(n){SQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SQ(e,t,r){return t=hCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hCe(e){var t=pCe(e,"string");return Kx(t)=="symbol"?t:t+""}function pCe(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mCe=["Webkit","Moz","O","ms"],gCe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=mCe.reduce(function(i,s){return Pq(Pq({},i),{},SQ({},s+n,r))},{});return a[t]=r,a};function R1(e){"@babel/helpers - typeof";return R1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R1(e)}function Tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tq(Object(r),!0).forEach(function(n){ac(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AQ(n.key),n)}}function yCe(e,t,r){return t&&Oq(e.prototype,t),r&&Oq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xCe(e,t,r){return t=vS(t),wCe(e,NQ()?Reflect.construct(t,r||[],vS(e).constructor):t.apply(e,r))}function wCe(e,t){if(t&&(R1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bCe(e)}function bCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NQ=function(){return!!e})()}function vS(e){return vS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vS(e)}function _Ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I8(e,t)}function I8(e,t){return I8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I8(e,t)}function ac(e,t,r){return t=AQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AQ(e){var t=SCe(e,"string");return R1(t)=="symbol"?t:t+""}function SCe(e,t){if(R1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(R1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var NCe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,s=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=H2().domain(gS(0,c)).range([i,i+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},Dq=function(t){return t.changedTouches&&!!t.changedTouches.length},M1=function(e){function t(r){var n;return vCe(this,t),n=xCe(this,t,[r]),ac(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ac(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ac(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,o=a.startIndex;s==null||s({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),ac(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ac(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ac(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ac(n,"handleSlideDragStart",function(a){var i=Dq(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return _Ce(t,e),yCe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(s,f),w=t.getIndexInRange(s,h);return{startIndex:m-m%c,endIndex:w===d?d:w-w%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,o=a.dataKey,c=Gi(i[n],o,n);return Zr(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,o=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,w=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-o,u+d-f-s):g<0&&(g=Math.max(g,u-s,u-o));var y=this.getIndex({startX:s+g,endX:o+g});(y.startIndex!==h||y.endIndex!==m)&&w&&w(y),this.setState({startX:s+g,endX:o+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Dq(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,o=a.endX,c=a.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,w=d.onChange,g=d.gap,y=d.data,b={startX:this.state.startX,endX:this.state.endX},_=n.pageX-i;_>0?_=Math.min(_,f+h-m-u):_<0&&(_=Math.max(_,f-u)),b[s]=u+_;var N=this.getIndex(b),E=N.startIndex,C=N.endIndex,D=function(){var F=y.length-1;return s==="startX"&&(o>c?E%g===0:C%g===0)||o<c&&C===F||s==="endX"&&(o>c?C%g===0:E%g===0)||o>c&&C===F};this.setState(ac(ac({},s,u+_),"brushMoveStartX",n.pageX),function(){w&&D()&&w(N)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[a],f=o.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=o.length)){var m=o[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(ac({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.fill,u=n.stroke;return l("rect",{stroke:u,fill:c,x:a,y:i,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.data,u=n.children,d=n.padding,f=S.Children.only(u);return f?Qe.cloneElement(f,{x:a,y:i,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,w=c.data,g=c.startIndex,y=c.endIndex,b=Math.max(n,this.props.x),_=bP(bP({},Rr(this.props,!1)),{},{x:b,y:u,width:d,height:f}),N=m||"Min value: ".concat((i=w[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=w[y])===null||s===void 0?void 0:s.name);return l(Fn,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),o.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"},children:t.renderTraveller(h,_)})}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,o=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return l("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,o=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,w={pointerEvents:"none",fill:u};return x(Fn,{className:"recharts-brush-texts",children:[l(ig,{textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:s+o/2,...w,children:this.getTextOfTick(a)}),l(ig,{textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:s+o/2,...w,children:this.getTextOfTick(i)})]})}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,o=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,w=h.endX,g=h.isTextActive,y=h.isSlideMoving,b=h.isTravellerMoving,_=h.isTravellerFocused;if(!a||!a.length||!Xt(o)||!Xt(c)||!Xt(u)||!Xt(d)||u<=0||d<=0)return null;var N=gn("recharts-brush",i),E=Qe.Children.count(s)===1,C=gCe("userSelect","none");return x(Fn,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C,children:[this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(m,w),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(w,"endX"),(g||y||b||_||f)&&this.renderText()]})}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,o=n.height,c=n.stroke,u=Math.floor(i+o/2)-1;return x(_r,{children:[l("rect",{x:a,y:i,width:s,height:o,fill:c,stroke:"none"}),l("line",{x1:a+1,y1:u,x2:a+s-1,y2:u,fill:"none",stroke:"#fff"}),l("line",{x1:a+1,y1:u+2,x2:a+s-1,y2:u+2,fill:"none",stroke:"#fff"})]})}},{key:"renderTraveller",value:function(n,a){var i;return Qe.isValidElement(n)?i=Qe.cloneElement(n,a):Zr(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,o=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return bP({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},i&&i.length?NCe({data:i,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+s-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,o=i-1;o-s>1;){var c=Math.floor((s+o)/2);n[c]>a?o=c:s=c}return a>=n[o]?o:s}}])}(S.PureComponent);ac(M1,"displayName","Brush");ac(M1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _P,Iq;function ACe(){if(Iq)return _P;Iq=1;var e=pI();function t(r,n){var a;return e(r,function(i,s,o){return a=n(i,s,o),!a}),!!a}return _P=t,_P}var SP,Rq;function kCe(){if(Rq)return SP;Rq=1;var e=bJ(),t=yf(),r=ACe(),n=Wl(),a=lN();function i(s,o,c){var u=n(s)?e:r;return c&&a(s,o,c)&&(o=void 0),u(s,t(o,3))}return SP=i,SP}var ECe=kCe();const CCe=pa(ECe);var nf=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},NP,Mq;function PCe(){if(Mq)return NP;Mq=1;var e=$J();function t(r,n,a){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return NP=t,NP}var AP,Fq;function TCe(){if(Fq)return AP;Fq=1;var e=PCe(),t=LJ(),r=yf();function n(a,i){var s={};return i=r(i,3),t(a,function(o,c,u){e(s,c,i(o,c,u))}),s}return AP=n,AP}var OCe=TCe();const DCe=pa(OCe);var kP,Lq;function ICe(){if(Lq)return kP;Lq=1;function e(t,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(!r(t[n],n,t))return!1;return!0}return kP=e,kP}var EP,jq;function RCe(){if(jq)return EP;jq=1;var e=pI();function t(r,n){var a=!0;return e(r,function(i,s,o){return a=!!n(i,s,o),a}),a}return EP=t,EP}var CP,$q;function MCe(){if($q)return CP;$q=1;var e=ICe(),t=RCe(),r=yf(),n=Wl(),a=lN();function i(s,o,c){var u=n(s)?e:t;return c&&a(s,o,c)&&(o=void 0),u(s,r(o,3))}return CP=i,CP}var FCe=MCe();const kQ=pa(FCe);var LCe=["x","y"];function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function R8(){return R8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R8.apply(this,arguments)}function Bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bq(Object(r),!0).forEach(function(n){jCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jCe(e,t,r){return t=$Ce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ce(e){var t=BCe(e,"string");return Xx(t)=="symbol"?t:t+""}function BCe(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UCe(e,t){if(e==null)return{};var r=qCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WCe(e,t){var r=e.x,n=e.y,a=UCe(e,LCe),i="".concat(r),s=parseInt(i,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return g2(g2(g2(g2(g2({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Uq(e){return Qe.createElement(xQ,R8({shapeType:"rectangle",propTransformer:WCe,activeClassName:"recharts-active-bar"},e))}var zCe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=typeof n=="number";return i?t(n,a):(i||lg(),r)}},VCe=["value","background"],EQ;function F1(e){"@babel/helpers - typeof";return F1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F1(e)}function HCe(e,t){if(e==null)return{};var r=GCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qq(Object(r),!0).forEach(function(n){Xp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PQ(n.key),n)}}function KCe(e,t,r){return t&&Wq(e.prototype,t),r&&Wq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XCe(e,t,r){return t=yS(t),JCe(e,CQ()?Reflect.construct(t,r||[],yS(e).constructor):t.apply(e,r))}function JCe(e,t){if(t&&(F1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZCe(e)}function ZCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CQ=function(){return!!e})()}function yS(e){return yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yS(e)}function QCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M8(e,t)}function M8(e,t){return M8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M8(e,t)}function Xp(e,t,r){return t=PQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQ(e){var t=ePe(e,"string");return F1(t)=="symbol"?t:t+""}function ePe(e,t){if(F1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(F1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nu=function(e){function t(){var r;YCe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=XCe(this,t,[].concat(a)),Xp(r,"state",{isAnimationFinished:!1}),Xp(r,"id",Pg("recharts-bar-")),Xp(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Xp(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return QCe(t,e),KCe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,o=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Rr(this.props,!1);return n&&n.map(function(f,h){var m=h===c,w=m?u:s,g=ss(ss(ss({},d),f),{},{isActive:m,option:w,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return S.createElement(Fn,{className:"recharts-bar-rectangle",...ag(a.props,f,h),key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)},l(Uq,{...g}))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,o=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return l(rd,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(m){var w=m.t,g=i.map(function(y,b){var _=h&&h[b];if(_){var N=xs(_.x,y.x),E=xs(_.y,y.y),C=xs(_.width,y.width),D=xs(_.height,y.height);return ss(ss({},y),{},{x:N(w),y:E(w),width:C(w),height:D(w)})}if(s==="horizontal"){var P=xs(0,y.height),F=P(w);return ss(ss({},y),{},{y:y.y+y.height-F,height:F})}var L=xs(0,y.width),W=L(w);return ss(ss({},y),{},{width:W})});return l(Fn,{children:n.renderRectanglesStatically(g)})}},"bar-".concat(f))}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!sg(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,o=a.activeIndex,c=Rr(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=HCe(u,VCe);if(!f)return null;var m=ss(ss(ss(ss(ss({},h),{},{fill:"#eee"},f),c),ag(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return l(Uq,{option:n.props.background,isActive:d===o,...m},"background-bar-".concat(d))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=xc(d,eb);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,m=function(y,b){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:Gi(y,b)}},w={clipPath:n?"url(#clipPath-".concat(a,")"):null};return l(Fn,{...w,children:f.map(function(g){return Qe.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:h,dataPointFormatter:m})})})}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,o=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,w=n.background,g=n.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,b=gn("recharts-bar",s),_=o&&o.allowDataOverflow,N=c&&c.allowDataOverflow,E=_||N,C=mn(g)?this.id:g;return x(Fn,{className:b,children:[_||N?l("defs",{children:l("clipPath",{id:"clipPath-".concat(C),children:l("rect",{x:_?u:u-f/2,y:N?d:d-h/2,width:_?f:f*2,height:N?h:h*2})})}):null,x(Fn,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(C,")"):null,children:[w?this.renderBackground():null,this.renderRectangles()]}),this.renderErrorBar(E,C),(!m||y)&&rf.renderCallByParent(this.props,i)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(S.PureComponent);EQ=nu;Xp(nu,"displayName","Bar");Xp(nu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Im.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xp(nu,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=CNe(n,r);if(!m)return null;var w=t.layout,g=r.type.defaultProps,y=g!==void 0?ss(ss({},g),r.props):r.props,b=y.dataKey,_=y.children,N=y.minPointSize,E=w==="horizontal"?s:i,C=u?E.scale.domain():null,D=MNe({numericAxis:E}),P=xc(_,Xc),F=f.map(function(L,W){var T,R,j,Y,Z,re;u?T=PNe(u[d+W],C):(T=Gi(L,b),Array.isArray(T)||(T=[D,T]));var z=zCe(N,EQ.defaultProps.minPointSize)(T[1],W);if(w==="horizontal"){var q,B=[s.scale(T[0]),s.scale(T[1])],G=B[0],Q=B[1];R=mU({axis:i,ticks:o,bandSize:a,offset:m.offset,entry:L,index:W}),j=(q=Q??G)!==null&&q!==void 0?q:void 0,Y=m.size;var O=G-Q;if(Z=Number.isNaN(O)?0:O,re={x:R,y:s.y,width:Y,height:s.height},Math.abs(z)>0&&Math.abs(Z)<Math.abs(z)){var J=cl(Z||z)*(Math.abs(z)-Math.abs(Z));j-=J,Z+=J}}else{var X=[i.scale(T[0]),i.scale(T[1])],ne=X[0],ie=X[1];if(R=ne,j=mU({axis:s,ticks:c,bandSize:a,offset:m.offset,entry:L,index:W}),Y=ie-ne,Z=m.size,re={x:i.x,y:j,width:i.width,height:Z},Math.abs(z)>0&&Math.abs(Y)<Math.abs(z)){var oe=cl(Y||z)*(Math.abs(z)-Math.abs(Y));Y+=oe}}return ss(ss(ss({},L),{},{x:R,y:j,width:Y,height:Z,value:u?T:T[1],payload:L,background:re},P&&P[W]&&P[W].props),{},{tooltipPayload:[tQ(r,L)],tooltipPosition:{x:R+Y/2,y:j+Z/2}})});return ss({data:F,layout:w},h)});function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function tPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TQ(n.key),n)}}function rPe(e,t,r){return t&&zq(e.prototype,t),r&&zq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){AN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AN(e,t,r){return t=TQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TQ(e){var t=nPe(e,"string");return Jx(t)=="symbol"?t:t+""}function nPe(e,t){if(Jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WI=function(t,r,n,a,i){var s=t.width,o=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!ic(u,nu);return d.reduce(function(m,w){var g=r[w],y=g.orientation,b=g.domain,_=g.padding,N=_===void 0?{}:_,E=g.mirror,C=g.reversed,D="".concat(y).concat(E?"Mirror":""),P,F,L,W,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var R=b[1]-b[0],j=1/0,Y=g.categoricalDomain.sort(v2e);if(Y.forEach(function(X,ne){ne>0&&(j=Math.min((X||0)-(Y[ne-1]||0),j))}),Number.isFinite(j)){var Z=j/R,re=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(P=Z*re/2),g.padding==="no-gap"){var z=ul(t.barCategoryGap,Z*re),q=Z*re/2;P=q-z-(q-z)/re*z}}}a==="xAxis"?F=[n.left+(N.left||0)+(P||0),n.left+n.width-(N.right||0)-(P||0)]:a==="yAxis"?F=c==="horizontal"?[n.top+n.height-(N.bottom||0),n.top+(N.top||0)]:[n.top+(N.top||0)+(P||0),n.top+n.height-(N.bottom||0)-(P||0)]:F=g.range,C&&(F=[F[1],F[0]]);var B=JZ(g,i,h),G=B.scale,Q=B.realScaleType;G.domain(b).range(F),ZZ(G);var O=QZ(G,ju(ju({},g),{},{realScaleType:Q}));a==="xAxis"?(T=y==="top"&&!E||y==="bottom"&&E,L=n.left,W=f[D]-T*g.height):a==="yAxis"&&(T=y==="left"&&!E||y==="right"&&E,L=f[D]-T*g.width,W=n.top);var J=ju(ju(ju({},g),O),{},{realScaleType:Q,x:L,y:W,scale:G,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return J.bandSize=oS(J,O),!g.hide&&a==="xAxis"?f[D]+=(T?-1:1)*J.height:g.hide||(f[D]+=(T?-1:1)*J.width),ju(ju({},m),{},AN({},w,J))},{})},OQ=function(t,r){var n=t.x,a=t.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},aPe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return OQ({x:r,y:n},{x:a,y:i})},DQ=function(){function e(t){tPe(this,e),this.scale=t}return rPe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();AN(DQ,"EPS",1e-4);var zI=function(t){var r=Object.keys(t).reduce(function(n,a){return ju(ju({},n),{},AN({},a,DQ.create(t[a])))},{});return ju(ju({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,o=i.position;return DCe(a,function(c,u){return r[u].apply(c,{bandAware:s,position:o})})},isInRange:function(a){return kQ(a,function(i,s){return r[s].isInRange(i)})}})};function iPe(e){return(e%180+180)%180}var sPe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=iPe(a),s=i*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},PP,Hq;function oPe(){if(Hq)return PP;Hq=1;var e=yf(),t=Kw(),r=sN();function n(a){return function(i,s,o){var c=Object(i);if(!t(i)){var u=e(s,3);i=r(i),s=function(f){return u(c[f],f,c)}}var d=a(i,s,o);return d>-1?c[u?i[d]:d]:void 0}}return PP=n,PP}var TP,Gq;function lPe(){if(Gq)return TP;Gq=1;var e=_Q();function t(r){var n=e(r),a=n%1;return n===n?a?n-a:n:0}return TP=t,TP}var OP,Yq;function cPe(){if(Yq)return OP;Yq=1;var e=DJ(),t=yf(),r=lPe(),n=Math.max;function a(i,s,o){var c=i==null?0:i.length;if(!c)return-1;var u=o==null?0:r(o);return u<0&&(u=n(c+u,0)),e(i,t(s,3),u)}return OP=a,OP}var DP,Kq;function uPe(){if(Kq)return DP;Kq=1;var e=oPe(),t=cPe(),r=e(t);return DP=r,DP}var dPe=uPe();const fPe=pa(dPe);var hPe=GX();const pPe=pa(hPe);var mPe=pPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),VI=S.createContext(void 0),HI=S.createContext(void 0),IQ=S.createContext(void 0),RQ=S.createContext({}),MQ=S.createContext(void 0),FQ=S.createContext(0),LQ=S.createContext(0),Xq=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=t.clipPathId,o=t.children,c=t.width,u=t.height,d=mPe(i);return l(VI.Provider,{value:n,children:l(HI.Provider,{value:a,children:l(RQ.Provider,{value:i,children:l(IQ.Provider,{value:d,children:l(MQ.Provider,{value:s,children:l(FQ.Provider,{value:u,children:l(LQ.Provider,{value:c,children:o})})})})})})})},gPe=function(){return S.useContext(MQ)},jQ=function(t){var r=S.useContext(VI);r==null&&lg();var n=r[t];return n==null&&lg(),n},vPe=function(){var t=S.useContext(VI);return Gp(t)},yPe=function(){var t=S.useContext(HI),r=fPe(t,function(n){return kQ(n.domain,Number.isFinite)});return r||Gp(t)},$Q=function(t){var r=S.useContext(HI);r==null&&lg();var n=r[t];return n==null&&lg(),n},xPe=function(){var t=S.useContext(IQ);return t},wPe=function(){return S.useContext(RQ)},GI=function(){return S.useContext(LQ)},YI=function(){return S.useContext(FQ)};function L1(e){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L1(e)}function bPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UQ(n.key),n)}}function SPe(e,t,r){return t&&_Pe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,r){return t=xS(t),APe(e,BQ()?Reflect.construct(t,r||[],xS(e).constructor):t.apply(e,r))}function APe(e,t){if(t&&(L1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kPe(e)}function kPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BQ=function(){return!!e})()}function xS(e){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xS(e)}function EPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F8(e,t)}function F8(e,t){return F8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},F8(e,t)}function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){KI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KI(e,t,r){return t=UQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UQ(e){var t=CPe(e,"string");return L1(t)=="symbol"?t:t+""}function CPe(e,t){if(L1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(L1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PPe(e,t){return IPe(e)||DPe(e,t)||OPe(e,t)||TPe()}function TPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OPe(e,t){if(e){if(typeof e=="string")return Qq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qq(e,t)}}function Qq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function IPe(e){if(Array.isArray(e))return e}function L8(){return L8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L8.apply(this,arguments)}var RPe=function(t,r){var n;return Qe.isValidElement(t)?n=Qe.cloneElement(t,r):Zr(t)?n=t(r):n=Qe.createElement("line",L8({},r,{className:"recharts-reference-line-line"})),n},MPe=function(t,r,n,a,i,s,o,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var w=u.y,g=t.y.apply(w,{position:s});if(nf(u,"discard")&&!t.y.isInRange(g))return null;var y=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?y.reverse():y}if(r){var b=u.x,_=t.x.apply(b,{position:s});if(nf(u,"discard")&&!t.x.isInRange(_))return null;var N=[{x:_,y:f+m},{x:_,y:f}];return o==="top"?N.reverse():N}if(a){var E=u.segment,C=E.map(function(D){return t.apply(D,{position:s})});return nf(u,"discard")&&CCe(C,function(D){return!t.isInRange(D)})?null:C}return null};function FPe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,s=e.shape,o=e.className,c=e.alwaysShow,u=gPe(),d=jQ(a),f=$Q(i),h=xPe();if(!u||!h)return null;Gu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=zI({x:d.scale,y:f.scale}),w=bs(t),g=bs(r),y=n&&n.length===2,b=MPe(m,w,g,y,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var _=PPe(b,2),N=_[0],E=N.x,C=N.y,D=_[1],P=D.x,F=D.y,L=nf(e,"hidden")?"url(#".concat(u,")"):void 0,W=Zq(Zq({clipPath:L},Rr(e,!0)),{},{x1:E,y1:C,x2:P,y2:F});return Qe.createElement(Fn,{className:gn("recharts-reference-line",o)},RPe(s,W),$s.renderCallByParent(e,aPe({x1:E,y1:C,x2:P,y2:F})))}var XI=function(e){function t(){return bPe(this,t),NPe(this,t,arguments)}return EPe(t,e),SPe(t,[{key:"render",value:function(){return Qe.createElement(FPe,this.props)}}])}(Qe.Component);KI(XI,"displayName","ReferenceLine");KI(XI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function j8(){return j8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j8.apply(this,arguments)}function j1(e){"@babel/helpers - typeof";return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j1(e)}function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(n){kN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WQ(n.key),n)}}function $Pe(e,t,r){return t&&jPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BPe(e,t,r){return t=wS(t),UPe(e,qQ()?Reflect.construct(t,r||[],wS(e).constructor):t.apply(e,r))}function UPe(e,t){if(t&&(j1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qPe(e)}function qPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qQ=function(){return!!e})()}function wS(e){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wS(e)}function WPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$8(e,t)}function $8(e,t){return $8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$8(e,t)}function kN(e,t,r){return t=WQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WQ(e){var t=zPe(e,"string");return j1(t)=="symbol"?t:t+""}function zPe(e,t){if(j1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(j1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VPe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,s=zI({x:a.scale,y:i.scale}),o=s.apply({x:r,y:n},{bandAware:!0});return nf(t,"discard")&&!s.isInRange(o)?null:o},EN=function(e){function t(){return LPe(this,t),BPe(this,t,arguments)}return WPe(t,e),$Pe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,o=n.alwaysShow,c=n.clipPathId,u=bs(a),d=bs(i);if(Gu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=VPe(this.props);if(!f)return null;var h=f.x,m=f.y,w=this.props,g=w.shape,y=w.className,b=nf(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=tW(tW({clipPath:b},Rr(this.props,!0)),{},{cx:h,cy:m});return Qe.createElement(Fn,{className:gn("recharts-reference-dot",y)},t.renderDot(g,_),$s.renderCallByParent(this.props,{x:h-s,y:m-s,width:2*s,height:2*s}))}}])}(Qe.Component);kN(EN,"displayName","ReferenceDot");kN(EN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});kN(EN,"renderDot",function(e,t){var r;return Qe.isValidElement(e)?r=Qe.cloneElement(e,t):Zr(e)?r=e(t):r=Qe.createElement(tb,j8({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function B8(){return B8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B8.apply(this,arguments)}function $1(e){"@babel/helpers - typeof";return $1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$1(e)}function rW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rW(Object(r),!0).forEach(function(n){CN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VQ(n.key),n)}}function YPe(e,t,r){return t&&GPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KPe(e,t,r){return t=bS(t),XPe(e,zQ()?Reflect.construct(t,r||[],bS(e).constructor):t.apply(e,r))}function XPe(e,t){if(t&&($1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JPe(e)}function JPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!e})()}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bS(e)}function ZPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U8(e,t)}function U8(e,t){return U8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},U8(e,t)}function CN(e,t,r){return t=VQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VQ(e){var t=QPe(e,"string");return $1(t)=="symbol"?t:t+""}function QPe(e,t){if($1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var eTe=function(t,r,n,a,i){var s=i.x1,o=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=zI({x:d.scale,y:f.scale}),m={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},w={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return nf(i,"discard")&&(!h.isInRange(m)||!h.isInRange(w))?null:OQ(m,w)},PN=function(e){function t(){return HPe(this,t),KPe(this,t,arguments)}return ZPe(t,e),YPe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,o=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Gu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=bs(a),h=bs(i),m=bs(s),w=bs(o),g=this.props.shape;if(!f&&!h&&!m&&!w&&!g)return null;var y=eTe(f,h,m,w,this.props);if(!y&&!g)return null;var b=nf(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Qe.createElement(Fn,{className:gn("recharts-reference-area",c)},t.renderRect(g,nW(nW({clipPath:b},Rr(this.props,!0)),y)),$s.renderCallByParent(this.props,y))}}])}(Qe.Component);CN(PN,"displayName","ReferenceArea");CN(PN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});CN(PN,"renderRect",function(e,t){var r;return Qe.isValidElement(e)?r=Qe.cloneElement(e,t):Zr(e)?r=e(t):r=Qe.createElement(qI,B8({},t,{className:"recharts-reference-area-rect"})),r});function HQ(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function tTe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return sPe(n,r)}function rTe(e,t,r){var n=r==="width",a=e.x,i=e.y,s=e.width,o=e.height;return t===1?{start:n?a:i,end:n?a+s:i+o}:{start:n?a+s:i+o,end:n?a:i}}function _S(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function nTe(e,t){return HQ(e,t+1)}function aTe(e,t,r,n,a){for(var i=(n||[]).slice(),s=t.start,o=t.end,c=0,u=1,d=s,f=function(){var w=n==null?void 0:n[c];if(w===void 0)return{v:HQ(n,u)};var g=c,y,b=function(){return y===void 0&&(y=r(w,g)),y},_=w.coordinate,N=c===0||_S(e,_,b,d,o);N||(c=0,d=s,u+=1),N&&(d=_+e*(b()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function aW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aW(Object(r),!0).forEach(function(n){iTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iTe(e,t,r){return t=sTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sTe(e){var t=oTe(e,"string");return Zx(t)=="symbol"?t:t+""}function oTe(e,t){if(Zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lTe(e,t,r,n,a){for(var i=(n||[]).slice(),s=i.length,o=t.start,c=t.end,u=function(h){var m=i[h],w,g=function(){return w===void 0&&(w=r(m,h)),w};if(h===s-1){var y=e*(m.coordinate+e*g()/2-c);i[h]=m=Po(Po({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=Po(Po({},m),{},{tickCoord:m.coordinate});var b=_S(e,m.tickCoord,g,o,c);b&&(c=m.tickCoord-e*(g()/2+a),i[h]=Po(Po({},m),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return i}function cTe(e,t,r,n,a,i){var s=(n||[]).slice(),o=s.length,c=t.start,u=t.end;if(i){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);s[o-1]=d=Po(Po({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=_S(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),s[o-1]=Po(Po({},d),{},{isShow:!0}))}for(var w=i?o-1:o,g=function(_){var N=s[_],E,C=function(){return E===void 0&&(E=r(N,_)),E};if(_===0){var D=e*(N.coordinate-e*C()/2-c);s[_]=N=Po(Po({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else s[_]=N=Po(Po({},N),{},{tickCoord:N.coordinate});var P=_S(e,N.tickCoord,C,c,u);P&&(c=N.tickCoord+e*(C()/2+a),s[_]=Po(Po({},N),{},{isShow:!0}))},y=0;y<w;y++)g(y);return s}function JI(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,s=e.minTickGap,o=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Xt(c)||Im.isSsr)return nTe(a,typeof c=="number"&&Xt(c)?c:0);var h=[],m=o==="top"||o==="bottom"?"width":"height",w=d&&m==="width"?V2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(N,E){var C=Zr(u)?u(N.value,E):N.value;return m==="width"?tTe(V2(C,{fontSize:t,letterSpacing:r}),w,f):V2(C,{fontSize:t,letterSpacing:r})[m]},y=a.length>=2?cl(a[1].coordinate-a[0].coordinate):1,b=rTe(i,y,m);return c==="equidistantPreserveStart"?aTe(y,b,g,a,s):(c==="preserveStart"||c==="preserveStartEnd"?h=cTe(y,b,g,a,s,c==="preserveStartEnd"):h=lTe(y,b,g,a,s),h.filter(function(_){return _.isShow}))}var uTe=["viewBox"],dTe=["viewBox"],fTe=["ticks"];function B1(e){"@babel/helpers - typeof";return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B1(e)}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(n){ZI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IP(e,t){if(e==null)return{};var r=hTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YQ(n.key),n)}}function mTe(e,t,r){return t&&sW(e.prototype,t),r&&sW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gTe(e,t,r){return t=SS(t),vTe(e,GQ()?Reflect.construct(t,r||[],SS(e).constructor):t.apply(e,r))}function vTe(e,t){if(t&&(B1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yTe(e)}function yTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GQ=function(){return!!e})()}function SS(e){return SS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},SS(e)}function xTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q8(e,t)}function q8(e,t){return q8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},q8(e,t)}function ZI(e,t,r){return t=YQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YQ(e){var t=wTe(e,"string");return B1(t)=="symbol"?t:t+""}function wTe(e,t){if(B1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(B1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ey=function(e){function t(r){var n;return pTe(this,t),n=gTe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return xTe(t,e),mTe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=IP(n,uTe),o=this.props,c=o.viewBox,u=IP(o,dTe);return!e1(i,c)||!e1(s,u)||!e1(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,o=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,w,g,y,b,_,N=f?-1:1,E=n.tickSize||d,C=Xt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=w=n.coordinate,y=s+ +!f*c,g=y-N*E,_=g-N*h,b=C;break;case"left":g=y=n.coordinate,w=i+ +!f*o,m=w-N*E,b=m-N*h,_=C;break;case"right":g=y=n.coordinate,w=i+ +f*o,m=w+N*E,b=m+N*h,_=C;break;default:m=w=n.coordinate,y=s+ +f*c,g=y+N*E,_=g+N*h,b=C;break}return{line:{x1:m,y1:g,x2:w,y2:y},tick:{x:b,y:_}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,o=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=al(al(al({},Rr(this.props,!1)),Rr(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=al(al({},f),{},{x1:a,y1:i+h*o,x2:a+s,y2:i+h*o})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=al(al({},f),{},{x1:a+m*s,y1:i,x2:a+m*s,y2:i+o})}return l("line",{...f,className:gn("recharts-cartesian-axis-line",yc(d,"className"))})}},{key:"renderTicks",value:function(n,a,i){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,m=JI(al(al({},this.props),{},{ticks:n}),a,i),w=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=Rr(this.props,!1),b=Rr(d,!1),_=al(al({},y),{},{fill:"none"},Rr(c,!1)),N=m.map(function(E,C){var D=s.getTickLineCoord(E),P=D.line,F=D.tick,L=al(al(al(al({textAnchor:w,verticalAnchor:g},y),{},{stroke:"none",fill:u},b),F),{},{index:C,payload:E,visibleTicksCount:m.length,tickFormatter:f});return x(Fn,{className:"recharts-cartesian-axis-tick",...ag(s.props,E,C),children:[c&&l("line",{..._,...P,className:gn("recharts-cartesian-axis-tick-line",yc(c,"className"))}),d&&t.renderTickItem(d,L,"".concat(Zr(f)?f(E.value,C):E.value).concat(h||""))]},"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord))});return l("g",{className:"recharts-cartesian-axis-ticks",children:N})}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,o=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=IP(f,fTe),w=h;return Zr(c)&&(w=h&&h.length>0?c(this.props):c(m)),s<=0||o<=0||!w||!w.length?null:x(Fn,{className:gn("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y},children:[i&&this.renderAxisLine(),this.renderTicks(w,this.state.fontSize,this.state.letterSpacing),$s.renderCallByParent(this.props)]})}}],[{key:"renderTickItem",value:function(n,a,i){var s;return Qe.isValidElement(n)?s=Qe.cloneElement(n,a):Zr(n)?s=n(a):s=l(ig,{...a,className:"recharts-cartesian-axis-tick-value",children:i}),s}}])}(S.Component);ZI(Ey,"displayName","CartesianAxis");ZI(Ey,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var bTe=["x1","y1","x2","y2","key"],_Te=["offset"];function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function oW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oW(Object(r),!0).forEach(function(n){STe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function STe(e,t,r){return t=NTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NTe(e){var t=ATe(e,"string");return cg(t)=="symbol"?t:t+""}function ATe(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function lW(e,t){if(e==null)return{};var r=kTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ETe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,s=t.width,o=t.height,c=t.ry;return Qe.createElement("rect",{x:a,y:i,ry:c,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function KQ(e,t){var r;if(Qe.isValidElement(e))r=Qe.cloneElement(e,t);else if(Zr(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,s=t.y2,o=t.key,c=lW(t,bTe),u=Rr(c,!1);u.offset;var d=lW(u,_Te);r=Qe.createElement("line",j0({},d,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:o}))}return r}function CTe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=Ro(Ro({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return KQ(a,u)});return Qe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function PTe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(o,c){var u=Ro(Ro({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return KQ(a,u)});return Qe.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function TTe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,s=e.height,o=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var w=!d[m+1],g=w?a+s-h:d[m+1]-h;if(g<=0)return null;var y=m%t.length;return Qe.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Qe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function OTe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,s=e.y,o=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var w=!d[m+1],g=w?i+o-h:d[m+1]-h;if(g<=0)return null;var y=m%n.length;return Qe.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:g,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Qe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var DTe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,s=t.offset;return XZ(JI(Ro(Ro(Ro({},Ey.defaultProps),n),{},{ticks:uh(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},ITe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,s=t.offset;return XZ(JI(Ro(Ro(Ro({},Ey.defaultProps),n),{},{ticks:uh(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},Cv={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function QI(e){var t,r,n,a,i,s,o=GI(),c=YI(),u=wPe(),d=Ro(Ro({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Cv.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Cv.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Cv.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Cv.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Cv.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Cv.verticalFill,x:Xt(e.x)?e.x:u.left,y:Xt(e.y)?e.y:u.top,width:Xt(e.width)?e.width:u.width,height:Xt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,w=d.height,g=d.syncWithTicks,y=d.horizontalValues,b=d.verticalValues,_=vPe(),N=yPe();if(!Xt(m)||m<=0||!Xt(w)||w<=0||!Xt(f)||f!==+f||!Xt(h)||h!==+h)return null;var E=d.verticalCoordinatesGenerator||DTe,C=d.horizontalCoordinatesGenerator||ITe,D=d.horizontalPoints,P=d.verticalPoints;if((!D||!D.length)&&Zr(C)){var F=y&&y.length,L=C({yAxis:N?Ro(Ro({},N),{},{ticks:F?y:N.ticks}):void 0,width:o,height:c,offset:u},F?!0:g);Gu(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(cg(L),"]")),Array.isArray(L)&&(D=L)}if((!P||!P.length)&&Zr(E)){var W=b&&b.length,T=E({xAxis:_?Ro(Ro({},_),{},{ticks:W?b:_.ticks}):void 0,width:o,height:c,offset:u},W?!0:g);Gu(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(cg(T),"]")),Array.isArray(T)&&(P=T)}return Qe.createElement("g",{className:"recharts-cartesian-grid"},Qe.createElement(ETe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Qe.createElement(CTe,j0({},d,{offset:u,horizontalPoints:D,xAxis:_,yAxis:N})),Qe.createElement(PTe,j0({},d,{offset:u,verticalPoints:P,xAxis:_,yAxis:N})),Qe.createElement(TTe,j0({},d,{horizontalPoints:D})),Qe.createElement(OTe,j0({},d,{verticalPoints:P})))}QI.displayName="CartesianGrid";var RTe=["type","layout","connectNulls","ref"],MTe=["key"];function U1(e){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U1(e)}function cW(e,t){if(e==null)return{};var r=FTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uW(Object(r),!0).forEach(function(n){$u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pv(e){return BTe(e)||$Te(e)||jTe(e)||LTe()}function LTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jTe(e,t){if(e){if(typeof e=="string")return W8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W8(e,t)}}function $Te(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BTe(e){if(Array.isArray(e))return W8(e)}function W8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JQ(n.key),n)}}function qTe(e,t,r){return t&&dW(e.prototype,t),r&&dW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WTe(e,t,r){return t=NS(t),zTe(e,XQ()?Reflect.construct(t,r||[],NS(e).constructor):t.apply(e,r))}function zTe(e,t){if(t&&(U1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VTe(e)}function VTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XQ=function(){return!!e})()}function NS(e){return NS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},NS(e)}function HTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z8(e,t)}function z8(e,t){return z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},z8(e,t)}function $u(e,t,r){return t=JQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JQ(e){var t=GTe(e,"string");return U1(t)=="symbol"?t:t+""}function GTe(e,t){if(U1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hm=function(e){function t(){var r;UTe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=WTe(this,t,[].concat(a)),$u(r,"state",{isAnimationFinished:!0,totalLength:0}),$u(r,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),$u(r,"getStrokeDasharray",function(s,o,c){var u=c.reduce(function(b,_){return b+_});if(!u)return r.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),f=s%u,h=o-s,m=[],w=0,g=0;w<c.length;g+=c[w],++w)if(g+c[w]>f){m=[].concat(Pv(c.slice(0,w)),[f-g]);break}var y=m.length%2===0?[0,h]:[h];return[].concat(Pv(t.repeat(c,d)),Pv(m),y).map(function(b){return"".concat(b,"px")}).join(", ")}),$u(r,"id",Pg("recharts-line-")),$u(r,"pathRef",function(s){r.mainCurve=s}),$u(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),$u(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return HTe(t,e),qTe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,o=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=xc(d,eb);if(!f)return null;var h=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:Gi(g.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return l(Fn,{...m,children:f.map(function(w){return Qe.cloneElement(w,{key:"bar-".concat(w.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,dataPointFormatter:h})})})}},{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,f=Rr(this.props,!1),h=Rr(c,!0),m=u.map(function(g,y){var b=rc(rc(rc({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,b)}),w={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return l(Fn,{className:"recharts-line-dots",...w,children:m},"dots")}},{key:"renderCurveStatically",value:function(n,a,i,s){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=cW(o,RTe),h=rc(rc(rc({},Rr(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},s),{},{type:c,layout:u,connectNulls:d});return l(V0,{...h,pathRef:this.pathRef})}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,s=this.props,o=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,w=s.animateNewValues,g=s.width,y=s.height,b=this.state,_=b.prevPoints,N=b.totalLength;return l(rd,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(E){var C=E.t;if(_){var D=_.length/o.length,P=o.map(function(R,j){var Y=Math.floor(j*D);if(_[Y]){var Z=_[Y],re=xs(Z.x,R.x),z=xs(Z.y,R.y);return rc(rc({},R),{},{x:re(C),y:z(C)})}if(w){var q=xs(g*2,R.x),B=xs(y/2,R.y);return rc(rc({},R),{},{x:q(C),y:B(C)})}return rc(rc({},R),{},{x:R.x,y:R.y})});return i.renderCurveStatically(P,n,a)}var F=xs(0,N),L=F(C),W;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});W=i.getStrokeDasharray(L,N,T)}else W=i.generateSimpleStrokeDasharray(N,L);return i.renderCurveStatically(o,n,a,{strokeDasharray:W})}},"line-".concat(m))}},{key:"renderCurve",value:function(n,a){var i=this.props,s=i.points,o=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!u&&d>0||!sg(u,s))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,o=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,w=a.height,g=a.isAnimationActive,y=a.id;if(i||!o||!o.length)return null;var b=this.state.isAnimationFinished,_=o.length===1,N=gn("recharts-line",c),E=u&&u.allowDataOverflow,C=d&&d.allowDataOverflow,D=E||C,P=mn(y)?this.id:y,F=(n=Rr(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},L=F.r,W=L===void 0?3:L,T=F.strokeWidth,R=T===void 0?2:T,j=ZX(s)?s:{},Y=j.clipDot,Z=Y===void 0?!0:Y,re=W*2+R;return x(Fn,{className:N,children:[E||C?x("defs",{children:[l("clipPath",{id:"clipPath-".concat(P),children:l("rect",{x:E?h:h-m/2,y:C?f:f-w/2,width:E?m:m*2,height:C?w:w*2})}),!Z&&l("clipPath",{id:"clipPath-dots-".concat(P),children:l("rect",{x:h-re/2,y:f-re/2,width:m+re,height:w+re})})]}):null,!_&&this.renderCurve(D,P),this.renderErrorBar(D,P),(_||s)&&this.renderDots(D,Z,P),(!g||b)&&rf.renderCallByParent(this.props,o)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Pv(n),[0]):n,s=[],o=0;o<a;++o)s=[].concat(Pv(s),Pv(i));return s}},{key:"renderDotItem",value:function(n,a){var i;if(Qe.isValidElement(n))i=Qe.cloneElement(n,a);else if(Zr(n))i=n(a);else{var s=a.key,o=cW(a,MTe),c=gn("recharts-line-dot",typeof n!="boolean"?n.className:"");i=l(tb,{...o,className:c},s)}return i}}])}(S.PureComponent);$u(hm,"displayName","Line");$u(hm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Im.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$u(hm,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,o=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var w=Gi(h,s);return d==="horizontal"?{x:sS({axis:r,ticks:a,bandSize:o,entry:h,index:m}),y:mn(w)?null:n.scale(w),value:w,payload:h}:{x:mn(w)?null:r.scale(w),y:sS({axis:n,ticks:i,bandSize:o,entry:h,index:m}),value:w,payload:h}});return rc({points:f,layout:d},u)});var YTe=["layout","type","stroke","connectNulls","isRange","ref"],KTe=["key"],ZQ;function q1(e){"@babel/helpers - typeof";return q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q1(e)}function QQ(e,t){if(e==null)return{};var r=XTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Up(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fW(Object(r),!0).forEach(function(n){Yd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tee(n.key),n)}}function ZTe(e,t,r){return t&&hW(e.prototype,t),r&&hW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QTe(e,t,r){return t=AS(t),e6e(e,eee()?Reflect.construct(t,r||[],AS(e).constructor):t.apply(e,r))}function e6e(e,t){if(t&&(q1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t6e(e)}function t6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eee=function(){return!!e})()}function AS(e){return AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},AS(e)}function r6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V8(e,t)}function V8(e,t){return V8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},V8(e,t)}function Yd(e,t,r){return t=tee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tee(e){var t=n6e(e,"string");return q1(t)=="symbol"?t:t+""}function n6e(e,t){if(q1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(q1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ih=function(e){function t(){var r;JTe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=QTe(this,t,[].concat(a)),Yd(r,"state",{isAnimationFinished:!0}),Yd(r,"id",Pg("recharts-area-")),Yd(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Zr(s)&&s()}),Yd(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Zr(s)&&s()}),r}return r6e(t,e),ZTe(t,[{key:"renderDots",value:function(n,a,i){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Rr(this.props,!1),m=Rr(u,!0),w=d.map(function(y,b){var _=Up(Up(Up({key:"dot-".concat(b),r:3},h),m),{},{index:b,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:d});return t.renderDotItem(u,_)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return l(Fn,{className:"recharts-area-dots",...g,children:w})}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,o=a.strokeWidth,c=s[0].x,u=s[s.length-1].x,d=n*Math.abs(c-u),f=Kp(s.map(function(h){return h.y||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Kp(i.map(function(h){return h.y||0})),f)),Xt(f)?l("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,s=a.points,o=a.strokeWidth,c=s[0].y,u=s[s.length-1].y,d=n*Math.abs(c-u),f=Kp(s.map(function(h){return h.x||0}));return Xt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Kp(i.map(function(h){return h.x||0})),f)),Xt(f)?l("rect",{x:0,y:c<u?c:c-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,s){var o=this.props,c=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,h=o.isRange;o.ref;var m=QQ(o,YTe);return x(Fn,{clipPath:i?"url(#clipPath-".concat(s,")"):null,children:[l(V0,{...Rr(m,!0),points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"}),d!=="none"&&l(V0,{...Rr(this.props,!1),className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n}),d!=="none"&&h&&l(V0,{...Rr(this.props,!1),className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})]})}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,s=this.props,o=s.points,c=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,m=s.animationId,w=this.state,g=w.prevPoints,y=w.prevBaseLine;return l(rd,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(b){var _=b.t;if(g){var N=g.length/o.length,E=o.map(function(F,L){var W=Math.floor(L*N);if(g[W]){var T=g[W],R=xs(T.x,F.x),j=xs(T.y,F.y);return Up(Up({},F),{},{x:R(_),y:j(_)})}return F}),C;if(Xt(c)&&typeof c=="number"){var D=xs(y,c);C=D(_)}else if(mn(c)||_y(c)){var P=xs(y,0);C=P(_)}else C=c.map(function(F,L){var W=Math.floor(L*N);if(y[W]){var T=y[W],R=xs(T.x,F.x),j=xs(T.y,F.y);return Up(Up({},F),{},{x:R(_),y:j(_)})}return F});return i.renderAreaStatically(E,C,n,a)}return x(Fn,{children:[l("defs",{children:l("clipPath",{id:"animationClipPath-".concat(a),children:i.renderClipRect(_)})}),l(Fn,{clipPath:"url(#animationClipPath-".concat(a,")"),children:i.renderAreaStatically(o,c,n,a)})]})}},"area-".concat(m))}},{key:"renderArea",value:function(n,a){var i=this.props,s=i.points,o=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&s&&s.length&&(!d&&h>0||!sg(d,s)||!sg(f,o))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(s,o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,s=a.dot,o=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,w=a.height,g=a.isAnimationActive,y=a.id;if(i||!o||!o.length)return null;var b=this.state.isAnimationFinished,_=o.length===1,N=gn("recharts-area",c),E=f&&f.allowDataOverflow,C=h&&h.allowDataOverflow,D=E||C,P=mn(y)?this.id:y,F=(n=Rr(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},L=F.r,W=L===void 0?3:L,T=F.strokeWidth,R=T===void 0?2:T,j=ZX(s)?s:{},Y=j.clipDot,Z=Y===void 0?!0:Y,re=W*2+R;return x(Fn,{className:N,children:[E||C?x("defs",{children:[l("clipPath",{id:"clipPath-".concat(P),children:l("rect",{x:E?d:d-m/2,y:C?u:u-w/2,width:E?m:m*2,height:C?w:w*2})}),!Z&&l("clipPath",{id:"clipPath-dots-".concat(P),children:l("rect",{x:d-re/2,y:u-re/2,width:m+re,height:w+re})})]}):null,_?null:this.renderArea(D,P),(s||_)&&this.renderDots(D,Z,P),(!g||b)&&rf.renderCallByParent(this.props,o)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(S.PureComponent);ZQ=Ih;Yd(Ih,"displayName","Area");Yd(Ih,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Im.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Yd(Ih,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,s=t.props.baseValue,o=s??i;if(Xt(o)&&typeof o=="number")return o;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});Yd(Ih,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,o=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,w=u&&u.length,g=ZQ.getBaseValue(t,r,n,a),y=m==="horizontal",b=!1,_=f.map(function(E,C){var D;w?D=u[d+C]:(D=Gi(E,c),Array.isArray(D)?b=!0:D=[g,D]);var P=D[1]==null||w&&Gi(E,c)==null;return y?{x:sS({axis:n,ticks:i,bandSize:o,entry:E,index:C}),y:P?null:a.scale(D[1]),value:D,payload:E}:{x:P?null:n.scale(D[1]),y:sS({axis:a,ticks:s,bandSize:o,entry:E,index:C}),value:D,payload:E}}),N;return w||b?N=_.map(function(E){var C=Array.isArray(E.value)?E.value[0]:null;return y?{x:E.x,y:C!=null&&E.y!=null?a.scale(C):null}:{x:C!=null?n.scale(C):null,y:E.y}}):N=y?a.scale(g):n.scale(g),Up({points:_,baseLine:N,layout:m,isRange:b},h)});Yd(Ih,"renderDotItem",function(e,t){var r;if(Qe.isValidElement(e))r=Qe.cloneElement(e,t);else if(Zr(e))r=e(t);else{var n=gn("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=QQ(t,KTe);r=S.createElement(tb,{...i,key:a,className:n})}return r});function W1(e){"@babel/helpers - typeof";return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W1(e)}function a6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aee(n.key),n)}}function s6e(e,t,r){return t&&i6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o6e(e,t,r){return t=kS(t),l6e(e,ree()?Reflect.construct(t,r||[],kS(e).constructor):t.apply(e,r))}function l6e(e,t){if(t&&(W1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c6e(e)}function c6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ree(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ree=function(){return!!e})()}function kS(e){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kS(e)}function u6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H8(e,t)}function H8(e,t){return H8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H8(e,t)}function nee(e,t,r){return t=aee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aee(e){var t=d6e(e,"string");return W1(t)=="symbol"?t:t+""}function d6e(e,t){if(W1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(W1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function G8(){return G8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G8.apply(this,arguments)}function f6e(e){var t=e.xAxisId,r=GI(),n=YI(),a=jQ(t);return a==null?null:Qe.createElement(Ey,G8({},a,{className:gn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return uh(s,!0)}}))}var Rl=function(e){function t(){return a6e(this,t),o6e(this,t,arguments)}return u6e(t,e),s6e(t,[{key:"render",value:function(){return Qe.createElement(f6e,this.props)}}])}(Qe.Component);nee(Rl,"displayName","XAxis");nee(Rl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function z1(e){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z1(e)}function h6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oee(n.key),n)}}function m6e(e,t,r){return t&&p6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g6e(e,t,r){return t=ES(t),v6e(e,iee()?Reflect.construct(t,r||[],ES(e).constructor):t.apply(e,r))}function v6e(e,t){if(t&&(z1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y6e(e)}function y6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iee=function(){return!!e})()}function ES(e){return ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ES(e)}function x6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y8(e,t)}function Y8(e,t){return Y8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Y8(e,t)}function see(e,t,r){return t=oee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oee(e){var t=w6e(e,"string");return z1(t)=="symbol"?t:t+""}function w6e(e,t){if(z1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(z1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K8(){return K8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K8.apply(this,arguments)}var b6e=function(t){var r=t.yAxisId,n=GI(),a=YI(),i=$Q(r);return i==null?null:Qe.createElement(Ey,K8({},i,{className:gn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return uh(o,!0)}}))},Ml=function(e){function t(){return h6e(this,t),g6e(this,t,arguments)}return x6e(t,e),m6e(t,[{key:"render",value:function(){return Qe.createElement(b6e,this.props)}}])}(Qe.Component);see(Ml,"displayName","YAxis");see(Ml,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function pW(e){return A6e(e)||N6e(e)||S6e(e)||_6e()}function _6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S6e(e,t){if(e){if(typeof e=="string")return X8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X8(e,t)}}function N6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A6e(e){if(Array.isArray(e))return X8(e)}function X8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J8=function(t,r,n,a,i){var s=xc(t,XI),o=xc(t,EN),c=[].concat(pW(s),pW(o)),u=xc(t,PN),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,y){if(y.props[d]===n&&nf(y.props,"extendDomain")&&Xt(y.props[f])){var b=y.props[f];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},h)),u.length){var m="".concat(f,"1"),w="".concat(f,"2");h=u.reduce(function(g,y){if(y.props[d]===n&&nf(y.props,"extendDomain")&&Xt(y.props[m])&&Xt(y.props[w])){var b=y.props[m],_=y.props[w];return[Math.min(g[0],b,_),Math.max(g[1],b,_)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,y){return Xt(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},h)),h},RP={exports:{}},mW;function k6e(){return mW||(mW=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),w=r?r+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],m]:c._events[w].push(m):(c._events[w]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,w=new Array(m);h<m;h++)w[h]=f[h].fn;return w},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,m,w){var g=r?r+u:u;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,_,N;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,w),!0}for(N=1,_=new Array(b-1);N<b;N++)_[N-1]=arguments[N];y.fn.apply(y.context,_)}else{var E=y.length,C;for(N=0;N<E;N++)switch(y[N].once&&this.removeListener(u,y[N].fn,void 0,!0),b){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,d);break;case 3:y[N].fn.call(y[N].context,d,f);break;case 4:y[N].fn.call(y[N].context,d,f,h);break;default:if(!_)for(C=1,_=new Array(b-1);C<b;C++)_[C-1]=arguments[C];y[N].fn.apply(y[N].context,_)}}return!0},o.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return s(this,m),this;var w=this._events[m];if(w.fn)w.fn===d&&(!h||w.once)&&(!f||w.context===f)&&s(this,m);else{for(var g=0,y=[],b=w.length;g<b;g++)(w[g].fn!==d||h&&!w[g].once||f&&w[g].context!==f)&&y.push(w[g]);y.length?this._events[m]=y.length===1?y[0]:y:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(RP)),RP.exports}var E6e=k6e();const C6e=pa(E6e);var MP=new C6e,FP="recharts.syncMouseEvents";function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function P6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lee(n.key),n)}}function O6e(e,t,r){return t&&T6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LP(e,t,r){return t=lee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lee(e){var t=D6e(e,"string");return Qx(t)=="symbol"?t:t+""}function D6e(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var I6e=function(){function e(){P6e(this,e),LP(this,"activeIndex",0),LP(this,"coordinateList",[]),LP(this,"layout","horizontal")}return O6e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,o=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function R6e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Xt(n)&&Xt(a))return!0}return!1}function M6e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function cee(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,s=qa(t,r,n,a),o=qa(t,r,n,i);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function F6e(e,t,r){var n,a,i,s;if(e==="horizontal")n=t.x,i=n,a=r.top,s=r.top+r.height;else if(e==="vertical")a=t.y,s=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=qa(o,c,u,f),m=qa(o,c,d,f);n=h.x,a=h.y,i=m.x,s=m.y}else return cee(t);return[{x:n,y:a},{x:i,y:s}]}function ew(e){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ew(e)}function gW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gW(Object(r),!0).forEach(function(n){L6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L6e(e,t,r){return t=j6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j6e(e){var t=$6e(e,"string");return ew(t)=="symbol"?t:t+""}function $6e(e,t){if(ew(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ew(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B6e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,s=e.activeCoordinate,o=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!s||h!=="ScatterChart"&&a!=="axis")return null;var w,g=V0;if(h==="ScatterChart")w=s,g=Jke;else if(h==="BarChart")w=M6e(f,s,c,d),g=qI;else if(f==="radial"){var y=cee(s),b=y.cx,_=y.cy,N=y.radius,E=y.startAngle,C=y.endAngle;w={cx:b,cy:_,startAngle:E,endAngle:C,innerRadius:N,outerRadius:N},g=oQ}else w={points:F6e(f,s,c)},g=V0;var D=C_(C_(C_(C_({stroke:"#ccc",pointerEvents:"none"},c),w),Rr(m,!1)),{},{payload:o,payloadIndex:u,className:gn("recharts-tooltip-cursor",m.className)});return S.isValidElement(m)?S.cloneElement(m,D):S.createElement(g,D)}var U6e=["item"],q6e=["children","className","width","height","style","compact","title","desc"];function V1(e){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V1(e)}function vW(e,t){return V6e(e)||z6e(e,t)||dee(e,t)||W6e()}function W6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,s,o=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return o}}function V6e(e){if(Array.isArray(e))return e}function yW(e,t){if(e==null)return{};var r=H6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function G6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fee(n.key),n)}}function K6e(e,t,r){return t&&Y6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X6e(e,t,r){return t=CS(t),J6e(e,uee()?Reflect.construct(t,r||[],CS(e).constructor):t.apply(e,r))}function J6e(e,t){if(t&&(V1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z6e(e)}function Z6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uee=function(){return!!e})()}function CS(e){return CS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},CS(e)}function Q6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z8(e,t)}function Z8(e,t){return Z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z8(e,t)}function H1(e){return r8e(e)||t8e(e)||dee(e)||e8e()}function e8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dee(e,t){if(e){if(typeof e=="string")return Q8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q8(e,t)}}function t8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r8e(e){if(Array.isArray(e))return Q8(e)}function Q8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xW(Object(r),!0).forEach(function(n){Xr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xr(e,t,r){return t=fee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fee(e){var t=n8e(e,"string");return V1(t)=="symbol"?t:t+""}function n8e(e,t){if(V1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(V1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a8e={xAxis:["bottom","top"],yAxis:["left","right"]},i8e={width:"100%",height:"100%"},hee={x:0,y:0};function P_(e){return e}var s8e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},o8e=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var s=i.coordinate,o=a.radius;return Ot(Ot(Ot({},a),qa(a.cx,a.cy,o,s)),{},{angle:s,radius:o})}var c=i.coordinate,u=a.angle;return Ot(Ot(Ot({},a),qa(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return hee},TN=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(H1(o),H1(u)):o},[]);return s.length>0?s:t&&t.length&&Xt(a)&&Xt(i)?t.slice(a,i+1):[]};function pee(e){return e==="number"?[0,"auto"]:void 0}var eO=function(t,r,n,a){var i=t.graphicalItems,s=t.tooltipAxis,o=TN(r,t);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var m=f===void 0?o:f;h=M5(m,s.dataKey,a)}else h=f&&f[n]||o[n];return h?[].concat(H1(c),[tQ(u,h)]):c},[])},wW=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},s=s8e(i,n),o=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=_Ne(s,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=eO(t,r,d,f),m=o8e(n,o,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},l8e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=KZ(d,i);return n.reduce(function(w,g){var y,b=g.type.defaultProps!==void 0?Ot(Ot({},g.type.defaultProps),g.props):g.props,_=b.type,N=b.dataKey,E=b.allowDataOverflow,C=b.allowDuplicatedCategory,D=b.scale,P=b.ticks,F=b.includeHidden,L=b[s];if(w[L])return w;var W=TN(t.data,{graphicalItems:a.filter(function(O){var J,X=s in O.props?O.props[s]:(J=O.type.defaultProps)===null||J===void 0?void 0:J[s];return X===L}),dataStartIndex:c,dataEndIndex:u}),T=W.length,R,j,Y;R6e(b.domain,E,_)&&(R=h8(b.domain,null,E),m&&(_==="number"||D!=="auto")&&(Y=G2(W,N,"category")));var Z=pee(_);if(!R||R.length===0){var re,z=(re=b.domain)!==null&&re!==void 0?re:Z;if(N){if(R=G2(W,N,_),_==="category"&&m){var q=g2e(R);C&&q?(j=R,R=gS(0,T)):C||(R=yU(z,R,g).reduce(function(O,J){return O.indexOf(J)>=0?O:[].concat(H1(O),[J])},[]))}else if(_==="category")C?R=R.filter(function(O){return O!==""&&!mn(O)}):R=yU(z,R,g).reduce(function(O,J){return O.indexOf(J)>=0||J===""||mn(J)?O:[].concat(H1(O),[J])},[]);else if(_==="number"){var B=ENe(W,a.filter(function(O){var J,X,ne=s in O.props?O.props[s]:(J=O.type.defaultProps)===null||J===void 0?void 0:J[s],ie="hide"in O.props?O.props.hide:(X=O.type.defaultProps)===null||X===void 0?void 0:X.hide;return ne===L&&(F||!ie)}),N,i,d);B&&(R=B)}m&&(_==="number"||D!=="auto")&&(Y=G2(W,N,"category"))}else m?R=gS(0,T):o&&o[L]&&o[L].hasStack&&_==="number"?R=h==="expand"?[0,1]:eQ(o[L].stackGroups,c,u):R=YZ(W,a.filter(function(O){var J=s in O.props?O.props[s]:O.type.defaultProps[s],X="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return J===L&&(F||!X)}),_,d,!0);if(_==="number")R=J8(f,R,L,i,P),z&&(R=h8(z,R,E));else if(_==="category"&&z){var G=z,Q=R.every(function(O){return G.indexOf(O)>=0});Q&&(R=G)}}return Ot(Ot({},w),{},Xr({},L,Ot(Ot({},b),{},{axisType:i,domain:R,categoricalDomain:Y,duplicateDomain:j,originalDomain:(y=b.domain)!==null&&y!==void 0?y:Z,isCategorical:m,layout:d})))},{})},c8e=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=TN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,w=KZ(d,i),g=-1;return n.reduce(function(y,b){var _=b.type.defaultProps!==void 0?Ot(Ot({},b.type.defaultProps),b.props):b.props,N=_[s],E=pee("number");if(!y[N]){g++;var C;return w?C=gS(0,m):o&&o[N]&&o[N].hasStack?(C=eQ(o[N].stackGroups,c,u),C=J8(f,C,N,i)):(C=h8(E,YZ(h,n.filter(function(D){var P,F,L=s in D.props?D.props[s]:(P=D.type.defaultProps)===null||P===void 0?void 0:P[s],W="hide"in D.props?D.props.hide:(F=D.type.defaultProps)===null||F===void 0?void 0:F.hide;return L===N&&!W}),"number",d),a.defaultProps.allowDataOverflow),C=J8(f,C,N,i)),Ot(Ot({},y),{},Xr({},N,Ot(Ot({axisType:i},a.defaultProps),{},{hide:!0,orientation:yc(a8e,"".concat(i,".").concat(g%2),null),domain:C,originalDomain:E,isCategorical:w,layout:d})))}return y},{})},u8e=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=xc(d,i),m={};return h&&h.length?m=l8e(t,{axes:h,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(m=c8e(t,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),m},d8e=function(t){var r=Gp(t),n=uh(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:mI(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:oS(r,n)}},bW=function(t){var r=t.children,n=t.defaultShowTooltip,a=ic(r,M1),i=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},f8e=function(t){return!t||!t.length?!1:t.some(function(r){var n=hh(r&&r.type);return n&&n.indexOf("Bar")>=0})},_W=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},h8e=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,s=i===void 0?{}:i,o=t.yAxisMap,c=o===void 0?{}:o,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ic(f,M1),w=ic(f,Yu),g=Object.keys(c).reduce(function(C,D){var P=c[D],F=P.orientation;return!P.mirror&&!P.hide?Ot(Ot({},C),{},Xr({},F,C[F]+P.width)):C},{left:h.left||0,right:h.right||0}),y=Object.keys(s).reduce(function(C,D){var P=s[D],F=P.orientation;return!P.mirror&&!P.hide?Ot(Ot({},C),{},Xr({},F,yc(C,"".concat(F))+P.height)):C},{top:h.top||0,bottom:h.bottom||0}),b=Ot(Ot({},y),g),_=b.bottom;m&&(b.bottom+=m.props.height||M1.defaultProps.height),w&&r&&(b=ANe(b,a,n,r));var N=u-b.left-b.right,E=d-b.top-b.bottom;return Ot(Ot({brushBottom:_},b),{},{width:Math.max(N,0),height:Math.max(E,0)})},p8e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},ON=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,_){var N=_.graphicalItems,E=_.stackGroups,C=_.offset,D=_.updateId,P=_.dataStartIndex,F=_.dataEndIndex,L=b.barSize,W=b.layout,T=b.barGap,R=b.barCategoryGap,j=b.maxBarSize,Y=_W(W),Z=Y.numericAxisName,re=Y.cateAxisName,z=f8e(N),q=[];return N.forEach(function(B,G){var Q=TN(b.data,{graphicalItems:[B],dataStartIndex:P,dataEndIndex:F}),O=B.type.defaultProps!==void 0?Ot(Ot({},B.type.defaultProps),B.props):B.props,J=O.dataKey,X=O.maxBarSize,ne=O["".concat(Z,"Id")],ie=O["".concat(re,"Id")],oe={},de=c.reduce(function(ut,he){var Ee=_["".concat(he.axisType,"Map")],Me=O["".concat(he.axisType,"Id")];Ee&&Ee[Me]||he.axisType==="zAxis"||lg();var at=Ee[Me];return Ot(Ot({},ut),{},Xr(Xr({},he.axisType,at),"".concat(he.axisType,"Ticks"),uh(at)))},oe),V=de[re],se=de["".concat(re,"Ticks")],fe=E&&E[ne]&&E[ne].hasStack&&FNe(B,E[ne].stackGroups),te=hh(B.type).indexOf("Bar")>=0,ke=oS(V,se),Re=[],Ce=z&&SNe({barSize:L,stackGroups:E,totalSize:p8e(de,re)});if(te){var ve,Ge,pt=mn(X)?j:X,it=(ve=(Ge=oS(V,se,!0))!==null&&Ge!==void 0?Ge:pt)!==null&&ve!==void 0?ve:0;Re=NNe({barGap:T,barCategoryGap:R,bandSize:it!==ke?it:ke,sizeList:Ce[ie],maxBarSize:pt}),it!==ke&&(Re=Re.map(function(ut){return Ot(Ot({},ut),{},{position:Ot(Ot({},ut.position),{},{offset:ut.position.offset-it/2})})}))}var Le=B&&B.type&&B.type.getComposedData;Le&&q.push({props:Ot(Ot({},Le(Ot(Ot({},de),{},{displayedData:Q,props:b,dataKey:J,item:B,bandSize:ke,barPosition:Re,offset:C,stackedData:fe,layout:W,dataStartIndex:P,dataEndIndex:F}))),{},Xr(Xr(Xr({key:B.key||"item-".concat(G)},Z,de[Z]),re,de[re]),"animationId",D)),childIndex:C2e(B,b.children),item:B})}),q},m=function(b,_){var N=b.props,E=b.dataStartIndex,C=b.dataEndIndex,D=b.updateId;if(!I9({props:N}))return null;var P=N.children,F=N.layout,L=N.stackOffset,W=N.data,T=N.reverseStackOrder,R=_W(F),j=R.numericAxisName,Y=R.cateAxisName,Z=xc(P,n),re=RNe(W,Z,"".concat(j,"Id"),"".concat(Y,"Id"),L,T),z=c.reduce(function(O,J){var X="".concat(J.axisType,"Map");return Ot(Ot({},O),{},Xr({},X,u8e(N,Ot(Ot({},J),{},{graphicalItems:Z,stackGroups:J.axisType===j&&re,dataStartIndex:E,dataEndIndex:C}))))},{}),q=h8e(Ot(Ot({},z),{},{props:N,graphicalItems:Z}),_==null?void 0:_.legendBBox);Object.keys(z).forEach(function(O){z[O]=d(N,z[O],q,O.replace("Map",""),r)});var B=z["".concat(Y,"Map")],G=d8e(B),Q=h(N,Ot(Ot({},z),{},{dataStartIndex:E,dataEndIndex:C,updateId:D,graphicalItems:Z,stackGroups:re,offset:q}));return Ot(Ot({formattedGraphicalItems:Q,graphicalItems:Z,offset:q,stackGroups:re},G),z)},w=function(y){function b(_){var N,E,C;return G6e(this,b),C=X6e(this,b,[_]),Xr(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xr(C,"accessibilityManager",new I6e),Xr(C,"handleLegendBBoxUpdate",function(D){if(D){var P=C.state,F=P.dataStartIndex,L=P.dataEndIndex,W=P.updateId;C.setState(Ot({legendBBox:D},m({props:C.props,dataStartIndex:F,dataEndIndex:L,updateId:W},Ot(Ot({},C.state),{},{legendBBox:D}))))}}),Xr(C,"handleReceiveSyncEvent",function(D,P,F){if(C.props.syncId===D){if(F===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(P)}}),Xr(C,"handleBrushChange",function(D){var P=D.startIndex,F=D.endIndex;if(P!==C.state.dataStartIndex||F!==C.state.dataEndIndex){var L=C.state.updateId;C.setState(function(){return Ot({dataStartIndex:P,dataEndIndex:F},m({props:C.props,dataStartIndex:P,dataEndIndex:F,updateId:L},C.state))}),C.triggerSyncEvent({dataStartIndex:P,dataEndIndex:F})}}),Xr(C,"handleMouseEnter",function(D){var P=C.getMouseInfo(D);if(P){var F=Ot(Ot({},P),{},{isTooltipActive:!0});C.setState(F),C.triggerSyncEvent(F);var L=C.props.onMouseEnter;Zr(L)&&L(F,D)}}),Xr(C,"triggeredAfterMouseMove",function(D){var P=C.getMouseInfo(D),F=P?Ot(Ot({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(F),C.triggerSyncEvent(F);var L=C.props.onMouseMove;Zr(L)&&L(F,D)}),Xr(C,"handleItemMouseEnter",function(D){C.setState(function(){return{isTooltipActive:!0,activeItem:D,activePayload:D.tooltipPayload,activeCoordinate:D.tooltipPosition||{x:D.cx,y:D.cy}}})}),Xr(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Xr(C,"handleMouseMove",function(D){D.persist(),C.throttleTriggeredAfterMouseMove(D)}),Xr(C,"handleMouseLeave",function(D){C.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};C.setState(P),C.triggerSyncEvent(P);var F=C.props.onMouseLeave;Zr(F)&&F(P,D)}),Xr(C,"handleOuterEvent",function(D){var P=E2e(D),F=yc(C.props,"".concat(P));if(P&&Zr(F)){var L,W;/.*touch.*/i.test(P)?W=C.getMouseInfo(D.changedTouches[0]):W=C.getMouseInfo(D),F((L=W)!==null&&L!==void 0?L:{},D)}}),Xr(C,"handleClick",function(D){var P=C.getMouseInfo(D);if(P){var F=Ot(Ot({},P),{},{isTooltipActive:!0});C.setState(F),C.triggerSyncEvent(F);var L=C.props.onClick;Zr(L)&&L(F,D)}}),Xr(C,"handleMouseDown",function(D){var P=C.props.onMouseDown;if(Zr(P)){var F=C.getMouseInfo(D);P(F,D)}}),Xr(C,"handleMouseUp",function(D){var P=C.props.onMouseUp;if(Zr(P)){var F=C.getMouseInfo(D);P(F,D)}}),Xr(C,"handleTouchMove",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(D.changedTouches[0])}),Xr(C,"handleTouchStart",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseDown(D.changedTouches[0])}),Xr(C,"handleTouchEnd",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseUp(D.changedTouches[0])}),Xr(C,"handleDoubleClick",function(D){var P=C.props.onDoubleClick;if(Zr(P)){var F=C.getMouseInfo(D);P(F,D)}}),Xr(C,"handleContextMenu",function(D){var P=C.props.onContextMenu;if(Zr(P)){var F=C.getMouseInfo(D);P(F,D)}}),Xr(C,"triggerSyncEvent",function(D){C.props.syncId!==void 0&&MP.emit(FP,C.props.syncId,D,C.eventEmitterSymbol)}),Xr(C,"applySyncEvent",function(D){var P=C.props,F=P.layout,L=P.syncMethod,W=C.state.updateId,T=D.dataStartIndex,R=D.dataEndIndex;if(D.dataStartIndex!==void 0||D.dataEndIndex!==void 0)C.setState(Ot({dataStartIndex:T,dataEndIndex:R},m({props:C.props,dataStartIndex:T,dataEndIndex:R,updateId:W},C.state)));else if(D.activeTooltipIndex!==void 0){var j=D.chartX,Y=D.chartY,Z=D.activeTooltipIndex,re=C.state,z=re.offset,q=re.tooltipTicks;if(!z)return;if(typeof L=="function")Z=L(q,D);else if(L==="value"){Z=-1;for(var B=0;B<q.length;B++)if(q[B].value===D.activeLabel){Z=B;break}}var G=Ot(Ot({},z),{},{x:z.left,y:z.top}),Q=Math.min(j,G.x+G.width),O=Math.min(Y,G.y+G.height),J=q[Z]&&q[Z].value,X=eO(C.state,C.props.data,Z),ne=q[Z]?{x:F==="horizontal"?q[Z].coordinate:Q,y:F==="horizontal"?O:q[Z].coordinate}:hee;C.setState(Ot(Ot({},D),{},{activeLabel:J,activeCoordinate:ne,activePayload:X,activeTooltipIndex:Z}))}else C.setState(D)}),Xr(C,"renderCursor",function(D){var P,F=C.state,L=F.isTooltipActive,W=F.activeCoordinate,T=F.activePayload,R=F.offset,j=F.activeTooltipIndex,Y=F.tooltipAxisBandSize,Z=C.getTooltipEventType(),re=(P=D.props.active)!==null&&P!==void 0?P:L,z=C.props.layout,q=D.key||"_recharts-cursor";return l(B6e,{activeCoordinate:W,activePayload:T,activeTooltipIndex:j,chartName:r,element:D,isActive:re,layout:z,offset:R,tooltipAxisBandSize:Y,tooltipEventType:Z},q)}),Xr(C,"renderPolarAxis",function(D,P,F){var L=yc(D,"type.axisType"),W=yc(C.state,"".concat(L,"Map")),T=D.type.defaultProps,R=T!==void 0?Ot(Ot({},T),D.props):D.props,j=W&&W[R["".concat(L,"Id")]];return S.cloneElement(D,Ot(Ot({},j),{},{className:gn(L,j.className),key:D.key||"".concat(P,"-").concat(F),ticks:uh(j,!0)}))}),Xr(C,"renderPolarGrid",function(D){var P=D.props,F=P.radialLines,L=P.polarAngles,W=P.polarRadius,T=C.state,R=T.radiusAxisMap,j=T.angleAxisMap,Y=Gp(R),Z=Gp(j),re=Z.cx,z=Z.cy,q=Z.innerRadius,B=Z.outerRadius;return S.cloneElement(D,{polarAngles:Array.isArray(L)?L:uh(Z,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(W)?W:uh(Y,!0).map(function(G){return G.coordinate}),cx:re,cy:z,innerRadius:q,outerRadius:B,key:D.key||"polar-grid",radialLines:F})}),Xr(C,"renderLegend",function(){var D=C.state.formattedGraphicalItems,P=C.props,F=P.children,L=P.width,W=P.height,T=C.props.margin||{},R=L-(T.left||0)-(T.right||0),j=HZ({children:F,formattedGraphicalItems:D,legendWidth:R,legendContent:u});if(!j)return null;var Y=j.item,Z=yW(j,U6e);return S.cloneElement(Y,Ot(Ot({},Z),{},{chartWidth:L,chartHeight:W,margin:T,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Xr(C,"renderTooltip",function(){var D,P=C.props,F=P.children,L=P.accessibilityLayer,W=ic(F,ti);if(!W)return null;var T=C.state,R=T.isTooltipActive,j=T.activeCoordinate,Y=T.activePayload,Z=T.activeLabel,re=T.offset,z=(D=W.props.active)!==null&&D!==void 0?D:R;return S.cloneElement(W,{viewBox:Ot(Ot({},re),{},{x:re.left,y:re.top}),active:z,label:Z,payload:z?Y:[],coordinate:j,accessibilityLayer:L})}),Xr(C,"renderBrush",function(D){var P=C.props,F=P.margin,L=P.data,W=C.state,T=W.offset,R=W.dataStartIndex,j=W.dataEndIndex,Y=W.updateId;return S.cloneElement(D,{key:D.key||"_recharts-brush",onChange:N_(C.handleBrushChange,D.props.onChange),data:L,x:Xt(D.props.x)?D.props.x:T.left,y:Xt(D.props.y)?D.props.y:T.top+T.height+T.brushBottom-(F.bottom||0),width:Xt(D.props.width)?D.props.width:T.width,startIndex:R,endIndex:j,updateId:"brush-".concat(Y)})}),Xr(C,"renderReferenceElement",function(D,P,F){if(!D)return null;var L=C,W=L.clipPathId,T=C.state,R=T.xAxisMap,j=T.yAxisMap,Y=T.offset,Z=D.type.defaultProps||{},re=D.props,z=re.xAxisId,q=z===void 0?Z.xAxisId:z,B=re.yAxisId,G=B===void 0?Z.yAxisId:B;return S.cloneElement(D,{key:D.key||"".concat(P,"-").concat(F),xAxis:R[q],yAxis:j[G],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:W})}),Xr(C,"renderActivePoints",function(D){var P=D.item,F=D.activePoint,L=D.basePoint,W=D.childIndex,T=D.isRange,R=[],j=P.props.key,Y=P.item.type.defaultProps!==void 0?Ot(Ot({},P.item.type.defaultProps),P.item.props):P.item.props,Z=Y.activeDot,re=Y.dataKey,z=Ot(Ot({index:W,dataKey:re,cx:F.x,cy:F.y,r:4,fill:UI(P.item),strokeWidth:2,stroke:"#fff",payload:F.payload,value:F.value},Rr(Z,!1)),F5(Z));return R.push(b.renderActiveDot(Z,z,"".concat(j,"-activePoint-").concat(W))),L?R.push(b.renderActiveDot(Z,Ot(Ot({},z),{},{cx:L.x,cy:L.y}),"".concat(j,"-basePoint-").concat(W))):T&&R.push(null),R}),Xr(C,"renderGraphicChild",function(D,P,F){var L=C.filterFormatItem(D,P,F);if(!L)return null;var W=C.getTooltipEventType(),T=C.state,R=T.isTooltipActive,j=T.tooltipAxis,Y=T.activeTooltipIndex,Z=T.activeLabel,re=C.props.children,z=ic(re,ti),q=L.props,B=q.points,G=q.isRange,Q=q.baseLine,O=L.item.type.defaultProps!==void 0?Ot(Ot({},L.item.type.defaultProps),L.item.props):L.item.props,J=O.activeDot,X=O.hide,ne=O.activeBar,ie=O.activeShape,oe=!!(!X&&R&&z&&(J||ne||ie)),de={};W!=="axis"&&z&&z.props.trigger==="click"?de={onClick:N_(C.handleItemMouseEnter,D.props.onClick)}:W!=="axis"&&(de={onMouseLeave:N_(C.handleItemMouseLeave,D.props.onMouseLeave),onMouseEnter:N_(C.handleItemMouseEnter,D.props.onMouseEnter)});var V=S.cloneElement(D,Ot(Ot({},L.props),de));function se(he){return typeof j.dataKey=="function"?j.dataKey(he.payload):null}if(oe)if(Y>=0){var fe,te;if(j.dataKey&&!j.allowDuplicatedCategory){var ke=typeof j.dataKey=="function"?se:"payload.".concat(j.dataKey.toString());fe=M5(B,ke,Z),te=G&&Q&&M5(Q,ke,Z)}else fe=B==null?void 0:B[Y],te=G&&Q&&Q[Y];if(ie||ne){var Re=D.props.activeIndex!==void 0?D.props.activeIndex:Y;return[S.cloneElement(D,Ot(Ot(Ot({},L.props),de),{},{activeIndex:Re})),null,null]}if(!mn(fe))return[V].concat(H1(C.renderActivePoints({item:L,activePoint:fe,basePoint:te,childIndex:Y,isRange:G})))}else{var Ce,ve=(Ce=C.getItemByXY(C.state.activeCoordinate))!==null&&Ce!==void 0?Ce:{graphicalItem:V},Ge=ve.graphicalItem,pt=Ge.item,it=pt===void 0?D:pt,Le=Ge.childIndex,ut=Ot(Ot(Ot({},L.props),de),{},{activeIndex:Le});return[S.cloneElement(it,ut),null,null]}return G?[V,null,null]:[V,null]}),Xr(C,"renderCustomized",function(D,P,F){return S.cloneElement(D,Ot(Ot({key:"recharts-customized-".concat(F)},C.props),C.state))}),Xr(C,"renderMap",{CartesianGrid:{handler:P_,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:P_},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:P_},YAxis:{handler:P_},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((N=_.id)!==null&&N!==void 0?N:Pg("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=VJ(C.triggeredAfterMouseMove,(E=_.throttleDelay)!==null&&E!==void 0?E:1e3/60),C.state={},C}return Q6e(b,y),K6e(b,[{key:"componentDidMount",value:function(){var N,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,E=N.children,C=N.data,D=N.height,P=N.layout,F=ic(E,ti);if(F){var L=F.props.defaultIndex;if(!(typeof L!="number"||L<0||L>this.state.tooltipTicks.length-1)){var W=this.state.tooltipTicks[L]&&this.state.tooltipTicks[L].value,T=eO(this.state,C,L,W),R=this.state.tooltipTicks[L].coordinate,j=(this.state.offset.top+D)/2,Y=P==="horizontal",Z=Y?{x:R,y:j}:{y:R,x:j},re=this.state.formattedGraphicalItems.find(function(q){var B=q.item;return B.type.name==="Scatter"});re&&(Z=Ot(Ot({},Z),re.props.points[L].tooltipPosition),T=re.props.points[L].tooltipPayload);var z={activeTooltipIndex:L,isTooltipActive:!0,activeLabel:W,activePayload:T,activeCoordinate:Z};this.setState(z),this.renderCursor(F),this.accessibilityManager.setIndex(L)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var C,D;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(D=this.props.margin.top)!==null&&D!==void 0?D:0}})}return null}},{key:"componentDidUpdate",value:function(N){L6([ic(N.children,ti)],[ic(this.props.children,ti)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=ic(this.props.children,ti);if(N&&typeof N.props.shared=="boolean"){var E=N.props.shared?"axis":"item";return o.indexOf(E)>=0?E:i}return i}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var E=this.container,C=E.getBoundingClientRect(),D=p_e(C),P={chartX:Math.round(N.pageX-D.left),chartY:Math.round(N.pageY-D.top)},F=C.width/E.offsetWidth||1,L=this.inRange(P.chartX,P.chartY,F);if(!L)return null;var W=this.state,T=W.xAxisMap,R=W.yAxisMap,j=this.getTooltipEventType(),Y=wW(this.state,this.props.data,this.props.layout,L);if(j!=="axis"&&T&&R){var Z=Gp(T).scale,re=Gp(R).scale,z=Z&&Z.invert?Z.invert(P.chartX):null,q=re&&re.invert?re.invert(P.chartY):null;return Ot(Ot({},P),{},{xValue:z,yValue:q},Y)}return Y?Ot(Ot({},P),Y):null}},{key:"inRange",value:function(N,E){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=this.props.layout,P=N/C,F=E/C;if(D==="horizontal"||D==="vertical"){var L=this.state.offset,W=P>=L.left&&P<=L.left+L.width&&F>=L.top&&F<=L.top+L.height;return W?{x:P,y:F}:null}var T=this.state,R=T.angleAxisMap,j=T.radiusAxisMap;if(R&&j){var Y=Gp(R);return bU({x:P,y:F},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,E=this.getTooltipEventType(),C=ic(N,ti),D={};C&&E==="axis"&&(C.props.trigger==="click"?D={onClick:this.handleClick}:D={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=F5(this.props,this.handleOuterEvent);return Ot(Ot({},P),D)}},{key:"addListener",value:function(){MP.on(FP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){MP.removeListener(FP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,E,C){for(var D=this.state.formattedGraphicalItems,P=0,F=D.length;P<F;P++){var L=D[P];if(L.item===N||L.props.key===N.key||E===hh(L.item.type)&&C===L.childIndex)return L}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,E=this.state.offset,C=E.left,D=E.top,P=E.height,F=E.width;return l("defs",{children:l("clipPath",{id:N,children:l("rect",{x:C,y:D,height:P,width:F})})})}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(E,C){var D=vW(C,2),P=D[0],F=D[1];return Ot(Ot({},E),{},Xr({},P,F.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(E,C){var D=vW(C,2),P=D[0],F=D[1];return Ot(Ot({},E),{},Xr({},P,F.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[N])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(N){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[N])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(N){var E=this.state,C=E.formattedGraphicalItems,D=E.activeItem;if(C&&C.length)for(var P=0,F=C.length;P<F;P++){var L=C[P],W=L.props,T=L.item,R=T.type.defaultProps!==void 0?Ot(Ot({},T.type.defaultProps),T.props):T.props,j=hh(T.type);if(j==="Bar"){var Y=(W.data||[]).find(function(q){return Oke(N,q)});if(Y)return{graphicalItem:L,payload:Y}}else if(j==="RadialBar"){var Z=(W.data||[]).find(function(q){return bU(N,q)});if(Z)return{graphicalItem:L,payload:Z}}else if(SN(L,D)||NN(L,D)||Yx(L,D)){var re=tCe({graphicalItem:L,activeTooltipItem:D,itemData:R.data}),z=R.activeIndex===void 0?re:R.activeIndex;return{graphicalItem:Ot(Ot({},L),{},{childIndex:z}),payload:Yx(L,D)?R.data[re]:L.props.data[re]}}}return null}},{key:"render",value:function(){var N=this;if(!I9(this))return null;var E=this.props,C=E.children,D=E.className,P=E.width,F=E.height,L=E.style,W=E.compact,T=E.title,R=E.desc,j=yW(E,q6e),Y=Rr(j,!1);if(W)return l(Xq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId,children:x($6,{...Y,width:P,height:F,title:T,desc:R,children:[this.renderClipPath(),M9(C,this.renderMap)]})});if(this.props.accessibilityLayer){var Z,re;Y.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,Y.role=(re=this.props.role)!==null&&re!==void 0?re:"application",Y.onKeyDown=function(q){N.accessibilityManager.keyboardEvent(q)},Y.onFocus=function(){N.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return l(Xq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId,children:x("div",{className:gn("recharts-wrapper",D),style:Ot({position:"relative",cursor:"default",width:P,height:F},L),...z,ref:function(B){N.container=B},children:[x($6,{...Y,width:P,height:F,title:T,desc:R,style:i8e,children:[this.renderClipPath(),M9(C,this.renderMap)]}),this.renderLegend(),this.renderTooltip()]})})}}])}(S.Component);Xr(w,"displayName",r),Xr(w,"defaultProps",Ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xr(w,"getDerivedStateFromProps",function(y,b){var _=y.dataKey,N=y.data,E=y.children,C=y.width,D=y.height,P=y.layout,F=y.stackOffset,L=y.margin,W=b.dataStartIndex,T=b.dataEndIndex;if(b.updateId===void 0){var R=bW(y);return Ot(Ot(Ot({},R),{},{updateId:0},m(Ot(Ot({props:y},R),{},{updateId:0}),b)),{},{prevDataKey:_,prevData:N,prevWidth:C,prevHeight:D,prevLayout:P,prevStackOffset:F,prevMargin:L,prevChildren:E})}if(_!==b.prevDataKey||N!==b.prevData||C!==b.prevWidth||D!==b.prevHeight||P!==b.prevLayout||F!==b.prevStackOffset||!e1(L,b.prevMargin)){var j=bW(y),Y={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},Z=Ot(Ot({},wW(b,N,P)),{},{updateId:b.updateId+1}),re=Ot(Ot(Ot({},j),Y),Z);return Ot(Ot(Ot({},re),m(Ot({props:y},re),b)),{},{prevDataKey:_,prevData:N,prevWidth:C,prevHeight:D,prevLayout:P,prevStackOffset:F,prevMargin:L,prevChildren:E})}if(!L6(E,b.prevChildren)){var z,q,B,G,Q=ic(E,M1),O=Q&&(z=(q=Q.props)===null||q===void 0?void 0:q.startIndex)!==null&&z!==void 0?z:W,J=Q&&(B=(G=Q.props)===null||G===void 0?void 0:G.endIndex)!==null&&B!==void 0?B:T,X=O!==W||J!==T,ne=!mn(N),ie=ne&&!X?b.updateId:b.updateId+1;return Ot(Ot({updateId:ie},m(Ot(Ot({props:y},b),{},{updateId:ie,dataStartIndex:O,dataEndIndex:J}),b)),{},{prevChildren:E,dataStartIndex:O,dataEndIndex:J})}return null}),Xr(w,"renderActiveDot",function(y,b,_){var N;return S.isValidElement(y)?N=S.cloneElement(y,b):Zr(y)?N=y(b):N=l(tb,{...b}),l(Fn,{className:"recharts-active-dot",children:N},_)});var g=S.forwardRef(function(b,_){return l(w,{...b,ref:_})});return g.displayName=w.displayName,g},mee=ON({chartName:"LineChart",GraphicalChild:hm,axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:WI}),tw=ON({chartName:"BarChart",GraphicalChild:nu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:WI}),Jp=ON({chartName:"PieChart",GraphicalChild:$o,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:_N},{axisType:"radiusAxis",AxisComp:wN}],formatAxisMap:HNe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),gee=ON({chartName:"AreaChart",GraphicalChild:Ih,axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:WI});const Tv=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],m8e=({revenueData:e=[],appointmentTypeData:t=[],dailyAppointmentData:r=[],treatmentStatusData:n=[],profitEstimationData:a={conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:i=0,dailyVisitors:s=0,revenueChangePercentage:o=0,dailyAppointmentsChangePercentage:c=0,overallTreatmentProgress:u=0,patientAgeData:d=[],appointmentStatusData:f=[],treatmentPlanStatusData:h=[],upcomingWeeklyAppointmentTrendData:m=[]})=>{const w=t.reduce((N,E)=>N+E.value,0),g=f.reduce((N,E)=>N+E.value,0),y=h.reduce((N,E)=>N+E.value,0),b=["#FBBF24","#34D399","#F87171","#9CA3AF"],_=["#60A5FA","#34D399","#FBBF24","#F87171"];return x("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:[x(or,{className:"col-span-1 md:col-span-2 xl:col-span-2",children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[x("div",{children:[x(br,{className:"text-3xl font-bold",children:["₹",i?i.toLocaleString():"0"]}),l("p",{className:"text-xs text-muted-foreground",children:"Overall Revenue / Appointments"})]}),x("div",{className:"flex items-center space-x-2",children:[x("span",{className:`text-xs flex items-center ${o>=0?"text-green-500":"text-red-500"}`,children:[l(Vce,{className:"h-3 w-3 mr-1"})," ",o>=0?"+":"",o.toFixed(2),"%"]}),x(Ur,{defaultValue:"monthly",children:[l(jr,{className:"w-[110px] h-8 text-xs",children:l(qr,{placeholder:"Select"})}),x($r,{children:[l(wt,{value:"monthly",children:"Monthly"}),l(wt,{value:"yearly",children:"Yearly"})]})]})]})]}),l(hr,{className:"pl-2 pr-6",children:l(Oo,{width:"100%",height:250,children:x(mee,{data:e,children:[l(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),l(Ml,{hide:!0}),l(ti,{contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(N,E)=>[`${N} ${E==="uv"?"Appointments":"Revenue"}`,null]}),l(hm,{type:"monotone",dataKey:"uv",name:"Appointments",stroke:"#60A5FA",strokeWidth:2,dot:{r:4,fill:"#60A5FA",stroke:"#fff",strokeWidth:2},activeDot:{r:6}}),l(hm,{type:"monotone",dataKey:"pv",name:"Revenue",stroke:"#4F46E5",strokeWidth:2,dot:!1})]})})})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Appointment Types"}),x(Ur,{defaultValue:"monthly",children:[l(jr,{className:"w-[110px] h-8 text-xs",children:l(qr,{placeholder:"Select"})}),x($r,{children:[l(wt,{value:"monthly",children:"Monthly"}),l(wt,{value:"yearly",children:"Yearly"})]})]})]}),x(hr,{className:"flex flex-col items-center",children:[l(Oo,{width:"100%",height:180,children:x(Jp,{children:[l($o,{data:t,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:t.map((N,E)=>l(Xc,{fill:Tv[E%Tv.length],stroke:Tv[E%Tv.length]},`cell-${E}`))}),l(ti,{formatter:(N,E)=>[`${N} (${(N/w*100).toFixed(1)}%)`,E]})]})}),l("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:t.map((N,E)=>x("div",{className:"flex items-center",children:[l("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:Tv[E%Tv.length]}}),N.name," ",(N.value/w*100).toFixed(1),"%"]},`legend-${E}`))})]})]}),x(or,{children:[x(xr,{className:"pb-2",children:[l("div",{className:"flex flex-row items-center justify-between space-y-0",children:l(br,{className:"text-sm font-medium",children:"Appointments Trend"})}),l("p",{className:"text-xs text-muted-foreground",children:"Total scheduled appointments per day over the next 7 days"})]}),l(hr,{className:"pb-4 pl-2 pr-4",children:l(Oo,{width:"100%",height:150,children:x(tw,{data:m,children:[l(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),l(Ml,{allowDecimals:!1,axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"}}),l(ti,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:N=>[`${N} Appointments`,null]}),l(nu,{dataKey:"value",name:"Appointments",fill:"#22C55E",radius:[4,4,0,0],barSize:12})]})})})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Treatment Plan Status"}),l(Fe,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0",children:l(Ice,{className:"h-4 w-4"})})]}),x(hr,{children:[x("div",{className:"flex items-center justify-between mb-4",children:[x("div",{className:"flex items-center space-x-3",children:[l("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l(U0,{className:"h-5 w-5 text-indigo-600"})}),x("div",{children:[l("p",{className:"text-sm font-medium",children:"Overall Progress"}),l("p",{className:"text-xs text-muted-foreground",children:"Across Active Plans"})]})]}),x("div",{className:"text-lg font-semibold",children:[u.toFixed(0),"%"]})]}),l(Oo,{width:"100%",height:100,children:x(gee,{data:n,margin:{top:5,right:0,left:0,bottom:0},children:[l("defs",{children:x("linearGradient",{id:"colorStatus",x1:"0",y1:"0",x2:"0",y2:"1",children:[l("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.1}),l("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),l(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),l(Ml,{hide:!0,domain:[0,100]})," ",l(ti,{formatter:N=>[`${N}% Complete`,null]}),l(Ih,{type:"monotone",dataKey:"value",name:"Completion Rate",stroke:"#4F46E5",fillOpacity:1,fill:"url(#colorStatus)",strokeWidth:2,dot:{r:4,fill:"#4F46E5",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})]})]}),x(or,{children:[x(xr,{className:"pb-4",children:[l(br,{className:"text-sm font-medium",children:"Profit Estimation"}),l("p",{className:"text-xs text-muted-foreground",children:"Based on completed treatments"})]}),x(hr,{className:"flex flex-col items-center",children:[l(Oo,{width:"100%",height:120,children:x(Jp,{children:[x($o,{data:[{name:"Conversion",value:a.conversionRate},{name:"Remaining",value:100-a.conversionRate}],cx:"50%",cy:"50%",innerRadius:45,outerRadius:60,startAngle:90,endAngle:90+360*(a.conversionRate/100),dataKey:"value",stroke:"none",children:[l(Xc,{fill:"#4F46E5"}),l(Xc,{fill:"#E5E7EB"})]}),l("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"#6B7280",children:"Conversion"}),x("text",{x:"50%",y:"65%",textAnchor:"middle",dominantBaseline:"middle",fontSize:"18",fontWeight:"bold",fill:"#111827",children:[a.conversionRate.toFixed(0),"%"]})]})}),x("div",{className:"flex justify-around w-full mt-4 text-xs border-t pt-4",children:[x("div",{className:"text-center",children:[l("p",{className:"text-muted-foreground",children:"Est. Sales"}),l("p",{className:"font-semibold",children:a.estimatedSales.toLocaleString()})]}),x("div",{className:"text-center",children:[l("p",{className:"text-muted-foreground",children:"Est. Profit"}),x("p",{className:"font-semibold",children:["₹",a.estimatedProfit.toLocaleString()]})]})]})]})]}),x(or,{children:[l(xr,{className:"pb-2",children:l(br,{className:"text-sm font-medium",children:"Patient Age Distribution"})}),l(hr,{className:"pb-4 pl-2 pr-4",children:l(Oo,{width:"100%",height:200,children:x(tw,{data:d,layout:"vertical",barCategoryGap:"20%",children:[l(Rl,{type:"number",hide:!0}),l(Ml,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,style:{fontSize:"12px"},width:60}),l(ti,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),l(nu,{dataKey:"value",name:"Patients",fill:"#8B5CF6",radius:[0,4,4,0],barSize:10})]})})})]}),x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Appointment Status"})}),x(hr,{className:"flex flex-col items-center",children:[l(Oo,{width:"100%",height:180,children:x(Jp,{children:[l($o,{data:f,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:f.map((N,E)=>l(Xc,{fill:b[E%b.length],stroke:b[E%b.length]},`cell-apt-status-${E}`))}),l(ti,{formatter:(N,E)=>[`${N} (${g>0?(N/g*100).toFixed(1):0}%)`,E]})]})}),l("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:f.map((N,E)=>x("div",{className:"flex items-center",children:[l("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:b[E%b.length]}}),N.name," (",g>0?(N.value/g*100).toFixed(1):0,"%)"]},`legend-apt-status-${E}`))})]})]}),x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Treatment Plan Status"})}),x(hr,{className:"flex flex-col items-center",children:[l(Oo,{width:"100%",height:180,children:x(Jp,{children:[l($o,{data:h,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:h.map((N,E)=>l(Xc,{fill:_[E%_.length],stroke:_[E%_.length]},`cell-tp-status-${E}`))}),l(ti,{formatter:(N,E)=>[`${N} (${y>0?(N/y*100).toFixed(1):0}%)`,E]})]})}),l("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:h.map((N,E)=>x("div",{className:"flex items-center",children:[l("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:_[E%_.length]}}),N.name," (",y>0?(N.value/y*100).toFixed(1):0,"%)"]},`legend-tp-status-${E}`))})]})]})]})};function g8e(e,t){return S.useReducer((r,n)=>t[r][n]??r,e)}var DN=e=>{const{present:t,children:r}=e,n=v8e(t),a=typeof r=="function"?r({present:n.isPresent}):S.Children.only(r),i=Kr(n.ref,y8e(a));return typeof r=="function"||n.isPresent?S.cloneElement(a,{ref:i}):null};DN.displayName="Presence";function v8e(e){const[t,r]=S.useState(),n=S.useRef(null),a=S.useRef(e),i=S.useRef("none"),s=e?"mounted":"unmounted",[o,c]=g8e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=T_(n.current);i.current=o==="mounted"?u:"none"},[o]),ci(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=T_(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ci(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=T_(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=T_(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:S.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function T_(e){return(e==null?void 0:e.animationName)||"none"}function y8e(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var IN="Dialog",[vee,yee]=es(IN),[x8e,dd]=vee(IN),xee=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=S.useRef(null),c=S.useRef(null),[u,d]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:IN});return l(x8e,{scope:t,triggerRef:o,contentRef:c,contentId:jl(),titleId:jl(),descriptionId:jl(),open:u,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(f=>!f),[d]),modal:s,children:r})};xee.displayName=IN;var wee="DialogTrigger",bee=S.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=dd(wee,r),i=Kr(t,a.triggerRef);return l(vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":rR(a.open),...n,ref:i,onClick:Ht(e.onClick,a.onOpenToggle)})});bee.displayName=wee;var eR="DialogPortal",[w8e,_ee]=vee(eR,{forceMount:void 0}),See=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=dd(eR,t);return l(w8e,{scope:t,forceMount:r,children:S.Children.map(n,s=>l(DN,{present:r||i.open,children:l(gy,{asChild:!0,container:a,children:s})}))})};See.displayName=eR;var PS="DialogOverlay",Nee=S.forwardRef((e,t)=>{const r=_ee(PS,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=dd(PS,e.__scopeDialog);return i.modal?l(DN,{present:n||i.open,children:l(_8e,{...a,ref:t})}):null});Nee.displayName=PS;var b8e=lm("DialogOverlay.RemoveScroll"),_8e=S.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=dd(PS,r);return l(Ww,{as:b8e,allowPinchZoom:!0,shards:[a.contentRef],children:l(vr.div,{"data-state":rR(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ug="DialogContent",Aee=S.forwardRef((e,t)=>{const r=_ee(ug,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=dd(ug,e.__scopeDialog);return l(DN,{present:n||i.open,children:i.modal?l(S8e,{...a,ref:t}):l(N8e,{...a,ref:t})})});Aee.displayName=ug;var S8e=S.forwardRef((e,t)=>{const r=dd(ug,e.__scopeDialog),n=S.useRef(null),a=Kr(t,r.contentRef,n);return S.useEffect(()=>{const i=n.current;if(i)return D4(i)},[]),l(kee,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ht(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ht(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:Ht(e.onFocusOutside,i=>i.preventDefault())})}),N8e=S.forwardRef((e,t)=>{const r=dd(ug,e.__scopeDialog),n=S.useRef(!1),a=S.useRef(!1);return l(kee,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),kee=S.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=dd(ug,r),c=S.useRef(null),u=Kr(t,c);return N4(),x(_r,{children:[l($w,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:l(Ng,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":rR(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),x(_r,{children:[l(k8e,{titleId:o.titleId}),l(C8e,{contentRef:c,descriptionId:o.descriptionId})]})]})}),tR="DialogTitle",Eee=S.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=dd(tR,r);return l(vr.h2,{id:a.titleId,...n,ref:t})});Eee.displayName=tR;var Cee="DialogDescription",Pee=S.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=dd(Cee,r);return l(vr.p,{id:a.descriptionId,...n,ref:t})});Pee.displayName=Cee;var Tee="DialogClose",Oee=S.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=dd(Tee,r);return l(vr.button,{type:"button",...n,ref:t,onClick:Ht(e.onClick,()=>a.onOpenChange(!1))})});Oee.displayName=Tee;function rR(e){return e?"open":"closed"}var Dee="DialogTitleWarning",[A8e,Iee]=Mue(Dee,{contentName:ug,titleName:tR,docsSlug:"dialog"}),k8e=({titleId:e})=>{const t=Iee(Dee),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},E8e="DialogDescriptionWarning",C8e=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Iee(E8e).contentName}}.`;return S.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Ree=xee,Mee=bee,Fee=See,nR=Nee,aR=Aee,iR=Eee,sR=Pee,RN=Oee;const Vn=Ree,rb=Mee,P8e=Fee,MN=RN,Lee=S.forwardRef(({className:e,...t},r)=>l(nR,{ref:r,className:Lt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Lee.displayName=nR.displayName;const Bn=S.forwardRef(({className:e,children:t,...r},n)=>x(P8e,{children:[l(Lee,{}),x(aR,{ref:n,className:Lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[l(us,{children:r["aria-describedby"]}),t,x(RN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l(Qu,{className:"h-4 w-4"}),l("span",{className:"sr-only",children:"Close"})]})]})]}));Bn.displayName=aR.displayName;const Jn=({className:e,...t})=>l("div",{className:Lt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Jn.displayName="DialogHeader";const fs=({className:e,...t})=>l("div",{className:Lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fs.displayName="DialogFooter";const Zn=S.forwardRef(({className:e,...t},r)=>l(iR,{ref:r,className:Lt("text-lg font-semibold leading-none tracking-tight",e),...t}));Zn.displayName=iR.displayName;const us=S.forwardRef(({className:e,...t},r)=>l(sR,{ref:r,className:Lt("text-sm text-muted-foreground",e),...t}));us.displayName=sR.displayName;function T8e(e,t){return S.useReducer((r,n)=>t[r][n]??r,e)}var oR="ScrollArea",[jee,XZe]=es(oR),[O8e,su]=jee(oR),$ee=S.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(null),[m,w]=S.useState(null),[g,y]=S.useState(null),[b,_]=S.useState(0),[N,E]=S.useState(0),[C,D]=S.useState(!1),[P,F]=S.useState(!1),L=Kr(t,T=>c(T)),W=Sg(a);return l(O8e,{scope:r,type:n,dir:W,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:w,scrollbarXEnabled:C,onScrollbarXEnabledChange:D,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:F,onCornerWidthChange:_,onCornerHeightChange:E,children:l(vr.div,{dir:W,...s,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});$ee.displayName=oR;var Bee="ScrollAreaViewport",Uee=S.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,s=su(Bee,r),o=S.useRef(null),c=Kr(t,o,s.onViewportChange);return x(_r,{children:[l("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),l(vr.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Uee.displayName=Bee;var xf="ScrollAreaScrollbar",lR=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=su(xf,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return S.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?l(D8e,{...n,ref:t,forceMount:r}):a.type==="scroll"?l(I8e,{...n,ref:t,forceMount:r}):a.type==="auto"?l(qee,{...n,ref:t,forceMount:r}):a.type==="always"?l(cR,{...n,ref:t}):null});lR.displayName=xf;var D8e=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=su(xf,e.__scopeScrollArea),[i,s]=S.useState(!1);return S.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const u=()=>{window.clearTimeout(c),s(!0)},d=()=>{c=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),l(uo,{present:r||i,children:l(qee,{"data-state":i?"visible":"hidden",...n,ref:t})})}),I8e=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=su(xf,e.__scopeScrollArea),i=e.orientation==="horizontal",s=LN(()=>c("SCROLL_END"),100),[o,c]=T8e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return S.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,c]),S.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),s()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,s]),l(uo,{present:r||o!=="hidden",children:l(cR,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Ht(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ht(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),qee=S.forwardRef((e,t)=>{const r=su(xf,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,s]=S.useState(!1),o=e.orientation==="horizontal",c=LN(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;s(o?u:d)}},10);return G1(r.viewport,c),G1(r.content,c),l(uo,{present:n||i,children:l(cR,{"data-state":i?"visible":"hidden",...a,ref:t})})}),cR=S.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=su(xf,e.__scopeScrollArea),i=S.useRef(null),s=S.useRef(0),[o,c]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Gee(o.viewport,o.content),d={...n,sizes:o,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:h=>s.current=h};function f(h,m){return $8e(h,s.current,o,m)}return r==="horizontal"?l(R8e,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=SW(h,o,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?l(M8e,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=SW(h,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),R8e=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=su(xf,e.__scopeScrollArea),[s,o]=S.useState(),c=S.useRef(null),u=Kr(t,c,i.onScrollbarXChange);return S.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l(zee,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":FN(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),Kee(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&s&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:OS(s.paddingLeft),paddingEnd:OS(s.paddingRight)}})}})}),M8e=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=su(xf,e.__scopeScrollArea),[s,o]=S.useState(),c=S.useRef(null),u=Kr(t,c,i.onScrollbarYChange);return S.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l(zee,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":FN(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),Kee(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&s&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:OS(s.paddingTop),paddingEnd:OS(s.paddingBottom)}})}})}),[F8e,Wee]=jee(xf),zee=S.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=su(xf,r),[w,g]=S.useState(null),y=Kr(t,L=>g(L)),b=S.useRef(null),_=S.useRef(""),N=m.viewport,E=n.content-n.viewport,C=Di(d),D=Di(c),P=LN(f,10);function F(L){if(b.current){const W=L.clientX-b.current.left,T=L.clientY-b.current.top;u({x:W,y:T})}}return S.useEffect(()=>{const L=W=>{const T=W.target;(w==null?void 0:w.contains(T))&&C(W,E)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[N,w,E,C]),S.useEffect(D,[n,D]),G1(w,P),G1(m.content,P),l(F8e,{scope:r,scrollbar:w,hasThumb:a,onThumbChange:Di(i),onThumbPointerUp:Di(s),onThumbPositionChange:D,onThumbPointerDown:Di(o),children:l(vr.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:Ht(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),b.current=w.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),F(L))}),onPointerMove:Ht(e.onPointerMove,F),onPointerUp:Ht(e.onPointerUp,L=>{const W=L.target;W.hasPointerCapture(L.pointerId)&&W.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=_.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),TS="ScrollAreaThumb",Vee=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Wee(TS,e.__scopeScrollArea);return l(uo,{present:r||a.hasThumb,children:l(L8e,{ref:t,...n})})}),L8e=S.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=su(TS,r),s=Wee(TS,r),{onThumbPositionChange:o}=s,c=Kr(t,f=>s.onThumbChange(f)),u=S.useRef(void 0),d=LN(()=>{u.current&&(u.current(),u.current=void 0)},100);return S.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=B8e(f,o);u.current=m,o()}};return o(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,o]),l(vr.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ht(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),w=f.clientX-m.left,g=f.clientY-m.top;s.onThumbPointerDown({x:w,y:g})}),onPointerUp:Ht(e.onPointerUp,s.onThumbPointerUp)})});Vee.displayName=TS;var uR="ScrollAreaCorner",Hee=S.forwardRef((e,t)=>{const r=su(uR,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?l(j8e,{...e,ref:t}):null});Hee.displayName=uR;var j8e=S.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=su(uR,r),[i,s]=S.useState(0),[o,c]=S.useState(0),u=!!(i&&o);return G1(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),G1(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?l(vr.div,{...n,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function OS(e){return e?parseInt(e,10):0}function Gee(e,t){const r=e/t;return isNaN(r)?0:r}function FN(e){const t=Gee(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function $8e(e,t,r,n="ltr"){const a=FN(r),i=a/2,s=t||i,o=a-s,c=r.scrollbar.paddingStart+s,u=r.scrollbar.size-r.scrollbar.paddingEnd-o,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return Yee([c,u],f)(e)}function SW(e,t,r="ltr"){const n=FN(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-n,c=r==="ltr"?[0,s]:[s*-1,0],u=P6(e,c);return Yee([0,s],[0,o])(u)}function Yee(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Kee(e,t){return e>0&&e<t}var B8e=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=r.left!==i.left,o=r.top!==i.top;(s||o)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function LN(e,t){const r=Di(e),n=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),S.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function G1(e,t){const r=Di(t);ci(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var Xee=$ee,U8e=Uee,q8e=Hee;const nd=S.forwardRef(({className:e,children:t,...r},n)=>x(Xee,{ref:n,className:Lt("relative overflow-hidden",e),...r,children:[l(U8e,{className:"h-full w-full rounded-[inherit]",children:t}),l(Jee,{}),l(q8e,{})]}));nd.displayName=Xee.displayName;const Jee=S.forwardRef(({className:e,orientation:t="vertical",...r},n)=>l(lR,{ref:n,orientation:t,className:Lt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:l(Vee,{className:"relative flex-1 rounded-full bg-border"})}));Jee.displayName=lR.displayName;const W8e=({isOpen:e,onClose:t,appointments:r})=>l(Vn,{open:e,onOpenChange:t,children:x(Bn,{className:"sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1000px] max-h-[90vh] flex flex-col p-0",children:[x(Jn,{className:"p-6 pb-4",children:[l(Zn,{className:"text-2xl",children:"All Upcoming Appointments"}),l(us,{children:"Browse through all scheduled upcoming appointments."})]}),l(nd,{className:"flex-grow border-t border-b",children:l("div",{className:"space-y-4 p-6",children:r.length>0?r.map(n=>x(or,{className:"shadow-sm hover:shadow-md transition-shadow bg-card",children:[l(xr,{className:"pb-3 pt-4",children:x(br,{className:"text-lg flex items-center font-medium",children:[l(vi,{className:"w-5 h-5 mr-3 text-primary flex-shrink-0"}),n.patient]})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-3 text-sm pl-12 pr-6 pb-4",children:[x("div",{children:[l("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Type"}),l("p",{className:"mt-1",children:n.type})]}),x("div",{children:[l("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Date & Time"}),x("p",{className:"flex items-center mt-1",children:[l(nD,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),n.start_time?Mt(Wr(n.start_time),"EEEE, MMM d, yyyy"):n.date]}),x("p",{className:"flex items-center mt-1",children:[l(Us,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),n.start_time?Mt(Wr(n.start_time),"h:mm a"):n.time]})]}),x("div",{children:[l("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Status"}),l("p",{className:"mt-1 capitalize",children:n.status})]})]})]},n.id)):l("div",{className:"text-center py-12 text-muted-foreground",children:"No upcoming appointments found."})})}),l(fs,{className:"p-6 pt-4 border-t",children:l(Fe,{variant:"outline",onClick:t,children:"Close"})})]})});function z8e(){const e=Ss(),[t,r]=S.useState({todaysAppointmentsCount:0,totalPatients:0,avgWaitTime:0,treatmentSuccessRate:0,appointmentsChange:0,patientsChange:0,waitTimeChange:0,successRateChange:0}),[n,a]=S.useState([]),[i,s]=S.useState([]),[o,c]=S.useState(!1),[u,d]=S.useState([]),[f,h]=S.useState(!0),[m,w]=S.useState({revenueData:[],appointmentTypeData:[],dailyAppointmentData:[],treatmentStatusData:[],profitEstimationData:{conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:0,dailyVisitors:0,patientAgeData:[],appointmentStatusData:[],treatmentPlanStatusData:[],upcomingWeeklyAppointmentTrendData:[]});S.useEffect(()=>{g();const b=["appointments","patients","treatment_plans","treatments","medical_records"].map(_=>GD(_,N=>{console.log(`Dashboard detected change in ${_}:`,N),g()}));return()=>{b.forEach(_=>_.unsubscribe())}},[]);const g=async()=>{try{h(!0);const y=new Date,b=Dl(y),_=Qv(y),N=Ws(E6(y,5)),E=fm(y),C=Dl(Ua(y,-6)),D=Qv(y),P=Qv(Ua(y,6)),[F,L,W,T]=await Promise.all([Rt.patients.getAll(),Rt.patients.getTreatmentPlans(null),Rt.patients.getMedicalRecords(null),Rt.appointments.getAll()]),R=F.length,Y=T.filter(ot=>{if(!ot.start_time)return!1;const yt=Wr(ot.start_time);return x0(yt,{start:b,end:_})}).length;let Z=0,re=0;L.forEach(ot=>{ot.treatments&&ot.treatments.length>0&&(re+=ot.treatments.length,Z+=ot.treatments.filter(yt=>yt.status==="completed").length)});const z=re>0?Math.round(Z/re*100):0;r({todaysAppointmentsCount:Y,totalPatients:R,avgWaitTime:15,treatmentSuccessRate:z,appointmentsChange:0,patientsChange:0,waitTimeChange:0,successRateChange:0});const J=T.filter(ot=>ot.status==="scheduled"&&ot.start_time&&Wr(ot.start_time)>=b).sort((ot,yt)=>(ot.start_time?Wr(ot.start_time).getTime():0)-(yt.start_time?Wr(yt.start_time).getTime():0)).map(ot=>({id:ot.id,patient:ot.patients?`${ot.patients.first_name} ${ot.patients.last_name}`:"Unknown Patient",time:ot.start_time?Mt(Wr(ot.start_time),"h:mm a"):"No time",date:ot.start_time?Mt(Wr(ot.start_time),"MMM d"):"No date",type:ot.type||"Appointment",status:ot.status,start_time:ot.start_time}));s(J),a(J.slice(0,5));const X=ot=>{if(!ot)return"Unknown Patient";const yt=F.find(Mr=>Mr.id===ot);return yt?`${yt.first_name} ${yt.last_name}`:"Unknown Patient"},ne=T.filter(ot=>ot.status==="completed"&&ot.start_time).map(ot=>({id:ot.id,type:"appointment",title:`Appointment ${ot.type||""} Completed`,patientName:ot.patients?`${ot.patients.first_name} ${ot.patients.last_name}`:"Unknown Patient",itemName:ot.type||"Appointment",staffName:ot.staff?`${ot.staff.first_name} ${ot.staff.last_name}`:void 0,timestamp:Wr(ot.start_time),icon:vi,details:`Notes: ${ot.notes||"N/A"}`})),ie=L.flatMap(ot=>{const yt=X(ot.patient_id);return(ot.treatments||[]).filter(Mr=>Mr.status==="completed"&&Mr.updated_at).map(Mr=>({id:Mr.id,type:"treatment",title:"Treatment Completed",patientName:yt,itemName:Mr.type||"Treatment",timestamp:Wr(Mr.updated_at),icon:U0,details:`Notes: ${Mr.notes||"N/A"}`}))}),oe=W.filter(ot=>ot.created_at).map(ot=>({id:ot.id,type:"record",title:"Medical Record Added",patientName:X(ot.patient_id),itemName:ot.record_type||"Medical Record",timestamp:Wr(ot.created_at),icon:Us,details:`Summary: ${ot.summary||"N/A"}`})),de=[...ne,...ie,...oe].sort((ot,yt)=>yt.timestamp.getTime()-ot.timestamp.getTime());d(de.slice(0,3));const V={},se=new Intl.DateTimeFormat("en",{month:"short"});for(let ot=0;ot<6;ot++){const yt=E6(y,ot),Mr=Mt(yt,"yyyy-MM");V[Mr]={count:0,revenue:0}}T.forEach(ot=>{if(ot.start_time){const yt=Wr(ot.start_time);if(x0(yt,{start:N,end:E})){const Mr=Mt(yt,"yyyy-MM");V[Mr]&&(V[Mr].count+=1)}}});const fe=Object.keys(V).map(ot=>({name:se.format(Wr(ot+"-01")),uv:V[ot].count,pv:V[ot].revenue,monthKey:ot})).sort((ot,yt)=>ot.monthKey.localeCompare(yt.monthKey)),te=fe.reduce((ot,yt)=>ot+(yt.pv||0),0),ke=0,Re=fe.map(({name:ot,uv:yt,pv:Mr})=>({name:ot,uv:yt,pv:Mr})),Ce=Ws(y),ve=fm(y),Ge={};T.forEach(ot=>{var Mr;const yt=((Mr=ot.staff)==null?void 0:Mr.role)||"General";if(ot.start_time){const ta=Wr(ot.start_time);x0(ta,{start:Ce,end:ve})&&(Ge[yt]=(Ge[yt]||0)+1)}});const pt=Object.entries(Ge).map(([ot,yt])=>({name:ot,value:yt})),it=rge({start:b,end:_}),Le={};it.forEach(ot=>{Le[Mt(ot,"HH")]=0}),T.forEach(ot=>{if(ot.start_time){const yt=Wr(ot.start_time);if(x0(yt,{start:b,end:_})){const Mr=Mt(yt,"HH");Le[Mr]=(Le[Mr]||0)+1}}});const he=["00","04","08","12","14","16","18"].map(ot=>({name:ot,value:Le[ot]||0})),Ee=Object.values(Le).reduce((ot,yt)=>ot+yt,0),Me=0,at=z2({start:C,end:D}),ct={},dt=new Intl.DateTimeFormat("en",{weekday:"short"});at.forEach(ot=>{ct[Mt(ot,"yyyy-MM-dd")]={completed:0,total:0}}),L.forEach(ot=>{(ot.treatments||[]).forEach(yt=>{if(yt.updated_at){const Mr=Wr(yt.updated_at);if(x0(Mr,{start:C,end:D})){const ta=Mt(Mr,"yyyy-MM-dd");ct[ta]&&(ct[ta].total+=1,yt.status==="completed"&&(ct[ta].completed+=1))}}})});const Xe=Object.keys(ct).map(ot=>{const yt=ct[ot],Mr=yt.total>0?Math.round(yt.completed/yt.total*100):0;return{name:dt.format(Wr(ot)),value:Mr,dayKey:ot}}).sort((ot,yt)=>ot.dayKey.localeCompare(yt.dayKey)),Nt=Xe.length>0?Math.round(Xe.reduce((ot,yt)=>ot+(yt.value||0),0)/Xe.length):0,St=Xe.map(({name:ot,value:yt})=>({name:ot,value:yt})),Nr={conversionRate:z,estimatedSales:Z,estimatedProfit:0},mt={"0-18":0,"19-35":0,"36-50":0,"51-65":0,"65+":0,Unknown:0};F.forEach(ot=>{const yt=ot.age;yt==null?mt.Unknown++:yt<=18?mt["0-18"]++:yt<=35?mt["19-35"]++:yt<=50?mt["36-50"]++:yt<=65?mt["51-65"]++:mt["65+"]++});const Dt=Object.entries(mt).map(([ot,yt])=>({name:ot,value:yt})),yr={};T.forEach(ot=>{const yt=ot.status||"Unknown";yr[yt]=(yr[yt]||0)+1});const Gr=Object.entries(yr).map(([ot,yt])=>({name:ot.charAt(0).toUpperCase()+ot.slice(1),value:yt})),fr=z2({start:C,end:D}),Or={},cr=new Intl.DateTimeFormat("en",{weekday:"short"});fr.forEach(ot=>{Or[Mt(ot,"yyyy-MM-dd")]=0}),T.forEach(ot=>{if(ot.start_time){const yt=Wr(ot.start_time);if(x0(yt,{start:C,end:D})){const Mr=Mt(yt,"yyyy-MM-dd");Or.hasOwnProperty(Mr)&&Or[Mr]++}}});const Sn=Object.keys(Or).map(ot=>({name:cr.format(Wr(ot)),value:Or[ot],dayKey:ot})).sort((ot,yt)=>ot.dayKey.localeCompare(yt.dayKey)).map(({name:ot,value:yt})=>({name:ot,value:yt})),Nn=z2({start:b,end:P}),Pr={};Nn.forEach(ot=>{Pr[Mt(ot,"yyyy-MM-dd")]=0}),T.forEach(ot=>{if(ot.start_time&&ot.status==="scheduled"){const yt=Wr(ot.start_time);if(x0(yt,{start:b,end:P})){const Mr=Mt(yt,"yyyy-MM-dd");Pr.hasOwnProperty(Mr)&&Pr[Mr]++}}});const hs=Object.keys(Pr).map(ot=>({name:cr.format(Wr(ot)),value:Pr[ot],dayKey:ot})).sort((ot,yt)=>ot.dayKey.localeCompare(yt.dayKey)).map(({name:ot,value:yt})=>({name:ot,value:yt})),Gn={};L.forEach(ot=>{const yt=ot.status||"Unknown";Gn[yt]=(Gn[yt]||0)+1});const bi=Object.entries(Gn).map(([ot,yt])=>({name:ot.charAt(0).toUpperCase()+ot.slice(1),value:yt}));w({revenueData:Re,appointmentTypeData:pt,dailyAppointmentData:he,treatmentStatusData:St,profitEstimationData:Nr,totalRevenue:te,dailyVisitors:Ee,revenueChangePercentage:ke,dailyAppointmentsChangePercentage:Me,overallTreatmentProgress:Nt,patientAgeData:Dt,appointmentStatusData:Gr,treatmentPlanStatusData:bi,upcomingWeeklyAppointmentTrendData:hs}),h(!1)}catch(y){console.error("Error fetching dashboard data:",y),h(!1)}};return x("div",{className:"space-y-6",children:[l(Fa,{heading:"Dashboard",text:"Overview of your dental practice"}),x("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Today's Appointments"}),l(Oi,{className:"h-4 w-4 text-muted-foreground"})]}),x(hr,{children:[l("div",{className:"text-2xl font-bold",children:t.todaysAppointmentsCount}),t.appointmentsChange!==0&&x("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.appointmentsChange>0?l(n_,{className:"mr-1 h-4 w-4 text-emerald-500"}):l(r_,{className:"mr-1 h-4 w-4 text-red-500"}),x("span",{className:t.appointmentsChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.appointmentsChange),"%"]}),l("span",{className:"ml-1",children:"from last week"})]})]})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Active Patients"}),l(_4,{className:"h-4 w-4 text-muted-foreground"})]}),x(hr,{children:[l("div",{className:"text-2xl font-bold",children:t.totalPatients}),t.patientsChange!==0&&x("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.patientsChange>0?l(n_,{className:"mr-1 h-4 w-4 text-emerald-500"}):l(r_,{className:"mr-1 h-4 w-4 text-red-500"}),x("span",{className:t.patientsChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.patientsChange),"%"]}),l("span",{className:"ml-1",children:"from last month"})]})]})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Avg. Wait Time"}),l(Us,{className:"h-4 w-4 text-muted-foreground"})]}),x(hr,{children:[x("div",{className:"text-2xl font-bold",children:[t.avgWaitTime,"m"]}),t.waitTimeChange!==0&&x("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.waitTimeChange<0?l(r_,{className:"mr-1 h-4 w-4 text-emerald-500"}):l(n_,{className:"mr-1 h-4 w-4 text-red-500"}),x("span",{className:t.waitTimeChange<0?"text-emerald-500":"text-red-500",children:[Math.abs(t.waitTimeChange),"%"]}),l("span",{className:"ml-1",children:t.waitTimeChange<0?"improved":"worse"})]})]})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Treatment Success"}),l(U0,{className:"h-4 w-4 text-muted-foreground"})]}),x(hr,{children:[x("div",{className:"text-2xl font-bold",children:[t.treatmentSuccessRate,"%"]}),t.successRateChange!==0&&x("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.successRateChange>0?l(n_,{className:"mr-1 h-4 w-4 text-emerald-500"}):l(r_,{className:"mr-1 h-4 w-4 text-red-500"}),x("span",{className:t.successRateChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.successRateChange),"%"]}),l("span",{className:"ml-1",children:"from last quarter"})]})]})]})]}),x("div",{className:"grid gap-4 md:grid-cols-2",children:[x(or,{children:[l(xr,{children:x("div",{className:"flex items-center justify-between",children:[l(br,{children:"Upcoming Appointments"}),x(Fe,{variant:"ghost",size:"sm",className:"text-sm",onClick:()=>c(!0),children:["View all",l(sm,{className:"ml-1 h-4 w-4"})]})]})}),l(hr,{children:f?l("div",{className:"py-8 text-center text-muted-foreground",children:"Loading appointments..."}):n.length>0?l("div",{className:"space-y-4",children:n.map(y=>x("div",{className:"flex items-center rounded-lg border p-4",children:[l("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10",children:l(vi,{className:"h-5 w-5 text-primary"})}),x("div",{className:"ml-4 flex-1",children:[l("p",{className:"text-sm font-medium",children:y.patient}),l("p",{className:"text-sm text-muted-foreground",children:y.type})]}),x("div",{className:"text-right",children:[l("p",{className:"text-sm font-medium",children:y.date}),l("p",{className:"text-sm text-muted-foreground",children:y.time})]})]},y.id))}):l("div",{className:"py-8 text-center text-muted-foreground",children:"No upcoming appointments"})})]}),x(or,{children:[l(xr,{children:x("div",{className:"flex items-center justify-between",children:[l(br,{children:"Recent Activity"}),x(Fe,{variant:"ghost",size:"sm",className:"text-sm",onClick:()=>e("/activity-log"),children:["View all",l(sm,{className:"ml-1 h-4 w-4"})]})]})}),l(hr,{children:f?l("div",{className:"py-8 text-center text-muted-foreground",children:"Loading activity..."}):u.length>0?l("div",{className:"space-y-8",children:u.map((y,b)=>{const _=y.icon||U0;return x("div",{className:"flex items-start",children:[l("div",{className:`flex h-9 w-9 items-center justify-center rounded-full ${y.type==="appointment"?"bg-emerald-100":y.type==="treatment"?"bg-blue-100":"bg-purple-100"}`,children:l(_,{className:`h-5 w-5 ${y.type==="appointment"?"text-emerald-600":y.type==="treatment"?"text-blue-600":"text-purple-600"}`})}),x("div",{className:"ml-4 flex-1",children:[l("p",{className:"text-sm font-medium",children:y.title}),y.patientName&&x("p",{className:"text-xs text-muted-foreground",children:["Patient: ",y.patientName]}),y.itemName&&x("p",{className:"text-xs text-muted-foreground",children:["Item: ",y.itemName]}),y.staffName&&x("p",{className:"text-xs text-muted-foreground",children:["Staff: ",y.staffName]}),y.details&&l("p",{className:"text-xs text-muted-foreground italic",children:y.details}),l("p",{className:"text-xs text-muted-foreground mt-0.5",children:Mt(y.timestamp,"MMM d, h:mm a")})]})]},b)})}):l("div",{className:"py-8 text-center text-muted-foreground",children:"No recent activity"})})]})]}),x("div",{className:"mt-6",children:[" ",l(m8e,{revenueData:m.revenueData||[],appointmentTypeData:m.appointmentTypeData||[],dailyAppointmentData:m.dailyAppointmentData||[],treatmentStatusData:m.treatmentStatusData||[],profitEstimationData:m.profitEstimationData||{conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:m.totalRevenue,dailyVisitors:m.dailyVisitors,revenueChangePercentage:0,dailyAppointmentsChangePercentage:0,overallTreatmentProgress:m.overallTreatmentProgress,patientAgeData:m.patientAgeData||[],appointmentStatusData:m.appointmentStatusData||[],treatmentPlanStatusData:m.treatmentPlanStatusData||[],upcomingWeeklyAppointmentTrendData:m.upcomingWeeklyAppointmentTrendData||[]})]}),l(W8e,{isOpen:o,onClose:()=>c(!1),appointments:i})]})}var V8e="Label",Zee=S.forwardRef((e,t)=>l(vr.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Zee.displayName=V8e;var Qee=Zee;const H8e=Lw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tr=S.forwardRef(({className:e,...t},r)=>l(Qee,{ref:r,className:Lt(H8e(),e),...t}));tr.displayName=Qee.displayName;const on=S.forwardRef(({className:e,...t},r)=>l("textarea",{className:Lt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));on.displayName="Textarea";var jN="Tabs",[G8e,JZe]=es(jN,[vy]),ete=vy(),[Y8e,dR]=G8e(jN),tte=S.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:c="automatic",...u}=e,d=Sg(o),[f,h]=hl({prop:n,onChange:a,defaultProp:i??"",caller:jN});return l(Y8e,{scope:r,baseId:jl(),value:f,onValueChange:h,orientation:s,dir:d,activationMode:c,children:l(vr.div,{dir:d,"data-orientation":s,...u,ref:t})})});tte.displayName=jN;var rte="TabsList",nte=S.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=dR(rte,r),s=ete(r);return l(yD,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:n,children:l(vr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});nte.displayName=rte;var ate="TabsTrigger",ite=S.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,s=dR(ate,r),o=ete(r),c=lte(s.baseId,n),u=cte(s.baseId,n),d=n===s.value;return l(xD,{asChild:!0,...o,focusable:!a,active:d,children:l(vr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ht(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?s.onValueChange(n):f.preventDefault()}),onKeyDown:Ht(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(n)}),onFocus:Ht(e.onFocus,()=>{const f=s.activationMode!=="manual";!d&&!a&&f&&s.onValueChange(n)})})})});ite.displayName=ate;var ste="TabsContent",ote=S.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...s}=e,o=dR(ste,r),c=lte(o.baseId,n),u=cte(o.baseId,n),d=n===o.value,f=S.useRef(d);return S.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),l(uo,{present:a||d,children:({present:h})=>l(vr.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});ote.displayName=ste;function lte(e,t){return`${e}-trigger-${t}`}function cte(e,t){return`${e}-content-${t}`}var K8e=tte,ute=nte,dte=ite,fte=ote;const Lm=K8e,Rh=S.forwardRef(({className:e,...t},r)=>l(ute,{ref:r,className:Lt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Rh.displayName=ute.displayName;const Oa=S.forwardRef(({className:e,...t},r)=>l(dte,{ref:r,className:Lt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Oa.displayName=dte.displayName;const _a=S.forwardRef(({className:e,...t},r)=>l(fte,{ref:r,className:Lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));_a.displayName=fte.displayName;var[$N,ZZe]=es("Tooltip",[Cm]),BN=Cm(),hte="TooltipProvider",X8e=700,tO="tooltip.open",[J8e,fR]=$N(hte),pte=e=>{const{__scopeTooltip:t,delayDuration:r=X8e,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,s=S.useRef(!0),o=S.useRef(!1),c=S.useRef(0);return S.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l(J8e,{scope:t,isOpenDelayedRef:s,delayDuration:r,onOpen:S.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:S.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};pte.displayName=hte;var rw="Tooltip",[Z8e,UN]=$N(rw),mte=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,c=fR(rw,e.__scopeTooltip),u=BN(t),[d,f]=S.useState(null),h=jl(),m=S.useRef(0),w=s??c.disableHoverableContent,g=o??c.delayDuration,y=S.useRef(!1),[b,_]=hl({prop:n,defaultProp:a??!1,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(tO))):c.onClose(),i==null||i(P)},caller:rw}),N=S.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),E=S.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,_(!0)},[_]),C=S.useCallback(()=>{window.clearTimeout(m.current),m.current=0,_(!1)},[_]),D=S.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,_(!0),m.current=0},g)},[g,_]);return S.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),l(P4,{...u,children:l(Z8e,{scope:t,contentId:h,open:b,stateAttribute:N,trigger:d,onTriggerChange:f,onTriggerEnter:S.useCallback(()=>{c.isOpenDelayedRef.current?D():E()},[c.isOpenDelayedRef,D,E]),onTriggerLeave:S.useCallback(()=>{w?C():(window.clearTimeout(m.current),m.current=0)},[C,w]),onOpen:E,onClose:C,disableHoverableContent:w,children:r})})};mte.displayName=rw;var rO="TooltipTrigger",gte=S.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=UN(rO,r),i=fR(rO,r),s=BN(r),o=S.useRef(null),c=Kr(t,o,a.onTriggerChange),u=S.useRef(!1),d=S.useRef(!1),f=S.useCallback(()=>u.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l(Uw,{asChild:!0,...s,children:l(vr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Ht(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ht(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ht(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ht(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ht(e.onBlur,a.onClose),onClick:Ht(e.onClick,a.onClose)})})});gte.displayName=rO;var Q8e="TooltipPortal",[QZe,eOe]=$N(Q8e,{forceMount:void 0}),Y1="TooltipContent",vte=S.forwardRef((e,t)=>{const r=eOe(Y1,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,s=UN(Y1,e.__scopeTooltip);return l(uo,{present:n||s.open,children:s.disableHoverableContent?l(yte,{side:a,...i,ref:t}):l(tOe,{side:a,...i,ref:t})})}),tOe=S.forwardRef((e,t)=>{const r=UN(Y1,e.__scopeTooltip),n=fR(Y1,e.__scopeTooltip),a=S.useRef(null),i=Kr(t,a),[s,o]=S.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=S.useCallback(()=>{o(null),f(!1)},[f]),m=S.useCallback((w,g)=>{const y=w.currentTarget,b={x:w.clientX,y:w.clientY},_=sOe(b,y.getBoundingClientRect()),N=oOe(b,_),E=lOe(g.getBoundingClientRect()),C=uOe([...N,...E]);o(C),f(!0)},[f]);return S.useEffect(()=>()=>h(),[h]),S.useEffect(()=>{if(c&&d){const w=y=>m(y,d),g=y=>m(y,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[c,d,m,h]),S.useEffect(()=>{if(s){const w=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},_=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),N=!cOe(b,s);_?h():N&&(h(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,s,u,h]),l(yte,{...e,ref:i})}),[rOe,nOe]=$N(rw,{isInside:!1}),aOe=cG("TooltipContent"),yte=S.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,c=UN(Y1,r),u=BN(r),{onClose:d}=c;return S.useEffect(()=>(document.addEventListener(tO,d),()=>document.removeEventListener(tO,d)),[d]),S.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),l(Ng,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:x(T4,{"data-state":c.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l(aOe,{children:n}),l(rOe,{scope:r,isInside:!0,children:l(Z1e,{id:c.contentId,role:"tooltip",children:a||n})})]})})});vte.displayName=Y1;var xte="TooltipArrow",iOe=S.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=BN(r);return nOe(xte,r).isInside?null:l(O4,{...a,...n,ref:t})});iOe.displayName=xte;function sOe(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function oOe(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function lOe(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function cOe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],c=t[s],u=o.x,d=o.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function uOe(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),dOe(t)}function dOe(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],s=r[r.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var fOe=pte,hOe=mte,pOe=gte,wte=vte;const i5=fOe,s5=hOe,o5=pOe,X2=S.forwardRef(({className:e,sideOffset:t=4,...r},n)=>l(wte,{ref:n,sideOffset:t,className:Lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));X2.displayName=wte.displayName;var nb=e=>e.type==="checkbox",$0=e=>e instanceof Date,il=e=>e==null;const bte=e=>typeof e=="object";var Zi=e=>!il(e)&&!Array.isArray(e)&&bte(e)&&!$0(e),_te=e=>Zi(e)&&e.target?nb(e.target)?e.target.checked:e.target.value:e,mOe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Ste=(e,t)=>e.has(mOe(t)),gOe=e=>{const t=e.constructor&&e.constructor.prototype;return Zi(t)&&t.hasOwnProperty("isPrototypeOf")},hR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function pi(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(hR&&(e instanceof Blob||n))&&(r||Zi(e)))if(t=r?[]:{},!r&&!gOe(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=pi(e[a]));else return e;return t}var ab=e=>Array.isArray(e)?e.filter(Boolean):[],Qa=e=>e===void 0,ar=(e,t,r)=>{if(!t||!Zi(e))return r;const n=ab(t.split(/[,[\].]+?/)).reduce((a,i)=>il(a)?a:a[i],e);return Qa(n)||n===e?Qa(e[t])?r:e[t]:n},oc=e=>typeof e=="boolean",pR=e=>/^\w*$/.test(e),Nte=e=>ab(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ia=(e,t,r)=>{let n=-1;const a=pR(t)?[t]:Nte(t),i=a.length,s=i-1;for(;++n<i;){const o=a[n];let c=r;if(n!==s){const u=e[o];c=Zi(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const DS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},eh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ate=Qe.createContext(null),ou=()=>Qe.useContext(Ate),kte=e=>{const{children:t,...r}=e;return l(Ate.Provider,{value:r,children:t})};var Ete=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const s=i;return t._proxyFormState[s]!==Zc.all&&(t._proxyFormState[s]=!n||Zc.all),r&&(r[s]=!0),e[s]}});return a},nO=e=>il(e)||!bte(e);function oh(e,t){if(nO(e)||nO(t))return e===t;if($0(e)&&$0(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const s=t[a];if($0(i)&&$0(s)||Zi(i)&&Zi(s)||Array.isArray(i)&&Array.isArray(s)?!oh(i,s):i!==s)return!1}}return!0}const Cte=(e,t)=>{const r=S.useRef(t);oh(t,r.current)||(r.current=t),S.useEffect(e,r.current)};function vOe(e){const t=ou(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[s,o]=Qe.useState(r._formState),c=Qe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Cte(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&o({...r._formState,...u})}}),[a,n,i]),Qe.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),Qe.useMemo(()=>Ete(s,r,c.current,!1),[s,r])}var Kd=e=>typeof e=="string",Pte=(e,t,r,n,a)=>Kd(e)?(n&&t.watch.add(e),ar(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ar(r,i))):(n&&(t.watchAll=!0),r);function yOe(e){const t=ou(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:s}=e||{},[o,c]=Qe.useState(r._getWatch(n,a));return Cte(()=>r._subscribe({name:n,formState:{values:!0},exact:s,callback:u=>!i&&c(Pte(n,r._names,u.values||r._formValues,!1,a))}),[n,a,i,s]),Qe.useEffect(()=>r._removeUnmounted()),o}function xOe(e){const t=ou(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,s=Ste(a._names.array,r),o=yOe({control:a,name:r,defaultValue:ar(a._formValues,r,ar(a._defaultValues,r,e.defaultValue)),exact:!0}),c=vOe({control:a,name:r,exact:!0}),u=Qe.useRef(e),d=Qe.useRef(a.register(r,{...e.rules,value:o,...oc(e.disabled)?{disabled:e.disabled}:{}})),f=Qe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ar(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!ar(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ar(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ar(c.validatingFields,r)},error:{enumerable:!0,get:()=>ar(c.errors,r)}}),[c,r]),h=Qe.useCallback(y=>d.current.onChange({target:{value:_te(y),name:r},type:DS.CHANGE}),[r]),m=Qe.useCallback(()=>d.current.onBlur({target:{value:ar(a._formValues,r),name:r},type:DS.BLUR}),[r,a._formValues]),w=Qe.useCallback(y=>{const b=ar(a._fields,r);b&&y&&(b._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:_=>y.setCustomValidity(_),reportValidity:()=>y.reportValidity()})},[a._fields,r]),g=Qe.useMemo(()=>({name:r,value:o,...oc(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:h,onBlur:m,ref:w}),[r,n,c.disabled,h,m,w,o]);return Qe.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(r,{...u.current.rules,...oc(u.current.disabled)?{disabled:u.current.disabled}:{}});const b=(_,N)=>{const E=ar(a._fields,_);E&&E._f&&(E._f.mount=N)};if(b(r,!0),y){const _=pi(ar(a._options.defaultValues,r));ia(a._defaultValues,r,_),Qa(ar(a._formValues,r))&&ia(a._formValues,r,_)}return!s&&a.register(r),()=>{(s?y&&!a._state.action:y)?a.unregister(r):b(r,!1)}},[r,a,s,i]),Qe.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),Qe.useMemo(()=>({field:g,formState:c,fieldState:f}),[g,c,f])}const zp=e=>e.render(xOe(e));var Tte=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Fl=e=>Array.isArray(e)?e:[e],NW=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},To=e=>Zi(e)&&!Object.keys(e).length,mR=e=>e.type==="file",qu=e=>typeof e=="function",IS=e=>{if(!hR)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ote=e=>e.type==="select-multiple",gR=e=>e.type==="radio",wOe=e=>gR(e)||nb(e),jP=e=>IS(e)&&e.isConnected;function bOe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Qa(e)?n++:e[t[n++]];return e}function _Oe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Qa(e[t]))return!1;return!0}function is(e,t){const r=Array.isArray(t)?t:pR(t)?[t]:Nte(t),n=r.length===1?e:bOe(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Zi(n)&&To(n)||Array.isArray(n)&&_Oe(n))&&is(e,r.slice(0,-1)),e}var Dte=e=>{for(const t in e)if(qu(e[t]))return!0;return!1};function RS(e,t={}){const r=Array.isArray(e);if(Zi(e)||r)for(const n in e)Array.isArray(e[n])||Zi(e[n])&&!Dte(e[n])?(t[n]=Array.isArray(e[n])?[]:{},RS(e[n],t[n])):il(e[n])||(t[n]=!0);return t}function Ite(e,t,r){const n=Array.isArray(e);if(Zi(e)||n)for(const a in e)Array.isArray(e[a])||Zi(e[a])&&!Dte(e[a])?Qa(t)||nO(r[a])?r[a]=Array.isArray(e[a])?RS(e[a],[]):{...RS(e[a])}:Ite(e[a],il(t)?{}:t[a],r[a]):r[a]=!oh(e[a],t[a]);return r}var v2=(e,t)=>Ite(e,t,RS(t));const AW={value:!1,isValid:!1},kW={value:!0,isValid:!0};var Rte=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Qa(e[0].attributes.value)?Qa(e[0].value)||e[0].value===""?kW:{value:e[0].value,isValid:!0}:kW:AW}return AW},Mte=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Qa(e)?e:t?e===""?NaN:e&&+e:r&&Kd(e)?new Date(e):n?n(e):e;const EW={isValid:!1,value:null};var Fte=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,EW):EW;function CW(e){const t=e.ref;return mR(t)?t.files:gR(t)?Fte(e.refs).value:Ote(t)?[...t.selectedOptions].map(({value:r})=>r):nb(t)?Rte(e.refs).value:Mte(Qa(t.value)?e.ref.value:t.value,e)}var SOe=(e,t,r,n)=>{const a={};for(const i of e){const s=ar(t,i);s&&ia(a,i,s._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},MS=e=>e instanceof RegExp,y2=e=>Qa(e)?e:MS(e)?e.source:Zi(e)?MS(e.value)?e.value.source:e.value:e,Vv=e=>({isOnSubmit:!e||e===Zc.onSubmit,isOnBlur:e===Zc.onBlur,isOnChange:e===Zc.onChange,isOnAll:e===Zc.all,isOnTouch:e===Zc.onTouched});const PW="AsyncFunction";var NOe=e=>!!e&&!!e.validate&&!!(qu(e.validate)&&e.validate.constructor.name===PW||Zi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===PW)),AOe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),aO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const n1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=ar(e,a);if(i){const{_f:s,...o}=i;if(s){if(s.refs&&s.refs[0]&&t(s.refs[0],a)&&!n)return!0;if(s.ref&&t(s.ref,s.name)&&!n)return!0;if(n1(o,t))break}else if(Zi(o)&&n1(o,t))break}}};function TW(e,t,r){const n=ar(e,r);if(n||pR(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),s=ar(t,i),o=ar(e,i);if(s&&!Array.isArray(s)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};a.pop()}return{name:r}}var kOe=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return To(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(s=>t[s]===(!n||Zc.all))},EOe=(e,t,r)=>!e||!t||e===t||Fl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),COe=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,POe=(e,t)=>!ab(ar(e,t)).length&&is(e,t),Lte=(e,t,r)=>{const n=Fl(ar(e,r));return ia(n,"root",t[r]),ia(e,r,n),e},l5=e=>Kd(e);function OW(e,t,r="validate"){if(l5(e)||Array.isArray(e)&&e.every(l5)||oc(e)&&!e)return{type:r,message:l5(e)?e:"",ref:t}}var Ov=e=>Zi(e)&&!MS(e)?e:{value:e,message:""},iO=async(e,t,r,n,a,i)=>{const{ref:s,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:w,name:g,valueAsNumber:y,mount:b}=e._f,_=ar(r,g);if(!b||t.has(g))return{};const N=o?o[0]:s,E=R=>{a&&N.reportValidity&&(N.setCustomValidity(oc(R)?"":R||""),N.reportValidity())},C={},D=gR(s),P=nb(s),F=D||P,L=(y||mR(s))&&Qa(s.value)&&Qa(_)||IS(s)&&s.value===""||_===""||Array.isArray(_)&&!_.length,W=Tte.bind(null,g,n,C),T=(R,j,Y,Z=eh.maxLength,re=eh.minLength)=>{const z=R?j:Y;C[g]={type:R?Z:re,message:z,ref:s,...W(R?Z:re,z)}};if(i?!Array.isArray(_)||!_.length:c&&(!F&&(L||il(_))||oc(_)&&!_||P&&!Rte(o).isValid||D&&!Fte(o).isValid)){const{value:R,message:j}=l5(c)?{value:!!c,message:c}:Ov(c);if(R&&(C[g]={type:eh.required,message:j,ref:N,...W(eh.required,j)},!n))return E(j),C}if(!L&&(!il(f)||!il(h))){let R,j;const Y=Ov(h),Z=Ov(f);if(!il(_)&&!isNaN(_)){const re=s.valueAsNumber||_&&+_;il(Y.value)||(R=re>Y.value),il(Z.value)||(j=re<Z.value)}else{const re=s.valueAsDate||new Date(_),z=G=>new Date(new Date().toDateString()+" "+G),q=s.type=="time",B=s.type=="week";Kd(Y.value)&&_&&(R=q?z(_)>z(Y.value):B?_>Y.value:re>new Date(Y.value)),Kd(Z.value)&&_&&(j=q?z(_)<z(Z.value):B?_<Z.value:re<new Date(Z.value))}if((R||j)&&(T(!!R,Y.message,Z.message,eh.max,eh.min),!n))return E(C[g].message),C}if((u||d)&&!L&&(Kd(_)||i&&Array.isArray(_))){const R=Ov(u),j=Ov(d),Y=!il(R.value)&&_.length>+R.value,Z=!il(j.value)&&_.length<+j.value;if((Y||Z)&&(T(Y,R.message,j.message),!n))return E(C[g].message),C}if(m&&!L&&Kd(_)){const{value:R,message:j}=Ov(m);if(MS(R)&&!_.match(R)&&(C[g]={type:eh.pattern,message:j,ref:s,...W(eh.pattern,j)},!n))return E(j),C}if(w){if(qu(w)){const R=await w(_,r),j=OW(R,N);if(j&&(C[g]={...j,...W(eh.validate,j.message)},!n))return E(j.message),C}else if(Zi(w)){let R={};for(const j in w){if(!To(R)&&!n)break;const Y=OW(await w[j](_,r),N,j);Y&&(R={...Y,...W(j,Y.message)},E(Y.message),n&&(C[g]=R))}if(!To(R)&&(C[g]={ref:N,...R},!n))return C}}return E(!0),C};const TOe={mode:Zc.onSubmit,reValidateMode:Zc.onChange,shouldFocusError:!0};function OOe(e={}){let t={...TOe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:qu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let a=Zi(t.defaultValues)||Zi(t.values)?pi(t.values||t.defaultValues)||{}:{},i=t.shouldUnregister?{}:pi(a),s={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:NW(),state:NW()},m=Vv(t.mode),w=Vv(t.reValidateMode),g=t.criteriaMode===Zc.all,y=he=>Ee=>{clearTimeout(u),u=setTimeout(he,Ee)},b=async he=>{if(!t.disabled&&(d.isValid||f.isValid||he)){const Ee=t.resolver?To((await L()).errors):await T(n,!0);Ee!==r.isValid&&h.state.next({isValid:Ee})}},_=(he,Ee)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((he||Array.from(o.mount)).forEach(Me=>{Me&&(Ee?ia(r.validatingFields,Me,Ee):is(r.validatingFields,Me))}),h.state.next({validatingFields:r.validatingFields,isValidating:!To(r.validatingFields)}))},N=(he,Ee=[],Me,at,ct=!0,dt=!0)=>{if(at&&Me&&!t.disabled){if(s.action=!0,dt&&Array.isArray(ar(n,he))){const Xe=Me(ar(n,he),at.argA,at.argB);ct&&ia(n,he,Xe)}if(dt&&Array.isArray(ar(r.errors,he))){const Xe=Me(ar(r.errors,he),at.argA,at.argB);ct&&ia(r.errors,he,Xe),POe(r.errors,he)}if((d.touchedFields||f.touchedFields)&&dt&&Array.isArray(ar(r.touchedFields,he))){const Xe=Me(ar(r.touchedFields,he),at.argA,at.argB);ct&&ia(r.touchedFields,he,Xe)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=v2(a,i)),h.state.next({name:he,isDirty:j(he,Ee),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ia(i,he,Ee)},E=(he,Ee)=>{ia(r.errors,he,Ee),h.state.next({errors:r.errors})},C=he=>{r.errors=he,h.state.next({errors:r.errors,isValid:!1})},D=(he,Ee,Me,at)=>{const ct=ar(n,he);if(ct){const dt=ar(i,he,Qa(Me)?ar(a,he):Me);Qa(dt)||at&&at.defaultChecked||Ee?ia(i,he,Ee?dt:CW(ct._f)):re(he,dt),s.mount&&b()}},P=(he,Ee,Me,at,ct)=>{let dt=!1,Xe=!1;const Nt={name:he};if(!t.disabled){if(!Me||at){(d.isDirty||f.isDirty)&&(Xe=r.isDirty,r.isDirty=Nt.isDirty=j(),dt=Xe!==Nt.isDirty);const St=oh(ar(a,he),Ee);Xe=!!ar(r.dirtyFields,he),St?is(r.dirtyFields,he):ia(r.dirtyFields,he,!0),Nt.dirtyFields=r.dirtyFields,dt=dt||(d.dirtyFields||f.dirtyFields)&&Xe!==!St}if(Me){const St=ar(r.touchedFields,he);St||(ia(r.touchedFields,he,Me),Nt.touchedFields=r.touchedFields,dt=dt||(d.touchedFields||f.touchedFields)&&St!==Me)}dt&&ct&&h.state.next(Nt)}return dt?Nt:{}},F=(he,Ee,Me,at)=>{const ct=ar(r.errors,he),dt=(d.isValid||f.isValid)&&oc(Ee)&&r.isValid!==Ee;if(t.delayError&&Me?(c=y(()=>E(he,Me)),c(t.delayError)):(clearTimeout(u),c=null,Me?ia(r.errors,he,Me):is(r.errors,he)),(Me?!oh(ct,Me):ct)||!To(at)||dt){const Xe={...at,...dt&&oc(Ee)?{isValid:Ee}:{},errors:r.errors,name:he};r={...r,...Xe},h.state.next(Xe)}},L=async he=>{_(he,!0);const Ee=await t.resolver(i,t.context,SOe(he||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return _(he),Ee},W=async he=>{const{errors:Ee}=await L(he);if(he)for(const Me of he){const at=ar(Ee,Me);at?ia(r.errors,Me,at):is(r.errors,Me)}else r.errors=Ee;return Ee},T=async(he,Ee,Me={valid:!0})=>{for(const at in he){const ct=he[at];if(ct){const{_f:dt,...Xe}=ct;if(dt){const Nt=o.array.has(dt.name),St=ct._f&&NOe(ct._f);St&&d.validatingFields&&_([at],!0);const At=await iO(ct,o.disabled,i,g,t.shouldUseNativeValidation&&!Ee,Nt);if(St&&d.validatingFields&&_([at]),At[dt.name]&&(Me.valid=!1,Ee))break;!Ee&&(ar(At,dt.name)?Nt?Lte(r.errors,At,dt.name):ia(r.errors,dt.name,At[dt.name]):is(r.errors,dt.name))}!To(Xe)&&await T(Xe,Ee,Me)}}return Me.valid},R=()=>{for(const he of o.unMount){const Ee=ar(n,he);Ee&&(Ee._f.refs?Ee._f.refs.every(Me=>!jP(Me)):!jP(Ee._f.ref))&&V(he)}o.unMount=new Set},j=(he,Ee)=>!t.disabled&&(he&&Ee&&ia(i,he,Ee),!oh(O(),a)),Y=(he,Ee,Me)=>Pte(he,o,{...s.mount?i:Qa(Ee)?a:Kd(he)?{[he]:Ee}:Ee},Me,Ee),Z=he=>ab(ar(s.mount?i:a,he,t.shouldUnregister?ar(a,he,[]):[])),re=(he,Ee,Me={})=>{const at=ar(n,he);let ct=Ee;if(at){const dt=at._f;dt&&(!dt.disabled&&ia(i,he,Mte(Ee,dt)),ct=IS(dt.ref)&&il(Ee)?"":Ee,Ote(dt.ref)?[...dt.ref.options].forEach(Xe=>Xe.selected=ct.includes(Xe.value)):dt.refs?nb(dt.ref)?dt.refs.length>1?dt.refs.forEach(Xe=>(!Xe.defaultChecked||!Xe.disabled)&&(Xe.checked=Array.isArray(ct)?!!ct.find(Nt=>Nt===Xe.value):ct===Xe.value)):dt.refs[0]&&(dt.refs[0].checked=!!ct):dt.refs.forEach(Xe=>Xe.checked=Xe.value===ct):mR(dt.ref)?dt.ref.value="":(dt.ref.value=ct,dt.ref.type||h.state.next({name:he,values:pi(i)})))}(Me.shouldDirty||Me.shouldTouch)&&P(he,ct,Me.shouldTouch,Me.shouldDirty,!0),Me.shouldValidate&&Q(he)},z=(he,Ee,Me)=>{for(const at in Ee){const ct=Ee[at],dt=`${he}.${at}`,Xe=ar(n,dt);(o.array.has(he)||Zi(ct)||Xe&&!Xe._f)&&!$0(ct)?z(dt,ct,Me):re(dt,ct,Me)}},q=(he,Ee,Me={})=>{const at=ar(n,he),ct=o.array.has(he),dt=pi(Ee);ia(i,he,dt),ct?(h.array.next({name:he,values:pi(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Me.shouldDirty&&h.state.next({name:he,dirtyFields:v2(a,i),isDirty:j(he,dt)})):at&&!at._f&&!il(dt)?z(he,dt,Me):re(he,dt,Me),aO(he,o)&&h.state.next({...r}),h.state.next({name:s.mount?he:void 0,values:pi(i)})},B=async he=>{s.mount=!0;const Ee=he.target;let Me=Ee.name,at=!0;const ct=ar(n,Me),dt=Xe=>{at=Number.isNaN(Xe)||$0(Xe)&&isNaN(Xe.getTime())||oh(Xe,ar(i,Me,Xe))};if(ct){let Xe,Nt;const St=Ee.type?CW(ct._f):_te(he),At=he.type===DS.BLUR||he.type===DS.FOCUS_OUT,dn=!AOe(ct._f)&&!t.resolver&&!ar(r.errors,Me)&&!ct._f.deps||COe(At,ar(r.touchedFields,Me),r.isSubmitted,w,m),Nr=aO(Me,o,At);ia(i,Me,St),At?(ct._f.onBlur&&ct._f.onBlur(he),c&&c(0)):ct._f.onChange&&ct._f.onChange(he);const mt=P(Me,St,At),Dt=!To(mt)||Nr;if(!At&&h.state.next({name:Me,type:he.type,values:pi(i)}),dn)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?At&&b():At||b()),Dt&&h.state.next({name:Me,...Nr?{}:mt});if(!At&&Nr&&h.state.next({...r}),t.resolver){const{errors:yr}=await L([Me]);if(dt(St),at){const Gr=TW(r.errors,n,Me),fr=TW(yr,n,Gr.name||Me);Xe=fr.error,Me=fr.name,Nt=To(yr)}}else _([Me],!0),Xe=(await iO(ct,o.disabled,i,g,t.shouldUseNativeValidation))[Me],_([Me]),dt(St),at&&(Xe?Nt=!1:(d.isValid||f.isValid)&&(Nt=await T(n,!0)));at&&(ct._f.deps&&Q(ct._f.deps),F(Me,Nt,Xe,mt))}},G=(he,Ee)=>{if(ar(r.errors,Ee)&&he.focus)return he.focus(),1},Q=async(he,Ee={})=>{let Me,at;const ct=Fl(he);if(t.resolver){const dt=await W(Qa(he)?he:ct);Me=To(dt),at=he?!ct.some(Xe=>ar(dt,Xe)):Me}else he?(at=(await Promise.all(ct.map(async dt=>{const Xe=ar(n,dt);return await T(Xe&&Xe._f?{[dt]:Xe}:Xe)}))).every(Boolean),!(!at&&!r.isValid)&&b()):at=Me=await T(n);return h.state.next({...!Kd(he)||(d.isValid||f.isValid)&&Me!==r.isValid?{}:{name:he},...t.resolver||!he?{isValid:Me}:{},errors:r.errors}),Ee.shouldFocus&&!at&&n1(n,G,he?ct:o.mount),at},O=he=>{const Ee={...s.mount?i:a};return Qa(he)?Ee:Kd(he)?ar(Ee,he):he.map(Me=>ar(Ee,Me))},J=(he,Ee)=>({invalid:!!ar((Ee||r).errors,he),isDirty:!!ar((Ee||r).dirtyFields,he),error:ar((Ee||r).errors,he),isValidating:!!ar(r.validatingFields,he),isTouched:!!ar((Ee||r).touchedFields,he)}),X=he=>{he&&Fl(he).forEach(Ee=>is(r.errors,Ee)),h.state.next({errors:he?r.errors:{}})},ne=(he,Ee,Me)=>{const at=(ar(n,he,{_f:{}})._f||{}).ref,ct=ar(r.errors,he)||{},{ref:dt,message:Xe,type:Nt,...St}=ct;ia(r.errors,he,{...St,...Ee,ref:at}),h.state.next({name:he,errors:r.errors,isValid:!1}),Me&&Me.shouldFocus&&at&&at.focus&&at.focus()},ie=(he,Ee)=>qu(he)?h.state.subscribe({next:Me=>he(Y(void 0,Ee),Me)}):Y(he,Ee,!0),oe=he=>h.state.subscribe({next:Ee=>{EOe(he.name,Ee.name,he.exact)&&kOe(Ee,he.formState||d,it,he.reRenderRoot)&&he.callback({values:{...i},...r,...Ee})}}).unsubscribe,de=he=>(s.mount=!0,f={...f,...he.formState},oe({...he,formState:f})),V=(he,Ee={})=>{for(const Me of he?Fl(he):o.mount)o.mount.delete(Me),o.array.delete(Me),Ee.keepValue||(is(n,Me),is(i,Me)),!Ee.keepError&&is(r.errors,Me),!Ee.keepDirty&&is(r.dirtyFields,Me),!Ee.keepTouched&&is(r.touchedFields,Me),!Ee.keepIsValidating&&is(r.validatingFields,Me),!t.shouldUnregister&&!Ee.keepDefaultValue&&is(a,Me);h.state.next({values:pi(i)}),h.state.next({...r,...Ee.keepDirty?{isDirty:j()}:{}}),!Ee.keepIsValid&&b()},se=({disabled:he,name:Ee})=>{(oc(he)&&s.mount||he||o.disabled.has(Ee))&&(he?o.disabled.add(Ee):o.disabled.delete(Ee))},fe=(he,Ee={})=>{let Me=ar(n,he);const at=oc(Ee.disabled)||oc(t.disabled);return ia(n,he,{...Me||{},_f:{...Me&&Me._f?Me._f:{ref:{name:he}},name:he,mount:!0,...Ee}}),o.mount.add(he),Me?se({disabled:oc(Ee.disabled)?Ee.disabled:t.disabled,name:he}):D(he,!0,Ee.value),{...at?{disabled:Ee.disabled||t.disabled}:{},...t.progressive?{required:!!Ee.required,min:y2(Ee.min),max:y2(Ee.max),minLength:y2(Ee.minLength),maxLength:y2(Ee.maxLength),pattern:y2(Ee.pattern)}:{},name:he,onChange:B,onBlur:B,ref:ct=>{if(ct){fe(he,Ee),Me=ar(n,he);const dt=Qa(ct.value)&&ct.querySelectorAll&&ct.querySelectorAll("input,select,textarea")[0]||ct,Xe=wOe(dt),Nt=Me._f.refs||[];if(Xe?Nt.find(St=>St===dt):dt===Me._f.ref)return;ia(n,he,{_f:{...Me._f,...Xe?{refs:[...Nt.filter(jP),dt,...Array.isArray(ar(a,he))?[{}]:[]],ref:{type:dt.type,name:he}}:{ref:dt}}}),D(he,!1,void 0,dt)}else Me=ar(n,he,{}),Me._f&&(Me._f.mount=!1),(t.shouldUnregister||Ee.shouldUnregister)&&!(Ste(o.array,he)&&s.action)&&o.unMount.add(he)}}},te=()=>t.shouldFocusError&&n1(n,G,o.mount),ke=he=>{oc(he)&&(h.state.next({disabled:he}),n1(n,(Ee,Me)=>{const at=ar(n,Me);at&&(Ee.disabled=at._f.disabled||he,Array.isArray(at._f.refs)&&at._f.refs.forEach(ct=>{ct.disabled=at._f.disabled||he}))},0,!1))},Re=(he,Ee)=>async Me=>{let at;Me&&(Me.preventDefault&&Me.preventDefault(),Me.persist&&Me.persist());let ct=pi(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:dt,values:Xe}=await L();r.errors=dt,ct=Xe}else await T(n);if(o.disabled.size)for(const dt of o.disabled)ia(ct,dt,void 0);if(is(r.errors,"root"),To(r.errors)){h.state.next({errors:{}});try{await he(ct,Me)}catch(dt){at=dt}}else Ee&&await Ee({...r.errors},Me),te(),setTimeout(te);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:To(r.errors)&&!at,submitCount:r.submitCount+1,errors:r.errors}),at)throw at},Ce=(he,Ee={})=>{ar(n,he)&&(Qa(Ee.defaultValue)?q(he,pi(ar(a,he))):(q(he,Ee.defaultValue),ia(a,he,pi(Ee.defaultValue))),Ee.keepTouched||is(r.touchedFields,he),Ee.keepDirty||(is(r.dirtyFields,he),r.isDirty=Ee.defaultValue?j(he,pi(ar(a,he))):j()),Ee.keepError||(is(r.errors,he),d.isValid&&b()),h.state.next({...r}))},ve=(he,Ee={})=>{const Me=he?pi(he):a,at=pi(Me),ct=To(he),dt=ct?a:at;if(Ee.keepDefaultValues||(a=Me),!Ee.keepValues){if(Ee.keepDirtyValues){const Xe=new Set([...o.mount,...Object.keys(v2(a,i))]);for(const Nt of Array.from(Xe))ar(r.dirtyFields,Nt)?ia(dt,Nt,ar(i,Nt)):q(Nt,ar(dt,Nt))}else{if(hR&&Qa(he))for(const Xe of o.mount){const Nt=ar(n,Xe);if(Nt&&Nt._f){const St=Array.isArray(Nt._f.refs)?Nt._f.refs[0]:Nt._f.ref;if(IS(St)){const At=St.closest("form");if(At){At.reset();break}}}}for(const Xe of o.mount)q(Xe,ar(dt,Xe))}i=pi(dt),h.array.next({values:{...dt}}),h.state.next({values:{...dt}})}o={mount:Ee.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!d.isValid||!!Ee.keepIsValid||!!Ee.keepDirtyValues,s.watch=!!t.shouldUnregister,h.state.next({submitCount:Ee.keepSubmitCount?r.submitCount:0,isDirty:ct?!1:Ee.keepDirty?r.isDirty:!!(Ee.keepDefaultValues&&!oh(he,a)),isSubmitted:Ee.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ct?{}:Ee.keepDirtyValues?Ee.keepDefaultValues&&i?v2(a,i):r.dirtyFields:Ee.keepDefaultValues&&he?v2(a,he):Ee.keepDirty?r.dirtyFields:{},touchedFields:Ee.keepTouched?r.touchedFields:{},errors:Ee.keepErrors?r.errors:{},isSubmitSuccessful:Ee.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ge=(he,Ee)=>ve(qu(he)?he(i):he,Ee),pt=(he,Ee={})=>{const Me=ar(n,he),at=Me&&Me._f;if(at){const ct=at.refs?at.refs[0]:at.ref;ct.focus&&(ct.focus(),Ee.shouldSelect&&qu(ct.select)&&ct.select())}},it=he=>{r={...r,...he}},ut={control:{register:fe,unregister:V,getFieldState:J,handleSubmit:Re,setError:ne,_subscribe:oe,_runSchema:L,_getWatch:Y,_getDirty:j,_setValid:b,_setFieldArray:N,_setDisabledField:se,_setErrors:C,_getFieldArray:Z,_reset:ve,_resetDefaultValues:()=>qu(t.defaultValues)&&t.defaultValues().then(he=>{Ge(he,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return s},set _state(he){s=he},get _defaultValues(){return a},get _names(){return o},set _names(he){o=he},get _formState(){return r},get _options(){return t},set _options(he){t={...t,...he}}},subscribe:de,trigger:Q,register:fe,handleSubmit:Re,watch:ie,setValue:q,getValues:O,reset:Ge,resetField:Ce,clearErrors:X,unregister:V,setError:ne,setFocus:pt,getFieldState:J};return{...ut,formControl:ut}}var Dp=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},$P=(e,t,r={})=>r.shouldFocus||Qa(r.shouldFocus)?r.focusName||`${e}.${Qa(r.focusIndex)?t:r.focusIndex}.`:"",BP=(e,t)=>[...e,...Fl(t)],UP=e=>Array.isArray(e)?e.map(()=>{}):void 0;function qP(e,t,r){return[...e.slice(0,t),...Fl(r),...e.slice(t)]}var WP=(e,t,r)=>Array.isArray(e)?(Qa(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],zP=(e,t)=>[...Fl(t),...Fl(e)];function DOe(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return ab(n).length?n:[]}var VP=(e,t)=>Qa(t)?[]:DOe(e,Fl(t).sort((r,n)=>r-n)),HP=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},DW=(e,t,r)=>(e[t]=r,e);function FS(e){const t=ou(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:i,rules:s}=e,[o,c]=Qe.useState(r._getFieldArray(n)),u=Qe.useRef(r._getFieldArray(n).map(Dp)),d=Qe.useRef(o),f=Qe.useRef(n),h=Qe.useRef(!1);f.current=n,d.current=o,r._names.array.add(n),s&&r.register(n,s),Qe.useEffect(()=>r._subjects.array.subscribe({next:({values:D,name:P})=>{if(P===f.current||!P){const F=ar(D,f.current);Array.isArray(F)&&(c(F),u.current=F.map(Dp))}}}).unsubscribe,[r]);const m=Qe.useCallback(D=>{h.current=!0,r._setFieldArray(n,D)},[r,n]),w=(D,P)=>{const F=Fl(pi(D)),L=BP(r._getFieldArray(n),F);r._names.focus=$P(n,L.length-1,P),u.current=BP(u.current,F.map(Dp)),m(L),c(L),r._setFieldArray(n,L,BP,{argA:UP(D)})},g=(D,P)=>{const F=Fl(pi(D)),L=zP(r._getFieldArray(n),F);r._names.focus=$P(n,0,P),u.current=zP(u.current,F.map(Dp)),m(L),c(L),r._setFieldArray(n,L,zP,{argA:UP(D)})},y=D=>{const P=VP(r._getFieldArray(n),D);u.current=VP(u.current,D),m(P),c(P),!Array.isArray(ar(r._fields,n))&&ia(r._fields,n,void 0),r._setFieldArray(n,P,VP,{argA:D})},b=(D,P,F)=>{const L=Fl(pi(P)),W=qP(r._getFieldArray(n),D,L);r._names.focus=$P(n,D,F),u.current=qP(u.current,D,L.map(Dp)),m(W),c(W),r._setFieldArray(n,W,qP,{argA:D,argB:UP(P)})},_=(D,P)=>{const F=r._getFieldArray(n);HP(F,D,P),HP(u.current,D,P),m(F),c(F),r._setFieldArray(n,F,HP,{argA:D,argB:P},!1)},N=(D,P)=>{const F=r._getFieldArray(n);WP(F,D,P),WP(u.current,D,P),m(F),c(F),r._setFieldArray(n,F,WP,{argA:D,argB:P},!1)},E=(D,P)=>{const F=pi(P),L=DW(r._getFieldArray(n),D,F);u.current=[...L].map((W,T)=>!W||T===D?Dp():u.current[T]),m(L),c([...L]),r._setFieldArray(n,L,DW,{argA:D,argB:F},!0,!1)},C=D=>{const P=Fl(pi(D));u.current=P.map(Dp),m([...P]),c([...P]),r._setFieldArray(n,[...P],F=>F,{},!0,!1)};return Qe.useEffect(()=>{if(r._state.action=!1,aO(n,r._names)&&r._subjects.state.next({...r._formState}),h.current&&(!Vv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Vv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(D=>{const P=ar(D.errors,n),F=ar(r._formState.errors,n);(F?!P&&F.type||P&&(F.type!==P.type||F.message!==P.message):P&&P.type)&&(P?ia(r._formState.errors,n,P):is(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const D=ar(r._fields,n);D&&D._f&&!(Vv(r._options.reValidateMode).isOnSubmit&&Vv(r._options.mode).isOnSubmit)&&iO(D,r._names.disabled,r._formValues,r._options.criteriaMode===Zc.all,r._options.shouldUseNativeValidation,!0).then(P=>!To(P)&&r._subjects.state.next({errors:Lte(r._formState.errors,P,n)}))}r._subjects.state.next({name:n,values:pi(r._formValues)}),r._names.focus&&n1(r._fields,(D,P)=>{if(r._names.focus&&P.startsWith(r._names.focus)&&D.focus)return D.focus(),1}),r._names.focus="",r._setValid(),h.current=!1},[o,n,r]),Qe.useEffect(()=>(!ar(r._formValues,n)&&r._setFieldArray(n),()=>{const D=(P,F)=>{const L=ar(r._fields,P);L&&L._f&&(L._f.mount=F)};r._options.shouldUnregister||i?r.unregister(n):D(n,!1)}),[n,r,a,i]),{swap:Qe.useCallback(_,[m,n,r]),move:Qe.useCallback(N,[m,n,r]),prepend:Qe.useCallback(g,[m,n,r]),append:Qe.useCallback(w,[m,n,r]),remove:Qe.useCallback(y,[m,n,r]),insert:Qe.useCallback(b,[m,n,r]),update:Qe.useCallback(E,[m,n,r]),replace:Qe.useCallback(C,[m,n,r]),fields:Qe.useMemo(()=>o.map((D,P)=>({...D,[a]:u.current[P]||Dp()})),[o,a])}}const IOe=typeof window<"u"?Qe.useLayoutEffect:Qe.useEffect;function fd(e={}){const t=Qe.useRef(void 0),r=Qe.useRef(void 0),[n,a]=Qe.useState({isDirty:!1,isValidating:!1,isLoading:qu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:qu(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:OOe(e),formState:n},e.formControl&&e.defaultValues&&!qu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,IOe(()=>{const s=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s},[i]),Qe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Qe.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!To(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),Qe.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Qe.useEffect(()=>{if(i._proxyFormState.isDirty){const s=i._getDirty();s!==n.isDirty&&i._subjects.state.next({isDirty:s})}},[i,n.isDirty]),Qe.useEffect(()=>{e.values&&!oh(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(s=>({...s}))):i._resetDefaultValues()},[i,e.values]),Qe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=Ete(n,i),t.current}const IW=(e,t,r)=>{if(e&&"reportValidity"in e){const n=ar(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},jte=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?IW(n.ref,r,e):n.refs&&n.refs.forEach(a=>IW(a,r,e))}},ROe=(e,t)=>{t.shouldUseNativeValidation&&jte(e,t);const r={};for(const n in e){const a=ar(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(MOe(t.names||Object.keys(e),n)){const s=Object.assign({},ar(r,n));ia(s,"root",i),ia(r,n,s)}else ia(r,n,i)}return r},MOe=(e,t)=>e.some(r=>r.startsWith(t+"."));var FOe=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,s=n.path.join(".");if(!r[s])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[s]={message:o.message,type:o.code}}else r[s]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[s].types,u=c&&c[n.code];r[s]=Tte(s,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},hd=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(s,o){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&jte({},i),{errors:{},values:r.raw?n:u}})}catch(u){return o(u)}return c&&c.then?c.then(void 0,o):c}(0,function(s){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(s))return{values:{},errors:ROe(FOe(s.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw s}))}catch(s){return Promise.reject(s)}}},qN="Checkbox",[LOe,eQe]=es(qN),[jOe,$Oe]=LOe(qN),$te=S.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:s,disabled:o,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=S.useState(null),w=Kr(t,E=>m(E)),g=S.useRef(!1),y=h?d||!!h.closest("form"):!0,[b,_]=hl({prop:a,defaultProp:i??!1,onChange:u,caller:qN}),N=S.useRef(b);return S.useEffect(()=>{const E=h==null?void 0:h.form;if(E){const C=()=>_(N.current);return E.addEventListener("reset",C),()=>E.removeEventListener("reset",C)}},[h,_]),x(jOe,{scope:r,state:b,disabled:o,children:[l(vr.button,{type:"button",role:"checkbox","aria-checked":nm(b)?"mixed":b,"aria-required":s,"data-state":Wte(b),"data-disabled":o?"":void 0,disabled:o,value:c,...f,ref:w,onKeyDown:Ht(e.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Ht(e.onClick,E=>{_(C=>nm(C)?!0:!C),y&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),y&&l(qte,{control:h,bubbles:!g.current,name:n,value:c,checked:b,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:nm(i)?!1:i})]})});$te.displayName=qN;var Bte="CheckboxIndicator",Ute=S.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=$Oe(Bte,r);return l(uo,{present:n||nm(i.state)||i.state===!0,children:l(vr.span,{"data-state":Wte(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Ute.displayName=Bte;var BOe="CheckboxBubbleInput",qte=S.forwardRef(({__scopeCheckbox:e,control:t,checked:r,bubbles:n=!0,defaultChecked:a,...i},s)=>{const o=S.useRef(null),c=Kr(o,s),u=H4(r),d=C4(t);S.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==r&&g){const y=new Event("click",{bubbles:n});h.indeterminate=nm(r),g.call(h,nm(r)?!1:r),h.dispatchEvent(y)}},[u,r,n]);const f=S.useRef(nm(r)?!1:r);return l(vr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??f.current,...i,tabIndex:-1,ref:c,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qte.displayName=BOe;function nm(e){return e==="indeterminate"}function Wte(e){return nm(e)?"indeterminate":e?"checked":"unchecked"}var zte=$te,UOe=Ute;const Fo=S.forwardRef(({className:e,...t},r)=>l(zte,{ref:r,className:Lt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:l(UOe,{className:Lt("flex items-center justify-center text-current"),children:l(g1,{className:"h-4 w-4"})})}));Fo.displayName=zte.displayName;const Mh=kte,Vte=S.createContext({}),He=({...e})=>l(Vte.Provider,{value:{name:e.name},children:l(zp,{...e})}),WN=()=>{const e=S.useContext(Vte),t=S.useContext(Hte),{getFieldState:r,formState:n}=ou(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},Hte=S.createContext({}),De=S.forwardRef(({className:e,...t},r)=>{const n=S.useId();return l(Hte.Provider,{value:{id:n},children:l("div",{ref:r,className:Lt("space-y-2",e),...t})})});De.displayName="FormItem";const Oe=S.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=WN();return l(tr,{ref:r,className:Lt(n&&"text-destructive",e),htmlFor:a,...t})});Oe.displayName="FormLabel";const je=S.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=WN();return l(oG,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});je.displayName="FormControl";const mi=S.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=WN();return l("p",{ref:r,id:n,className:Lt("text-sm text-muted-foreground",e),...t})});mi.displayName="FormDescription";const Ze=S.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=WN(),s=a?String(a==null?void 0:a.message):t;return s?l("p",{ref:n,id:i,className:Lt("text-sm font-medium text-destructive",e),...r,children:s}):null});Ze.displayName="FormMessage";var Hn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Hn||(Hn={}));var sO;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(sO||(sO={}));const Sr=Hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sh=e=>{switch(typeof e){case"undefined":return Sr.undefined;case"string":return Sr.string;case"number":return isNaN(e)?Sr.nan:Sr.number;case"boolean":return Sr.boolean;case"function":return Sr.function;case"bigint":return Sr.bigint;case"symbol":return Sr.symbol;case"object":return Array.isArray(e)?Sr.array:e===null?Sr.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Sr.promise:typeof Map<"u"&&e instanceof Map?Sr.map:typeof Set<"u"&&e instanceof Set?Sr.set:typeof Date<"u"&&e instanceof Date?Sr.date:Sr.object;default:return Sr.unknown}},Gt=Hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),qOe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class wc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let o=n,c=0;for(;c<s.path.length;){const u=s.path[c];c===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(s))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof wc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}wc.create=e=>new wc(e);const K1=(e,t)=>{let r;switch(e.code){case Gt.invalid_type:e.received===Sr.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Gt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Hn.jsonStringifyReplacer)}`;break;case Gt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Hn.joinValues(e.keys,", ")}`;break;case Gt.invalid_union:r="Invalid input";break;case Gt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Hn.joinValues(e.options)}`;break;case Gt.invalid_enum_value:r=`Invalid enum value. Expected ${Hn.joinValues(e.options)}, received '${e.received}'`;break;case Gt.invalid_arguments:r="Invalid function arguments";break;case Gt.invalid_return_type:r="Invalid function return type";break;case Gt.invalid_date:r="Invalid date";break;case Gt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Hn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Gt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Gt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Gt.custom:r="Invalid input";break;case Gt.invalid_intersection_types:r="Intersection results could not be merged";break;case Gt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Gt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Hn.assertNever(e)}return{message:r}};let Gte=K1;function WOe(e){Gte=e}function LS(){return Gte}const jS=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},zOe=[];function dr(e,t){const r=LS(),n=jS({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===K1?void 0:K1].filter(a=>!!a)});e.common.issues.push(n)}class Uo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return cn;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,s=await a.value;n.push({key:i,value:s})}return Uo.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return cn;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(n[i.value]=s.value)}return{status:t.value,value:n}}}const cn=Object.freeze({status:"aborted"}),Hv=e=>({status:"dirty",value:e}),ml=e=>({status:"valid",value:e}),oO=e=>e.status==="aborted",lO=e=>e.status==="dirty",dg=e=>e.status==="valid",nw=e=>typeof Promise<"u"&&e instanceof Promise;function $S(e,t,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Yte(e,t,r,n,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var Ir;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ir||(Ir={}));var D2,I2;class hf{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const RW=(e,t)=>{if(dg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new wc(e.common.issues);return this._error=r,this._error}}};function bn(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var c,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:o.defaultError}},description:a}}class Cn{get description(){return this._def.description}_getType(t){return sh(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:sh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Uo,ctx:{common:t.parent.common,data:t.data,parsedType:sh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(nw(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const a={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:sh(t)},i=this._parseSync({data:t,path:a.path,parent:a});return RW(a,i)}"~validate"(t){var r,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:sh(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return dg(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((n=(r=i==null?void 0:i.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>dg(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:sh(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(nw(a)?a:Promise.resolve(a));return RW(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:Gt.custom,...n(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new ad({schema:this,typeName:rn.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return af.create(this,this._def)}nullable(){return vm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ku.create(this)}promise(){return J1.create(this,this._def)}or(t){return ow.create([this,t],this._def)}and(t){return lw.create(this,t,this._def)}transform(t){return new ad({...bn(this._def),schema:this,typeName:rn.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new hw({...bn(this._def),innerType:this,defaultValue:r,typeName:rn.ZodDefault})}brand(){return new vR({typeName:rn.ZodBranded,type:this,...bn(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new pw({...bn(this._def),innerType:this,catchValue:r,typeName:rn.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ib.create(this,t)}readonly(){return mw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const VOe=/^c[^\s-]{8,}$/i,HOe=/^[0-9a-z]+$/,GOe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,KOe=/^[a-z0-9_-]{21}$/i,XOe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,JOe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,QOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let GP;const eDe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tDe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,rDe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nDe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aDe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iDe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Kte="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sDe=new RegExp(`^${Kte}$`);function Xte(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function oDe(e){return new RegExp(`^${Xte(e)}$`)}function Jte(e){let t=`${Kte}T${Xte(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function lDe(e,t){return!!((t==="v4"||!t)&&eDe.test(e)||(t==="v6"||!t)&&rDe.test(e))}function cDe(e,t){if(!XOe.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function uDe(e,t){return!!((t==="v4"||!t)&&tDe.test(e)||(t==="v6"||!t)&&nDe.test(e))}class zu extends Cn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Sr.string){const i=this._getOrReturnCtx(t);return dr(i,{code:Gt.invalid_type,expected:Sr.string,received:i.parsedType}),cn}const n=new Uo;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?dr(a,{code:Gt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&dr(a,{code:Gt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")ZOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"email",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")GP||(GP=new RegExp(QOe,"u")),GP.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"emoji",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")YOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"uuid",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")KOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"nanoid",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")VOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"cuid",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")HOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"cuid2",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")GOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"ulid",code:Gt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),dr(a,{validation:"url",code:Gt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"regex",code:Gt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Jte(i).test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?sDe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?oDe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?JOe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"duration",code:Gt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?lDe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"ip",code:Gt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?cDe(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"jwt",code:Gt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?uDe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"cidr",code:Gt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?aDe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"base64",code:Gt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?iDe.test(t.data)||(a=this._getOrReturnCtx(t,a),dr(a,{validation:"base64url",code:Gt.invalid_string,message:i.message}),n.dirty()):Hn.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Gt.invalid_string,...Ir.errToObj(n)})}_addCheck(t){return new zu({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ir.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ir.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ir.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ir.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ir.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ir.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ir.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ir.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ir.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ir.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ir.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ir.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ir.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ir.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ir.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ir.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ir.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ir.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ir.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ir.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ir.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ir.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ir.errToObj(r)})}nonempty(t){return this.min(1,Ir.errToObj(t))}trim(){return new zu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}zu.create=e=>{var t;return new zu({checks:[],typeName:rn.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...bn(e)})};function dDe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class pm extends Cn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Sr.number){const i=this._getOrReturnCtx(t);return dr(i,{code:Gt.invalid_type,expected:Sr.number,received:i.parsedType}),cn}let n;const a=new Uo;for(const i of this._def.checks)i.kind==="int"?Hn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?dDe(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.not_finite,message:i.message}),a.dirty()):Hn.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ir.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ir.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ir.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ir.toString(r))}setLimit(t,r,n,a){return new pm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ir.toString(a)}]})}_addCheck(t){return new pm({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ir.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ir.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ir.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ir.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ir.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ir.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ir.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ir.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ir.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Hn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}pm.create=e=>new pm({checks:[],typeName:rn.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...bn(e)});class mm extends Cn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Sr.bigint)return this._getInvalidInput(t);let n;const a=new Uo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),dr(n,{code:Gt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Hn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return dr(r,{code:Gt.invalid_type,expected:Sr.bigint,received:r.parsedType}),cn}gte(t,r){return this.setLimit("min",t,!0,Ir.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ir.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ir.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ir.toString(r))}setLimit(t,r,n,a){return new mm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ir.toString(a)}]})}_addCheck(t){return new mm({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ir.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ir.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ir.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ir.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ir.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}mm.create=e=>{var t;return new mm({checks:[],typeName:rn.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...bn(e)})};class aw extends Cn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Sr.boolean){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.boolean,received:n.parsedType}),cn}return ml(t.data)}}aw.create=e=>new aw({typeName:rn.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...bn(e)});class fg extends Cn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Sr.date){const i=this._getOrReturnCtx(t);return dr(i,{code:Gt.invalid_type,expected:Sr.date,received:i.parsedType}),cn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return dr(i,{code:Gt.invalid_date}),cn}const n=new Uo;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),dr(a,{code:Gt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Hn.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new fg({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ir.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ir.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}fg.create=e=>new fg({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:rn.ZodDate,...bn(e)});class BS extends Cn{_parse(t){if(this._getType(t)!==Sr.symbol){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.symbol,received:n.parsedType}),cn}return ml(t.data)}}BS.create=e=>new BS({typeName:rn.ZodSymbol,...bn(e)});class iw extends Cn{_parse(t){if(this._getType(t)!==Sr.undefined){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.undefined,received:n.parsedType}),cn}return ml(t.data)}}iw.create=e=>new iw({typeName:rn.ZodUndefined,...bn(e)});class sw extends Cn{_parse(t){if(this._getType(t)!==Sr.null){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.null,received:n.parsedType}),cn}return ml(t.data)}}sw.create=e=>new sw({typeName:rn.ZodNull,...bn(e)});class X1 extends Cn{constructor(){super(...arguments),this._any=!0}_parse(t){return ml(t.data)}}X1.create=e=>new X1({typeName:rn.ZodAny,...bn(e)});class H0 extends Cn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ml(t.data)}}H0.create=e=>new H0({typeName:rn.ZodUnknown,...bn(e)});class Nh extends Cn{_parse(t){const r=this._getOrReturnCtx(t);return dr(r,{code:Gt.invalid_type,expected:Sr.never,received:r.parsedType}),cn}}Nh.create=e=>new Nh({typeName:rn.ZodNever,...bn(e)});class US extends Cn{_parse(t){if(this._getType(t)!==Sr.undefined){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.void,received:n.parsedType}),cn}return ml(t.data)}}US.create=e=>new US({typeName:rn.ZodVoid,...bn(e)});class Ku extends Cn{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Sr.array)return dr(r,{code:Gt.invalid_type,expected:Sr.array,received:r.parsedType}),cn;if(a.exactLength!==null){const s=r.data.length>a.exactLength.value,o=r.data.length<a.exactLength.value;(s||o)&&(dr(r,{code:s?Gt.too_big:Gt.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(dr(r,{code:Gt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(dr(r,{code:Gt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,o)=>a.type._parseAsync(new hf(r,s,r.path,o)))).then(s=>Uo.mergeArray(n,s));const i=[...r.data].map((s,o)=>a.type._parseSync(new hf(r,s,r.path,o)));return Uo.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Ku({...this._def,minLength:{value:t,message:Ir.toString(r)}})}max(t,r){return new Ku({...this._def,maxLength:{value:t,message:Ir.toString(r)}})}length(t,r){return new Ku({...this._def,exactLength:{value:t,message:Ir.toString(r)}})}nonempty(t){return this.min(1,t)}}Ku.create=(e,t)=>new Ku({type:e,minLength:null,maxLength:null,exactLength:null,typeName:rn.ZodArray,...bn(t)});function jv(e){if(e instanceof gi){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=af.create(jv(n))}return new gi({...e._def,shape:()=>t})}else return e instanceof Ku?new Ku({...e._def,type:jv(e.element)}):e instanceof af?af.create(jv(e.unwrap())):e instanceof vm?vm.create(jv(e.unwrap())):e instanceof pf?pf.create(e.items.map(t=>jv(t))):e}class gi extends Cn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Hn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Sr.object){const u=this._getOrReturnCtx(t);return dr(u,{code:Gt.invalid_type,expected:Sr.object,received:u.parsedType}),cn}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Nh&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const c=[];for(const u of s){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new hf(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Nh){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(dr(a,{code:Gt.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new hf(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Uo.mergeObjectSync(n,u)):Uo.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ir.errToObj,new gi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,i,s,o;const c=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=Ir.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new gi({...this._def,unknownKeys:"strip"})}passthrough(){return new gi({...this._def,unknownKeys:"passthrough"})}extend(t){return new gi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new gi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:rn.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new gi({...this._def,catchall:t})}pick(t){const r={};return Hn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new gi({...this._def,shape:()=>r})}omit(t){const r={};return Hn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new gi({...this._def,shape:()=>r})}deepPartial(){return jv(this)}partial(t){const r={};return Hn.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}),new gi({...this._def,shape:()=>r})}required(t){const r={};return Hn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof af;)i=i._def.innerType;r[n]=i}}),new gi({...this._def,shape:()=>r})}keyof(){return Zte(Hn.objectKeys(this.shape))}}gi.create=(e,t)=>new gi({shape:()=>e,unknownKeys:"strip",catchall:Nh.create(),typeName:rn.ZodObject,...bn(t)});gi.strictCreate=(e,t)=>new gi({shape:()=>e,unknownKeys:"strict",catchall:Nh.create(),typeName:rn.ZodObject,...bn(t)});gi.lazycreate=(e,t)=>new gi({shape:e,unknownKeys:"strip",catchall:Nh.create(),typeName:rn.ZodObject,...bn(t)});class ow extends Cn{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new wc(o.ctx.common.issues));return dr(r,{code:Gt.invalid_union,unionErrors:s}),cn}if(r.common.async)return Promise.all(n.map(async i=>{const s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(c=>new wc(c));return dr(r,{code:Gt.invalid_union,unionErrors:o}),cn}}get options(){return this._def.options}}ow.create=(e,t)=>new ow({options:e,typeName:rn.ZodUnion,...bn(t)});const nh=e=>e instanceof uw?nh(e.schema):e instanceof ad?nh(e.innerType()):e instanceof dw?[e.value]:e instanceof gm?e.options:e instanceof fw?Hn.objectValues(e.enum):e instanceof hw?nh(e._def.innerType):e instanceof iw?[void 0]:e instanceof sw?[null]:e instanceof af?[void 0,...nh(e.unwrap())]:e instanceof vm?[null,...nh(e.unwrap())]:e instanceof vR||e instanceof mw?nh(e.unwrap()):e instanceof pw?nh(e._def.innerType):[];class zN extends Cn{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Sr.object)return dr(r,{code:Gt.invalid_type,expected:Sr.object,received:r.parsedType}),cn;const n=this.discriminator,a=r.data[n],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(dr(r,{code:Gt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),cn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const a=new Map;for(const i of r){const s=nh(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new zN({typeName:rn.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...bn(n)})}}function cO(e,t){const r=sh(e),n=sh(t);if(e===t)return{valid:!0,data:e};if(r===Sr.object&&n===Sr.object){const a=Hn.objectKeys(t),i=Hn.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const c=cO(e[o],t[o]);if(!c.valid)return{valid:!1};s[o]=c.data}return{valid:!0,data:s}}else if(r===Sr.array&&n===Sr.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],c=cO(s,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Sr.date&&n===Sr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class lw extends Cn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,s)=>{if(oO(i)||oO(s))return cn;const o=cO(i.value,s.value);return o.valid?((lO(i)||lO(s))&&r.dirty(),{status:r.value,value:o.data}):(dr(n,{code:Gt.invalid_intersection_types}),cn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}lw.create=(e,t,r)=>new lw({left:e,right:t,typeName:rn.ZodIntersection,...bn(r)});class pf extends Cn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Sr.array)return dr(n,{code:Gt.invalid_type,expected:Sr.array,received:n.parsedType}),cn;if(n.data.length<this._def.items.length)return dr(n,{code:Gt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cn;!this._def.rest&&n.data.length>this._def.items.length&&(dr(n,{code:Gt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((s,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new hf(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(i).then(s=>Uo.mergeArray(r,s)):Uo.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new pf({...this._def,rest:t})}}pf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pf({items:e,typeName:rn.ZodTuple,rest:null,...bn(t)})};class cw extends Cn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Sr.object)return dr(n,{code:Gt.invalid_type,expected:Sr.object,received:n.parsedType}),cn;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in n.data)a.push({key:i._parse(new hf(n,o,n.path,o)),value:s._parse(new hf(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?Uo.mergeObjectAsync(r,a):Uo.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Cn?new cw({keyType:t,valueType:r,typeName:rn.ZodRecord,...bn(n)}):new cw({keyType:zu.create(),valueType:t,typeName:rn.ZodRecord,...bn(r)})}}class qS extends Cn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Sr.map)return dr(n,{code:Gt.invalid_type,expected:Sr.map,received:n.parsedType}),cn;const a=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map(([o,c],u)=>({key:a._parse(new hf(n,o,n.path,[u,"key"])),value:i._parse(new hf(n,c,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of s){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return cn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of s){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return cn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}}}}qS.create=(e,t,r)=>new qS({valueType:t,keyType:e,typeName:rn.ZodMap,...bn(r)});class hg extends Cn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Sr.set)return dr(n,{code:Gt.invalid_type,expected:Sr.set,received:n.parsedType}),cn;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(dr(n,{code:Gt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(dr(n,{code:Gt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function s(c){const u=new Set;for(const d of c){if(d.status==="aborted")return cn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const o=[...n.data.values()].map((c,u)=>i._parse(new hf(n,c,n.path,u)));return n.common.async?Promise.all(o).then(c=>s(c)):s(o)}min(t,r){return new hg({...this._def,minSize:{value:t,message:Ir.toString(r)}})}max(t,r){return new hg({...this._def,maxSize:{value:t,message:Ir.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}hg.create=(e,t)=>new hg({valueType:e,minSize:null,maxSize:null,typeName:rn.ZodSet,...bn(t)});class a1 extends Cn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Sr.function)return dr(r,{code:Gt.invalid_type,expected:Sr.function,received:r.parsedType}),cn;function n(o,c){return jS({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,LS(),K1].filter(u=>!!u),issueData:{code:Gt.invalid_arguments,argumentsError:c}})}function a(o,c){return jS({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,LS(),K1].filter(u=>!!u),issueData:{code:Gt.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof J1){const o=this;return ml(async function(...c){const u=new wc([]),d=await o._def.args.parseAsync(c,i).catch(m=>{throw u.addIssue(n(c,m)),u}),f=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(f,i).catch(m=>{throw u.addIssue(a(f,m)),u})})}else{const o=this;return ml(function(...c){const u=o._def.args.safeParse(c,i);if(!u.success)throw new wc([n(c,u.error)]);const d=Reflect.apply(s,this,u.data),f=o._def.returns.safeParse(d,i);if(!f.success)throw new wc([a(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new a1({...this._def,args:pf.create(t).rest(H0.create())})}returns(t){return new a1({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new a1({args:t||pf.create([]).rest(H0.create()),returns:r||H0.create(),typeName:rn.ZodFunction,...bn(n)})}}class uw extends Cn{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}uw.create=(e,t)=>new uw({getter:e,typeName:rn.ZodLazy,...bn(t)});class dw extends Cn{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return dr(r,{received:r.data,code:Gt.invalid_literal,expected:this._def.value}),cn}return{status:"valid",value:t.data}}get value(){return this._def.value}}dw.create=(e,t)=>new dw({value:e,typeName:rn.ZodLiteral,...bn(t)});function Zte(e,t){return new gm({values:e,typeName:rn.ZodEnum,...bn(t)})}class gm extends Cn{constructor(){super(...arguments),D2.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return dr(r,{expected:Hn.joinValues(n),received:r.parsedType,code:Gt.invalid_type}),cn}if($S(this,D2)||Yte(this,D2,new Set(this._def.values)),!$S(this,D2).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return dr(r,{received:r.data,code:Gt.invalid_enum_value,options:n}),cn}return ml(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return gm.create(t,{...this._def,...r})}exclude(t,r=this._def){return gm.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}D2=new WeakMap;gm.create=Zte;class fw extends Cn{constructor(){super(...arguments),I2.set(this,void 0)}_parse(t){const r=Hn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Sr.string&&n.parsedType!==Sr.number){const a=Hn.objectValues(r);return dr(n,{expected:Hn.joinValues(a),received:n.parsedType,code:Gt.invalid_type}),cn}if($S(this,I2)||Yte(this,I2,new Set(Hn.getValidEnumValues(this._def.values))),!$S(this,I2).has(t.data)){const a=Hn.objectValues(r);return dr(n,{received:n.data,code:Gt.invalid_enum_value,options:a}),cn}return ml(t.data)}get enum(){return this._def.values}}I2=new WeakMap;fw.create=(e,t)=>new fw({values:e,typeName:rn.ZodNativeEnum,...bn(t)});class J1 extends Cn{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Sr.promise&&r.common.async===!1)return dr(r,{code:Gt.invalid_type,expected:Sr.promise,received:r.parsedType}),cn;const n=r.parsedType===Sr.promise?r.data:Promise.resolve(r.data);return ml(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}J1.create=(e,t)=>new J1({type:e,typeName:rn.ZodPromise,...bn(t)});class ad extends Cn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{dr(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(n.data,i);if(n.common.async)return Promise.resolve(s).then(async o=>{if(r.value==="aborted")return cn;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?cn:c.status==="dirty"||r.value==="dirty"?Hv(c.value):c});{if(r.value==="aborted")return cn;const o=this._def.schema._parseSync({data:s,path:n.path,parent:n});return o.status==="aborted"?cn:o.status==="dirty"||r.value==="dirty"?Hv(o.value):o}}if(a.type==="refinement"){const s=o=>{const c=a.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?cn:(o.status==="dirty"&&r.dirty(),s(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?cn:(o.status==="dirty"&&r.dirty(),s(o.value).then(()=>({status:r.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!dg(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>dg(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:r.value,value:o})):s);Hn.assertNever(a)}}ad.create=(e,t,r)=>new ad({schema:e,typeName:rn.ZodEffects,effect:t,...bn(r)});ad.createWithPreprocess=(e,t,r)=>new ad({schema:t,effect:{type:"preprocess",transform:e},typeName:rn.ZodEffects,...bn(r)});class af extends Cn{_parse(t){return this._getType(t)===Sr.undefined?ml(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}af.create=(e,t)=>new af({innerType:e,typeName:rn.ZodOptional,...bn(t)});class vm extends Cn{_parse(t){return this._getType(t)===Sr.null?ml(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}vm.create=(e,t)=>new vm({innerType:e,typeName:rn.ZodNullable,...bn(t)});class hw extends Cn{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Sr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}hw.create=(e,t)=>new hw({innerType:e,typeName:rn.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...bn(t)});class pw extends Cn{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return nw(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new wc(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new wc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}pw.create=(e,t)=>new pw({innerType:e,typeName:rn.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...bn(t)});class WS extends Cn{_parse(t){if(this._getType(t)!==Sr.nan){const n=this._getOrReturnCtx(t);return dr(n,{code:Gt.invalid_type,expected:Sr.nan,received:n.parsedType}),cn}return{status:"valid",value:t.data}}}WS.create=e=>new WS({typeName:rn.ZodNaN,...bn(e)});const fDe=Symbol("zod_brand");class vR extends Cn{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ib extends Cn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?cn:i.status==="dirty"?(r.dirty(),Hv(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?cn:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new ib({in:t,out:r,typeName:rn.ZodPipeline})}}class mw extends Cn{_parse(t){const r=this._def.innerType._parse(t),n=a=>(dg(a)&&(a.value=Object.freeze(a.value)),a);return nw(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}mw.create=(e,t)=>new mw({innerType:e,typeName:rn.ZodReadonly,...bn(t)});function MW(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function Qte(e,t={},r){return e?X1.create().superRefine((n,a)=>{var i,s;const o=e(n);if(o instanceof Promise)return o.then(c=>{var u,d;if(!c){const f=MW(t,n),h=(d=(u=f.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...f,fatal:h})}});if(!o){const c=MW(t,n),u=(s=(i=c.fatal)!==null&&i!==void 0?i:r)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...c,fatal:u})}}):X1.create()}const hDe={object:gi.lazycreate};var rn;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(rn||(rn={}));const pDe=(e,t={message:`Input not instance of ${e.name}`})=>Qte(r=>r instanceof e,t),ro=zu.create,J2=pm.create,mDe=WS.create,gDe=mm.create,yR=aw.create,ere=fg.create,vDe=BS.create,yDe=iw.create,xDe=sw.create,wDe=X1.create,bDe=H0.create,_De=Nh.create,SDe=US.create,tre=Ku.create,VN=gi.create,NDe=gi.strictCreate,ADe=ow.create,kDe=zN.create,EDe=lw.create,CDe=pf.create,PDe=cw.create,TDe=qS.create,ODe=hg.create,DDe=a1.create,IDe=uw.create,RDe=dw.create,gw=gm.create,MDe=fw.create,FDe=J1.create,FW=ad.create,LDe=af.create,jDe=vm.create,$De=ad.createWithPreprocess,BDe=ib.create,UDe=()=>ro().optional(),qDe=()=>J2().optional(),WDe=()=>yR().optional(),xR={string:e=>zu.create({...e,coerce:!0}),number:e=>pm.create({...e,coerce:!0}),boolean:e=>aw.create({...e,coerce:!0}),bigint:e=>mm.create({...e,coerce:!0}),date:e=>fg.create({...e,coerce:!0})},zDe=cn;var Ie=Object.freeze({__proto__:null,defaultErrorMap:K1,setErrorMap:WOe,getErrorMap:LS,makeIssue:jS,EMPTY_PATH:zOe,addIssueToContext:dr,ParseStatus:Uo,INVALID:cn,DIRTY:Hv,OK:ml,isAborted:oO,isDirty:lO,isValid:dg,isAsync:nw,get util(){return Hn},get objectUtil(){return sO},ZodParsedType:Sr,getParsedType:sh,ZodType:Cn,datetimeRegex:Jte,ZodString:zu,ZodNumber:pm,ZodBigInt:mm,ZodBoolean:aw,ZodDate:fg,ZodSymbol:BS,ZodUndefined:iw,ZodNull:sw,ZodAny:X1,ZodUnknown:H0,ZodNever:Nh,ZodVoid:US,ZodArray:Ku,ZodObject:gi,ZodUnion:ow,ZodDiscriminatedUnion:zN,ZodIntersection:lw,ZodTuple:pf,ZodRecord:cw,ZodMap:qS,ZodSet:hg,ZodFunction:a1,ZodLazy:uw,ZodLiteral:dw,ZodEnum:gm,ZodNativeEnum:fw,ZodPromise:J1,ZodEffects:ad,ZodTransformer:ad,ZodOptional:af,ZodNullable:vm,ZodDefault:hw,ZodCatch:pw,ZodNaN:WS,BRAND:fDe,ZodBranded:vR,ZodPipeline:ib,ZodReadonly:mw,custom:Qte,Schema:Cn,ZodSchema:Cn,late:hDe,get ZodFirstPartyTypeKind(){return rn},coerce:xR,any:wDe,array:tre,bigint:gDe,boolean:yR,date:ere,discriminatedUnion:kDe,effect:FW,enum:gw,function:DDe,instanceof:pDe,intersection:EDe,lazy:IDe,literal:RDe,map:TDe,nan:mDe,nativeEnum:MDe,never:_De,null:xDe,nullable:jDe,number:J2,object:VN,oboolean:WDe,onumber:qDe,optional:LDe,ostring:UDe,pipeline:BDe,preprocess:$De,promise:FDe,record:PDe,set:ODe,strictObject:NDe,string:ro,symbol:vDe,transformer:FW,tuple:CDe,undefined:yDe,union:ADe,unknown:bDe,void:SDe,NEVER:zDe,ZodIssueCode:Gt,quotelessJson:qOe,ZodError:wc});const Vp=Ie.object({first_name:Ie.string().min(1,"First name is required"),last_name:Ie.string().min(1,"Last name is required"),middle_name:Ie.string().optional(),gender:Ie.enum(["male","female","other"]),age:Ie.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),Ie.number().int().positive("Age must be a positive number").nullable().optional()),marital_status:Ie.enum(["single","married","divorced","widowed","separated","other"]).optional(),occupation:Ie.string().optional()});function VDe(){const e=ou();return x("div",{className:"space-y-6",children:[x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Basic Information"}),l("p",{className:"text-sm text-muted-foreground",children:"Enter the patient's basic personal information."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l(He,{control:e.control,name:"first_name",render:({field:t})=>x(De,{children:[l(Oe,{children:"First Name"}),l(je,{children:l(ht,{placeholder:"John",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"middle_name",render:({field:t})=>x(De,{children:[l(Oe,{children:"Middle Name"}),l(je,{children:l(ht,{placeholder:"Michael",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"last_name",render:({field:t})=>x(De,{children:[l(Oe,{children:"Last Name"}),l(je,{children:l(ht,{placeholder:"Doe",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"gender",render:({field:t})=>x(De,{children:[l(Oe,{children:"Gender"}),x(Ur,{onValueChange:t.onChange,defaultValue:t.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select gender"})})}),x($r,{children:[l(wt,{value:"male",children:"Male"}),l(wt,{value:"female",children:"Female"}),l(wt,{value:"other",children:"Other"})]})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"age",render:({field:t})=>x(De,{children:[l(Oe,{children:"Age"}),l(je,{children:l(ht,{type:"number",placeholder:"25",...t,value:t.value??"",onChange:r=>t.onChange(r.target.value===""?null:r.target.valueAsNumber)})}),l(Ze,{})]})}),l(He,{control:e.control,name:"marital_status",render:({field:t})=>x(De,{children:[l(Oe,{children:"Marital Status"}),x(Ur,{onValueChange:t.onChange,defaultValue:t.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select status"})})}),x($r,{children:[l(wt,{value:"single",children:"Single"}),l(wt,{value:"married",children:"Married"}),l(wt,{value:"divorced",children:"Divorced"}),l(wt,{value:"widowed",children:"Widowed"}),l(wt,{value:"separated",children:"Separated"}),l(wt,{value:"other",children:"Other"})]})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"occupation",render:({field:t})=>x(De,{children:[l(Oe,{children:"Occupation"}),l(je,{children:l(ht,{placeholder:"Software Engineer",...t})}),l(Ze,{})]})})]})]})}const wR=Ie.object({phone:Ie.string().min(1,"Phone number is required").regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format. Use E.164 format: +1234567890"),email:Ie.string().email("Invalid email address").optional().nullable(),address:Ie.string().optional(),city:Ie.string().optional(),state:Ie.string().optional(),postal_code:Ie.string().optional(),country:Ie.string().default("USA"),emergency_contact_name:Ie.string().optional(),emergency_contact_phone:Ie.string().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional(),emergency_contact_relationship:Ie.string().optional()});function HDe(){const e=ou();return x("div",{className:"space-y-6",children:[x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Contact Information"}),l("p",{className:"text-sm text-muted-foreground",children:"Provide contact details for communication."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l(He,{control:e.control,name:"phone",render:({field:t})=>x(De,{children:[l(Oe,{children:"Phone Number"}),l(je,{children:l(ht,{placeholder:"+1234567890",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"email",render:({field:t})=>x(De,{children:[l(Oe,{children:"Email Address"}),l(je,{children:l(ht,{type:"email",placeholder:"john@example.com",...t})}),l(Ze,{})]})})]}),x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Address Information"}),l("p",{className:"text-sm text-muted-foreground",children:"Enter the patient's residential address."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l(He,{control:e.control,name:"address",render:({field:t})=>x(De,{className:"col-span-2",children:[l(Oe,{children:"Street Address"}),l(je,{children:l(ht,{placeholder:"123 Main St",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"city",render:({field:t})=>x(De,{children:[l(Oe,{children:"City"}),l(je,{children:l(ht,{placeholder:"New York",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"state",render:({field:t})=>x(De,{children:[l(Oe,{children:"State"}),l(je,{children:l(ht,{placeholder:"NY",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"postal_code",render:({field:t})=>x(De,{children:[l(Oe,{children:"Postal Code"}),l(je,{children:l(ht,{placeholder:"10001",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"country",render:({field:t})=>x(De,{children:[l(Oe,{children:"Country"}),l(je,{children:l(ht,{placeholder:"USA",...t})}),l(Ze,{})]})})]}),x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Emergency Contact"}),l("p",{className:"text-sm text-muted-foreground",children:"Provide emergency contact information."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l(He,{control:e.control,name:"emergency_contact_name",render:({field:t})=>x(De,{children:[l(Oe,{children:"Contact Name"}),l(je,{children:l(ht,{placeholder:"Jane Doe",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"emergency_contact_phone",render:({field:t})=>x(De,{children:[l(Oe,{children:"Contact Phone"}),l(je,{children:l(ht,{placeholder:"+1234567890",...t})}),l(Ze,{})]})}),l(He,{control:e.control,name:"emergency_contact_relationship",render:({field:t})=>x(De,{children:[l(Oe,{children:"Relationship"}),l(je,{children:l(ht,{placeholder:"Spouse",...t})}),l(Ze,{})]})})]})]})}var bR="Radio",[GDe,rre]=es(bR),[YDe,KDe]=GDe(bR),nre=S.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:s,value:o="on",onCheck:c,form:u,...d}=e,[f,h]=S.useState(null),m=Kr(t,y=>h(y)),w=S.useRef(!1),g=f?u||!!f.closest("form"):!0;return x(YDe,{scope:r,checked:a,disabled:s,children:[l(vr.button,{type:"button",role:"radio","aria-checked":a,"data-state":ore(a),"data-disabled":s?"":void 0,disabled:s,value:o,...d,ref:m,onClick:Ht(e.onClick,y=>{a||c==null||c(),g&&(w.current=y.isPropagationStopped(),w.current||y.stopPropagation())})}),g&&l(sre,{control:f,bubbles:!w.current,name:n,value:o,checked:a,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"}})]})});nre.displayName=bR;var are="RadioIndicator",ire=S.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=KDe(are,r);return l(uo,{present:n||i.checked,children:l(vr.span,{"data-state":ore(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});ire.displayName=are;var XDe="RadioBubbleInput",sre=S.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const s=S.useRef(null),o=Kr(s,i),c=H4(r),u=C4(t);return S.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const w=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(w)}},[c,r,n]),l(vr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sre.displayName=XDe;function ore(e){return e?"checked":"unchecked"}var JDe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HN="RadioGroup",[ZDe,tQe]=es(HN,[vy,rre]),lre=vy(),cre=rre(),[QDe,eIe]=ZDe(HN),ure=S.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:s=!1,disabled:o=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=lre(r),w=Sg(u),[g,y]=hl({prop:i,defaultProp:a??"",onChange:f,caller:HN});return l(QDe,{scope:r,name:n,required:s,disabled:o,value:g,onValueChange:y,children:l(yD,{asChild:!0,...m,orientation:c,dir:w,loop:d,children:l(vr.div,{role:"radiogroup","aria-required":s,"aria-orientation":c,"data-disabled":o?"":void 0,dir:w,...h,ref:t})})})});ure.displayName=HN;var dre="RadioGroupItem",fre=S.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=eIe(dre,r),s=i.disabled||n,o=lre(r),c=cre(r),u=S.useRef(null),d=Kr(t,u),f=i.value===a.value,h=S.useRef(!1);return S.useEffect(()=>{const m=g=>{JDe.includes(g.key)&&(h.current=!0)},w=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",w)}},[]),l(xD,{asChild:!0,...o,focusable:!s,active:f,children:l(nre,{disabled:s,required:i.required,checked:f,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:Ht(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Ht(a.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});fre.displayName=dre;var tIe="RadioGroupIndicator",hre=S.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=cre(r);return l(ire,{...a,...n,ref:t})});hre.displayName=tIe;var pre=ure,mre=fre,rIe=hre;const js=S.forwardRef(({className:e,...t},r)=>l(pre,{className:Lt("grid gap-2",e),...t,ref:r}));js.displayName=pre.displayName;const Mn=S.forwardRef(({className:e,...t},r)=>l(mre,{ref:r,className:Lt("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l(rIe,{className:"flex items-center justify-center",children:l(ZH,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Mn.displayName=mre.displayName;const nIe=[{id:"penicillin",label:"Penicillin"},{id:"amoxicillin",label:"Amoxicillin"},{id:"aspirin",label:"Aspirin"},{id:"ibuprofen",label:"Ibuprofen"},{id:"codeine",label:"Codeine"},{id:"sulfa_drugs",label:"Sulfa Drugs"},{id:"local_anesthetics",label:"Local Anesthetics (e.g., Lidocaine)"},{id:"other_medications",label:"Other Medications (please specify)"}],aIe=[{id:"peanuts",label:"Peanuts"},{id:"tree_nuts",label:"Tree Nuts (e.g., almonds, walnuts)"},{id:"dairy",label:"Dairy Products"},{id:"eggs",label:"Eggs"},{id:"shellfish",label:"Shellfish"},{id:"gluten",label:"Gluten"},{id:"soy",label:"Soy"},{id:"other_food",label:"Other Food Allergies (please specify)"}],iIe=[{id:"pollen",label:"Pollen"},{id:"dust_mites",label:"Dust Mites"},{id:"mold",label:"Mold"},{id:"pet_dander",label:"Pet Dander"},{id:"insect_stings",label:"Insect Stings"},{id:"latex",label:"Latex"},{id:"fragrances",label:"Fragrances/Perfumes"},{id:"other_environmental",label:"Other Environmental Allergies (please specify)"}],sIe=[{id:"nickel_metals",label:"Nickel or Metals"},{id:"chlorhexidine",label:"Chlorhexidine (mouthwash/antiseptic)"},{id:"other",label:"Other (please describe)"}],gre=Ie.object({blood_group:Ie.enum(["A+","A-","B+","B-","AB+","AB-","O+","O-","unknown"]).optional(),height:Ie.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),Ie.number().positive("Height must be a positive number").nullable().optional()),weight:Ie.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),Ie.number().positive("Weight must be a positive number").nullable().optional()),has_allergies:Ie.enum(["yes","no"]).optional(),medication_allergies:Ie.array(Ie.string()).optional(),other_medication_allergy_details:Ie.string().optional(),food_allergies:Ie.array(Ie.string()).optional(),other_food_allergy_details:Ie.string().optional(),environmental_allergies:Ie.array(Ie.string()).optional(),other_environmental_allergy_details:Ie.string().optional(),other_allergies:Ie.array(Ie.string()).optional(),other_allergy_details:Ie.string().optional(),other_allergies_manual_input:Ie.string().optional(),diagnosed_conditions:Ie.array(Ie.string()).optional(),other_diagnosed_condition:Ie.string().optional(),has_implants:Ie.enum(["yes","no"]).optional(),implants_details:Ie.string().optional(),taking_medications:Ie.enum(["yes","no"]).optional(),current_medications:Ie.array(Ie.object({name:Ie.string().min(1,"Medication name is required"),dosage:Ie.string().optional(),frequency:Ie.string().optional()})).optional(),recent_health_changes:Ie.enum(["yes","no"]).optional(),health_changes_details:Ie.string().optional(),previous_surgeries:Ie.array(Ie.object({type:Ie.string().min(1,"Surgery type is required"),date:Ie.string().optional(),notes:Ie.string().optional()})).optional(),immunizations_up_to_date:Ie.enum(["yes","no","not_sure"]).optional(),recent_immunizations:Ie.string().optional(),recent_medical_screenings:Ie.enum(["yes","no"]).optional(),screenings_details:Ie.string().optional(),dental_material_allergies:Ie.enum(["yes","no"]).optional(),dental_material_allergies_details:Ie.string().optional(),notes:Ie.string().optional()}),oIe=[{id:"diabetes",label:"Diabetes"},{id:"heart_disease",label:"Heart Disease"},{id:"hypertension",label:"Hypertension"},{id:"asthma",label:"Asthma"},{id:"bleeding_disorders",label:"Bleeding Disorders"},{id:"kidney_liver_disease",label:"Kidney/Liver Disease"},{id:"respiratory_problems",label:"Respiratory Problems"},{id:"autoimmune_disorders",label:"Autoimmune Disorders"},{id:"osteoporosis",label:"Osteoporosis"}];function lIe(){var o,c,u,d;const e=ou(),{fields:t,append:r,remove:n}=FS({control:e.control,name:"current_medications"}),{fields:a,append:i,remove:s}=FS({control:e.control,name:"previous_surgeries"});return x("div",{className:"space-y-8",children:[" ",x("div",{className:"space-y-2",children:[l("h2",{className:"text-xl font-semibold",children:"Medical Information"}),l("p",{className:"text-sm text-muted-foreground",children:"Provide relevant medical information for the patient."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l(He,{control:e.control,name:"blood_group",render:({field:f})=>x(De,{children:[l(Oe,{children:"Blood Group"}),x(Ur,{onValueChange:f.onChange,defaultValue:f.value||"unknown",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select blood group"})})}),l($r,{children:["A+","A-","B+","B-","AB+","AB-","O+","O-","unknown"].map(h=>l(wt,{value:h,children:h==="unknown"?"Unknown":h},h))})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"height",render:({field:f})=>x(De,{children:[l(Oe,{children:"Height (cm)"}),l(je,{children:l(ht,{type:"number",placeholder:"175",...f,value:f.value??"",onChange:h=>f.onChange(h.target.value===""?null:h.target.valueAsNumber)})}),l(Ze,{})]})}),l(He,{control:e.control,name:"weight",render:({field:f})=>x(De,{children:[l(Oe,{children:"Weight (kg)"}),l(je,{children:l(ht,{type:"number",placeholder:"70",...f,value:f.value??"",onChange:h=>f.onChange(h.target.value===""?null:h.target.valueAsNumber)})}),l(Ze,{})]})})]})," ",x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Allergies"}),l(He,{control:e.control,name:"has_allergies",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have any allergies?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("has_allergies")==="yes"&&x("div",{className:"space-y-6 mt-4",children:[" ",l(He,{control:e.control,name:"medication_allergies",render:()=>x(De,{children:[x("div",{className:"mb-2",children:[l(Oe,{className:"text-base font-medium",children:"Medication Allergies"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:nIe.map(f=>l(He,{control:e.control,name:"medication_allergies",render:({field:h})=>{var m;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:w=>w?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),l(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),l(Ze,{})]})}),((o=e.watch("medication_allergies"))==null?void 0:o.includes("other_medications"))&&l(He,{control:e.control,name:"other_medication_allergy_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"Specify Other Medication Allergies:"}),l(je,{children:l(ht,{placeholder:"Details...",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"food_allergies",render:()=>x(De,{children:[x("div",{className:"mb-2",children:[l(Oe,{className:"text-base font-medium",children:"Food Allergies"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:aIe.map(f=>l(He,{control:e.control,name:"food_allergies",render:({field:h})=>{var m;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:w=>w?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),l(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),l(Ze,{})]})}),((c=e.watch("food_allergies"))==null?void 0:c.includes("other_food"))&&l(He,{control:e.control,name:"other_food_allergy_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"Specify Other Food Allergies:"}),l(je,{children:l(ht,{placeholder:"Details...",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"environmental_allergies",render:()=>x(De,{children:[x("div",{className:"mb-2",children:[l(Oe,{className:"text-base font-medium",children:"Environmental Allergies"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:iIe.map(f=>l(He,{control:e.control,name:"environmental_allergies",render:({field:h})=>{var m;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:w=>w?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),l(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),l(Ze,{})]})}),((u=e.watch("environmental_allergies"))==null?void 0:u.includes("other_environmental"))&&l(He,{control:e.control,name:"other_environmental_allergy_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"Specify Other Environmental Allergies:"}),l(je,{children:l(ht,{placeholder:"Details...",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"other_allergies",render:()=>x(De,{children:[x("div",{className:"mb-2",children:[l(Oe,{className:"text-base font-medium",children:"Other Allergies"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:sIe.map(f=>l(He,{control:e.control,name:"other_allergies",render:({field:h})=>{var m;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:w=>w?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),l(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),l(Ze,{})]})}),((d=e.watch("other_allergies"))==null?void 0:d.includes("other"))&&l(He,{control:e.control,name:"other_allergy_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"Describe Other Allergies:"}),l(je,{children:l(on,{placeholder:"Details...",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"other_allergies_manual_input",render:({field:f})=>x(De,{children:[l(Oe,{children:"Manually List Any Other Allergies:"}),l(je,{children:l(on,{placeholder:"e.g., Specific chemical, rare reaction...",...f,value:f.value||""})}),l(Ze,{})]})})]})," "]})," ",x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Medical Conditions"}),l(He,{control:e.control,name:"diagnosed_conditions",render:()=>x(De,{children:[x("div",{className:"mb-4",children:[l(Oe,{className:"text-base",children:"Have you been diagnosed with any of the following?"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:oIe.map(f=>l(He,{control:e.control,name:"diagnosed_conditions",render:({field:h})=>{var m;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:w=>w?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),l(Oe,{className:"font-normal",children:f.label})]},f.id)}},f.id))}),l(Ze,{})]})}),l(He,{control:e.control,name:"other_diagnosed_condition",render:({field:f})=>x(De,{children:[l(Oe,{children:"Other Medical Conditions (if any):"}),l(je,{children:l(ht,{placeholder:"Specify other conditions",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"has_implants",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have any implanted devices or prosthetics?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("has_implants")==="yes"&&l(He,{control:e.control,name:"implants_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"If yes, specify (e.g., pacemaker, joint replacement):"}),l(je,{children:l(ht,{placeholder:"e.g., Pacemaker, Hip Replacement",...f})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Current Medications"}),l(He,{control:e.control,name:"taking_medications",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Are you currently taking any medications?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("taking_medications")==="yes"&&x("div",{className:"space-y-4",children:[t.map((f,h)=>x("div",{className:"flex items-start space-x-2 p-3 border rounded-md relative",children:[x("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 flex-grow",children:[l(He,{control:e.control,name:`current_medications.${h}.name`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Name"}),l(je,{children:l(ht,{placeholder:"e.g., Lisinopril",...m})}),l(Ze,{})]})}),l(He,{control:e.control,name:`current_medications.${h}.dosage`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Dosage"}),l(je,{children:l(ht,{placeholder:"e.g., 10mg",...m})}),l(Ze,{})]})}),l(He,{control:e.control,name:`current_medications.${h}.frequency`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Frequency"}),l(je,{children:l(ht,{placeholder:"e.g., Daily",...m})}),l(Ze,{})]})})]}),x(Fe,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>n(h),children:[l(Qu,{className:"h-4 w-4"}),l("span",{className:"sr-only",children:"Remove Medication"})]})]},f.id)),l(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>r({name:"",dosage:"",frequency:""}),children:"Add Medication"})]})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Recent Health Changes"}),l(He,{control:e.control,name:"recent_health_changes",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Have you experienced any recent health changes (e.g., surgeries, hospitalizations, changes in medications)?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("recent_health_changes")==="yes"&&l(He,{control:e.control,name:"health_changes_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"If yes, please describe and provide dates if applicable:"}),l(je,{children:l(on,{placeholder:"e.g., Knee surgery on 2024-01-15, Started new blood pressure medication last month",...f})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Previous Surgeries / Hospitalizations"}),x("div",{className:"space-y-4",children:[a.map((f,h)=>x("div",{className:"flex items-start space-x-2 p-3 border rounded-md relative",children:[x("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 flex-grow",children:[l(He,{control:e.control,name:`previous_surgeries.${h}.type`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Type / Reason"}),l(je,{children:l(ht,{placeholder:"e.g., Appendectomy",...m})}),l(Ze,{})]})}),l(He,{control:e.control,name:`previous_surgeries.${h}.date`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Approx. Date"}),l(je,{children:l(ht,{placeholder:"e.g., 2010",...m})}),l(Ze,{})]})}),l(He,{control:e.control,name:`previous_surgeries.${h}.notes`,render:({field:m})=>x(De,{children:[l(Oe,{children:"Notes"}),l(je,{children:l(ht,{placeholder:"Optional notes",...m})}),l(Ze,{})]})})]}),x(Fe,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>s(h),children:[l(Qu,{className:"h-4 w-4"}),l("span",{className:"sr-only",children:"Remove Surgery"})]})]},f.id)),l(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>i({type:"",date:"",notes:""}),children:"Add Surgery / Hospitalization"})]})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Immunizations & Screenings"}),l(He,{control:e.control,name:"immunizations_up_to_date",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Are your immunizations up to date?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"not_sure"})}),l(Oe,{className:"font-normal",children:"Not Sure"})]})]})}),l(Ze,{})]})}),l(He,{control:e.control,name:"recent_immunizations",render:({field:f})=>x(De,{children:[l(Oe,{children:"If applicable, list recent immunizations (e.g., tetanus, influenza, COVID-19):"}),l(je,{children:l(ht,{placeholder:"e.g., Flu shot (Oct 2024), COVID Booster (Dec 2024)",...f})}),l(Ze,{})]})}),l(He,{control:e.control,name:"recent_medical_screenings",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Have you had any recent medical screenings (e.g., blood work, blood pressure checks)?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("recent_medical_screenings")==="yes"&&l(He,{control:e.control,name:"screenings_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"If yes, list the screenings and dates:"}),l(je,{children:l(ht,{placeholder:"e.g., Blood work (Jan 2025), Colonoscopy (Mar 2024)",...f})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Allergic Reactions to Dental Materials"}),l(He,{control:e.control,name:"dental_material_allergies",render:({field:f})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Have you ever had an allergic reaction to dental materials (e.g., latex, metals, local anesthetics)?"}),l(je,{children:x(js,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dental_material_allergies")==="yes"&&l(He,{control:e.control,name:"dental_material_allergies_details",render:({field:f})=>x(De,{children:[l(Oe,{children:"If yes, please describe the reaction:"}),l(je,{children:l(on,{placeholder:"e.g., Rash from latex gloves, Swelling after local anesthetic",...f})}),l(Ze,{})]})})]}),l(He,{control:e.control,name:"notes",render:({field:f})=>x(De,{children:[l(Oe,{children:"Additional Medical Notes"}),l(je,{children:l(on,{placeholder:"Any other relevant medical information...",...f,value:f.value||""})}),l(Ze,{})]})})]})}const cIe=e=>S.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 698.9 980.66",...e},S.createElement("g",{id:"ID_17","data-name":"ID 17"},S.createElement("path",{d:"M209,373.39c-3.57,2.53-15.52,11.69-18.35,27.51-3.87,21.69,11.85,42.1,27.21,48,.8.31,0,0,18,3.37,18.54,3.5,21.73,4.31,27.52,4,5.38-.31,13.3-.78,20.79-5.81,12.44-8.35,14.88-23.37,16.2-31.49,1.45-8.95,3-18.28-2.75-26.9-1.19-1.8-4.1-5.71-18-11.93s-29-12.95-49.53-11.31A81.45,81.45,0,0,0,209,373.39Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M254.25,394A20.4,20.4,0,0,0,246,404.06c-1.7,4.7-1,8.73-.46,11.92a33.92,33.92,0,0,0,8.25,16.51",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M235.45,391.68c2,.58,6.56,2.2,8.71,6.42,1.05,2,1,4.5,1,9.34-.09,6.56-.13,9.84-1.43,12.67a18.74,18.74,0,0,1-8.71,8.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_16","data-name":"ID 16"},S.createElement("path",{d:"M232,304.6c-13.55,7.4-17.19,22.76-17.43,23.85-.37,1.67-3.36,16.22,5.5,28.43,6.21,8.55,14.57,10.9,31.19,15.59,13.92,3.93,26.26,7.41,41.27,3.67,8.41-2.09,20.34-5.06,24.77-15.59,5.05-12-4-25.25-5.51-27.52-4.47-6.55-10.08-10.25-16.51-13.76C272.23,306.71,250.15,294.66,232,304.6Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M271.12,366.22l-6.42-13.76",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M278.91,319l-11.46,12.38",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M256.9,317.61A35.06,35.06,0,0,1,265.61,335c.88,5,1.92,11-1.37,15.59-1.76,2.45-4.06,3.54-7.34,8.26a38.82,38.82,0,0,0-2.75,4.58",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_15","data-name":"ID 15"},S.createElement("path",{d:"M266.76,235c19.82-.05,51.93,9.27,61.54,35.89,4.83,13.37,5,33.86-6.41,42.31-6.07,4.51-14.39,3.49-30.77,1.28-23.23-3.13-38.41-5.18-48.72-17.94a43,43,0,0,1-9-23.08c-.3-3.27-2-21.81,10.26-32.05C251.17,235.19,260.23,235,266.76,235Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M295.36,259.52a35,35,0,0,0-8.71,6,21.36,21.36,0,0,0-5.5,6.88c-.79,1.71-3.06,6.61-.92,11.92a14.12,14.12,0,0,0,7.34,7.34",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M275.64,253.1a6.23,6.23,0,0,0,.46,4.12c1.07,2,2.93,2.09,4.59,4.13a9.76,9.76,0,0,1,1.83,4.59c1.08,5.26.08,15.5-6.88,18.8a11.49,11.49,0,0,1-6.42.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_14","data-name":"ID 14"},S.createElement("path",{d:"M286.26,162.42c19.81,0,51.92,9.27,61.53,35.9,4.83,13.36,5,33.85-6.41,42.31-6.07,4.5-14.38,3.49-30.77,1.28-23.23-3.14-38.41-5.18-48.71-17.95a42.88,42.88,0,0,1-9-23.08c-.3-3.26-2-21.8,10.26-32C270.66,162.59,279.73,162.44,286.26,162.42Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M290.73,212.05l12.38-2.76",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M303.57,186.36a8.18,8.18,0,0,0-.92,5c.43,2.46,1.93,2.82,3,5.5,1.24,3.27.43,6.51,0,8.26-.88,3.52-2.13,3.86-2.49,6.42-.25,1.78-.05,4.53,2.49,8.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M317.78,196c-1,.47-2,.93-3.21,1.37a40.83,40.83,0,0,1-6.42,1.84",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_13","data-name":"ID 13"},S.createElement("path",{d:"M290.1,149.57c-6.52-17.36,17.07-40.24,24.76-47.69,6.51-6.32,14.95-14.28,24.76-12.84,3.14.45,7.85,2.08,16.51,12.84a110.08,110.08,0,0,1,22.93,51.36c2.19,14.85,3.9,26.47-3.67,34.85-4.54,5-12.4,10.16-19.26,8.26-5.72-1.59-8.54-7.38-10.09-10.09C332.18,161.94,297.12,168.3,290.1,149.57Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M317.08,138.09a20.24,20.24,0,0,1,1.38-9.63c4.37-10.6,16.62-13.06,17.88-13.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_12","data-name":"ID 12"},S.createElement("path",{d:"M385.64,69.87c13.07-5.52,19.61-8.28,25.64-7.69,9.48.93,18.52,7.29,23.08,15.39,1.37,2.43,3.34,6.79,1.28,32.05-2.07,25.49-5,32.77-6.41,35.9-3.77,8.51-7.58,17.09-15.38,19.23-9.16,2.5-18.3-5.38-26.93-12.82s-20.62-17.8-24.36-35.9c-.75-3.66-5.09-26.65,7.7-38.46C372.63,75.37,377,73.54,385.64,69.87Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M382.15,91.43a64.37,64.37,0,0,1,33.48-4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_11","data-name":"ID 11"},S.createElement("path",{d:"M458.72,49.36c7.44-2.23,22.93-5.54,43.59,0a29.66,29.66,0,0,1,11.58,4.82c8.37,5.86,11,14.38,11.93,17.43,1.27,4.32,1.73,9,.91,16.51C526.2,93,523.79,111.6,509.31,134c-9.71,15-15.62,17.46-18.35,18.34a27.34,27.34,0,0,1-15.59,0c-10.69-2.84-16.62-11.11-21.1-17.42-7.27-10.27-9.62-19.26-13.75-35.77-5-20-7.42-30.15-2.76-37.61C442.29,54.28,450.26,51.89,458.72,49.36Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M461.71,74.52a72.72,72.72,0,0,1,14.22-2.3A73.82,73.82,0,0,1,500.69,75",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_21","data-name":"ID 21"},S.createElement("path",{d:"M543.24,52.35c6.47-.31,14.19-.64,22.93-.92,20.38-.64,26.93-.4,34.86,1.84,7.38,2.08,15.13,4.38,18.34,11,2.27,4.68,1.1,9.11-.92,17.43-7.69,31.72-4.94,25.9-8.25,35.77-6.14,18.25-9.37,27.49-17.43,33a30.4,30.4,0,0,1-17.43,5.5c-9.35-.13-15.92-5-20.17-8.25-11-8.36-15.49-18.93-20.18-30.27-6.51-15.71-10.81-26.09-8-39.18C530,64.92,538.7,56.24,543.24,52.35Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M554.57,73.94a168.57,168.57,0,0,1,17.43,0,165.25,165.25,0,0,1,20.17,2.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_22","data-name":"ID 22"},S.createElement("path",{d:"M639.55,65.19a60.47,60.47,0,0,1,27.51,2.75c7.13,2.48,18.66,6.5,22.93,16.51,1.25,2.93,2.19,7.1-1.83,22.93-5.54,21.77-9.17,36.08-22,46.78-3.81,3.16-9.8,8-18.35,8.25a27.12,27.12,0,0,1-16.51-5.5c-14.42-10.54-14.61-31.73-14.67-38.52,0-4.91.55-1.41,3.67-25.69,1.12-8.73,1.52-12.93,4.58-17.42C629,69.19,635.41,66.47,639.55,65.19Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M641.74,84.51a79.65,79.65,0,0,1,13.76,1.38,80.7,80.7,0,0,1,21.55,7.33",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_23","data-name":"ID 23"},S.createElement("path",{d:"M735.85,98.21a94.57,94.57,0,0,1,13.76,14.67c5.33,7.05,11.93,15.8,13.76,28.44.89,6.17,2.13,14.73-2.75,21.09-4.68,6.1-10,3.73-22,9.17-13.94,6.34-12.92,12.37-27.52,19.26-8.13,3.84-17,8-24.77,4.59-11.59-5.1-12.53-24.47-12.84-30.27-1.05-20.32,8.6-35.3,18.35-50.44,7.67-11.92,12.27-14.92,15.59-16.51C719.13,92.59,731.45,96.55,735.85,98.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M727.26,118.63a56.8,56.8,0,0,1,8.71,4.58c4.93,3.17,7.92,5.09,9.63,8.72.65,1.36,2.25,5.37.46,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_24","data-name":"ID 24"},S.createElement("path",{d:"M778.44,178.21c7.22,5.63,7.75,15.37,8.26,24.77.41,7.47.72,21.63-7.34,28.43-2.25,1.9-3.7,2.12-11,4.59-17,5.74-17.24,7.26-26.6,10.08-14.44,4.35-21.77,6.67-31.19,4.59-4.23-.94-12.31-2.72-17.42-10.09-6-8.6-3.44-19.15-2.76-22,4.16-17.37,21-26.46,34.86-33.94,14.31-7.73,25.74-9.7,33.93-10.09C766.56,174.2,773,174,778.44,178.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M743.86,196.4c-5.12,4.17-6.05,7.43-6,9.63.11,2.71,1.74,3.06,2.75,7.34a18.6,18.6,0,0,1-.45,10.55,17.63,17.63,0,0,1-3.21,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M727.36,206a7.7,7.7,0,0,1,11,9.17",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M755.33,222.08l-14.13-3.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_25","data-name":"ID 25"},S.createElement("path",{d:"M798.71,239.77c7.21,5.62,7.74,15.37,8.26,24.76.4,7.47.72,21.64-7.34,28.43-2.26,1.9-3.7,2.12-11,4.59-17,5.74-17.23,7.27-26.6,10.09-14.43,4.35-21.76,6.67-31.18,4.58-4.23-.93-12.31-2.72-17.43-10.09-6-8.6-3.43-19.15-2.75-22,4.16-17.37,21-26.46,34.85-33.93,14.32-7.73,25.75-9.71,33.94-10.09C786.83,235.75,793.3,235.54,798.71,239.77Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M766.15,257.59a13.94,13.94,0,0,0-4.13,3.67,14.71,14.71,0,0,0-2.75,7.8c-.65,7.94,4.63,10.64,3.67,16.05-.4,2.24-2,5.45-7.8,8.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M745.51,262.18c6.41,1.89,9.67,4.92,11.46,7.34,5,6.69,2.9,14.35,8.26,17.88a10.94,10.94,0,0,0,7.34,1.38",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_26","data-name":"ID 26"},S.createElement("path",{d:"M821.64,308.55c8.76,6.88,7.09,21.59,6.42,27.52-.69,6.1-2.19,19.37-11.92,25.68-3.57,2.31-4.75,1.43-15.59,3.67-16.74,3.46-17.4,6.3-30.27,8.26-6.75,1-14.37,2.11-23.85,0-6.85-1.53-12.87-2.57-17.43-7.34-7-7.31-6.88-18.95-4.58-26.6,3.72-12.4,14.5-18.47,25.68-24.76,14.72-8.29,27.81-9.91,36.69-11a72.9,72.9,0,0,1,24.76.92C816.54,306,819.09,306.55,821.64,308.55Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M764.14,318c1.25.53,12.13,5.36,15.13,17.43A26.08,26.08,0,0,1,771,361.12",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M783.4,317.09a72.3,72.3,0,0,0-3.21,11c-.93,4.49-5,24.31,2.75,28.89a7.69,7.69,0,0,0,4.59.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_27","data-name":"ID 27"},S.createElement("path",{d:"M829,370c13.65,6.58,18.38,24.79,18.34,36.69a46,46,0,0,1-10.09,28.43c-5.67,6.9-11.9,10.05-17.42,12.84a71.66,71.66,0,0,1-42.19,7.34c-9.8-1.37-20.8-2.91-29.35-11.93-10.9-11.49-10.37-27.28-10.09-35.77.22-6.76.5-12.78,4.58-18.34,2.25-3.07,5.8-6.2,21.1-11a196.68,196.68,0,0,1,34.39-7.56C815.21,368.54,823.69,367.46,829,370Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M802.1,394.82a23.37,23.37,0,0,0-7.34,9.63c-.65,1.61-3.69,9.13,0,17a20.09,20.09,0,0,0,7.34,8.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M787,397.11a14.91,14.91,0,0,1,5.51,4.59c4.55,6.34,3.24,16.12-1.84,22a18.1,18.1,0,0,1-7.33,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_28","data-name":"ID 28"},S.createElement("path",{d:"M854,468.38c8.92,18.95,2.44,37.45.69,42-1.93,5-5.3,13.3-13.76,19.26-5.45,3.84-10.55,4.95-16.51,6.19-6.83,1.42-19.41,4-34.39-.69-7-2.19-19.86-6.26-28.21-19.26s-6.72-26.8-6.19-30.27c.75-4.83,1.91-13.4,8.95-20.63a31.66,31.66,0,0,1,18-9.13c2.76-.34,2.92.06,8.11.18,8.61.2,19.85.46,30.26-4.81,5.7-2.88,5.12-4.37,8.26-4.82C839,445,849.43,458.73,854,468.38Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M817.16,475.29a20.27,20.27,0,0,0-6,6A20,20,0,0,0,808,492.72a19.55,19.55,0,0,0,3.21,10.09,18.39,18.39,0,0,0,6,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M800.19,475.75a27,27,0,0,1,6,7.8c1.58,3.14,5.39,10.68,1.83,17.43-3.14,6-10.05,7.51-11.46,7.79",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_38","data-name":"ID 38"},S.createElement("path",{d:"M794.8,595.84c4.56.34,11.48.72,20,.69,12.33,0,13.91-.93,18.58,0,14.58,2.9,23.07,16.26,24.07,17.88,7.38,12,5.91,24,4.82,33-1.23,10.09-2.65,21.77-11.7,28.89-7.15,5.64-15.2,5.36-30.95,4.82-16.73-.58-28.5-4.81-37.84-8.26-10.11-3.73-15.23-5.69-18.57-10.31-5.77-8-4.25-18.12-2.75-28.21,1.32-8.83,2.53-17,8.94-24.76C778.14,598.94,790.51,596.49,794.8,595.84Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M822,625.1a17.84,17.84,0,0,0-7.34,6c-3.45,4.92-5.1,13-.92,18.8a15,15,0,0,0,8.26,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M809.13,621.89a31.31,31.31,0,0,1,2.75,5c1.19,2.78,3.64,8.51,2.29,14.68-1.84,8.39-9.63,12.58-11,13.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_37","data-name":"ID 37"},S.createElement("path",{d:"M835.39,690.08c10.91,9.79,13.31,22.74,13.76,25.45,3.91,23.72-13.92,40.85-16.51,43.34-3.83,3.68-9.95,9.56-19.26,11-5,.77-7.51-.23-24.08-5.5-23.88-7.6-27-8.18-32.33-12.39-3.57-2.79-9.58-7.51-13.07-15.82-6.43-15.32.81-30.7,4.81-39.21,3.26-6.92,6-12.73,12.39-16.51,6.16-3.64,12.36-3.41,24.07-2.06C813.62,681.67,827.85,683.31,835.39,690.08Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M798.43,705.68a19.18,19.18,0,0,1,5.5,10.55c.22,1.37,1.43,9.09-4.13,14.67a16.46,16.46,0,0,1-11.46,4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M815.86,711.18a13.44,13.44,0,0,0-8.72,2.75c-5.58,4.55-4.93,13.19-4.58,17.89a35.23,35.23,0,0,0,2.29,10.09",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_36","data-name":"ID 36"},S.createElement("path",{d:"M820.26,802.9c-1,16.59-15.15,26.65-19.26,29.58s-11.42,8.13-21.33,8.25c-5.79.07-12.57-3.39-26.14-10.32-13.92-7.11-18.55-11.07-21.32-13.75-4.13-4-6.87-6.63-9-11-7.1-14.95,2.18-31.71,4.82-36.46,3.12-5.64,6.34-11.44,13.07-14.45,6.05-2.69,12-1.8,21,.51,25.88,6.63,38.82,9.94,47.79,20.82C813,779.77,821.08,789.58,820.26,802.9Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M788.67,791.63c-2,1.64-4.57,3.19-7.33,2.76-2.92-.46-4-2.81-5.51-2.3-2.17.73-2.45,6.31-1.83,10.09a19.93,19.93,0,0,0,4.13,9.17",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M771.25,782.46a28,28,0,0,1,3.66,6.42c1.59,3.91,3.7,9.09,1.38,12.84-2.15,3.48-7.57,4.91-13.3,3.67",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_35","data-name":"ID 35"},S.createElement("path",{d:"M797.89,857c2,11-4.28,22-11.38,28.12-14.45,12.53-34,6.58-38.21,5.29-15.81-4.81-23.86-16.68-28.32-23.25-5.36-7.91-11.45-16.88-8.73-27,2.85-10.65,13.5-15.53,15.08-16.23,11.65-5.12,23.18-.45,35.18,4.41C778.65,835.29,795.18,842,797.89,857Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M790,864.21a36.18,36.18,0,0,1-4.13,6,38.73,38.73,0,0,1-17.42,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_34","data-name":"ID 34"},S.createElement("path",{d:"M765.78,914.21c-.15,11.2-8.37,20.76-16.51,25.45-16.57,9.55-34.61,0-38.52-2.06-14.61-7.73-20.27-20.91-23.39-28.21-3.77-8.78-8-18.75-3.44-28.2,4.82-9.92,16.2-12.69,17.88-13.07,12.42-2.82,22.84,4,33.71,11C751,889.2,766,898.91,765.78,914.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M753,922.06a42.52,42.52,0,0,1-6.66,7A43.14,43.14,0,0,1,734.74,936",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_31","data-name":"ID 31"},S.createElement("path",{d:"M576.88,1024.34c-5.54.29-13.07.64-22,.92-14.61.46-16.4.23-18.34-.92-8.75-5.15-7.85-21.21-6.88-38.52,1.18-21.11,2.08-37.23,13.75-44.94.77-.51,10.05-6.44,19.27-3.21,5.07,1.78,7.76,5.51,11.92,11.46,1.39,2,7.91,11.51,12.38,27.06.49,1.69,1.7,9.84,4.13,26.14,1,7.07,1.54,10.68-.46,14.22C587.41,1022.28,580.15,1023.85,576.88,1024.34Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M551.53,1015.86l19.72-.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_41","data-name":"ID 41"},S.createElement("path",{d:"M514.51,948.22c5.39,12.13,7,24.44,8.72,37.6,2.06,16.22,3.1,24.47,0,29.81-1.13,1.94-4.15,7.15-10.55,9.63-2.8,1.09-4,.69-12.84.46-13.92-.36-15.73.48-22-.92-5.47-1.21-8.2-1.81-10.55-3.67-7.71-6-6.41-19.24-5-33,1.12-11.29,2.52-24,11-37.14,4.55-7.05,9-14,17.43-15.59a22.57,22.57,0,0,1,19.26,6A21.19,21.19,0,0,1,514.51,948.22Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M482,1014.25c3.07.71,6.44,1.35,10.09,1.84a110,110,0,0,0,11,.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_42","data-name":"ID 42"},S.createElement("path",{d:"M438.84,1015.63a127.59,127.59,0,0,1-24.76-3.21c-12-2.76-14.34-5.1-15.13-6-6.8-7.39-3.59-20.37-1.38-29.35,2.4-9.75,6.28-16.18,11.47-24.77,5.65-9.37,8.71-14.29,15.13-17.88,2.73-1.53,9.64-5.39,17.88-3.21,9.44,2.5,13.6,11,14.22,12.38,1.16,2.48,1.55,6.42,2.29,14.22a141.45,141.45,0,0,1,.92,16.51,87.13,87.13,0,0,1-1.83,19.26c-1.48,6.72-2.24,10.17-5,13.76C448.22,1013,442,1014.91,438.84,1015.63Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M414,998.25a29.24,29.24,0,0,0,20.17,4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_45","data-name":"ID 45"},S.createElement("path",{d:"M259.15,886.31c-.87-.72-16.53-13.95-13.3-30.27,1.45-7.33,6-11.72,12.38-17.89,11.64-11.24,24.16-15,31.19-17,8.66-2.46,13.79-3.84,20.18-1.83,1.13.36,10.77,3.57,15.13,13.3,3,6.68,1.86,12.79.92,17.89-1.51,8.13-5,13.62-7.8,17.88a70.54,70.54,0,0,1-16.51,17.43c-6.21,4.71-9.32,7.06-14.22,8.25C273.17,897.5,260.76,887.63,259.15,886.31Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M278.17,880.63a32.49,32.49,0,0,0-10.54-6c-2.28-.75-3.79-.94-5.05-2.29-2.3-2.47-1.78-6.73-.92-10.09",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_46","data-name":"ID 46"},S.createElement("path",{d:"M220.63,765.24a104,104,0,0,1,18.8-8.72A95.14,95.14,0,0,1,272,751c11.72.23,17.58.35,22.93,4.59,10.31,8.16,9.5,24.24,9.17,30.72-.29,5.75-.43,15.89-7.34,24.77a40.08,40.08,0,0,1-7.33,6.87c-5.32,4.11-16.43,12.47-33,15.14-10.1,1.62-19.78,3.17-28.89-2.29-8.61-5.16-11.83-13.65-16-24.77-3.59-9.43-6.36-16.74-3.67-25.22C210.55,772.12,217.48,767.19,220.63,765.24Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M263.51,773a17.11,17.11,0,0,0-6.88,11c-.06.43-1.29,9.92,5,13.76a11.09,11.09,0,0,0,6.88,1.37",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M242.41,783.12a16.66,16.66,0,0,1,9.17,3.67,16.44,16.44,0,0,1,2.76,22.47",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_47","data-name":"ID 47"},S.createElement("path",{d:"M262.82,673.06c12.52,6.46,18.06,18.41,19.72,22.47a45.83,45.83,0,0,1,1.83,28.89c-1.47,5.59-4.29,18.65-14.21,22.93a17.6,17.6,0,0,1-6.88,1.38c-21.73.49-29,15.15-45.86,14.21a35.53,35.53,0,0,1-17.89-6.42c-15.44-10.41-17.91-29.07-18.8-35.77-1.09-8.19-2.48-18.74,3.67-28,1.72-2.59,5.91-7.88,24.76-14.22C233.41,670.41,248.11,665.47,262.82,673.06Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M237,698.48a29.53,29.53,0,0,0-6.16,10.09c-1.39,3.9-3.25,9.1-.92,11.93,2.61,3.16,7.94.29,12.84,4.12a12,12,0,0,1,3.67,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M220.25,705.36a22.28,22.28,0,0,1,6,3.67c4.92,4.25,9.86,12.4,7.34,19.72a13.39,13.39,0,0,1-3.21,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_48","data-name":"ID 48"},S.createElement("path",{d:"M196.32,591.43a232.08,232.08,0,0,1,24.31-.46c11.62.38,17.53.63,22.93,3.21,10.85,5.2,15.85,15.2,17.88,19.26,4.72,9.42,5,17.8,5.05,22.93.13,7.83.29,16.64-5.51,23.39-3,3.48-6.19,4.82-12.38,7.34-14.56,5.91-19.36,2.62-37.14,7.79-7.81,2.27-9.59,3.69-14.22,3.21-8.67-.9-14.63-7.14-17.89-10.55a50.16,50.16,0,0,1-11.92-22.47c-1.6-6.53-6-24.31,5-39C180.34,595.62,191.8,592.42,196.32,591.43Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M221.38,614.27a35.13,35.13,0,0,0-5,10.09c-1.75,5.64-4.07,12-.91,17.42.67,1.16,3,4.69,9.17,6.42",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M207.16,616.56a40.13,40.13,0,0,1,4.59,6c2.69,4.28,5.47,8.7,5,13.76-.63,7.5-7.9,12.07-9.17,12.84",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_18","data-name":"ID 18"},S.createElement("path",{d:"M229.21,453.18c18.65,1.39,28.18,2.2,38.53,8.26,5.7,3.34,13.13,7.69,17,16.51,6.15,14.14-1.68,28.91-4.59,34.39-2,3.71-8.35,15.37-22,22-14.83,7.21-29.06,4.07-45.4.46-11.09-2.45-16.63-3.68-21.1-7.8-12.74-11.75-9.7-33.58-7.8-47.24,1.66-11.85,2.53-18.09,7.8-22.93C198,451,208.49,451.65,229.21,453.18Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M242.79,478.45c-1.57.69-7.71,3.63-9.17,9.63-1,4.12.69,7.64,3.21,12.84a47.29,47.29,0,0,0,7.79,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M224.44,478.45A26,26,0,0,1,230,484c1,1.37,8.49,11.55,4.12,20.18-.63,1.26-2.6,4.61-7.79,6.88",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_44","data-name":"ID 44"},S.createElement("path",{d:"M299.78,936.84c-.87-.71-16.54-13.94-13.3-30.26,1.45-7.33,6-11.73,12.38-17.89,11.63-11.24,24.16-15,31.18-17,8.67-2.46,13.8-3.84,20.18-1.83,1.14.36,10.78,3.57,15.14,13.3,3,6.68,1.86,12.79.91,17.88-1.5,8.14-5,13.62-7.79,17.89A70.54,70.54,0,0,1,342,936.39c-6.22,4.7-9.32,7.06-14.22,8.25C313.8,948,301.39,938.17,299.78,936.84Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M319.31,932.09a35.51,35.51,0,0,1-5.5-4.73,38.75,38.75,0,0,1-9.58-18.53",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_43","data-name":"ID 43"},S.createElement("path",{d:"M369.6,995c-2,0-24.09-1-32.56-17.42-5.16-10-2.45-20.35-.92-26.14,4.47-17,16.77-26,30.72-36.23,5.59-4.1,10.55-6.91,17-7.34,2.36-.16,10.27-.68,15.59,4.59,3.91,3.85,4.39,8.8,5.05,15.59.51,5.24.1,8.71-1.38,20.64-1.53,12.36-2.3,18.56-2.55,19.45-2,7.2-4.85,17.56-14,23.2C380.19,995.27,373.67,995.1,369.6,995Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M377.68,978.48a35.56,35.56,0,0,1-7.25.17,38.69,38.69,0,0,1-19.51-7.36",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_33","data-name":"ID 33"},S.createElement("path",{d:"M714.92,979.17a56.7,56.7,0,0,1-15.82,9.63c-6,2.42-21,8.4-32.33,2.07-8.18-4.56-10.5-13.82-15.14-32.33-2.89-11.56-5.73-23.51-1.37-37.15,1.94-6.07,4-12.5,9.63-15.14,9.39-4.38,21.84,5,31.64,12.39a82.83,82.83,0,0,1,22.7,26.14c4.69,8.52,9.3,17.2,6.19,26.14A20.67,20.67,0,0,1,714.92,979.17Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M706.18,967.57a42.81,42.81,0,0,1-19,12.91",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_32","data-name":"ID 32"},S.createElement("path",{d:"M652.32,1007.38c-3.43,1.25-8.65,3-15.13,4.81-13.83,3.79-20.77,5.34-26.83,3.44-8.8-2.76-13.5-10.42-15.13-13.07-2.31-3.74-4.06-8.85-2.07-35.08,1.94-25.5,4.31-29.14,6.88-31.65,5.16-5,14.7-9,23.39-5.5,2.9,1.17,5.13,3,10.32,9.63,6.58,8.44,11.3,14.49,16.51,25.45,7.06,14.88,11.51,24.24,7.79,33.71A22.67,22.67,0,0,1,652.32,1007.38Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M638.35,997.28a42.05,42.05,0,0,1-8.64,4.28,43.14,43.14,0,0,1-13.26,2.53",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_54","data-name":"ID 54"},S.createElement("path",{d:"M343.25,453.41c-2.43,1.73-10.58,8-12.51,18.76-2.64,14.79,8.08,28.71,18.56,32.74.55.21,0,0,12.3,2.29,12.65,2.39,14.82,2.94,18.77,2.71,3.67-.21,9.07-.53,14.18-4C403,500.26,404.7,490,405.6,484.48c1-6.11,2-12.47-1.88-18.35-.81-1.23-2.8-3.89-12.3-8.13s-19.8-8.84-33.78-7.72A55.63,55.63,0,0,0,343.25,453.41Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M374.09,467.44a14,14,0,0,0-5.63,6.88,14.79,14.79,0,0,0-.31,8.14,23.13,23.13,0,0,0,5.63,11.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M361.27,465.88c1.37.4,4.47,1.51,5.94,4.38.71,1.39.71,3.07.66,6.37-.06,4.47-.09,6.71-1,8.64a12.84,12.84,0,0,1-5.94,5.94",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_55","data-name":"ID 55"},S.createElement("path",{d:"M357,507.83c12.71.94,19.21,1.49,26.27,5.63,3.89,2.27,8.95,5.24,11.57,11.26,4.19,9.64-1.15,19.71-3.13,23.45a34.27,34.27,0,0,1-15,15c-10.11,4.92-19.82,2.78-31,.32-7.56-1.67-11.34-2.51-14.39-5.32-8.69-8-6.62-22.9-5.32-32.21,1.13-8.09,1.72-12.34,5.32-15.64C335.72,506.34,342.88,506.78,357,507.83Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M366.27,525.06c-1.06.47-5.25,2.47-6.25,6.56-.69,2.82.47,5.21,2.19,8.76a32.45,32.45,0,0,0,5.31,7.82",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M353.76,525.06a17.39,17.39,0,0,1,3.75,3.75c.69.93,5.79,7.87,2.82,13.76a10.2,10.2,0,0,1-5.32,4.69",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_53","data-name":"ID 53"},S.createElement("path",{d:"M365.84,441.28c-4.45-11.84,11.64-27.44,16.89-32.52,4.44-4.31,10.19-9.74,16.88-8.76,2.14.31,5.36,1.42,11.26,8.76a75,75,0,0,1,15.64,35c1.49,10.13,2.66,18-2.5,23.77-3.1,3.43-8.46,6.92-13.14,5.63-3.9-1.09-5.82-5-6.88-6.89C394.54,449.72,370.63,454.06,365.84,441.28Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M384.24,433.46a13.89,13.89,0,0,1,.94-6.57c3-7.23,11.34-8.91,12.2-9.07",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_52","data-name":"ID 52"},S.createElement("path",{d:"M430.16,376.92c8.91-3.77,13.37-5.66,17.48-5.25a21.24,21.24,0,0,1,15.74,10.49c.94,1.66,2.28,4.63.88,21.86-1.42,17.38-3.43,22.35-4.37,24.48-2.58,5.81-5.18,11.66-10.5,13.11-6.24,1.71-12.48-3.66-18.36-8.74S417,420.74,414.42,408.39c-.51-2.49-3.47-18.18,5.25-26.23C421.29,380.67,424.24,379.42,430.16,376.92Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M427.78,388.61a44.76,44.76,0,0,1,15-3.44,43.72,43.72,0,0,1,7.82.32",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_51","data-name":"ID 51"},S.createElement("path",{d:"M480,362.93c5.08-1.52,15.65-3.78,29.73,0a20.11,20.11,0,0,1,7.9,3.28,21.58,21.58,0,0,1,8.13,11.89c.87,2.94,1.18,6.11.63,11.26-.36,3.36-2,16-11.89,31.27-6.62,10.23-10.64,11.91-12.51,12.51a18.65,18.65,0,0,1-10.63,0c-7.29-1.94-11.33-7.57-14.39-11.88-5-7-6.56-13.13-9.38-24.4-3.41-13.63-5.05-20.55-1.88-25.64S474.23,364.65,480,362.93Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M485,375.08a49,49,0,0,1,9.69-1.56,50.15,50.15,0,0,1,16.89,1.87",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_61","data-name":"ID 61"},S.createElement("path",{d:"M537.64,365c4.41-.21,9.68-.43,15.63-.62,13.9-.44,18.37-.28,23.77,1.25,5,1.42,10.32,3,12.51,7.5,1.55,3.2.76,6.21-.62,11.89-5.25,21.63-3.37,17.66-5.63,24.39-4.18,12.45-6.39,18.75-11.89,22.52a20.69,20.69,0,0,1-11.88,3.75c-6.38-.09-10.86-3.41-13.76-5.63-7.47-5.7-10.56-12.9-13.76-20.64-4.44-10.71-7.37-17.79-5.43-26.71C528.57,373.53,534.54,367.62,537.64,365Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M548.36,374.69a112.07,112.07,0,0,1,11.89,0A114.47,114.47,0,0,1,574,376.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_62","data-name":"ID 62"},S.createElement("path",{d:"M603.32,373.72a41.27,41.27,0,0,1,18.76,1.88c4.86,1.69,12.73,4.43,15.64,11.26.85,2,1.49,4.84-1.25,15.63-3.78,14.85-6.26,24.61-15,31.9-2.59,2.16-6.67,5.47-12.51,5.63a18.52,18.52,0,0,1-11.25-3.75c-9.84-7.19-10-21.64-10-26.27,0-3.35.37-1,2.5-17.52.76-6,1-8.82,3.13-11.88A18.47,18.47,0,0,1,603.32,373.72Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M604.81,383.9a54.48,54.48,0,0,1,24.08,5.94",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_64","data-name":"ID 64"},S.createElement("path",{d:"M696.66,447.68C706.45,451,711.14,463,712.09,471a31.38,31.38,0,0,1-4.49,20.08c-3.28,5.14-7.24,7.78-10.75,10.12a48.79,48.79,0,0,1-28,8.43c-6.75-.12-14.32-.26-20.85-5.66-8.32-6.89-9.26-17.63-9.76-23.39-.41-4.6-.71-8.7,1.59-12.8,1.28-2.26,3.42-4.67,13.38-9.18a134.51,134.51,0,0,1,22.67-7.95C687.22,447.81,692.87,446.38,696.66,447.68Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M680.5,466.68a16,16,0,0,0-4.18,7.12c-.31,1.15-1.74,6.49,1.4,11.49a13.69,13.69,0,0,0,5.64,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M670.44,469.47a10.18,10.18,0,0,1,4.11,2.66c3.6,3.92,3.51,10.65.56,15.05a12.5,12.5,0,0,1-4.55,4",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_65","data-name":"ID 65"},S.createElement("path",{d:"M721.66,512.22c7.59,12.1,4.72,25.16,3.91,28.36-.9,3.52-2.5,9.44-7.74,14.16-3.37,3-6.74,4.22-10.67,5.55-4.5,1.52-12.81,4.32-23.34,2.36-4.89-.92-14-2.61-20.67-10.73a30.34,30.34,0,0,1-6.68-20c.11-3.33.19-9.24,4.36-14.71a21.7,21.7,0,0,1,11.46-7.66c1.84-.45,2-.19,5.51-.54,5.84-.57,13.47-1.31,20.09-5.74,3.62-2.42,3.1-3.38,5.2-3.94C709.61,497.6,717.79,506.07,721.66,512.22Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M697.3,516.93a13.66,13.66,0,0,0-4.78,12.55,13.35,13.35,0,0,0,3,6.57,12.59,12.59,0,0,0,4.49,3.23",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M685.85,518.63a18.65,18.65,0,0,1,4.68,4.79c1.32,2,4.52,6.79,2.67,11.65-1.64,4.31-6.2,5.91-7.12,6.22",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_63","data-name":"ID 63"},S.createElement("path",{d:"M673.15,398a65.26,65.26,0,0,1,8,11.15c3,5.24,6.66,11.74,6.77,20.45.06,4.25.13,10.15-3.73,14-3.71,3.71-7.12,1.63-15.7,4.24-10,3-9.84,7.22-20.32,10.58-5.84,1.87-12.19,3.9-17.15.89-7.39-4.48-6.3-17.66-6-21.61,1.09-13.83,9-23.1,16.89-32.47,6.25-7.38,9.63-9,12-9.78C662.34,392.75,670.32,396.52,673.15,398Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M666.24,410.38a38.69,38.69,0,0,1,5.48,3.87c3,2.58,4.9,4.14,5.74,6.75a10.86,10.86,0,0,1-.71,7.79",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_71","data-name":"ID 71"},S.createElement("path",{d:"M559.58,786.61c-3.78.2-8.92.44-15,.63-10,.31-11.19.15-12.51-.63-6-3.51-5.36-14.46-4.7-26.27.81-14.4,1.43-25.39,9.39-30.65.52-.34,6.85-4.39,13.13-2.19,3.46,1.22,5.29,3.76,8.13,7.82a63,63,0,0,1,8.45,18.45c.33,1.16,1.16,6.71,2.81,17.83.72,4.82,1.05,7.28-.31,9.7C566.76,785.2,561.8,786.28,559.58,786.61Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M542.29,780.83l13.45-.32",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_81","data-name":"ID 81"},S.createElement("path",{d:"M517,734.7c3.68,8.27,4.8,16.66,6,25.64,1.4,11.06,2.11,16.69,0,20.33a14.42,14.42,0,0,1-7.2,6.57c-1.91.74-2.74.47-8.75.31-9.49-.24-10.73.33-15-.62-3.72-.83-5.58-1.24-7.19-2.51-5.25-4.12-4.37-13.12-3.44-22.51.76-7.7,1.71-16.37,7.51-25.34,3.1-4.8,6.16-9.55,11.88-10.63A15.42,15.42,0,0,1,513.92,730,14.53,14.53,0,0,1,517,734.7Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M494.9,779.73c2.09.48,4.39.92,6.88,1.25,2.7.36,5.21.55,7.5.63",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_82","data-name":"ID 82"},S.createElement("path",{d:"M465.44,780.67a86.77,86.77,0,0,1-16.89-2.19c-8.17-1.88-9.78-3.48-10.32-4.06-4.63-5-2.45-13.9-.94-20,1.64-6.65,4.29-11,7.82-16.89,3.86-6.39,5.94-9.74,10.32-12.2,1.87-1,6.57-3.67,12.2-2.19,6.43,1.71,9.27,7.54,9.69,8.45.79,1.69,1.06,4.38,1.57,9.69a99.45,99.45,0,0,1,.62,11.26,59.38,59.38,0,0,1-1.25,13.14c-1,4.58-1.53,6.93-3.44,9.38A16.52,16.52,0,0,1,465.44,780.67Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M448.47,768.82A19.9,19.9,0,0,0,462.23,772",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_83","data-name":"ID 83"},S.createElement("path",{d:"M418.21,766.6c-1.38,0-16.43-.65-22.2-11.89-3.52-6.84-1.67-13.87-.63-17.82,3.05-11.58,11.44-17.73,21-24.71,3.81-2.8,7.19-4.71,11.57-5,1.61-.1,7-.46,10.63,3.13,2.66,2.63,3,6,3.44,10.64.35,3.57.07,5.93-.94,14.07-1,8.43-1.57,12.66-1.74,13.27-1.35,4.91-3.3,12-9.51,15.81C425.44,766.78,421,766.67,418.21,766.6Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M423.73,755.34a24.81,24.81,0,0,1-4.94.11,26.43,26.43,0,0,1-13.32-5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_72","data-name":"ID 72"},S.createElement("path",{d:"M611,775c-2.34.86-5.9,2.08-10.32,3.28-9.43,2.59-14.16,3.65-18.29,2.35-6-1.88-9.21-7.1-10.32-8.91-1.58-2.55-2.77-6-1.41-23.93,1.32-17.38,2.94-19.87,4.69-21.58,3.52-3.43,10-6.14,16-3.75,2,.8,3.5,2,7,6.57,4.49,5.75,7.7,9.87,11.26,17.35,4.82,10.15,7.85,16.53,5.31,23A15.32,15.32,0,0,1,611,775Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M601.5,768.16a29.16,29.16,0,0,1-14.94,4.64",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_75","data-name":"ID 75"},S.createElement("path",{d:"M690.21,615.19c2.91,1.12,7.35,2.74,12.89,4.38,8,2.4,9.26,2.14,12.12,3.67,8.95,4.77,11.86,15.17,12.19,16.42,2.46,9.27-.88,16.85-3.37,22.51-2.78,6.34-6,13.69-13.33,16.55-5.78,2.27-11,.5-21.16-3-10.8-3.68-17.65-8.76-23.07-12.85-5.86-4.43-8.82-6.72-10.09-10.4-2.19-6.35.8-12.66,3.77-19,2.6-5.51,5-10.6,10.72-14.41C678.72,613.93,687.28,614.76,690.21,615.19Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M702.17,639.65a12.25,12.25,0,0,0-6,2.44c-3.23,2.53-5.89,7.45-4.31,12.1a10.25,10.25,0,0,0,4.3,5.22",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M694.42,635a19.94,19.94,0,0,1,.8,3.84c.23,2,.71,6.27-1.39,10-2.86,5.12-8.77,6.32-9.81,6.51",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_74","data-name":"ID 74"},S.createElement("path",{d:"M698.12,684.72a30.75,30.75,0,0,1,4,19.33c-2.13,16.25-17.14,23.92-19.32,25-3.23,1.65-8.38,4.28-14.75,3.39-3.39-.47-4.85-1.63-14.63-8.34-14.1-9.67-16-10.66-18.67-14.46-1.77-2.53-4.77-6.79-5.41-12.91-1.17-11.26,6.59-19.88,10.88-24.64,3.49-3.88,6.42-7.13,11.34-8.34,4.74-1.16,8.74.21,16.12,3.4C685.57,674.94,694.53,678.81,698.12,684.72Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M670.91,687.61a13.07,13.07,0,0,1,1.52,8c-.13.94-.87,6.22-5.59,8.77a11.21,11.21,0,0,1-8.39.73",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M681.2,694.64a9.14,9.14,0,0,0-6.23.08c-4.54,1.86-5.82,7.64-6.52,10.77a24.24,24.24,0,0,0-.49,7",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_84","data-name":"ID 84"},S.createElement("path",{d:"M393.1,667.59c9.56.93,16.09,7.1,18.16,9.26a31.31,31.31,0,0,1,8.45,17.84c.48,3.91,2,12.9-3.22,18.12a12.1,12.1,0,0,1-4,2.61C398.83,721.21,397.91,732.34,387,736a24.09,24.09,0,0,1-12.95.44c-12.41-2.7-18.68-13.89-20.94-17.92-2.75-4.92-6.3-11.25-4.73-18.65.44-2.07,1.76-6.48,12.11-15.25C373.8,673.33,381.86,666.49,393.1,667.59Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M383.12,690.22a20,20,0,0,0-1.35,7.95c.1,2.82.23,6.58,2.42,7.78,2.45,1.35,5.11-1.81,9.18-.62a8.36,8.36,0,0,1,3.6,2.27",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M374.27,698.79a15.47,15.47,0,0,1,4.71.82c4.18,1.45,9.37,5.37,9.62,10.65a9.14,9.14,0,0,1-.76,4",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_85","data-name":"ID 85"},S.createElement("path",{d:"M330.37,632.64a156.5,156.5,0,0,1,15.29-6.42c7.45-2.69,11.27-4,15.33-3.75,8.19.55,13.88,5.63,16.2,7.69a34.52,34.52,0,0,1,9,13.26c2.06,4.92,4.38,10.47,2.41,16.2-1,3-2.71,4.62-6,7.78-7.73,7.42-11.6,6.54-21.57,14.31-4.37,3.4-5.14,4.75-8.19,5.62-5.72,1.61-11.07-.84-14-2.18a34.12,34.12,0,0,1-13.22-11.23c-2.66-3.73-9.91-13.9-6.64-26C321.31,639.33,327.76,634.41,330.37,632.64Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M352,640.79a24.06,24.06,0,0,0-.65,7.67c.31,4,.46,8.65,3.81,11.27.72.56,3.09,2.21,7.43,1.75",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M343.58,645.83a27.77,27.77,0,0,1,4.41,2.62c2.79,2,5.66,4.13,6.67,7.45,1.49,4.9-2,9.64-2.58,10.45",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),S.createElement("g",{id:"ID_73","data-name":"ID 73"},S.createElement("path",{d:"M653.72,755.81a38.58,38.58,0,0,1-10.79,6.56c-4.12,1.65-14.3,5.73-22,1.41-5.58-3.11-7.16-9.42-10.32-22-2-7.88-3.91-16-.94-25.33,1.32-4.14,2.72-8.53,6.57-10.32,6.4-3,14.89,3.41,21.57,8.44a56.62,56.62,0,0,1,15.49,17.83c3.19,5.81,6.34,11.73,4.22,17.83A14.22,14.22,0,0,1,653.72,755.81Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),S.createElement("path",{d:"M648.06,750.66a29.16,29.16,0,0,1-14.94,4.64",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}))),LW=e=>({11:"UR Central Incisor",12:"UR Lateral Incisor",13:"UR Canine",14:"UR 1st Premolar",15:"UR 2nd Premolar",16:"UR 1st Molar",17:"UR 2nd Molar",18:"UR 3rd Molar",21:"UL Central Incisor",22:"UL Lateral Incisor",23:"UL Canine",24:"UL 1st Premolar",25:"UL 2nd Premolar",26:"UL 1st Molar",27:"UL 2nd Molar",28:"UL 3rd Molar",31:"LR Central Incisor",32:"LR Lateral Incisor",33:"LR Canine",34:"LR 1st Premolar",35:"LR 2nd Premolar",36:"LR 1st Molar",37:"LR 2nd Molar",38:"LR 3rd Molar",41:"LL Central Incisor",42:"LL Lateral Incisor",43:"LL Canine",44:"LL 1st Premolar",45:"LL 2nd Premolar",46:"LL 1st Molar",47:"LL 2nd Molar",48:"LL 3rd Molar",51:"UR Primary Central Incisor",52:"UR Primary Lateral Incisor",53:"UR Primary Canine",54:"UR Primary 1st Molar",55:"UR Primary 2nd Molar",61:"UL Primary Central Incisor",62:"UL Primary Lateral Incisor",63:"UL Primary Canine",64:"UL Primary 1st Molar",65:"UL Primary 2nd Molar",71:"LR Primary Central Incisor",72:"LR Primary Lateral Incisor",73:"LR Primary Canine",74:"LR Primary 1st Molar",75:"LR Primary 2nd Molar",81:"LL Primary Central Incisor",82:"LL Primary Lateral Incisor",83:"LL Primary Canine",84:"LL Primary 1st Molar",85:"LL Primary 2nd Molar"})[e]||`Tooth ${e}`,x2={healthy:"#10B981",decayed:"#DC2626",filled:"#6B7280",missing:"#6B7280","treatment-planned":"#F97316","root-canal":"#8B5CF6",extraction:"#EF4444",crown:"#F59E0B","has-treatment-before":"#3B82F6","recommended-to-be-treated":"#FBBF24",selected:"#BFDBFE",default:"#D1D5DB"},uIe=e=>{const t={},r="healthy",n=i=>{var s,o,c;return((o=(s=e==null?void 0:e[i])==null?void 0:s.conditions)==null?void 0:o.length)>0?e[i].conditions[0]:((c=e==null?void 0:e[i])==null?void 0:c.condition)||r},a=i=>{var s;return((s=e==null?void 0:e[i])==null?void 0:s.isSelected)===!0};for(let i=11;i<=18;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=21;i<=28;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=31;i<=38;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=41;i<=48;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=51;i<=55;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=61;i<=65;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=71;i<=75;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=81;i<=85;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};return t},jW=[{label:"Healthy",value:"healthy"},{label:"Decayed",value:"decayed"},{label:"Filled",value:"filled"},{label:"Missing",value:"missing"},{label:"Planned Tx",value:"treatment-planned"},{label:"Root Canal",value:"root-canal"},{label:"Extraction",value:"extraction"},{label:"Crown",value:"crown"},{label:"Prior Tx",value:"has-treatment-before"},{label:"Recommend Tx",value:"recommended-to-be-treated"}],_R=S.forwardRef(({initialState:e,onToothSelect:t,readOnly:r=!1,domain:n,domainConditions:a},i)=>{console.log("DentalChart: Render triggered. Initial prop value:",JSON.stringify(e)),console.log("DentalChart: Domain received:",n),console.log("DentalChart: DomainConditions received:",a);const[s,o]=S.useState({}),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,m]=S.useState(new Set),[w,g]=S.useState(null),[y,b]=S.useState(null),_=S.useRef(null);S.useEffect(()=>{console.log("DentalChart: useEffect for initialState triggered. Prop value:",JSON.stringify(e));const T=uIe(e);console.log("DentalChart: Regenerated initialTeeth based on prop:",JSON.stringify(T)),o(T),console.log("DentalChart: setTeethData called with regenerated state."),Object.entries(T).filter(([,R])=>R.isSelected).map(([R])=>parseInt(R,10))},[e]),S.useImperativeHandle(i,()=>({getTeethData:()=>{const T={};return Object.entries(s).forEach(([R,j])=>{T[parseInt(R,10)]={...j,conditions:j.isSelected?[j.condition]:["healthy"]}}),T},getLastActiveCondition:()=>c}));const N=S.useCallback(T=>{let R=T;for(;R&&R.tagName!=="svg";){if(R.tagName==="g"&&R.id.startsWith("ID_")){const j=R.id.substring(3),Y=parseInt(j,10);if(!isNaN(Y)&&s[Y])return R}R=R.parentNode}return null},[s]),E=S.useCallback(T=>{const R=N(T);if(R){const j=R.id.substring(3);return parseInt(j,10)}return null},[N]);S.useCallback((T,R)=>{o(j=>{const Y=j[T];if(!Y)return j;const Z=R;let re=Y.isSelected;if(R==="missing"&&(re=!1),Y.condition!==Z){const q={...j,[T]:{...Y,condition:Z,isSelected:re}};if(w&&w.id===T&&g(B=>B?{...B,condition:Z}:null),R==="missing"&&Y.isSelected&&!re){const B=Object.values(q).filter(G=>G.isSelected).map(G=>G.id);t==null||t(B)}return m(B=>{const G=new Set(B);return G.add(T),G}),q}return j})},[w,t]);const C=S.useCallback(T=>{var Y;if(r)return;let R=[],j=!1;if(o(Z=>{const re=Z[T];if(!re)return Z;const z=!re.isSelected;j=z;const q={...Z,[T]:{...re,isSelected:z,condition:z?re.condition:"healthy"}};return R=Object.values(q).filter(B=>B.isSelected).map(B=>B.id),q}),j||m(Z=>{const re=new Set(Z);return re.delete(T),re}),t==null||t(R),j){const Z=s[T];if(!Z)return;const re=(Y=_.current)==null?void 0:Y.querySelector(`#ID_${T}`);if(re&&_.current){const z=_.current.getBoundingClientRect(),q=re.getBoundingClientRect(),B=q.top-z.top+q.height/2+_.current.scrollTop,G=q.left-z.left+q.width/2+_.current.scrollLeft;g({id:T,name:LW(T),condition:Z.condition,top:B,left:G}),b({top:B,left:G})}}else g(null),d!==T&&b(null);return j},[r,t,s,d]),D=S.useCallback(T=>{if(r)return;const R=T;u(j=>{const Y=j===R?null:R;return Y&&o(Z=>{let re=!1;const z={...Z},q=Object.entries(Z).filter(([B,G])=>{const Q=parseInt(B,10);return G.isSelected&&!h.has(Q)});return q.length>0&&q.forEach(([B,G])=>{const Q=parseInt(B,10);z[Q]={...G,condition:Y},m(O=>new Set(O).add(Q)),re=!0}),re?z:Z}),Y})},[r,h]),P=S.useCallback(T=>{if(r)return;const R=E(T.target);R!==null&&(C(R),h.has(R)||u(null))},[r,C,h]),F=S.useCallback(T=>{if(r)return;const R=E(T.target);if(R!==null){f(R);const j=N(T.target);if(j&&_.current){const Y=_.current.getBoundingClientRect(),Z=j.getBoundingClientRect(),re=Z.top-Y.top+Z.height/2+_.current.scrollTop,z=Z.left-Y.left+Z.width/2+_.current.scrollLeft;b({top:re,left:z})}}},[r,N]),L=S.useCallback(()=>{f(null),w||b(null)},[w]);S.useEffect(()=>{var R;const T=(R=_.current)==null?void 0:R.querySelector("svg");T&&(T.querySelectorAll(".condition-indicator-dot").forEach(j=>j.remove()),T.querySelectorAll(".tooth-number-text").forEach(j=>j.remove()),Object.entries(s).forEach(([j,Y])=>{const Z=parseInt(j,10),re=T.querySelector(`#ID_${Z}`);if(!re)return;re.dataset.toothId=j,re.classList.remove("tooth-selected","tooth-missing","tooth-hovered","tooth-selection-processed");const z=re.querySelector("path:first-of-type");if(z&&z.setAttribute("fill","var(--tooth-default-fill, #fff)"),z){let q="var(--tooth-default-fill, #fff)";Y.condition!=="healthy"&&(q=x2[Y.condition]||"var(--tooth-default-fill, #fff)"),Y.condition==="missing"?z.setAttribute("fill","transparent"):z.setAttribute("fill",q)}Y.isSelected&&!r&&(h.has(Z)?re.classList.add("tooth-selection-processed"):re.classList.add("tooth-selected")),!r&&Z===d&&re.classList.add("tooth-hovered"),Y.condition==="missing"&&re.classList.add("tooth-missing")}),r?T.classList.add("opacity-75","cursor-default"):(T.classList.remove("opacity-75","cursor-default"),T.classList.add("cursor-pointer")))},[s,r,h,d]);const W=({tooth:T,name:R,condition:j})=>{const Y=(a&&a.length>0?a.map(Z=>({label:Z.charAt(0).toUpperCase()+Z.slice(1),value:Z})):jW).find(Z=>Z.value===j);return x("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 min-w-[240px] relative",children:[l("div",{className:"absolute -top-2 left-1/2 w-4 h-4 bg-white transform rotate-45 -translate-x-1/2 border-t border-l border-gray-200"}),x("div",{className:"relative",children:[x("div",{className:"flex items-start justify-between mb-2",children:[x("div",{children:[x("h3",{className:"font-medium text-gray-900 text-base",children:["Tooth ",T]}),l("p",{className:"text-sm text-gray-500",children:R})]}),l("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-50",children:l("span",{className:"text-blue-600 text-sm font-medium",children:T})})]}),l("div",{className:"mt-3 pt-3 border-t border-gray-100",children:x("div",{className:"flex items-center gap-2",children:[l("span",{className:"w-3 h-3 rounded-full border border-gray-200",style:{backgroundColor:x2[j]??x2.default}}),l("span",{className:"text-sm text-gray-600 font-medium",children:(Y==null?void 0:Y.label)||j})]})})]})]})};return l(i5,{delayDuration:100,children:l("div",{className:"dental-chart-dialog-content relative",children:x("div",{className:"flex flex-row",children:[!r&&x("div",{className:"w-[200px] flex-shrink-0 pr-2 self-stretch",children:[l("label",{className:"block text-sm font-medium text-gray-700 mb-2 sticky top-0 bg-background z-10",children:"Select Conditions to Apply:"}),l("div",{className:"flex flex-wrap gap-2",children:(a&&a.length>0?a.map(T=>({label:T.charAt(0).toUpperCase()+T.slice(1),value:T})):jW).map(T=>{const R=!Object.values(s).some(Z=>Z.isSelected),j=c===T.value,Y=x2[T.value]||x2.default;return x(Fe,{variant:"ghost",size:"sm",disabled:R&&!c,onClick:()=>D(T.value),className:Lt("w-full text-sm h-auto px-3 py-2.5 rounded-md flex items-center justify-start gap-3 transition-all duration-150 ease-in-out font-medium","focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500",j?"bg-blue-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 text-slate-700",R&&!c?"opacity-50 cursor-not-allowed hover:bg-slate-100":""),children:[l("span",{className:"flex items-center justify-center w-5 h-5 border rounded-full shrink-0",style:j?{backgroundColor:"white",borderColor:"white"}:{borderColor:Y},children:j&&l("span",{className:"w-2.5 h-2.5 bg-blue-500 rounded-full"})}),l("span",{children:T.label})]},T.value)})})]}),l("div",{className:Lt("relative w-full flex-grow pt-2 pb-2 overflow-y-auto max-h-[350px]",r?"cursor-default":"cursor-pointer"),ref:_,onClick:P,onMouseMove:F,onMouseLeave:L,children:l(cIe,{width:"100%",height:"100%",viewBox:"0 0 698.9 980.66"})}),x(s5,{open:y!==null,children:[l(o5,{asChild:!0,children:l("span",{style:{position:"absolute",top:(y==null?void 0:y.top)??0,left:(y==null?void 0:y.left)??0,width:"1px",height:"1px",padding:0,margin:0,pointerEvents:"none",transform:"translate(-50%, -50%)",zIndex:40}})}),l(X2,{side:(()=>{const T=d??(w==null?void 0:w.id);if(T===null)return"top";const R=Math.floor(T/10);return[1,2,5,6].includes(R)?"top":"bottom"})(),align:"center",sideOffset:15,className:"z-50 p-0 border-none shadow-none bg-transparent",avoidCollisions:!0,children:(()=>{const T=d??(w==null?void 0:w.id);if(T===null)return null;const R=s[T];return R?l(W,{tooth:T,name:LW(T),condition:R.condition}):null})()})]})]})})})});_R.displayName="DentalChart";const SR=({value:e={},onChange:t,placeholder:r="Select Teeth...",disabled:n=!1})=>{const[a,i]=S.useState(!1),[s,o]=S.useState(e),c=S.useRef(null);S.useEffect(()=>{o(e)},[e]);const u=g=>{const y={};return Object.entries(g).forEach(([b,_])=>{const N=parseInt(b,10);isNaN(N)||(y[N]={isSelected:!0,conditions:_.conditions})}),y},d=()=>{if(c.current){const g=c.current.getTeethData(),y={};Object.entries(g).forEach(([b,_])=>{var N;_.isSelected&&(y[parseInt(b,10)]={conditions:((N=_.conditions)==null?void 0:N.length)>0?_.conditions:["healthy"]})}),t==null||t(y),o(y)}else console.error("DentalChart ref not available to get data.");i(!1)},f=()=>{i(!1)},h=g=>{n||i(g)},m=Object.keys(e).map(Number).sort((g,y)=>g-y),w=m.length>0?`Selected: ${m.join(", ")}`:"";return x(Vn,{open:a,onOpenChange:h,children:[l(rb,{asChild:!0,children:x("div",{className:"flex items-center gap-2",children:[x(Fe,{variant:"outline",className:"flex items-center gap-1.5",disabled:n,type:"button",children:[l("span",{role:"img","aria-label":"tooth icon",children:"🦷"}),r]}),w&&l("span",{className:"text-sm text-muted-foreground",children:w})]})}),x(Bn,{className:"max-w-4xl",children:[" ",x(Jn,{children:[l(Zn,{children:"Select Affected Teeth"}),l(us,{children:"Use the interactive chart below to select or deselect teeth. Click Confirm to save your selection."})]}),l(_R,{ref:c,initialState:u(s),readOnly:!1},a?"open":"closed"),x(fs,{children:[l(Fe,{variant:"outline",onClick:f,children:"Cancel"}),l(Fe,{onClick:d,children:"Confirm"})]})]})]})};SR.displayName="ToothSelector";const vre=Ie.object({dh_reason_for_visit:Ie.enum(["routine_checkup","tooth_pain","gum_issues","sensitivity","cosmetic_concerns","other"]).optional(),dh_reason_for_visit_other:Ie.string().optional(),dh_chief_complaint:Ie.string().optional(),dh_has_pain:Ie.enum(["yes","no"]).optional(),dh_pain_description:Ie.string().optional(),dh_pain_scale:Ie.enum(["1","2","3","4","5","6","7","8","9","10"]).optional(),dh_pain_duration_onset:Ie.string().optional(),dh_past_treatments:Ie.array(Ie.string()).optional(),dh_past_treatments_other:Ie.string().optional(),dh_brushing_frequency:Ie.enum(["less_than_once","once_a_day","twice_a_day","more_than_twice"]).optional(),dh_flossing_habits:Ie.enum(["yes_daily","no","occasionally"]).optional(),dh_additional_hygiene_products:Ie.string().optional(),dh_technique_tools:Ie.string().optional(),dh_orthodontic_history:Ie.enum(["yes","no"]).optional(),dh_orthodontic_details:Ie.string().optional(),dh_has_records:Ie.enum(["yes","no"]).optional(),dh_xray_frequency:Ie.string().optional(),dh_bite_issues:Ie.enum(["yes","no"]).optional(),dh_bite_symptoms:Ie.string().optional(),dh_cosmetic_concerns:Ie.enum(["yes","no"]).optional(),dh_cosmetic_issues_details:Ie.string().optional(),dh_functional_concerns:Ie.string().optional(),dh_emergency_history:Ie.enum(["yes","no"]).optional(),dh_emergency_details:Ie.string().optional(),dh_additional_summary:Ie.string().optional(),dh_future_goals:Ie.string().optional(),dh_selected_teeth:Ie.record(Ie.string(),Ie.object({conditions:Ie.array(Ie.enum(["healthy","decayed","filled","missing","treatment-planned","root-canal","extraction","crown","has-treatment-before","recommended-to-be-treated"]))})).optional().default({})}),dIe=[{id:"regular_cleanings",label:"Regular Dental Cleanings (Scaling & Polishing)"},{id:"deep_cleaning",label:"Deep Cleaning (Full Mouth Debridement or SRP)"},{id:"fillings",label:"Fillings",subOptions:[{id:"fillings_composite",label:"Composite (White)"},{id:"fillings_amalgam",label:"Amalgam (Silver)"}]},{id:"extractions",label:"Tooth Extractions",subOptions:[{id:"extraction_simple",label:"Simple Extraction"},{id:"extraction_surgical",label:"Surgical Extraction"}]},{id:"crowns",label:"Crowns (Caps)",subOptions:[{id:"crown_porcelain",label:"Porcelain"},{id:"crown_metal",label:"Metal"},{id:"crown_zirconia",label:"Zirconia"}]},{id:"bridges",label:"Bridges"},{id:"rct",label:"Root Canal Treatment (RCT)",subOptions:[{id:"rct_anterior",label:"Anterior Teeth"},{id:"rct_posterior",label:"Posterior Teeth"}]},{id:"implants",label:"Dental Implants",subOptions:[{id:"implant_single",label:"Single Implant"},{id:"implant_multiple",label:"Multiple Implants"}]},{id:"dentures",label:"Dentures",subOptions:[{id:"denture_full",label:"Full Dentures"},{id:"denture_partial",label:"Partial Dentures"}]},{id:"veneers",label:"Veneers"},{id:"whitening",label:"Teeth Whitening"},{id:"orthodontics",label:"Orthodontic Treatment",subOptions:[{id:"ortho_braces",label:"Braces (Metal or Ceramic)"},{id:"ortho_aligners",label:"Clear Aligners (e.g., Invisalign)"}]},{id:"gum_treatments",label:"Gum Treatments",subOptions:[{id:"gum_surgery",label:"Gum Surgery"},{id:"gum_laser",label:"Laser Gum Therapy"}]},{id:"jaw_treatment",label:"Jaw Treatment",subOptions:[{id:"jaw_tmj",label:"TMJ/TMD Therapy"},{id:"jaw_bite_adjustment",label:"Bite Adjustment / Occlusal Correction"}]},{id:"guards",label:"Night Guards or Mouthguards"},{id:"other_treatment",label:"Other (please specify)"}];function fIe({}){var t;const e=ou();return x("div",{className:"space-y-8",children:[x("div",{className:"space-y-2",children:[l("h2",{className:"text-xl font-semibold",children:"Dental History"}),l("p",{className:"text-sm text-muted-foreground",children:"Please provide your detailed dental history."})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Reason for Visit & Chief Complaint"}),l(He,{control:e.control,name:"dh_reason_for_visit",render:({field:r})=>x(De,{children:[l(Oe,{children:"Primary Reason for Visit"}),x(Ur,{onValueChange:r.onChange,value:r.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select reason"})})}),x($r,{children:[l(wt,{value:"routine_checkup",children:"Routine Checkup"}),l(wt,{value:"tooth_pain",children:"Tooth Pain"}),l(wt,{value:"gum_issues",children:"Gum Issues"}),l(wt,{value:"sensitivity",children:"Sensitivity"}),l(wt,{value:"cosmetic_concerns",children:"Cosmetic Concerns"}),l(wt,{value:"other",children:"Other"})]})]}),l(Ze,{})]})}),e.watch("dh_reason_for_visit")==="other"&&l(He,{control:e.control,name:"dh_reason_for_visit_other",render:({field:r})=>x(De,{children:[l(Oe,{children:"If Other, please describe:"}),l(je,{children:l(ht,{placeholder:"Explain reason",...r})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_chief_complaint",render:({field:r})=>x(De,{children:[l(Oe,{children:"Chief Complaint Description"}),l(mi,{children:"Please provide a detailed description of the issue that brought you here. Include when the problem began, how it has progressed, and any pain or discomfort experienced."}),l(je,{children:l(on,{rows:4,placeholder:"Describe your main concern...",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Pain & Sensitivity Details"}),l(He,{control:e.control,name:"dh_has_pain",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you experience any dental pain or sensitivity?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dh_has_pain")==="yes"&&x(_r,{children:[l(He,{control:e.control,name:"dh_pain_description",render:({field:r})=>x(De,{children:[l(Oe,{children:"Pain Description"}),l(mi,{children:"Specify location(s), intensity, frequency, and triggers (temperature, chewing, stress)."}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Upper left molar, sharp pain (7/10) when chewing cold items, intermittent.",...r})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_pain_scale",render:({field:r})=>x(De,{children:[l(Oe,{children:"Pain Scale (1=Mild, 10=Severe)"}),x(Ur,{onValueChange:r.onChange,value:r.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select pain level"})})}),l($r,{children:[...Array(10)].map((n,a)=>l(wt,{value:(a+1).toString(),children:a+1},a+1))})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_pain_duration_onset",render:({field:r})=>x(De,{children:[l(Oe,{children:"Duration & Onset"}),l(mi,{children:"When did you first notice the pain/sensitivity? Is it constant or intermittent?"}),l(je,{children:l(ht,{placeholder:"e.g., Started 2 weeks ago, comes and goes",...r})}),l(Ze,{})]})})]})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Previous Dental Treatments & Procedures"}),l(He,{control:e.control,name:"dh_past_treatments",render:()=>x(De,{children:[x("div",{className:"mb-4",children:[l(Oe,{className:"text-base",children:"Past Treatments"}),l(mi,{children:"Please select or describe all that apply."})]}),x("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-4",children:[" ",dIe.map(r=>{var n;return x("div",{children:[" ",l(He,{control:e.control,name:"dh_past_treatments",render:({field:a})=>{var i;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(i=a.value)==null?void 0:i.includes(r.id),onCheckedChange:s=>s===!0?a.onChange([...a.value||[],r.id]):a.onChange((a.value||[]).filter(o=>o!==r.id))})}),l(Oe,{className:"font-normal",children:r.label})]})}}),r.subOptions&&((n=e.watch("dh_past_treatments"))==null?void 0:n.includes(r.id))&&x("div",{className:"ml-6 mt-1 space-y-1",children:[" ",r.subOptions.map(a=>l(He,{control:e.control,name:"dh_past_treatments",render:({field:i})=>{var s;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(s=i.value)==null?void 0:s.includes(a.id),onCheckedChange:o=>{const c=o===!0?[...i.value||[],a.id]:(i.value||[]).filter(u=>u!==a.id);i.onChange(c)}})}),l(Oe,{className:"text-sm font-normal",children:a.label})]})}},a.id))]})]},r.id)})]}),l(Ze,{})]})}),((t=e.watch("dh_past_treatments"))==null?void 0:t.includes("other_treatment"))&&l(He,{control:e.control,name:"dh_past_treatments_other",render:({field:r})=>x(De,{className:"mt-4",children:[" ",l(Oe,{children:"Specify Other Treatments:"}),l(je,{children:l(on,{placeholder:"Describe other treatments...",...r,value:r.value||""})})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Affected Teeth & Conditions"}),l(mi,{children:"Click the button to select the teeth involved. The specific conditions for these teeth can be detailed in the treatment plan later."}),l(He,{control:e.control,name:"dh_selected_teeth",render:({field:r})=>x(De,{children:[l(Oe,{children:"Affected Teeth"}),l(je,{children:l(SR,{value:r.value||{},onChange:r.onChange,placeholder:"Select Affected Teeth..."})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Oral Hygiene Routine & Home Care"}),l(He,{control:e.control,name:"dh_brushing_frequency",render:({field:r})=>x(De,{children:[l(Oe,{children:"Brushing Frequency"}),x(Ur,{onValueChange:r.onChange,value:r.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select frequency"})})}),x($r,{children:[l(wt,{value:"less_than_once",children:"Less than once a day"}),l(wt,{value:"once_a_day",children:"Once a day"}),l(wt,{value:"twice_a_day",children:"Twice a day"}),l(wt,{value:"more_than_twice",children:"More than twice a day"})]})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_flossing_habits",render:({field:r})=>x(De,{children:[l(Oe,{children:"Flossing Habits"}),x(Ur,{onValueChange:r.onChange,value:r.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select habit"})})}),x($r,{children:[l(wt,{value:"yes_daily",children:"Yes, daily"}),l(wt,{value:"occasionally",children:"Occasionally"}),l(wt,{value:"no",children:"No"})]})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_additional_hygiene_products",render:({field:r})=>x(De,{children:[l(Oe,{children:"Additional Oral Hygiene Products"}),l(mi,{children:"List products used besides brushing/flossing (mouthwash, water flosser, etc.)."}),l(je,{children:l(ht,{placeholder:"e.g., Listerine mouthwash, Waterpik",...r})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_technique_tools",render:({field:r})=>x(De,{children:[l(Oe,{children:"Technique & Tools"}),l(mi,{children:"Describe your brushing technique and any special tools (e.g., electric toothbrush)."}),l(je,{children:l(ht,{placeholder:"e.g., Soft bristle brush, circular motions, Sonicare toothbrush",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"History of Orthodontic Treatment"}),l(He,{control:e.control,name:"dh_orthodontic_history",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Have you had braces, clear aligners, or other orthodontic treatments?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dh_orthodontic_history")==="yes"&&l(He,{control:e.control,name:"dh_orthodontic_details",render:({field:r})=>x(De,{children:[l(Oe,{children:"If yes, specify type, duration, outcomes, challenges:"}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Traditional braces (2 years), results good, wore retainer.",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Dental Records & X-Rays"}),l(He,{control:e.control,name:"dh_has_records",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have copies of previous dental records or X-rays available?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_xray_frequency",render:({field:r})=>x(De,{children:[l(Oe,{children:"X-Ray Frequency"}),l(mi,{children:"How often have you had dental X-rays? (Approximate dates if known)."}),l(je,{children:l(ht,{placeholder:"e.g., Yearly bitewings, Full mouth series (2020)",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Occlusal & Bite Concerns"}),l(He,{control:e.control,name:"dh_bite_issues",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have issues with your bite or TMJ pain?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dh_bite_issues")==="yes"&&l(He,{control:e.control,name:"dh_bite_symptoms",render:({field:r})=>x(De,{children:[l(Oe,{children:"If yes, describe symptoms (jaw pain, clicking, difficulty chewing):"}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Jaw clicks when opening wide, occasional pain on left side",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Aesthetic & Functional Concerns"}),l(He,{control:e.control,name:"dh_cosmetic_concerns",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Are you concerned about the appearance of your teeth?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dh_cosmetic_concerns")==="yes"&&l(He,{control:e.control,name:"dh_cosmetic_issues_details",render:({field:r})=>x(De,{children:[l(Oe,{children:"Specify concerns (color, shape, alignment, spacing):"}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Teeth are slightly yellow, gap between front teeth",...r})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_functional_concerns",render:({field:r})=>x(De,{children:[l(Oe,{children:"Functional Concerns"}),l(mi,{children:"Describe difficulties with eating, speaking, etc."}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Difficulty chewing hard foods on the right side",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Previous Dental Emergencies & Urgent Care"}),l(He,{control:e.control,name:"dh_emergency_history",render:({field:r})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Have you experienced any dental emergencies?"}),l(je,{children:x(js,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("dh_emergency_history")==="yes"&&l(He,{control:e.control,name:"dh_emergency_details",render:({field:r})=>x(De,{children:[l(Oe,{children:"If yes, provide details (when, how managed):"}),l(je,{children:l(on,{rows:3,placeholder:"e.g., Broken tooth (2022), fixed with a crown",...r})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Additional Comments & Future Dental Goals"}),l(He,{control:e.control,name:"dh_additional_summary",render:({field:r})=>x(De,{children:[l(Oe,{children:"Overall Dental History Summary"}),l(mi,{children:"Any additional information not covered above."}),l(je,{children:l(on,{rows:4,placeholder:"Additional notes...",...r})}),l(Ze,{})]})}),l(He,{control:e.control,name:"dh_future_goals",render:({field:r})=>x(De,{children:[l(Oe,{children:"Future Treatment Goals & Expectations"}),l(mi,{children:"What outcomes are you hoping for?"}),l(je,{children:l(on,{rows:4,placeholder:"e.g., Whiter teeth, replace missing tooth",...r})}),l(Ze,{})]})})]})]})}const yre=Ie.object({family_medical_conditions:Ie.array(Ie.string()).optional(),family_medical_conditions_other:Ie.string().optional(),family_dental_issues:Ie.array(Ie.string()).optional(),family_dental_issues_other:Ie.string().optional()}),hIe=[{id:"family_heart_disease",label:"Heart Disease"},{id:"family_diabetes",label:"Diabetes"},{id:"family_high_cholesterol",label:"High Cholesterol"},{id:"family_hypertension",label:"Hypertension"},{id:"family_cancer",label:"Cancer"},{id:"family_osteoporosis",label:"Osteoporosis"}],pIe=[{id:"family_gum_disease",label:"Gum Disease"},{id:"family_tooth_loss",label:"Tooth Loss"},{id:"family_orthodontic_issues",label:"Orthodontic Issues"}];function mIe(){const e=ou();return x("div",{className:"space-y-8",children:[x("div",{className:"space-y-2",children:[l("h2",{className:"text-xl font-semibold",children:"Family Medical & Dental History"}),l("p",{className:"text-sm text-muted-foreground",children:"Information about medical and dental conditions in your family."})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Family Medical History"}),l(He,{control:e.control,name:"family_medical_conditions",render:()=>x(De,{children:[x("div",{className:"mb-4",children:[l(Oe,{className:"text-base",children:"Has anyone in your family been diagnosed with the following?"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:hIe.map(t=>l(He,{control:e.control,name:"family_medical_conditions",render:({field:r})=>{var n;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(n=r.value)==null?void 0:n.includes(t.id),onCheckedChange:a=>a?r.onChange([...r.value||[],t.id]):r.onChange((r.value||[]).filter(i=>i!==t.id))})}),l(Oe,{className:"font-normal",children:t.label})]},t.id)}},t.id))}),l(Ze,{})]})}),l(He,{control:e.control,name:"family_medical_conditions_other",render:({field:t})=>x(De,{children:[l(Oe,{children:"Other family medical conditions:"}),l(je,{children:l(ht,{placeholder:"Specify other conditions",...t})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Family Dental History"}),l(He,{control:e.control,name:"family_dental_issues",render:()=>x(De,{children:[x("div",{className:"mb-4",children:[l(Oe,{className:"text-base",children:"Does your family have a history of dental issues?"}),l(mi,{children:"Select all that apply."})]}),l("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:pIe.map(t=>l(He,{control:e.control,name:"family_dental_issues",render:({field:r})=>{var n;return x(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[l(je,{children:l(Fo,{checked:(n=r.value)==null?void 0:n.includes(t.id),onCheckedChange:a=>a?r.onChange([...r.value||[],t.id]):r.onChange((r.value||[]).filter(i=>i!==t.id))})}),l(Oe,{className:"font-normal",children:t.label})]},t.id)}},t.id))}),l(Ze,{})]})}),l(He,{control:e.control,name:"family_dental_issues_other",render:({field:t})=>x(De,{children:[l(Oe,{children:"Other family dental issues:"}),l(je,{children:l(ht,{placeholder:"Specify other issues",...t})}),l(Ze,{})]})})]})]})}const xre=Ie.object({diet_description:Ie.string().optional().nullable(),exercise_frequency:Ie.preprocess(e=>typeof e=="string"||e===null||e===void 0?e:void 0,Ie.enum(["never","occasionally","1-2_per_week","3-4_per_week","daily"]).optional().nullable()),stress_level:Ie.enum(["low","moderate","high"]).optional().nullable(),has_sleep_issues:Ie.enum(["yes","no"]).optional().nullable(),sleep_issues_details:Ie.string().optional().nullable(),pregnancy_status:Ie.enum(["yes","no","not_applicable"]).optional().nullable(),pregnancy_comments:Ie.string().optional().nullable(),has_mental_health_conditions:Ie.enum(["yes","no"]).optional().nullable(),mental_health_details:Ie.string().optional().nullable(),additional_concerns:Ie.string().optional().nullable(),additional_comments:Ie.string().optional().nullable()});function gIe(){const e=ou();return x("div",{className:"space-y-8",children:[x("div",{className:"space-y-2",children:[l("h2",{className:"text-xl font-semibold",children:"Lifestyle & Special Considerations"}),l("p",{className:"text-sm text-muted-foreground",children:"Information about your lifestyle that may be relevant to your health."})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Diet and Nutrition"}),l(He,{control:e.control,name:"diet_description",render:({field:t})=>x(De,{children:[l(Oe,{children:"Describe your typical diet (include details on sugar consumption, acidic foods, etc.):"}),l(je,{children:l(on,{placeholder:"e.g., Balanced diet, occasional sugary snacks, drink coffee daily...",...t,value:t.value??""})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Exercise & Stress Levels"}),l(He,{control:e.control,name:"exercise_frequency",render:({field:t})=>x(De,{children:[l(Oe,{children:"How often do you exercise?"}),x(Ur,{onValueChange:t.onChange,value:typeof t.value=="boolean"?void 0:t.value??void 0,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select frequency"})})}),x($r,{children:[l(wt,{value:"never",children:"Never"}),l(wt,{value:"occasionally",children:"Occasionally"}),l(wt,{value:"1-2_per_week",children:"1-2 times per week"}),l(wt,{value:"3-4_per_week",children:"3-4 times per week"}),l(wt,{value:"daily",children:"Daily"})]})]}),l(Ze,{})]})}),l(He,{control:e.control,name:"stress_level",render:({field:t})=>x(De,{children:[l(Oe,{children:"Rate your overall stress level:"}),x(Ur,{onValueChange:t.onChange,value:t.value??void 0,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select stress level"})})}),x($r,{children:[l(wt,{value:"low",children:"Low"}),l(wt,{value:"moderate",children:"Moderate"}),l(wt,{value:"high",children:"High"})]})]}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Sleep Patterns"}),l(He,{control:e.control,name:"has_sleep_issues",render:({field:t})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have any sleep-related issues?"}),l(je,{children:x(js,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("has_sleep_issues")==="yes"&&l(He,{control:e.control,name:"sleep_issues_details",render:({field:t})=>x(De,{children:[l(Oe,{children:"If yes, specify (e.g., sleep apnea, bruxism/teeth grinding):"}),l(je,{children:l(ht,{placeholder:"e.g., Diagnosed sleep apnea, grind teeth at night",...t,value:t.value??""})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Pregnancy and/or Lactation"}),l(He,{control:e.control,name:"pregnancy_status",render:({field:t})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Are you pregnant, planning to become pregnant, or currently breastfeeding?"}),l(je,{children:x(js,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"not_applicable"})}),l(Oe,{className:"font-normal",children:"Not Applicable"})]})]})}),l(Ze,{})]})}),e.watch("pregnancy_status")==="yes"&&l(He,{control:e.control,name:"pregnancy_comments",render:({field:t})=>x(De,{children:[l(Oe,{children:"Additional comments (if applicable):"}),l(je,{children:l(on,{placeholder:"e.g., Due date, specific concerns...",...t,value:t.value??""})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Mental Health"}),l(He,{control:e.control,name:"has_mental_health_conditions",render:({field:t})=>x(De,{className:"space-y-3",children:[l(Oe,{children:"Do you have any mental health conditions (e.g., anxiety, depression) or medications for such conditions?"}),l(je,{children:x(js,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"yes"})}),l(Oe,{className:"font-normal",children:"Yes"})]}),x(De,{className:"flex items-center space-x-2 space-y-0",children:[l(je,{children:l(Mn,{value:"no"})}),l(Oe,{className:"font-normal",children:"No"})]})]})}),l(Ze,{})]})}),e.watch("has_mental_health_conditions")==="yes"&&l(He,{control:e.control,name:"mental_health_details",render:({field:t})=>x(De,{children:[l(Oe,{children:"If yes, provide details:"}),l(je,{children:l(on,{placeholder:"e.g., Diagnosed with anxiety, taking Sertraline",...t,value:t.value??""})}),l(Ze,{})]})})]}),x("div",{className:"space-y-4 p-4 border rounded-md",children:[l("h4",{className:"font-medium",children:"Additional Concerns and Comments"}),l(He,{control:e.control,name:"additional_concerns",render:({field:t})=>x(De,{children:[l(Oe,{children:"Please list any other issues or concerns:"}),l(je,{children:l(on,{placeholder:"Any other specific concerns you want to mention?",...t,value:t.value??""})}),l(Ze,{})]})}),l(He,{control:e.control,name:"additional_comments",render:({field:t})=>x(De,{children:[l(Oe,{children:"Additional comments regarding dental or general health:"}),l(je,{children:l(on,{placeholder:"General comments...",...t,value:t.value??""})}),l(Ze,{})]})})]})]})}const am=Qe.forwardRef(({className:e,onFileChange:t,accept:r,maxSize:n=5,uploading:a=!1,value:i,preview:s,onRemove:o,...c},u)=>{const[d,f]=S.useState(!1),[h,m]=S.useState(null),w=N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?f(!0):N.type==="dragleave"&&f(!1)},g=N=>{var E;if(N.size>n*1024*1024)return m(`File size exceeds ${n}MB limit.`),!1;if(r){const C=r.split(",").map(W=>W.trim()),D=N.type,F=(E=N.name.split(".").pop())==null?void 0:E.toLowerCase();if(!C.some(W=>{if(W.startsWith("."))return`.${F}`===W;if(W.includes("*")){const[T]=W.split("/");return D.startsWith(`${T}/`)}else return W===D}))return m("File type not supported."),!1}return m(null),!0},y=N=>{var C;const E=((C=N.target.files)==null?void 0:C[0])||null;if(E&&!g(E)){t&&t(null);return}t&&t(E)},b=N=>{if(N.preventDefault(),N.stopPropagation(),f(!1),N.dataTransfer.files&&N.dataTransfer.files[0]){const E=N.dataTransfer.files[0];g(E)&&t&&t(E)}},_=()=>{if(!i&&!s)return null;const N=s||(i?URL.createObjectURL(i):null),E=(i==null?void 0:i.name)||"File",D=((i==null?void 0:i.type)||"").startsWith("image/")||s&&/\.(jpg|jpeg|png|gif|webp)$/i.test(s);return l("div",{className:"mt-2 relative",children:x("div",{className:"flex items-center p-2 border rounded-md bg-muted",children:[D&&N?l("div",{className:"relative w-16 h-16 mr-3 overflow-hidden rounded",children:l("img",{src:N,alt:"Preview",className:"object-cover w-full h-full"})}):l(tG,{className:"w-12 h-12 mr-3 text-muted-foreground"}),x("div",{className:"flex-1 min-w-0",children:[l("p",{className:"text-sm font-medium truncate",children:E}),l("p",{className:"text-xs text-muted-foreground",children:i!=null&&i.size?`${(i.size/1024/1024).toFixed(2)} MB`:""})]}),o&&l(Fe,{variant:"ghost",size:"sm",onClick:o,type:"button",className:"text-destructive hover:text-destructive",children:l(om,{className:"w-4 h-4"})})]})})};return x("div",{className:Lt("space-y-2",e),children:[!(i||s)&&x("div",{className:Lt("border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer",d?"border-primary bg-primary/5":"border-input",h&&"border-destructive"),onDragEnter:w,onDragOver:w,onDragLeave:w,onDrop:b,onClick:()=>{var N;return(N=document.getElementById(c.id||"file-upload"))==null?void 0:N.click()},children:[a?l(Un,{className:"w-10 h-10 mb-4 text-muted-foreground animate-spin"}):l(sG,{className:"w-10 h-10 mb-4 text-muted-foreground"}),l("p",{className:"text-sm font-medium",children:"Drag and drop or click to upload"}),l("p",{className:"text-xs text-muted-foreground mt-1",children:r?`Supported formats: ${r}`:"All files are supported"}),x("p",{className:"text-xs text-muted-foreground mt-1",children:["Max size: ",n,"MB"]}),h&&l("p",{className:"text-xs text-destructive mt-2",children:h})]}),l("input",{id:c.id||"file-upload",type:"file",className:"hidden",onChange:y,ref:u,accept:r,disabled:a,...c}),_(),h&&l("p",{className:"text-xs text-destructive",children:h})]})});am.displayName="FileUpload";const wre=Ie.object({consent_given:Ie.boolean().default(!1),profile_photo:Ie.instanceof(File).optional().nullable(),signature:Ie.instanceof(File).optional().nullable(),id_document:Ie.instanceof(File).optional().nullable(),consent_notes:Ie.string().optional()});function vIe(){const e=ou(),[t,r]=S.useState(!1);return x("div",{className:"space-y-6",children:[x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Documents & Consent"}),l("p",{className:"text-sm text-muted-foreground",children:"Upload necessary documents and provide consent for treatment."})]}),l(He,{control:e.control,name:"profile_photo",render:({field:n})=>x(De,{children:[l(Oe,{children:"Profile Photo"}),l(je,{children:l(am,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg",maxSize:5,uploading:t,onRemove:()=>n.onChange(null)})}),l(Ze,{})]})}),l(He,{control:e.control,name:"signature",render:({field:n})=>x(De,{children:[l(Oe,{children:"Patient Signature"}),l(je,{children:l(am,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg",maxSize:2,uploading:t,onRemove:()=>n.onChange(null)})}),l(Ze,{})]})}),l(He,{control:e.control,name:"id_document",render:({field:n})=>x(De,{children:[l(Oe,{children:"ID Document"}),l(je,{children:l(am,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg,application/pdf",maxSize:10,uploading:t,onRemove:()=>n.onChange(null)})}),l(Ze,{})]})}),l(He,{control:e.control,name:"consent_given",render:({field:n})=>x(De,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[l(je,{children:l(Fo,{checked:n.value,onCheckedChange:n.onChange})}),x("div",{className:"space-y-1 leading-none",children:[l(Oe,{children:"I consent to treatment"}),l("p",{className:"text-sm text-muted-foreground",children:"By checking this box, I provide consent for dental treatment and procedures."})]})]})}),l(He,{control:e.control,name:"consent_notes",render:({field:n})=>x(De,{children:[l(Oe,{children:"Consent Notes"}),l(je,{children:l(on,{placeholder:"Any additional notes related to patient consent",...n})}),l(Ze,{})]})})]})}const yIe=Ie.object({acknowledgment:Ie.boolean().refine(e=>e===!0,{message:"You must acknowledge that the information provided is accurate."}),patient_signature_consent:Ie.string().optional(),consent_date:Ie.date().optional().default(new Date)}),xIe=Ie.object({...Vp.shape,...wR.shape,...gre.shape,...vre.shape,...yre.shape,...xre.shape,...yIe.shape,...wre.shape}),wIe=Ie.object({first_name:Vp.shape.first_name,last_name:Vp.shape.last_name,middle_name:Vp.shape.middle_name.optional(),gender:Vp.shape.gender,age:Vp.shape.age,occupation:Vp.shape.occupation.optional(),phone:wR.shape.phone}),Fd=["personal","contact","medical","dental","family_lifestyle","documents"],S0=e=>e instanceof Ie.ZodObject?Object.keys(e.shape):[],bIe={personal:S0(Vp),contact:S0(wR),medical:S0(gre),dental:S0(vre),family_lifestyle:[...S0(yre),...S0(xre)],documents:S0(wre)};function NR({patient:e,onSuccess:t,onCancel:r,mode:n="full"}){const{toast:a}=_n(),[i,s]=S.useState(!1),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(""),[m,w]=S.useState(new Date),[g,y]=S.useState(null),[b,_]=S.useState(Fd[0]),[N,E]=S.useState(!0),C=n==="simplified",D={first_name:"",last_name:"",middle_name:"",gender:"male",age:null,occupation:"",phone:""},P={...D,marital_status:"single",email:"",address:"",city:"",state:"",postal_code:"",country:"USA",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",blood_group:"unknown",height:null,weight:null,has_allergies:"no",medication_allergies:[],other_medication_allergy_details:"",food_allergies:[],other_food_allergy_details:"",environmental_allergies:[],other_environmental_allergy_details:"",other_allergies:[],other_allergy_details:"",other_allergies_manual_input:"",diagnosed_conditions:[],other_diagnosed_condition:"",has_implants:"no",implants_details:"",taking_medications:"no",current_medications:[],recent_health_changes:"no",health_changes_details:"",previous_surgeries:[],immunizations_up_to_date:"not_sure",recent_immunizations:"",recent_medical_screenings:"no",screenings_details:"",dental_material_allergies:"no",dental_material_allergies_details:"",notes:"",dh_reason_for_visit:void 0,dh_reason_for_visit_other:"",dh_chief_complaint:"",dh_has_pain:"no",dh_pain_description:"",dh_pain_scale:void 0,dh_pain_duration_onset:"",dh_past_treatments:[],dh_past_treatments_other:"",dh_brushing_frequency:void 0,dh_flossing_habits:void 0,dh_additional_hygiene_products:"",dh_technique_tools:"",dh_orthodontic_history:"no",dh_orthodontic_details:"",dh_has_records:"no",dh_xray_frequency:"",dh_bite_issues:"no",dh_bite_symptoms:"",dh_cosmetic_concerns:"no",dh_cosmetic_issues_details:"",dh_functional_concerns:"",dh_emergency_history:"no",dh_emergency_details:"",dh_additional_summary:"",dh_future_goals:"",dh_selected_teeth:{},family_medical_conditions:[],family_medical_conditions_other:"",family_dental_issues:[],family_dental_issues_other:"",diet_description:"",exercise_frequency:void 0,stress_level:void 0,has_sleep_issues:"no",sleep_issues_details:"",pregnancy_status:"not_applicable",pregnancy_comments:"",has_mental_health_conditions:"no",mental_health_details:"",additional_concerns:"",additional_comments:"",acknowledgment:!1,patient_signature_consent:"",consent_date:new Date,consent_given:!1,consent_notes:"",profile_photo:void 0,signature:void 0,id_document:void 0},F=S.useCallback(z=>{var G,Q,O,J,X,ne,ie,oe,de,V,se,fe,te,ke,Re,Ce,ve,Ge,pt,it,Le,ut,he,Ee,Me,at,ct,dt,Xe,Nt,St;const q=C?D:P,B=z?{first_name:z.first_name||"",last_name:z.last_name||"",middle_name:z.middle_name||"",gender:z.gender==="male"||z.gender==="female"||z.gender==="other"?z.gender:void 0,age:z.age??null,occupation:z.occupation||"",phone:z.phone||"",...!C&&{marital_status:z.marital_status||"single",email:z.email||"",address:z.address||"",city:z.city||"",state:z.state||"",postal_code:z.postal_code||"",country:z.country||"USA",emergency_contact_name:z.emergency_contact_name||"",emergency_contact_phone:z.emergency_contact_phone||"",emergency_contact_relationship:z.emergency_contact_relationship||"",blood_group:z.blood_group||"unknown",height:z.height??null,weight:z.weight??null,has_allergies:((G=z.detailed_medical_info)==null?void 0:G.has_allergies)||"no",medication_allergies:((Q=z.detailed_medical_info)==null?void 0:Q.medication_allergies)||[],other_medication_allergy_details:((O=z.detailed_medical_info)==null?void 0:O.other_medication_allergy_details)||"",food_allergies:((J=z.detailed_medical_info)==null?void 0:J.food_allergies)||[],other_food_allergy_details:((X=z.detailed_medical_info)==null?void 0:X.other_food_allergy_details)||"",environmental_allergies:((ne=z.detailed_medical_info)==null?void 0:ne.environmental_allergies)||[],other_environmental_allergy_details:((ie=z.detailed_medical_info)==null?void 0:ie.other_environmental_allergy_details)||"",other_allergies:((oe=z.detailed_medical_info)==null?void 0:oe.other_allergies)||[],other_allergy_details:((de=z.detailed_medical_info)==null?void 0:de.other_allergy_details)||"",other_allergies_manual_input:((V=z.detailed_medical_info)==null?void 0:V.other_allergies_manual_input)||"",diagnosed_conditions:Array.isArray(z.medical_conditions)?z.medical_conditions:[],taking_medications:z.current_medications&&Array.isArray(z.current_medications)&&z.current_medications.length>0?"yes":"no",current_medications:Array.isArray(z.current_medications)?z.current_medications:[],previous_surgeries:Array.isArray(z.previous_surgeries)?z.previous_surgeries:[],notes:z.notes||"",consent_given:z.consent_given||!1,...z.dental_history&&typeof z.dental_history=="object"?{...Object.fromEntries(Object.entries(z.dental_history).filter(([At])=>At!=="dh_selected_teeth"))}:{},...z.family_medical_history&&typeof z.family_medical_history=="object"?{...z.family_medical_history}:{},diet_description:((se=z.lifestyle_habits)==null?void 0:se.diet)??"",exercise_frequency:((fe=z.lifestyle_habits)==null?void 0:fe.exercise)??void 0,stress_level:((te=z.lifestyle_habits)==null?void 0:te.stress)??void 0,has_sleep_issues:(Re=(ke=z.lifestyle_habits)==null?void 0:ke.sleep_issues)!=null&&Re.startsWith("Yes")?"yes":((Ce=z.lifestyle_habits)==null?void 0:Ce.sleep_issues)==="No"?"no":null,sleep_issues_details:(Ge=(ve=z.lifestyle_habits)==null?void 0:ve.sleep_issues)!=null&&Ge.startsWith("Yes")&&((pt=z.lifestyle_habits)==null?void 0:pt.sleep_issues.replace("Yes, ",""))!=="details missing"?(it=z.lifestyle_habits)==null?void 0:it.sleep_issues.replace("Yes, ",""):"",pregnancy_status:((Le=z.lifestyle_habits)==null?void 0:Le.pregnancy_status)??void 0,pregnancy_comments:((ut=z.lifestyle_habits)==null?void 0:ut.pregnancy_comments)??"",has_mental_health_conditions:(Ee=(he=z.lifestyle_habits)==null?void 0:he.mental_health)!=null&&Ee.startsWith("Yes")?"yes":((Me=z.lifestyle_habits)==null?void 0:Me.mental_health)==="No"?"no":void 0,mental_health_details:(ct=(at=z.lifestyle_habits)==null?void 0:at.mental_health)!=null&&ct.startsWith("Yes")&&((dt=z.lifestyle_habits)==null?void 0:dt.mental_health.replace("Yes, ",""))!=="details missing"?(Xe=z.lifestyle_habits)==null?void 0:Xe.mental_health.replace("Yes, ",""):"",additional_concerns:((Nt=z.lifestyle_habits)==null?void 0:Nt.additional_concerns)??"",additional_comments:((St=z.lifestyle_habits)==null?void 0:St.additional_comments)??""}}:{};return{...q,...B}},[e,C]),L=fd({resolver:hd(C?wIe:xIe),defaultValues:C?D:P,mode:"onChange"});S.useEffect(()=>{E(!0),console.log(`PatientForm: useEffect triggered. Patient ID: ${e==null?void 0:e.id}, Mode: ${n}`),(async()=>{let q=F(e);if(console.log("PatientForm: Base defaults calculated:",JSON.stringify(q)),e!=null&&e.id&&!C)try{console.log("PatientForm: Fetching dental history teeth map for patient:",e.id);const B=await Rt.patients.getPatientDentalHistoryTeethMap(e.id);console.log("PatientForm: Fetched dental history teeth map for form:",JSON.stringify(B)),q.dh_selected_teeth=B||{}}catch(B){console.error("Error fetching patient dental history teeth map:",B),a({title:"Error Loading Affected Teeth",description:"Could not load previously selected affected teeth.",variant:"destructive"}),q.dh_selected_teeth={}}else C?C&&delete q.dh_selected_teeth:q.dh_selected_teeth={};console.log("PatientForm: Resetting form with final defaults:",JSON.stringify(q)),L.reset(q),console.log("PatientForm: Form reset complete. Checking form state after reset:",JSON.stringify(L.getValues("dh_selected_teeth"))),E(!1)})()},[e,n,C,F,L,a]);const W=async(z,q,B)=>{if(!(z instanceof File))return null;console.log(`Uploading ${B} for ${q}`);const{data:{session:G},error:Q}=await $e.auth.getSession();if(Q||!G)throw new Error("Auth failed.");const O=z.name.split(".").pop(),J=`public/${q}/${B}-${Date.now()}.${O}`,{error:X}=await $e.storage.from("medical-records").upload(J,z);if(X)throw new Error(`Upload failed: ${X.message}`);const{data:ne}=$e.storage.from("medical-records").getPublicUrl(J);if(!(ne!=null&&ne.publicUrl))throw new Error("Failed to get URL.");return{path:J,url:ne.publicUrl,name:z.name,type:B,size:z.size,uploaded_at:new Date().toISOString()}},T=async z=>{s(!0);try{const q=e==null?void 0:e.id,B=z;if(!q&&(B.profile_photo instanceof File||B.signature instanceof File||B.id_document instanceof File))throw new Error("Cannot upload files for a new patient. Save first.");let G=[],Q=(e==null?void 0:e.profile_photo_url)||null,O=(e==null?void 0:e.signature_url)||null;if(!C&&q){Array.isArray(e==null?void 0:e.documents)&&(G=e.documents);const V=B;if(V.profile_photo instanceof File){const se=await W(V.profile_photo,q,"profile_photo");se&&(Q=se.url,G=G.filter(fe=>fe.type!=="profile_photo"),G.push(se))}if(V.signature instanceof File){const se=await W(V.signature,q,"signature");se&&(O=se.url,G=G.filter(fe=>fe.type!=="signature"),G.push(se))}if(V.id_document instanceof File){const se=await W(V.id_document,q,"id_document");se&&(G=G.filter(fe=>fe.type!=="id_document"),G.push(se))}}else if(!q&&(B.profile_photo instanceof File||B.signature instanceof File||B.id_document instanceof File))throw new Error("Cannot upload files for a new patient. Save first.");const J={first_name:z.first_name||"",last_name:z.last_name||"",middle_name:z.middle_name||null,gender:z.gender==="male"||z.gender==="female"||z.gender==="other"?z.gender:null,age:z.age??null,occupation:z.occupation||null,phone:z.phone||""};let X;if(C)X=J;else{const V=z;X={...J,marital_status:V.marital_status||null,email:V.email||null,address:V.address||null,city:V.city||null,state:V.state||null,postal_code:V.postal_code||null,country:V.country||null,emergency_contact_name:V.emergency_contact_name||null,emergency_contact_phone:V.emergency_contact_phone||null,emergency_contact_relationship:V.emergency_contact_relationship||null,blood_group:V.blood_group||null,height:V.height??null,weight:V.weight??null,medical_conditions:[...V.diagnosed_conditions||[],...V.other_diagnosed_condition?[V.other_diagnosed_condition]:[]].length>0?[...V.diagnosed_conditions||[],...V.other_diagnosed_condition?[V.other_diagnosed_condition]:[]]:null,current_medications:V.taking_medications==="yes"?V.current_medications||[]:null,previous_surgeries:V.previous_surgeries&&V.previous_surgeries.length>0?V.previous_surgeries:null,detailed_medical_info:{has_implants:V.has_implants,implants_details:V.implants_details||null,recent_health_changes:V.recent_health_changes,health_changes_details:V.health_changes_details||null,immunizations_up_to_date:V.immunizations_up_to_date,recent_immunizations:V.recent_immunizations||null,recent_medical_screenings:V.recent_medical_screenings,screenings_details:V.screenings_details||null,dental_material_allergies:V.dental_material_allergies,dental_material_allergies_details:V.dental_material_allergies_details||null,has_allergies:V.has_allergies,medication_allergies:V.medication_allergies||[],other_medication_allergy_details:V.other_medication_allergy_details||null,food_allergies:V.food_allergies||[],other_food_allergy_details:V.other_food_allergy_details||null,environmental_allergies:V.environmental_allergies||[],other_environmental_allergy_details:V.other_environmental_allergy_details||null,other_allergies:V.other_allergies||[],other_allergy_details:V.other_allergy_details||null,other_allergies_manual_input:V.other_allergies_manual_input||null},dental_history:{reason_for_visit:V.dh_reason_for_visit,reason_for_visit_other:V.dh_reason_for_visit_other||null,chief_complaint:V.dh_chief_complaint||null,has_pain:V.dh_has_pain,pain_description:V.dh_pain_description||null,pain_scale:V.dh_pain_scale,pain_duration_onset:V.dh_pain_duration_onset||null,past_treatments:V.dh_past_treatments||[],past_treatments_other:V.dh_past_treatments_other||null,brushing_frequency:V.dh_brushing_frequency,flossing_habits:V.dh_flossing_habits,additional_hygiene_products:V.dh_additional_hygiene_products||null,technique_tools:V.dh_technique_tools||null,orthodontic_history:V.dh_orthodontic_history,orthodontic_details:V.dh_orthodontic_details||null,has_records:V.dh_has_records,xray_frequency:V.dh_xray_frequency||null,bite_issues:V.dh_bite_issues,bite_symptoms:V.dh_bite_symptoms||null,cosmetic_concerns:V.dh_cosmetic_concerns,cosmetic_issues_details:V.dh_cosmetic_issues_details||null,functional_concerns:V.dh_functional_concerns||null,emergency_history:V.dh_emergency_history,emergency_details:V.dh_emergency_details||null,additional_summary:V.dh_additional_summary||null,future_goals:V.dh_future_goals||null},family_medical_history:{conditions:V.family_medical_conditions||[],other:V.family_medical_conditions_other||null,dental_issues:V.family_dental_issues||[],dental_other:V.family_dental_issues_other||null},lifestyle_habits:{diet:V.diet_description||null,exercise:V.exercise_frequency||null,stress:V.stress_level||null,sleep_issues:V.has_sleep_issues==="yes"?V.sleep_issues_details?`Yes, ${V.sleep_issues_details}`:"Yes, details missing":"No",pregnancy_status:V.pregnancy_status||null,pregnancy_comments:V.pregnancy_comments||null,mental_health:V.has_mental_health_conditions==="yes"?V.mental_health_details?`Yes, ${V.mental_health_details}`:"Yes, details missing":"No",additional_concerns:V.additional_concerns||null,additional_comments:V.additional_comments||null},notes:V.notes||null,consent_given:V.consent_given||null,profile_photo_url:Q,signature_url:O,documents:G}}let ne=q,ie=null;const oe=X;if(oe.dental_history&&typeof oe.dental_history=="object"&&(delete oe.dental_history.dh_tooth_conditions,oe.dental_history=oe.dental_history),q)console.log(`Updating existing patient (${n} mode):`,q),await Rt.patients.update(q,oe);else{console.log(`Creating new patient (${n} mode)...`);const V={...oe};delete V.profile_photo_url,delete V.signature_url,delete V.documents,C&&(V.marital_status=null,V.email=null,V.address=null,V.city=null,V.state=null,V.postal_code=null,V.country=null,V.emergency_contact_name=null,V.emergency_contact_phone=null,V.emergency_contact_relationship=null,V.blood_group=null,V.height=null,V.weight=null,V.medical_conditions=null,V.current_medications=null,V.previous_surgeries=null,V.detailed_medical_info=null,V.dental_history=null,V.family_medical_history=null,V.lifestyle_habits=null,V.notes=null,V.consent_given=null);const se={first_name:V.first_name||"",last_name:V.last_name||"",middle_name:V.middle_name||null,gender:V.gender==="male"||V.gender==="female"||V.gender==="other"?V.gender:null,age:V.age??null,occupation:V.occupation||null,phone:V.phone||"",marital_status:V.marital_status||null,email:V.email||null,address:V.address||null,city:V.city||null,state:V.state||null,postal_code:V.postal_code||null,country:V.country||null,emergency_contact_name:V.emergency_contact_name||null,emergency_contact_phone:V.emergency_contact_phone||null,emergency_contact_relationship:V.emergency_contact_relationship||null,blood_group:V.blood_group||null,height:V.height??null,weight:V.weight??null,medical_conditions:V.medical_conditions||null,current_medications:V.current_medications||null,previous_surgeries:V.previous_surgeries||null,detailed_medical_info:V.detailed_medical_info||null,dental_history:V.dental_history||null,family_medical_history:V.family_medical_history||null,lifestyle_habits:V.lifestyle_habits||null,notes:V.notes||null,consent_given:V.consent_given||null};if(ie=await Rt.patients.create(se),!(ie!=null&&ie.id))throw new Error("Failed to create patient or retrieve new patient ID.");ne=ie.id,console.log("New patient created:",ne)}if(!C&&ne){const V=z.dh_selected_teeth,se=V?Object.keys(V).map(Number):[];console.log("Saving patient dental history teeth map (with conditions):",JSON.stringify(V));try{await Rt.patients.savePatientDentalHistoryTeethWithConditions(ne,V),console.log("Patient dental history teeth (with conditions) saved successfully.")}catch(fe){console.error("Error saving patient dental history teeth:",fe),a({title:"Warning",description:`Patient info saved, but failed to save dental history teeth: ${fe.message}`,variant:"destructive"})}}a({title:"Success",description:q?"Patient information updated successfully.":C?"Basic patient info saved. Complete profile later.":"Patient created successfully. Edit to add documents."}),t(ne)}catch(q){console.error("Error saving patient:",q);let B="Failed to save patient information.";(q.message.startsWith("Auth")||q.message.startsWith("Failed to upload")||q.message.startsWith("Cannot upload")||q.message.startsWith("Upload succeeded"))&&(B=q.message),a({title:"Error",description:B,variant:"destructive"})}finally{s(!1)}},R=z=>{C?T(z):console.warn("onSubmit called unexpectedly in full mode")},j=async()=>{if(C)return;s(!0);const z=bIe[b]||[];if(console.log(`Validating fields for tab "${b}":`,z),z.length===0&&b!=="documents"&&console.warn(`No fields defined for validation on tab: ${b}`),z.length>0?await L.trigger(z):!0){console.log(`Validation passed for tab: ${b}`);const B=L.getValues();y(B),d(!1),h(B.patient_signature_consent||""),w(new Date),c(!0)}else console.log(`Validation failed for tab: ${b}`),a({title:"Validation Error",description:`Please fix the errors on the "${b.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase())}" tab before saving.`,variant:"destructive"});s(!1)},Y=()=>{if(u&&g){const z={...g,acknowledgment:u,patient_signature_consent:f,consent_date:m||new Date,consent_given:u};T(z),c(!1),y(null)}else a({title:"Acknowledgment Required",description:"Please acknowledge and provide signature/date in the dialog to save.",variant:"destructive"})},Z=()=>{const z=Fd.indexOf(b);z<Fd.length-1&&_(Fd[z+1])},re=()=>{const z=Fd.indexOf(b);z>0&&_(Fd[z-1])};return x(kte,{...L,children:[l("div",{className:"space-y-6",children:C?x("form",{onSubmit:L.handleSubmit(R),className:"space-y-6",children:[x("div",{className:"space-y-6 pt-6 max-h-[calc(90vh-200px)] overflow-y-auto p-1",children:[x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Basic Patient Information"}),l("p",{className:"text-sm text-muted-foreground",children:"Enter the essential details for the new patient."})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l(He,{control:L.control,name:"first_name",render:({field:z})=>x(De,{children:[l(Oe,{children:"First Name"}),l(je,{children:l(ht,{placeholder:"John",...z})}),l(Ze,{})]})}),l(He,{control:L.control,name:"middle_name",render:({field:z})=>x(De,{children:[l(Oe,{children:"Middle Name"}),l(je,{children:l(ht,{placeholder:"Michael",...z})}),l(Ze,{})]})}),l(He,{control:L.control,name:"last_name",render:({field:z})=>x(De,{children:[l(Oe,{children:"Last Name"}),l(je,{children:l(ht,{placeholder:"Doe",...z})}),l(Ze,{})]})}),l(He,{control:L.control,name:"gender",render:({field:z})=>x(De,{children:[l(Oe,{children:"Gender"}),x(Ur,{onValueChange:z.onChange,defaultValue:z.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select gender"})})}),x($r,{children:[l(wt,{value:"male",children:"Male"}),l(wt,{value:"female",children:"Female"}),l(wt,{value:"other",children:"Other"})]})]}),l(Ze,{})]})}),l(He,{control:L.control,name:"age",render:({field:z})=>x(De,{children:[l(Oe,{children:"Age"}),l(je,{children:l(ht,{type:"number",placeholder:"25",...z,value:z.value??"",onChange:q=>z.onChange(q.target.value===""?null:q.target.valueAsNumber)})}),l(Ze,{})]})}),l(He,{control:L.control,name:"occupation",render:({field:z})=>x(De,{children:[l(Oe,{children:"Occupation"}),l(je,{children:l(ht,{placeholder:"Software Engineer",...z})}),l(Ze,{})]})}),l(He,{control:L.control,name:"phone",render:({field:z})=>x(De,{children:[l(Oe,{children:"Phone Number"}),l(je,{children:l(ht,{placeholder:"+1234567890",...z})}),l(Ze,{})]})})]})]}),x("div",{className:"flex justify-end gap-2 pt-4",children:[l(Fe,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l(Fe,{type:"submit",disabled:i||N,children:i?x(_r,{children:[l("span",{className:"mr-2",children:"Saving..."}),l(Un,{className:"h-4 w-4 animate-spin"})]}):N?x(_r,{children:[l("span",{className:"mr-2",children:"Loading..."}),l(Un,{className:"h-4 w-4 animate-spin"})]}):"Save Changes"})]})]}):x("div",{className:"pt-6",children:[x(Lm,{value:b,onValueChange:_,className:"space-y-4",children:[l(Rh,{children:Fd.map(z=>l(Oa,{value:z,children:z.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase())},z))}),l(_a,{value:"personal",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:l(VDe,{})}),l(_a,{value:"contact",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:l(HDe,{})}),l(_a,{value:"medical",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:l(lIe,{})}),l(_a,{value:"dental",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:l(fIe,{})}),x(_a,{value:"family_lifestyle",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:[l(mIe,{}),l(gIe,{})]}),l(_a,{value:"documents",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:l(vIe,{})})]}),x("div",{className:"flex justify-between gap-2 pt-4",children:[x("div",{children:[" ",x(Fe,{type:"button",variant:"outline",onClick:re,disabled:Fd.indexOf(b)===0,children:[l(y4,{className:"mr-2 h-4 w-4"})," Previous"]}),x(Fe,{type:"button",variant:"outline",onClick:Z,disabled:Fd.indexOf(b)===Fd.length-1,className:"ml-2",children:["Next ",l(sm,{className:"ml-2 h-4 w-4"})]})]}),x("div",{children:[" ",l(Fe,{type:"button",variant:"outline",onClick:r,className:"mr-2",children:"Cancel"}),l(Fe,{type:"button",onClick:j,disabled:i||N,children:i?x(_r,{children:[l("span",{className:"mr-2",children:"Validating..."}),l(Un,{className:"h-4 w-4 animate-spin"})]}):N?x(_r,{children:[l("span",{className:"mr-2",children:"Loading..."}),l(Un,{className:"h-4 w-4 animate-spin"})]}):"Save Changes"})]})]})]})})," ",l(Vn,{open:o,onOpenChange:c,children:x(Bn,{className:"sm:max-w-[525px]",children:[x(Jn,{children:[x(Zn,{className:"flex items-center",children:[l(dx,{className:"h-5 w-5 text-green-600 mr-2"})," Consent & Acknowledgment"]}),l(us,{children:"Please review, acknowledge, and sign below before saving the patient information."})]}),x("div",{className:"space-y-4 py-4",children:[x("div",{className:"flex items-start space-x-3 rounded-md border p-4 shadow-sm",children:[l(Fo,{id:"dialog-acknowledgment",checked:u,onCheckedChange:z=>d(z===!0),className:"mt-1"}),x("div",{className:"grid gap-1.5 leading-none",children:[l("label",{htmlFor:"dialog-acknowledgment",className:"text-sm font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"I confirm that the information provided is complete and accurate to the best of my knowledge."}),!u&&l("p",{className:"text-sm text-destructive",children:"Acknowledgment is required."})]})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"dialog-signature",children:"Patient Signature (Type full name)"}),l(ht,{id:"dialog-signature",placeholder:"Type your full name",value:f,onChange:z=>h(z.target.value)}),l("p",{className:"text-xs text-muted-foreground",children:"Typing your name here acts as your digital signature."})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"dialog-consent-date",children:"Date"}),l(ht,{id:"dialog-consent-date",type:"date",value:m?m.toISOString().split("T")[0]:"",onChange:z=>w(z.target.value?new Date(z.target.value):null)})]})]}),x(fs,{children:[l(MN,{asChild:!0,children:l(Fe,{type:"button",variant:"outline",children:"Cancel"})}),l(Fe,{type:"button",onClick:Y,disabled:!u||i,children:i?x(_r,{children:[l("span",{className:"mr-2",children:"Saving..."}),l(Un,{className:"h-4 w-4 animate-spin"})]}):"Confirm & Save"})]})]})})]})}function _Ie(){var yt,Mr,ta;const[e,t]=HH();Ss();const[r,n]=S.useState(new Date),[a,i]=S.useState("week"),[s,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!1),[h,m]=S.useState(null),[w,g]=S.useState("patient-select"),[y,b]=S.useState(""),[_,N]=S.useState(null),[E,C]=S.useState(null),[D,P]=S.useState([]),[F,L]=S.useState([]),[W,T]=S.useState([]),[R,j]=S.useState([]),[Y,Z]=S.useState(!1),[re,z]=S.useState(""),[q,B]=S.useState(null),[G,Q]=S.useState(""),[O,J]=S.useState("AM"),{toast:X}=_n(),ne=100,ie="bg-booked-bg text-booked-icon border border-booked-border",oe="bg-canceled-bg text-canceled-icon border border-canceled-border line-through opacity-70",[de,V]=S.useState(null),[se,fe]=S.useState(!1),[te,ke]=S.useState({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),Re=Array.from({length:11},(bt,vt)=>{const Qt=vt+8;return Mt(new Date().setHours(Qt,0),"HH:mm")}),[Ce,ve]=S.useState(null),[Ge,pt]=S.useState(null),[it,Le]=S.useState(!1),ut=async()=>{try{let bt,vt;if(a==="day"?(bt=Dl(r),vt=Qv(r)):a==="week"?(bt=co(r,{weekStartsOn:1}),vt=R0(r,{weekStartsOn:1})):a==="month"&&(bt=Ws(r),vt=fm(r)),!bt||!vt){console.error("Invalid view state, cannot determine date range:",a);return}console.log(`Fetching appointments from ${bt.toISOString()} to ${vt.toISOString()}`);const Qt=await Rt.appointments.getByDateRange(bt.toISOString(),vt.toISOString());P(Array.isArray(Qt)?Qt:[])}catch(bt){console.error("Error fetching appointments:",bt),P([])}},he=async()=>{try{const bt=await Rt.patients.getAll();L(bt||[])}catch(bt){console.error("Error fetching patients:",bt),L([])}},Ee=async()=>{try{const bt=await Rt.staff.getDoctors();T(bt||[])}catch(bt){console.error("Error fetching all doctors:",bt),T([])}},Me=async(bt,vt,Qt)=>{if(!bt||!vt||isNaN(Qt)||Qt<=0){j([]);return}Z(!0);try{const we=`${Mt(bt,"yyyy-MM-dd")}T${vt}:00`,xe=xL(we,"yyyy-MM-dd'T'HH:mm:ss",new Date);if(!Bp(xe))throw new Error(`Invalid combined date/time string: ${we}`);const _e=new Date(xe.getTime()+Qt*6e4),Ne=yL(xe),Se=yL(_e),Ve=await Rt.staff.getAvailableDoctors(Ne,Se);j(Ve||[]),E&&!Ve.some(ft=>ft.id===E.id)&&C(null)}catch(ce){console.error("Error fetching available doctors:",ce),X({variant:"destructive",title:"Error Fetching Doctors",description:"Could not fetch available doctors for the selected slot."}),j([])}finally{Z(!1)}};S.useEffect(()=>{ut(),he(),Ee();const bt=GD("appointments",vt=>{console.log("Appointment change detected:",vt),ut()});return()=>{bt.unsubscribe()}},[r,a]),S.useEffect(()=>{const bt=e.get("date"),vt=e.get("patientId"),Qt=e.get("treatmentId"),ce=e.get("description");let we=null;if(bt){const xe=Wr(bt);Bp(xe)?(we=xe,n(we)):(console.warn("Invalid date received from query params:",bt),X({title:"Invalid Date",description:"The date from the treatment plan was invalid.",variant:"destructive"}))}vt&&we?(async()=>{try{const _e=await Rt.patients.getById(vt);_e?(N(_e),ke(Ne=>({...Ne,type:"Scheduled Visit",reason_for_visit:ce||"",treatment_id:Qt||null})),B(we),g("appointment-details"),u(!0),V(Qt),t({},{replace:!0})):(X({title:"Patient Not Found",description:"Could not find the patient specified by the treatment plan.",variant:"destructive"}),V(null))}catch(_e){console.error("Error fetching patient from redirect:",_e),X({title:"Error",description:"Could not fetch patient details from the treatment plan.",variant:"destructive"}),V(null)}})():(bt||vt||Qt||ce)&&(console.log("Partial booking parameters received, not auto-opening modal.",{dateStr:bt,patientId:vt,treatmentId:Qt}),V(null))},[e]),S.useEffect(()=>{if(c&&w==="appointment-details"){const bt=parseInt(te.duration);let vt=null,Qt="";if(s)vt=s.date,Qt=s.time;else if(q&&G){vt=q;const ce=G.split(":");if(ce.length===2){let we=parseInt(ce[0],10),xe=parseInt(ce[1],10);if(!isNaN(we)&&!isNaN(xe)&&we>=1&&we<=12&&xe>=0&&xe<=59)O==="PM"&&we<12?we+=12:O==="AM"&&we===12&&(we=0),Qt=`${String(we).padStart(2,"0")}:${String(xe).padStart(2,"0")}`;else{j([]);return}}else{j([]);return}}vt&&Qt&&!isNaN(bt)&&bt>0?Me(vt,Qt,bt):j([])}},[c,w,s,q,G,O,te.duration]),S.useEffect(()=>{d?(async()=>{if(h&&h.treatment_id){Le(!0),ve(null),pt(null);try{const vt=await Rt.patients.getTreatmentVisitById(h.treatment_id);if(vt)if(ve(vt),vt.treatment_plan_id){const Qt=await Rt.patients.getTreatmentPlanDetails(vt.treatment_plan_id);Qt&&Qt.data?pt(Qt.data.title||"Unnamed Plan"):(console.warn("Could not fetch plan details for plan ID:",vt.treatment_plan_id),pt("Plan details unavailable"))}else pt("Plan ID missing in visit");else console.warn("Could not fetch treatment visit for ID:",h.treatment_id)}catch(vt){console.error("Error fetching treatment details for appointment:",vt),X({title:"Error",description:"Could not load related treatment details for this appointment.",variant:"destructive"})}finally{Le(!1)}}else ve(null),pt(null),Le(!1)})():(ve(null),pt(null),Le(!1))},[h,d]);const at=async bt=>{if(b(bt),bt.length>2)try{const vt=await Rt.patients.search(bt);L(vt||[])}catch(vt){console.error("Error searching patients:",vt),L([])}else bt.length===0&&he()},ct=async bt=>{console.log("handleBookAppointment called. selectedDoctor:",E),fe(!0);try{if(!_||!E){console.error("Booking validation failed: Missing patient or doctor",{selectedPatient:_,selectedDoctor:E}),X({variant:"destructive",title:"Missing Information",description:"Please select a patient and a doctor."}),fe(!1);return}let vt;const Qt=Dl(new Date);if(s){vt=new Date(s.date);const[Se,Ve]=s.time.split(":").map(Number);vt.setHours(Se,Ve,0,0)}else{if(!q||!G){X({variant:"destructive",title:"Missing Information",description:"Please select a date and time (hh:mm)."}),fe(!1);return}const Se=G.split(":");if(Se.length===2){let Ve=parseInt(Se[0],10),ft=parseInt(Se[1],10);if(!isNaN(Ve)&&!isNaN(ft)&&Ve>=1&&Ve<=12&&ft>=0&&ft<=59){if(O==="PM"&&Ve<12?Ve+=12:O==="AM"&&Ve===12&&(Ve=0),vt=new Date(q),vt.setHours(Ve,ft,0,0),!Bp(vt)){X({variant:"destructive",title:"Invalid Date/Time",description:"The constructed date/time is invalid."}),fe(!1);return}}else{X({variant:"destructive",title:"Invalid Time",description:"Please enter a valid time in hh:mm format (01-12 for hours, 00-59 for minutes)."}),fe(!1);return}}else{X({variant:"destructive",title:"Invalid Time Format",description:"Please use hh:mm format for time."}),fe(!1);return}}const ce=new Date;if(ah(Dl(vt),Qt)){X({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past dates."}),fe(!1);return}if(Op(vt)&&ah(vt,ce)){X({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past times on the current day."}),fe(!1);return}const we=parseInt(bt.duration);if(isNaN(we)||we<=0){X({variant:"destructive",title:"Invalid Duration",description:"Invalid appointment duration selected."}),fe(!1);return}const xe=new Date(vt.getTime()+we*6e4),_e={patient_id:_.id,staff_id:E.id,title:bt.treatment_id?"Scheduled Visit":bt.type,start_time:vt.toISOString(),end_time:xe.toISOString(),type:bt.treatment_id?"Scheduled Visit":bt.type,reason_for_visit:bt.reason_for_visit,notes:bt.notes,status:"scheduled",treatment_id:bt.treatment_id||de||null},Ne=await Rt.appointments.create(_e);if(Ne!=null&&Ne.id&&Ne.start_time&&Ne.patient_id){const Se=Ne.id,Ve=Ne.patient_id,ft=Wr(Ne.start_time);try{await Rt.communications.schedule({patientId:Ve,appointmentId:Se,type:"appointment_reminder",channel:"app",scheduledFor:new Date().toISOString(),customMessage:`Your appointment for ${bt.type==="Scheduled Visit"?bt.reason_for_visit:bt.type} with Dr. ${E==null?void 0:E.first_name} ${E==null?void 0:E.last_name} on ${Mt(ft,"PPP 'at' p")} is confirmed.`})}catch(Je){console.error("Error scheduling immediate app confirmation:",Je)}if(_!=null&&_.phone){const Je=wx(ft,24);if(ah(new Date,Je))try{await Rt.communications.schedule({patientId:Ve,appointmentId:Se,type:"appointment_reminder",channel:"sms",scheduledFor:Je.toISOString(),customMessage:`Reminder: Your appointment for ${bt.type==="Scheduled Visit"?bt.reason_for_visit:bt.type} with Dr. ${E==null?void 0:E.first_name} ${E==null?void 0:E.last_name} is tomorrow at ${Mt(ft,"p")}. Call us if you need to reschedule.`})}catch(Ft){console.error("Error scheduling SMS reminder:",Ft)}}const et={...Ne,patients:_?{id:_.id,first_name:_.first_name,last_name:_.last_name,email:_.email,phone:_.phone}:null,staff:E?{id:E.id,first_name:E.first_name,last_name:E.last_name,role:E.role,specialization:E.specialization}:null},st=!!de;u(!1),m(et),st||f(!0),X({title:"Appointment Booked Successfully!",description:`Appointment for ${_==null?void 0:_.first_name} with Dr. ${E==null?void 0:E.first_name} has been scheduled.`}),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),o(null),B(null),Q(""),J("AM"),g("patient-select"),V(null),await ut()}else console.error("Failed to create appointment or missing critical data from response.",Ne),X({variant:"destructive",title:"Booking Failed",description:"Could not create the appointment. Please try again."})}catch(vt){console.error("Error booking appointment:",vt),X({variant:"destructive",title:"Booking Error",description:`An unexpected error occurred: ${vt instanceof Error?vt.message:"Unknown error"}. Please try again.`})}finally{fe(!1)}},dt=(bt,vt)=>{bt.stopPropagation(),m({...vt,notes:vt.notes||"",type:vt.type||"checkup"}),f(!0)},Xe=async()=>{if(!h||!h.id)return;const bt=h.id;try{await Rt.appointments.cancel(bt);try{await Rt.communications.cancelByAppointment(bt),console.log(`Cancellation request sent for communications related to appointment ${bt}`)}catch(vt){console.error(`Failed to cancel communications for appointment ${bt}:`,vt),X({variant:"destructive",title:"Communication Cancellation Failed",description:"Could not cancel scheduled reminders. Please check manually."})}f(!1),await ut(),X({title:"Appointment Cancelled",description:"The appointment and any scheduled reminders have been cancelled."})}catch(vt){console.error("Error cancelling appointment:",vt),X({variant:"destructive",title:"Cancellation Failed",description:`Could not cancel appointment: ${vt instanceof Error?vt.message:"Unknown error"}`})}},Nt=async bt=>{try{if(!h||!h.id)return;const vt={title:bt.type,type:bt.type,notes:bt.notes};await Rt.appointments.update(h.id,vt),f(!1),await ut()}catch(vt){console.error("Error updating appointment:",vt),alert(`Failed to update appointment: ${vt instanceof Error?vt.message:"Unknown error"}`)}},St=(bt,vt)=>{const Qt=new Date(bt),[ce,we]=vt.split(":").map(Number);Qt.setHours(ce,we,0,0);const xe=new Date(Qt);return xe.setHours(ce+1,we,0,0),Array.isArray(D)?D.filter(Ne=>{if(!Ne||!Ne.start_time||!Ne.end_time)return!1;try{const Se=Wr(Ne.start_time),Ve=Wr(Ne.end_time);return!Bp(Se)||!Bp(Ve)?(console.warn("Invalid date found in appointment, skipping:",Ne),!1):Se<xe&&Ve>Qt}catch(Se){return console.error("Error parsing appointment dates:",Ne,Se),!1}}):[]},At=bt=>{const vt=Dl(bt),Qt=Qv(bt);return Array.isArray(D)?D.filter(ce=>{if(!ce||!ce.start_time)return!1;try{const we=Wr(ce.start_time);return Bp(we)?we>=vt&&we<=Qt:(console.warn("Invalid start date found in appointment, skipping:",ce),!1)}catch(we){return console.error("Error parsing appointment start date:",ce,we),!1}}):[]},dn=async bt=>{if(!bt){console.error("PatientForm onSuccess called without a patient ID."),g("patient-select");return}try{const vt=await Rt.patients.getById(bt);if(!vt)throw new Error("Failed to fetch newly created patient details.");N(vt),g("appointment-details")}catch(vt){console.error("Error after creating patient:",vt),alert(`Patient created, but failed to fetch details: ${vt instanceof Error?vt.message:"Unknown error"}. Please select the patient manually.`),g("patient-select")}},Nr=()=>{g("patient-select")},mt=()=>n(m1e(r)),Dt=()=>n(x1(r,1)),yr=()=>n(Ua(r,-1)),Gr=()=>n(Ua(r,1)),fr=()=>n(E6(r,1)),Or=()=>n(pl(r,1)),cr=()=>{const bt=xL(re,"dd/MM/yyyy",new Date);Bp(bt)?(n(bt),z("")):X({variant:"destructive",title:"Invalid Date Format",description:"Please enter date as DD/MM/YYYY."})},xn=(bt,vt)=>{const Qt=new Date,ce=Dl(Qt),we=Dl(bt);if(ah(we,ce)){X({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past dates."});return}if(Op(bt)){const[_e,Ne]=vt.split(":").map(Number),Se=new Date(bt);if(Se.setHours(_e,Ne,0,0),ah(Se,Qt)){X({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past times on the current day."});return}}o({date:bt,time:vt}),g("patient-select"),N(null),C(null),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),u(!0);const xe=parseInt(te.duration);Me(bt,vt,xe)},Sn=()=>x("div",{className:"space-y-4",children:[x("div",{className:"flex gap-2",children:[l(ht,{placeholder:"Search patients by name, email, or phone...",value:y,onChange:bt=>at(bt.target.value)}),x(Fe,{onClick:()=>{g("new-patient"),C(null)},children:[l(Zu,{className:"h-4 w-4 mr-2"}),"New Patient"]})]}),l("div",{className:"h-[300px] overflow-y-auto space-y-2",children:Array.isArray(F)&&F.map(bt=>l(Fe,{variant:"outline",className:"w-full justify-start",onClick:()=>{N(bt),g("appointment-details")},children:x("div",{className:"flex items-center",children:[l(vi,{className:"h-4 w-4 mr-2"}),x("div",{className:"text-left",children:[l("p",{className:"font-medium",children:`${bt.first_name} ${bt.last_name}`}),l("p",{className:"text-sm text-muted-foreground",children:bt.phone||"No phone"})]})]})},bt.id))})]}),Nn=()=>{const bt=!!te.treatment_id;return x("div",{className:"space-y-4",children:[(!s||q)&&x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"manual-date",children:"Date"}),l(ht,{id:"manual-date",type:"date",value:q?Mt(q,"yyyy-MM-dd"):"",onChange:vt=>B(vt.target.value?Wr(vt.target.value):null),disabled:!!s&&!bt})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"manual-time-input",children:"Time"}),x("div",{className:`flex items-stretch border rounded-md overflow-hidden transition-all focus-within:ring-1 focus-within:ring-ring ${G?"border-input":"border-red-500"}`,children:[l(ht,{id:"manual-time-input",type:"text",value:G,onChange:vt=>{let Qt=vt.target.value.replace(/[^0-9]/g,"");G.length>Qt.length&&G.endsWith(":")&&(Qt=Qt.slice(0,-1)),Qt.length>2&&!Qt.includes(":")&&(Qt=Qt.slice(0,2)+":"+Qt.slice(2)),Q(Qt.slice(0,5))},placeholder:"hh:mm",className:"border-none focus:ring-0 outline-none flex-grow p-2 min-w-[70px] text-sm",required:!0}),x(Ur,{value:O,onValueChange:vt=>J(vt),children:[l(jr,{className:"border-l border-input focus:ring-0 outline-none h-full bg-transparent px-3 text-sm rounded-l-none","aria-label":"Select AM or PM",children:l(qr,{})}),x($r,{children:[l(wt,{value:"AM",children:"AM"}),l(wt,{value:"PM",children:"PM"})]})]})]}),l("p",{className:"text-xs text-muted-foreground pt-1",children:"Time required for the appointment."})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Select Doctor"}),x(Ur,{value:(E==null?void 0:E.id)||"",onValueChange:vt=>{const Qt=R.find(ce=>ce.id===vt);C(Qt||null)},disabled:Y,children:[l(jr,{children:l(qr,{placeholder:Y?"Loading doctors...":"Choose an available doctor"})}),x($r,{children:[!Y&&R.length===0&&l(wt,{value:"no-doctors",disabled:!0,children:"No doctors available for this slot"}),R.map(vt=>x(wt,{value:vt.id,children:["Dr. ",vt.first_name," ",vt.last_name," ",vt.specialization&&`(${vt.specialization})`]},vt.id))]})]})]}),_&&x("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[l(vi,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[l("p",{className:"font-medium",children:`${_.first_name} ${_.last_name}`}),l("p",{className:"text-sm text-muted-foreground",children:_.phone||"No phone"})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Appointment Type"}),x(Ur,{value:bt?"Scheduled Visit":te.type||"",onValueChange:vt=>{bt||ke({...te,type:vt})},disabled:bt,children:[l(jr,{children:l(qr,{placeholder:"Select type"})}),l($r,{children:bt?l(wt,{value:"Scheduled Visit",children:"Scheduled Visit"}):x(_r,{children:[l(wt,{value:"checkup",children:"Checkup"}),l(wt,{value:"cleaning",children:"Cleaning"}),l(wt,{value:"filling",children:"Filling"}),l(wt,{value:"root-canal",children:"Root Canal"}),te.type&&!["checkup","cleaning","filling","root-canal","Scheduled Visit"].includes(te.type)&&l(wt,{value:te.type,children:te.type})]})})]})]}),te.reason_for_visit&&x("div",{className:"space-y-2",children:[l(tr,{children:"Reason for Visit"}),l("p",{className:"text-sm p-3 bg-muted rounded-md whitespace-pre-wrap border",children:te.reason_for_visit})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Duration"}),x(Ur,{value:te.duration,onValueChange:vt=>{ke({...te,duration:vt});const Qt=parseInt(vt);let ce=null,we="";s&&!bt?(ce=s.date,we=s.time):q&&G&&(ce=q,we=G),ce&&we&&!isNaN(Qt)&&Me(ce,we,Qt)},children:[l(jr,{children:l(qr,{placeholder:"Select duration"})}),x($r,{children:[l(wt,{value:"30",children:"30 minutes"}),l(wt,{value:"60",children:"1 hour"}),l(wt,{value:"90",children:"1.5 hours"}),l(wt,{value:"120",children:"2 hours"})]})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Notes"}),l(on,{value:te.notes,onChange:vt=>ke({...te,notes:vt.target.value}),placeholder:"Add any notes about the appointment..."})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>g("patient-select"),disabled:se,children:"Back"}),l(Fe,{onClick:()=>ct(te),disabled:se,children:se?x(_r,{children:[l(Un,{className:"mr-2 h-4 w-4 animate-spin"})," Booking..."]}):"Book Appointment"})]})]})},Pr=()=>a==="day"?Gn():a==="week"?hs():a==="month"?bi():null,hn=bt=>bt==="cancelled"?oe:ie,hs=()=>{const bt=co(r,{weekStartsOn:1}),vt=R0(r,{weekStartsOn:1}),Qt=z2({start:bt,end:vt}),ce=new Date;return x(i5,{delayDuration:100,children:[" ",x(or,{children:[x("div",{className:"grid grid-cols-8 border-b",children:[l("div",{className:"p-4 font-medium text-muted-foreground",children:"Time"}),Qt.map(we=>x("div",{className:`p-4 text-center border-l ${Op(we)?"bg-blue-50":""}`,children:[l("div",{className:"font-medium",children:Mt(we,"EEE")}),l("div",{className:"text-sm text-muted-foreground",children:Mt(we,"d")})]},we.toISOString()))]}),l("div",{children:Re.map(we=>x("div",{className:"grid grid-cols-8 border-b last:border-0",children:[l("div",{className:"p-4 text-sm text-right text-muted-foreground",children:we}),Qt.map(xe=>{const _e=St(xe,we);let Ne=!1;if(Op(xe)){const[Se,Ve]=we.split(":").map(Number),ft=new Date(xe);ft.setHours(Se,Ve,0,0),ah(ft,ce)&&(Ne=!0)}return l("div",{onClick:()=>xn(xe,we),className:`border-l p-1 relative transition-colors overflow-hidden ${Ne?"bg-muted/30 cursor-not-allowed opacity-70":"hover:bg-muted/50 cursor-pointer"}`,style:{height:`${ne}px`},children:x("div",{className:"flex flex-wrap gap-2 h-full items-start content-start p-1.5",children:[" ",_e.map(Se=>{var Ve,ft,et,st;return x(s5,{children:[l(o5,{asChild:!0,children:l("div",{className:`w-7 h-7 rounded-md flex items-center justify-center cursor-pointer ring-2 transition-all ${hn(Se.status)} ${Se.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:Je=>dt(Je,Se),children:Se.status==="cancelled"?l(oA,{className:"h-4 w-4 text-canceled-icon"}):l(sA,{className:"h-4 w-4 text-booked-icon"})})}),x(X2,{side:"top",align:"center",className:"bg-background border shadow-lg rounded-lg p-3 text-sm w-60",children:[x("div",{className:"flex items-center mb-2",children:[l(vi,{className:"h-5 w-5 mr-2 text-muted-foreground flex-shrink-0"})," ",x("span",{className:"font-semibold",children:[(Ve=Se.patients)==null?void 0:Ve.first_name," ",(ft=Se.patients)==null?void 0:ft.last_name]})]}),x("p",{className:"text-muted-foreground text-xs mb-1",children:["Dr. ",(et=Se.staff)==null?void 0:et.first_name," ",(st=Se.staff)==null?void 0:st.last_name]}),x("p",{className:"text-muted-foreground text-xs mb-1",children:[l(Us,{className:"inline h-3 w-3 mr-1"}),Se.start_time?Mt(Wr(Se.start_time),"h:mm a"):"No time"," - ",Se.end_time?Mt(Wr(Se.end_time),"h:mm a"):""]}),x("p",{className:"text-muted-foreground text-xs",children:[l(cA,{className:"inline h-3 w-3 mr-1"}),Se.type]}),Se.status==="cancelled"&&l("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},Se.id)})]})},xe.toISOString())})]},we))})]})]})},Gn=()=>{const bt=new Date;return x(i5,{delayDuration:100,children:[" ",x(or,{children:[x("div",{className:"grid grid-cols-2 border-b",children:[l("div",{className:"p-4 font-medium text-muted-foreground",children:"Time"}),x("div",{className:`p-4 text-center border-l ${Op(r)?"bg-blue-50":""}`,children:[l("div",{className:"font-medium",children:Mt(r,"EEEE")}),l("div",{className:"text-sm text-muted-foreground",children:Mt(r,"MMMM d, yyyy")})]})]}),l("div",{children:Re.map(vt=>{const Qt=St(r,vt);let ce=!1;if(Op(r)){const[we,xe]=vt.split(":").map(Number),_e=new Date(r);_e.setHours(we,xe,0,0),ah(_e,bt)&&(ce=!0)}return x("div",{className:"grid grid-cols-2 border-b last:border-0",children:[l("div",{className:"p-4 text-sm text-right text-muted-foreground",children:vt}),l("div",{onClick:()=>xn(r,vt),className:`border-l relative transition-colors overflow-hidden ${ce?"bg-muted/30 cursor-not-allowed opacity-70":"hover:bg-muted/50 cursor-pointer"}`,style:{height:`${ne}px`},children:x("div",{className:"flex flex-wrap gap-2 h-full items-start content-start p-1.5",children:[" ",Qt.map(we=>{var xe,_e,Ne,Se;return x(s5,{children:[l(o5,{asChild:!0,children:l("div",{className:`w-7 h-7 rounded-md flex items-center justify-center cursor-pointer ring-2 transition-all ${hn(we.status)} ${we.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:Ve=>dt(Ve,we),children:we.status==="cancelled"?l(oA,{className:"h-4 w-4 text-canceled-icon"}):l(sA,{className:"h-4 w-4 text-booked-icon"})})}),x(X2,{side:"top",align:"center",className:"bg-background border shadow-lg rounded-lg p-3 text-sm w-60",children:[x("div",{className:"flex items-center mb-2",children:[l(vi,{className:"h-5 w-5 mr-2 text-muted-foreground flex-shrink-0"})," ",x("span",{className:"font-semibold",children:[(xe=we.patients)==null?void 0:xe.first_name," ",(_e=we.patients)==null?void 0:_e.last_name]})]}),x("p",{className:"text-muted-foreground text-xs mb-1",children:["Dr. ",(Ne=we.staff)==null?void 0:Ne.first_name," ",(Se=we.staff)==null?void 0:Se.last_name]}),x("p",{className:"text-muted-foreground text-xs mb-1",children:[l(Us,{className:"inline h-3 w-3 mr-1"}),we.start_time?Mt(Wr(we.start_time),"h:mm a"):"No time"," - ",we.end_time?Mt(Wr(we.end_time),"h:mm a"):""]}),x("p",{className:"text-muted-foreground text-xs",children:[l(cA,{className:"inline h-3 w-3 mr-1"}),we.type]}),we.status==="cancelled"&&l("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},we.id)})]})})]},vt)})})]})]})},bi=()=>{const bt=Ws(r),vt=fm(r),Qt=co(bt,{weekStartsOn:1}),ce=R0(vt,{weekStartsOn:1}),we=z2({start:Qt,end:ce}),xe=[];let _e=[];return we.forEach(Ne=>{_e.push(Ne),_e.length===7&&(xe.push(_e),_e=[])}),_e.length>0&&xe.push(_e),x(or,{children:[x(i5,{delayDuration:300,children:[" ",l("div",{className:"grid grid-cols-7 border-b",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(Ne=>l("div",{className:"p-2 text-center font-medium",children:Ne},Ne))}),l("div",{children:xe.map((Ne,Se)=>l("div",{className:"grid grid-cols-7",children:Ne.map(Ve=>{const ft=At(Ve),et=U4(Ve,r),st=ft.filter(Je=>Je.status!=="cancelled");return x("div",{onClick:()=>{n(Ve),i("day")},className:`border p-2 min-h-[120px] relative ${et?Op(Ve)?"bg-blue-50":"":"bg-gray-100 text-gray-400"} hover:bg-muted/50 cursor-pointer transition-colors`,children:[l("div",{className:`text-right font-medium ${Op(Ve)?"text-blue-600":""}`,children:Mt(Ve,"d")}),x("div",{className:"mt-1 flex flex-wrap gap-1 overflow-hidden max-h-[80px]",children:[ft.slice(0,3).map(Je=>{var Ft,Jt,lr,zt;return x(s5,{children:[l(o5,{asChild:!0,children:l("div",{className:`w-5 h-5 rounded flex items-center justify-center cursor-pointer ring-1 transition-all ${hn(Je.status)} ${Je.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:qt=>{qt.stopPropagation(),dt(qt,Je)},children:Je.status==="cancelled"?l(oA,{className:"h-3 w-3 text-canceled-icon"}):l(sA,{className:"h-3 w-3 text-booked-icon"})})}),x(X2,{side:"top",align:"start",className:"bg-gradient-to-b from-white to-gray-50 border border-gray-200 shadow-xl rounded-lg p-4 text-sm w-64",children:[x("div",{className:"flex items-center mb-2",children:[l(vi,{className:"h-5 w-5 mr-2 text-muted-foreground"})," ",x("span",{className:"font-bold text-gray-800",children:[(Ft=Je.patients)==null?void 0:Ft.first_name," ",(Jt=Je.patients)==null?void 0:Jt.last_name]})," "]}),x("p",{className:"text-gray-600 text-xs mb-1 font-medium",children:["Dr. ",(lr=Je.staff)==null?void 0:lr.first_name," ",(zt=Je.staff)==null?void 0:zt.last_name]})," ",x("p",{className:"text-muted-foreground text-xs mb-1",children:[l(Us,{className:"inline h-3 w-3 mr-1"}),Je.start_time?Mt(Wr(Je.start_time),"h:mm a"):"No time"," - ",Je.end_time?Mt(Wr(Je.end_time),"h:mm a"):""]}),x("p",{className:"text-muted-foreground text-xs",children:[l(cA,{className:"inline h-3 w-3 mr-1"}),Je.type]}),Je.status==="cancelled"&&l("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},Je.id)}),ft.length>3&&x("div",{className:"text-xs text-muted-foreground text-center",children:["+",st.length-3," more"]})]})]},Ve.toISOString())})},Se))})]})," "]})};return x("div",{className:"space-y-6",children:[l(Fa,{heading:"Appointments",text:"Manage and schedule patient appointments",children:x("div",{className:"flex items-center gap-4",children:[l(Lm,{value:a,onValueChange:bt=>i(bt),className:"w-fit",children:x(Rh,{children:[l(Oa,{value:"month",children:"Month"}),l(Oa,{value:"week",children:"Week"}),l(Oa,{value:"day",children:"Day"})]})}),(()=>{let bt="",vt,Qt;if(a==="day")bt=Mt(r,"MMMM d, yyyy"),vt=yr,Qt=Gr;else if(a==="week"){const ce=co(r,{weekStartsOn:1}),we=R0(r,{weekStartsOn:1});bt=`${Mt(ce,"MMM d")} - ${Mt(we,"MMM d, yyyy")}`,vt=mt,Qt=Dt}else a==="month"&&(bt=Mt(r,"MMMM yyyy"),vt=fr,Qt=Or);return x("div",{className:"flex items-center gap-2",children:[l(Fe,{variant:"outline",size:"icon",onClick:vt,children:l(y4,{className:"h-4 w-4"})}),l("span",{className:"text-sm font-medium",children:bt}),l(Fe,{variant:"outline",size:"icon",onClick:Qt,children:l(sm,{className:"h-4 w-4"})})]})})(),x("div",{className:"flex gap-2 ml-auto",children:[l(ht,{className:"w-32",placeholder:"DD/MM/YYYY",value:re,onChange:bt=>z(bt.target.value)}),l(Fe,{variant:"outline",onClick:cr,children:"Go to Date"})]}),x(Fe,{onClick:()=>{o(null),g("patient-select"),u(!0),j([]),C(null)},children:[l(Zu,{className:"h-4 w-4 mr-2"})," New Appointment"]})]})}),Pr(),l(Vn,{open:c,onOpenChange:bt=>{u(bt),bt||(o(null),B(null),Q(""),J("AM"),N(null),C(null),j([]),b(""),g("patient-select"),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),V(null))},children:x(Bn,{className:"overflow-y-auto",children:[x(Jn,{children:[l(Zn,{children:w==="patient-select"?"Select Patient":w==="new-patient"?"New Patient Registration":de?"Book Treatment Visit":"Appointment Details"}),s&&w!=="new-patient"&&!de&&x(us,{children:[Mt(s.date,"MMMM d, yyyy")," at ",s.time]}),q&&w!=="new-patient"&&de&&x(us,{children:["For Treatment Visit: ",Mt(q,"MMMM d, yyyy"),G&&` at ${G} ${O}`]}),w==="new-patient"&&l(us,{children:"Enter the new patient's details below."})]}),x("div",{className:"max-h-[75vh] overflow-y-auto p-4",children:[w==="patient-select"&&Sn(),w==="new-patient"&&l(NR,{mode:"simplified",onSuccess:dn,onCancel:Nr}),w==="appointment-details"&&Nn()]})]})}),l(Vn,{open:d,onOpenChange:f,children:x(Bn,{children:[x(Jn,{children:[l(Zn,{children:"Appointment Details"}),h&&h.start_time&&x(us,{children:[Mt(Wr(h.start_time),"MMMM d, yyyy")," at"," ",Mt(Wr(h.start_time),"h:mm a")]})]}),h&&x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[l(vi,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[x("p",{className:"font-medium",children:[(yt=h.patients)==null?void 0:yt.first_name," ",(Mr=h.patients)==null?void 0:Mr.last_name]}),x("div",{className:"flex items-center text-sm text-muted-foreground",children:[l(S5,{className:"h-3.5 w-3.5 mr-1"}),((ta=h.patients)==null?void 0:ta.phone)||"No phone number"]})]})]}),h.staff&&x("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[l(wce,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[x("p",{className:"font-medium",children:["Dr. ",h.staff.first_name," ",h.staff.last_name]}),h.staff.specialization&&l("p",{className:"text-sm text-muted-foreground",children:h.staff.specialization})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Status"}),l("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:h.status})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Type"}),x(Ur,{value:h.treatment_id?"Scheduled Visit":h.type||"",onValueChange:bt=>{!h.treatment_id&&(h.status==="scheduled"||h.status==="confirmed")&&m({...h,type:bt})},disabled:h.status!=="scheduled"&&h.status!=="confirmed"||!!h.treatment_id,children:[l(jr,{children:l(qr,{placeholder:"Select type"})}),l($r,{children:h.treatment_id?l(wt,{value:"Scheduled Visit",children:"Scheduled Visit"}):x(_r,{children:[l(wt,{value:"checkup",children:"Checkup"}),l(wt,{value:"cleaning",children:"Cleaning"}),l(wt,{value:"filling",children:"Filling"}),l(wt,{value:"root-canal",children:"Root Canal"}),h.type&&!["checkup","cleaning","filling","root-canal","Scheduled Visit"].includes(h.type)&&l(wt,{value:h.type,children:h.type})]})})]})]}),h.reason_for_visit&&x("div",{className:"space-y-2",children:[l(tr,{children:"Reason for Visit"}),l("p",{className:"text-sm p-3 bg-muted rounded-md whitespace-pre-wrap border",children:h.reason_for_visit})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Notes"}),l(on,{value:h.notes||"",onChange:bt=>m({...h,notes:bt.target.value}),placeholder:"Add any notes about the appointment...",disabled:h.status!=="scheduled"&&h.status!=="confirmed"})]}),x(fs,{children:[(h.status==="scheduled"||h.status==="confirmed")&&x(_r,{children:[l(Fe,{variant:"destructive",onClick:Xe,children:"Cancel Appointment"}),l(Fe,{onClick:()=>Nt({type:h.type,notes:h.notes||""}),children:"Update Appointment"})]}),h.status!=="scheduled"&&h.status!=="confirmed"&&l(Fe,{variant:"outline",onClick:()=>f(!1),children:"Close"})]}),it&&x("div",{className:"p-4 text-center",children:[l(Un,{className:"h-6 w-6 animate-spin mx-auto text-muted-foreground"}),l("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading treatment details..."})]}),!it&&Ce&&x("div",{className:"border-t pt-4 mt-4",children:[l("h4",{className:"text-md font-semibold mb-2 text-primary",children:"Related Treatment Information"}),Ge&&l("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:x("p",{className:"text-sm font-medium text-blue-700",children:["Part of Treatment Plan: ",l("span",{className:"font-bold",children:Ge})]})}),x("div",{className:"space-y-2 text-sm p-3 bg-slate-50 rounded-md",children:[x("div",{className:"flex justify-between",children:[l("span",{className:"text-muted-foreground",children:"Visit Number:"}),l("span",{className:"font-medium",children:Ce.visit_number||"N/A"})]}),x("div",{className:"flex justify-between",children:[l("span",{className:"text-muted-foreground",children:"Procedures:"}),l("span",{className:"font-medium text-right break-words max-w-[70%]",children:Ce.procedures||"N/A"})]}),Ce.estimated_duration&&x("div",{className:"flex justify-between",children:[l("span",{className:"text-muted-foreground",children:"Est. Duration:"}),l("span",{className:"font-medium",children:Ce.estimated_duration})]}),Ce.scheduled_date&&x("div",{className:"flex justify-between",children:[l("span",{className:"text-muted-foreground",children:"Originally Scheduled:"}),l("span",{className:"font-medium",children:Mt(Wr(Ce.scheduled_date),"MMM d, yyyy")})]})]})]})]})]})})]})}var AR="Progress",kR=100,[SIe,rQe]=es(AR),[NIe,AIe]=SIe(AR),bre=S.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=kIe,...s}=e;(a||a===0)&&!$W(a)&&console.error(EIe(`${a}`,"Progress"));const o=$W(a)?a:kR;n!==null&&!BW(n,o)&&console.error(CIe(`${n}`,"Progress"));const c=BW(n,o)?n:null,u=zS(c)?i(c,o):void 0;return l(NIe,{scope:r,value:c,max:o,children:l(vr.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":zS(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Nre(c,o),"data-value":c??void 0,"data-max":o,...s,ref:t})})});bre.displayName=AR;var _re="ProgressIndicator",Sre=S.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=AIe(_re,r);return l(vr.div,{"data-state":Nre(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});Sre.displayName=_re;function kIe(e,t){return`${Math.round(e/t*100)}%`}function Nre(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zS(e){return typeof e=="number"}function $W(e){return zS(e)&&!isNaN(e)&&e>0}function BW(e,t){return zS(e)&&!isNaN(e)&&e<=t&&e>=0}function EIe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kR}\`.`}function CIe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Are=bre,PIe=Sre;const kre=S.forwardRef(({className:e,value:t,...r},n)=>l(Are,{ref:n,className:Lt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:l(PIe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));kre.displayName=Are.displayName;const TIe=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return e}},OIe=e=>e?e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):"Record",DIe=e=>{switch(e.record_type){case"dental":return"Dental Record";case"examination":return"Consultation / Examination";case"procedure":return"Treatment / Procedure";case"prescription":return"Prescription";case"lab_result":return"Lab Result";case"note":return"Note";default:return OIe(e.record_type)}},IIe=(e,t)=>{if(!e||!Array.isArray(t))return e;const r=t.find(n=>n.id===e);return r?`${r.first_name} ${r.last_name}`:e},RIe=({record:e,details:t,doctors:r=[]})=>{var g,y;const n="bg-gradient-to-r from-blue-500 via-blue-400 to-blue-600 text-white";let a=Array.isArray(e.attachments)?e.attachments:[];a.length===0&&(Array.isArray(t.xray_images)&&(a=a.concat(t.xray_images.map(b=>({...b,type:"xray"})))),Array.isArray(t.clinical_photos)&&(a=a.concat(t.clinical_photos.map(b=>({...b,type:"photo"})))),Array.isArray(t.documents)&&(a=a.concat(t.documents.map(b=>({...b,type:"document"})))));const[i,s]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState([]),[f,h]=S.useState(0),m=(b,_=[],N=0)=>{c(b),d(_),h(N),s(!0)},w=()=>{s(!1),c(null),d([]),h(0)};return Qe.useEffect(()=>{if(!i)return;const b=_=>{_.key==="Escape"&&w(),u.length>1&&(_.key==="ArrowRight"&&h(N=>(N+1)%u.length),_.key==="ArrowLeft"&&h(N=>(N-1+u.length)%u.length))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[i,u.length]),Qe.useEffect(()=>{u.length&&f>=0&&c(u[f])},[f,u]),x("div",{className:"rounded-xl shadow-lg border overflow-hidden mb-4",children:[l("div",{className:`p-4 ${n}`,children:x("div",{className:"flex items-center gap-3",children:[l(b4,{className:"h-6 w-6"}),l("span",{className:"text-lg font-bold",children:e.displayType}),l("span",{className:"ml-auto text-sm opacity-80",children:(g=TIe(e.record_date))==null?void 0:g.split(", ").pop()})]})}),l("div",{className:"bg-white",children:x(Lm,{defaultValue:"overview",className:"w-full",children:[x(Rh,{className:"flex w-full justify-between rounded-none border-b bg-gradient-to-r from-blue-100 to-blue-200",children:[x(Oa,{value:"overview",className:"flex items-center gap-1",children:[l(Ll,{className:"h-4 w-4"})," Overview"]}),x(Oa,{value:"diagnosis",className:"flex items-center gap-1",children:[l(_5,{className:"h-4 w-4"})," Diagnosis"]}),x(Oa,{value:"treatment",className:"flex items-center gap-1",children:[l(Ace,{className:"h-4 w-4"})," Treatment"]}),x(Oa,{value:"prescriptions",className:"flex items-center gap-1",children:[l(jce,{className:"h-4 w-4"})," Prescriptions"]}),x(Oa,{value:"lab",className:"flex items-center gap-1",children:[l(Cce,{className:"h-4 w-4"})," Lab Results"]}),x(Oa,{value:"attachments",className:"flex items-center gap-1",children:[l(j2,{className:"h-4 w-4"})," Attachments"]}),t.doctor&&x(Oa,{value:"doctor",className:"flex items-center gap-1",children:[l(iD,{className:"h-4 w-4"})," Doctor"]}),t.custom_notes&&x(Oa,{value:"custom_notes",className:"flex items-center gap-1",children:[l(_5,{className:"h-4 w-4"})," Custom Notes"]})]}),l(_a,{value:"overview",className:"p-4",children:x("div",{className:"space-y-2",children:[t.chief_complaint&&x("div",{children:[l("strong",{children:"Chief Complaint:"})," ",t.chief_complaint]}),t.vital_signs&&x("div",{children:[l("strong",{children:"Vital Signs:"})," BP: ",t.vital_signs.blood_pressure," | PR: ",t.vital_signs.pulse_rate]}),t.examination&&x("div",{children:[l("strong",{children:"Examination:"}),x("div",{className:"ml-4",children:[t.examination.extra_oral&&x("div",{children:[l("strong",{children:"Extra-oral:"})," ",t.examination.extra_oral]}),t.examination.intra_oral&&x("div",{children:[l("strong",{children:"Intra-oral:"})," ",t.examination.intra_oral]})]})]})]})}),l(_a,{value:"diagnosis",className:"p-4",children:t.diagnosis||t.code||t.notes?x("div",{className:"space-y-1",children:[t.code&&x("div",{children:[l("strong",{children:"Code:"})," ",t.code]}),t.notes&&x("div",{children:[l("strong",{children:"Notes:"})," ",t.notes]}),t.diagnosis&&typeof t.diagnosis=="object"&&Object.entries(t.diagnosis).map(([b,_])=>x("div",{children:[x("strong",{children:[b.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase()),":"]})," ",String(_)]},b)),Object.entries(t).filter(([b])=>b!=="diagnosis"&&(b.includes("diagnosis")||b==="code"||b==="notes")).map(([b,_])=>x("div",{children:[x("strong",{children:[b.replace(/_/g," ").replace(/\b\w/g,N=>N.toUpperCase()),":"]})," ",String(_)]},b))]}):l("div",{className:"text-muted-foreground",children:"No diagnosis recorded."})}),l(_a,{value:"treatment",className:"p-4",children:t.treatment?x("div",{children:[l("strong",{children:"Phase:"})," ",t.treatment.phase,l("br",{}),l("strong",{children:"Procedures:"}),l("ul",{className:"ml-4 list-disc",children:t.treatment.procedures&&t.treatment.procedures.map((b,_)=>x("li",{children:[b.title||b.code,": ",b.description," ",b.tooth_number&&`(Tooth ${b.tooth_number})`," ",b.estimated_cost&&`- Est. Cost: $${b.estimated_cost}`]},_))})]}):l("div",{className:"text-muted-foreground",children:"No treatment recorded."})}),l(_a,{value:"prescriptions",className:"p-4",children:t.prescriptions&&t.prescriptions.length>0?l("ul",{className:"ml-4 list-disc",children:t.prescriptions.map((b,_)=>x("li",{children:[b.medication," ",b.dosage," ",b.frequency&&`- ${b.frequency}`," ",b.duration&&`for ${b.duration}`," ",b.instructions&&`- Instructions: ${b.instructions}`]},_))}):l("div",{className:"text-muted-foreground",children:"No prescriptions recorded."})}),l(_a,{value:"lab",className:"p-4",children:t.lab_results&&t.lab_results.length>0?l("ul",{className:"ml-4 list-disc",children:t.lab_results.map((b,_)=>x("li",{children:[b.test_name,": ",b.result_value," ",b.units&&b.units," ",b.reference_range&&`(Ref: ${b.reference_range})`]},_))}):l("div",{className:"text-muted-foreground",children:"No lab results recorded."})}),x(_a,{value:"attachments",className:"p-4",children:[x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.filter(b=>b.type==="xray").length>0&&x("div",{children:[x("h5",{className:"text-sm font-medium mb-1 flex items-center gap-1",children:[l(j2,{className:"h-4 w-4 text-blue-500"})," X-ray Images"]}),l("div",{className:"flex flex-wrap gap-2",children:a.filter(b=>b.type==="xray").map((b,_,N)=>l("img",{src:b.url,alt:b.name||`X-ray ${_+1}`,className:"rounded-xl border object-cover w-24 h-24 cursor-pointer hover:scale-110 transition-transform shadow-md",title:b.name,onClick:()=>m(b,N,_)},_))})]}),a.filter(b=>b.type==="photo").length>0&&x("div",{children:[x("h5",{className:"text-sm font-medium mb-1 flex items-center gap-1",children:[l(j2,{className:"h-4 w-4 text-blue-500"})," Clinical Photos"]}),l("div",{className:"flex flex-wrap gap-2",children:a.filter(b=>b.type==="photo").map((b,_,N)=>l("img",{src:b.url,alt:b.name||`Photo ${_+1}`,className:"rounded-xl border object-cover w-24 h-24 cursor-pointer hover:scale-110 transition-transform shadow-md",title:b.name,onClick:()=>m(b,N,_)},_))})]}),a.filter(b=>b.type==="document").length>0&&x("div",{className:"md:col-span-2",children:[x("h5",{className:"text-sm font-medium mb-1 flex items-center gap-1",children:[l(tG,{className:"h-4 w-4 text-blue-500"})," Documents"]}),l("div",{className:"space-y-2",children:a.filter(b=>b.type==="document").map((b,_,N)=>x("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-white/70 hover:bg-blue-50 transition cursor-pointer shadow-sm backdrop-blur-md",onClick:()=>m(b,N,_),children:[l("span",{className:"text-sm truncate max-w-xs font-medium text-gray-900",title:b.name,children:b.name}),l(Fe,{variant:"ghost",size:"sm",asChild:!0,children:l("span",{children:"View"})})]},_))})]})]}),l(Vn,{open:i,onOpenChange:s,children:x(Bn,{className:"max-w-2xl bg-white/60 backdrop-blur-lg rounded-2xl shadow-2xl p-0 overflow-hidden flex flex-col items-center justify-center border border-blue-200 fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 animate-fade-in",style:{boxShadow:"0 8px 40px 0 rgba(30, 64, 175, 0.18)",minWidth:380},children:[l(Jn,{className:"w-full flex flex-row items-center justify-between px-6 pt-6 pb-2",children:l(Zn,{className:"text-xl font-extrabold text-gray-900 tracking-tight font-sans",children:(o==null?void 0:o.name)||((y=o==null?void 0:o.type)==null?void 0:y.toUpperCase())})}),x("div",{className:"flex-1 w-full flex items-center justify-center p-8",children:[o&&(o.type==="xray"||o.type==="photo")&&l("img",{src:o.url,alt:o.name,className:"max-h-[65vh] max-w-full rounded-xl border-2 border-blue-200 shadow-lg transition-all duration-300 bg-white/70",style:{objectFit:"contain",boxShadow:"0 4px 32px 0 rgba(30, 64, 175, 0.10)"}}),o&&o.type==="document"&&o.url&&o.url.endsWith(".pdf")&&l("iframe",{src:o.url,title:o.name,className:"w-[90vw] max-w-2xl h-[65vh] rounded-xl border-2 border-blue-200 bg-white/90 shadow-lg",style:{boxShadow:"0 4px 32px 0 rgba(30, 64, 175, 0.10)"}}),o&&o.type==="document"&&o.url&&!o.url.endsWith(".pdf")&&l("div",{className:"flex flex-col items-center justify-center w-full",children:x("p",{className:"text-gray-800 mb-4 text-lg font-semibold",children:["Preview not available.",l("br",{}),l("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"Download or View"})]})})]}),u.length>1&&x("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center gap-4",children:[l("button",{className:"bg-white/70 hover:bg-blue-100 text-blue-700 rounded-full p-2 shadow-md transition border border-blue-200",onClick:()=>h((f-1+u.length)%u.length),"aria-label":"Previous",children:l("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l("path",{d:"M15 18l-6-6 6-6"})})}),l("button",{className:"bg-white/70 hover:bg-blue-100 text-blue-700 rounded-full p-2 shadow-md transition border border-blue-200",onClick:()=>h((f+1)%u.length),"aria-label":"Next",children:l("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l("path",{d:"M9 6l6 6-6 6"})})})]})]})})]}),l(_a,{value:"doctor",className:"p-4",children:t.doctor?x("div",{children:[l("strong",{children:"Doctor:"})," ",IIe(t.doctor,r)]}):l("div",{className:"text-muted-foreground",children:"No doctor recorded."})}),l(_a,{value:"custom_notes",className:"p-4",children:t.custom_notes?x("div",{children:[l("strong",{children:"Custom Notes:"})," ",t.custom_notes]}):l("div",{className:"text-muted-foreground",children:"No custom notes recorded."})})]})})]})};function Ere({medicalRecords:e=[],onAddMedicalRecord:t,doctors:r=[]}){const[n,a]=S.useState(""),[i,s]=S.useState(null),[o,c]=S.useState(!1),f=e.map(y=>{let b=null;try{typeof y.description=="string"&&(b=JSON.parse(y.description))}catch(_){console.warn(`Failed to parse description for record ${y.id}:`,y.description,_)}return{...y,displayType:DIe(y)}}).filter(y=>{var C;const b=((C=y.teeth)==null?void 0:C.map(D=>D.id).join(" "))||"",_=JSON.stringify({...y,description:"",teeth:""}).toLowerCase(),N=typeof y.description=="string"?y.description.toLowerCase():"",E=n.toLowerCase();return _.includes(E)||N.includes(E)||b.includes(E)}).reduce((y,b)=>{const _=b.record_date?new Date(b.record_date).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Unknown Date";return y[_]||(y[_]=[]),y[_].unshift(b),y},{}),h=Object.keys(f).sort((y,b)=>y==="Unknown Date"?1:b==="Unknown Date"?-1:new Date(b).getTime()-new Date(y).getTime()),[m,w]=S.useState(new Set),g=y=>{w(b=>{const _=new Set(b);return _.has(y)?_.delete(y):_.add(y),_})};return x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between",children:[l(br,{children:"Medical Records History"}),x(Fe,{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg px-5 py-2 text-base shadow-md transition-all duration-150 flex items-center gap-2",size:"lg",children:[l(Ch,{className:"h-5 w-5"}),"Add Record"]})]}),x(hr,{children:[l("div",{className:"flex justify-between items-center mb-4",children:l(ht,{type:"search",value:n,onChange:y=>a(y.target.value),placeholder:"Search records (type, details, teeth...)"})}),h.length>0?l("div",{className:"space-y-6",children:h.map(y=>{const b=f[y],_=m.has(y);return x("div",{children:[x("div",{className:"flex justify-between items-center mb-2 pb-2 border-b",children:[l("h3",{className:"text-lg font-medium",children:y}),l(Fe,{variant:"ghost",size:"sm",onClick:()=>g(y),children:_?"Hide Details":`View Details (${b.length})`})]}),_&&l("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:b.map(N=>{let E={};try{typeof N.description=="string"&&(E=JSON.parse(N.description))}catch{}return l(RIe,{record:N,details:E,doctors:r},N.id)})})]},y)})}):x("p",{className:"text-sm text-muted-foreground",children:["No medical records found",n?" matching your search":"","."]})]})]})}const MIe="/DentalCare-Pro/teethselectdiagram.svg",Ui=({icon:e,label:t,value:r})=>r?x("div",{className:"flex items-start py-2",children:[l(e,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),x("div",{children:[l("p",{className:"text-sm font-medium text-muted-foreground",children:t}),typeof r=="string"||typeof r=="number"?l("p",{className:"text-base",children:r}):l("div",{className:"text-base",children:r})]})]}):null,YP=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString()}catch{return e}},FIe=e=>{if(!e||typeof e!="object")return"No significant family history reported.";const t=e==null?void 0:e.conditions,r=e==null?void 0:e.other;let n="",a="";return Array.isArray(t)&&t.length>0&&(n=t.map(i=>i.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())).join(", ")),r&&typeof r=="string"&&r.trim()!==""&&(a=`Other: ${r.trim()}`),n&&a?`${n}, ${a}`:n||a||"No significant family history reported."},LIe=e=>{if(!e||typeof e!="object")return"No lifestyle habits reported.";const t=[];Object.entries(e).forEach(([n,a])=>{if(a&&typeof a=="string"&&a.trim()!==""){const i=n.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase());t.push(`${i}: ${a.trim()}`)}});const r=t.length>0?t.join("; "):"No lifestyle habits reported.";return console.log("generateLifestyleSummary result:",r,"Input habits:",e),r},jIe=e=>{if(!e||typeof e!="object")return"No specific details reported.";const t=[];return e.has_implants==="yes"&&t.push(`Implants: Yes${e.implants_details?` (${e.implants_details})`:""}`),e.recent_health_changes==="yes"&&t.push(`Recent Health Changes: Yes${e.health_changes_details?` (${e.health_changes_details})`:""}`),e.recent_medical_screenings==="yes"&&t.push(`Screenings: Yes${e.screenings_details?` (${e.screenings_details})`:""}`),e.dental_material_allergies==="yes"&&t.push(`Dental Material Allergies: Yes${e.dental_material_allergies_details?` (${e.dental_material_allergies_details})`:""}`),e.immunizations_up_to_date&&e.immunizations_up_to_date!=="not_sure"&&t.push(`Immunizations Up To Date: ${e.immunizations_up_to_date}`),e.recent_immunizations&&e.recent_immunizations.trim()!==""&&t.push(`Recent Immunizations: ${e.recent_immunizations}`),t.length>0?t.join("; "):"No specific details reported."},$Ie=e=>{if(!e||typeof e!="object")return"N/A";const t=[];return e.chief_complaint&&t.push(`Complaint: ${e.chief_complaint}`),(e.has_pain==="yes"||e.has_pain===!0)&&t.push(`Pain: Yes (Scale: ${e.pain_scale||"N/A"}, Desc: ${e.pain_description||"N/A"})`),e.brushing_frequency&&t.push(`Brushing: ${e.brushing_frequency}`),e.flossing_habits&&t.push(`Flossing: ${e.flossing_habits}`),e.past_treatments_details&&t.push(`Past Tx: ${e.past_treatments_details}`),(e.orthodontic_history==="yes"||e.orthodontic_history===!0)&&t.push(`Ortho: Yes (${e.orthodontic_details||"details missing"})`),(e.bite_issues==="yes"||e.bite_issues===!0)&&t.push(`Bite Issues: Yes (${e.bite_symptoms||"details missing"})`),t.length>0?t.join("; "):"No specific dental history reported."},BIe=e=>{if(!Array.isArray(e)||e.length===0)return"None reported.";const t=e.filter(r=>r&&typeof r=="object"&&r.name);return t.length===0?"None reported.":x("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[" ",t.map((r,n)=>x("li",{children:[l("span",{className:"font-medium",children:r.name}),r.dosage&&` (${r.dosage})`,r.frequency&&` - ${r.frequency}`]},n))]})},UIe=e=>{if(!Array.isArray(e)||e.length===0)return"None reported.";const t=e.filter(r=>r&&typeof r=="object"&&r.type);return t.length===0?"None reported.":x("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[" ",t.map((r,n)=>x("li",{children:[l("span",{className:"font-medium",children:r.type}),r.date&&` (Approx. ${r.date})`,r.notes&&x("span",{className:"block text-xs text-muted-foreground pl-2",children:["Notes: ",r.notes]})," "]},n))]})};function qIe({patient:e,appointments:t=[],medicalRecords:r=[],dentalHistoryTeeth:n=[],onEdit:a,onBookAppointment:i,onAddMedicalRecord:s}){const[o,c]=S.useState(null),[u,d]=S.useState(!0),[f,h]=S.useState([]);if(S.useEffect(()=>{d(!0),fetch(MIe).then(_=>{if(!_.ok)throw console.error("SVG Fetch Response Status:",_.status,_.statusText),new Error(`Network response was not ok: ${_.status} ${_.statusText}`);return _.text()}).then(_=>{c(_),d(!1)}).catch(_=>{console.error("Error fetching SVG:",_),d(!1)})},[]),S.useEffect(()=>{Rt.staff.getDoctors().then(h).catch(()=>h([]))},[]),console.log("Patient object received in PatientDetailsView:",e),console.log("Appointments received:",t),console.log("Medical Records received:",r),console.log("PatientDetailsView received dentalHistoryTeeth prop:",JSON.stringify(n,null,2)),!e)return null;const m=Array.isArray(e.documents)?e.documents:[],w=m.find(_=>_.type==="profile_photo"),g=m.filter(_=>_.type!=="profile_photo"),y={healthy:"Healthy",decayed:"Decayed",filled:"Filled",missing:"Missing","treatment-planned":"Planned Tx","root-canal":"Root Canal",extraction:"Extraction",crown:"Crown","has-treatment-before":"Prior Tx","recommended-to-be-treated":"Recommend Tx"},b=_=>y[_]||_.replace(/_/g," ");return x("div",{className:"space-y-6",children:[x(or,{children:[l(xr,{children:l(br,{children:"Personal Information"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(Ui,{icon:vi,label:"Full Name",value:`${e.first_name||""} ${e.last_name||""}`}),l(Ui,{icon:vi,label:"Gender",value:e.gender}),l(Ui,{icon:vi,label:"Age",value:e.age}),l(Ui,{icon:vi,label:"Registration Number",value:e.registration_number})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Contact Information"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(Ui,{icon:S5,label:"Phone",value:e.phone}),l(Ui,{icon:x4,label:"Email",value:e.email}),l(Ui,{icon:Dce,label:"Address",value:`${e.address||""}, ${e.city||""}, ${e.state||""} ${e.postal_code||""}`})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Emergency Contact"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(Ui,{icon:vi,label:"Name",value:e.emergency_contact_name}),l(Ui,{icon:S5,label:"Phone",value:e.emergency_contact_phone}),l(Ui,{icon:vi,label:"Relationship",value:e.emergency_contact_relationship})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Medical & Dental Overview"})}),x(hr,{className:"space-y-6",children:[" ",x("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l(Ui,{icon:Rce,label:"Height",value:e.height?`${e.height} cm`:"N/A"}),l(Ui,{icon:Gce,label:"Weight",value:e.weight?`${e.weight} kg`:"N/A"}),l(Ui,{icon:kce,label:"Blood Group",value:e.blood_group})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[l(Ui,{icon:gce,label:"Allergies",value:Array.isArray(e.allergies)?e.allergies.join(", "):e.allergies||"None reported"}),l(Ui,{icon:lA,label:"Medical Conditions",value:Array.isArray(e.medical_conditions)?e.medical_conditions.join(", "):e.medical_conditions||"None reported"})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[l(Ui,{icon:lA,label:"Current Medications",value:BIe(e.current_medications)}),l(Ui,{icon:lA,label:"Previous Surgeries / Hospitalizations",value:UIe(e.previous_surgeries)})]}),x("div",{className:"space-y-4 pt-4 border-t",children:[l("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"History & Habits"}),l(Ui,{icon:_5,label:"Detailed Medical Info",value:jIe(e.detailed_medical_info)}),l(Ui,{icon:_5,label:"Dental History Summary",value:$Ie(e.dental_history)}),l(Ui,{icon:_4,label:"Family Medical History",value:FIe(e.family_medical_history)}),l(Ui,{icon:U0,label:"Lifestyle Habits",value:LIe(e.lifestyle_habits)})]}),x("div",{className:"pt-4 border-t",children:[l("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Affected Teeth"}),u?l("p",{className:"text-sm text-muted-foreground",children:"Loading tooth chart..."}):o?Array.isArray(n)&&n.length>0?l("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2",children:n.sort((_,N)=>_.tooth_id-N.tooth_id).map(_=>{let N='<p class="text-xs text-red-500">Not found</p>';try{const D=new DOMParser().parseFromString(o,"image/svg+xml").getElementById(`ID_${_.tooth_id}`);if(D){const P=D.cloneNode(!0);let F="0 0 50 50",L="scale(0.5) translate(-50, -50)";try{const Z=document.createElementNS("http://www.w3.org/2000/svg","svg");Z.style.position="absolute",Z.style.visibility="hidden",Z.appendChild(P.cloneNode(!0)),document.body.appendChild(Z);const re=Z.firstChild.getBBox();document.body.removeChild(Z),re&&re.width>0&&re.height>0?(F=`${re.x-10} ${re.y-10} ${re.width+10*2} ${re.height+10*2}`,L=""):console.warn(`Could not get valid BBox for tooth ${_.tooth_id}. Using fallback viewBox/transform.`)}catch(Z){console.warn(`Error getting BBox for tooth ${_.tooth_id}:`,Z,". Using fallback viewBox/transform.")}const W="#FFFFFF",T="#666666",R="0.5";P.querySelectorAll("path").forEach(Z=>{Z.setAttribute("fill",W),Z.setAttribute("stroke",T),Z.setAttribute("stroke-width",R)});const Y=P.outerHTML;N=`<svg viewBox="${F}" preserveAspectRatio="xMidYMid meet" width="40" height="40"><g ${L?`transform="${L}"`:""}>${Y}</g></svg>`}else console.warn(`SVG element for tooth ID_${_.tooth_id} not found.`)}catch(E){console.error("Error parsing SVG content:",E),N='<p class="text-xs text-red-500">Parse error</p>'}return x("div",{className:"flex flex-col items-center border p-2 rounded-md shadow-sm bg-white hover:shadow-md transition-shadow duration-150",title:`Tooth ${_.tooth_id}`,children:[x("span",{className:"text-xs font-bold text-gray-700",children:["T",_.tooth_id]}),l("div",{dangerouslySetInnerHTML:{__html:N},className:"my-1"}),_.conditions&&_.conditions.length>0&&l("div",{className:"mt-1 text-center",children:_.conditions.filter(E=>!(_.conditions&&_.conditions.length>1&&E==="healthy")).map((E,C)=>x("span",{className:"block text-[10px] leading-tight text-blue-600",children:[b(E)," "]},C))})]},_.tooth_id)})}):Array.isArray(n)&&n.length===0?l("p",{className:"text-sm text-muted-foreground",children:"No affected teeth selected in dental history."}):l("p",{className:"text-sm text-muted-foreground",children:"Loading affected teeth data..."}):l("p",{className:"text-sm text-red-500",children:"Error loading tooth chart SVG."})]})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Documents & Consent"})}),x(hr,{className:"space-y-4",children:[w&&x("div",{className:"flex items-start py-2",children:[l(j2,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),x("div",{children:[l("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Photo"}),l("img",{src:w.url,alt:"Profile",className:"mt-1 max-w-xs max-h-40 rounded border"})]})]}),g.length>0&&x("div",{className:"space-y-3 pt-2",children:[l("p",{className:"text-sm font-medium text-muted-foreground",children:"Other Documents"}),g.map(_=>x("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[x("div",{className:"flex items-center space-x-2",children:[l(Fce,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),l("span",{className:"text-sm truncate",title:_.name,children:_.name}),x("span",{className:"text-xs text-muted-foreground",children:["(",_.type,")"]})]}),l("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline ml-4",children:"View"})]},_.path))]}),x("div",{className:"flex items-start py-2",children:[l(Sce,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),x("div",{children:[l("p",{className:"text-sm font-medium text-muted-foreground",children:"Consent Given"}),l("p",{className:"text-base",children:e.consent_given?"Yes":"No"}),e.consent_date&&x("p",{className:"text-sm text-muted-foreground mt-1",children:["Date: ",YP(e.consent_date)]}),e.signature_url&&x("div",{className:"mt-2",children:[l("p",{className:"text-sm font-medium text-muted-foreground",children:"Signature"}),l("img",{src:e.signature_url,alt:"Signature",className:"mt-1 max-w-xs max-h-20 rounded border"})]})]})]}),m.length===0&&!w&&l("p",{className:"text-sm text-muted-foreground",children:"No documents uploaded."})]})]}),l(Ere,{medicalRecords:r,onAddMedicalRecord:s,doctors:f}),x(or,{children:[l(xr,{children:l(br,{children:"Appointment History"})}),l(hr,{children:t&&t.length>0?l("div",{className:"space-y-4",children:t.map(_=>x("div",{className:"p-3 border rounded",children:[l("p",{className:"font-semibold",children:_.title||"Appointment"}),x("p",{className:"text-sm text-muted-foreground",children:[YP(_.start_time)," - ",YP(_.end_time)]}),x("p",{className:"text-sm",children:["Type: ",_.type]}),x("p",{className:"text-sm",children:["Status: ",_.status]}),_.notes&&x("p",{className:"text-sm mt-1",children:["Notes: ",_.notes]}),_.staff&&x("p",{className:"text-xs text-muted-foreground mt-1",children:["With: ",_.staff.first_name," ",_.staff.last_name]})]},_.id))}):l("p",{className:"text-sm text-muted-foreground",children:"No past appointments found."})})]}),x("div",{className:"flex justify-end space-x-2 mt-6",children:[" ",x(Fe,{variant:"outline",onClick:()=>i(e.id),children:[l(Ch,{className:"mr-2 h-4 w-4"})," Book New Appointment"]}),l(Fe,{onClick:a,children:"Edit Profile"})]})]})}const WIe=[{value:"qd",label:"Once daily (QD)"},{value:"bid",label:"Twice daily (BID)"},{value:"tid",label:"Three times daily (TID)"},{value:"qid",label:"Four times daily (QID)"},{value:"q4h",label:"Every 4 hours (Q4H)"},{value:"q6h",label:"Every 6 hours (Q6H)"},{value:"q8h",label:"Every 8 hours (Q8H)"},{value:"q12h",label:"Every 12 hours (Q12H)"},{value:"prn",label:"As needed (PRN)"}],zIe=[{value:"amoxicillin_500",label:"Amoxicillin 500mg"},{value:"amoxicillin_875",label:"Amoxicillin 875mg"},{value:"clindamycin_300",label:"Clindamycin 300mg"},{value:"metronidazole_500",label:"Metronidazole 500mg"},{value:"ibuprofen_400",label:"Ibuprofen 400mg"},{value:"ibuprofen_600",label:"Ibuprofen 600mg"},{value:"acetaminophen_500",label:"Acetaminophen 500mg"},{value:"chlorhexidine_0.12",label:"Chlorhexidine 0.12% Mouthwash"}],VIe=[{value:"3d",label:"3 days"},{value:"5d",label:"5 days"},{value:"7d",label:"7 days"},{value:"10d",label:"10 days"},{value:"14d",label:"14 days"},{value:"21d",label:"21 days"},{value:"28d",label:"28 days"},{value:"30d",label:"30 days"}];function HIe({index:e,form:t,onRemove:r}){return x("div",{className:"space-y-4 p-4 border rounded-md relative",children:[l(Fe,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-2",onClick:r,children:l(Qu,{className:"h-4 w-4"})}),x("div",{className:"grid grid-cols-2 gap-4",children:[l(He,{control:t.control,name:`prescriptions.${e}.medication`,render:({field:n})=>x(De,{children:[l(Oe,{children:"Medication"}),x(Ur,{onValueChange:n.onChange,value:n.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select medication"})})}),l($r,{children:zIe.map(a=>l(wt,{value:a.value,children:a.label},a.value))})]}),l(Ze,{})]})}),l(He,{control:t.control,name:`prescriptions.${e}.dosage`,render:({field:n})=>x(De,{children:[l(Oe,{children:"Dosage"}),l(je,{children:l(ht,{placeholder:"e.g., 1 tablet",...n})}),l(Ze,{})]})})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[l(He,{control:t.control,name:`prescriptions.${e}.frequency`,render:({field:n})=>x(De,{children:[l(Oe,{children:"Frequency"}),x(Ur,{onValueChange:n.onChange,value:n.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select frequency"})})}),l($r,{children:WIe.map(a=>l(wt,{value:a.value,children:a.label},a.value))})]}),l(Ze,{})]})}),l(He,{control:t.control,name:`prescriptions.${e}.duration`,render:({field:n})=>x(De,{children:[l(Oe,{children:"Duration"}),x(Ur,{onValueChange:n.onChange,value:n.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select duration"})})}),l($r,{children:VIe.map(a=>l(wt,{value:a.value,children:a.label},a.value))})]}),l(Ze,{})]})})]}),l(He,{control:t.control,name:`prescriptions.${e}.special_instructions`,render:({field:n})=>x(De,{children:[l(Oe,{children:"Special Instructions"}),l(je,{children:l(on,{placeholder:"Special instructions for this prescription (e.g., take with food)",...n})}),l(Ze,{})]})})]})}function KP({id:e,accept:t,label:r,files:n,onFilesChange:a,maxFiles:i=10}){const[s,o]=S.useState(null),c=h=>{const m=Array.from(h.target.files||[]),w=[...n,...m].slice(0,i);a(w)},u=h=>{const m=n.filter((w,g)=>g!==h);a(m)},d=h=>{const m=URL.createObjectURL(h);o(m)},f=()=>{s&&(URL.revokeObjectURL(s),o(null))};return x("div",{className:"space-y-4",children:[x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:[l("input",{type:"file",accept:t,className:"hidden",id:e,onChange:c,multiple:!0}),x("label",{htmlFor:e,className:"cursor-pointer flex flex-col items-center",children:[l(sG,{className:"h-8 w-8 mb-2"}),l("span",{children:r}),x("span",{className:"text-sm text-muted-foreground mt-1",children:[n.length,"/",i," files"]})]})]}),l("div",{className:"grid grid-cols-2 gap-2",children:n.map((h,m)=>l(or,{className:"relative group",children:x(hr,{className:"p-2",children:[h.type.startsWith("image/")?l("img",{src:URL.createObjectURL(h),alt:`Preview ${m+1}`,className:"w-full h-24 object-cover rounded",onLoad:w=>{const g=w.target;URL.revokeObjectURL(g.src)}}):l("div",{className:"w-full h-24 bg-muted flex items-center justify-center rounded",children:l("span",{className:"text-sm text-muted-foreground",children:h.name})}),x("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.type.startsWith("image/")&&l(Fe,{variant:"secondary",size:"icon",className:"h-6 w-6",onClick:()=>d(h),children:l(Xce,{className:"h-4 w-4"})}),l(Fe,{variant:"destructive",size:"icon",className:"h-6 w-6",onClick:()=>u(m),children:l(Qu,{className:"h-4 w-4"})})]})]})},m))})]}),l(Vn,{open:!!s,onOpenChange:()=>f(),children:x(Bn,{className:"max-w-3xl",children:[l(Jn,{children:l(Zn,{children:"Image Preview"})}),s&&l("img",{src:s,alt:"Preview",className:"w-full h-auto"})]})})]})}const GIe={async getAllPatients(){return Rt.patients.getAll()},async getPatientById(e){return Rt.patients.getById(e)},async createPatient(e){return Rt.patients.create(e)},async updatePatient(e,t){return Rt.patients.update(e,t)},async uploadProfilePhoto(e,t){return Rt.patients.uploadProfilePhoto(e,t)},async uploadSignature(e,t){return Rt.patients.uploadSignature(e,t)},async addDocument(e,t,r,n=""){return Rt.patients.addDocument(e,t,r,n)},async searchPatients(e){return Rt.patients.search(e)},async getPatientTreatmentPlans(e){return Rt.patients.getTreatmentPlans(e)},async getPatientMedicalRecords(e){return Rt.patients.getMedicalRecords(e)},async getPatientDentalHistoryTeeth(e){return Rt.patients.getPatientDentalHistoryTeeth(e)}},YIe=Ie.object({chief_complaint:Ie.string().min(1,"Chief complaint is required"),clinical_findings:Ie.string().optional(),blood_pressure:Ie.string().optional(),pulse_rate:Ie.string().optional(),extra_oral_exam:Ie.string().optional(),intra_oral_exam:Ie.string().optional(),diagnosis_codes:Ie.array(Ie.string()).optional(),diagnosis_notes:Ie.string().optional(),treatment_phase:Ie.enum(["emergency","disease_control","rehabilitation","maintenance"]),treatment_procedures:Ie.array(Ie.object({code:Ie.string().optional(),title:Ie.string().optional(),description:Ie.string().optional(),tooth_number:Ie.number().optional(),estimated_cost:Ie.number().optional(),visit_date:Ie.string().optional(),duration:Ie.string().optional(),next_visit:Ie.string().optional(),status:Ie.string().optional(),priority:Ie.string().optional()})).optional(),prescriptions:Ie.array(Ie.object({medication:Ie.string(),dosage:Ie.string(),frequency:Ie.string(),duration:Ie.string(),special_instructions:Ie.string().optional()})).optional(),home_care_instructions:Ie.string().optional(),follow_up_date:Ie.string().optional(),xray_images:Ie.array(Ie.any()).optional(),clinical_photos:Ie.array(Ie.any()).optional(),documents:Ie.array(Ie.any()).optional(),lab_results:Ie.array(Ie.object({test_name:Ie.string().min(1,"Test name is required"),result_value:Ie.string().min(1,"Result value is required"),units:Ie.string().optional(),reference_range:Ie.string().optional()})).optional(),record_date:Ie.string().min(1,"Record date is required"),doctor:Ie.string().min(1,"Doctor is required")});function Cre({patientId:e,patientName:t,onSubmit:r,onCancel:n,isLoading:a=!1}){var z;const[i,s]=S.useState("examination"),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState([]),[m,w]=S.useState(null),[g,y]=S.useState([]),[b,_]=S.useState(""),[N,E]=S.useState([]),[C,D]=S.useState(!1),P=fd({resolver:hd(YIe),defaultValues:{treatment_phase:"disease_control",treatment_procedures:[],prescriptions:[],xray_images:[],clinical_photos:[],documents:[],lab_results:[]}});S.useEffect(()=>{D(!0),Rt.staff.getDoctors().then(q=>{E(q.map(B=>({id:B.id,first_name:B.first_name,last_name:B.last_name})))}).catch(()=>E([])).finally(()=>D(!1))},[]);const F=async(q,B,G)=>await Rt.storage.uploadFile(q,B),L=async q=>{const B=async(J,X)=>{const ne=[];for(const ie of J)if(ie instanceof File){const oe=await F(ie,e);oe&&ne.push({...oe,type:X})}else ie&&ie.url&&ne.push(ie);return ne},G=await B(q.xray_images||[],"xray"),Q=await B(q.clinical_photos||[],"photo"),O=await B(q.documents||[],"document");await r({...q,xray_images:G,clinical_photos:Q,documents:O},b)},W=["examination","diagnosis","prescription","labresults","attachments"],T=i===W[0],R=i===W[W.length-1],j=()=>{const q=W.indexOf(i);q<W.length-1&&s(W[q+1])},Y=()=>{const q=W.indexOf(i);q>0&&s(W[q-1])},Z=async()=>{c(!0),d(!0);try{const q=await GIe.getPatientTreatmentPlans(e);h((q||[]).filter(B=>B.status==="completed"))}catch{h([])}finally{d(!1)}},re=q=>{const B=q.id||q._id;if(B&&q.treatments&&Array.isArray(q.treatments)){y(O=>O.some(J=>J.id===B)?O:[...O,{id:B,title:q.procedure||q.name||"Treatment Plan",createdDate:q.date||q.created_at,treatments:q.treatments}]);const G=q.treatments.map(O=>({code:O.code||"",title:O.type||O.title||"",description:O.description||O.procedures||"",tooth_number:O.tooth_number||void 0,estimated_cost:O.cost!==void 0?O.cost:void 0,visit_date:O.scheduled_date||O.estimatedVisitDate||"",duration:O.estimated_duration||O.duration||"",next_visit:O.time_gap||O.next_visit||"",status:O.status||"",priority:O.priority||""})),Q=P.getValues("treatment_procedures")||[];P.setValue("treatment_procedures",[...Q,...G])}};return x("div",{className:"w-full max-w-4xl mx-auto p-2 sm:p-4 md:p-6",children:[l(or,{className:"mb-6 w-full",children:x(xr,{children:[x(br,{className:"text-2xl",children:["Dental Record - ",t]}),x("p",{className:"text-sm text-muted-foreground",children:["Patient ID: ",e]})]})}),l(or,{className:"w-full",children:l(hr,{children:l(Mh,{...P,children:x("form",{onSubmit:P.handleSubmit(L),className:"space-y-2",children:[x(Lm,{value:i,onValueChange:()=>{},className:"w-full",children:[x(Rh,{className:"flex w-full justify-between mb-2 flex-wrap",children:[l(Oa,{value:"examination","data-disabled":!0,children:"Clinical Examination"}),l(Oa,{value:"diagnosis","data-disabled":!0,children:"Diagnosis & Treatment"}),l(Oa,{value:"prescription","data-disabled":!0,children:"Prescription & Instructions"}),l(Oa,{value:"labresults","data-disabled":!0,children:"Lab Results"}),l(Oa,{value:"attachments","data-disabled":!0,children:"Attachments"})]}),x(_a,{value:"examination",className:"space-y-2",children:[x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Chief Complaint & Clinical Findings"}),l("div",{className:"grid grid-cols-1",children:l(He,{control:P.control,name:"chief_complaint",render:({field:q})=>x(De,{className:"col-span-3",children:[l(Oe,{children:"Chief Complaint"}),l(je,{children:l(on,{placeholder:"Patient's main concern or reason for visit",...q,rows:2})}),l(Ze,{})]})})}),x("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[l(He,{control:P.control,name:"blood_pressure",render:({field:q})=>x(De,{children:[l(Oe,{children:"Blood Pressure"}),l(je,{children:l(ht,{placeholder:"e.g., 120/80",...q})})]})}),l(He,{control:P.control,name:"pulse_rate",render:({field:q})=>x(De,{children:[l(Oe,{children:"Pulse Rate"}),l(je,{children:l(ht,{placeholder:"e.g., 72 bpm",...q})})]})}),l(He,{control:P.control,name:"record_date",render:({field:q})=>x(De,{children:[l(Oe,{children:"Record Date"}),l(je,{children:l(ht,{type:"date",...q})}),l(Ze,{})]})}),l(He,{control:P.control,name:"doctor",render:({field:q})=>x(De,{children:[l(Oe,{children:"Doctor"}),l(je,{children:x(Ur,{onValueChange:q.onChange,value:q.value,disabled:C,children:[l(jr,{children:l(qr,{placeholder:C?"Loading doctors...":"Select Doctor"})}),l($r,{children:N.map(B=>x(wt,{value:B.id,children:[B.first_name," ",B.last_name]},B.id))})]})}),l(Ze,{})]})})]})]}),x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Examination Details"}),x("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l(He,{control:P.control,name:"extra_oral_exam",render:({field:q})=>x(De,{children:[l(Oe,{children:"Extra-oral Examination"}),l(je,{children:l(on,{placeholder:"Record extra-oral findings...",...q,rows:2})})]})}),l(He,{control:P.control,name:"intra_oral_exam",render:({field:q})=>x(De,{children:[l(Oe,{children:"Intra-oral Examination"}),l(je,{children:l(on,{placeholder:"Record intra-oral findings...",...q,rows:2})})]})})]})]})]}),x(_a,{value:"diagnosis",className:"space-y-3",children:[x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Diagnosis"}),l(He,{control:P.control,name:"diagnosis_notes",render:({field:q})=>x(De,{children:[l(Oe,{children:"Diagnosis Notes"}),l(je,{children:l(on,{placeholder:"Enter detailed diagnosis...",...q})}),l(Ze,{})]})}),l(He,{control:P.control,name:"treatment_phase",render:({field:q})=>x(De,{children:[l(Oe,{children:"Treatment Phase"}),x(Ur,{onValueChange:q.onChange,defaultValue:q.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select treatment phase"})})}),x($r,{children:[l(wt,{value:"emergency",children:"Emergency Care"}),l(wt,{value:"disease_control",children:"Disease Control"}),l(wt,{value:"rehabilitation",children:"Rehabilitation"}),l(wt,{value:"maintenance",children:"Maintenance"})]})]}),l(Ze,{})]})})]}),x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Treatment Plan"}),l("div",{className:"flex justify-end mb-2",children:x(Fe,{type:"button",variant:"secondary",onClick:Z,children:[l(b5,{className:"w-4 h-4 mr-2"})," View Completed Treatment Plans"]})}),l("div",{className:"mt-2",children:g.map((q,B)=>x("div",{className:"mb-4",children:[x("div",{className:"flex items-center gap-2 mb-1",children:[l("span",{className:"font-bold text-base",children:q.title||"Treatment Plan"}),q.createdDate&&x("span",{className:"text-xs text-muted-foreground ml-2",children:["Created on ",new Date(q.createdDate).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]})]}),l("div",{className:"space-y-1",children:q.treatments.map((G,Q)=>x("div",{className:"border bg-white mb-1 p-2 rounded",children:[l("span",{className:"font-semibold",children:G.title||G.code||`Treatment ${Q+1}`}),G.description&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Description:"})," ",G.description]}),G.tooth_number&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Tooth number:"})," ",G.tooth_number]}),G.visit_date&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Visit Date:"})," ",G.visit_date]}),G.duration&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Duration:"})," ",G.duration]}),G.status&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Status:"})," ",G.status]}),G.priority&&x("div",{className:"text-xs mb-1",children:[l("b",{children:"Priority:"})," ",G.priority]})]},Q))})]},q.id||B))})]})]}),x(_a,{value:"prescription",className:"space-y-3",children:[x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Prescription"}),l(nd,{className:"h-[300px] pr-2 border bg-white rounded-md",children:(z=P.watch("prescriptions"))==null?void 0:z.map((q,B)=>x("div",{className:"mb-4 p-4 border rounded bg-gray-50 relative shadow-sm",children:[x("div",{className:"font-semibold mb-2",children:["Prescription ",B+1]}),l(HIe,{index:B,form:P,onRemove:()=>{const G=P.getValues("prescriptions")||[];P.setValue("prescriptions",G.filter((Q,O)=>O!==B),{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})}})]},B))}),l(Fe,{type:"button",variant:"outline",onClick:()=>{const q=P.getValues("prescriptions")||[];P.setValue("prescriptions",[...q,{medication:"",dosage:"",frequency:"",duration:"",special_instructions:""}],{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},children:"Add Prescription"})]}),x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Patient Instructions"}),l(He,{control:P.control,name:"home_care_instructions",render:({field:q})=>x(De,{children:[l(Oe,{children:"Home Care Instructions"}),l(je,{children:l(on,{placeholder:"Enter detailed instructions for the patient...",...q})})]})}),l(He,{control:P.control,name:"follow_up_date",render:({field:q})=>x(De,{children:[l(Oe,{children:"Follow-up Date"}),l(je,{children:l(ht,{type:"date",...q})})]})})]})]}),l(_a,{value:"labresults",className:"space-y-3",children:x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Lab Result Details"}),l(nd,{className:"h-[300px] pr-2 border bg-white",children:(P.watch("lab_results")||[]).map((q,B)=>x("div",{className:"relative grid grid-cols-1 md:grid-cols-4 gap-2 items-end mb-2 border-b pb-2",children:[l("button",{type:"button",className:"absolute right-2 top-2 z-10 text-gray-400 hover:text-red-600",title:"Remove Lab Result",onClick:()=>{const G=P.getValues("lab_results")||[];P.setValue("lab_results",G.filter((Q,O)=>O!==B),{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},children:l("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),l(He,{control:P.control,name:`lab_results.${B}.test_name`,render:({field:G})=>x(De,{children:[l(Oe,{children:"Test Name"}),l(je,{children:l(ht,{placeholder:"e.g., Complete Blood Count (CBC)",...G})})]})}),l(He,{control:P.control,name:`lab_results.${B}.result_value`,render:({field:G})=>x(De,{children:[l(Oe,{children:"Result Value"}),l(je,{children:l(ht,{placeholder:"e.g., 12.5",...G})})]})}),l(He,{control:P.control,name:`lab_results.${B}.units`,render:({field:G})=>x(De,{children:[l(Oe,{children:"Units"}),l(je,{children:l(ht,{placeholder:"e.g., g/dL",...G})})]})}),l(He,{control:P.control,name:`lab_results.${B}.reference_range`,render:({field:G})=>x(De,{children:[l(Oe,{children:"Reference Range"}),l(je,{children:l(ht,{placeholder:"e.g., 12.0-15.5 g/dL",...G})})]})})]},B))}),l(Fe,{type:"button",variant:"outline",onClick:()=>{const q=P.getValues("lab_results")||[];P.setValue("lab_results",[...q,{test_name:"",result_value:"",units:"",reference_range:""}],{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},children:"Add Result"})]})}),x(_a,{value:"attachments",className:"space-y-3",children:[x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"X-ray Images"}),l(KP,{id:"xray-upload",accept:"image/*",label:"Upload X-ray Images",files:P.watch("xray_images")||[],onFilesChange:q=>P.setValue("xray_images",q),maxFiles:5})]}),x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Clinical Photos"}),l(KP,{id:"photo-upload",accept:"image/*",label:"Upload Clinical Photos",files:P.watch("clinical_photos")||[],onFilesChange:q=>P.setValue("clinical_photos",q),maxFiles:10})]}),x("div",{children:[l("h2",{className:"text-xl font-bold mb-2",children:"Other Documents"}),l(KP,{id:"document-upload",accept:".pdf,.doc,.docx",label:"Upload Documents",files:P.watch("documents")||[],onFilesChange:q=>P.setValue("documents",q),maxFiles:5})]})]})]}),x("div",{className:"mt-2",children:[l("label",{className:"block text-sm font-medium mb-1",children:"Custom Notes (optional)"}),l(on,{value:b,onChange:q=>_(q.target.value),placeholder:"Add any extra notes for this medical record...",className:"mt-1",rows:2})]}),x("div",{className:"flex justify-end gap-4 mt-3",children:[!T&&l(Fe,{type:"button",variant:"outline",onClick:Y,children:"Back"}),!R&&l(Fe,{type:"button",onClick:j,children:"Next"}),R&&x(Fe,{type:"submit",disabled:a,children:[a&&l(Un,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Record"]})]})]})})})}),l(Vn,{open:o,onOpenChange:c,children:x(Bn,{className:"max-w-2xl",children:[l(Jn,{children:l(Zn,{children:"Completed Treatment Plans"})}),u?x("div",{className:"flex items-center justify-center py-8",children:[l(Un,{className:"w-6 h-6 animate-spin mr-2"})," Loading..."]}):f.length===0?l("div",{className:"text-center text-muted-foreground py-8",children:"No completed treatment plans found."}):l("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:f.map((q,B)=>{const G=q.id||q._id,Q=g.some(O=>O.id===G);return x(or,{className:"border shadow-sm mb-4",children:[x(xr,{className:"flex flex-col gap-1 items-start",children:[x("div",{className:"flex flex-row items-center gap-2 w-full",children:[l(fx,{className:"w-5 h-5 text-primary"}),l("span",{className:"font-semibold text-base",children:q.procedure||q.name||"Treatment Plan"}),l(vc,{variant:"outline",className:"ml-auto",children:q.status})]}),(q.date||q.created_at)&&x("div",{className:"text-xs text-muted-foreground mt-1",children:["Created on ",q.date?new Date(q.date).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):new Date(q.created_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]})]}),x(hr,{className:"space-y-1",children:[q.teeth&&q.teeth.length>0&&x("div",{className:"text-xs flex items-center gap-1",children:[l(fx,{className:"w-4 h-4"}),"Teeth: ",q.teeth.map(O=>O.tooth_id).join(", ")]}),q.description&&l("div",{className:"text-xs mb-2",children:q.description}),q.treatments&&q.treatments.length>0&&x("div",{className:"mt-2",children:[l("div",{className:"font-semibold text-xs mb-1",children:"Treatments/Visits:"}),l("div",{className:"space-y-1",children:q.treatments.map((O,J)=>x("div",{className:"border rounded p-2 bg-muted/20 mb-1",children:[x("div",{className:"font-bold text-sm mb-1",children:[J+1,". ",O.name||O.title]}),O.scheduled_date&&x("div",{className:"text-xs text-muted-foreground mb-1",children:["Date: ",O.scheduled_date]}),O.description&&l("div",{className:"text-xs mb-1",children:O.description}),O.cost!==void 0&&x("div",{className:"text-xs flex items-center gap-1 mb-1",children:[l("span",{className:"font-bold text-green-700",children:"₹"}),"Cost: ",O.cost]}),O.status&&l(vc,{className:"ml-2",variant:"outline",children:O.status})]},J))})]}),x("div",{className:"text-xs flex items-center gap-1 mt-2",children:[l(XH,{className:"w-4 h-4 text-green-500"}),"Completed"]}),l("div",{className:"flex justify-end mt-2",children:Q?l(vc,{variant:"secondary",children:"Applied"}):l(Fe,{size:"sm",variant:"default",onClick:()=>re(q),children:"Apply to Medical Record"})})]})]},q.id||B)})})]})})]})}function Xd(e,t=2){if(e==null)return"₹ 0.00";const r=typeof e=="string"?parseFloat(e):e;return isNaN(r)?"₹ 0.00":`₹ ${r.toFixed(t)}`}function Pre({plan:e,onViewDetails:t}){const r=a=>{let i="bg-gray-100 text-gray-800";switch(a){case"planned":i="bg-blue-100 text-blue-800";break;case"in_progress":i="bg-yellow-100 text-yellow-800";break;case"completed":i="bg-green-100 text-green-800";break;case"cancelled":i="bg-red-100 text-red-800";break}return l("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i}`,children:a.replace("_"," ")})},n=a=>{let i="bg-gray-100 text-gray-800";switch(a){case"low":i="bg-green-100 text-green-800";break;case"medium":i="bg-yellow-100 text-yellow-800";break;case"high":i="bg-red-100 text-red-800";break}return l("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i}`,children:a})};return x(or,{className:"overflow-hidden glass-plan-card",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.45) 0%, rgba(173,216,255,0.18) 100%)",backdropFilter:"blur(18px) saturate(180%)",WebkitBackdropFilter:"blur(18px) saturate(180%)",boxShadow:"0 4px 24px 0 rgba(120,180,255,0.10), 0 1.5px 6px 0 rgba(120,180,255,0.10)",border:"1.5px solid rgba(120,180,255,0.10)",borderRadius:18},children:[x(xr,{className:"pb-2",children:[x("div",{className:"flex justify-between items-start",children:[l(br,{className:"text-lg",children:e.title}),r(e.status)]}),l(_c,{className:"line-clamp-2",children:e.description})]}),l(hr,{className:"pb-2",children:x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center text-sm",children:[l(vi,{className:"h-4 w-4 mr-2 text-muted-foreground"}),l("span",{children:e.patientName})]}),x("div",{className:"flex items-center text-sm",children:[l(Oi,{className:"h-4 w-4 mr-2 text-muted-foreground"}),x("span",{children:[Mt(new Date(e.start_date),"MMM d, yyyy"),e.end_date&&` to ${Mt(new Date(e.end_date),"MMM d, yyyy")}`]})]}),x("div",{className:"flex items-center text-sm",children:[l(s6,{className:"h-4 w-4 mr-2 text-muted-foreground"}),x("span",{children:["Total Cost: ",Xd(e.totalCost)]})]}),x("div",{className:"space-y-1",children:[x("div",{className:"flex items-center justify-between text-sm",children:[l("span",{children:"Progress"}),x("span",{children:[e.completedTreatments," of ",e.totalTreatments," treatments"]})]}),l("div",{style:{width:"100%",height:8,borderRadius:8,background:"rgba(200,220,255,0.18)",overflow:"hidden",marginTop:4,position:"relative"},children:l("div",{style:{width:`${e.status==="completed"?100:e.progress??0}%`,height:"100%",borderRadius:8,background:e.status==="completed"?"linear-gradient(90deg, #03C988 0%,rgb(20, 196, 84) 100%)":"linear-gradient(90deg, #3b82f6 0%, #06b6d4 100%)",transition:"width 0.7s cubic-bezier(.4,2,.6,1), background 0.7s cubic-bezier(.4,2,.6,1)"}})})]})]})}),x(eg,{className:"pt-2 flex justify-between",children:[l("div",{className:"flex gap-2",children:e.priority&&n(e.priority)}),x(Fe,{variant:"default",size:"sm",onClick:()=>t(e),children:["View Details ",l(sm,{className:"h-4 w-4 ml-1"})]})]})]})}var Tre="AlertDialog",[KIe,nQe]=es(Tre,[yee]),Fh=yee(),Ore=e=>{const{__scopeAlertDialog:t,...r}=e,n=Fh(t);return l(Ree,{...n,...r,modal:!0})};Ore.displayName=Tre;var XIe="AlertDialogTrigger",Dre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Fh(r);return l(Mee,{...a,...n,ref:t})});Dre.displayName=XIe;var JIe="AlertDialogPortal",Ire=e=>{const{__scopeAlertDialog:t,...r}=e,n=Fh(t);return l(Fee,{...n,...r})};Ire.displayName=JIe;var ZIe="AlertDialogOverlay",Rre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Fh(r);return l(nR,{...a,...n,ref:t})});Rre.displayName=ZIe;var i1="AlertDialogContent",[QIe,eRe]=KIe(i1),tRe=cG("AlertDialogContent"),Mre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Fh(r),s=S.useRef(null),o=Kr(t,s),c=S.useRef(null);return l(A8e,{contentName:i1,titleName:Fre,docsSlug:"alert-dialog",children:l(QIe,{scope:r,cancelRef:c,children:x(aR,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Ht(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l(tRe,{children:n}),l(nRe,{contentRef:s})]})})})});Mre.displayName=i1;var Fre="AlertDialogTitle",Lre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Fh(r);return l(iR,{...a,...n,ref:t})});Lre.displayName=Fre;var jre="AlertDialogDescription",$re=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Fh(r);return l(sR,{...a,...n,ref:t})});$re.displayName=jre;var rRe="AlertDialogAction",Bre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Fh(r);return l(RN,{...a,...n,ref:t})});Bre.displayName=rRe;var Ure="AlertDialogCancel",qre=S.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=eRe(Ure,r),i=Fh(r),s=Kr(t,a);return l(RN,{...i,...n,ref:s})});qre.displayName=Ure;var nRe=({contentRef:e})=>{const t=`\`${i1}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${i1}\` by passing a \`${jre}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${i1}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},aRe=Ore,iRe=Dre,sRe=Ire,Wre=Rre,zre=Mre,Vre=Bre,Hre=qre,Gre=Lre,Yre=$re;const vw=aRe,UW=iRe,oRe=sRe,Kre=S.forwardRef(({className:e,...t},r)=>l(Wre,{className:Lt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Kre.displayName=Wre.displayName;const Z1=S.forwardRef(({className:e,...t},r)=>x(oRe,{children:[l(Kre,{}),l(zre,{ref:r,className:Lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Z1.displayName=zre.displayName;const Q1=({className:e,...t})=>l("div",{className:Lt("flex flex-col space-y-2 text-center sm:text-left",e),...t});Q1.displayName="AlertDialogHeader";const ey=({className:e,...t})=>l("div",{className:Lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ey.displayName="AlertDialogFooter";const ty=S.forwardRef(({className:e,...t},r)=>l(Gre,{ref:r,className:Lt("text-lg font-semibold",e),...t}));ty.displayName=Gre.displayName;const ry=S.forwardRef(({className:e,...t},r)=>l(Yre,{ref:r,className:Lt("text-sm text-muted-foreground",e),...t}));ry.displayName=Yre.displayName;const ny=S.forwardRef(({className:e,...t},r)=>l(Vre,{ref:r,className:Lt(hx(),e),...t}));ny.displayName=Vre.displayName;const ay=S.forwardRef(({className:e,...t},r)=>l(Hre,{ref:r,className:Lt(hx({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ay.displayName=Hre.displayName;function lRe({treatment:e,onStatusChange:t,onDelete:r,onEdit:n,loading:a=!1}){const[i,s]=S.useState(!1),[o,c]=S.useState("N/A");S.useEffect(()=>{let y=null;const b=()=>{const _=e.actual_start_time?new Date(e.actual_start_time):null,N=e.actual_end_time?new Date(e.actual_end_time):null;if(N&&_)y&&clearInterval(y),c(RK(N,_));else if(_){const C=CK(new Date,_),D=Math.floor(C/3600),P=Math.floor(C%3600/60),F=C%60;c(`${String(D).padStart(2,"0")}:${String(P).padStart(2,"0")}:${String(F).padStart(2,"0")}`)}else c(u(e.estimated_duration)),y&&clearInterval(y)};return b(),e.actual_start_time&&!e.actual_end_time&&(y=setInterval(b,1e3)),()=>{y&&clearInterval(y)}},[e.actual_start_time,e.actual_end_time,e.estimated_duration]);const u=y=>{if(console.log("Received intervalValue:",y,"Type:",typeof y),!y)return"N/A";if(typeof y=="object"&&y!==null){const{days:b=0,hours:_=0,minutes:N=0,seconds:E=0}=y;let C="";return b>0&&(C+=`${b} day${b>1?"s":""} `),_>0&&(C+=`${_} hour${_>1?"s":""} `),N>0&&(C+=`${N} minute${N>1?"s":""} `),C.trim()||"N/A"}if(typeof y=="string")try{if(typeof y=="string"&&/^\d{2}:\d{2}:\d{2}$/.test(y)){const b=y.split(":").map(Number),_=b[0]||0,N=b[1]||0,E=b[2]||0;if(isNaN(_)||isNaN(N)||isNaN(E))return console.warn(`Could not parse HH:MM:SS interval: ${y}`),y;let C="";return _>0&&(C+=`${_} hour${_>1?"s":""} `),N>0&&(C+=`${N} minute${N>1?"s":""} `),E>0&&_===0&&N===0&&(C+=`${E} second${E>1?"s":""}`),C.trim()||"N/A"}return y}catch(b){return console.error("Error parsing interval string:",y,b),y}return console.warn("Unexpected interval value type:",typeof y,y),"Invalid Duration"},d=y=>{let b="bg-gray-100 text-gray-800";switch(y){case"pending":b="bg-purple-100 text-purple-800";break;case"completed":b="bg-green-100 text-green-800";break;case"cancelled":b="bg-red-100 text-red-800";break}return l("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${b}`,children:y.replace("_"," ")})},f=y=>{let b="bg-gray-100 text-gray-800";switch(y){case"low":b="bg-green-100 text-green-800";break;case"medium":b="bg-yellow-100 text-yellow-800";break;case"high":b="bg-red-100 text-red-800";break}return l("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${b}`,children:y})};if(!e)return l("div",{className:"text-center text-sm text-gray-500 py-4",children:"No treatment data."});const h=String(e.cost||"0"),m=parseFloat(h),w=isNaN(m)?0:m,g=e.scheduled_date||e.estimatedVisitDate;return x("div",{className:"bg-white shadow-md rounded-lg mb-3 transition-all hover:shadow-lg",children:[x("div",{className:"px-5 py-4",children:[x("div",{className:"flex justify-between items-start mb-2",children:[x("div",{children:[l("h4",{className:"font-semibold text-md text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:e.type}),l("p",{className:"text-sm text-gray-600 mt-0.5",children:e.description})]}),x("div",{className:"flex items-center space-x-2 shrink-0 ml-4",children:[d(e.status),e.priority&&f(e.priority),l(Fe,{variant:"ghost",size:"icon",onClick:n,disabled:a,className:"h-7 w-7 text-gray-500 hover:text-blue-600",title:"Edit Treatment",children:l(Lce,{className:"h-4 w-4"})})]})]}),x("div",{className:"flex items-center text-xs text-gray-500 mt-3 pt-3 border-t border-gray-200",children:[g&&x(_r,{children:[l(Oi,{className:"mr-1.5 h-3.5 w-3.5 text-gray-400"}),l("span",{className:"font-medium",children:"Visit Date:"}),l("span",{className:"ml-1",children:g}),l("span",{className:"mx-2 text-gray-300",children:"|"})," "]}),l(Us,{className:"mr-1.5 h-3.5 w-3.5 text-gray-400"}),l("span",{className:"font-medium",children:"Duration:"}),l("span",{className:"ml-1",children:o}),e.time_gap&&x(_r,{children:[l("span",{className:"mx-2 text-gray-300",children:"|"}),l("span",{className:"font-medium",children:"Next visit in:"}),l("span",{className:"ml-1",children:e.time_gap})]})]})]}),l("div",{className:"bg-gray-50 px-5 py-3 border-t border-gray-200",children:x("div",{className:"flex items-center justify-between",children:[x("div",{className:"text-sm font-medium text-gray-700",children:["Cost: ",l("span",{className:"text-gray-900",children:Xd(w,"USD")})]}),x("div",{className:"flex items-center space-x-2",children:[e.status==="pending"&&x(_r,{children:[x(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Mark this treatment as completed",onClick:()=>t(e.id,"completed"),disabled:a||i,children:[a&&!i?l(Un,{className:"h-3 w-3 mr-1.5 animate-spin"}):l(g1,{className:"h-3 w-3 mr-1.5"}),"Mark Complete"]}),x(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Cancel this treatment",onClick:()=>t(e.id,"cancelled"),disabled:a||i,children:[a&&!i?l(Un,{className:"h-3 w-3 mr-1.5 animate-spin"}):l(Qu,{className:"h-3 w-3 mr-1.5"}),"Cancel"]})]}),(e.status==="completed"||e.status==="cancelled")&&x(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Reopen this treatment (set to pending)",onClick:()=>t(e.id,"pending"),disabled:a||i,children:[a&&!i?l(Un,{className:"h-3 w-3 mr-1.5 animate-spin"}):l(iG,{className:"h-3 w-3 mr-1.5"}),"Reopen"]})]})]})})]})}const qW="#0060df",cRe="#22c55e",WW="#e0e0e0",zW="#ffffff",uRe=({steps:e,currentStepId:t,completedStepIds:r})=>{const n=(a,i)=>{const s=i===e.length-1,o=t==="completed";return r.includes(a)?o&&s?"finalComplete":"completed":a===t?o&&s?"finalComplete":"current":"pending"};return x("div",{className:"flex items-start w-full px-2 py-4 bg-white rounded-lg shadow-sm overflow-x-auto",children:[" ",e.map((a,i)=>{const s=n(a.id,i),o=i===e.length-1,c=s==="completed",u=s==="current",d=s==="finalComplete",f=d?cRe:c||u?qW:WW;return x(Qe.Fragment,{children:[x("div",{className:"flex flex-col items-center min-w-[100px] px-1",children:[" ",l("div",{className:"flex items-center justify-center w-6 h-6 rounded-full transition-colors duration-500 mb-1",style:{backgroundColor:f},children:c||d?x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:zW,className:"w-4 h-4",children:[" ",l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})]}):u?x("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:zW,className:"w-4 h-4",children:[" ",l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})]}):l("div",{className:"w-2 h-2 bg-gray-400 rounded-sm"})}),x("div",{className:"text-center",children:[x("div",{className:`text-xs font-medium ${c||u||d?"text-gray-700":"text-gray-400"}`,children:[" ",a.title]}),a.description&&l("div",{className:"text-[10px] text-gray-400",children:a.description})]})]}),!o&&x("div",{className:"flex-1 h-1 mx-1 relative transition-colors duration-500",style:{backgroundColor:WW},children:[" ",l("div",{className:"absolute top-0 left-0 h-full transition-all duration-1000 ease-out",style:{width:c?"100%":"0%",backgroundColor:qW}})]})]},a.id)})]})},dRe=(e,t)=>{if(!t)return e;const n=t.toLowerCase().match(/^(\d+)(-(\d+))?\s*(day|week|month)s?$/);if(!n)return console.warn(`Invalid timeGap format: ${t}. Defaulting to 1 day.`),Ua(e,1);const a=parseInt(n[1],10),i=n[4];switch(i){case"day":return Ua(e,a);case"week":return x1(e,a);case"month":return pl(e,a);default:return console.warn(`Unknown timeGap unit: ${i}. Defaulting to 1 day.`),Ua(e,1)}},ba={async getAllTreatmentPlans(){return Rt.patients.getTreatmentPlans(null)},async getPatientTreatmentPlans(e){return Rt.patients.getTreatmentPlans(e)},async createTreatmentPlan(e,t){const r={...e,title:e.title||"Untitled Plan",description:e.description||"No description",patient_id:e.patient_id||"",status:e.status||"planned",start_date:e.start_date||Mt(new Date,"yyyy-MM-dd"),priority:e.priority||"medium",ai_generated:e.ai_generated!==void 0?e.ai_generated:!1};return Rt.patients.createTreatmentPlan(r,t)},async createTreatmentPlanWithTreatments(e,t){const r={...e,title:e.title||"Untitled Plan",description:e.description||"No description",patient_id:e.patient_id||"",status:e.status||"planned",start_date:e.start_date||Mt(new Date,"yyyy-MM-dd"),priority:e.priority||"medium",ai_generated:e.ai_generated!==void 0?e.ai_generated:!1},n=t.map(a=>{const i=parseFloat(a.cost);return{...a,cost:isNaN(i)?0:i}});return Rt.patients.createTreatmentPlanWithTreatments(r,n)},async updateTreatmentPlan(e,t){return Rt.patients.updateTreatmentPlan(e,t)},async deleteTreatmentPlan(e){return Rt.patients.deleteTreatmentPlan(e)},async createTreatment(e){const t=parseFloat(e.cost),r={...e,cost:isNaN(t)?0:t};return Rt.patients.createTreatment(r)},async updateTreatment(e,t){const r={};for(const i in t)if(i==="cost"&&t.cost!==void 0){const s=parseFloat(t.cost);r.cost=isNaN(s)?void 0:s}else i==="status"&&t.status!==void 0?r.status=t.status:i==="description"&&t.description!==void 0?r.description=t.description:i==="type"&&t.type!==void 0?r.type=t.type:i==="priority"&&t.priority!==void 0?r.priority=t.priority:i==="plan_id"&&t.plan_id!==void 0?r.plan_id=t.plan_id:i==="scheduled_date"&&t.scheduled_date!==void 0?r.scheduled_date=t.scheduled_date?t.scheduled_date:null:i==="time_gap"&&t.time_gap!==void 0&&(r.time_gap=t.time_gap||null);const n=t.status,a=new Date().toISOString();return n==="completed"||n==="cancelled"?r.actual_end_time=a:n==="pending"?(r.actual_start_time=null,r.actual_end_time=null):n==="in_progress"&&(r.actual_start_time=a,r.actual_end_time=null),console.log(`Updating treatment ${e} with payload:`,r),Rt.patients.updateTreatment(e,r)},async deleteTreatment(e){return Rt.patients.deleteTreatment(e)},processTreatmentPlanData(e,t){return e.map(r=>{var f,h,m;const n=t.find(w=>w.id===r.patient_id),a=((f=r.treatments)==null?void 0:f.reduce((w,g)=>w+parseFloat(g.cost||0),0))||0,i=((h=r.treatments)==null?void 0:h.filter(w=>w.status==="completed").length)||0,s=((m=r.treatments)==null?void 0:m.length)||0,o=s?Math.round(i/s*100):0,c=Array.isArray(r.treatment_plan_teeth)?r.treatment_plan_teeth.map(w=>w.teeth).filter(w=>w!==null):[],u={...r};delete u.treatment_plan_teeth;const d=r.patient||(n?{full_name:`${n.first_name} ${n.last_name}`,age:n.age,gender:n.gender,registration_number:n.registration_number}:void 0);return{...u,patientName:(d==null?void 0:d.full_name)||"Unknown Patient",totalCost:a,progress:o,completedTreatments:i,totalTreatments:s,teeth:c,patient:d}})},async getVisitsByPlanId(e){if(!e)return console.warn("[treatmentService.getVisitsByPlanId] planId is required, exiting."),[];console.log(`[treatmentService.getVisitsByPlanId] Attempting for planId: ${e}`);try{console.log(`[treatmentService.getVisitsByPlanId] PRE-AWAIT for api.patients.getVisitsByPlanId with planId: ${e}`);const t=await Rt.patients.getVisitsByPlanId(e);if(console.log(`[treatmentService.getVisitsByPlanId] POST-AWAIT for api.patients.getVisitsByPlanId. Result for planId ${e}:`,t),!t)return console.warn(`[treatmentService.getVisitsByPlanId] visitsData is null/undefined for planId ${e}.`),[];if(!Array.isArray(t))return console.error(`[treatmentService.getVisitsByPlanId] visitsData is not an array for planId ${e}. Received:`,t),[];t.length===0&&console.log(`[treatmentService.getVisitsByPlanId] visitsData is an empty array for planId ${e}.`);const r=t.map((n,a)=>typeof n!="object"||n===null||typeof n.id>"u"?(console.warn(`[treatmentService.getVisitsByPlanId] Invalid visit object at index ${a} for planId ${e}:`,n),{id:"INVALID_VISIT_DATA"}):{id:n.id});return console.log(`[treatmentService.getVisitsByPlanId] Mapped visits for planId ${e}:`,r),r}catch(t){throw console.error(`[treatmentService.getVisitsByPlanId] CRITICAL ERROR fetching visits for plan ${e}:`,t),t}},async createMultipleVisits(e,t,r){if(!t||t.length===0)return{data:[],error:null};let n=Wr(r);const a=[];for(let i=0;i<t.length;i++){const s=t[i];i>0&&t[i-1].timeGap&&(n=dRe(n,t[i-1].timeGap));const o={treatment_plan_id:e,visit_number:i+1,procedures:s.procedures||"N/A",estimated_duration:s.estimatedDuration,time_gap:s.timeGap,status:"pending",scheduled_date:Mt(n,"yyyy-MM-dd")};a.push(o)}return Rt.patients.createTreatmentVisitsBatch(a)},async getAiSuggestionForPlan(e){if(!e.patient_id||!e.description)return null;try{return await Rt.patients.generateTreatmentPlan(e.patient_id,e.description)}catch(t){return console.error("Error fetching AI suggestion for plan:",t),null}}},fRe=Object.freeze(Object.defineProperty({__proto__:null,treatmentService:ba},Symbol.toStringTag,{value:"Module"}));function Ca(e){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(e)}var Lo=Uint8Array,mc=Uint16Array,ER=Int32Array,GN=new Lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),YN=new Lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uO=new Lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xre=function(e,t){for(var r=new mc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new ER(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},Jre=Xre(GN,2),Zre=Jre.b,dO=Jre.r;Zre[28]=258,dO[258]=28;var Qre=Xre(YN,0),hRe=Qre.b,VW=Qre.r,fO=new mc(32768);for(var ri=0;ri<32768;++ri){var Ip=(ri&43690)>>1|(ri&21845)<<1;Ip=(Ip&52428)>>2|(Ip&13107)<<2,Ip=(Ip&61680)>>4|(Ip&3855)<<4,fO[ri]=((Ip&65280)>>8|(Ip&255)<<8)>>1}var sf=function(e,t,r){for(var n=e.length,a=0,i=new mc(t);a<n;++a)e[a]&&++i[e[a]-1];var s=new mc(t);for(a=1;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(r){o=new mc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=s[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[fO[f]>>c]=u}else for(o=new mc(n),a=0;a<n;++a)e[a]&&(o[a]=fO[s[e[a]-1]++]>>15-e[a]);return o},ym=new Lo(288);for(var ri=0;ri<144;++ri)ym[ri]=8;for(var ri=144;ri<256;++ri)ym[ri]=9;for(var ri=256;ri<280;++ri)ym[ri]=7;for(var ri=280;ri<288;++ri)ym[ri]=8;var yw=new Lo(32);for(var ri=0;ri<32;++ri)yw[ri]=5;var pRe=sf(ym,9,0),mRe=sf(ym,9,1),gRe=sf(yw,5,0),vRe=sf(yw,5,1),XP=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Du=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},JP=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},CR=function(e){return(e+7)/8|0},ene=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Lo(e.subarray(t,r))},yRe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fu=function(e,t,r){var n=new Error(t||yRe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Fu),!r)throw n;return n},xRe=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new Lo(0);var s=!r,o=s||t.i!=2,c=t.i;s&&(r=new Lo(a*3));var u=function(fe){var te=r.length;if(fe>te){var ke=new Lo(Math.max(te*2,fe));ke.set(r),r=ke}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,w=t.d,g=t.m,y=t.n,b=a*8;do{if(!m){d=Du(e,f,1);var _=Du(e,f+1,3);if(f+=3,_)if(_==1)m=mRe,w=vRe,g=9,y=5;else if(_==2){var D=Du(e,f,31)+257,P=Du(e,f+10,15)+4,F=D+Du(e,f+5,31)+1;f+=14;for(var L=new Lo(F),W=new Lo(19),T=0;T<P;++T)W[uO[T]]=Du(e,f+T*3,7);f+=P*3;for(var R=XP(W),j=(1<<R)-1,Y=sf(W,R,1),T=0;T<F;){var Z=Y[Du(e,f,j)];f+=Z&15;var N=Z>>4;if(N<16)L[T++]=N;else{var re=0,z=0;for(N==16?(z=3+Du(e,f,3),f+=2,re=L[T-1]):N==17?(z=3+Du(e,f,7),f+=3):N==18&&(z=11+Du(e,f,127),f+=7);z--;)L[T++]=re}}var q=L.subarray(0,D),B=L.subarray(D);g=XP(q),y=XP(B),m=sf(q,g,1),w=sf(B,y,1)}else Fu(1);else{var N=CR(f)+4,E=e[N-4]|e[N-3]<<8,C=N+E;if(C>a){c&&Fu(0);break}o&&u(h+E),r.set(e.subarray(N,C),h),t.b=h+=E,t.p=f=C*8,t.f=d;continue}if(f>b){c&&Fu(0);break}}o&&u(h+131072);for(var G=(1<<g)-1,Q=(1<<y)-1,O=f;;O=f){var re=m[JP(e,f)&G],J=re>>4;if(f+=re&15,f>b){c&&Fu(0);break}if(re||Fu(2),J<256)r[h++]=J;else if(J==256){O=f,m=null;break}else{var X=J-254;if(J>264){var T=J-257,ne=GN[T];X=Du(e,f,(1<<ne)-1)+Zre[T],f+=ne}var ie=w[JP(e,f)&Q],oe=ie>>4;ie||Fu(3),f+=ie&15;var B=hRe[oe];if(oe>3){var ne=YN[oe];B+=JP(e,f)&(1<<ne)-1,f+=ne}if(f>b){c&&Fu(0);break}o&&u(h+131072);var de=h+X;if(h<B){var V=i-B,se=Math.min(B,de);for(V+h<0&&Fu(3);h<se;++h)r[h]=n[V+h]}for(;h<de;++h)r[h]=r[h-B]}}t.l=m,t.p=O,t.b=h,t.f=d,m&&(d=1,t.m=g,t.d=w,t.n=y)}while(!d);return h!=r.length&&s?ene(r,0,h):r.subarray(0,h)},th=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},w2=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},ZP=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:rne,l:0};if(a==1){var s=new Lo(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(C,D){return C.f-D.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new mc(h+1),w=hO(r[d-1],m,0);if(w>t){var n=0,g=0,y=w-t,b=1<<y;for(i.sort(function(D,P){return m[P.s]-m[D.s]||D.f-P.f});n<a;++n){var _=i[n].s;if(m[_]>t)g+=b-(1<<w-m[_]),m[_]=t;else break}for(g>>=y;g>0;){var N=i[n].s;m[N]<t?g-=1<<t-m[N]++-1:++n}for(;n>=0&&g;--n){var E=i[n].s;m[E]==t&&(--m[E],++g)}w=t}return{t:new Lo(m),l:w}},hO=function(e,t,r){return e.s==-1?Math.max(hO(e.l,t,r+1),hO(e.r,t,r+1)):t[e.s]=r},HW=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new mc(++t),n=0,a=e[0],i=1,s=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},b2=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},tne=function(e,t,r){var n=r.length,a=CR(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},GW=function(e,t,r,n,a,i,s,o,c,u,d){th(t,d++,r),++a[256];for(var f=ZP(a,15),h=f.t,m=f.l,w=ZP(i,15),g=w.t,y=w.l,b=HW(h),_=b.c,N=b.n,E=HW(g),C=E.c,D=E.n,P=new mc(19),F=0;F<_.length;++F)++P[_[F]&31];for(var F=0;F<C.length;++F)++P[C[F]&31];for(var L=ZP(P,7),W=L.t,T=L.l,R=19;R>4&&!W[uO[R-1]];--R);var j=u+5<<3,Y=b2(a,ym)+b2(i,yw)+s,Z=b2(a,h)+b2(i,g)+s+14+3*R+b2(P,W)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&j<=Y&&j<=Z)return tne(t,d,e.subarray(c,c+u));var re,z,q,B;if(th(t,d,1+(Z<Y)),d+=2,Z<Y){re=sf(h,m,0),z=h,q=sf(g,y,0),B=g;var G=sf(W,T,0);th(t,d,N-257),th(t,d+5,D-1),th(t,d+10,R-4),d+=14;for(var F=0;F<R;++F)th(t,d+3*F,W[uO[F]]);d+=3*R;for(var Q=[_,C],O=0;O<2;++O)for(var J=Q[O],F=0;F<J.length;++F){var X=J[F]&31;th(t,d,G[X]),d+=W[X],X>15&&(th(t,d,J[F]>>5&127),d+=J[F]>>12)}}else re=pRe,z=ym,q=gRe,B=yw;for(var F=0;F<o;++F){var ne=n[F];if(ne>255){var X=ne>>18&31;w2(t,d,re[X+257]),d+=z[X+257],X>7&&(th(t,d,ne>>23&31),d+=GN[X]);var ie=ne&31;w2(t,d,q[ie]),d+=B[ie],ie>3&&(w2(t,d,ne>>5&8191),d+=YN[ie])}else w2(t,d,re[ne]),d+=z[ne]}return w2(t,d,re[256]),d+z[256]},wRe=new ER([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rne=new Lo(0),bRe=function(e,t,r,n,a,i){var s=i.z||e.length,o=new Lo(n+s+5*(1+Math.ceil(s/7e3))+a),c=o.subarray(n,o.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(c[0]=i.r>>3);for(var f=wRe[t-1],h=f>>13,m=f&8191,w=(1<<r)-1,g=i.p||new mc(32768),y=i.h||new mc(w+1),b=Math.ceil(r/3),_=2*b,N=function(Re){return(e[Re]^e[Re+1]<<b^e[Re+2]<<_)&w},E=new ER(25e3),C=new mc(288),D=new mc(32),P=0,F=0,L=i.i||0,W=0,T=i.w||0,R=0;L+2<s;++L){var j=N(L),Y=L&32767,Z=y[j];if(g[Y]=Z,y[j]=Y,T<=L){var re=s-L;if((P>7e3||W>24576)&&(re>423||!u)){d=GW(e,c,0,E,C,D,F,W,R,L-R,d),W=P=F=0,R=L;for(var z=0;z<286;++z)C[z]=0;for(var z=0;z<30;++z)D[z]=0}var q=2,B=0,G=m,Q=Y-Z&32767;if(re>2&&j==N(L-Q))for(var O=Math.min(h,re)-1,J=Math.min(32767,L),X=Math.min(258,re);Q<=J&&--G&&Y!=Z;){if(e[L+q]==e[L+q-Q]){for(var ne=0;ne<X&&e[L+ne]==e[L+ne-Q];++ne);if(ne>q){if(q=ne,B=Q,ne>O)break;for(var ie=Math.min(Q,ne-2),oe=0,z=0;z<ie;++z){var de=L-Q+z&32767,V=g[de],se=de-V&32767;se>oe&&(oe=se,Z=de)}}}Y=Z,Z=g[Y],Q+=Y-Z&32767}if(B){E[W++]=268435456|dO[q]<<18|VW[B];var fe=dO[q]&31,te=VW[B]&31;F+=GN[fe]+YN[te],++C[257+fe],++D[te],T=L+q,++P}else E[W++]=e[L],++C[e[L]]}}for(L=Math.max(L,T);L<s;++L)E[W++]=e[L],++C[e[L]];d=GW(e,c,u,E,C,D,F,W,R,L-R,d),u||(i.r=d&7|c[d/8|0]<<3,d-=7,i.h=y,i.p=g,i.i=L,i.w=T)}else{for(var L=i.w||0;L<s+u;L+=65535){var ke=L+65535;ke>=s&&(c[d/8|0]=u,ke=s),d=tne(c,d+1,e.subarray(L,ke))}i.i=s}return ene(o,0,n+CR(d)+a)},nne=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=r[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},_Re=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new Lo(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return bRe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},ane=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},SRe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=nne();a.p(t.dictionary),ane(e,2,a.d())}},NRe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Fu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Fu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function pO(e,t){t||(t={});var r=nne();r.p(e);var n=_Re(e,t,t.dictionary?6:2,4);return SRe(n,t),ane(n,n.length-4,r.d()),n}function ARe(e,t){return xRe(e.subarray(NRe(e),-4),{i:2},t,t)}var kRe=typeof TextDecoder<"u"&&new TextDecoder,ERe=0;try{kRe.decode(rne,{stream:!0}),ERe=1}catch{}var en=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function QP(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var Ra={log:QP,warn:function(e){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):QP.call(null,arguments))},error:function(e){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):QP(e))}};function eT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){C0(n.response,t,r)},n.onerror=function(){Ra.error("could not download file")},n.send()}function YW(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function O_(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Z2,mO,C0=en.saveAs||((typeof window>"u"?"undefined":Ca(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=en.URL||en.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?YW(a.href)?eT(e,t,r):O_(a,a.target="_blank"):O_(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){O_(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(YW(e))eT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){O_(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Ca(i)!=="object"&&(Ra.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return eT(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(en.HTMLElement)||en.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":Ca(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=en.URL||en.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ine(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function tT(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=So(r,n,a,i,t[0],7,-680876936),i=So(i,r,n,a,t[1],12,-389564586),a=So(a,i,r,n,t[2],17,606105819),n=So(n,a,i,r,t[3],22,-1044525330),r=So(r,n,a,i,t[4],7,-176418897),i=So(i,r,n,a,t[5],12,1200080426),a=So(a,i,r,n,t[6],17,-1473231341),n=So(n,a,i,r,t[7],22,-45705983),r=So(r,n,a,i,t[8],7,1770035416),i=So(i,r,n,a,t[9],12,-1958414417),a=So(a,i,r,n,t[10],17,-42063),n=So(n,a,i,r,t[11],22,-1990404162),r=So(r,n,a,i,t[12],7,1804603682),i=So(i,r,n,a,t[13],12,-40341101),a=So(a,i,r,n,t[14],17,-1502002290),r=No(r,n=So(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=No(i,r,n,a,t[6],9,-1069501632),a=No(a,i,r,n,t[11],14,643717713),n=No(n,a,i,r,t[0],20,-373897302),r=No(r,n,a,i,t[5],5,-701558691),i=No(i,r,n,a,t[10],9,38016083),a=No(a,i,r,n,t[15],14,-660478335),n=No(n,a,i,r,t[4],20,-405537848),r=No(r,n,a,i,t[9],5,568446438),i=No(i,r,n,a,t[14],9,-1019803690),a=No(a,i,r,n,t[3],14,-187363961),n=No(n,a,i,r,t[8],20,1163531501),r=No(r,n,a,i,t[13],5,-1444681467),i=No(i,r,n,a,t[2],9,-51403784),a=No(a,i,r,n,t[7],14,1735328473),r=Ao(r,n=No(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ao(i,r,n,a,t[8],11,-2022574463),a=Ao(a,i,r,n,t[11],16,1839030562),n=Ao(n,a,i,r,t[14],23,-35309556),r=Ao(r,n,a,i,t[1],4,-1530992060),i=Ao(i,r,n,a,t[4],11,1272893353),a=Ao(a,i,r,n,t[7],16,-155497632),n=Ao(n,a,i,r,t[10],23,-1094730640),r=Ao(r,n,a,i,t[13],4,681279174),i=Ao(i,r,n,a,t[0],11,-358537222),a=Ao(a,i,r,n,t[3],16,-722521979),n=Ao(n,a,i,r,t[6],23,76029189),r=Ao(r,n,a,i,t[9],4,-640364487),i=Ao(i,r,n,a,t[12],11,-421815835),a=Ao(a,i,r,n,t[15],16,530742520),r=ko(r,n=Ao(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ko(i,r,n,a,t[7],10,1126891415),a=ko(a,i,r,n,t[14],15,-1416354905),n=ko(n,a,i,r,t[5],21,-57434055),r=ko(r,n,a,i,t[12],6,1700485571),i=ko(i,r,n,a,t[3],10,-1894986606),a=ko(a,i,r,n,t[10],15,-1051523),n=ko(n,a,i,r,t[1],21,-2054922799),r=ko(r,n,a,i,t[8],6,1873313359),i=ko(i,r,n,a,t[15],10,-30611744),a=ko(a,i,r,n,t[6],15,-1560198380),n=ko(n,a,i,r,t[13],21,1309151649),r=ko(r,n,a,i,t[4],6,-145523070),i=ko(i,r,n,a,t[11],10,-1120210379),a=ko(a,i,r,n,t[2],15,718787259),n=ko(n,a,i,r,t[9],21,-343485551),e[0]=Zp(r,e[0]),e[1]=Zp(n,e[1]),e[2]=Zp(a,e[2]),e[3]=Zp(i,e[3])}function KN(e,t,r,n,a,i){return t=Zp(Zp(t,e),Zp(n,i)),Zp(t<<a|t>>>32-a,r)}function So(e,t,r,n,a,i,s){return KN(t&r|~t&n,e,t,a,i,s)}function No(e,t,r,n,a,i,s){return KN(t&n|r&~n,e,t,a,i,s)}function Ao(e,t,r,n,a,i,s){return KN(t^r^n,e,t,a,i,s)}function ko(e,t,r,n,a,i,s){return KN(r^(t|~n),e,t,a,i,s)}function sne(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)tT(n,CRe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(tT(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,tT(n,a),n}function CRe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Z2=en.atob.bind(en),mO=en.btoa.bind(en);var KW="0123456789abcdef".split("");function PRe(e){for(var t="",r=0;r<4;r++)t+=KW[e>>8*r+4&15]+KW[e>>8*r&15];return t}function TRe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function gO(e){return sne(e).map(TRe).join("")}var ORe=function(e){for(var t=0;t<e.length;t++)e[t]=PRe(e[t]);return e.join("")}(sne("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zp(e,t){if(ORe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function vO(e,t){var r,n,a,i;if(e!==r){for(var s=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+s.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,m=0,w="";for(c=0;c<f;c++)m=(m+(d=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=d,s=o[(o[h]+o[m])%256],w+=String.fromCharCode(t.charCodeAt(c)^s);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var XW={print:4,modify:8,copy:16,"annot-forms":32};function $v(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(XW.perm!==void 0)throw new Error("Invalid permission: "+o);a+=XW[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=gO(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=vO(this.encryptionKey,this.padding)}function Bv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function JW(e){if(Ca(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var s=t[r][i];try{s[0].apply(e,n)}catch(o){en.console&&Ra.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function VS(e){if(!(this instanceof VS))return new VS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function one(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function T0(e,t,r,n,a){if(!(this instanceof T0))return new T0(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,one.call(this,n,a)}function Gv(e,t,r,n,a){if(!(this instanceof Gv))return new Gv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,one.call(this,n,a)}function Hr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,c=16,u="S",d=null;Ca(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),s=e.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=JW;var w="1.3",g=m.__private__.getPdfVersion=function(){return w};m.__private__.setPdfVersion=function(U){w=U};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var b=m.__private__.getPageFormat=function(U){return y[U]};a=a||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},N=_.COMPAT;function E(){this.saveGraphicsState(),ve(new yt(At,0,0,-At,0,Nd()*At).toString()+" cm"),this.setFontSize(this.getFontSize()/At),u="n",N=_.ADVANCED}function C(){this.restoreGraphicsState(),u="S",N=_.COMPAT}var D=m.__private__.combineFontStyleAndFontWeight=function(U,ue){if(U=="bold"&&ue=="normal"||U=="bold"&&ue==400||U=="normal"&&ue=="italic"||U=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(U=ue==400||ue==="normal"?U==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||U!=="normal"?(ue==700?"bold":ue)+""+U:"bold"),U};m.advancedAPI=function(U){var ue=N===_.COMPAT;return ue&&E.call(this),typeof U!="function"||(U(this),ue&&C.call(this)),this},m.compatAPI=function(U){var ue=N===_.ADVANCED;return ue&&C.call(this),typeof U!="function"||(U(this),ue&&E.call(this)),this},m.isAdvancedAPI=function(){return N===_.ADVANCED};var P,F=function(U){if(N!==_.ADVANCED)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=m.roundToPrecision=m.__private__.roundToPrecision=function(U,ue){var Pe=t||ue;if(isNaN(U)||isNaN(Pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Pe).replace(/0+$/,"")};P=m.hpf=m.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return L(U,16)};var W=m.f2=m.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return L(U,2)},T=m.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return L(U,3)},R=m.scale=m.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return N===_.COMPAT?U*At:N===_.ADVANCED?U:void 0},j=function(U){return N===_.COMPAT?Nd()-U:N===_.ADVANCED?U:void 0},Y=function(U){return R(j(U))};m.__private__.setPrecision=m.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(t=parseInt(U,10))};var Z,re="00000000000000000000000000000000",z=m.__private__.getFileId=function(){return re},q=m.__private__.setFileId=function(U){return re=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ha=new $v(d.userPermissions,d.userPassword,d.ownerPassword,re)),re};m.setFileId=function(U){return q(U),this},m.getFileId=function(){return z()};var B=m.__private__.convertDateToPDFDate=function(U){var ue=U.getTimezoneOffset(),Pe=ue<0?"+":"-",Be=Math.floor(Math.abs(ue/60)),tt=Math.abs(ue%60),kt=[Pe,X(Be),"'",X(tt),"'"].join("");return["D:",U.getFullYear(),X(U.getMonth()+1),X(U.getDate()),X(U.getHours()),X(U.getMinutes()),X(U.getSeconds()),kt].join("")},G=m.__private__.convertPDFDateToDate=function(U){var ue=parseInt(U.substr(2,4),10),Pe=parseInt(U.substr(6,2),10)-1,Be=parseInt(U.substr(8,2),10),tt=parseInt(U.substr(10,2),10),kt=parseInt(U.substr(12,2),10),$t=parseInt(U.substr(14,2),10);return new Date(ue,Pe,Be,tt,kt,$t,0)},Q=m.__private__.setCreationDate=function(U){var ue;if(U===void 0&&(U=new Date),U instanceof Date)ue=B(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=U}return Z=ue},O=m.__private__.getCreationDate=function(U){var ue=Z;return U==="jsDate"&&(ue=G(Z)),ue};m.setCreationDate=function(U){return Q(U),this},m.getCreationDate=function(U){return O(U)};var J,X=m.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},ne=m.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},ie=0,oe=[],de=[],V=0,se=[],fe=[],te=!1,ke=de,Re=function(){ie=0,V=0,de=[],oe=[],se=[],xe=Qt(),_e=Qt()};m.__private__.setCustomOutputDestination=function(U){te=!0,ke=U};var Ce=function(U){te||(ke=U)};m.__private__.resetCustomOutputDestination=function(){te=!1,ke=de};var ve=m.__private__.out=function(U){return U=U.toString(),V+=U.length+1,ke.push(U),ke},Ge=m.__private__.write=function(U){return ve(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},pt=m.__private__.getArrayBuffer=function(U){for(var ue=U.length,Pe=new ArrayBuffer(ue),Be=new Uint8Array(Pe);ue--;)Be[ue]=U.charCodeAt(ue);return Pe},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return it};var Le=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(U){return Le=N===_.ADVANCED?U/At:U,this};var ut,he=m.__private__.getFontSize=m.getFontSize=function(){return N===_.COMPAT?Le:Le*At},Ee=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(U){return Ee=U,this},m.__private__.getR2L=m.getR2L=function(){return Ee};var Me,at=m.__private__.setZoomMode=function(U){var ue=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))ut=U;else if(isNaN(U)){if(ue.indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');ut=U}else ut=parseInt(U,10)};m.__private__.getZoomMode=function(){return ut};var ct,dt=m.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Me=U};m.__private__.getPageMode=function(){return Me};var Xe=m.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');ct=U};m.__private__.getLayoutMode=function(){return ct},m.__private__.setDisplayMode=m.setDisplayMode=function(U,ue,Pe){return at(U),Xe(ue),dt(Pe),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(U){if(Object.keys(Nt).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[U]},m.__private__.getDocumentProperties=function(){return Nt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(U){for(var ue in Nt)Nt.hasOwnProperty(ue)&&U[ue]&&(Nt[ue]=U[ue]);return this},m.__private__.setDocumentProperty=function(U,ue){if(Object.keys(Nt).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[U]=ue};var St,At,dn,Nr,mt,Dt={},yr={},Gr=[],fr={},Or={},cr={},xn={},Sn=null,Nn=0,Pr=[],hn=new JW(m),hs=e.hotfixes||[],Gn={},bi={},ot=[],yt=function U(ue,Pe,Be,tt,kt,$t){if(!(this instanceof U))return new U(ue,Pe,Be,tt,kt,$t);isNaN(ue)&&(ue=1),isNaN(Pe)&&(Pe=0),isNaN(Be)&&(Be=0),isNaN(tt)&&(tt=1),isNaN(kt)&&(kt=0),isNaN($t)&&($t=0),this._matrix=[ue,Pe,Be,tt,kt,$t]};Object.defineProperty(yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),yt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(U)},yt.prototype.multiply=function(U){var ue=U.sx*this.sx+U.shy*this.shx,Pe=U.sx*this.shy+U.shy*this.sy,Be=U.shx*this.sx+U.sy*this.shx,tt=U.shx*this.shy+U.sy*this.sy,kt=U.tx*this.sx+U.ty*this.shx+this.tx,$t=U.tx*this.shy+U.ty*this.sy+this.ty;return new yt(ue,Pe,Be,tt,kt,$t)},yt.prototype.decompose=function(){var U=this.sx,ue=this.shy,Pe=this.shx,Be=this.sy,tt=this.tx,kt=this.ty,$t=Math.sqrt(U*U+ue*ue),ur=(U/=$t)*Pe+(ue/=$t)*Be;Pe-=U*ur,Be-=ue*ur;var Fr=Math.sqrt(Pe*Pe+Be*Be);return ur/=Fr,U*(Be/=Fr)<ue*(Pe/=Fr)&&(U=-U,ue=-ue,ur=-ur,$t=-$t),{scale:new yt($t,0,0,Fr,0,0),translate:new yt(1,0,0,1,tt,kt),rotate:new yt(U,ue,-ue,U,0,0),skew:new yt(1,0,ur,1,0,0)}},yt.prototype.toString=function(U){return this.join(" ")},yt.prototype.inversed=function(){var U=this.sx,ue=this.shy,Pe=this.shx,Be=this.sy,tt=this.tx,kt=this.ty,$t=1/(U*Be-ue*Pe),ur=Be*$t,Fr=-ue*$t,pn=-Pe*$t,fn=U*$t;return new yt(ur,Fr,pn,fn,-ur*tt-pn*kt,-Fr*tt-fn*kt)},yt.prototype.applyToPoint=function(U){var ue=U.x*this.sx+U.y*this.shx+this.tx,Pe=U.x*this.shy+U.y*this.sy+this.ty;return new Tc(ue,Pe)},yt.prototype.applyToRectangle=function(U){var ue=this.applyToPoint(U),Pe=this.applyToPoint(new Tc(U.x+U.w,U.y+U.h));return new Sd(ue.x,ue.y,Pe.x-ue.x,Pe.y-ue.y)},yt.prototype.clone=function(){var U=this.sx,ue=this.shy,Pe=this.shx,Be=this.sy,tt=this.tx,kt=this.ty;return new yt(U,ue,Pe,Be,tt,kt)},m.Matrix=yt;var Mr=m.matrixMult=function(U,ue){return ue.multiply(U)},ta=new yt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ta;var bt=function(U,ue){if(!Or[U]){var Pe=(ue instanceof T0?"Sh":"P")+(Object.keys(fr).length+1).toString(10);ue.id=Pe,Or[U]=Pe,fr[Pe]=ue,hn.publish("addPattern",ue)}};m.ShadingPattern=T0,m.TilingPattern=Gv,m.addShadingPattern=function(U,ue){return F("addShadingPattern()"),bt(U,ue),this},m.beginTilingPattern=function(U){F("beginTilingPattern()"),Hg(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},m.endTilingPattern=function(U,ue){F("endTilingPattern()"),ue.stream=fe[J].join(`
`),bt(U,ue),hn.publish("endTilingPattern",ue),ot.pop().restore()};var vt=m.__private__.newObject=function(){var U=Qt();return ce(U,!0),U},Qt=m.__private__.newObjectDeferred=function(){return ie++,oe[ie]=function(){return V},ie},ce=function(U,ue){return ue=typeof ue=="boolean"&&ue,oe[U]=V,ue&&ve(U+" 0 obj"),U},we=m.__private__.newAdditionalObject=function(){var U={objId:Qt(),content:""};return se.push(U),U},xe=Qt(),_e=Qt(),Ne=m.__private__.decodeColorString=function(U){var ue=U.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length===5&&(ue[4]==="k"||ue[4]==="K")&&(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Pe=parseFloat(ue[0]);ue=[Pe,Pe,Pe,"r"]}for(var Be="#",tt=0;tt<3;tt++)Be+=("0"+Math.floor(255*parseFloat(ue[tt])).toString(16)).slice(-2);return Be},Se=m.__private__.encodeColorString=function(U){var ue;typeof U=="string"&&(U={ch1:U});var Pe=U.ch1,Be=U.ch2,tt=U.ch3,kt=U.ch4,$t=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Pe=="string"&&Pe.charAt(0)!=="#"){var ur=new ine(Pe);if(ur.ok)Pe=ur.toHex();else if(!/^\d*\.?\d*$/.test(Pe))throw new Error('Invalid color "'+Pe+'" passed to jsPDF.encodeColorString.')}if(typeof Pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Pe)&&(Pe="#"+Pe[1]+Pe[1]+Pe[2]+Pe[2]+Pe[3]+Pe[3]),typeof Pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Pe)){var Fr=parseInt(Pe.substr(1),16);Pe=Fr>>16&255,Be=Fr>>8&255,tt=255&Fr}if(Be===void 0||kt===void 0&&Pe===Be&&Be===tt)if(typeof Pe=="string")ue=Pe+" "+$t[0];else switch(U.precision){case 2:ue=W(Pe/255)+" "+$t[0];break;case 3:default:ue=T(Pe/255)+" "+$t[0]}else if(kt===void 0||Ca(kt)==="object"){if(kt&&!isNaN(kt.a)&&kt.a===0)return ue=["1.","1.","1.",$t[1]].join(" ");if(typeof Pe=="string")ue=[Pe,Be,tt,$t[1]].join(" ");else switch(U.precision){case 2:ue=[W(Pe/255),W(Be/255),W(tt/255),$t[1]].join(" ");break;default:case 3:ue=[T(Pe/255),T(Be/255),T(tt/255),$t[1]].join(" ")}}else if(typeof Pe=="string")ue=[Pe,Be,tt,kt,$t[2]].join(" ");else switch(U.precision){case 2:ue=[W(Pe),W(Be),W(tt),W(kt),$t[2]].join(" ");break;case 3:default:ue=[T(Pe),T(Be),T(tt),T(kt),$t[2]].join(" ")}return ue},Ve=m.__private__.getFilters=function(){return s},ft=m.__private__.putStream=function(U){var ue=(U=U||{}).data||"",Pe=U.filters||Ve(),Be=U.alreadyAppliedFilters||[],tt=U.addLength1||!1,kt=ue.length,$t=U.objectId,ur=function(As){return As};if(d!==null&&$t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(ur=Ha.encryptor($t,0));var Fr={};Pe===!0&&(Pe=["FlateEncode"]);var pn=U.additionalKeyValues||[],fn=(Fr=Hr.API.processDataByFilters!==void 0?Hr.API.processDataByFilters(ue,Pe):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(Be)?Be.join(" "):Be.toString());if(Fr.data.length!==0&&(pn.push({key:"Length",value:Fr.data.length}),tt===!0&&pn.push({key:"Length1",value:kt})),fn.length!=0)if(fn.split("/").length-1==1)pn.push({key:"Filter",value:fn});else{pn.push({key:"Filter",value:"["+fn+"]"});for(var In=0;In<pn.length;In+=1)if(pn[In].key==="DecodeParms"){for(var Ga=[],ii=0;ii<Fr.reverseChain.split("/").length-1;ii+=1)Ga.push("null");Ga.push(pn[In].value),pn[In].value="["+Ga.join(" ")+"]"}}ve("<<");for(var Si=0;Si<pn.length;Si++)ve("/"+pn[Si].key+" "+pn[Si].value);ve(">>"),Fr.data.length!==0&&(ve("stream"),ve(ur(Fr.data)),ve("endstream"))},et=m.__private__.putPage=function(U){var ue=U.number,Pe=U.data,Be=U.objId,tt=U.contentsObjId;ce(Be,!0),ve("<</Type /Page"),ve("/Parent "+U.rootDictionaryObjId+" 0 R"),ve("/Resources "+U.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(P(U.mediaBox.bottomLeftX))+" "+parseFloat(P(U.mediaBox.bottomLeftY))+" "+P(U.mediaBox.topRightX)+" "+P(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&ve("/CropBox ["+P(U.cropBox.bottomLeftX)+" "+P(U.cropBox.bottomLeftY)+" "+P(U.cropBox.topRightX)+" "+P(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&ve("/BleedBox ["+P(U.bleedBox.bottomLeftX)+" "+P(U.bleedBox.bottomLeftY)+" "+P(U.bleedBox.topRightX)+" "+P(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&ve("/TrimBox ["+P(U.trimBox.bottomLeftX)+" "+P(U.trimBox.bottomLeftY)+" "+P(U.trimBox.topRightX)+" "+P(U.trimBox.topRightY)+"]"),U.artBox!==null&&ve("/ArtBox ["+P(U.artBox.bottomLeftX)+" "+P(U.artBox.bottomLeftY)+" "+P(U.artBox.topRightX)+" "+P(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&ve("/UserUnit "+U.userUnit),hn.publish("putPage",{objId:Be,pageContext:Pr[ue],pageNumber:ue,page:Pe}),ve("/Contents "+tt+" 0 R"),ve(">>"),ve("endobj");var kt=Pe.join(`
`);return N===_.ADVANCED&&(kt+=`
Q`),ce(tt,!0),ft({data:kt,filters:Ve(),objectId:tt}),ve("endobj"),Be},st=m.__private__.putPages=function(){var U,ue,Pe=[];for(U=1;U<=Nn;U++)Pr[U].objId=Qt(),Pr[U].contentsObjId=Qt();for(U=1;U<=Nn;U++)Pe.push(et({number:U,data:fe[U],objId:Pr[U].objId,contentsObjId:Pr[U].contentsObjId,mediaBox:Pr[U].mediaBox,cropBox:Pr[U].cropBox,bleedBox:Pr[U].bleedBox,trimBox:Pr[U].trimBox,artBox:Pr[U].artBox,userUnit:Pr[U].userUnit,rootDictionaryObjId:xe,resourceDictionaryObjId:_e}));ce(xe,!0),ve("<</Type /Pages");var Be="/Kids [";for(ue=0;ue<Nn;ue++)Be+=Pe[ue]+" 0 R ";ve(Be+"]"),ve("/Count "+Nn),ve(">>"),ve("endobj"),hn.publish("postPutPages")},Je=function(U){hn.publish("putFont",{font:U,out:ve,newObject:vt,putStream:ft}),U.isAlreadyPutted!==!0&&(U.objectNumber=vt(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+Bv(U.postScriptName)),ve("/Subtype /Type1"),typeof U.encoding=="string"&&ve("/Encoding /"+U.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},Ft=function(){for(var U in Dt)Dt.hasOwnProperty(U)&&(f===!1||f===!0&&h.hasOwnProperty(U))&&Je(Dt[U])},Jt=function(U){U.objectNumber=vt();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[P(U.x),P(U.y),P(U.x+U.width),P(U.y+U.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Pe=U.pages[1].join(`
`);ft({data:Pe,additionalKeyValues:ue,objectId:U.objectNumber}),ve("endobj")},lr=function(){for(var U in Gn)Gn.hasOwnProperty(U)&&Jt(Gn[U])},zt=function(U,ue){var Pe,Be=[],tt=1/(ue-1);for(Pe=0;Pe<1;Pe+=tt)Be.push(Pe);if(Be.push(1),U[0].offset!=0){var kt={offset:0,color:U[0].color};U.unshift(kt)}if(U[U.length-1].offset!=1){var $t={offset:1,color:U[U.length-1].color};U.push($t)}for(var ur="",Fr=0,pn=0;pn<Be.length;pn++){for(Pe=Be[pn];Pe>U[Fr+1].offset;)Fr++;var fn=U[Fr].offset,In=(Pe-fn)/(U[Fr+1].offset-fn),Ga=U[Fr].color,ii=U[Fr+1].color;ur+=ne(Math.round((1-In)*Ga[0]+In*ii[0]).toString(16))+ne(Math.round((1-In)*Ga[1]+In*ii[1]).toString(16))+ne(Math.round((1-In)*Ga[2]+In*ii[2]).toString(16))}return ur.trim()},qt=function(U,ue){ue||(ue=21);var Pe=vt(),Be=zt(U.colors,ue),tt=[];tt.push({key:"FunctionType",value:"0"}),tt.push({key:"Domain",value:"[0.0 1.0]"}),tt.push({key:"Size",value:"["+ue+"]"}),tt.push({key:"BitsPerSample",value:"8"}),tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ft({data:Be,additionalKeyValues:tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Pe}),ve("endobj"),U.objectNumber=vt(),ve("<< /ShadingType "+U.type),ve("/ColorSpace /DeviceRGB");var kt="/Coords ["+P(parseFloat(U.coords[0]))+" "+P(parseFloat(U.coords[1]))+" ";U.type===2?kt+=P(parseFloat(U.coords[2]))+" "+P(parseFloat(U.coords[3])):kt+=P(parseFloat(U.coords[2]))+" "+P(parseFloat(U.coords[3]))+" "+P(parseFloat(U.coords[4]))+" "+P(parseFloat(U.coords[5])),ve(kt+="]"),U.matrix&&ve("/Matrix ["+U.matrix.toString()+"]"),ve("/Function "+Pe+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},Qr=function(U,ue){var Pe=Qt(),Be=vt();ue.push({resourcesOid:Pe,objectOid:Be}),U.objectNumber=Be;var tt=[];tt.push({key:"Type",value:"/Pattern"}),tt.push({key:"PatternType",value:"1"}),tt.push({key:"PaintType",value:"1"}),tt.push({key:"TilingType",value:"1"}),tt.push({key:"BBox",value:"["+U.boundingBox.map(P).join(" ")+"]"}),tt.push({key:"XStep",value:P(U.xStep)}),tt.push({key:"YStep",value:P(U.yStep)}),tt.push({key:"Resources",value:Pe+" 0 R"}),U.matrix&&tt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),ft({data:U.stream,additionalKeyValues:tt,objectId:U.objectNumber}),ve("endobj")},qn=function(U){var ue;for(ue in fr)fr.hasOwnProperty(ue)&&(fr[ue]instanceof T0?qt(fr[ue]):fr[ue]instanceof Gv&&Qr(fr[ue],U))},la=function(U){for(var ue in U.objectNumber=vt(),ve("<<"),U)switch(ue){case"opacity":ve("/ca "+W(U[ue]));break;case"stroke-opacity":ve("/CA "+W(U[ue]))}ve(">>"),ve("endobj")},za=function(){var U;for(U in cr)cr.hasOwnProperty(U)&&la(cr[U])},Vl=function(){for(var U in ve("/XObject <<"),Gn)Gn.hasOwnProperty(U)&&Gn[U].objectNumber>=0&&ve("/"+U+" "+Gn[U].objectNumber+" 0 R");hn.publish("putXobjectDict"),ve(">>")},Nc=function(){Ha.oid=vt(),ve("<<"),ve("/Filter /Standard"),ve("/V "+Ha.v),ve("/R "+Ha.r),ve("/U <"+Ha.toHexString(Ha.U)+">"),ve("/O <"+Ha.toHexString(Ha.O)+">"),ve("/P "+Ha.P),ve(">>"),ve("endobj")},Go=function(){for(var U in ve("/Font <<"),Dt)Dt.hasOwnProperty(U)&&(f===!1||f===!0&&h.hasOwnProperty(U))&&ve("/"+U+" "+Dt[U].objectNumber+" 0 R");ve(">>")},_i=function(){if(Object.keys(fr).length>0){for(var U in ve("/Shading <<"),fr)fr.hasOwnProperty(U)&&fr[U]instanceof T0&&fr[U].objectNumber>=0&&ve("/"+U+" "+fr[U].objectNumber+" 0 R");hn.publish("putShadingPatternDict"),ve(">>")}},Ac=function(U){if(Object.keys(fr).length>0){for(var ue in ve("/Pattern <<"),fr)fr.hasOwnProperty(ue)&&fr[ue]instanceof m.TilingPattern&&fr[ue].objectNumber>=0&&fr[ue].objectNumber<U&&ve("/"+ue+" "+fr[ue].objectNumber+" 0 R");hn.publish("putTilingPatternDict"),ve(">>")}},Va=function(){if(Object.keys(cr).length>0){var U;for(U in ve("/ExtGState <<"),cr)cr.hasOwnProperty(U)&&cr[U].objectNumber>=0&&ve("/"+U+" "+cr[U].objectNumber+" 0 R");hn.publish("putGStateDict"),ve(">>")}},di=function(U){ce(U.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Go(),_i(),Ac(U.objectOid),Va(),Vl(),ve(">>"),ve("endobj")},Bg=function(){var U=[];Ft(),za(),lr(),qn(U),hn.publish("putResources"),U.forEach(di),di({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),hn.publish("postPutResources")},Ug=function(){hn.publish("putAdditionalObjects");for(var U=0;U<se.length;U++){var ue=se[U];ce(ue.objId,!0),ve(ue.content),ve("endobj")}hn.publish("postPutAdditionalObjects")},Sf=function(U){yr[U.fontName]=yr[U.fontName]||{},yr[U.fontName][U.fontStyle]=U.id},gd=function(U,ue,Pe,Be,tt){var kt={id:"F"+(Object.keys(Dt).length+1).toString(10),postScriptName:U,fontName:ue,fontStyle:Pe,encoding:Be,isStandardFont:tt||!1,metadata:{}};return hn.publish("addFont",{font:kt,instance:this}),Dt[kt.id]=kt,Sf(kt),kt.id},Nf=function(U){for(var ue=0,Pe=it.length;ue<Pe;ue++){var Be=gd.call(this,U[ue][0],U[ue][1],U[ue][2],it[ue][3],!0);f===!1&&(h[Be]=!0);var tt=U[ue][0].split("-");Sf({id:Be,fontName:tt[0],fontStyle:tt[1]||""})}hn.publish("addFonts",{fonts:Dt,dictionary:yr})},fo=function(U){return U.foo=function(){try{return U.apply(this,arguments)}catch(Be){var ue=Be.stack||"";~ue.indexOf(" at ")&&(ue=ue.split(" at ")[1]);var Pe="Error in function "+ue.split(`
`)[0].split("<")[0]+": "+Be.message;if(!en.console)throw new Error(Pe);en.console.error(Pe,Be),en.alert&&alert(Pe)}},U.foo.bar=U,U.foo},Bh=function(U,ue){var Pe,Be,tt,kt,$t,ur,Fr,pn,fn;if(tt=(ue=ue||{}).sourceEncoding||"Unicode",$t=ue.outputEncoding,(ue.autoencode||$t)&&Dt[St].metadata&&Dt[St].metadata[tt]&&Dt[St].metadata[tt].encoding&&(kt=Dt[St].metadata[tt].encoding,!$t&&Dt[St].encoding&&($t=Dt[St].encoding),!$t&&kt.codePages&&($t=kt.codePages[0]),typeof $t=="string"&&($t=kt[$t]),$t)){for(Fr=!1,ur=[],Pe=0,Be=U.length;Pe<Be;Pe++)(pn=$t[U.charCodeAt(Pe)])?ur.push(String.fromCharCode(pn)):ur.push(U[Pe]),ur[Pe].charCodeAt(0)>>8&&(Fr=!0);U=ur.join("")}for(Pe=U.length;Fr===void 0&&Pe!==0;)U.charCodeAt(Pe-1)>>8&&(Fr=!0),Pe--;if(!Fr)return U;for(ur=ue.noBOM?[]:[254,255],Pe=0,Be=U.length;Pe<Be;Pe++){if((fn=(pn=U.charCodeAt(Pe))>>8)>>8)throw new Error("Character at position "+Pe+" of string '"+U+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ur.push(fn),ur.push(pn-(fn<<8))}return String.fromCharCode.apply(void 0,ur)},ho=m.__private__.pdfEscape=m.pdfEscape=function(U,ue){return Bh(U,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Af=m.__private__.beginPage=function(U){fe[++Nn]=[],Pr[Nn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},vd(Nn),Ce(fe[J])},Wm=function(U,ue){var Pe,Be,tt;switch(r=ue||r,typeof U=="string"&&(Pe=b(U.toLowerCase()),Array.isArray(Pe)&&(Be=Pe[0],tt=Pe[1])),Array.isArray(U)&&(Be=U[0]*At,tt=U[1]*At),isNaN(Be)&&(Be=a[0],tt=a[1]),(Be>14400||tt>14400)&&(Ra.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Be=Math.min(14400,Be),tt=Math.min(14400,tt)),a=[Be,tt],r.substr(0,1)){case"l":tt>Be&&(a=[tt,Be]);break;case"p":Be>tt&&(a=[tt,Be])}Af(a),Tf(Gm),ve(po),Km!==0&&ve(Km+" J"),Df!==0&&ve(Df+" j"),hn.publish("addPage",{pageNumber:Nn})},zm=function(U){U>0&&U<=Nn&&(fe.splice(U,1),Pr.splice(U,1),Nn--,J>Nn&&(J=Nn),this.setPage(J))},vd=function(U){U>0&&U<=Nn&&(J=U)},Ry=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return fe.length-1},Uh=function(U,ue,Pe){var Be,tt=void 0;return Pe=Pe||{},U=U!==void 0?U:Dt[St].fontName,ue=ue!==void 0?ue:Dt[St].fontStyle,Be=U.toLowerCase(),yr[Be]!==void 0&&yr[Be][ue]!==void 0?tt=yr[Be][ue]:yr[U]!==void 0&&yr[U][ue]!==void 0?tt=yr[U][ue]:Pe.disableWarning===!1&&Ra.warn("Unable to look up font label for font '"+U+"', '"+ue+"'. Refer to getFontList() for available fonts."),tt||Pe.noFallback||(tt=yr.times[ue])==null&&(tt=yr.times.normal),tt},Yn=m.__private__.putInfo=function(){var U=vt(),ue=function(Be){return Be};for(var Pe in d!==null&&(ue=Ha.encryptor(U,0)),ve("<<"),ve("/Producer ("+ho(ue("jsPDF "+Hr.version))+")"),Nt)Nt.hasOwnProperty(Pe)&&Nt[Pe]&&ve("/"+Pe.substr(0,1).toUpperCase()+Pe.substr(1)+" ("+ho(ue(Nt[Pe]))+")");ve("/CreationDate ("+ho(ue(Z))+")"),ve(">>"),ve("endobj")},qh=m.__private__.putCatalog=function(U){var ue=(U=U||{}).rootDictionaryObjId||xe;switch(vt(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+ue+" 0 R"),ut||(ut="fullwidth"),ut){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Pe=""+ut;Pe.substr(Pe.length-1)==="%"&&(ut=parseInt(ut)/100),typeof ut=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+W(ut)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}Me&&ve("/PageMode /"+Me),hn.publish("putCatalog"),ve(">>"),ve("endobj")},qg=m.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(ie+1)),ve("/Root "+ie+" 0 R"),ve("/Info "+(ie-1)+" 0 R"),d!==null&&ve("/Encrypt "+Ha.oid+" 0 R"),ve("/ID [ <"+re+"> <"+re+"> ]"),ve(">>")},Vm=m.__private__.putHeader=function(){ve("%PDF-"+w),ve("%ºß¬à")},Wg=m.__private__.putXRef=function(){var U="0000000000";ve("xref"),ve("0 "+(ie+1)),ve("0000000000 65535 f ");for(var ue=1;ue<=ie;ue++)typeof oe[ue]=="function"?ve((U+oe[ue]()).slice(-10)+" 00000 n "):oe[ue]!==void 0?ve((U+oe[ue]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},kc=m.__private__.buildDocument=function(){Re(),Ce(de),hn.publish("buildDocument"),Vm(),st(),Ug(),Bg(),d!==null&&Nc(),Yn(),qh();var U=V;return Wg(),qg(),ve("startxref"),ve(""+U),ve("%%EOF"),Ce(fe[J]),de.join(`
`)},kf=m.__private__.getBlob=function(U){return new Blob([pt(U)],{type:"application/pdf"})},yd=m.output=m.__private__.output=fo(function(U,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",U){case void 0:return kc();case"save":m.save(ue.filename);break;case"arraybuffer":return pt(kc());case"blob":return kf(kc());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(kf(kc()))||void 0;Ra.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Pe="",Be=kc();try{Pe=mO(Be)}catch{Pe=mO(unescape(encodeURIComponent(Be)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(tt=ue.pdfObjectUrl,kt="");var $t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+tt+'"'+kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",ur=en.open();return ur!==null&&ur.document.write($t),ur}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',pn=en.open();if(pn!==null){pn.document.write(Fr);var fn=this;pn.document.documentElement.querySelector("#pdfViewer").onload=function(){pn.document.title=ue.filename,pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fn.output("bloburl"))}}return pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',Ga=en.open();if(Ga!==null&&(Ga.document.write(In),Ga.document.title=ue.filename),Ga||typeof safari>"u")return Ga;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",ue);default:return null}}),Ef=function(U){return Array.isArray(hs)===!0&&hs.indexOf(U)>-1};switch(n){case"pt":At=1;break;case"mm":At=72/25.4;break;case"cm":At=72/2.54;break;case"in":At=72;break;case"px":At=Ef("px_scaling")==1?.75:96/72;break;case"pc":case"em":At=12;break;case"ex":At=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);At=n}var Ha=null;Q(),q();var Ec=function(U){return d!==null?Ha.encryptor(U,0):function(ue){return ue}},Hl=m.__private__.getPageInfo=m.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pr[U].objId,pageNumber:U,pageContext:Pr[U]}},Yr=m.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in Pr)if(Pr[ue].objId===U)break;return Hl(ue)},Cf=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Pr[J].objId,pageNumber:J,pageContext:Pr[J]}};m.addPage=function(){return Wm.apply(this,arguments),this},m.setPage=function(){return vd.apply(this,arguments),Ce.call(this,fe[J]),this},m.insertPage=function(U){return this.addPage(),this.movePage(J,U),this},m.movePage=function(U,ue){var Pe,Be;if(U>ue){Pe=fe[U],Be=Pr[U];for(var tt=U;tt>ue;tt--)fe[tt]=fe[tt-1],Pr[tt]=Pr[tt-1];fe[ue]=Pe,Pr[ue]=Be,this.setPage(ue)}else if(U<ue){Pe=fe[U],Be=Pr[U];for(var kt=U;kt<ue;kt++)fe[kt]=fe[kt+1],Pr[kt]=Pr[kt+1];fe[ue]=Pe,Pr[ue]=Be,this.setPage(ue)}return this},m.deletePage=function(){return zm.apply(this,arguments),this},m.__private__.text=m.text=function(U,ue,Pe,Be,tt){var kt,$t,ur,Fr,pn,fn,In,Ga,ii,Si=(Be=Be||{}).scope||this;if(typeof U=="number"&&typeof ue=="number"&&(typeof Pe=="string"||Array.isArray(Pe))){var As=Pe;Pe=ue,ue=U,U=As}if(arguments[3]instanceof yt?(F("The transform parameter of text() with a Matrix value"),ii=tt):(ur=arguments[4],Fr=arguments[5],Ca(In=arguments[3])==="object"&&In!==null||(typeof ur=="string"&&(Fr=ur,ur=null),typeof In=="string"&&(Fr=In,In=null),typeof In=="number"&&(ur=In,In=null),Be={flags:In,angle:ur,align:Fr})),isNaN(ue)||isNaN(Pe)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return Si;var rs="",Xl=!1,Ko=typeof Be.lineHeightFactor=="number"?Be.lineHeightFactor:Pf,xl=Si.internal.scaleFactor;function Ad(Na){return Na=Na.split("	").join(Array(Be.TabLen||9).join(" ")),ho(Na,In)}function Zm(Na){for(var ca,oi=Na.concat(),Ni=[],Ic=oi.length;Ic--;)typeof(ca=oi.shift())=="string"?Ni.push(ca):Array.isArray(Na)&&(ca.length===1||ca[1]===void 0&&ca[2]===void 0)?Ni.push(ca[0]):Ni.push([ca[0],ca[1],ca[2]]);return Ni}function Zh(Na,ca){var oi;if(typeof Na=="string")oi=ca(Na)[0];else if(Array.isArray(Na)){for(var Ni,Ic,lp=Na.concat(),Bf=[],t0=lp.length;t0--;)typeof(Ni=lp.shift())=="string"?Bf.push(ca(Ni)[0]):Array.isArray(Ni)&&typeof Ni[0]=="string"&&(Ic=ca(Ni[0],Ni[1],Ni[2]),Bf.push([Ic[0],Ic[1],Ic[2]]));oi=Bf}return oi}var If=!1,Qh=!0;if(typeof U=="string")If=!0;else if(Array.isArray(U)){var ep=U.concat();$t=[];for(var Rf,si=ep.length;si--;)(typeof(Rf=ep.shift())!="string"||Array.isArray(Rf)&&typeof Rf[0]!="string")&&(Qh=!1);If=Qh}if(If===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var tp=Le/Si.internal.scaleFactor,rp=tp*(Ko-1);switch(Be.baseline){case"bottom":Pe-=rp;break;case"top":Pe+=tp-rp;break;case"hanging":Pe+=tp-2*rp;break;case"middle":Pe+=tp/2-rp}if((fn=Be.maxWidth||0)>0&&(typeof U=="string"?U=Si.splitTextToSize(U,fn):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Na,ca){return Na.concat(Si.splitTextToSize(ca,fn))},[]))),kt={text:U,x:ue,y:Pe,options:Be,mutex:{pdfEscape:ho,activeFontKey:St,fonts:Dt,activeFontSize:Le}},hn.publish("preProcessText",kt),U=kt.text,ur=(Be=kt.options).angle,!(ii instanceof yt)&&ur&&typeof ur=="number"){ur*=Math.PI/180,Be.rotationDirection===0&&(ur=-ur),N===_.ADVANCED&&(ur=-ur);var np=Math.cos(ur),ap=Math.sin(ur);ii=new yt(np,ap,-ap,np,0,0)}else ur&&ur instanceof yt&&(ii=ur);N!==_.ADVANCED||ii||(ii=ta),(pn=Be.charSpace||_d)!==void 0&&(rs+=P(R(pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ga=Be.horizontalScale)!==void 0&&(rs+=P(100*Ga)+` Tz
`),Be.lang;var Vs=-1,Mf=Be.renderingMode!==void 0?Be.renderingMode:Be.stroke,du=Si.internal.getCurrentPageInfo().pageContext;switch(Mf){case 0:case!1:case"fill":Vs=0;break;case 1:case!0:case"stroke":Vs=1;break;case 2:case"fillThenStroke":Vs=2;break;case 3:case"invisible":Vs=3;break;case 4:case"fillAndAddForClipping":Vs=4;break;case 5:case"strokeAndAddPathForClipping":Vs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vs=6;break;case 7:case"addToPathForClipping":Vs=7}var Gg=du.usedRenderingMode!==void 0?du.usedRenderingMode:-1;Vs!==-1?rs+=Vs+` Tr
`:Gg!==-1&&(rs+=`0 Tr
`),Vs!==-1&&(du.usedRenderingMode=Vs),Fr=Be.align||"left";var Hs,ip=Le*Ko,Qm=Si.internal.pageSize.getWidth(),sp=Dt[St];pn=Be.charSpace||_d,fn=Be.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},Be.flags);var Oc=[],kd=function(Na){return Si.getStringUnitWidth(Na,{font:sp,charSpace:pn,fontSize:Le,doKerning:!1})*Le/xl};if(Object.prototype.toString.call(U)==="[object Array]"){var Gs;$t=Zm(U),Fr!=="left"&&(Hs=$t.map(kd));var ks,Ed=0;if(Fr==="right"){ue-=Hs[0],U=[],si=$t.length;for(var fu=0;fu<si;fu++)fu===0?(ks=vl(ue),Gs=yl(Pe)):(ks=R(Ed-Hs[fu]),Gs=-ip),U.push([$t[fu],ks,Gs]),Ed=Hs[fu]}else if(Fr==="center"){ue-=Hs[0]/2,U=[],si=$t.length;for(var hu=0;hu<si;hu++)hu===0?(ks=vl(ue),Gs=yl(Pe)):(ks=R((Ed-Hs[hu])/2),Gs=-ip),U.push([$t[hu],ks,Gs]),Ed=Hs[hu]}else if(Fr==="left"){U=[],si=$t.length;for(var op=0;op<si;op++)U.push($t[op])}else if(Fr==="justify"&&sp.encoding==="Identity-H"){U=[],si=$t.length,fn=fn!==0?fn:Qm;for(var pu=0,Kn=0;Kn<si;Kn++)if(Gs=Kn===0?yl(Pe):-ip,ks=Kn===0?vl(ue):pu,Kn<si-1){var mu=R((fn-Hs[Kn])/($t[Kn].split(" ").length-1)),Es=$t[Kn].split(" ");U.push([Es[0]+" ",ks,Gs]),pu=0;for(var Xo=1;Xo<Es.length;Xo++){var Ff=(kd(Es[Xo-1]+" "+Es[Xo])-kd(Es[Xo]))*xl+mu;Xo==Es.length-1?U.push([Es[Xo],Ff,0]):U.push([Es[Xo]+" ",Ff,0]),pu-=Ff}}else U.push([$t[Kn],ks,Gs]);U.push(["",pu,0])}else{if(Fr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],si=$t.length,fn=fn!==0?fn:Qm,Kn=0;Kn<si;Kn++)Gs=Kn===0?yl(Pe):-ip,ks=Kn===0?vl(ue):0,Kn<si-1?Oc.push(P(R((fn-Hs[Kn])/($t[Kn].split(" ").length-1)))):Oc.push(0),U.push([$t[Kn],ks,Gs])}}var e0=typeof Be.R2L=="boolean"?Be.R2L:Ee;e0===!0&&(U=Zh(U,function(Na,ca,oi){return[Na.split("").reverse().join(""),ca,oi]})),kt={text:U,x:ue,y:Pe,options:Be,mutex:{pdfEscape:ho,activeFontKey:St,fonts:Dt,activeFontSize:Le}},hn.publish("postProcessText",kt),U=kt.text,Xl=kt.mutex.isHex||!1;var Lf=Dt[St].encoding;Lf!=="WinAnsiEncoding"&&Lf!=="StandardEncoding"||(U=Zh(U,function(Na,ca,oi){return[Ad(Na),ca,oi]})),$t=Zm(U),U=[];for(var jf,$f,Jo,gu=0,Dc=1,vu=Array.isArray($t[0])?Dc:gu,yu="",Cd=function(Na,ca,oi){var Ni="";return oi instanceof yt?(oi=typeof Be.angle=="number"?Mr(oi,new yt(1,0,0,1,Na,ca)):Mr(new yt(1,0,0,1,Na,ca),oi),N===_.ADVANCED&&(oi=Mr(new yt(1,0,0,-1,0,0),oi)),Ni=oi.join(" ")+` Tm
`):Ni=P(Na)+" "+P(ca)+` Td
`,Ni},ps=0;ps<$t.length;ps++){switch(yu="",vu){case Dc:Jo=(Xl?"<":"(")+$t[ps][0]+(Xl?">":")"),jf=parseFloat($t[ps][1]),$f=parseFloat($t[ps][2]);break;case gu:Jo=(Xl?"<":"(")+$t[ps]+(Xl?">":")"),jf=vl(ue),$f=yl(Pe)}Oc!==void 0&&Oc[ps]!==void 0&&(yu=Oc[ps]+` Tw
`),ps===0?U.push(yu+Cd(jf,$f,ii)+Jo):vu===gu?U.push(yu+Jo):vu===Dc&&U.push(yu+Cd(jf,$f,ii)+Jo)}U=vu===gu?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var mo=`BT
/`;return mo+=St+" "+Le+` Tf
`,mo+=P(Le*Ko)+` TL
`,mo+=Fi+`
`,mo+=rs,mo+=U,ve(mo+="ET"),h[St]=!0,Si};var Cc=m.__private__.clip=m.clip=function(U){return ve(U==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Cc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ve("n"),this};var Pc=m.__private__.isValidStyle=function(U){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ue=!0),ue};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(U){return Pc(U)&&(u=U),this};var Hm=m.__private__.getStyle=m.getStyle=function(U){var ue=u;switch(U){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=U}return ue},xd=m.close=function(){return ve("h"),this};m.stroke=function(){return ve("S"),this},m.fill=function(U){return Wh("f",U),this},m.fillEvenOdd=function(U){return Wh("f*",U),this},m.fillStroke=function(U){return Wh("B",U),this},m.fillStrokeEvenOdd=function(U){return Wh("B*",U),this};var Wh=function(U,ue){Ca(ue)==="object"?zg(ue,U):ve(U)},zh=function(U){U===null||N===_.ADVANCED&&U===void 0||(U=Hm(U),ve(U))};function Vh(U,ue,Pe,Be,tt){var kt=new Gv(ue||this.boundingBox,Pe||this.xStep,Be||this.yStep,this.gState,tt||this.matrix);kt.stream=this.stream;var $t=U+"$$"+this.cloneIndex+++"$$";return bt($t,kt),kt}var zg=function(U,ue){var Pe=Or[U.key],Be=fr[Pe];if(Be instanceof T0)ve("q"),ve(My(ue)),Be.gState&&m.setGState(Be.gState),ve(U.matrix.toString()+" cm"),ve("/"+Pe+" sh"),ve("Q");else if(Be instanceof Gv){var tt=new yt(1,0,0,-1,0,Nd());U.matrix&&(tt=tt.multiply(U.matrix||ta),Pe=Vh.call(Be,U.key,U.boundingBox,U.xStep,U.yStep,tt).id),ve("q"),ve("/Pattern cs"),ve("/"+Pe+" scn"),Be.gState&&m.setGState(Be.gState),ve(ue),ve("Q")}},My=function(U){switch(U){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},cu=m.moveTo=function(U,ue){return ve(P(R(U))+" "+P(Y(ue))+" m"),this},Gl=m.lineTo=function(U,ue){return ve(P(R(U))+" "+P(Y(ue))+" l"),this},Yo=m.curveTo=function(U,ue,Pe,Be,tt,kt){return ve([P(R(U)),P(Y(ue)),P(R(Pe)),P(Y(Be)),P(R(tt)),P(Y(kt)),"c"].join(" ")),this};m.__private__.line=m.line=function(U,ue,Pe,Be,tt){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||isNaN(Be)||!Pc(tt))throw new Error("Invalid arguments passed to jsPDF.line");return N===_.COMPAT?this.lines([[Pe-U,Be-ue]],U,ue,[1,1],tt||"S"):this.lines([[Pe-U,Be-ue]],U,ue,[1,1]).stroke()},m.__private__.lines=m.lines=function(U,ue,Pe,Be,tt,kt){var $t,ur,Fr,pn,fn,In,Ga,ii,Si,As,rs,Xl;if(typeof U=="number"&&(Xl=Pe,Pe=ue,ue=U,U=Xl),Be=Be||[1,1],kt=kt||!1,isNaN(ue)||isNaN(Pe)||!Array.isArray(U)||!Array.isArray(Be)||!Pc(tt)||typeof kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(cu(ue,Pe),$t=Be[0],ur=Be[1],pn=U.length,As=ue,rs=Pe,Fr=0;Fr<pn;Fr++)(fn=U[Fr]).length===2?(As=fn[0]*$t+As,rs=fn[1]*ur+rs,Gl(As,rs)):(In=fn[0]*$t+As,Ga=fn[1]*ur+rs,ii=fn[2]*$t+As,Si=fn[3]*ur+rs,As=fn[4]*$t+As,rs=fn[5]*ur+rs,Yo(In,Ga,ii,Si,As,rs));return kt&&xd(),zh(tt),this},m.path=function(U){for(var ue=0;ue<U.length;ue++){var Pe=U[ue],Be=Pe.c;switch(Pe.op){case"m":cu(Be[0],Be[1]);break;case"l":Gl(Be[0],Be[1]);break;case"c":Yo.apply(this,Be);break;case"h":xd()}}return this},m.__private__.rect=m.rect=function(U,ue,Pe,Be,tt){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||isNaN(Be)||!Pc(tt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===_.COMPAT&&(Be=-Be),ve([P(R(U)),P(Y(ue)),P(R(Pe)),P(R(Be)),"re"].join(" ")),zh(tt),this},m.__private__.triangle=m.triangle=function(U,ue,Pe,Be,tt,kt,$t){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||isNaN(Be)||isNaN(tt)||isNaN(kt)||!Pc($t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Pe-U,Be-ue],[tt-Pe,kt-Be],[U-tt,ue-kt]],U,ue,[1,1],$t,!0),this},m.__private__.roundedRect=m.roundedRect=function(U,ue,Pe,Be,tt,kt,$t){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||isNaN(Be)||isNaN(tt)||isNaN(kt)||!Pc($t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ur=4/3*(Math.SQRT2-1);return tt=Math.min(tt,.5*Pe),kt=Math.min(kt,.5*Be),this.lines([[Pe-2*tt,0],[tt*ur,0,tt,kt-kt*ur,tt,kt],[0,Be-2*kt],[0,kt*ur,-tt*ur,kt,-tt,kt],[2*tt-Pe,0],[-tt*ur,0,-tt,-kt*ur,-tt,-kt],[0,2*kt-Be],[0,-kt*ur,tt*ur,-kt,tt,-kt]],U+tt,ue,[1,1],$t,!0),this},m.__private__.ellipse=m.ellipse=function(U,ue,Pe,Be,tt){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||isNaN(Be)||!Pc(tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var kt=4/3*(Math.SQRT2-1)*Pe,$t=4/3*(Math.SQRT2-1)*Be;return cu(U+Pe,ue),Yo(U+Pe,ue-$t,U+kt,ue-Be,U,ue-Be),Yo(U-kt,ue-Be,U-Pe,ue-$t,U-Pe,ue),Yo(U-Pe,ue+$t,U-kt,ue+Be,U,ue+Be),Yo(U+kt,ue+Be,U+Pe,ue+$t,U+Pe,ue),zh(tt),this},m.__private__.circle=m.circle=function(U,ue,Pe,Be){if(isNaN(U)||isNaN(ue)||isNaN(Pe)||!Pc(Be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ue,Pe,Pe,Be)},m.setFont=function(U,ue,Pe){return Pe&&(ue=D(ue,Pe)),St=Uh(U,ue,{disableWarning:!1}),this};var Hh=m.__private__.getFont=m.getFont=function(){return Dt[Uh.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var U,ue,Pe={};for(U in yr)if(yr.hasOwnProperty(U))for(ue in Pe[U]=[],yr[U])yr[U].hasOwnProperty(ue)&&Pe[U].push(ue);return Pe},m.addFont=function(U,ue,Pe,Be,tt){var kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&kt.indexOf(arguments[3])!==-1?tt=arguments[3]:arguments[3]&&kt.indexOf(arguments[3])==-1&&(Pe=D(Pe,Be)),tt=tt||"Identity-H",gd.call(this,U,ue,Pe,tt)};var Pf,Gm=e.lineWidth||.200025,wd=m.__private__.getLineWidth=m.getLineWidth=function(){return Gm},Tf=m.__private__.setLineWidth=m.setLineWidth=function(U){return Gm=U,ve(P(R(U))+" w"),this};m.__private__.setLineDash=Hr.API.setLineDash=Hr.API.setLineDashPattern=function(U,ue){if(U=U||[],ue=ue||0,isNaN(ue)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Pe){return P(R(Pe))}).join(" "),ue=P(R(ue)),ve("["+U+"] "+ue+" d"),this};var Gh=m.__private__.getLineHeight=m.getLineHeight=function(){return Le*Pf};m.__private__.getLineHeight=m.getLineHeight=function(){return Le*Pf};var Ym=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Pf=U),this},Yl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Pf};Ym(e.lineHeight);var vl=m.__private__.getHorizontalCoordinate=function(U){return R(U)},yl=m.__private__.getVerticalCoordinate=function(U){return N===_.ADVANCED?U:Pr[J].mediaBox.topRightY-Pr[J].mediaBox.bottomLeftY-R(U)},Vg=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(U){return P(vl(U))},Kl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(U){return P(yl(U))},po=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ne(po)},m.__private__.setStrokeColor=m.setDrawColor=function(U,ue,Pe,Be){return po=Se({ch1:U,ch2:ue,ch3:Pe,ch4:Be,pdfColorType:"draw",precision:2}),ve(po),this};var Yh=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ne(Yh)},m.__private__.setFillColor=m.setFillColor=function(U,ue,Pe,Be){return Yh=Se({ch1:U,ch2:ue,ch3:Pe,ch4:Be,pdfColorType:"fill",precision:2}),ve(Yh),this};var Fi=e.textColor||"0 g",bd=m.__private__.getTextColor=m.getTextColor=function(){return Ne(Fi)};m.__private__.setTextColor=m.setTextColor=function(U,ue,Pe,Be){return Fi=Se({ch1:U,ch2:ue,ch3:Pe,ch4:Be,pdfColorType:"text",precision:3}),this};var _d=e.charSpace,Of=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(_d||0)};m.__private__.setCharSpace=m.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _d=U,this};var Km=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(U){var ue=m.CapJoinStyles[U];if(ue===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Km=ue,ve(ue+" J"),this};var Df=0;m.__private__.setLineJoin=m.setLineJoin=function(U){var ue=m.CapJoinStyles[U];if(ue===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Df=ue,ve(ue+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(P(R(U))+" M"),this},m.GState=VS,m.setGState=function(U){(U=typeof U=="string"?cr[xn[U]]:Kh(null,U)).equals(Sn)||(ve("/"+U.id+" gs"),Sn=U)};var Kh=function(U,ue){if(!U||!xn[U]){var Pe=!1;for(var Be in cr)if(cr.hasOwnProperty(Be)&&cr[Be].equals(ue)){Pe=!0;break}if(Pe)ue=cr[Be];else{var tt="GS"+(Object.keys(cr).length+1).toString(10);cr[tt]=ue,ue.id=tt}return U&&(xn[U]=ue.id),hn.publish("addGState",ue),ue}};m.addGState=function(U,ue){return Kh(U,ue),this},m.saveGraphicsState=function(){return ve("q"),Gr.push({key:St,size:Le,color:Fi}),this},m.restoreGraphicsState=function(){ve("Q");var U=Gr.pop();return St=U.key,Le=U.size,Fi=U.color,Sn=null,this},m.setCurrentTransformationMatrix=function(U){return ve(U.toString()+" cm"),this},m.comment=function(U){return ve("#"+U),this};var Tc=function(U,ue){var Pe=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Pe},set:function(kt){isNaN(kt)||(Pe=parseFloat(kt))}});var Be=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function(kt){isNaN(kt)||(Be=parseFloat(kt))}});var tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return tt},set:function(kt){tt=kt.toString()}}),this},Sd=function(U,ue,Pe,Be){Tc.call(this,U,ue),this.type="rect";var tt=Pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return tt},set:function($t){isNaN($t)||(tt=parseFloat($t))}});var kt=Be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return kt},set:function($t){isNaN($t)||(kt=parseFloat($t))}}),this},Xh=function(){this.page=Nn,this.currentPage=J,this.pages=fe.slice(0),this.pagesContext=Pr.slice(0),this.x=dn,this.y=Nr,this.matrix=mt,this.width=uu(J),this.height=Nd(J),this.outputDestination=ke,this.id="",this.objectNumber=-1};Xh.prototype.restore=function(){Nn=this.page,J=this.currentPage,Pr=this.pagesContext,fe=this.pages,dn=this.x,Nr=this.y,mt=this.matrix,Xm(J,this.width),Jm(J,this.height),ke=this.outputDestination};var Hg=function(U,ue,Pe,Be,tt){ot.push(new Xh),Nn=J=0,fe=[],dn=U,Nr=ue,mt=tt,Af([Pe,Be])},Fy=function(U){if(bi[U])ot.pop().restore();else{var ue=new Xh,Pe="Xo"+(Object.keys(Gn).length+1).toString(10);ue.id=Pe,bi[U]=Pe,Gn[Pe]=ue,hn.publish("addFormObject",ue),ot.pop().restore()}};for(var Jh in m.beginFormObject=function(U,ue,Pe,Be,tt){return Hg(U,ue,Pe,Be,tt),this},m.endFormObject=function(U){return Fy(U),this},m.doFormObject=function(U,ue){var Pe=Gn[bi[U]];return ve("q"),ve(ue.toString()+" cm"),ve("/"+Pe.id+" Do"),ve("Q"),this},m.getFormObject=function(U){var ue=Gn[bi[U]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},m.save=function(U,ue){return U=U||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(C0(kf(kc()),U),typeof C0.unload=="function"&&en.setTimeout&&setTimeout(C0.unload,911),this):new Promise(function(Pe,Be){try{var tt=C0(kf(kc()),U);typeof C0.unload=="function"&&en.setTimeout&&setTimeout(C0.unload,911),Pe(tt)}catch(kt){Be(kt.message)}})},Hr.API)Hr.API.hasOwnProperty(Jh)&&(Jh==="events"&&Hr.API.events.length?function(U,ue){var Pe,Be,tt;for(tt=ue.length-1;tt!==-1;tt--)Pe=ue[tt][0],Be=ue[tt][1],U.subscribe.apply(U,[Pe].concat(typeof Be=="function"?[Be]:Be))}(hn,Hr.API.events):m[Jh]=Hr.API[Jh]);var uu=m.getPageWidth=function(U){return(Pr[U=U||J].mediaBox.topRightX-Pr[U].mediaBox.bottomLeftX)/At},Xm=m.setPageWidth=function(U,ue){Pr[U].mediaBox.topRightX=ue*At+Pr[U].mediaBox.bottomLeftX},Nd=m.getPageHeight=function(U){return(Pr[U=U||J].mediaBox.topRightY-Pr[U].mediaBox.bottomLeftY)/At},Jm=m.setPageHeight=function(U,ue){Pr[U].mediaBox.topRightY=ue*At+Pr[U].mediaBox.bottomLeftY};return m.internal={pdfEscape:ho,getStyle:Hm,getFont:Hh,getFontSize:he,getCharSpace:Of,getTextColor:bd,getLineHeight:Gh,getLineHeightFactor:Yl,getLineWidth:wd,write:Ge,getHorizontalCoordinate:vl,getVerticalCoordinate:yl,getCoordinateString:Vg,getVerticalCoordinateString:Kl,collections:{},newObject:vt,newAdditionalObject:we,newObjectDeferred:Qt,newObjectDeferredBegin:ce,getFilters:Ve,putStream:ft,events:hn,scaleFactor:At,pageSize:{getWidth:function(){return uu(J)},setWidth:function(U){Xm(J,U)},getHeight:function(){return Nd(J)},setHeight:function(U){Jm(J,U)}},encryptionOptions:d,encryption:Ha,getEncryptor:Ec,output:yd,getNumberOfPages:Ry,pages:fe,out:ve,f2:W,f3:T,getPageInfo:Hl,getPageInfoByObjId:Yr,getCurrentPageInfo:Cf,getPDFVersion:g,Point:Tc,Rectangle:Sd,Matrix:yt,hasHotfix:Ef},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return uu(J)},set:function(U){Xm(J,U)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Nd(J)},set:function(U){Jm(J,U)},enumerable:!0,configurable:!0}),Nf.call(m,it),St="F1",Wm(a,r),hn.publish("initialized"),m}$v.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},$v.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},$v.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},$v.prototype.processOwnerPassword=function(e,t){return vO(gO(t).substr(0,5),e)},$v.prototype.encryptor=function(e,t){var r=gO(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return vO(r,n)}},VS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ca(e)!==Ca(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Hr.API={events:[]},Hr.version="3.0.1";var Ci=Hr.API,PR=1,Ig=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vn=function(e){return e.toFixed(2)},Rp=function(e){return e.toFixed(5)};Ci.__acroform__={};var zl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ZW=function(e){return e*PR},$d=function(e){var t=new cne,r=Cr.internal.getHeight(e)||0,n=Cr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(vn(n)),Number(vn(r))],t},DRe=Ci.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},IRe=Ci.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},RRe=Ci.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},zi=Ci.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return RRe(e,t-1)},Vi=Ci.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return DRe(e,t-1)},Hi=Ci.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return IRe(e,t-1)},MRe=Ci.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(a+s)||0,c.upperRight_Y=n(i)||0,[Number(vn(c.lowerLeft_X)),Number(vn(c.lowerLeft_Y)),Number(vn(c.upperRight_X)),Number(vn(c.upperRight_Y))]},FRe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=yO(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+vn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=$d(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},yO=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var i=r,s=Cr.internal.getHeight(e)||0;s=s<0?-s:s;var o=Cr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(T,R,j){if(T+1<a.length){var Y=R+" "+a[T+1][0];return D_(Y,e,j).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=D_("3",e,i).height,h=e.multiline?s-i:(s-f)/2,m=h+=2,w=0,g=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+D_(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var b="",_=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var E=!1;if(a[N].length!==1&&y!==a[N].length-1){if((f+2)*(_+2)+2>s)continue e;b+=a[N][y],E=!0,g=N,N--}else{b=(b+=a[N][y]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var C=parseInt(N),D=c(C,b,i),P=N>=a.length-1;if(D&&!P){b+=" ",y=0;continue}if(D||P){if(P)g=C;else if(e.multiline&&(f+2)*(_+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(_+2)+2>s)continue e;g=C}}for(var F="",L=w;L<=g;L++){var W=a[L];if(e.multiline){if(L===g){F+=W[y]+" ",y=(y+1)%W.length;continue}if(L===w){F+=W[W.length-1]+" ";continue}}F+=W[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,d=D_(F,e,i).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=vn(u)+" "+vn(m)+` Td
`,t+="("+Ig(F)+`) Tj
`,t+=-vn(u)+` 0 Td
`,m=-(i+2),d=0,w=E?g:g+1,_++,b=""}break}return n.text=t,n.fontSize=i,n},D_=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},LRe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jRe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},$Re=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Ca(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},BRe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(pd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(LRe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");PR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new une,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&jRe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],c=[],u=o.Rect;if(o.Rect&&(o.Rect=MRe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Cr.createDefaultAppearanceStream(o),Ca(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=FRe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var m=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var s in m)if(m.hasOwnProperty(s)){var w=m[s];typeof w=="function"&&(w=w.call(a,o)),f+="/"+s+" "+w+" ",a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w)}}else typeof(w=m)=="function"&&(w=w.call(a,o)),f+="/"+s+" "+w,a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&$Re(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},lne=Ci.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Ca(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Ig(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rT=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ig(n(e))+")"},Jd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Jd.prototype.toString=function(){return this.objId+" 0 R"},Jd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Jd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:lne(a,this.objId,this.scope)}):a instanceof Jd?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var cne=function(){Jd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};zl(cne,Jd);var une=function(){Jd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ig(r(e))+")"}},set:function(r){e=r}})};zl(une,Jd);var pd=function e(){Jd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zi(t,3)},set:function(b){b?this.F=Vi(t,3):this.F=Hi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof HS)return;i="FieldObject"+e.FieldNum++}var b=function(_){return _};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Ig(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(b){s=b}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/PR:u},set:function(b){u=b}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(b){d=b}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof HS||this instanceof G0))return rT(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ls?h:rT(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof Ls?b:b.substr(0,1)==="("?Dv(b.substr(1,b.length-2)):Dv(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ls?Dv(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Ls?"/"+b:b}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ls?m:rT(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Ls?b:b.substr(0,1)==="("?Dv(b.substr(1,b.length-2)):Dv(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ls?Dv(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Ls?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(b){b=!!b,g=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(b){w=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,1)},set:function(b){b?this.Ff=Vi(this.Ff,1):this.Ff=Hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,2)},set:function(b){b?this.Ff=Vi(this.Ff,2):this.Ff=Hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,3)},set:function(b){b?this.Ff=Vi(this.Ff,3):this.Ff=Hi(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');y=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(y){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};zl(pd,Jd);var s1=function(){pd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lne(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,s,o){o||(o=1);for(var c,u=[];c=s.exec(i);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,18)},set:function(r){r?this.Ff=Vi(this.Ff,18):this.Ff=Hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Vi(this.Ff,19):this.Ff=Hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,20)},set:function(r){r?(this.Ff=Vi(this.Ff,20),t.sort()):this.Ff=Hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,22)},set:function(r){r?this.Ff=Vi(this.Ff,22):this.Ff=Hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,23)},set:function(r){r?this.Ff=Vi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,27)},set:function(r){r?this.Ff=Vi(this.Ff,27):this.Ff=Hi(this.Ff,27)}}),this.hasAppearanceStream=!1};zl(s1,pd);var o1=function(){s1.call(this),this.fontName="helvetica",this.combo=!1};zl(o1,s1);var l1=function(){o1.call(this),this.combo=!0};zl(l1,o1);var c5=function(){l1.call(this),this.edit=!0};zl(c5,l1);var Ls=function(){pd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,15)},set:function(r){r?this.Ff=Vi(this.Ff,15):this.Ff=Hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,16)},set:function(r){r?this.Ff=Vi(this.Ff,16):this.Ff=Hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,17)},set:function(r){r?this.Ff=Vi(this.Ff,17):this.Ff=Hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,26)},set:function(r){r?this.Ff=Vi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Ig(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ca(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};zl(Ls,pd);var u5=function(){Ls.call(this),this.pushButton=!0};zl(u5,Ls);var c1=function(){Ls.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};zl(c1,Ls);var HS=function(){var e,t;pd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Ig(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){Ca(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Cr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zl(HS,pd),c1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},c1.prototype.createOption=function(e){var t=new HS;return t.Parent=this,t.optionName=e,this.Kids.push(t),URe.call(this.scope,t),t};var d5=function(){Ls.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Cr.CheckBox.createAppearanceStream()};zl(d5,Ls);var G0=function(){pd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,13)},set:function(t){t?this.Ff=Vi(this.Ff,13):this.Ff=Hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,21)},set:function(t){t?this.Ff=Vi(this.Ff,21):this.Ff=Hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,23)},set:function(t){t?this.Ff=Vi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,24)},set:function(t){t?this.Ff=Vi(this.Ff,24):this.Ff=Hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,25)},set:function(t){t?this.Ff=Vi(this.Ff,25):this.Ff=Hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,26)},set:function(t){t?this.Ff=Vi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zl(G0,pd);var f5=function(){G0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zi(this.Ff,14)},set:function(e){e?this.Ff=Vi(this.Ff,14):this.Ff=Hi(this.Ff,14)}}),this.password=!0};zl(f5,G0);var Cr={CheckBox:{createAppearanceStream:function(){return{N:{On:Cr.CheckBox.YesNormal},D:{On:Cr.CheckBox.YesPushDown,Off:Cr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=yO(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+vn(Cr.internal.getWidth(e))+" "+vn(Cr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vn(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Cr.internal.getHeight(e),s=Cr.internal.getWidth(e),o=yO(e,e.caption);return a.push("1 g"),a.push("0 0 "+vn(s)+" "+vn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vn(s-1)+" "+vn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+vn(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vn(Cr.internal.getWidth(e))+" "+vn(Cr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Cr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Cr.RadioButton.Circle.YesNormal,t.D[e]=Cr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Cr.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Rp(Cr.internal.getWidth(e)/2)+" "+Rp(Cr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Cr.internal.Bezier_C).toFixed(5)),s=Number((n*Cr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Rp(Cr.internal.getWidth(e)/2)+" "+Rp(Cr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Rp(Cr.internal.getWidth(e)/2)+" "+Rp(Cr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=Cr.internal.getWidth(e)<=Cr.internal.getHeight(e)?Cr.internal.getWidth(e)/4:Cr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Cr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Rp(Cr.internal.getWidth(e)/2)+" "+Rp(Cr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Cr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Cr.RadioButton.Cross.YesNormal,t.D[e]=Cr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=$d(e);t.scope=e.scope;var r=[],n=Cr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+vn(Cr.internal.getWidth(e)-2)+" "+vn(Cr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(vn(n.x1.x)+" "+vn(n.x1.y)+" m"),r.push(vn(n.x2.x)+" "+vn(n.x2.y)+" l"),r.push(vn(n.x4.x)+" "+vn(n.x4.y)+" m"),r.push(vn(n.x3.x)+" "+vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=Cr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+vn(Cr.internal.getWidth(e))+" "+vn(Cr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vn(Cr.internal.getWidth(e)-2)+" "+vn(Cr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(vn(r.x1.x)+" "+vn(r.x1.y)+" m"),n.push(vn(r.x2.x)+" "+vn(r.x2.y)+" l"),n.push(vn(r.x4.x)+" "+vn(r.x4.y)+" m"),n.push(vn(r.x3.x)+" "+vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=$d(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vn(Cr.internal.getWidth(e))+" "+vn(Cr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Cr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Cr.internal.getWidth(e),r=Cr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Cr.internal.getWidth=function(e){var t=0;return Ca(e)==="object"&&(t=ZW(e.Rect[2])),t},Cr.internal.getHeight=function(e){var t=0;return Ca(e)==="object"&&(t=ZW(e.Rect[3])),t};var URe=Ci.addField=function(e){if(BRe(this,e),!(e instanceof pd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ci.AcroFormChoiceField=s1,Ci.AcroFormListBox=o1,Ci.AcroFormComboBox=l1,Ci.AcroFormEditBox=c5,Ci.AcroFormButton=Ls,Ci.AcroFormPushButton=u5,Ci.AcroFormRadioButton=c1,Ci.AcroFormCheckBox=d5,Ci.AcroFormTextField=G0,Ci.AcroFormPasswordField=f5,Ci.AcroFormAppearance=Cr,Ci.AcroForm={ChoiceField:s1,ListBox:o1,ComboBox:l1,EditBox:c5,Button:Ls,PushButton:u5,RadioButton:c1,CheckBox:d5,TextField:G0,PasswordField:f5,Appearance:Cr},Hr.AcroForm={ChoiceField:s1,ListBox:o1,ComboBox:l1,EditBox:c5,Button:Ls,PushButton:u5,RadioButton:c1,CheckBox:d5,TextField:G0,PasswordField:f5,Appearance:Cr};Hr.AcroForm;function dne(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(T,R){var j,Y,Z,re,z,q=t;if((R=R||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(D(T))for(z in r)for(Z=r[z],j=0;j<Z.length;j+=1){for(re=!0,Y=0;Y<Z[j].length;Y+=1)if(Z[j][Y]!==void 0&&Z[j][Y]!==T[Y]){re=!1;break}if(re===!0){q=z;break}}else for(z in r)for(Z=r[z],j=0;j<Z.length;j+=1){for(re=!0,Y=0;Y<Z[j].length;Y+=1)if(Z[j][Y]!==void 0&&Z[j][Y]!==T.charCodeAt(Y)){re=!1;break}if(re===!0){q=z;break}}return q===t&&R!==t&&(q=R),q},a=function T(R){for(var j=this.internal.write,Y=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:R.width}),re.push({key:"Height",value:R.height}),R.colorSpace===y.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===y.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var z="",q=0,B=R.transparency.length;q<B;q++)z+=R.transparency[q]+" "+R.transparency[q]+" ";re.push({key:"Mask",value:"["+z+"]"})}R.sMask!==void 0&&re.push({key:"SMask",value:R.objectId+1+" 0 R"});var G=R.filter!==void 0?["/"+R.filter]:void 0;if(Y({data:R.data,additionalKeyValues:re,alreadyAppliedFilters:G,objectId:R.objectId}),j("endobj"),"sMask"in R&&R.sMask!==void 0){var Q="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,O={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:Q,data:R.sMask};"filter"in R&&(O.filter=R.filter),T.call(this,O)}if(R.colorSpace===y.INDEXED){var J=this.internal.newObject();Y({data:F(new Uint8Array(R.palette)),objectId:J}),j("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var R in T)a.call(this,T[R])},s=function(){var T,R=this.internal.collections.addImage_images,j=this.internal.write;for(var Y in R)j("/I"+(T=R[Y]).index,T.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var T=this.internal.collections.addImage_images;return o.call(this),T},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(T){return typeof e["process"+T.toUpperCase()]=="function"},f=function(T){return Ca(T)==="object"&&T.nodeType===1},h=function(T,R){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var j=""+T.getAttribute("src");if(j.indexOf("data:image/")===0)return Z2(unescape(j).split("base64,").pop());var Y=e.loadFile(j,!0);if(Y!==void 0)return Y}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var Z;switch(R){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Z2(T.toDataURL(Z,1).split("base64,").pop())}},m=function(T){var R=this.internal.collections.addImage_images;if(R){for(var j in R)if(T===R[j].alias)return R[j]}},w=function(T,R,j){return T||R||(T=-96,R=-96),T<0&&(T=-1*j.width*72/T/this.internal.scaleFactor),R<0&&(R=-1*j.height*72/R/this.internal.scaleFactor),T===0&&(T=R*j.width/j.height),R===0&&(R=T*j.height/j.width),[T,R]},g=function(T,R,j,Y,Z,re){var z=w.call(this,j,Y,Z),q=this.internal.getCoordinateString,B=this.internal.getVerticalCoordinateString,G=c.call(this);if(j=z[0],Y=z[1],G[Z.index]=Z,re){re*=Math.PI/180;var Q=Math.cos(re),O=Math.sin(re),J=function(ne){return ne.toFixed(4)},X=[J(Q),J(O),J(-1*O),J(Q),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,q(T),B(R+Y),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([q(j),"0","0",q(Y),"0","0","cm"].join(" "))):this.internal.write([q(j),"0","0",q(Y),q(T),B(R+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(T){var R,j,Y=0;if(typeof T=="string")for(j=T.length,R=0;R<j;R++)Y=(Y<<5)-Y+T.charCodeAt(R),Y|=0;else if(D(T))for(j=T.byteLength/2,R=0;R<j;R++)Y=(Y<<5)-Y+T[R],Y|=0;return Y},N=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var R=!0;return T.length===0&&(R=!1),T.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(R=!1),R},E=e.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var R=T.indexOf(",");return R<0?null:T.substring(0,R).trim().endsWith("base64")?T.substring(R+1):null},C=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return C()&&T instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(T){return C()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},P=e.__addimage__.binaryStringToUint8Array=function(T){for(var R=T.length,j=new Uint8Array(R),Y=0;Y<R;Y++)j[Y]=T.charCodeAt(Y);return j},F=e.__addimage__.arrayBufferToBinaryString=function(T){for(var R="",j=D(T)?T:new Uint8Array(T),Y=0;Y<j.length;Y+=8192)R+=String.fromCharCode.apply(null,j.subarray(Y,Y+8192));return R};e.addImage=function(){var T,R,j,Y,Z,re,z,q,B;if(typeof arguments[1]=="number"?(R=t,j=arguments[1],Y=arguments[2],Z=arguments[3],re=arguments[4],z=arguments[5],q=arguments[6],B=arguments[7]):(R=arguments[1],j=arguments[2],Y=arguments[3],Z=arguments[4],re=arguments[5],z=arguments[6],q=arguments[7],B=arguments[8]),Ca(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var G=T;T=G.imageData,R=G.format||R||t,j=G.x||j||0,Y=G.y||Y||0,Z=G.w||G.width||Z,re=G.h||G.height||re,z=G.alias||z,q=G.compression||q,B=G.rotation||G.angle||B}var Q=this.internal.getFilters();if(q===void 0&&Q.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(j)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var O=L.call(this,T,R,z,q);return g.call(this,j,Y,Z,re,O,B),this};var L=function(T,R,j,Y){var Z,re,z;if(typeof T=="string"&&n(T)===t){T=unescape(T);var q=W(T,!1);(q!==""||(q=e.loadFile(T,!0))!==void 0)&&(T=q)}if(f(T)&&(T=h(T,R)),R=n(T,R),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((z=j)==null||z.length===0)&&(j=function(B){return typeof B=="string"||D(B)?_(B):D(B.data)?_(B.data):null}(T)),(Z=m.call(this,j))||(C()&&(T instanceof Uint8Array||R==="RGBA"||(re=T,T=P(T))),Z=this["process"+R.toUpperCase()](T,u.call(this),j,function(B){return B&&typeof B=="string"&&(B=B.toUpperCase()),B in e.image_compression?B:b.NONE}(Y),re)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},W=e.__addimage__.convertBase64ToBinaryString=function(T,R){R=typeof R!="boolean"||R;var j,Y="";if(typeof T=="string"){var Z;j=(Z=E(T))!==null&&Z!==void 0?Z:T;try{Y=Z2(j)}catch(re){if(R)throw N(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};e.getImageProperties=function(T){var R,j,Y="";if(f(T)&&(T=h(T)),typeof T=="string"&&n(T)===t&&((Y=W(T,!1))===""&&(Y=e.loadFile(T)||""),T=Y),j=n(T),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!C()||T instanceof Uint8Array||(T=P(T)),!(R=this["process"+j.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=j,R}})(Hr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Hr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(g.objId),_=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(b(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(b(_))+") >>",g.content=i;var N=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(w(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var C=this.annotations._nameMap[n.options.name];n.options.pageNumber=C.page,n.options.top=C.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,s){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:s,type:"link"})},e.textWithLink=function(r,n,a,i){var s,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var d=this.splitTextToSize(r,o).length;s=Math.ceil(u*d)}else o=c,s=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,o,s,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Hr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=e.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&i(g)&&t[g.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(g){var y=0,b=r,_="",N=0;for(y=0;y<g.length;y+=1)b[g.charCodeAt(y)]!==void 0?(N++,typeof(b=b[g.charCodeAt(y)])=="number"&&(_+=String.fromCharCode(b),b=r,N=0),y===g.length-1&&(b=r,_+=g.charAt(y-(N-1)),y-=N-1,N=0)):(b=r,_+=g.charAt(y-N),y-=N,N=0);return _};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,y,b){return s(g)?i(g)===!1?-1:!u(g)||!s(y)&&!s(b)||!s(b)&&o(y)||o(g)&&!s(y)||o(g)&&c(y)||o(g)&&o(y)?0:d(g)&&s(y)&&!o(y)&&s(b)&&u(b)?3:o(g)||!s(b)?1:2:-1},m=function(g){var y=0,b=0,_=0,N="",E="",C="",D=(g=g||"").split("\\s+"),P=[];for(y=0;y<D.length;y+=1){for(P.push(""),b=0;b<D[y].length;b+=1)N=D[y][b],E=D[y][b-1],C=D[y][b+1],s(N)?(_=h(N,E,C),P[y]+=_!==-1?String.fromCharCode(t[N.charCodeAt(0)][_]):N):P[y]+=N;P[y]=f(P[y])}return P.join(" ")},w=e.__arabicParser__.processArabic=e.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(y)){var _=0;for(b=[],_=0;_<y.length;_+=1)Array.isArray(y[_])?b.push([m(y[_][0]),y[_][1],y[_][2]]):b.push([m(y[_])]);g=b}else g=m(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",w])}(Hr.API),Hr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Hr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(g){w=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,w=0,g=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,E){return N.concat(y.splitTextToSize(E,b))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)m<(g=this.getStringUnitWidth(c[_],{font:f})*d)&&(m=g);return m!==0&&(w=c.length),{w:m/=h,h:Math.max((w*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,w,g,y,b=[],_=[],N=[],E={},C={},D=[],P=[],F=(h=h||{}).autoSize||!1,L=h.printHeaders!==!1,W=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,T=h.margins||Object.assign({width:this.getPageWidth()},t),R=typeof h.padding=="number"?h.padding:3,j=h.headerBackgroundColor||"#c8c8c8",Y=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=Y,this.setFontSize(W),f==null)_=b=Object.keys(d[0]),N=b.map(function(){return"left"});else if(Array.isArray(f)&&Ca(f[0])==="object")for(b=f.map(function(G){return G.name}),_=f.map(function(G){return G.prompt||G.name||""}),N=f.map(function(G){return G.align||"left"}),m=0;m<f.length;m+=1)C[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(_=b=f,N=b.map(function(){return"left"}));if(F||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<b.length;m+=1){for(E[y=b[m]]=d.map(function(G){return G[y]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(_[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=E[y],this.setFont(void 0,"normal"),g=0;g<w.length;g+=1)D.push(this.getTextDimensions(w[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[y]=Math.max.apply(null,D)+R+R,D=[]}if(L){var Z={};for(m=0;m<b.length;m+=1)Z[b[m]]={},Z[b[m]].text=_[m],Z[b[m]].align=N[m];var re=o.call(this,Z,C);P=b.map(function(G){return new i(c,u,C[G],re,Z[G].text,void 0,Z[G].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var z=f.reduce(function(G,Q){return G[Q.name]=Q.align,G},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var q=o.call(this,d[m],C);for(g=0;g<b.length;g+=1){var B=d[m][b[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:g,data:B},this),s.call(this,new i(c,u,C[b[g]],q,B,m+2,z[b[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(m){var w=c[m];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,w){return Math.max(m,w)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(w)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Hr.API);var fne={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hne=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xO=dne(hne),pne=[100,200,300,400,500,600,700,800,900],qRe=dne(pne);function wO(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return fne[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof xO[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function QW(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var WRe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ez={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tz(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function zRe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},WRe,r.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(a[(i=wO(t[o])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){s=e[i.family];break}if(!(s=s||e[n]))throw new Error("Could not find a font-family for the rule '"+tz(i)+"' and default family '"+n+"'.");if(s=function(c,u){if(u[c])return u[c];var d=xO[c],f=d<=xO.normal?-1:1,h=QW(u,hne,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(i.stretch,s),s=function(c,u){if(u[c])return u[c];for(var d=fne[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,s),!(s=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=qRe[c],f=QW(u,pne,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+tz(i)+"'.");return s}function rz(e){return e.trimLeft()}function VRe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function HRe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var I_,nz,az,nT=["times"];(function(e){var t,r,n,a,i,s,o,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new s,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new s,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=O;Object.defineProperty(this,"pdf",{get:function(){return J}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Ce){X=!!Ce}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Ce){ne=!!Ce}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(Ce){isNaN(Ce)||(ie=Ce)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(Ce){isNaN(Ce)||(oe=Ce)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ce){var ve;typeof Ce=="number"?ve=[Ce,Ce,Ce,Ce]:((ve=new Array(4))[0]=Ce[0],ve[1]=Ce.length>=2?Ce[1]:ve[0],ve[2]=Ce.length>=3?Ce[2]:ve[0],ve[3]=Ce.length>=4?Ce[3]:ve[1]),u.margin=ve}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(Ce){de=Ce}});var V=0;Object.defineProperty(this,"lastBreak",{get:function(){return V},set:function(Ce){V=Ce}});var se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return se},set:function(Ce){se=Ce}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ce){Ce instanceof d&&(u=Ce)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ce){u.path=Ce}});var fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return fe},set:function(Ce){fe=Ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ce){var ve;ve=h(Ce),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ce){var ve=h(Ce);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ce){["butt","round","square"].indexOf(Ce)!==-1&&(this.ctx.lineCap=Ce,this.pdf.setLineCap(Ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ce){isNaN(Ce)||(this.ctx.lineWidth=Ce,this.pdf.setLineWidth(Ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ce){["bevel","round","miter"].indexOf(Ce)!==-1&&(this.ctx.lineJoin=Ce,this.pdf.setLineJoin(Ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ce){isNaN(Ce)||(this.ctx.miterLimit=Ce,this.pdf.setMiterLimit(Ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ce){this.ctx.textBaseline=Ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ce){["right","end","center","left","start"].indexOf(Ce)!==-1&&(this.ctx.textAlign=Ce)}});var te=null;function ke(Ce,ve){if(te===null){var Ge=function(pt){var it=[];return Object.keys(pt).forEach(function(Le){pt[Le].forEach(function(ut){var he=null;switch(ut){case"bold":he={family:Le,weight:"bold"};break;case"italic":he={family:Le,style:"italic"};break;case"bolditalic":he={family:Le,weight:"bold",style:"italic"};break;case"":case"normal":he={family:Le}}he!==null&&(he.ref={name:Le,style:ut},it.push(he))})}),it}(Ce.getFontList());te=function(pt){for(var it={},Le=0;Le<pt.length;++Le){var ut=wO(pt[Le]),he=ut.family,Ee=ut.stretch,Me=ut.style,at=ut.weight;it[he]=it[he]||{},it[he][Ee]=it[he][Ee]||{},it[he][Ee][Me]=it[he][Ee][Me]||{},it[he][Ee][Me][at]=ut}return it}(Ge.concat(ve))}return te}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(Ce){te=null,Re=Ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ce){var ve;if(this.ctx.font=Ce,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ce))!==null){var Ge=ve[1];ve[2];var pt=ve[3],it=ve[4];ve[5];var Le=ve[6],ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(ut==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:ut==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var he=function(Nt){var St,At,dn=[],Nr=Nt.trim();if(Nr==="")return nT;if(Nr in ez)return[ez[Nr]];for(;Nr!=="";){switch(At=null,St=(Nr=rz(Nr)).charAt(0)){case'"':case"'":At=VRe(Nr.substring(1),St);break;default:At=HRe(Nr)}if(At===null||(dn.push(At[0]),(Nr=rz(At[1]))!==""&&Nr.charAt(0)!==","))return nT;Nr=Nr.replace(/^,/,"")}return dn}(Le);if(this.fontFaces){var Ee=zRe(ke(this.pdf,this.fontFaces),he.map(function(Nt){return{family:Nt,stretch:"normal",weight:pt,style:Ge}}));this.pdf.setFont(Ee.ref.name,Ee.ref.style)}else{var Me="";(pt==="bold"||parseInt(pt,10)>=700||Ge==="bold")&&(Me="bold"),Ge==="italic"&&(Me+="italic"),Me.length===0&&(Me="normal");for(var at="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<he.length;dt++){if(this.pdf.internal.getFont(he[dt],Me,{noFallback:!0,disableWarning:!0})!==void 0){at=he[dt];break}if(Me==="bolditalic"&&this.pdf.internal.getFont(he[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=he[dt],Me="bold";else if(this.pdf.internal.getFont(he[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=he[dt],Me="normal";break}}if(at===""){for(var Xe=0;Xe<he.length;Xe++)if(ct[he[Xe]]){at=ct[he[Xe]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ce){this.ctx.globalCompositeOperation=Ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ce){this.ctx.globalAlpha=Ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ce){this.ctx.lineDashOffset=Ce,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ce){this.ctx.lineDash=Ce,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ce){this.ctx.ignoreClearRect=!!Ce}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){E.call(this,"fill",!1)},f.prototype.stroke=function(){E.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,J){if(isNaN(O)||isNaN(J))throw Ra.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new s(O,J));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(O,J)},f.prototype.closePath=function(){var O=new s(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Ca(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){O=new s(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(O.x,O.y)},f.prototype.lineTo=function(O,J){if(isNaN(O)||isNaN(J))throw Ra.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new s(O,J));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new s(X.x,X.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,J,X,ne){if(isNaN(X)||isNaN(ne)||isNaN(O)||isNaN(J))throw Ra.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new s(X,ne)),oe=this.ctx.transform.applyToPoint(new s(O,J));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new s(ie.x,ie.y)},f.prototype.bezierCurveTo=function(O,J,X,ne,ie,oe){if(isNaN(ie)||isNaN(oe)||isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne))throw Ra.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new s(ie,oe)),V=this.ctx.transform.applyToPoint(new s(O,J)),se=this.ctx.transform.applyToPoint(new s(X,ne));this.path.push({type:"bct",x1:V.x,y1:V.y,x2:se.x,y2:se.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},f.prototype.arc=function(O,J,X,ne,ie,oe){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne)||isNaN(ie))throw Ra.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new s(O,J));O=de.x,J=de.y;var V=this.ctx.transform.applyToPoint(new s(0,X)),se=this.ctx.transform.applyToPoint(new s(0,0));X=Math.sqrt(Math.pow(V.x-se.x,2)+Math.pow(V.y-se.y,2))}Math.abs(ie-ne)>=2*Math.PI&&(ne=0,ie=2*Math.PI),this.path.push({type:"arc",x:O,y:J,radius:X,startAngle:ne,endAngle:ie,counterclockwise:oe})},f.prototype.arcTo=function(O,J,X,ne,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,J,X,ne){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne))throw Ra.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,J),this.lineTo(O+X,J),this.lineTo(O+X,J+ne),this.lineTo(O,J+ne),this.lineTo(O,J),this.lineTo(O+X,J),this.lineTo(O,J)},f.prototype.fillRect=function(O,J,X,ne){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne))throw Ra.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,J,X,ne),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(O,J,X,ne){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne))throw Ra.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(O,J,X,ne),this.stroke())},f.prototype.clearRect=function(O,J,X,ne){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne))throw Ra.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,J,X,ne))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(J),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(O){var J,X,ne,ie;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))J=0,X=0,ne=0,ie=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(oe!==null)J=parseInt(oe[1]),X=parseInt(oe[2]),ne=parseInt(oe[3]),ie=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)J=parseInt(oe[1]),X=parseInt(oe[2]),ne=parseInt(oe[3]),ie=parseFloat(oe[4]);else{if(ie=1,typeof O=="string"&&O.charAt(0)!=="#"){var de=new ine(O);O=de.ok?de.toHex():"#000000"}O.length===4?(J=O.substring(1,2),J+=J,X=O.substring(2,3),X+=X,ne=O.substring(3,4),ne+=ne):(J=O.substring(1,3),X=O.substring(3,5),ne=O.substring(5,7)),J=parseInt(J,16),X=parseInt(X,16),ne=parseInt(ne,16)}}return{r:J,g:X,b:ne,a:ie,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,J,X,ne){if(isNaN(J)||isNaN(X)||typeof O!="string")throw Ra.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!m.call(this)){var ie=q(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:O,x:J,y:X,scale:oe,angle:ie,align:this.textAlign,maxWidth:ne})}},f.prototype.strokeText=function(O,J,X,ne){if(isNaN(J)||isNaN(X)||typeof O!="string")throw Ra.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){ne=isNaN(ne)?void 0:ne;var ie=q(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:O,x:J,y:X,scale:oe,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ne})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Ra.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,X=this.pdf.internal.scaleFactor,ne=J.internal.getFontSize(),ie=J.getStringUnitWidth(O)*ne/J.internal.scaleFactor,oe=function(de){var V=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return V}}),this};return new oe({width:ie*=Math.round(96*X/72*1e4)/1e4})},f.prototype.scale=function(O,J){if(isNaN(O)||isNaN(J))throw Ra.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(O,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.rotate=function(O){if(isNaN(O))throw Ra.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.translate=function(O,J){if(isNaN(O)||isNaN(J))throw Ra.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,O,J);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.transform=function(O,J,X,ne,ie,oe){if(isNaN(O)||isNaN(J)||isNaN(X)||isNaN(ne)||isNaN(ie)||isNaN(oe))throw Ra.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new c(O,J,X,ne,ie,oe);this.ctx.transform=this.ctx.transform.multiply(de)},f.prototype.setTransform=function(O,J,X,ne,ie,oe){O=isNaN(O)?1:O,J=isNaN(J)?0:J,X=isNaN(X)?0:X,ne=isNaN(ne)?1:ne,ie=isNaN(ie)?0:ie,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(O,J,X,ne,ie,oe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,J,X,ne,ie,oe,de,V,se){var fe=this.pdf.getImageProperties(O),te=1,ke=1,Re=1,Ce=1;ne!==void 0&&V!==void 0&&(Re=V/ne,Ce=se/ie,te=fe.width/ne*V/ne,ke=fe.height/ie*se/ie),oe===void 0&&(oe=J,de=X,J=0,X=0),ne!==void 0&&V===void 0&&(V=ne,se=ie),ne===void 0&&V===void 0&&(V=fe.width,se=fe.height);for(var ve,Ge=this.ctx.transform.decompose(),pt=q(Ge.rotate.shx),it=new c,Le=(it=(it=(it=it.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new o(oe-J*Re,de-X*Ce,ne*te,ie*ke)),ut=y.call(this,Le),he=[],Ee=0;Ee<ut.length;Ee+=1)he.indexOf(ut[Ee])===-1&&he.push(ut[Ee]);if(N(he),this.autoPaging)for(var Me=he[0],at=he[he.length-1],ct=Me;ct<at+1;ct++){this.pdf.setPage(ct);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=ct===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=ct===1?0:Nt+(ct-2)*St;if(this.ctx.clip_path.length!==0){var dn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ve,this.posX+this.margin[3],-At+Xe+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=dn}var Nr=JSON.parse(JSON.stringify(Le));Nr=_([Nr],this.posX+this.margin[3],-At+Xe+this.ctx.prevPageLastElemOffset)[0];var mt=(ct>Me||ct<at)&&g.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,St,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Nr.x,Nr.y,Nr.w,Nr.h,null,null,pt),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,pt)};var y=function(O,J,X){var ne=[];J=J||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ne.push(Math.floor((O.y+ie)/X)+1);break;case"arc":ne.push(Math.floor((O.y+ie-O.radius)/X)+1),ne.push(Math.floor((O.y+ie+O.radius)/X)+1);break;case"qct":var oe=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ne.push(Math.floor((oe.y+ie)/X)+1),ne.push(Math.floor((oe.y+oe.h+ie)/X)+1);break;case"bct":var de=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ne.push(Math.floor((de.y+ie)/X)+1),ne.push(Math.floor((de.y+de.h+ie)/X)+1);break;case"rect":ne.push(Math.floor((O.y+ie)/X)+1),ne.push(Math.floor((O.y+O.h+ie)/X)+1)}for(var V=0;V<ne.length;V+=1)for(;this.pdf.internal.getNumberOfPages()<ne[V];)b.call(this);return ne},b=function(){var O=this.fillStyle,J=this.strokeStyle,X=this.font,ne=this.lineCap,ie=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=J,this.font=X,this.lineCap=ne,this.lineWidth=ie,this.lineJoin=oe},_=function(O,J,X){for(var ne=0;ne<O.length;ne++)switch(O[ne].type){case"bct":O[ne].x2+=J,O[ne].y2+=X;case"qct":O[ne].x1+=J,O[ne].y1+=X;case"mt":case"lt":case"arc":default:O[ne].x+=J,O[ne].y+=X}return O},N=function(O){return O.sort(function(J,X){return J-X})},E=function(O,J){for(var X,ne,ie=this.fillStyle,oe=this.strokeStyle,de=this.lineCap,V=this.lineWidth,se=Math.abs(V*this.ctx.transform.scaleX),fe=this.lineJoin,te=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Re=[],Ce=0;Ce<ke.length;Ce++)if(ke[Ce].x!==void 0)for(var ve=y.call(this,ke[Ce]),Ge=0;Ge<ve.length;Ge+=1)Re.indexOf(ve[Ge])===-1&&Re.push(ve[Ge]);for(var pt=0;pt<Re.length;pt++)for(;this.pdf.internal.getNumberOfPages()<Re[pt];)b.call(this);if(N(Re),this.autoPaging)for(var it=Re[0],Le=Re[Re.length-1],ut=it;ut<Le+1;ut++){this.pdf.setPage(ut),this.fillStyle=ie,this.strokeStyle=oe,this.lineCap=de,this.lineWidth=se,this.lineJoin=fe;var he=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ee=ut===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=ut===1?0:Me+(ut-2)*at;if(this.ctx.clip_path.length!==0){var dt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(X,this.posX+this.margin[3],-ct+Ee+this.ctx.prevPageLastElemOffset),C.call(this,O,!0),this.path=dt}if(ne=JSON.parse(JSON.stringify(te)),this.path=_(ne,this.posX+this.margin[3],-ct+Ee+this.ctx.prevPageLastElemOffset),J===!1||ut===0){var Xe=(ut>it||ut<Le)&&g.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],he,at,null).clip().discardPath()),C.call(this,O,J),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=V}else this.lineWidth=se,C.call(this,O,J),this.lineWidth=V;this.path=te},C=function(O,J){if((O!=="stroke"||J||!w.call(this))&&(O==="stroke"||J||!m.call(this))){for(var X,ne,ie=[],oe=this.path,de=0;de<oe.length;de++){var V=oe[de];switch(V.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:V,deltas:[],abs:[]});break;case"lt":var se=ie.length;if(oe[de-1]&&!isNaN(oe[de-1].x)&&(X=[V.x-oe[de-1].x,V.y-oe[de-1].y],se>0)){for(;se>=0;se--)if(ie[se-1].close!==!0&&ie[se-1].begin!==!0){ie[se-1].deltas.push(X),ie[se-1].abs.push(V);break}}break;case"bct":X=[V.x1-oe[de-1].x,V.y1-oe[de-1].y,V.x2-oe[de-1].x,V.y2-oe[de-1].y,V.x-oe[de-1].x,V.y-oe[de-1].y],ie[ie.length-1].deltas.push(X);break;case"qct":var fe=oe[de-1].x+2/3*(V.x1-oe[de-1].x),te=oe[de-1].y+2/3*(V.y1-oe[de-1].y),ke=V.x+2/3*(V.x1-V.x),Re=V.y+2/3*(V.y1-V.y),Ce=V.x,ve=V.y;X=[fe-oe[de-1].x,te-oe[de-1].y,ke-oe[de-1].x,Re-oe[de-1].y,Ce-oe[de-1].x,ve-oe[de-1].y],ie[ie.length-1].deltas.push(X);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(V)}}ne=J?null:O==="stroke"?"stroke":"fill";for(var Ge=!1,pt=0;pt<ie.length;pt++)if(ie[pt].arc)for(var it=ie[pt].abs,Le=0;Le<it.length;Le++){var ut=it[Le];ut.type==="arc"?F.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,J,!Ge):j.call(this,ut.x,ut.y),Ge=!0}else if(ie[pt].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(ie[pt].begin!==!0){var he=ie[pt].start.x,Ee=ie[pt].start.y;Y.call(this,ie[pt].deltas,he,Ee),Ge=!0}ne&&L.call(this,ne),J&&W.call(this)}},D=function(O){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-X;case"top":return O+J-X;case"hanging":return O+J-2*X;case"middle":return O+J/2-X;case"ideographic":return O;case"alphabetic":default:return O}},P=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(J,X){this.colorStops.push([J,X])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(O,J,X,ne,ie,oe,de,V,se){for(var fe=re.call(this,X,ne,ie,oe),te=0;te<fe.length;te++){var ke=fe[te];te===0&&(se?T.call(this,ke.x1+O,ke.y1+J):j.call(this,ke.x1+O,ke.y1+J)),Z.call(this,O,J,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}V?W.call(this):L.call(this,de)},L=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(O,J){this.pdf.internal.out(r(O)+" "+n(J)+" m")},R=function(O){var J;switch(O.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var X=this.pdf.getTextDimensions(O.text),ne=D.call(this,O.y),ie=P.call(this,ne)-X.h,oe=this.ctx.transform.applyToPoint(new s(O.x,ne)),de=this.ctx.transform.decompose(),V=new c;V=(V=(V=V.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var se,fe,te,ke=this.ctx.transform.applyToRectangle(new o(O.x,ne,X.w,X.h)),Re=V.applyToRectangle(new o(O.x,ie,X.w,X.h)),Ce=y.call(this,Re),ve=[],Ge=0;Ge<Ce.length;Ge+=1)ve.indexOf(Ce[Ge])===-1&&ve.push(Ce[Ge]);if(N(ve),this.autoPaging)for(var pt=ve[0],it=ve[ve.length-1],Le=pt;Le<it+1;Le++){this.pdf.setPage(Le);var ut=Le===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[2],Me=Ee-this.margin[0],at=this.pdf.internal.pageSize.width-this.margin[1],ct=at-this.margin[3],dt=Le===1?0:he+(Le-2)*Me;if(this.ctx.clip_path.length!==0){var Xe=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(se,this.posX+this.margin[3],-1*dt+ut),C.call(this,"fill",!0),this.path=Xe}var Nt=_([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-dt+ut+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*O.scale),te=this.lineWidth,this.lineWidth=te*O.scale);var St=this.autoPaging!=="text";if(St||Nt.y+Nt.h<=Ee){if(St||Nt.y>=ut&&Nt.x<=at){var At=St?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||at-Nt.x)[0],dn=_([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-dt+ut+this.ctx.prevPageLastElemOffset)[0],Nr=St&&(Le>pt||Le<it)&&g.call(this);Nr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Me,null).clip().discardPath()),this.pdf.text(At,dn.x,dn.y,{angle:O.angle,align:J,renderingMode:O.renderingMode}),Nr&&this.pdf.restoreGraphicsState()}}else Nt.y<Ee&&(this.ctx.prevPageLastElemOffset+=Ee-Nt.y);O.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=te)}else O.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*O.scale),te=this.lineWidth,this.lineWidth=te*O.scale),this.pdf.text(O.text,oe.x+this.posX,oe.y+this.posY,{angle:O.angle,align:J,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=te)},j=function(O,J,X,ne){X=X||0,ne=ne||0,this.pdf.internal.out(r(O+X)+" "+n(J+ne)+" l")},Y=function(O,J,X){return this.pdf.lines(O,J,X,null,null)},Z=function(O,J,X,ne,ie,oe,de,V){this.pdf.internal.out([t(a(X+O)),t(i(ne+J)),t(a(ie+O)),t(i(oe+J)),t(a(de+O)),t(i(V+J)),"c"].join(" "))},re=function(O,J,X,ne){for(var ie=2*Math.PI,oe=Math.PI/2;J>X;)J-=ie;var de=Math.abs(X-J);de<ie&&ne&&(de=ie-de);for(var V=[],se=ne?-1:1,fe=J;de>1e-5;){var te=fe+se*Math.min(de,oe);V.push(z.call(this,O,fe,te)),de-=Math.abs(te-fe),fe=te}return V},z=function(O,J,X){var ne=(X-J)/2,ie=O*Math.cos(ne),oe=O*Math.sin(ne),de=ie,V=-oe,se=de*de+V*V,fe=se+de*ie+V*oe,te=4/3*(Math.sqrt(2*se*fe)-fe)/(de*oe-V*ie),ke=de-te*V,Re=V+te*de,Ce=ke,ve=-Re,Ge=ne+J,pt=Math.cos(Ge),it=Math.sin(Ge);return{x1:O*Math.cos(J),y1:O*Math.sin(J),x2:ke*pt-Re*it,y2:ke*it+Re*pt,x3:Ce*pt-ve*it,y3:Ce*it+ve*pt,x4:O*Math.cos(X),y4:O*Math.sin(X)}},q=function(O){return 180*O/Math.PI},B=function(O,J,X,ne,ie,oe){var de=O+.5*(X-O),V=J+.5*(ne-J),se=ie+.5*(X-ie),fe=oe+.5*(ne-oe),te=Math.min(O,ie,de,se),ke=Math.max(O,ie,de,se),Re=Math.min(J,oe,V,fe),Ce=Math.max(J,oe,V,fe);return new o(te,Re,ke-te,Ce-Re)},G=function(O,J,X,ne,ie,oe,de,V){var se,fe,te,ke,Re,Ce,ve,Ge,pt,it,Le,ut,he,Ee,Me=X-O,at=ne-J,ct=ie-X,dt=oe-ne,Xe=de-ie,Nt=V-oe;for(fe=0;fe<41;fe++)pt=(ve=(te=O+(se=fe/40)*Me)+se*((Re=X+se*ct)-te))+se*(Re+se*(ie+se*Xe-Re)-ve),it=(Ge=(ke=J+se*at)+se*((Ce=ne+se*dt)-ke))+se*(Ce+se*(oe+se*Nt-Ce)-Ge),fe==0?(Le=pt,ut=it,he=pt,Ee=it):(Le=Math.min(Le,pt),ut=Math.min(ut,it),he=Math.max(he,pt),Ee=Math.max(Ee,it));return new o(Math.round(Le),Math.round(ut),Math.round(he-Le),Math.round(Ee-ut))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,J,X=(O=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:J}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(Hr.API),function(e){var t=function(i){var s,o,c,u,d,f,h,m,w,g;for(o=[],c=0,u=(i+=s="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(d=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(g=d%85))/85)-(w=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,m+33,w+33,g+33)):o.push(122);return function(y,b){for(var _=b;_>0;_--)y.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var s,o,c,u,d,f=String,h="length",m=255,w="charCodeAt",g="slice",y="replace";for(i[g](-2),i=i[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],u=0,d=(i+=s="uuuuu"[g](i[h]%5||5))[h];d>u;u+=5)o=52200625*(i[w](u)-33)+614125*(i[w](u+1)-33)+7225*(i[w](u+2)-33)+85*(i[w](u+3)-33)+(i[w](u+4)-33),c.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(b,_){for(var N=_;N>0;N--)b.pop()}(c,s[h]),f.fromCharCode.apply(f,c)},n=function(i){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),s.test(i)===!1)return"";for(var o="",c=0;c<i.length;c+=2)o+=String.fromCharCode("0x"+(i[c]+i[c+1]));return o},a=function(i){for(var s=new Uint8Array(i.length),o=i.length;o--;)s[o]=i.charCodeAt(o);return i=(s=pO(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,s){var o=0,c=i||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Hr.API),function(e){e.loadFile=function(t,r,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,m=function(w){var g=w.length,y=[],b=String.fromCharCode;for(h=0;h<g;h+=1)y.push(b(255&w.charCodeAt(h)));return y.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,s)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(Hr.API),function(e){function t(){return(en.html2canvas?Promise.resolve(en.html2canvas):uf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function r(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):uf(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var o=Ca(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(s,o){var c=document.createElement(s);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},i=function s(o){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,s,1,[s])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(s,o){return s.__proto__=o||i.prototype,s},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},i.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],w=m.src.find(function(g){return g.format==="truetype"});w&&c.addFont(w.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(s,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},i.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},i.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},i.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(s){if(n(s)!=="object")return this;var o=Object.keys(s||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(s,o){return this.then(function(){var c=s in i.template.prop?this.prop[s]:this.opt[s];return o?o(c):c})},i.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},i.prototype.setPageSize=function(s){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||Hr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},i.prototype.setProgress=function(s,o,c,u){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(s,o,c,u){return this.setProgress(s?this.progress.val+s:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(s,o){var c=this;return this.thenCore(s,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(s,o,c){c=c||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=c.call(u,s,o);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},i.prototype.thenList=function(s){var o=this;return s.forEach(function(c){o=o.thenCore(c)}),o},i.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return i.convert(o,this)},i.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},i.prototype.error=function(s){return this.then(function(){throw new Error(s)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Hr.getPageSize=function(s,o,c){if(Ca(s)==="object"){var u=s;s=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var m,w=0,g=0;if(h.hasOwnProperty(f))w=h[f][1]/d,g=h[f][0]/d;else try{w=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(s==="p"||s==="portrait")s="p",g>w&&(m=g,g=w,w=m);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",w>g&&(m=g,g=w,w=m)}return{width:g,height:w,unit:o,k:d,orientation:s}},e.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(wO):null;var c=new i(o);return o.worker?c:c.from(s).doCallback()}}(Hr.API),Hr.API.addJS=function(e){return az=e,this.internal.events.subscribe("postPutResources",function(){I_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(I_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),nz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+az+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){I_!==void 0&&nz!==void 0&&this.internal.out("/Names <</JavaScript "+I_+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var c=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Hr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,s,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),w=f.length,g={width:0,height:0,numcomponents:1},y=4;y<w;y+=2){if(y+=m,t.indexOf(f.charCodeAt(y+1))!==-1){h=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),g={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:h,numcomponents:f.charCodeAt(y+9)};break}m=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Hr.API);var Iv,R_,iz,sz,oz,GRe=function(){var e,t,r;function n(i){var s,o,c,u,d,f,h,m,w,g,y,b,_,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(s=this.readUInt32(),w=(function(){var E,C;for(C=[],E=0;E<4;++E)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,s-=4),i=(f!=null?f.data:void 0)||this.imgData,b=0;0<=s?b<s:b>s;0<=s?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(_=0;0<=g?_<g:_>g;0<=g?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":h=(y=this.read(s)).indexOf(0),m=String.fromCharCode.apply(String,y.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var s,o;for(o=[],s=0;0<=i?s<i:s>i;0<=i?++s:--s)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,h,m,w){var g,y,b,_,N,E,C,D,P,F,L,W,T,R,j,Y,Z,re,z,q,B,G=Math.ceil((u.width-f)/m),Q=Math.ceil((u.height-h)/w),O=u.width==G&&u.height==Q;for(R=s*G,W=O?o:new Uint8Array(R*Q),E=i.length,T=0,y=0;T<Q&&c<E;){switch(i[c++]){case 0:for(_=Z=0;Z<R;_=Z+=1)W[y++]=i[c++];break;case 1:for(_=re=0;re<R;_=re+=1)g=i[c++],N=_<s?0:W[y-s],W[y++]=(g+N)%256;break;case 2:for(_=z=0;z<R;_=z+=1)g=i[c++],b=(_-_%s)/s,j=T&&W[(T-1)*R+b*s+_%s],W[y++]=(j+g)%256;break;case 3:for(_=q=0;q<R;_=q+=1)g=i[c++],b=(_-_%s)/s,N=_<s?0:W[y-s],j=T&&W[(T-1)*R+b*s+_%s],W[y++]=(g+Math.floor((N+j)/2))%256;break;case 4:for(_=B=0;B<R;_=B+=1)g=i[c++],b=(_-_%s)/s,N=_<s?0:W[y-s],T===0?j=Y=0:(j=W[(T-1)*R+b*s+_%s],Y=b&&W[(T-1)*R+(b-1)*s+_%s]),C=N+j-Y,D=Math.abs(C-N),F=Math.abs(C-j),L=Math.abs(C-Y),P=D<=F&&D<=L?N:F<=L?j:Y,W[y++]=(g+P)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var J=((h+T*w)*u.width+f)*s,X=T*R;for(_=0;_<G;_+=1){for(var ne=0;ne<s;ne+=1)o[J++]=W[X++];J+=(m-1)*s}}T++}}return i=ARe(i),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var i,s,o,c,u,d,f,h,m;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,i=0,s=f=0,h=o.length;f<h;s=f+=3)u[c++]=o[s],u[c++]=o[s+1],u[c++]=o[s+2],u[c++]=(m=d[i++])!=null?m:255;return u},n.prototype.copyToImageData=function(i,s){var o,c,u,d,f,h,m,w,g,y,b;if(c=this.colors,g=null,o=this.hasAlphaChannel,this.palette.length&&(g=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,o=!0),w=(u=i.data||i).length,f=g||s,d=h=0,c===1)for(;d<w;)m=g?4*s[d/4]:h,y=f[m++],u[d++]=y,u[d++]=y,u[d++]=y,u[d++]=o?f[m++]:255,h=m;else for(;d<w;)m=g?4*s[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=o?f[m++]:255,h=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(en)==="[object Window]"){try{t=en.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var s;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(s=new Image).src=t.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var s,o,c,u,d,f,h,m;if(this.animation){for(m=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)s=h[o],c=i.createImageData(s.width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(c,u),s.imageData=c,m.push(s.image=e(c));return m}},n.prototype.renderFrame=function(i,s){var o,c,u;return o=(c=this.animation.frames)[s],u=c[s-1],s===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var s,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(s=function(){var m,w;if(m=o++%u,w=c[m],h.renderFrame(i,m),u>1&&o/u<d)return h.animation._timeout=setTimeout(s,w.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var s,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,s=i.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function YRe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;i&&(o=t,c=s,t+=3*s);var u=!0,d=[],f=0,h=null,m=0,w=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,w=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&g)==0&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,E=e[t++],C=E>>6&1,D=1<<(7&E)+1,P=o,F=c,L=!1;E>>7&&(L=!0,P=t,F=D,t+=3*D);var W=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}d.push({x:y,y:b,width:_,height:N,has_local_palette:L,palette_offset:P,palette_size:F,data_offset:W,data_length:t-W,transparent_index:h,interlaced:!!C,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return w},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,j){var Y=this.frameInfo(R),Z=Y.width*Y.height,re=new Uint8Array(Z);lz(e,Y.data_offset,re,Z);var z=Y.palette_offset,q=Y.transparent_index;q===null&&(q=256);var B=Y.width,G=r-B,Q=B,O=4*(Y.y*r+Y.x),J=4*((Y.y+Y.height)*r+Y.x),X=O,ne=4*G;Y.interlaced===!0&&(ne+=4*r*7);for(var ie=8,oe=0,de=re.length;oe<de;++oe){var V=re[oe];if(Q===0&&(Q=B,(X+=ne)>=J&&(ne=4*G+4*r*(ie-1),X=O+(B+G)*(ie<<1),ie>>=1)),V===q)X+=4;else{var se=e[z+3*V],fe=e[z+3*V+1],te=e[z+3*V+2];j[X++]=te,j[X++]=fe,j[X++]=se,j[X++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(R,j){var Y=this.frameInfo(R),Z=Y.width*Y.height,re=new Uint8Array(Z);lz(e,Y.data_offset,re,Z);var z=Y.palette_offset,q=Y.transparent_index;q===null&&(q=256);var B=Y.width,G=r-B,Q=B,O=4*(Y.y*r+Y.x),J=4*((Y.y+Y.height)*r+Y.x),X=O,ne=4*G;Y.interlaced===!0&&(ne+=4*r*7);for(var ie=8,oe=0,de=re.length;oe<de;++oe){var V=re[oe];if(Q===0&&(Q=B,(X+=ne)>=J&&(ne=4*G+4*r*(ie-1),X=O+(B+G)*(ie<<1),ie>>=1)),V===q)X+=4;else{var se=e[z+3*V],fe=e[z+3*V+1],te=e[z+3*V+2];j[X++]=se,j[X++]=fe,j[X++]=te,j[X++]=255}--Q}}}function lz(e,t,r,n){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,m=e[t++],w=new Int32Array(4096),g=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<c)break;var y=f&u;if(f>>=c,d-=c,y!==i){if(y===s)break;for(var b=y<o?y:g,_=0,N=b;N>i;)N=w[N]>>8,++_;var E=N;if(h+_+(b!==y?1:0)>n)return void Ra.log("Warning, gif stream longer than expected.");r[h++]=E;var C=h+=_;for(b!==y&&(r[h++]=E),N=b;_--;)N=w[N],r[--C]=255&N,N>>=8;g!==null&&o<4096&&(w[o++]=g<<8|E,o>=u+1&&c<12&&(++c,u=u<<1|1)),g=y}else o=s+1,u=(1<<(c=a+1))-1,g=null}return h!==n&&Ra.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function aT(e){var t,r,n,a,i,s=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),w=new Array(64),g=[],y=0,b=7,_=new Array(64),N=new Array(64),E=new Array(64),C=new Array(256),D=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(O,J){for(var X=0,ne=0,ie=new Array,oe=1;oe<=16;oe++){for(var de=1;de<=O[oe];de++)ie[J[ne]]=[],ie[J[ne]][0]=X,ie[J[ne]][1]=oe,ne++,X++;X*=2}return ie}function z(O){for(var J=O[0],X=O[1]-1;X>=0;)J&1<<X&&(y|=1<<b),X--,--b<0&&(y==255?(q(255),q(0)):q(y),b=7,y=0)}function q(O){g.push(O)}function B(O){q(O>>8&255),q(255&O)}function G(O,J,X,ne,ie){for(var oe,de=ie[0],V=ie[240],se=function(it,Le){var ut,he,Ee,Me,at,ct,dt,Xe,Nt,St,At=0;for(Nt=0;Nt<8;++Nt){ut=it[At],he=it[At+1],Ee=it[At+2],Me=it[At+3],at=it[At+4],ct=it[At+5],dt=it[At+6];var dn=ut+(Xe=it[At+7]),Nr=ut-Xe,mt=he+dt,Dt=he-dt,yr=Ee+ct,Gr=Ee-ct,fr=Me+at,Or=Me-at,cr=dn+fr,xn=dn-fr,Sn=mt+yr,Nn=mt-yr;it[At]=cr+Sn,it[At+4]=cr-Sn;var Pr=.707106781*(Nn+xn);it[At+2]=xn+Pr,it[At+6]=xn-Pr;var hn=.382683433*((cr=Or+Gr)-(Nn=Dt+Nr)),hs=.5411961*cr+hn,Gn=1.306562965*Nn+hn,bi=.707106781*(Sn=Gr+Dt),ot=Nr+bi,yt=Nr-bi;it[At+5]=yt+hs,it[At+3]=yt-hs,it[At+1]=ot+Gn,it[At+7]=ot-Gn,At+=8}for(At=0,Nt=0;Nt<8;++Nt){ut=it[At],he=it[At+8],Ee=it[At+16],Me=it[At+24],at=it[At+32],ct=it[At+40],dt=it[At+48];var Mr=ut+(Xe=it[At+56]),ta=ut-Xe,bt=he+dt,vt=he-dt,Qt=Ee+ct,ce=Ee-ct,we=Me+at,xe=Me-at,_e=Mr+we,Ne=Mr-we,Se=bt+Qt,Ve=bt-Qt;it[At]=_e+Se,it[At+32]=_e-Se;var ft=.707106781*(Ve+Ne);it[At+16]=Ne+ft,it[At+48]=Ne-ft;var et=.382683433*((_e=xe+ce)-(Ve=vt+ta)),st=.5411961*_e+et,Je=1.306562965*Ve+et,Ft=.707106781*(Se=ce+vt),Jt=ta+Ft,lr=ta-Ft;it[At+40]=lr+st,it[At+24]=lr-st,it[At+8]=Jt+Je,it[At+56]=Jt-Je,At++}for(Nt=0;Nt<64;++Nt)St=it[Nt]*Le[Nt],m[Nt]=St>0?St+.5|0:St-.5|0;return m}(O,J),fe=0;fe<64;++fe)w[P[fe]]=se[fe];var te=w[0]-X;X=w[0],te==0?z(ne[0]):(z(ne[h[oe=32767+te]]),z(f[oe]));for(var ke=63;ke>0&&w[ke]==0;)ke--;if(ke==0)return z(de),X;for(var Re,Ce=1;Ce<=ke;){for(var ve=Ce;w[Ce]==0&&Ce<=ke;)++Ce;var Ge=Ce-ve;if(Ge>=16){Re=Ge>>4;for(var pt=1;pt<=Re;++pt)z(V);Ge&=15}oe=32767+w[Ce],z(ie[(Ge<<4)+h[oe]]),z(f[oe]),Ce++}return ke!=63&&z(de),X}function Q(O){O=Math.min(Math.max(O,1),100),i!=O&&(function(J){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ie=s((X[ne]*J+50)/100);ie=Math.min(Math.max(ie,1),255),o[P[ne]]=ie}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var V=s((oe[de]*J+50)/100);V=Math.min(Math.max(V,1),255),c[P[de]]=V}for(var se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],fe=0,te=0;te<8;te++)for(var ke=0;ke<8;ke++)u[fe]=1/(o[P[fe]]*se[te]*se[ke]*8),d[fe]=1/(c[P[fe]]*se[te]*se[ke]*8),fe++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,J){J&&Q(J),g=new Array,y=0,b=7,B(65496),B(65504),B(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),B(1),B(1),q(0),q(0),function(){B(65499),B(132),q(0);for(var he=0;he<64;he++)q(o[he]);q(1);for(var Ee=0;Ee<64;Ee++)q(c[Ee])}(),function(he,Ee){B(65472),B(17),q(8),B(Ee),B(he),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(O.width,O.height),function(){B(65476),B(418),q(0);for(var he=0;he<16;he++)q(F[he+1]);for(var Ee=0;Ee<=11;Ee++)q(L[Ee]);q(16);for(var Me=0;Me<16;Me++)q(W[Me+1]);for(var at=0;at<=161;at++)q(T[at]);q(1);for(var ct=0;ct<16;ct++)q(R[ct+1]);for(var dt=0;dt<=11;dt++)q(j[dt]);q(17);for(var Xe=0;Xe<16;Xe++)q(Y[Xe+1]);for(var Nt=0;Nt<=161;Nt++)q(Z[Nt])}(),B(65498),B(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var X=0,ne=0,ie=0;y=0,b=7,this.encode.displayName="_encode_";for(var oe,de,V,se,fe,te,ke,Re,Ce,ve=O.data,Ge=O.width,pt=O.height,it=4*Ge,Le=0;Le<pt;){for(oe=0;oe<it;){for(fe=it*Le+oe,ke=-1,Re=0,Ce=0;Ce<64;Ce++)te=fe+(Re=Ce>>3)*it+(ke=4*(7&Ce)),Le+Re>=pt&&(te-=it*(Le+1+Re-pt)),oe+ke>=it&&(te-=oe+ke-it+4),de=ve[te++],V=ve[te++],se=ve[te++],_[Ce]=(D[de]+D[V+256>>0]+D[se+512>>0]>>16)-128,N[Ce]=(D[de+768>>0]+D[V+1024>>0]+D[se+1280>>0]>>16)-128,E[Ce]=(D[de+1280>>0]+D[V+1536>>0]+D[se+1792>>0]>>16)-128;X=G(_,u,X,t,n),ne=G(N,d,ne,r,a),ie=G(E,d,ie,r,a),oe+=32}Le+=8}if(b>=0){var ut=[];ut[1]=b+1,ut[0]=(1<<b+1)-1,z(ut)}return B(65497),new Uint8Array(g)},e=e||50,function(){for(var O=String.fromCharCode,J=0;J<256;J++)C[J]=O(J)}(),t=re(F,L),r=re(R,j),n=re(W,T),a=re(Y,Z),function(){for(var O=1,J=2,X=1;X<=15;X++){for(var ne=O;ne<J;ne++)h[32767+ne]=X,f[32767+ne]=[],f[32767+ne][1]=X,f[32767+ne][0]=ne;for(var ie=-(J-1);ie<=-O;ie++)h[32767+ie]=X,f[32767+ie]=[],f[32767+ie][1]=X,f[32767+ie][0]=J-1+ie;O<<=1,J<<=1}}(),function(){for(var O=0;O<256;O++)D[O]=19595*O,D[O+256>>0]=38470*O,D[O+512>>0]=7471*O+32768,D[O+768>>0]=-11059*O,D[O+1024>>0]=-21709*O,D[O+1280>>0]=32768*O+8421375,D[O+1536>>0]=-27439*O,D[O+1792>>0]=-5329*O}(),Q(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Iu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cz(e){function t(F){if(!F)throw Error("assert :P")}function r(F,L,W){for(var T=0;4>T;T++)if(F[L+T]!=W.charCodeAt(T))return!0;return!1}function n(F,L,W,T,R){for(var j=0;j<R;j++)F[L+j]=W[T+j]}function a(F,L,W,T){for(var R=0;R<T;R++)F[L+R]=W}function i(F){return new Int32Array(F)}function s(F,L){for(var W=[],T=0;T<F;T++)W.push(new L);return W}function o(F,L){var W=[];return function T(R,j,Y){for(var Z=Y[j],re=0;re<Z&&(R.push(Y.length>j+1?[]:new L),!(Y.length<j+1));re++)T(R[re],j+1,Y)}(W,0,F),W}var c=function(){var F=this;function L(k,M){for(var K=1<<M-1>>>0;k&K;)K>>>=1;return K?(k&K-1)+K:k}function W(k,M,K,ae,le){t(!(ae%K));do k[M+(ae-=K)]=le;while(0<ae)}function T(k,M,K,ae,le){if(t(2328>=le),512>=le)var pe=i(512);else if((pe=i(le))==null)return 0;return function(ge,ye,be,Ae,Ue,rt){var nt,Ke,It=ye,_t=1<<be,We=i(16),ze=i(16);for(t(Ue!=0),t(Ae!=null),t(ge!=null),t(0<be),Ke=0;Ke<Ue;++Ke){if(15<Ae[Ke])return 0;++We[Ae[Ke]]}if(We[0]==Ue)return 0;for(ze[1]=0,nt=1;15>nt;++nt){if(We[nt]>1<<nt)return 0;ze[nt+1]=ze[nt]+We[nt]}for(Ke=0;Ke<Ue;++Ke)nt=Ae[Ke],0<Ae[Ke]&&(rt[ze[nt]++]=Ke);if(ze[15]==1)return(Ae=new R).g=0,Ae.value=rt[0],W(ge,It,1,_t,Ae),_t;var Ct,Et=-1,Tt=_t-1,mr=0,ir=1,Lr=1,sr=1<<be;for(Ke=0,nt=1,Ue=2;nt<=be;++nt,Ue<<=1){if(ir+=Lr<<=1,0>(Lr-=We[nt]))return 0;for(;0<We[nt];--We[nt])(Ae=new R).g=nt,Ae.value=rt[Ke++],W(ge,It+mr,Ue,sr,Ae),mr=L(mr,nt)}for(nt=be+1,Ue=2;15>=nt;++nt,Ue<<=1){if(ir+=Lr<<=1,0>(Lr-=We[nt]))return 0;for(;0<We[nt];--We[nt]){if(Ae=new R,(mr&Tt)!=Et){for(It+=sr,Ct=1<<(Et=nt)-be;15>Et&&!(0>=(Ct-=We[Et]));)++Et,Ct<<=1;_t+=sr=1<<(Ct=Et-be),ge[ye+(Et=mr&Tt)].g=Ct+be,ge[ye+Et].value=It-ye-Et}Ae.g=nt-be,Ae.value=rt[Ke++],W(ge,It+(mr>>be),Ue,sr,Ae),mr=L(mr,nt)}}return ir!=2*ze[15]-1?0:_t}(k,M,K,ae,le,pe)}function R(){this.value=this.g=0}function j(){this.value=this.g=0}function Y(){this.G=s(5,R),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(si,j)}function Z(k,M,K,ae){t(k!=null),t(M!=null),t(2147483648>ae),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=M,k.pa=K,k.Jd=M,k.Yc=K+ae,k.Zc=4<=ae?K+ae-4+1:K,oe(k)}function re(k,M){for(var K=0;0<M--;)K|=V(k,128)<<M;return K}function z(k,M){var K=re(k,M);return de(k)?-K:K}function q(k,M,K,ae){var le,pe=0;for(t(k!=null),t(M!=null),t(4294967288>ae),k.Sb=ae,k.Ra=0,k.u=0,k.h=0,4<ae&&(ae=4),le=0;le<ae;++le)pe+=M[K+le]<<8*le;k.Ra=pe,k.bb=ae,k.oa=M,k.pa=K}function B(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<np-8>>>0,++k.bb,k.u-=8;X(k)&&(k.h=1,k.u=0)}function G(k,M){if(t(0<=M),!k.h&&M<=rp){var K=J(k)&tp[M];return k.u+=M,B(k),K}return k.h=1,k.u=0}function Q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(k){return k.Ra>>>(k.u&np-1)>>>0}function X(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>np}function ne(k,M){k.u=M,k.h=X(k)}function ie(k){k.u>=ap&&(t(k.u>=ap),B(k))}function oe(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function de(k){return re(k,1)}function V(k,M){var K=k.Ca;0>k.b&&oe(k);var ae=k.b,le=K*M>>>8,pe=(k.I>>>ae>le)+0;for(pe?(K-=le,k.I-=le+1<<ae>>>0):K=le+1,ae=K,le=0;256<=ae;)le+=8,ae>>=8;return ae=7^le+Vs[ae],k.b-=ae,k.Ca=(K<<ae)-1,pe}function se(k,M,K){k[M+0]=K>>24&255,k[M+1]=K>>16&255,k[M+2]=K>>8&255,k[M+3]=K>>0&255}function fe(k,M){return k[M+0]<<0|k[M+1]<<8}function te(k,M){return fe(k,M)|k[M+2]<<16}function ke(k,M){return fe(k,M)|fe(k,M+2)<<16}function Re(k,M){var K=1<<M;return t(k!=null),t(0<M),k.X=i(K),k.X==null?0:(k.Mb=32-M,k.Xa=M,1)}function Ce(k,M){t(k!=null),t(M!=null),t(k.Xa==M.Xa),n(M.X,0,k.X,0,1<<M.Xa)}function ve(){this.X=[],this.Xa=this.Mb=0}function Ge(k,M,K,ae){t(K!=null),t(ae!=null);var le=K[0],pe=ae[0];return le==0&&(le=(k*pe+M/2)/M),pe==0&&(pe=(M*le+k/2)/k),0>=le||0>=pe?0:(K[0]=le,ae[0]=pe,1)}function pt(k,M){return k+(1<<M)-1>>>M}function it(k,M){return((4278255360&k)+(4278255360&M)>>>0&4278255360)+((16711935&k)+(16711935&M)>>>0&16711935)>>>0}function Le(k,M){F[M]=function(K,ae,le,pe,ge,ye,be){var Ae;for(Ae=0;Ae<ge;++Ae){var Ue=F[k](ye[be+Ae-1],le,pe+Ae);ye[be+Ae]=it(K[ae+Ae],Ue)}}}function ut(){this.ud=this.hd=this.jd=0}function he(k,M){return((4278124286&(k^M))>>>1)+(k&M)>>>0}function Ee(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function Me(k,M){return Ee(k+(k-M+.5>>1))}function at(k,M,K){return Math.abs(M-K)-Math.abs(k-K)}function ct(k,M,K,ae,le,pe,ge){for(ae=pe[ge-1],K=0;K<le;++K)pe[ge+K]=ae=it(k[M+K],ae)}function dt(k,M,K,ae,le){var pe;for(pe=0;pe<K;++pe){var ge=k[M+pe],ye=ge>>8&255,be=16711935&(be=(be=16711935&ge)+((ye<<16)+ye));ae[le+pe]=(4278255360&ge)+be>>>0}}function Xe(k,M){M.jd=k>>0&255,M.hd=k>>8&255,M.ud=k>>16&255}function Nt(k,M,K,ae,le,pe){var ge;for(ge=0;ge<ae;++ge){var ye=M[K+ge],be=ye>>>8,Ae=ye,Ue=255&(Ue=(Ue=ye>>>16)+((k.jd<<24>>24)*(be<<24>>24)>>>5));Ae=255&(Ae=(Ae=Ae+((k.hd<<24>>24)*(be<<24>>24)>>>5))+((k.ud<<24>>24)*(Ue<<24>>24)>>>5)),le[pe+ge]=(4278255360&ye)+(Ue<<16)+Ae}}function St(k,M,K,ae,le){F[M]=function(pe,ge,ye,be,Ae,Ue,rt,nt,Ke){for(be=rt;be<nt;++be)for(rt=0;rt<Ke;++rt)Ae[Ue++]=le(ye[ae(pe[ge++])])},F[k]=function(pe,ge,ye,be,Ae,Ue,rt){var nt=8>>pe.b,Ke=pe.Ea,It=pe.K[0],_t=pe.w;if(8>nt)for(pe=(1<<pe.b)-1,_t=(1<<nt)-1;ge<ye;++ge){var We,ze=0;for(We=0;We<Ke;++We)We&pe||(ze=ae(be[Ae++])),Ue[rt++]=le(It[ze&_t]),ze>>=nt}else F["VP8LMapColor"+K](be,Ae,It,_t,Ue,rt,ge,ye,Ke)}}function At(k,M,K,ae,le){for(K=M+K;M<K;){var pe=k[M++];ae[le++]=pe>>16&255,ae[le++]=pe>>8&255,ae[le++]=pe>>0&255}}function dn(k,M,K,ae,le){for(K=M+K;M<K;){var pe=k[M++];ae[le++]=pe>>16&255,ae[le++]=pe>>8&255,ae[le++]=pe>>0&255,ae[le++]=pe>>24&255}}function Nr(k,M,K,ae,le){for(K=M+K;M<K;){var pe=(ge=k[M++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ae[le++]=pe,ae[le++]=ge}}function mt(k,M,K,ae,le){for(K=M+K;M<K;){var pe=(ge=k[M++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ae[le++]=pe,ae[le++]=ge}}function Dt(k,M,K,ae,le){for(K=M+K;M<K;){var pe=k[M++];ae[le++]=pe>>0&255,ae[le++]=pe>>8&255,ae[le++]=pe>>16&255}}function yr(k,M,K,ae,le,pe){if(pe==0)for(K=M+K;M<K;)se(ae,((pe=k[M++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),le+=32;else n(ae,le,k,M,K)}function Gr(k,M){F[M][0]=F[k+"0"],F[M][1]=F[k+"1"],F[M][2]=F[k+"2"],F[M][3]=F[k+"3"],F[M][4]=F[k+"4"],F[M][5]=F[k+"5"],F[M][6]=F[k+"6"],F[M][7]=F[k+"7"],F[M][8]=F[k+"8"],F[M][9]=F[k+"9"],F[M][10]=F[k+"10"],F[M][11]=F[k+"11"],F[M][12]=F[k+"12"],F[M][13]=F[k+"13"],F[M][14]=F[k+"0"],F[M][15]=F[k+"0"]}function fr(k){return k==up||k==Uf||k==a0||k==i0}function Or(){this.eb=[],this.size=this.A=this.fb=0}function cr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Or,this.f.kb=new cr,this.sd=null}function Sn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Nn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pr(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function hn(k,M){var K=k.T,ae=M.ba.f.RGBA,le=ae.eb,pe=ae.fb+k.ka*ae.A,ge=vo[M.ba.S],ye=k.y,be=k.O,Ae=k.f,Ue=k.N,rt=k.ea,nt=k.W,Ke=M.cc,It=M.dc,_t=M.Mc,We=M.Nc,ze=k.ka,Ct=k.ka+k.T,Et=k.U,Tt=Et+1>>1;for(ze==0?ge(ye,be,null,null,Ae,Ue,rt,nt,Ae,Ue,rt,nt,le,pe,null,null,Et):(ge(M.ec,M.fc,ye,be,Ke,It,_t,We,Ae,Ue,rt,nt,le,pe-ae.A,le,pe,Et),++K);ze+2<Ct;ze+=2)Ke=Ae,It=Ue,_t=rt,We=nt,Ue+=k.Rc,nt+=k.Rc,pe+=2*ae.A,ge(ye,(be+=2*k.fa)-k.fa,ye,be,Ke,It,_t,We,Ae,Ue,rt,nt,le,pe-ae.A,le,pe,Et);return be+=k.fa,k.j+Ct<k.o?(n(M.ec,M.fc,ye,be,Et),n(M.cc,M.dc,Ae,Ue,Tt),n(M.Mc,M.Nc,rt,nt,Tt),K--):1&Ct||ge(ye,be,null,null,Ae,Ue,rt,nt,Ae,Ue,rt,nt,le,pe+ae.A,null,null,Et),K}function hs(k,M,K){var ae=k.F,le=[k.J];if(ae!=null){var pe=k.U,ge=M.ba.S,ye=ge==n0||ge==a0;M=M.ba.f.RGBA;var be=[0],Ae=k.ka;be[0]=k.T,k.Kb&&(Ae==0?--be[0]:(--Ae,le[0]-=k.width),k.j+k.ka+k.T==k.o&&(be[0]=k.o-k.j-Ae));var Ue=M.eb;Ae=M.fb+Ae*M.A,k=ca(ae,le[0],k.width,pe,be,Ue,Ae+(ye?0:3),M.A),t(K==be),k&&fr(ge)&&mo(Ue,Ae,ye,pe,be,M.A)}return 0}function Gn(k){var M=k.ma,K=M.ba.S,ae=11>K,le=K==Pd||K==r0||K==n0||K==Aa||K==12||fr(K);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Qh(M.Oa,k,le?11:12))return 0;if(le&&fr(K)&&$t(),k.da)alert("todo:use_scaling");else{if(ae){if(M.Ib=Pr,k.Kb){if(K=k.U+1>>1,M.memory=i(k.U+2*K),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+k.U,M.Mc=M.cc,M.Nc=M.dc+K,M.Ib=hn,$t()}}else alert("todo:EmitYUV");le&&(M.Jb=hs,ae&&tt())}if(ae&&!ms){for(k=0;256>k;++k)yo[k]=89858*(k-128)+Jl>>xu,xo[k]=-22014*(k-128)+Jl,pp[k]=-45773*(k-128),Vf[k]=113618*(k-128)+Jl>>xu;for(k=ua;k<ga;++k)M=76283*(k-16)+Jl>>xu,Zg[k-ua]=Ko(M,255),Ab[k-ua]=Ko(M+8>>4,15);ms=1}return 1}function bi(k){var M=k.ma,K=k.U,ae=k.T;return t(!(1&k.ka)),0>=K||0>=ae?0:(K=M.Ib(k,M),M.Jb!=null&&M.Jb(k,M,K),M.Dc+=K,1)}function ot(k){k.ma.memory=null}function yt(k,M,K,ae){return G(k,8)!=47?0:(M[0]=G(k,14)+1,K[0]=G(k,14)+1,ae[0]=G(k,1),G(k,3)!=0?0:!k.h)}function Mr(k,M){if(4>k)return k+1;var K=k-2>>1;return(2+(1&k)<<K)+G(M,K)+1}function ta(k,M){return 120<M?M-120:1<=(K=((K=g3[M-1])>>4)*k+(8-(15&K)))?K:1;var K}function bt(k,M,K){var ae=J(K),le=k[M+=255&ae].g-8;return 0<le&&(ne(K,K.u+8),ae=J(K),M+=k[M].value,M+=ae&(1<<le)-1),ne(K,K.u+k[M].g),k[M].value}function vt(k,M,K){return K.g+=k.g,K.value+=k.value<<M>>>0,t(8>=K.g),k.g}function Qt(k,M,K){var ae=k.xc;return t((M=ae==0?0:k.vc[k.md*(K>>ae)+(M>>ae)])<k.Wb),k.Ya[M]}function ce(k,M,K,ae){var le=k.ab,pe=k.c*M,ge=k.C;M=ge+M;var ye=K,be=ae;for(ae=k.Ta,K=k.Ua;0<le--;){var Ae=k.gc[le],Ue=ge,rt=M,nt=ye,Ke=be,It=(be=ae,ye=K,Ae.Ea);switch(t(Ue<rt),t(rt<=Ae.nc),Ae.hc){case 2:Gg(nt,Ke,(rt-Ue)*It,be,ye);break;case 0:var _t=Ue,We=rt,ze=be,Ct=ye,Et=(sr=Ae).Ea;_t==0&&(Mf(nt,Ke,null,null,1,ze,Ct),ct(nt,Ke+1,0,0,Et-1,ze,Ct+1),Ke+=Et,Ct+=Et,++_t);for(var Tt=1<<sr.b,mr=Tt-1,ir=pt(Et,sr.b),Lr=sr.K,sr=sr.w+(_t>>sr.b)*ir;_t<We;){var Wn=Lr,zn=sr,Ln=1;for(du(nt,Ke,ze,Ct-Et,1,ze,Ct);Ln<Et;){var yn=(Ln&~mr)+Tt;yn>Et&&(yn=Et),(0,Oc[Wn[zn++]>>8&15])(nt,Ke+ +Ln,ze,Ct+Ln-Et,yn-Ln,ze,Ct+Ln),Ln=yn}Ke+=Et,Ct+=Et,++_t&mr||(sr+=ir)}rt!=Ae.nc&&n(be,ye-It,be,ye+(rt-Ue-1)*It,It);break;case 1:for(It=nt,We=Ke,Et=(nt=Ae.Ea)-(Ct=nt&~(ze=(Ke=1<<Ae.b)-1)),_t=pt(nt,Ae.b),Tt=Ae.K,Ae=Ae.w+(Ue>>Ae.b)*_t;Ue<rt;){for(mr=Tt,ir=Ae,Lr=new ut,sr=We+Ct,Wn=We+nt;We<sr;)Xe(mr[ir++],Lr),kd(Lr,It,We,Ke,be,ye),We+=Ke,ye+=Ke;We<Wn&&(Xe(mr[ir++],Lr),kd(Lr,It,We,Et,be,ye),We+=Et,ye+=Et),++Ue&ze||(Ae+=_t)}break;case 3:if(nt==be&&Ke==ye&&0<Ae.b){for(We=be,nt=It=ye+(rt-Ue)*It-(Ct=(rt-Ue)*pt(Ae.Ea,Ae.b)),Ke=be,ze=ye,_t=[],Ct=(Et=Ct)-1;0<=Ct;--Ct)_t[Ct]=Ke[ze+Ct];for(Ct=Et-1;0<=Ct;--Ct)We[nt+Ct]=_t[Ct];Hs(Ae,Ue,rt,be,It,be,ye)}else Hs(Ae,Ue,rt,nt,Ke,be,ye)}ye=ae,be=K}be!=K&&n(ae,K,ye,be,pe)}function we(k,M){var K=k.V,ae=k.Ba+k.c*k.C,le=M-k.C;if(t(M<=k.l.o),t(16>=le),0<le){var pe=k.l,ge=k.Ta,ye=k.Ua,be=pe.width;if(ce(k,le,K,ae),le=ye=[ye],t((K=k.C)<(ae=M)),t(pe.v<pe.va),ae>pe.o&&(ae=pe.o),K<pe.j){var Ae=pe.j-K;K=pe.j,le[0]+=Ae*be}if(K>=ae?K=0:(le[0]+=4*pe.v,pe.ka=K-pe.j,pe.U=pe.va-pe.v,pe.T=ae-K,K=1),K){if(ye=ye[0],11>(K=k.ca).S){var Ue=K.f.RGBA,rt=(ae=K.S,le=pe.U,pe=pe.T,Ae=Ue.eb,Ue.A),nt=pe;for(Ue=Ue.fb+k.Ma*Ue.A;0<nt--;){var Ke=ge,It=ye,_t=le,We=Ae,ze=Ue;switch(ae){case Yg:Gs(Ke,It,_t,We,ze);break;case Pd:ks(Ke,It,_t,We,ze);break;case up:ks(Ke,It,_t,We,ze),mo(We,ze,0,_t,1,0);break;case wb:hu(Ke,It,_t,We,ze);break;case r0:yr(Ke,It,_t,We,ze,1);break;case Uf:yr(Ke,It,_t,We,ze,1),mo(We,ze,0,_t,1,0);break;case n0:yr(Ke,It,_t,We,ze,0);break;case a0:yr(Ke,It,_t,We,ze,0),mo(We,ze,1,_t,1,0);break;case Aa:Ed(Ke,It,_t,We,ze);break;case i0:Ed(Ke,It,_t,We,ze),Na(We,ze,_t,1,0);break;case Kg:fu(Ke,It,_t,We,ze);break;default:t(0)}ye+=be,Ue+=rt}k.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=K.height)}}k.C=M,t(k.C<=k.i)}function xe(k){var M;if(0<k.ua)return 0;for(M=0;M<k.Wb;++M){var K=k.Ya[M].G,ae=k.Ya[M].H;if(0<K[1][ae[1]+0].g||0<K[2][ae[2]+0].g||0<K[3][ae[3]+0].g)return 0}return 1}function _e(k,M,K,ae,le,pe){if(k.Z!=0){var ge=k.qd,ye=k.rd;for(t(Cs[k.Z]!=null);M<K;++M)Cs[k.Z](ge,ye,ae,le,ae,le,pe),ge=ae,ye=le,le+=pe;k.qd=ge,k.rd=ye}}function Ne(k,M){var K=k.l.ma,ae=K.Z==0||K.Z==1?k.l.j:k.C;if(ae=k.C<ae?ae:k.C,t(M<=k.l.o),M>ae){var le=k.l.width,pe=K.ca,ge=K.tb+le*ae,ye=k.V,be=k.Ba+k.c*ae,Ae=k.gc;t(k.ab==1),t(Ae[0].hc==3),Qm(Ae[0],ae,M,ye,be,pe,ge),_e(K,ae,M,pe,ge,le)}k.C=k.Ma=M}function Se(k,M,K,ae,le,pe,ge){var ye=k.$/ae,be=k.$%ae,Ae=k.m,Ue=k.s,rt=K+k.$,nt=rt;le=K+ae*le;var Ke=K+ae*pe,It=280+Ue.ua,_t=k.Pb?ye:16777216,We=0<Ue.ua?Ue.Wa:null,ze=Ue.wc,Ct=rt<Ke?Qt(Ue,be,ye):null;t(k.C<pe),t(Ke<=le);var Et=!1;e:for(;;){for(;Et||rt<Ke;){var Tt=0;if(ye>=_t){var mr=rt-K;t((_t=k).Pb),_t.wd=_t.m,_t.xd=mr,0<_t.s.ua&&Ce(_t.s.Wa,_t.s.vb),_t=ye+Jg}if(be&ze||(Ct=Qt(Ue,be,ye)),t(Ct!=null),Ct.Qb&&(M[rt]=Ct.qb,Et=!0),!Et)if(ie(Ae),Ct.jc){Tt=Ae,mr=M;var ir=rt,Lr=Ct.pd[J(Tt)&si-1];t(Ct.jc),256>Lr.g?(ne(Tt,Tt.u+Lr.g),mr[ir]=Lr.value,Tt=0):(ne(Tt,Tt.u+Lr.g-256),t(256<=Lr.value),Tt=Lr.value),Tt==0&&(Et=!0)}else Tt=bt(Ct.G[0],Ct.H[0],Ae);if(Ae.h)break;if(Et||256>Tt){if(!Et)if(Ct.nd)M[rt]=(Ct.qb|Tt<<8)>>>0;else{if(ie(Ae),Et=bt(Ct.G[1],Ct.H[1],Ae),ie(Ae),mr=bt(Ct.G[2],Ct.H[2],Ae),ir=bt(Ct.G[3],Ct.H[3],Ae),Ae.h)break;M[rt]=(ir<<24|Et<<16|Tt<<8|mr)>>>0}if(Et=!1,++rt,++be>=ae&&(be=0,++ye,ge!=null&&ye<=pe&&!(ye%16)&&ge(k,ye),We!=null))for(;nt<rt;)Tt=M[nt++],We.X[(506832829*Tt&4294967295)>>>We.Mb]=Tt}else if(280>Tt){if(Tt=Mr(Tt-256,Ae),mr=bt(Ct.G[4],Ct.H[4],Ae),ie(Ae),mr=ta(ae,mr=Mr(mr,Ae)),Ae.h)break;if(rt-K<mr||le-rt<Tt)break e;for(ir=0;ir<Tt;++ir)M[rt+ir]=M[rt+ir-mr];for(rt+=Tt,be+=Tt;be>=ae;)be-=ae,++ye,ge!=null&&ye<=pe&&!(ye%16)&&ge(k,ye);if(t(rt<=le),be&ze&&(Ct=Qt(Ue,be,ye)),We!=null)for(;nt<rt;)Tt=M[nt++],We.X[(506832829*Tt&4294967295)>>>We.Mb]=Tt}else{if(!(Tt<It))break e;for(Et=Tt-280,t(We!=null);nt<rt;)Tt=M[nt++],We.X[(506832829*Tt&4294967295)>>>We.Mb]=Tt;Tt=rt,t(!(Et>>>(mr=We).Xa)),M[Tt]=mr.X[Et],Et=!0}Et||t(Ae.h==X(Ae))}if(k.Pb&&Ae.h&&rt<le)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&Ce(k.s.vb,k.s.Wa);else{if(Ae.h)break e;ge!=null&&ge(k,ye>pe?pe:ye),k.a=0,k.$=rt-K}return 1}return k.a=3,0}function Ve(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var M=k.Wa;M!=null&&(M.X=null),k.vb=null,t(k!=null)}function ft(){var k=new Fy;return k==null?null:(k.a=0,k.xb=fp,Gr("Predictor","VP8LPredictors"),Gr("Predictor","VP8LPredictors_C"),Gr("PredictorAdd","VP8LPredictorsAdd"),Gr("PredictorAdd","VP8LPredictorsAdd_C"),Gg=dt,kd=Nt,Gs=At,ks=dn,Ed=Nr,fu=mt,hu=Dt,F.VP8LMapColor32b=ip,F.VP8LMapColor8b=sp,k)}function et(k,M,K,ae,le){var pe=1,ge=[k],ye=[M],be=ae.m,Ae=ae.s,Ue=null,rt=0;e:for(;;){if(K)for(;pe&&G(be,1);){var nt=ge,Ke=ye,It=ae,_t=1,We=It.m,ze=It.gc[It.ab],Ct=G(We,2);if(It.Oc&1<<Ct)pe=0;else{switch(It.Oc|=1<<Ct,ze.hc=Ct,ze.Ea=nt[0],ze.nc=Ke[0],ze.K=[null],++It.ab,t(4>=It.ab),Ct){case 0:case 1:ze.b=G(We,3)+2,_t=et(pt(ze.Ea,ze.b),pt(ze.nc,ze.b),0,It,ze.K),ze.K=ze.K[0];break;case 3:var Et,Tt=G(We,8)+1,mr=16<Tt?0:4<Tt?1:2<Tt?2:3;if(nt[0]=pt(ze.Ea,mr),ze.b=mr,Et=_t=et(Tt,1,0,It,ze.K)){var ir,Lr=Tt,sr=ze,Wn=1<<(8>>sr.b),zn=i(Wn);if(zn==null)Et=0;else{var Ln=sr.K[0],yn=sr.w;for(zn[0]=sr.K[0][0],ir=1;ir<1*Lr;++ir)zn[ir]=it(Ln[yn+ir],zn[ir-1]);for(;ir<4*Wn;++ir)zn[ir]=0;sr.K[0]=null,sr.K[0]=zn,Et=1}}_t=Et;break;case 2:break;default:t(0)}pe=_t}}if(ge=ge[0],ye=ye[0],pe&&G(be,1)&&!(pe=1<=(rt=G(be,4))&&11>=rt)){ae.a=3;break e}var da;if(da=pe)t:{var va,nn,Ya,Xs=ae,fi=ge,Li=ye,ra=rt,Ps=K,Ts=Xs.m,Ka=Xs.s,ji=[null],gs=1,wo=0,_l=_b[ra];r:for(;;){if(Ps&&G(Ts,1)){var Xa=G(Ts,3)+2,Ai=pt(fi,Xa),Zo=pt(Li,Xa),Dd=Ai*Zo;if(!et(Ai,Zo,0,Xs,ji))break r;for(ji=ji[0],Ka.xc=Xa,va=0;va<Dd;++va){var bu=ji[va]>>8&65535;ji[va]=bu,bu>=gs&&(gs=bu+1)}}if(Ts.h)break r;for(nn=0;5>nn;++nn){var na=qf[nn];!nn&&0<ra&&(na+=1<<ra),wo<na&&(wo=na)}var Fc=s(gs*_l,R),Qg=gs,qy=s(Qg,Y);if(qy==null)var Sl=null;else t(65536>=Qg),Sl=qy;var Nl=i(wo);if(Sl==null||Nl==null||Fc==null){Xs.a=1;break r}var Gf=Fc;for(va=Ya=0;va<gs;++va){var Al=Sl[va],_u=Al.G,Yf=Al.H,mp=0,Qo=1,gp=0;for(nn=0;5>nn;++nn){na=qf[nn],_u[nn]=Gf,Yf[nn]=Ya,!nn&&0<ra&&(na+=1<<ra);a:{var Id,Su=na,vp=Xs,Lc=Nl,Eb=Gf,Wy=Ya,Ia=0,Zl=vp.m,zy=G(Zl,1);if(a(Lc,0,0,Su),zy){var Vy=G(Zl,1)+1,ev=G(Zl,1),tv=G(Zl,ev==0?1:8);Lc[tv]=1,Vy==2&&(Lc[tv=G(Zl,8)]=1);var jc=1}else{var La=i(19),ki=G(Zl,4)+4;if(19<ki){vp.a=3;var hi=0;break a}for(Id=0;Id<ki;++Id)La[m3[Id]]=G(Zl,3);var yp=void 0,Nu=void 0,xp=vp,b3=La,$i=Su,rv=Lc,u0=0,$c=xp.m,Ql=8,el=s(128,R);n:for(;T(el,0,7,b3,19);){if(G($c,1)){var d0=2+2*G($c,3);if((yp=2+G($c,d0))>$i)break n}else yp=$i;for(Nu=0;Nu<$i&&yp--;){ie($c);var nv=el[0+(127&J($c))];ne($c,$c.u+nv.g);var Rd=nv.value;if(16>Rd)rv[Nu++]=Rd,Rd!=0&&(Ql=Rd);else{var Cb=Rd==16,Hy=Rd-16,Pb=Xg[Hy],Gy=G($c,s0[Hy])+Pb;if(Nu+Gy>$i)break n;for(var Tb=Cb?Ql:0;0<Gy--;)rv[Nu++]=Tb}}u0=1;break n}u0||(xp.a=3),jc=u0}(jc=jc&&!Zl.h)&&(Ia=T(Eb,Wy,8,Lc,Su)),jc&&Ia!=0?hi=Ia:(vp.a=3,hi=0)}if(hi==0)break r;if(Qo&&bb[nn]==1&&(Qo=Gf[Ya].g==0),mp+=Gf[Ya].g,Ya+=hi,3>=nn){var wp,av=Nl[0];for(wp=1;wp<na;++wp)Nl[wp]>av&&(av=Nl[wp]);gp+=av}}if(Al.nd=Qo,Al.Qb=0,Qo&&(Al.qb=(_u[3][Yf[3]+0].value<<24|_u[1][Yf[1]+0].value<<16|_u[2][Yf[2]+0].value)>>>0,mp==0&&256>_u[0][Yf[0]+0].value&&(Al.Qb=1,Al.qb+=_u[0][Yf[0]+0].value<<8)),Al.jc=!Al.Qb&&6>gp,Al.jc){var f0,tl=Al;for(f0=0;f0<si;++f0){var Au=f0,ec=tl.pd[Au],Kf=tl.G[0][tl.H[0]+Au];256<=Kf.value?(ec.g=Kf.g+256,ec.value=Kf.value):(ec.g=0,ec.value=0,Au>>=vt(Kf,8,ec),Au>>=vt(tl.G[1][tl.H[1]+Au],16,ec),Au>>=vt(tl.G[2][tl.H[2]+Au],0,ec),vt(tl.G[3][tl.H[3]+Au],24,ec))}}}Ka.vc=ji,Ka.Wb=gs,Ka.Ya=Sl,Ka.yc=Fc,da=1;break t}da=0}if(!(pe=da)){ae.a=3;break e}if(0<rt){if(Ae.ua=1<<rt,!Re(Ae.Wa,rt)){ae.a=1,pe=0;break e}}else Ae.ua=0;var iv=ae,sv=ge,Ob=ye,ov=iv.s,lv=ov.xc;if(iv.c=sv,iv.i=Ob,ov.md=pt(sv,lv),ov.wc=lv==0?-1:(1<<lv)-1,K){ae.xb=Mc;break e}if((Ue=i(ge*ye))==null){ae.a=1,pe=0;break e}pe=(pe=Se(ae,Ue,0,ge,ye,ye,null))&&!be.h;break e}return pe?(le!=null?le[0]=Ue:(t(Ue==null),t(K)),ae.$=0,K||Ve(Ae)):Ve(Ae),pe}function st(k,M){var K=k.c*k.i,ae=K+M+16*M;return t(k.c<=M),k.V=i(ae),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+K+M,1)}function Je(k,M){var K=k.C,ae=M-K,le=k.V,pe=k.Ba+k.c*K;for(t(M<=k.l.o);0<ae;){var ge=16<ae?16:ae,ye=k.l.ma,be=k.l.width,Ae=be*ge,Ue=ye.ca,rt=ye.tb+be*K,nt=k.Ta,Ke=k.Ua;ce(k,ge,le,pe),oi(nt,Ke,Ue,rt,Ae),_e(ye,K,K+ge,Ue,rt,be),ae-=ge,le+=ge*k.c,K+=ge}t(K==M),k.C=k.Ma=M}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function zt(){this.Yb=function(){var k=[];return function M(K,ae,le){for(var pe=le[ae],ge=0;ge<pe&&(K.push(le.length>ae+1?[]:0),!(le.length<ae+1));ge++)M(K[ge],ae+1,le)}(k,0,[3,11]),k}()}function qt(){this.jb=i(3),this.Wc=o([4,8],zt),this.Xc=o([4,17],zt)}function Qr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function qn(){this.ld=this.La=this.dd=this.tc=0}function la(){this.Na=this.la=0}function za(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Nc(){this.uc=this.M=this.Nb=0,this.wa=Array(new qn),this.Y=0,this.ya=Array(new Vl),this.aa=0,this.l=new Ac}function Go(){this.y=i(16),this.f=i(8),this.ea=i(8)}function _i(){this.cb=this.a=0,this.sc="",this.m=new Q,this.Od=new Ft,this.Kc=new Jt,this.ed=new Qr,this.Qa=new lr,this.Ic=this.$c=this.Aa=0,this.D=new Nc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Q),this.ia=0,this.pb=s(4,za),this.Pa=new qt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Go),this.Hd=0,this.rb=Array(new la),this.sb=0,this.wa=Array(new qn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vl),this.L=this.aa=0,this.gd=o([4,2],qn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ac(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Va(){var k=new _i;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Wf||(Wf=Sf)),k}function di(k,M,K){return k.a==0&&(k.a=M,k.sc=K,k.cb=0),0}function Bg(k,M,K){return 3<=K&&k[M+0]==157&&k[M+1]==1&&k[M+2]==42}function Ug(k,M){if(k==null)return 0;if(k.a=0,k.sc="OK",M==null)return di(k,2,"null VP8Io passed to VP8GetHeaders()");var K=M.data,ae=M.w,le=M.ha;if(4>le)return di(k,7,"Truncated header.");var pe=K[ae+0]|K[ae+1]<<8|K[ae+2]<<16,ge=k.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return di(k,3,"Incorrect keyframe parameters.");if(!ge.yd)return di(k,4,"Frame not displayable.");ae+=3,le-=3;var ye=k.Kc;if(ge.Rb){if(7>le)return di(k,7,"cannot parse picture header");if(!Bg(K,ae,le))return di(k,3,"Bad code word");ye.c=16383&(K[ae+4]<<8|K[ae+3]),ye.Td=K[ae+4]>>6,ye.i=16383&(K[ae+6]<<8|K[ae+5]),ye.Ud=K[ae+6]>>6,ae+=7,le-=7,k.za=ye.c+15>>4,k.Ub=ye.i+15>>4,M.width=ye.c,M.height=ye.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,a((pe=k.Pa).jb,0,255,pe.jb.length),t((pe=k.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,a(pe.Zb,0,0,pe.Zb.length),a(pe.Lb,0,0,pe.Lb)}if(ge.ub>le)return di(k,7,"bad partition length");Z(pe=k.m,K,ae,ge.ub),ae+=ge.ub,le-=ge.ub,ge.Rb&&(ye.Ld=de(pe),ye.Kd=de(pe)),ye=k.Qa;var be,Ae=k.Pa;if(t(pe!=null),t(ye!=null),ye.Cb=de(pe),ye.Cb){if(ye.Bb=de(pe),de(pe)){for(ye.Fb=de(pe),be=0;4>be;++be)ye.Zb[be]=de(pe)?z(pe,7):0;for(be=0;4>be;++be)ye.Lb[be]=de(pe)?z(pe,6):0}if(ye.Bb)for(be=0;3>be;++be)Ae.jb[be]=de(pe)?re(pe,8):255}else ye.Bb=0;if(pe.Ka)return di(k,3,"cannot parse segment header");if((ye=k.ed).zd=de(pe),ye.Tb=re(pe,6),ye.wb=re(pe,3),ye.Pc=de(pe),ye.Pc&&de(pe)){for(Ae=0;4>Ae;++Ae)de(pe)&&(ye.vd[Ae]=z(pe,6));for(Ae=0;4>Ae;++Ae)de(pe)&&(ye.od[Ae]=z(pe,6))}if(k.L=ye.Tb==0?0:ye.zd?1:2,pe.Ka)return di(k,3,"cannot parse filter header");var Ue=le;if(le=be=ae,ae=be+Ue,ye=Ue,k.Xb=(1<<re(k.m,2))-1,Ue<3*(Ae=k.Xb))K=7;else{for(be+=3*Ae,ye-=3*Ae,Ue=0;Ue<Ae;++Ue){var rt=K[le+0]|K[le+1]<<8|K[le+2]<<16;rt>ye&&(rt=ye),Z(k.Jc[+Ue],K,be,rt),be+=rt,ye-=rt,le+=3}Z(k.Jc[+Ae],K,be,ye),K=be<ae?0:5}if(K!=0)return di(k,K,"cannot parse partitions");for(K=re(be=k.m,7),le=de(be)?z(be,4):0,ae=de(be)?z(be,4):0,ye=de(be)?z(be,4):0,Ae=de(be)?z(be,4):0,be=de(be)?z(be,4):0,Ue=k.Qa,rt=0;4>rt;++rt){if(Ue.Cb){var nt=Ue.Zb[rt];Ue.Fb||(nt+=K)}else{if(0<rt){k.pb[rt]=k.pb[0];continue}nt=K}var Ke=k.pb[rt];Ke.Sc[0]=dp[Ko(nt+le,127)],Ke.Sc[1]=o0[Ko(nt+0,127)],Ke.Eb[0]=2*dp[Ko(nt+ae,127)],Ke.Eb[1]=101581*o0[Ko(nt+ye,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=dp[Ko(nt+Ae,117)],Ke.Qc[1]=o0[Ko(nt+be,127)],Ke.lc=nt+be}if(!ge.Rb)return di(k,4,"Not a key frame.");for(de(pe),ge=k.Pa,K=0;4>K;++K){for(le=0;8>le;++le)for(ae=0;3>ae;++ae)for(ye=0;11>ye;++ye)Ae=V(pe,y3[K][le][ae][ye])?re(pe,8):Nb[K][le][ae][ye],ge.Wc[K][le].Yb[ae][ye]=Ae;for(le=0;17>le;++le)ge.Xc[K][le]=ge.Wc[K][$y[le]]}return k.kc=de(pe),k.kc&&(k.Bd=re(pe,8)),k.cb=1}function Sf(k,M,K,ae,le,pe,ge){var ye=M[le].Yb[K];for(K=0;16>le;++le){if(!V(k,ye[K+0]))return le;for(;!V(k,ye[K+1]);)if(ye=M[++le].Yb[0],K=0,le==16)return 16;var be=M[le+1].Yb;if(V(k,ye[K+2])){var Ae=k,Ue=0;if(V(Ae,(nt=ye)[(rt=K)+3]))if(V(Ae,nt[rt+6])){for(ye=0,rt=2*(Ue=V(Ae,nt[rt+8]))+(nt=V(Ae,nt[rt+9+Ue])),Ue=0,nt=Ly[rt];nt[ye];++ye)Ue+=Ue+V(Ae,nt[ye]);Ue+=3+(8<<rt)}else V(Ae,nt[rt+7])?(Ue=7+2*V(Ae,165),Ue+=V(Ae,145)):Ue=5+V(Ae,159);else Ue=V(Ae,nt[rt+4])?3+V(Ae,nt[rt+5]):2;ye=be[2]}else Ue=1,ye=be[1];be=ge+jy[le],0>(Ae=k).b&&oe(Ae);var rt,nt=Ae.b,Ke=(rt=Ae.Ca>>1)-(Ae.I>>nt)>>31;--Ae.b,Ae.Ca+=Ke,Ae.Ca|=1,Ae.I-=(rt+1&Ke)<<nt,pe[be]=((Ue^Ke)-Ke)*ae[(0<le)+0]}return 16}function gd(k){var M=k.rb[k.sb-1];M.la=0,M.Na=0,a(k.zc,0,0,k.zc.length),k.ja=0}function Nf(k,M){if(k==null)return 0;if(M==null)return di(k,2,"NULL VP8Io parameter in VP8Decode().");if(!k.cb&&!Ug(k,M))return 0;if(t(k.cb),M.ac==null||M.ac(M)){M.ob&&(k.L=0);var K=Hf[k.L];if(k.L==2?(k.yb=0,k.zb=0):(k.yb=M.v-K>>4,k.zb=M.j-K>>4,0>k.yb&&(k.yb=0),0>k.zb&&(k.zb=0)),k.Va=M.o+15+K>>4,k.Hb=M.va+15+K>>4,k.Hb>k.za&&(k.Hb=k.za),k.Va>k.Ub&&(k.Va=k.Ub),0<k.L){var ae=k.ed;for(K=0;4>K;++K){var le;if(k.Qa.Cb){var pe=k.Qa.Lb[K];k.Qa.Fb||(pe+=ae.Tb)}else pe=ae.Tb;for(le=0;1>=le;++le){var ge=k.gd[K][le],ye=pe;if(ae.Pc&&(ye+=ae.vd[0],le&&(ye+=ae.od[0])),0<(ye=0>ye?0:63<ye?63:ye)){var be=ye;0<ae.wb&&(be=4<ae.wb?be>>2:be>>1)>9-ae.wb&&(be=9-ae.wb),1>be&&(be=1),ge.dd=be,ge.tc=2*ye+be,ge.ld=40<=ye?2:15<=ye?1:0}else ge.tc=0;ge.La=le}}}K=0}else di(k,6,"Frame setup failed"),K=k.a;if(K=K==0){if(K){k.$c=0,0<k.Aa||(k.Ic=wu);e:{K=k.Ic,ae=4*(be=k.za);var Ae=32*be,Ue=be+1,rt=0<k.L?be*(0<k.Aa?2:1):0,nt=(k.Aa==2?2:1)*be;if((ge=ae+832+(le=3*(16*K+Hf[k.L])/2*Ae)+(pe=k.Fa!=null&&0<k.Fa.length?k.Kc.c*k.Kc.i:0))!=ge)K=0;else{if(ge>k.Vb){if(k.Vb=0,k.Ec=i(ge),k.Fc=0,k.Ec==null){K=di(k,1,"no memory during frame initialization.");break e}k.Vb=ge}ge=k.Ec,ye=k.Fc,k.Ac=ge,k.Bc=ye,ye+=ae,k.Gd=s(Ae,Go),k.Hd=0,k.rb=s(Ue+1,la),k.sb=1,k.wa=rt?s(rt,qn):null,k.Y=0,k.D.Nb=0,k.D.wa=k.wa,k.D.Y=k.Y,0<k.Aa&&(k.D.Y+=be),t(!0),k.oc=ge,k.pc=ye,ye+=832,k.ya=s(nt,Vl),k.aa=0,k.D.ya=k.ya,k.D.aa=k.aa,k.Aa==2&&(k.D.aa+=be),k.R=16*be,k.B=8*be,be=(Ae=Hf[k.L])*k.R,Ae=Ae/2*k.B,k.sa=ge,k.ta=ye+be,k.qa=k.sa,k.ra=k.ta+16*K*k.R+Ae,k.Ha=k.qa,k.Ia=k.ra+8*K*k.B+Ae,k.$c=0,ye+=le,k.mb=pe?ge:null,k.nb=pe?ye:null,t(ye+pe<=k.Fc+k.Vb),gd(k),a(k.Ac,k.Bc,0,ae),K=1}}if(K){if(M.ka=0,M.y=k.sa,M.O=k.ta,M.f=k.qa,M.N=k.ra,M.ea=k.Ha,M.Vd=k.Ia,M.fa=k.R,M.Rc=k.B,M.F=null,M.J=0,!t0){for(K=-255;255>=K;++K)Ni[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)Ic[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)lp[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)Bf[255+K]=0>K?0:255<K?255:K;t0=1}op=Yn,pu=zm,mu=vd,Es=Ry,Xo=Uh,Kn=Wm,Ff=Yh,e0=Fi,Lf=Of,jf=Km,$f=bd,Jo=_d,gu=Df,Dc=Kh,vu=Yl,yu=vl,Cd=yl,ps=Vg,bl[0]=Pc,bl[1]=qg,bl[2]=Cf,bl[3]=Cc,bl[4]=Hm,bl[5]=Wh,bl[6]=xd,bl[7]=zh,bl[8]=zg,bl[9]=Vh,Ks[0]=Ef,Ks[1]=Wg,Ks[2]=kc,Ks[3]=kf,Ks[4]=Ha,Ks[5]=Ec,Ks[6]=Hl,go[0]=Yo,go[1]=Vm,go[2]=My,go[3]=cu,go[4]=Pf,go[5]=Hh,go[6]=Gm,K=1}else K=0}K&&(K=function(Ke,It){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var _t,We=Ke.Jc[Ke.M&Ke.Xb],ze=Ke.m,Ct=Ke;for(_t=0;_t<Ct.za;++_t){var Et=ze,Tt=Ct,mr=Tt.Ac,ir=Tt.Bc+4*_t,Lr=Tt.zc,sr=Tt.ya[Tt.aa+_t];if(Tt.Qa.Bb?sr.$b=V(Et,Tt.Pa.jb[0])?2+V(Et,Tt.Pa.jb[2]):V(Et,Tt.Pa.jb[1]):sr.$b=0,Tt.kc&&(sr.Ad=V(Et,Tt.Bd)),sr.Za=!V(Et,145)+0,sr.Za){var Wn=sr.Ob,zn=0;for(Tt=0;4>Tt;++Tt){var Ln,yn=Lr[0+Tt];for(Ln=0;4>Ln;++Ln){yn=v3[mr[ir+Ln]][yn];for(var da=Sb[V(Et,yn[0])];0<da;)da=Sb[2*da+V(Et,yn[da])];yn=-da,mr[ir+Ln]=yn}n(Wn,zn,mr,ir,4),zn+=4,Lr[0+Tt]=yn}}else yn=V(Et,156)?V(Et,128)?1:3:V(Et,163)?2:0,sr.Ob[0]=yn,a(mr,ir,yn,4),a(Lr,0,yn,4);sr.Dd=V(Et,142)?V(Et,114)?V(Et,183)?1:3:2:0}if(Ct.m.Ka)return di(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(Ct=We,Et=(ze=Ke).rb[ze.sb-1],mr=ze.rb[ze.sb+ze.ja],_t=ze.ya[ze.aa+ze.ja],ir=ze.kc?_t.Ad:0)Et.la=mr.la=0,_t.Za||(Et.Na=mr.Na=0),_t.Hc=0,_t.Gc=0,_t.ia=0;else{var va,nn;if(Et=mr,mr=Ct,ir=ze.Pa.Xc,Lr=ze.ya[ze.aa+ze.ja],sr=ze.pb[Lr.$b],Tt=Lr.ad,Wn=0,zn=ze.rb[ze.sb-1],yn=Ln=0,a(Tt,Wn,0,384),Lr.Za)var Ya=0,Xs=ir[3];else{da=i(16);var fi=Et.Na+zn.Na;if(fi=Wf(mr,ir[1],fi,sr.Eb,0,da,0),Et.Na=zn.Na=(0<fi)+0,1<fi)op(da,0,Tt,Wn);else{var Li=da[0]+3>>3;for(da=0;256>da;da+=16)Tt[Wn+da]=Li}Ya=1,Xs=ir[0]}var ra=15&Et.la,Ps=15&zn.la;for(da=0;4>da;++da){var Ts=1&Ps;for(Li=nn=0;4>Li;++Li)ra=ra>>1|(Ts=(fi=Wf(mr,Xs,fi=Ts+(1&ra),sr.Sc,Ya,Tt,Wn))>Ya)<<7,nn=nn<<2|(3<fi?3:1<fi?2:Tt[Wn+0]!=0),Wn+=16;ra>>=4,Ps=Ps>>1|Ts<<7,Ln=(Ln<<8|nn)>>>0}for(Xs=ra,Ya=Ps>>4,va=0;4>va;va+=2){for(nn=0,ra=Et.la>>4+va,Ps=zn.la>>4+va,da=0;2>da;++da){for(Ts=1&Ps,Li=0;2>Li;++Li)fi=Ts+(1&ra),ra=ra>>1|(Ts=0<(fi=Wf(mr,ir[2],fi,sr.Qc,0,Tt,Wn)))<<3,nn=nn<<2|(3<fi?3:1<fi?2:Tt[Wn+0]!=0),Wn+=16;ra>>=2,Ps=Ps>>1|Ts<<5}yn|=nn<<4*va,Xs|=ra<<4<<va,Ya|=(240&Ps)<<va}Et.la=Xs,zn.la=Ya,Lr.Hc=Ln,Lr.Gc=yn,Lr.ia=43690&yn?0:sr.ia,ir=!(Ln|yn)}if(0<ze.L&&(ze.wa[ze.Y+ze.ja]=ze.gd[_t.$b][_t.Za],ze.wa[ze.Y+ze.ja].La|=!ir),Ct.Ka)return di(Ke,7,"Premature end-of-file encountered.")}if(gd(Ke),ze=It,Ct=1,_t=(We=Ke).D,Et=0<We.L&&We.M>=We.zb&&We.M<=We.Va,We.Aa==0)e:{if(_t.M=We.M,_t.uc=Et,Zh(We,_t),Ct=1,_t=(nn=We.D).Nb,Et=(yn=Hf[We.L])*We.R,mr=yn/2*We.B,da=16*_t*We.R,Li=8*_t*We.B,ir=We.sa,Lr=We.ta-Et+da,sr=We.qa,Tt=We.ra-mr+Li,Wn=We.Ha,zn=We.Ia-mr+Li,Ps=(ra=nn.M)==0,Ln=ra>=We.Va-1,We.Aa==2&&Zh(We,nn),nn.uc)for(Ts=(fi=We).D.M,t(fi.D.uc),nn=fi.yb;nn<fi.Hb;++nn){Ya=nn,Xs=Ts;var Ka=(ji=(na=fi).D).Nb;va=na.R;var ji=ji.wa[ji.Y+Ya],gs=na.sa,wo=na.ta+16*Ka*va+16*Ya,_l=ji.dd,Xa=ji.tc;if(Xa!=0)if(t(3<=Xa),na.L==1)0<Ya&&yu(gs,wo,va,Xa+4),ji.La&&ps(gs,wo,va,Xa),0<Xs&&vu(gs,wo,va,Xa+4),ji.La&&Cd(gs,wo,va,Xa);else{var Ai=na.B,Zo=na.qa,Dd=na.ra+8*Ka*Ai+8*Ya,bu=na.Ha,na=na.Ia+8*Ka*Ai+8*Ya;Ka=ji.ld,0<Ya&&(e0(gs,wo,va,Xa+4,_l,Ka),jf(Zo,Dd,bu,na,Ai,Xa+4,_l,Ka)),ji.La&&(Jo(gs,wo,va,Xa,_l,Ka),Dc(Zo,Dd,bu,na,Ai,Xa,_l,Ka)),0<Xs&&(Ff(gs,wo,va,Xa+4,_l,Ka),Lf(Zo,Dd,bu,na,Ai,Xa+4,_l,Ka)),ji.La&&($f(gs,wo,va,Xa,_l,Ka),gu(Zo,Dd,bu,na,Ai,Xa,_l,Ka))}}if(We.ia&&alert("todo:DitherRow"),ze.put!=null){if(nn=16*ra,ra=16*(ra+1),Ps?(ze.y=We.sa,ze.O=We.ta+da,ze.f=We.qa,ze.N=We.ra+Li,ze.ea=We.Ha,ze.W=We.Ia+Li):(nn-=yn,ze.y=ir,ze.O=Lr,ze.f=sr,ze.N=Tt,ze.ea=Wn,ze.W=zn),Ln||(ra-=yn),ra>ze.o&&(ra=ze.o),ze.F=null,ze.J=null,We.Fa!=null&&0<We.Fa.length&&nn<ra&&(ze.J=Jm(We,ze,nn,ra-nn),ze.F=We.mb,ze.F==null&&ze.F.length==0)){Ct=di(We,3,"Could not decode alpha data.");break e}nn<ze.j&&(yn=ze.j-nn,nn=ze.j,t(!(1&yn)),ze.O+=We.R*yn,ze.N+=We.B*(yn>>1),ze.W+=We.B*(yn>>1),ze.F!=null&&(ze.J+=ze.width*yn)),nn<ra&&(ze.O+=ze.v,ze.N+=ze.v>>1,ze.W+=ze.v>>1,ze.F!=null&&(ze.J+=ze.v),ze.ka=nn-ze.j,ze.U=ze.va-ze.v,ze.T=ra-nn,Ct=ze.put(ze))}_t+1!=We.Ic||Ln||(n(We.sa,We.ta-Et,ir,Lr+16*We.R,Et),n(We.qa,We.ra-mr,sr,Tt+8*We.B,mr),n(We.Ha,We.Ia-mr,Wn,zn+8*We.B,mr))}if(!Ct)return di(Ke,6,"Output aborted.")}return 1}(k,M)),M.bc!=null&&M.bc(M),K&=1}return K?(k.cb=0,K):0}function fo(k,M,K,ae,le){le=k[M+K+32*ae]+(le>>3),k[M+K+32*ae]=-256&le?0>le?0:255:le}function Bh(k,M,K,ae,le,pe){fo(k,M,0,K,ae+le),fo(k,M,1,K,ae+pe),fo(k,M,2,K,ae-pe),fo(k,M,3,K,ae-le)}function ho(k){return(20091*k>>16)+k}function Af(k,M,K,ae){var le,pe=0,ge=i(16);for(le=0;4>le;++le){var ye=k[M+0]+k[M+8],be=k[M+0]-k[M+8],Ae=(35468*k[M+4]>>16)-ho(k[M+12]),Ue=ho(k[M+4])+(35468*k[M+12]>>16);ge[pe+0]=ye+Ue,ge[pe+1]=be+Ae,ge[pe+2]=be-Ae,ge[pe+3]=ye-Ue,pe+=4,M++}for(le=pe=0;4>le;++le)ye=(k=ge[pe+0]+4)+ge[pe+8],be=k-ge[pe+8],Ae=(35468*ge[pe+4]>>16)-ho(ge[pe+12]),fo(K,ae,0,0,ye+(Ue=ho(ge[pe+4])+(35468*ge[pe+12]>>16))),fo(K,ae,1,0,be+Ae),fo(K,ae,2,0,be-Ae),fo(K,ae,3,0,ye-Ue),pe++,ae+=32}function Wm(k,M,K,ae){var le=k[M+0]+4,pe=35468*k[M+4]>>16,ge=ho(k[M+4]),ye=35468*k[M+1]>>16;Bh(K,ae,0,le+ge,k=ho(k[M+1]),ye),Bh(K,ae,1,le+pe,k,ye),Bh(K,ae,2,le-pe,k,ye),Bh(K,ae,3,le-ge,k,ye)}function zm(k,M,K,ae,le){Af(k,M,K,ae),le&&Af(k,M+16,K,ae+4)}function vd(k,M,K,ae){pu(k,M+0,K,ae,1),pu(k,M+32,K,ae+128,1)}function Ry(k,M,K,ae){var le;for(k=k[M+0]+4,le=0;4>le;++le)for(M=0;4>M;++M)fo(K,ae,M,le,k)}function Uh(k,M,K,ae){k[M+0]&&Es(k,M+0,K,ae),k[M+16]&&Es(k,M+16,K,ae+4),k[M+32]&&Es(k,M+32,K,ae+128),k[M+48]&&Es(k,M+48,K,ae+128+4)}function Yn(k,M,K,ae){var le,pe=i(16);for(le=0;4>le;++le){var ge=k[M+0+le]+k[M+12+le],ye=k[M+4+le]+k[M+8+le],be=k[M+4+le]-k[M+8+le],Ae=k[M+0+le]-k[M+12+le];pe[0+le]=ge+ye,pe[8+le]=ge-ye,pe[4+le]=Ae+be,pe[12+le]=Ae-be}for(le=0;4>le;++le)ge=(k=pe[0+4*le]+3)+pe[3+4*le],ye=pe[1+4*le]+pe[2+4*le],be=pe[1+4*le]-pe[2+4*le],Ae=k-pe[3+4*le],K[ae+0]=ge+ye>>3,K[ae+16]=Ae+be>>3,K[ae+32]=ge-ye>>3,K[ae+48]=Ae-be>>3,ae+=64}function qh(k,M,K){var ae,le=M-32,pe=Ys,ge=255-k[le-1];for(ae=0;ae<K;++ae){var ye,be=pe,Ae=ge+k[M-1];for(ye=0;ye<K;++ye)k[M+ye]=be[Ae+k[le+ye]];M+=32}}function qg(k,M){qh(k,M,4)}function Vm(k,M){qh(k,M,8)}function Wg(k,M){qh(k,M,16)}function kc(k,M){var K;for(K=0;16>K;++K)n(k,M+32*K,k,M-32,16)}function kf(k,M){var K;for(K=16;0<K;--K)a(k,M,k[M-1],16),M+=32}function yd(k,M,K){var ae;for(ae=0;16>ae;++ae)a(M,K+32*ae,k,16)}function Ef(k,M){var K,ae=16;for(K=0;16>K;++K)ae+=k[M-1+32*K]+k[M+K-32];yd(ae>>5,k,M)}function Ha(k,M){var K,ae=8;for(K=0;16>K;++K)ae+=k[M-1+32*K];yd(ae>>4,k,M)}function Ec(k,M){var K,ae=8;for(K=0;16>K;++K)ae+=k[M+K-32];yd(ae>>4,k,M)}function Hl(k,M){yd(128,k,M)}function Yr(k,M,K){return k+2*M+K+2>>2}function Cf(k,M){var K,ae=M-32;for(ae=new Uint8Array([Yr(k[ae-1],k[ae+0],k[ae+1]),Yr(k[ae+0],k[ae+1],k[ae+2]),Yr(k[ae+1],k[ae+2],k[ae+3]),Yr(k[ae+2],k[ae+3],k[ae+4])]),K=0;4>K;++K)n(k,M+32*K,ae,0,ae.length)}function Cc(k,M){var K=k[M-1],ae=k[M-1+32],le=k[M-1+64],pe=k[M-1+96];se(k,M+0,16843009*Yr(k[M-1-32],K,ae)),se(k,M+32,16843009*Yr(K,ae,le)),se(k,M+64,16843009*Yr(ae,le,pe)),se(k,M+96,16843009*Yr(le,pe,pe))}function Pc(k,M){var K,ae=4;for(K=0;4>K;++K)ae+=k[M+K-32]+k[M-1+32*K];for(ae>>=3,K=0;4>K;++K)a(k,M+32*K,ae,4)}function Hm(k,M){var K=k[M-1+0],ae=k[M-1+32],le=k[M-1+64],pe=k[M-1-32],ge=k[M+0-32],ye=k[M+1-32],be=k[M+2-32],Ae=k[M+3-32];k[M+0+96]=Yr(ae,le,k[M-1+96]),k[M+1+96]=k[M+0+64]=Yr(K,ae,le),k[M+2+96]=k[M+1+64]=k[M+0+32]=Yr(pe,K,ae),k[M+3+96]=k[M+2+64]=k[M+1+32]=k[M+0+0]=Yr(ge,pe,K),k[M+3+64]=k[M+2+32]=k[M+1+0]=Yr(ye,ge,pe),k[M+3+32]=k[M+2+0]=Yr(be,ye,ge),k[M+3+0]=Yr(Ae,be,ye)}function xd(k,M){var K=k[M+1-32],ae=k[M+2-32],le=k[M+3-32],pe=k[M+4-32],ge=k[M+5-32],ye=k[M+6-32],be=k[M+7-32];k[M+0+0]=Yr(k[M+0-32],K,ae),k[M+1+0]=k[M+0+32]=Yr(K,ae,le),k[M+2+0]=k[M+1+32]=k[M+0+64]=Yr(ae,le,pe),k[M+3+0]=k[M+2+32]=k[M+1+64]=k[M+0+96]=Yr(le,pe,ge),k[M+3+32]=k[M+2+64]=k[M+1+96]=Yr(pe,ge,ye),k[M+3+64]=k[M+2+96]=Yr(ge,ye,be),k[M+3+96]=Yr(ye,be,be)}function Wh(k,M){var K=k[M-1+0],ae=k[M-1+32],le=k[M-1+64],pe=k[M-1-32],ge=k[M+0-32],ye=k[M+1-32],be=k[M+2-32],Ae=k[M+3-32];k[M+0+0]=k[M+1+64]=pe+ge+1>>1,k[M+1+0]=k[M+2+64]=ge+ye+1>>1,k[M+2+0]=k[M+3+64]=ye+be+1>>1,k[M+3+0]=be+Ae+1>>1,k[M+0+96]=Yr(le,ae,K),k[M+0+64]=Yr(ae,K,pe),k[M+0+32]=k[M+1+96]=Yr(K,pe,ge),k[M+1+32]=k[M+2+96]=Yr(pe,ge,ye),k[M+2+32]=k[M+3+96]=Yr(ge,ye,be),k[M+3+32]=Yr(ye,be,Ae)}function zh(k,M){var K=k[M+0-32],ae=k[M+1-32],le=k[M+2-32],pe=k[M+3-32],ge=k[M+4-32],ye=k[M+5-32],be=k[M+6-32],Ae=k[M+7-32];k[M+0+0]=K+ae+1>>1,k[M+1+0]=k[M+0+64]=ae+le+1>>1,k[M+2+0]=k[M+1+64]=le+pe+1>>1,k[M+3+0]=k[M+2+64]=pe+ge+1>>1,k[M+0+32]=Yr(K,ae,le),k[M+1+32]=k[M+0+96]=Yr(ae,le,pe),k[M+2+32]=k[M+1+96]=Yr(le,pe,ge),k[M+3+32]=k[M+2+96]=Yr(pe,ge,ye),k[M+3+64]=Yr(ge,ye,be),k[M+3+96]=Yr(ye,be,Ae)}function Vh(k,M){var K=k[M-1+0],ae=k[M-1+32],le=k[M-1+64],pe=k[M-1+96];k[M+0+0]=K+ae+1>>1,k[M+2+0]=k[M+0+32]=ae+le+1>>1,k[M+2+32]=k[M+0+64]=le+pe+1>>1,k[M+1+0]=Yr(K,ae,le),k[M+3+0]=k[M+1+32]=Yr(ae,le,pe),k[M+3+32]=k[M+1+64]=Yr(le,pe,pe),k[M+3+64]=k[M+2+64]=k[M+0+96]=k[M+1+96]=k[M+2+96]=k[M+3+96]=pe}function zg(k,M){var K=k[M-1+0],ae=k[M-1+32],le=k[M-1+64],pe=k[M-1+96],ge=k[M-1-32],ye=k[M+0-32],be=k[M+1-32],Ae=k[M+2-32];k[M+0+0]=k[M+2+32]=K+ge+1>>1,k[M+0+32]=k[M+2+64]=ae+K+1>>1,k[M+0+64]=k[M+2+96]=le+ae+1>>1,k[M+0+96]=pe+le+1>>1,k[M+3+0]=Yr(ye,be,Ae),k[M+2+0]=Yr(ge,ye,be),k[M+1+0]=k[M+3+32]=Yr(K,ge,ye),k[M+1+32]=k[M+3+64]=Yr(ae,K,ge),k[M+1+64]=k[M+3+96]=Yr(le,ae,K),k[M+1+96]=Yr(pe,le,ae)}function My(k,M){var K;for(K=0;8>K;++K)n(k,M+32*K,k,M-32,8)}function cu(k,M){var K;for(K=0;8>K;++K)a(k,M,k[M-1],8),M+=32}function Gl(k,M,K){var ae;for(ae=0;8>ae;++ae)a(M,K+32*ae,k,8)}function Yo(k,M){var K,ae=8;for(K=0;8>K;++K)ae+=k[M+K-32]+k[M-1+32*K];Gl(ae>>4,k,M)}function Hh(k,M){var K,ae=4;for(K=0;8>K;++K)ae+=k[M+K-32];Gl(ae>>3,k,M)}function Pf(k,M){var K,ae=4;for(K=0;8>K;++K)ae+=k[M-1+32*K];Gl(ae>>3,k,M)}function Gm(k,M){Gl(128,k,M)}function wd(k,M,K){var ae=k[M-K],le=k[M+0],pe=3*(le-ae)+Rc[1020+k[M-2*K]-k[M+K]],ge=cp[112+(pe+4>>3)];k[M-K]=Ys[255+ae+cp[112+(pe+3>>3)]],k[M+0]=Ys[255+le-ge]}function Tf(k,M,K,ae){var le=k[M+0],pe=k[M+K];return wl[255+k[M-2*K]-k[M-K]]>ae||wl[255+pe-le]>ae}function Gh(k,M,K,ae){return 4*wl[255+k[M-K]-k[M+0]]+wl[255+k[M-2*K]-k[M+K]]<=ae}function Ym(k,M,K,ae,le){var pe=k[M-3*K],ge=k[M-2*K],ye=k[M-K],be=k[M+0],Ae=k[M+K],Ue=k[M+2*K],rt=k[M+3*K];return 4*wl[255+ye-be]+wl[255+ge-Ae]>ae?0:wl[255+k[M-4*K]-pe]<=le&&wl[255+pe-ge]<=le&&wl[255+ge-ye]<=le&&wl[255+rt-Ue]<=le&&wl[255+Ue-Ae]<=le&&wl[255+Ae-be]<=le}function Yl(k,M,K,ae){var le=2*ae+1;for(ae=0;16>ae;++ae)Gh(k,M+ae,K,le)&&wd(k,M+ae,K)}function vl(k,M,K,ae){var le=2*ae+1;for(ae=0;16>ae;++ae)Gh(k,M+ae*K,1,le)&&wd(k,M+ae*K,1)}function yl(k,M,K,ae){var le;for(le=3;0<le;--le)Yl(k,M+=4*K,K,ae)}function Vg(k,M,K,ae){var le;for(le=3;0<le;--le)vl(k,M+=4,K,ae)}function Kl(k,M,K,ae,le,pe,ge,ye){for(pe=2*pe+1;0<le--;){if(Ym(k,M,K,pe,ge))if(Tf(k,M,K,ye))wd(k,M,K);else{var be=k,Ae=M,Ue=K,rt=be[Ae-2*Ue],nt=be[Ae-Ue],Ke=be[Ae+0],It=be[Ae+Ue],_t=be[Ae+2*Ue],We=27*(Ct=Rc[1020+3*(Ke-nt)+Rc[1020+rt-It]])+63>>7,ze=18*Ct+63>>7,Ct=9*Ct+63>>7;be[Ae-3*Ue]=Ys[255+be[Ae-3*Ue]+Ct],be[Ae-2*Ue]=Ys[255+rt+ze],be[Ae-Ue]=Ys[255+nt+We],be[Ae+0]=Ys[255+Ke-We],be[Ae+Ue]=Ys[255+It-ze],be[Ae+2*Ue]=Ys[255+_t-Ct]}M+=ae}}function po(k,M,K,ae,le,pe,ge,ye){for(pe=2*pe+1;0<le--;){if(Ym(k,M,K,pe,ge))if(Tf(k,M,K,ye))wd(k,M,K);else{var be=k,Ae=M,Ue=K,rt=be[Ae-Ue],nt=be[Ae+0],Ke=be[Ae+Ue],It=cp[112+((_t=3*(nt-rt))+4>>3)],_t=cp[112+(_t+3>>3)],We=It+1>>1;be[Ae-2*Ue]=Ys[255+be[Ae-2*Ue]+We],be[Ae-Ue]=Ys[255+rt+_t],be[Ae+0]=Ys[255+nt-It],be[Ae+Ue]=Ys[255+Ke-We]}M+=ae}}function Yh(k,M,K,ae,le,pe){Kl(k,M,K,1,16,ae,le,pe)}function Fi(k,M,K,ae,le,pe){Kl(k,M,1,K,16,ae,le,pe)}function bd(k,M,K,ae,le,pe){var ge;for(ge=3;0<ge;--ge)po(k,M+=4*K,K,1,16,ae,le,pe)}function _d(k,M,K,ae,le,pe){var ge;for(ge=3;0<ge;--ge)po(k,M+=4,1,K,16,ae,le,pe)}function Of(k,M,K,ae,le,pe,ge,ye){Kl(k,M,le,1,8,pe,ge,ye),Kl(K,ae,le,1,8,pe,ge,ye)}function Km(k,M,K,ae,le,pe,ge,ye){Kl(k,M,1,le,8,pe,ge,ye),Kl(K,ae,1,le,8,pe,ge,ye)}function Df(k,M,K,ae,le,pe,ge,ye){po(k,M+4*le,le,1,8,pe,ge,ye),po(K,ae+4*le,le,1,8,pe,ge,ye)}function Kh(k,M,K,ae,le,pe,ge,ye){po(k,M+4,1,le,8,pe,ge,ye),po(K,ae+4,1,le,8,pe,ge,ye)}function Tc(){this.ba=new xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Nn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Sd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hg(){this.ua=0,this.Wa=new ve,this.vb=new ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new R}function Fy(){this.xb=this.a=0,this.l=new Ac,this.ca=new xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hg,this.ab=0,this.gc=s(4,Xh),this.Oc=0}function Jh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ac,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function uu(k,M,K,ae,le,pe,ge){for(k=k==null?0:k[M+0],M=0;M<ge;++M)le[pe+M]=k+K[ae+M]&255,k=le[pe+M]}function Xm(k,M,K,ae,le,pe,ge){var ye;if(k==null)uu(null,null,K,ae,le,pe,ge);else for(ye=0;ye<ge;++ye)le[pe+ye]=k[M+ye]+K[ae+ye]&255}function Nd(k,M,K,ae,le,pe,ge){if(k==null)uu(null,null,K,ae,le,pe,ge);else{var ye,be=k[M+0],Ae=be,Ue=be;for(ye=0;ye<ge;++ye)Ae=Ue+(be=k[M+ye])-Ae,Ue=K[ae+ye]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=be,le[pe+ye]=Ue}}function Jm(k,M,K,ae){var le=M.width,pe=M.o;if(t(k!=null&&M!=null),0>K||0>=ae||K+ae>pe)return null;if(!k.Cc){if(k.ga==null){var ge;if(k.ga=new Jh,(ge=k.ga==null)||(ge=M.width*M.o,t(k.Gb.length==0),k.Gb=i(ge),k.Uc=0,k.Gb==null?ge=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,ge=1),ge=!ge),!ge){ge=k.ga;var ye=k.Fa,be=k.P,Ae=k.qc,Ue=k.mb,rt=k.nb,nt=be+1,Ke=Ae-1,It=ge.l;if(t(ye!=null&&Ue!=null&&M!=null),Cs[0]=null,Cs[1]=uu,Cs[2]=Xm,Cs[3]=Nd,ge.ca=Ue,ge.tb=rt,ge.c=M.width,ge.i=M.height,t(0<ge.c&&0<ge.i),1>=Ae)M=0;else if(ge.$a=ye[be+0]>>0&3,ge.Z=ye[be+0]>>2&3,ge.Lc=ye[be+0]>>4&3,be=ye[be+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||be)M=0;else if(It.put=bi,It.ac=Gn,It.bc=ot,It.ma=ge,It.width=M.width,It.height=M.height,It.Da=M.Da,It.v=M.v,It.va=M.va,It.j=M.j,It.o=M.o,ge.$a)e:{t(ge.$a==1),M=ft();t:for(;;){if(M==null){M=0;break e}if(t(ge!=null),ge.mc=M,M.c=ge.c,M.i=ge.i,M.l=ge.l,M.l.ma=ge,M.l.width=ge.c,M.l.height=ge.i,M.a=0,q(M.m,ye,nt,Ke),!et(ge.c,ge.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&xe(M.s)?(ge.ic=1,ye=M.c*M.i,M.Ta=null,M.Ua=0,M.V=i(ye),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(ge.ic=0,M=st(M,ge.c)),!M))break t;M=1;break e}ge.mc=null,M=0}else M=Ke>=ge.c*ge.i;ge=!M}if(ge)return null;k.ga.Lc!=1?k.Ga=0:ae=pe-K}t(k.ga!=null),t(K+ae<=pe);e:{if(M=(ye=k.ga).c,pe=ye.l.o,ye.$a==0){if(nt=k.rc,Ke=k.Vc,It=k.Fa,be=k.P+1+K*M,Ae=k.mb,Ue=k.nb+K*M,t(be<=k.P+k.qc),ye.Z!=0)for(t(Cs[ye.Z]!=null),ge=0;ge<ae;++ge)Cs[ye.Z](nt,Ke,It,be,Ae,Ue,M),nt=Ae,Ke=Ue,Ue+=M,be+=M;else for(ge=0;ge<ae;++ge)n(Ae,Ue,It,be,M),nt=Ae,Ke=Ue,Ue+=M,be+=M;k.rc=nt,k.Vc=Ke}else{if(t(ye.mc!=null),M=K+ae,t((ge=ye.mc)!=null),t(M<=ge.i),ge.C>=M)M=1;else if(ye.ic||tt(),ye.ic){ye=ge.V,nt=ge.Ba,Ke=ge.c;var _t=ge.i,We=(It=1,be=ge.$/Ke,Ae=ge.$%Ke,Ue=ge.m,rt=ge.s,ge.$),ze=Ke*_t,Ct=Ke*M,Et=rt.wc,Tt=We<Ct?Qt(rt,Ae,be):null;t(We<=ze),t(M<=_t),t(xe(rt));t:for(;;){for(;!Ue.h&&We<Ct;){if(Ae&Et||(Tt=Qt(rt,Ae,be)),t(Tt!=null),ie(Ue),256>(_t=bt(Tt.G[0],Tt.H[0],Ue)))ye[nt+We]=_t,++We,++Ae>=Ke&&(Ae=0,++be<=M&&!(be%16)&&Ne(ge,be));else{if(!(280>_t)){It=0;break t}_t=Mr(_t-256,Ue);var mr,ir=bt(Tt.G[4],Tt.H[4],Ue);if(ie(Ue),!(We>=(ir=ta(Ke,ir=Mr(ir,Ue)))&&ze-We>=_t)){It=0;break t}for(mr=0;mr<_t;++mr)ye[nt+We+mr]=ye[nt+We+mr-ir];for(We+=_t,Ae+=_t;Ae>=Ke;)Ae-=Ke,++be<=M&&!(be%16)&&Ne(ge,be);We<Ct&&Ae&Et&&(Tt=Qt(rt,Ae,be))}t(Ue.h==X(Ue))}Ne(ge,be>M?M:be);break t}!It||Ue.h&&We<ze?(It=0,ge.a=Ue.h?5:3):ge.$=We,M=It}else M=Se(ge,ge.V,ge.Ba,ge.c,ge.i,M,Je);if(!M){ae=0;break e}}K+ae>=pe&&(k.Cc=1),ae=1}if(!ae)return null;if(k.Cc&&((ae=k.ga)!=null&&(ae.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+K*le}function U(k,M,K,ae,le,pe){for(;0<le--;){var ge,ye=k,be=M+(K?1:0),Ae=k,Ue=M+(K?0:3);for(ge=0;ge<ae;++ge){var rt=Ae[Ue+4*ge];rt!=255&&(rt*=32897,ye[be+4*ge+0]=ye[be+4*ge+0]*rt>>23,ye[be+4*ge+1]=ye[be+4*ge+1]*rt>>23,ye[be+4*ge+2]=ye[be+4*ge+2]*rt>>23)}M+=pe}}function ue(k,M,K,ae,le){for(;0<ae--;){var pe;for(pe=0;pe<K;++pe){var ge=k[M+2*pe+0],ye=15&(Ae=k[M+2*pe+1]),be=4369*ye,Ae=(240&Ae|Ae>>4)*be>>16;k[M+2*pe+0]=(240&ge|ge>>4)*be>>16&240|(15&ge|ge<<4)*be>>16>>4&15,k[M+2*pe+1]=240&Ae|ye}M+=le}}function Pe(k,M,K,ae,le,pe,ge,ye){var be,Ae,Ue=255;for(Ae=0;Ae<le;++Ae){for(be=0;be<ae;++be){var rt=k[M+be];pe[ge+4*be]=rt,Ue&=rt}M+=K,ge+=ye}return Ue!=255}function Be(k,M,K,ae,le){var pe;for(pe=0;pe<le;++pe)K[ae+pe]=k[M+pe]>>8}function tt(){mo=U,Na=ue,ca=Pe,oi=Be}function kt(k,M,K){F[k]=function(ae,le,pe,ge,ye,be,Ae,Ue,rt,nt,Ke,It,_t,We,ze,Ct,Et){var Tt,mr=Et-1>>1,ir=ye[be+0]|Ae[Ue+0]<<16,Lr=rt[nt+0]|Ke[It+0]<<16;t(ae!=null);var sr=3*ir+Lr+131074>>2;for(M(ae[le+0],255&sr,sr>>16,_t,We),pe!=null&&(sr=3*Lr+ir+131074>>2,M(pe[ge+0],255&sr,sr>>16,ze,Ct)),Tt=1;Tt<=mr;++Tt){var Wn=ye[be+Tt]|Ae[Ue+Tt]<<16,zn=rt[nt+Tt]|Ke[It+Tt]<<16,Ln=ir+Wn+Lr+zn+524296,yn=Ln+2*(Wn+Lr)>>3;sr=yn+ir>>1,ir=(Ln=Ln+2*(ir+zn)>>3)+Wn>>1,M(ae[le+2*Tt-1],255&sr,sr>>16,_t,We+(2*Tt-1)*K),M(ae[le+2*Tt-0],255&ir,ir>>16,_t,We+(2*Tt-0)*K),pe!=null&&(sr=Ln+Lr>>1,ir=yn+zn>>1,M(pe[ge+2*Tt-1],255&sr,sr>>16,ze,Ct+(2*Tt-1)*K),M(pe[ge+2*Tt+0],255&ir,ir>>16,ze,Ct+(2*Tt+0)*K)),ir=Wn,Lr=zn}1&Et||(sr=3*ir+Lr+131074>>2,M(ae[le+Et-1],255&sr,sr>>16,_t,We+(Et-1)*K),pe!=null&&(sr=3*Lr+ir+131074>>2,M(pe[ge+Et-1],255&sr,sr>>16,ze,Ct+(Et-1)*K)))}}function $t(){vo[Yg]=x3,vo[Pd]=Td,vo[wb]=w3,vo[r0]=hp,vo[n0]=zf,vo[Aa]=l0,vo[Kg]=By,vo[up]=Td,vo[Uf]=hp,vo[a0]=zf,vo[i0]=l0}function ur(k){return k&-16384?0>k?0:255:k>>Od}function Fr(k,M){return ur((19077*k>>8)+(26149*M>>8)-14234)}function pn(k,M,K){return ur((19077*k>>8)-(6419*M>>8)-(13320*K>>8)+8708)}function fn(k,M){return ur((19077*k>>8)+(33050*M>>8)-17685)}function In(k,M,K,ae,le){ae[le+0]=Fr(k,K),ae[le+1]=pn(k,M,K),ae[le+2]=fn(k,M)}function Ga(k,M,K,ae,le){ae[le+0]=fn(k,M),ae[le+1]=pn(k,M,K),ae[le+2]=Fr(k,K)}function ii(k,M,K,ae,le){var pe=pn(k,M,K);M=pe<<3&224|fn(k,M)>>3,ae[le+0]=248&Fr(k,K)|pe>>5,ae[le+1]=M}function Si(k,M,K,ae,le){var pe=240&fn(k,M)|15;ae[le+0]=240&Fr(k,K)|pn(k,M,K)>>4,ae[le+1]=pe}function As(k,M,K,ae,le){ae[le+0]=255,In(k,M,K,ae,le+1)}function rs(k,M,K,ae,le){Ga(k,M,K,ae,le),ae[le+3]=255}function Xl(k,M,K,ae,le){In(k,M,K,ae,le),ae[le+3]=255}function Ko(k,M){return 0>k?0:k>M?M:k}function xl(k,M,K){F[k]=function(ae,le,pe,ge,ye,be,Ae,Ue,rt){for(var nt=Ue+(-2&rt)*K;Ue!=nt;)M(ae[le+0],pe[ge+0],ye[be+0],Ae,Ue),M(ae[le+1],pe[ge+0],ye[be+0],Ae,Ue+K),le+=2,++ge,++be,Ue+=2*K;1&rt&&M(ae[le+0],pe[ge+0],ye[be+0],Ae,Ue)}}function Ad(k,M,K){return K==0?k==0?M==0?6:5:M==0?4:0:K}function Zm(k,M,K,ae,le){switch(k>>>30){case 3:pu(M,K,ae,le,0);break;case 2:Kn(M,K,ae,le);break;case 1:Es(M,K,ae,le)}}function Zh(k,M){var K,ae,le=M.M,pe=M.Nb,ge=k.oc,ye=k.pc+40,be=k.oc,Ae=k.pc+584,Ue=k.oc,rt=k.pc+600;for(K=0;16>K;++K)ge[ye+32*K-1]=129;for(K=0;8>K;++K)be[Ae+32*K-1]=129,Ue[rt+32*K-1]=129;for(0<le?ge[ye-1-32]=be[Ae-1-32]=Ue[rt-1-32]=129:(a(ge,ye-32-1,127,21),a(be,Ae-32-1,127,9),a(Ue,rt-32-1,127,9)),ae=0;ae<k.za;++ae){var nt=M.ya[M.aa+ae];if(0<ae){for(K=-1;16>K;++K)n(ge,ye+32*K-4,ge,ye+32*K+12,4);for(K=-1;8>K;++K)n(be,Ae+32*K-4,be,Ae+32*K+4,4),n(Ue,rt+32*K-4,Ue,rt+32*K+4,4)}var Ke=k.Gd,It=k.Hd+ae,_t=nt.ad,We=nt.Hc;if(0<le&&(n(ge,ye-32,Ke[It].y,0,16),n(be,Ae-32,Ke[It].f,0,8),n(Ue,rt-32,Ke[It].ea,0,8)),nt.Za){var ze=ge,Ct=ye-32+16;for(0<le&&(ae>=k.za-1?a(ze,Ct,Ke[It].y[15],4):n(ze,Ct,Ke[It+1].y,0,4)),K=0;4>K;K++)ze[Ct+128+K]=ze[Ct+256+K]=ze[Ct+384+K]=ze[Ct+0+K];for(K=0;16>K;++K,We<<=2)ze=ge,Ct=ye+Uy[K],bl[nt.Ob[K]](ze,Ct),Zm(We,_t,16*+K,ze,Ct)}else if(ze=Ad(ae,le,nt.Ob[0]),Ks[ze](ge,ye),We!=0)for(K=0;16>K;++K,We<<=2)Zm(We,_t,16*+K,ge,ye+Uy[K]);for(K=nt.Gc,ze=Ad(ae,le,nt.Dd),go[ze](be,Ae),go[ze](Ue,rt),We=_t,ze=be,Ct=Ae,255&(nt=K>>0)&&(170&nt?mu(We,256,ze,Ct):Xo(We,256,ze,Ct)),nt=Ue,We=rt,255&(K>>=8)&&(170&K?mu(_t,320,nt,We):Xo(_t,320,nt,We)),le<k.Ub-1&&(n(Ke[It].y,0,ge,ye+480,16),n(Ke[It].f,0,be,Ae+224,8),n(Ke[It].ea,0,Ue,rt+224,8)),K=8*pe*k.B,Ke=k.sa,It=k.ta+16*ae+16*pe*k.R,_t=k.qa,nt=k.ra+8*ae+K,We=k.Ha,ze=k.Ia+8*ae+K,K=0;16>K;++K)n(Ke,It+K*k.R,ge,ye+32*K,16);for(K=0;8>K;++K)n(_t,nt+K*k.B,be,Ae+32*K,8),n(We,ze+K*k.B,Ue,rt+32*K,8)}}function If(k,M,K,ae,le,pe,ge,ye,be){var Ae=[0],Ue=[0],rt=0,nt=be!=null?be.kd:0,Ke=be??new Sd;if(k==null||12>K)return 7;Ke.data=k,Ke.w=M,Ke.ha=K,M=[M],K=[K],Ke.gb=[Ke.gb];e:{var It=M,_t=K,We=Ke.gb;if(t(k!=null),t(_t!=null),t(We!=null),We[0]=0,12<=_t[0]&&!r(k,It[0],"RIFF")){if(r(k,It[0]+8,"WEBP")){We=3;break e}var ze=ke(k,It[0]+4);if(12>ze||4294967286<ze){We=3;break e}if(nt&&ze>_t[0]-8){We=7;break e}We[0]=ze,It[0]+=12,_t[0]-=12}We=0}if(We!=0)return We;for(ze=0<Ke.gb[0],K=K[0];;){e:{var Ct=k;_t=M,We=K;var Et=Ae,Tt=Ue,mr=It=[0];if((sr=rt=[rt])[0]=0,8>We[0])We=7;else{if(!r(Ct,_t[0],"VP8X")){if(ke(Ct,_t[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var ir=ke(Ct,_t[0]+8),Lr=1+te(Ct,_t[0]+12);if(2147483648<=Lr*(Ct=1+te(Ct,_t[0]+15))){We=3;break e}mr!=null&&(mr[0]=ir),Et!=null&&(Et[0]=Lr),Tt!=null&&(Tt[0]=Ct),_t[0]+=18,We[0]-=18,sr[0]=1}We=0}}if(rt=rt[0],It=It[0],We!=0)return We;if(_t=!!(2&It),!ze&&rt)return 3;if(pe!=null&&(pe[0]=!!(16&It)),ge!=null&&(ge[0]=_t),ye!=null&&(ye[0]=0),ge=Ae[0],It=Ue[0],rt&&_t&&be==null){We=0;break}if(4>K){We=7;break}if(ze&&rt||!ze&&!rt&&!r(k,M[0],"ALPH")){K=[K],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{ir=k,We=M,ze=K;var sr=Ke.gb;Et=Ke.na,Tt=Ke.P,mr=Ke.Sa,Lr=22,t(ir!=null),t(ze!=null),Ct=We[0];var Wn=ze[0];for(t(Et!=null),t(mr!=null),Et[0]=null,Tt[0]=null,mr[0]=0;;){if(We[0]=Ct,ze[0]=Wn,8>Wn){We=7;break e}var zn=ke(ir,Ct+4);if(4294967286<zn){We=3;break e}var Ln=8+zn+1&-2;if(Lr+=Ln,0<sr&&Lr>sr){We=3;break e}if(!r(ir,Ct,"VP8 ")||!r(ir,Ct,"VP8L")){We=0;break e}if(Wn[0]<Ln){We=7;break e}r(ir,Ct,"ALPH")||(Et[0]=ir,Tt[0]=Ct+8,mr[0]=zn),Ct+=Ln,Wn-=Ln}}if(K=K[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],We!=0)break}K=[K],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(sr=k,We=M,ze=K,Et=Ke.gb[0],Tt=Ke.Ja,mr=Ke.xa,ir=We[0],Ct=!r(sr,ir,"VP8 "),Lr=!r(sr,ir,"VP8L"),t(sr!=null),t(ze!=null),t(Tt!=null),t(mr!=null),8>ze[0])We=7;else{if(Ct||Lr){if(sr=ke(sr,ir+4),12<=Et&&sr>Et-12){We=3;break e}if(nt&&sr>ze[0]-8){We=7;break e}Tt[0]=sr,We[0]+=8,ze[0]-=8,mr[0]=Lr}else mr[0]=5<=ze[0]&&sr[ir+0]==47&&!(sr[ir+4]>>5),Tt[0]=ze[0];We=0}if(K=K[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],M=M[0],We!=0)break;if(4294967286<Ke.Ja)return 3;if(ye==null||_t||(ye[0]=Ke.xa?2:1),ge=[ge],It=[It],Ke.xa){if(5>K){We=7;break}ye=ge,nt=It,_t=pe,k==null||5>K?k=0:5<=K&&k[M+0]==47&&!(k[M+4]>>5)?(ze=[0],sr=[0],Et=[0],q(Tt=new O,k,M,K),yt(Tt,ze,sr,Et)?(ye!=null&&(ye[0]=ze[0]),nt!=null&&(nt[0]=sr[0]),_t!=null&&(_t[0]=Et[0]),k=1):k=0):k=0}else{if(10>K){We=7;break}ye=It,k==null||10>K||!Bg(k,M+3,K-3)?k=0:(nt=k[M+0]|k[M+1]<<8|k[M+2]<<16,_t=16383&(k[M+7]<<8|k[M+6]),k=16383&(k[M+9]<<8|k[M+8]),1&nt||3<(nt>>1&7)||!(nt>>4&1)||nt>>5>=Ke.Ja||!_t||!k?k=0:(ge&&(ge[0]=_t),ye&&(ye[0]=k),k=1))}if(!k||(ge=ge[0],It=It[0],rt&&(Ae[0]!=ge||Ue[0]!=It)))return 3;be!=null&&(be[0]=Ke,be.offset=M-be.w,t(4294967286>M-be.w),t(be.offset==be.ha-K));break}return We==0||We==7&&rt&&be==null?(pe!=null&&(pe[0]|=Ke.na!=null&&0<Ke.na.length),ae!=null&&(ae[0]=ge),le!=null&&(le[0]=It),0):We}function Qh(k,M,K){var ae=M.width,le=M.height,pe=0,ge=0,ye=ae,be=le;if(M.Da=k!=null&&0<k.Da,M.Da&&(ye=k.cd,be=k.bd,pe=k.v,ge=k.j,11>K||(pe&=-2,ge&=-2),0>pe||0>ge||0>=ye||0>=be||pe+ye>ae||ge+be>le))return 0;if(M.v=pe,M.j=ge,M.va=pe+ye,M.o=ge+be,M.U=ye,M.T=be,M.da=k!=null&&0<k.da,M.da){if(!Ge(ye,be,K=[k.ib],pe=[k.hb]))return 0;M.ib=K[0],M.hb=pe[0]}return M.ob=k!=null&&k.ob,M.Kb=k==null||!k.Sd,M.da&&(M.ob=M.ib<3*ae/4&&M.hb<3*le/4,M.Kb=0),1}function ep(k){if(k==null)return 2;if(11>k.S){var M=k.f.RGBA;M.fb+=(k.height-1)*M.A,M.A=-M.A}else M=k.f.kb,k=k.height,M.O+=(k-1)*M.fa,M.fa=-M.fa,M.N+=(k-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(k-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(k-1)*M.lb,M.lb=-M.lb);return 0}function Rf(k,M,K,ae){if(ae==null||0>=k||0>=M)return 2;if(K!=null){if(K.Da){var le=K.cd,pe=K.bd,ge=-2&K.v,ye=-2&K.j;if(0>ge||0>ye||0>=le||0>=pe||ge+le>k||ye+pe>M)return 2;k=le,M=pe}if(K.da){if(!Ge(k,M,le=[K.ib],pe=[K.hb]))return 2;k=le[0],M=pe[0]}}ae.width=k,ae.height=M;e:{var be=ae.width,Ae=ae.height;if(k=ae.S,0>=be||0>=Ae||!(k>=Yg&&13>k))k=2;else{if(0>=ae.Rd&&ae.sd==null){ge=pe=le=M=0;var Ue=(ye=be*c0[k])*Ae;if(11>k||(pe=(Ae+1)/2*(M=(be+1)/2),k==12&&(ge=(le=be)*Ae)),(Ae=i(Ue+2*pe+ge))==null){k=1;break e}ae.sd=Ae,11>k?((be=ae.f.RGBA).eb=Ae,be.fb=0,be.A=ye,be.size=Ue):((be=ae.f.kb).y=Ae,be.O=0,be.fa=ye,be.Fd=Ue,be.f=Ae,be.N=0+Ue,be.Ab=M,be.Cd=pe,be.ea=Ae,be.W=0+Ue+pe,be.Db=M,be.Ed=pe,k==12&&(be.F=Ae,be.J=0+Ue+2*pe),be.Tc=ge,be.lb=le)}if(M=1,le=ae.S,pe=ae.width,ge=ae.height,le>=Yg&&13>le)if(11>le)k=ae.f.RGBA,M&=(ye=Math.abs(k.A))*(ge-1)+pe<=k.size,M&=ye>=pe*c0[le],M&=k.eb!=null;else{k=ae.f.kb,ye=(pe+1)/2,Ue=(ge+1)/2,be=Math.abs(k.fa),Ae=Math.abs(k.Ab);var rt=Math.abs(k.Db),nt=Math.abs(k.lb),Ke=nt*(ge-1)+pe;M&=be*(ge-1)+pe<=k.Fd,M&=Ae*(Ue-1)+ye<=k.Cd,M=(M&=rt*(Ue-1)+ye<=k.Ed)&be>=pe&Ae>=ye&rt>=ye,M&=k.y!=null,M&=k.f!=null,M&=k.ea!=null,le==12&&(M&=nt>=pe,M&=Ke<=k.Tc,M&=k.F!=null)}else M=0;k=M?0:2}}return k!=0||K!=null&&K.fd&&(k=ep(ae)),k}var si=64,tp=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],rp=24,np=32,ap=8,Vs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Le("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(k){return k},F.Predictor2=function(k,M,K){return M[K+0]},F.Predictor3=function(k,M,K){return M[K+1]},F.Predictor4=function(k,M,K){return M[K-1]},F.Predictor5=function(k,M,K){return he(he(k,M[K+1]),M[K+0])},F.Predictor6=function(k,M,K){return he(k,M[K-1])},F.Predictor7=function(k,M,K){return he(k,M[K+0])},F.Predictor8=function(k,M,K){return he(M[K-1],M[K+0])},F.Predictor9=function(k,M,K){return he(M[K+0],M[K+1])},F.Predictor10=function(k,M,K){return he(he(k,M[K-1]),he(M[K+0],M[K+1]))},F.Predictor11=function(k,M,K){var ae=M[K+0];return 0>=at(ae>>24&255,k>>24&255,(M=M[K-1])>>24&255)+at(ae>>16&255,k>>16&255,M>>16&255)+at(ae>>8&255,k>>8&255,M>>8&255)+at(255&ae,255&k,255&M)?ae:k},F.Predictor12=function(k,M,K){var ae=M[K+0];return(Ee((k>>24&255)+(ae>>24&255)-((M=M[K-1])>>24&255))<<24|Ee((k>>16&255)+(ae>>16&255)-(M>>16&255))<<16|Ee((k>>8&255)+(ae>>8&255)-(M>>8&255))<<8|Ee((255&k)+(255&ae)-(255&M)))>>>0},F.Predictor13=function(k,M,K){var ae=M[K-1];return(Me((k=he(k,M[K+0]))>>24&255,ae>>24&255)<<24|Me(k>>16&255,ae>>16&255)<<16|Me(k>>8&255,ae>>8&255)<<8|Me(k>>0&255,ae>>0&255))>>>0};var Mf=F.PredictorAdd0;F.PredictorAdd1=ct,Le("Predictor2","PredictorAdd2"),Le("Predictor3","PredictorAdd3"),Le("Predictor4","PredictorAdd4"),Le("Predictor5","PredictorAdd5"),Le("Predictor6","PredictorAdd6"),Le("Predictor7","PredictorAdd7"),Le("Predictor8","PredictorAdd8"),Le("Predictor9","PredictorAdd9"),Le("Predictor10","PredictorAdd10"),Le("Predictor11","PredictorAdd11"),Le("Predictor12","PredictorAdd12"),Le("Predictor13","PredictorAdd13");var du=F.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var Gg,Hs=F.ColorIndexInverseTransform,ip=F.MapARGB,Qm=F.VP8LColorIndexInverseTransformAlpha,sp=F.MapAlpha,Oc=F.VP8LPredictorsAdd=[];Oc.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var kd,Gs,ks,Ed,fu,hu,op,pu,Kn,mu,Es,Xo,Ff,e0,Lf,jf,$f,Jo,gu,Dc,vu,yu,Cd,ps,mo,Na,ca,oi,Ni=i(511),Ic=i(2041),lp=i(225),Bf=i(767),t0=0,Rc=Ic,cp=lp,Ys=Bf,wl=Ni,Yg=0,Pd=1,wb=2,r0=3,n0=4,Aa=5,Kg=6,up=7,Uf=8,a0=9,i0=10,s0=[2,3,7],Xg=[3,3,11],qf=[280,256,256,256,40],bb=[0,1,1,1,0],m3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],g3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_b=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jg=8,dp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],o0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wf=null,Ly=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Sb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Nb=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],v3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],y3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$y=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ks=[],bl=[],go=[],Mc=1,fp=2,Cs=[],vo=[];kt("UpsampleRgbLinePair",In,3),kt("UpsampleBgrLinePair",Ga,3),kt("UpsampleRgbaLinePair",Xl,4),kt("UpsampleBgraLinePair",rs,4),kt("UpsampleArgbLinePair",As,4),kt("UpsampleRgba4444LinePair",Si,2),kt("UpsampleRgb565LinePair",ii,2);var x3=F.UpsampleRgbLinePair,w3=F.UpsampleBgrLinePair,Td=F.UpsampleRgbaLinePair,hp=F.UpsampleBgraLinePair,zf=F.UpsampleArgbLinePair,l0=F.UpsampleRgba4444LinePair,By=F.UpsampleRgb565LinePair,xu=16,Jl=1<<xu-1,ua=-227,ga=482,Od=6,ms=0,yo=i(256),Vf=i(256),pp=i(256),xo=i(256),Zg=i(ga-ua),Ab=i(ga-ua);xl("YuvToRgbRow",In,3),xl("YuvToBgrRow",Ga,3),xl("YuvToRgbaRow",Xl,4),xl("YuvToBgraRow",rs,4),xl("YuvToArgbRow",As,4),xl("YuvToRgba4444Row",Si,2),xl("YuvToRgb565Row",ii,2);var Uy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hf=[0,2,8],kb=[8,7,6,4,4,2,2,2,1,1,1,1],wu=1;this.WebPDecodeRGBA=function(k,M,K,ae,le){var pe=Pd,ge=new Tc,ye=new xn;ge.ba=ye,ye.S=pe,ye.width=[ye.width],ye.height=[ye.height];var be=ye.width,Ae=ye.height,Ue=new Sn;if(Ue==null||k==null)var rt=2;else t(Ue!=null),rt=If(k,M,K,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(rt!=0?be=0:(be!=null&&(be[0]=Ue.width[0]),Ae!=null&&(Ae[0]=Ue.height[0]),be=1),be){ye.width=ye.width[0],ye.height=ye.height[0],ae!=null&&(ae[0]=ye.width),le!=null&&(le[0]=ye.height);e:{if(ae=new Ac,(le=new Sd).data=k,le.w=M,le.ha=K,le.kd=1,M=[0],t(le!=null),((k=If(le.data,le.w,le.ha,null,null,null,M,null,le))==0||k==7)&&M[0]&&(k=4),(M=k)==0){if(t(ge!=null),ae.data=le.data,ae.w=le.w+le.offset,ae.ha=le.ha-le.offset,ae.put=bi,ae.ac=Gn,ae.bc=ot,ae.ma=ge,le.xa){if((k=ft())==null){ge=1;break e}if(function(nt,Ke){var It=[0],_t=[0],We=[0];t:for(;;){if(nt==null)return 0;if(Ke==null)return nt.a=2,0;if(nt.l=Ke,nt.a=0,q(nt.m,Ke.data,Ke.w,Ke.ha),!yt(nt.m,It,_t,We)){nt.a=3;break t}if(nt.xb=fp,Ke.width=It[0],Ke.height=_t[0],!et(It[0],_t[0],1,nt,null))break t;return 1}return t(nt.a!=0),0}(k,ae)){if(ae=(M=Rf(ae.width,ae.height,ge.Oa,ge.ba))==0){t:{ae=k;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((K=ae.l)!=null),t((le=K.ma)!=null),ae.xb!=0){if(ae.ca=le.ba,ae.tb=le.tb,t(ae.ca!=null),!Qh(le.Oa,K,r0)){ae.a=2;break r}if(!st(ae,K.width)||K.da)break r;if((K.da||fr(ae.ca.S))&&tt(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&tt()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Re(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Se(ae,ae.V,ae.Ba,ae.c,ae.i,K.o,we))break r;le.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(M=k.a)}else M=k.a}else{if((k=new Va)==null){ge=1;break e}if(k.Fa=le.na,k.P=le.P,k.qc=le.Sa,Ug(k,ae)){if((M=Rf(ae.width,ae.height,ge.Oa,ge.ba))==0){if(k.Aa=0,K=ge.Oa,t((le=k)!=null),K!=null){if(0<(be=0>(be=K.Md)?0:100<be?255:255*be/100)){for(Ae=Ue=0;4>Ae;++Ae)12>(rt=le.pb[Ae]).lc&&(rt.ia=be*kb[0>rt.lc?0:rt.lc]>>3),Ue|=rt.ia;Ue&&(alert("todo:VP8InitRandom"),le.ia=1)}le.Ga=K.Id,100<le.Ga?le.Ga=100:0>le.Ga&&(le.Ga=0)}Nf(k,ae)||(M=k.a)}}else M=k.a}M==0&&ge.Oa!=null&&ge.Oa.fd&&(M=ep(ge.ba))}ge=M}pe=ge!=0?null:11>pe?ye.f.RGBA.eb:ye.f.kb.y}else pe=null;return pe};var c0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(F,L){for(var W="",T=0;T<4;T++)W+=String.fromCharCode(F[L++]);return W}function d(F,L){return(F[L+0]<<0|F[L+1]<<8|F[L+2]<<16)>>>0}function f(F,L){return(F[L+0]<<0|F[L+1]<<8|F[L+2]<<16|F[L+3]<<24)>>>0}new c;var h=[0],m=[0],w=[],g=new c,y=e,b=function(F,L){var W={},T=0,R=!1,j=0,Y=0;if(W.frames=[],!function(J,X,ne,ie){for(var oe=0;oe<ie;oe++)if(J[X+oe]!=ne.charCodeAt(oe))return!0;return!1}(F,L,"RIFF",4)){for(f(F,L+=4),L+=8;L<F.length;){var Z=u(F,L),re=f(F,L+=4);L+=4;var z=re+(1&re);switch(Z){case"VP8 ":case"VP8L":W.frames[T]===void 0&&(W.frames[T]={}),(G=W.frames[T]).src_off=R?Y:L-8,G.src_size=j+re+8,T++,R&&(R=!1,j=0,Y=0);break;case"VP8X":(G=W.header={}).feature_flags=F[L];var q=L+4;G.canvas_width=1+d(F,q),q+=3,G.canvas_height=1+d(F,q),q+=3;break;case"ALPH":R=!0,j=z+8,Y=L-8;break;case"ANIM":(G=W.header).bgcolor=f(F,L),q=L+4,G.loop_count=(Q=F)[(O=q)+0]<<0|Q[O+1]<<8,q+=2;break;case"ANMF":var B,G;(G=W.frames[T]={}).offset_x=2*d(F,L),L+=3,G.offset_y=2*d(F,L),L+=3,G.width=1+d(F,L),L+=3,G.height=1+d(F,L),L+=3,G.duration=d(F,L),L+=3,B=F[L++],G.dispose=1&B,G.blend=B>>1&1}Z!="ANMF"&&(L+=z)}var Q,O;return W}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var _=b.header?b.header:null,N=b.frames?b.frames:null;if(_){_.loop_counter=_.loop_count,h=[_.canvas_height],m=[_.canvas_width];for(var E=0;E<N.length&&N[E].blend!=0;E++);}var C=N[0],D=g.WebPDecodeRGBA(y,C.src_off,C.src_size,m,h);C.rgba=D,C.imgwidth=m[0],C.imgheight=h[0];for(var P=0;P<m[0]*h[0]*4;P++)w[P]=D[P];return this.width=m,this.height=h,this.data=w,this}(function(e){var t=function(){return typeof pO=="function"},r=function(h,m,w,g){var y=4,b=s;switch(g){case e.image_compression.FAST:y=1,b=i;break;case e.image_compression.MEDIUM:y=6,b=o;break;case e.image_compression.SLOW:y=9,b=c}h=n(h,m,w,b);var _=pO(h,{level:y});return e.__addimage__.arrayBufferToBinaryString(_)},n=function(h,m,w,g){for(var y,b,_,N=h.length/m,E=new Uint8Array(h.length+N),C=d(),D=0;D<N;D+=1){if(_=D*m,y=h.subarray(_,_+m),g)E.set(g(y,w,b),_+D);else{for(var P,F=C.length,L=[];P<F;P+=1)L[P]=C[P](y,w,b);var W=f(L.concat());E.set(L[W],_+D)}b=y}return E},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var w,g=[],y=h.length;g[0]=1;for(var b=0;b<y;b+=1)w=h[b-m]||0,g[b+1]=h[b]-w+256&255;return g},s=function(h,m,w){var g,y=[],b=h.length;y[0]=2;for(var _=0;_<b;_+=1)g=w&&w[_]||0,y[_+1]=h[_]-g+256&255;return y},o=function(h,m,w){var g,y,b=[],_=h.length;b[0]=3;for(var N=0;N<_;N+=1)g=h[N-m]||0,y=w&&w[N]||0,b[N+1]=h[N]+256-(g+y>>>1)&255;return b},c=function(h,m,w){var g,y,b,_,N=[],E=h.length;N[0]=4;for(var C=0;C<E;C+=1)g=h[C-m]||0,y=w&&w[C]||0,b=w&&w[C-m]||0,_=u(g,y,b),N[C+1]=h[C]-_+256&255;return N},u=function(h,m,w){if(h===m&&m===w)return h;var g=Math.abs(m-w),y=Math.abs(h-w),b=Math.abs(h+m-w-w);return g<=y&&g<=b?h:y<=b?m:w},d=function(){return[a,i,s,o,c]},f=function(h){var m=h.map(function(w){return w.reduce(function(g,y){return g+Math.abs(y)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,w,g){var y,b,_,N,E,C,D,P,F,L,W,T,R,j,Y,Z=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(_=new GRe(h)).imgData,b=_.bits,y=_.colorSpace,E=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){F=(P=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,W=new Uint8Array(F*_.colors),L=new Uint8Array(F);var z,q=_.pixelBitlength-_.bits;for(j=0,Y=0;j<F;j++){for(R=P[j],z=0;z<q;)W[Y++]=R>>>z&255,z+=_.bits;L[j]=R>>>z&255}}if(_.bits===16){F=(P=new Uint32Array(_.decodePixels().buffer)).length,W=new Uint8Array(F*(32/_.pixelBitlength)*_.colors),L=new Uint8Array(F*(32/_.pixelBitlength)),T=_.colors>1,j=0,Y=0;for(var B=0;j<F;)R=P[j++],W[Y++]=R>>>0&255,T&&(W[Y++]=R>>>16&255,R=P[j++],W[Y++]=R>>>0&255),L[B++]=R>>>16&255;b=8}g!==e.image_compression.NONE&&t()?(h=r(W,_.width*_.colors,_.colors,g),D=r(L,_.width,1,g)):(h=W,D=L,Z=void 0)}if(_.colorType===3&&(y=this.color_spaces.INDEXED,C=_.palette,_.transparency.indexed)){var G=_.transparency.indexed,Q=0;for(j=0,F=G.length;j<F;++j)Q+=G[j];if((Q/=255)===F-1&&G.indexOf(0)!==-1)N=[G.indexOf(0)];else if(Q!==F){for(P=_.decodePixels(),L=new Uint8Array(P.length),j=0,F=P.length;j<F;j++)L[j]=G[P[j]];D=r(L,_.width,1)}}var O=function(J){var X;switch(J){case e.image_compression.FAST:X=11;break;case e.image_compression.MEDIUM:X=13;break;case e.image_compression.SLOW:X=14;break;default:X=12}return X}(g);return Z===this.decode.FLATE_DECODE&&(re="/Predictor "+O+" "),re+="/Colors "+E+" /BitsPerComponent "+b+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:w,data:h,index:m,filter:Z,decodeParameters:re,transparency:N,palette:C,sMask:D,predictor:O,width:_.width,height:_.height,bitsPerComponent:b,colorSpace:y}}}})(Hr.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new YRe(t),s=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:o},d=new aT(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(Hr.API),Iu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Iu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ra.log("bit decode error:"+r)}},Iu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[s+4*o]=c.blue,this.data[s+4*o+1]=c.green,this.data[s+4*o+2]=c.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Iu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,c=15&i,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},Iu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Iu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=e}},Iu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,c=(s>>5&r)/r*255|0,u=(s>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Iu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Iu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},Iu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Iu(t,!1),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new aT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Hr.API),cz.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new cz(t),s=i.width,o=i.height,c={data:i.getData(),width:s,height:o},u=new aT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Hr.API),Hr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];i[o++]=d,i[o++]=f,i[o++]=h,s[c++]=m}var w=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:w,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Hr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Iv=Hr.API,R_=Iv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,w=0,g=o[0]||c,y=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(h=f&&Ca(u[n])==="object"&&!isNaN(parseInt(u[n][w],10))?u[n][w]/d:0,y.push((o[n]||g)/c+h)),w=n;return y},iz=Iv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Iv.processArabic&&(e=Iv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:R_.apply(this,arguments).reduce(function(i,s){return i+s},0)},sz=function(e,t,r,n){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var c=i;for(o=0;i!==s;)o+t[i]>n&&(a.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},oz=function(e,t,r){r||(r={});var n,a,i,s,o,c,u,d=[],f=[d],h=r.textIndent||0,m=0,w=0,g=e.split(" "),y=R_.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),_=[];g.map(function(E){(E=E.split(/\s*\n/)).length>1?_=_.concat(E.map(function(C,D){return(D&&C.length?`
`:"")+C})):_.push(E[0])}),g=_,c=iz.apply(this,[b,r])}for(i=0,s=g.length;i<s;i++){var N=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),h+m+(w=(a=R_.apply(this,[n,r])).reduce(function(E,C){return E+C},0))>t||N){if(w>t){for(o=sz.apply(this,[n,a,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);w=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(E,C){return E+C},0)}else d=[n];f.push(d),h=w+c,m=y}else d.push(n),h+=m+w,m=y}return u=c?function(E,C){return(C?b:"")+E.join(" ")}:function(E){return E.join(" ")},f.map(u)},Iv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(oz.apply(this,[n[o],s,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},s=e.__fontmetrics__.compress=function(f){var h,m,w,g,y=["{"];for(var b in f){if(h=f[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=i(b).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(w=i(h).slice(3),g="-"):(w=i(h).slice(2),g=""),w=g+w.slice(0,-1)+n[w.slice(-1)];else{if(Ca(h)!=="object")throw new Error("Don't know what to do with value type "+Ca(h)+".");w=s(h)}y.push(m+w)}return y.push("}"),y.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,w,g,y={},b=1,_=y,N=[],E="",C="",D=f.length-1,P=1;P<D;P+=1)(g=f[P])=="'"?h?(w=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(N.push([_,w]),_={},w=void 0):g=="}"?((m=N.pop())[0][m[1]]=_,w=void 0,_=m[0]):g=="-"?b=-1:w===void 0?r.hasOwnProperty(g)?(E+=r[g],w=parseInt(E,16)*b,b=1,E=""):E+=g:r.hasOwnProperty(g)?(C+=r[g],_[w]=parseInt(C,16)*b,b=1,w=void 0,C=""):C+=g;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var w=u.Unicode[h.postScriptName];w&&(h.metadata.Unicode.encoding=w,h.encoding=w.codePages[0])}])}(Hr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Z2(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(Hr),function(e){function t(){return(en.canvg?Promise.resolve(en.canvg):uf(()=>import("./index.es-D1TnvCS0.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Hr.API.addSvgAsImage=function(r,n,a,i,s,o,c,u){if(isNaN(n)||isNaN(a))throw Ra.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw Ra.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=s;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(w){return w.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,i,s,c,u)})}}(),Hr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Hr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),c=[],u=0,d=0,f=0;function h(w,g){var y,b=!1;for(y=0;y<w.length;y+=1)w[y]===g&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=o.length;for(f=0;f<m;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Ca(e)==="object"){for(a in e)if(i=e[a],h(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,g=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?g.push("/"+w+" /"+r[w].value):g.push("/"+w+" "+r[w].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+s.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Hr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,s){for(var o,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(o=s.metadata.characterToGlyph(i.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(i){var s,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(i).sort(function(m,w){return m-w})).length;f<h;f++)s=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(u=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",w=0;w<h.length;w++)m+=String.fromCharCode(h[w]);var g=u();d({data:m,addLength1:!0,objectId:g}),c("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Bv(o.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var _=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Bv(o.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+Bv(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(s){var o=s.font,c=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var w=u();d({data:h,addLength1:!0,objectId:w}),c("endobj");var g=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Bv(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var b=0;b<o.metadata.hmtx.widths.length;b++)o.metadata.hmtx.widths[b]=parseInt(o.metadata.hmtx.widths[b]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Bv(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",c=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,w=f.fonts,g=m,y="",b=0,_="",N=w[g].encoding;if(w[g].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(_=o,g=m,Array.isArray(o)&&(_=o[0]),b=0;b<_.length;b+=1)w[g].metadata.hasOwnProperty("cmap")&&(s=w[g].metadata.cmap.unicode.codeMap[_[b].charCodeAt(0)]),s||_[b].charCodeAt(0)<256&&w[g].metadata.hasOwnProperty("Unicode")?y+=_[b]:y+="";var E="";return parseInt(g.slice(1))<14||N==="WinAnsiEncoding"?E=h(y,g).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(E=r(y,w[g])),f.isHex=!0,{text:E,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var s=i.text||"",o=[],c={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(a(Object.assign({},c,{text:s[u]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:s})).text}])}(Hr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Hr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,s,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,N=0;this.__bidiEngine__={};var E=function(T){var R=T.charCodeAt(),j=R>>8,Y=g[j];return Y!==void 0?f[256*Y+(255&R)]:j===252||j===253?"AL":b.test(j)?"L":j===8?"R":"N"},C=function(T){for(var R,j=0;j<T.length;j++){if((R=E(T.charAt(j)))==="L")return!1;if(R==="R")return!0}return!1},D=function(T,R,j,Y){var Z,re,z,q,B=R[Y];switch(B){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(B="AN");break;case"AL":_=!0,B="R";break;case"WS":B="N";break;case"CS":Y<1||Y+1>=R.length||(Z=j[Y-1])!=="EN"&&Z!=="AN"||(re=R[Y+1])!=="EN"&&re!=="AN"?B="N":_&&(re="AN"),B=re===Z?re:"N";break;case"ES":B=(Z=Y>0?j[Y-1]:"B")==="EN"&&Y+1<R.length&&R[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&j[Y-1]==="EN"){B="EN";break}if(_){B="N";break}for(z=Y+1,q=R.length;z<q&&R[z]==="ET";)z++;B=z<q&&R[z]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(q=R.length,z=Y+1;z<q&&R[z]==="NSM";)z++;if(z<q){var G=T[Y],Q=G>=1425&&G<=2303||G===64286;if(Z=R[z],Q&&(Z==="R"||Z==="AL")){B="R";break}}}B=Y<1||(Z=R[Y-1])==="B"?"N":j[Y-1];break;case"B":_=!1,a=!0,B=N;break;case"S":i=!0,B="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":B="N"}return B},P=function(T,R,j){var Y=T.split("");return j&&F(Y,j,{hiLevel:N}),Y.reverse(),R&&R.reverse(),Y.join("")},F=function(T,R,j){var Y,Z,re,z,q,B=-1,G=T.length,Q=0,O=[],J=N?m:h,X=[];for(_=!1,a=!1,i=!1,Z=0;Z<G;Z++)X[Z]=E(T[Z]);for(re=0;re<G;re++){if(q=Q,O[re]=D(T,X,O,re),Y=240&(Q=J[q][w[O[re]]]),Q&=15,R[re]=z=J[Q][5],Y>0)if(Y===16){for(Z=B;Z<re;Z++)R[Z]=1;B=-1}else B=-1;if(J[Q][6])B===-1&&(B=re);else if(B>-1){for(Z=B;Z<re;Z++)R[Z]=z;B=-1}X[re]==="B"&&(R[re]=0),j.hiLevel|=z}i&&function(ne,ie,oe){for(var de=0;de<oe;de++)if(ne[de]==="S"){ie[de]=N;for(var V=de-1;V>=0&&ne[V]==="WS";V--)ie[V]=N}}(X,R,G)},L=function(T,R,j,Y,Z){if(!(Z.hiLevel<T)){if(T===1&&N===1&&!a)return R.reverse(),void(j&&j.reverse());for(var re,z,q,B,G=R.length,Q=0;Q<G;){if(Y[Q]>=T){for(q=Q+1;q<G&&Y[q]>=T;)q++;for(B=Q,z=q-1;B<z;B++,z--)re=R[B],R[B]=R[z],R[z]=re,j&&(re=j[B],j[B]=j[z],j[z]=re);Q=q}Q++}}},W=function(T,R,j){var Y=T.split(""),Z={hiLevel:N};return j||(j=[]),F(Y,j,Z),function(re,z,q){if(q.hiLevel!==0&&d)for(var B,G=0;G<re.length;G++)z[G]===1&&(B=y.indexOf(re[G]))>=0&&(re[G]=y[B+1])}(Y,j,Z),L(2,Y,R,j,Z),L(1,Y,R,j,Z),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(T,R,j){if(function(Z,re){if(re)for(var z=0;z<Z.length;z++)re[z]=z;o===void 0&&(o=C(Z)),u===void 0&&(u=C(Z))}(T,R),s||!c||u)if(s&&c&&o^u)N=o?1:0,T=P(T,R,j);else if(!s&&c&&u)N=o?1:0,T=W(T,R,j),T=P(T,R);else if(!s||o||c||u){if(s&&!c&&o^u)T=P(T,R),o?(N=0,T=W(T,R,j)):(N=1,T=W(T,R,j),T=P(T,R));else if(s&&o&&!c&&u)N=1,T=W(T,R,j),T=P(T,R);else if(!s&&!c&&o^u){var Y=d;o?(N=1,T=W(T,R,j),N=0,d=!1,T=W(T,R,j),d=Y):(N=0,T=W(T,R,j),T=P(T,R),N=1,d=!1,T=W(T,R,j),d=Y,T=P(T,R))}}else N=0,T=W(T,R,j);else N=o?1:0,T=W(T,R,j);return T},this.__bidiEngine__.setOptions=function(T){T&&(s=T.isInputVisual,c=T.isOutputVisual,o=T.isInputRtl,u=T.isOutputRtl,d=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([r.doBidiReorder(a[o])]);n.text=s}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Hr),Hr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new xm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new c7e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new KRe(this.contents),this.head=new JRe(this),this.name=new r7e(this),this.cmap=new mne(this),this.toUnicode={},this.hhea=new ZRe(this),this.maxp=new n7e(this),this.hmtx=new a7e(this),this.post=new e7e(this),this.os2=new QRe(this),this.loca=new l7e(this),this.glyf=new i7e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,c,u;for(u=[],s=0,o=(c=this.bbox).length;s<o;s++)t=c[s],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var md,xm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,s,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),KRe=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,s,o,c,u,d,f,h,m,w,g;for(g in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),s=Math.floor(f/c),d=16*m-f,(a=new xm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(s),a.writeShort(d),i=16*m,u=a.pos+i,o=null,w=[],r)for(h=r[g],a.writeString(g),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),w=w.concat(h),g==="head"&&(o=u),u+=h.length;u%4;)w.push(0),u++;return a.write(w),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,s;for(r=gne.call(r);r.length%4;)r.push(0);for(i=new xm(r),a=0,n=0,s=r.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),XRe={}.hasOwnProperty,wf=function(e,t){for(var r in t)XRe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};md=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var JRe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new xm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),uz=function(){function e(t,r){var n,a,i,s,o,c,u,d,f,h,m,w,g,y,b,_,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var E,C;for(C=[],c=E=0;0<=h?E<h:E>h;c=0<=h?++E:--E)C.push(t.readUInt16());return C}(),t.pos+=2,g=function(){var E,C;for(C=[],c=E=0;0<=h?E<h:E>h;c=0<=h?++E:--E)C.push(t.readUInt16());return C}(),u=function(){var E,C;for(C=[],c=E=0;0<=h?E<h:E>h;c=0<=h?++E:--E)C.push(t.readUInt16());return C}(),d=function(){var E,C;for(C=[],c=E=0;0<=h?E<h:E>h;c=0<=h?++E:--E)C.push(t.readUInt16());return C}(),a=(this.length-t.pos+this.offset)/2,o=function(){var E,C;for(C=[],c=E=0;0<=a?E<a:E>a;c=0<=a?++E:--E)C.push(t.readUInt16());return C}(),c=b=0,N=i.length;b<N;c=++b)for(y=i[c],n=_=w=g[c];w<=y?_<=y:_>=y;n=w<=y?++_:--_)d[c]===0?s=n+u[c]:(s=o[d[c]/2+(n-w)-(h-c)]||0)!==0&&(s+=u[c]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,a,i,s,o,c,u,d,f,h,m,w,g,y,b,_,N,E,C,D,P,F,L,W,T,R,j,Y,Z,re,z,q,B,G,Q,O,J,X,ne,ie,oe,de,V,se,fe,te;switch(Y=new xm,s=Object.keys(t).sort(function(ke,Re){return ke-Re}),r){case"macroman":for(g=0,y=function(){var ke=[];for(w=0;w<256;++w)ke.push(0);return ke}(),_={0:0},i={},Z=0,B=s.length;Z<B;Z++)_[V=t[a=s[Z]]]==null&&(_[V]=++g),i[a]={old:t[a],new:_[t[a]]},y[a]=_[t[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(y),{charMap:i,subtable:Y.data,maxGlyphID:g+1};case"unicode":for(R=[],f=[],N=0,_={},n={},b=u=null,re=0,G=s.length;re<G;re++)_[C=t[a=s[re]]]==null&&(_[C]=++N),n[a]={old:C,new:_[C]},o=_[C]-a,b!=null&&o===u||(b&&f.push(b),R.push(a),u=o),b=a;for(b&&f.push(b),f.push(65535),R.push(65535),W=2*(L=R.length),F=2*Math.pow(Math.log(L)/Math.LN2,2),h=Math.log(F/2)/Math.LN2,P=2*L-F,c=[],D=[],m=[],w=z=0,Q=R.length;z<Q;w=++z){if(T=R[w],d=f[w],T===65535){c.push(0),D.push(0);break}if(T-(j=n[T].new)>=32768)for(c.push(0),D.push(2*(m.length+L-w)),a=q=T;T<=d?q<=d:q>=d;a=T<=d?++q:--q)m.push(n[a].new);else c.push(j-T),D.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*L+2*m.length),Y.writeUInt16(0),Y.writeUInt16(W),Y.writeUInt16(F),Y.writeUInt16(h),Y.writeUInt16(P),oe=0,O=f.length;oe<O;oe++)a=f[oe],Y.writeUInt16(a);for(Y.writeUInt16(0),de=0,J=R.length;de<J;de++)a=R[de],Y.writeUInt16(a);for(se=0,X=c.length;se<X;se++)o=c[se],Y.writeUInt16(o);for(fe=0,ne=D.length;fe<ne;fe++)E=D[fe],Y.writeUInt16(E);for(te=0,ie=m.length;te<ie;te++)g=m[te],Y.writeUInt16(g);return{charMap:n,subtable:Y.data,maxGlyphID:N+1}}},e}(),mne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new uz(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=uz.encode(r,n),(i=new xm).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),ZRe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),QRe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),e7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var s;for(a=r.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],s=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;s=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),t7e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},r7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,s,o,c,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},s=f=0,h=a.length;f<h;s=++f)i=a[s],r.pos=i.offset,d=r.readString(i.length),o=new t7e(d,i),u[m=i.nameID]==null&&(u[m]=[]),u[i.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),n7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),a7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,s,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)s=h[d],m.push(s.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),gne=[].slice,i7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,s,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(s=this.file.loca,n=this.file.contents,a=s.indexOf(r),(i=s.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new xm(n.read(i))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new o7e(c,d,h,u,f):new s7e(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,s,o,c,u;for(o=[],s=[],c=0,u=n.length;c<u;c++)i=r[n[c]],s.push(o.length),i&&(o=o.concat(i.encode(a)));return s.push(o.length),{table:o,offsets:s}},t}(),s7e=function(){function e(t,r,n,a,i,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),o7e=function(){function e(t,r,n,a,i){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new xm(gne.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),l7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wf(t,md),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=2)s.push(2*r.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=4)s.push(r.readUInt32());return s}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<a.length;++o)if(a[o]=i,s<n.length&&n[s]==o){++s,a[o]=i;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(i+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),c7e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,s,o,c;for(a={},s=0,o=t.length;s<o;s++)a[i=t[s]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,s,o,c,u,d,f,h,m,w,g,y,b;for(a in n=mne.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),m={0:0},b=n.charMap)m[(c=b[a]).old]=c.new;for(w in h=n.maxGlyphID,s)w in m||(m[w]=h++);return d=function(_){var N,E;for(N in E={},_)E[_[N]]=N;return E}(m),f=Object.keys(d).sort(function(_,N){return _-N}),g=function(){var _,N,E;for(E=[],_=0,N=f.length;_<N;_++)o=f[_],E.push(d[o]);return E}(),i=this.font.glyf.encode(s,g,m),u=this.font.loca.encode(i.offsets,g),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();Hr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,s;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)s=r[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join(`
`)}return""+r},t}();function vne(e,t,r,n,a){n=n||{};var i=1.15,s=a.internal.scaleFactor,o=a.internal.getFontSize()/s,c=a.getLineHeightFactor?a.getLineHeightFactor():i,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-i),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=o;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var w=0;w<f.length;w++)a.text(f[w],t-a.getStringUnitWidth(f[w])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var dz={},u1=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:dz=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,c=s.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return dz||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),bO=function(e,t){return bO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},bO(e,t)};function yne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var xne=function(e){yne(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function u7e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function d7e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function GS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return a}function wne(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=bne(a,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function bne(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function XN(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function _ne(e,t){var r=XN(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function f7e(e,t,r,n,a){var i={},s=1.3333333333333333,o=iT(t,function(N){return a.getComputedStyle(N).backgroundColor});o!=null&&(i.fillColor=o);var c=iT(t,function(N){return a.getComputedStyle(N).color});c!=null&&(i.textColor=c);var u=p7e(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=s*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var w=iT(t,function(N){return a.getComputedStyle(N)[d]});w!=null&&(i.lineColor=w);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(i.fontSize=y/s);var b=h7e(n);b&&(i.fontStyle=b);var _=(n.fontFamily||"").toLowerCase();return e.indexOf(_)!==-1&&(i.font=_),i}function h7e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function iT(e,t){var r=Sne(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Sne(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Sne(e.parentElement,t):r}function p7e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/n}),s=XN(i,0);return a>s.top&&(s.top=a),a>s.bottom&&(s.bottom=a),s}function Nne(e,t,r,n,a){var i,s;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<o.rows.length;m++){var w=o.rows[m],g=(s=(i=w==null?void 0:w.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=m7e(c,u,r,w,n,a);y&&(g==="thead"?d.push(y):g==="tfoot"?h.push(y):f.push(y))}return{head:d,body:f,foot:h}}function m7e(e,t,r,n,a,i){for(var s=new xne(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;i&&(d=f7e(e,c,t,u,r)),s.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:g7e(c)})}}var f=r.getComputedStyle(n);if(s.length>0&&(a||f.display!=="none"))return s}function g7e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function v7e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function dh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function Ane(e,t){var r=new u1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();v7e(a,n,t);var i=dh({},a,n,t),s;typeof window<"u"&&(s=window);var o=y7e(a,n,t),c=x7e(a,n,t),u=w7e(r,i),d=_7e(r,i,s);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function y7e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=dh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(w){return w[c]||{}});n[c]=dh({},m[0],m[1],m[2])}},i=0,s=Object.keys(n);i<s.length;i++){var o=s[i];a(o)}return n}function x7e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=n;i<s.length;i++){var o=s[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function w7e(e,t){var r,n,a,i,s,o,c,u,d,f,h,m,w=XN(t.margin,40/e.scaleFactor()),g=(r=b7e(e,t.startY))!==null&&r!==void 0?r:w.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var b;t.showHead===!0?b="everyPage":t.showHead===!1?b="never":b=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var _=(i=t.useCss)!==null&&i!==void 0?i:!1,N=t.theme||(_?"plain":"striped"),E=!!t.horizontalPageBreak,C=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:_,theme:N,startY:g,margin:w,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:b,showFoot:y,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:E,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function b7e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function _7e(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=Nne(e,t.html,r,s,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||S7e(n,a,i);return{columns:c,head:n,body:a,foot:i}}function S7e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var c=0;c<s;c++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var _O=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),N7e=function(e){yne(t,e);function t(r,n,a,i,s,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=i,c.column=s,c.section=i.section,c}return t}(_O),A7e=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,s){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new N7e(t,this,n,a,i,s),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new _O(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new _O(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),kne=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof xne&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var s=n.cells[i.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),c=s.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),Ene=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=XN(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),k7e=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function E7e(e,t){C7e(e,t);var r=[],n=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=SO(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=SO(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),T7e(t),O7e(t,e),P7e(t)}function C7e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=_ne(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,c,null);var f=u.padding("horizontal");u.contentWidth=GS(u.text,u.styles,e)+f;var h=GS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function SO(e,t,r){for(var n=t,a=e.reduce(function(m,w){return m+w.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=s.wrappedWidth/a,c=n*o,u=s.width+c,d=r(s),f=u<d?d:u;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=SO(h,t,r))}return t}function P7e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=i.cells[c.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:i}}}}}function T7e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(s-=1,s>1&&e.columns[o+1])i+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+i}else{var u=n.cells[c.index];if(!u)continue;if(s=u.colSpan,i=0,u.colSpan>1){a=u,i+=c.width;continue}u.width=c.width+i}}}function O7e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],s=0,o=e.columns;s<o.length;s++){var c=o[s],u=i.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=fz(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=fz(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function fz(e,t,r,n,a){return e.map(function(i){return D7e(i,t,r,n,a)})}function D7e(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=GS(e,r,n))return e;for(;t<GS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Cne(e,t){var r=new u1(e),n=I7e(t,r.scaleFactor()),a=new A7e(t,n);return E7e(r,a),r.applyStyles(r.userStyles),a}function I7e(e,t){var r=e.content,n=M7e(r.columns);if(r.head.length===0){var a=hz(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=hz(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:n,head:sT("head",r.head,n,s,i,t),body:sT("body",r.body,n,s,i,t),foot:sT("foot",r.foot,n,s,i,t)}}function sT(e,t,r,n,a,i){var s={},o=t.map(function(c,u){for(var d=0,f={},h=0,m=0,w=0,g=r;w<g.length;w++){var y=g[w];if(s[y.index]==null||s[y.index].left===0)if(m===0){var b=void 0;Array.isArray(c)?b=c[y.index-h-d]:b=c[y.dataKey];var _={};typeof b=="object"&&!Array.isArray(b)&&(_=(b==null?void 0:b.styles)||{});var N=F7e(e,y,u,a,n,i,_),E=new Ene(b,N,e);f[y.dataKey]=E,f[y.index]=E,m=E.colSpan-1,s[y.index]={left:E.rowSpan-1,times:m}}else m--,h++;else s[y.index].left--,m=s[y.index].times,d++}return new kne(c,u,e,f)});return o}function hz(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=R7e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function R7e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function M7e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new k7e(a,t,r)})}function F7e(e,t,r,n,a,i,s){var o=d7e(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=dh({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?dh({},o.alternateRow,a.alternateRowStyles):{},m=u7e(i),w=dh({},m,u,h,f);return dh(w,s)}function L7e(e,t,r){var n;r===void 0&&(r={});var a=_ne(e,t),i=new Map,s=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var m=t.columns.find(function(w){return w.dataKey===h||w.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),s.push(m.index),o.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,s.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function j7e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=L7e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Pne(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+s;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,m){return h+m.height},0);o+=u}var d=new u1(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(One(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=dh({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?$7e(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Ah(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var w=m===t.body.length-1;YS(d,t,h,w,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Ah(d,t,h,i,t.columns)})),wne(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function $7e(e,t,r,n){var a=j7e(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Q2(e,t,r,n,u.columns,!0):pz(e,t,n,u.columns),B7e(e,t,r,n,u.columns),oT(e,t,n,u.columns)});else for(var s=-1,o=a[0],c=function(){var u=s;if(o){e.applyStyles(e.userStyles);var d=o.columns;s>=0?Q2(e,t,r,n,d,!0):pz(e,t,n,d),u=mz(e,t,s+1,n,d),oT(e,t,n,d)}var f=u-s;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Q2(e,t,r,n,h.columns,!0),mz(e,t,s+1,n,h.columns,f),oT(e,t,n,h.columns)}),s=u};s<t.body.length-1;)c()}function pz(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Ah(e,t,i,r,n)})}function B7e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;YS(e,t,i,o,r,n,a)})}function mz(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(c,u){var d=r+u===t.body.length-1,f=Tne(e,t,d,n);c.canEntireRowFit(f,a)&&(Ah(e,t,c,n,a),o=r+u)}),o}function oT(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Ah(e,t,i,r,n)})}function U7e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function q7e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=r.columns;s<o.length;s++){var c=o[s],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Ene(u.raw,u.styles,u.section);d=dh(d,u),d.text=[];var f=U7e(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),a[c.index]=d}}var w=new kne(e.raw,-1,e.section,a,!0);w.height=i;for(var g=0,y=r.columns;g<y.length;g++){var c=y[g],d=w.cells[c.index];d&&(d.height=w.height);var u=e.cells[c.index];u&&(u.height=e.height)}return w}function W7e(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,s=i.top+i.bottom,o=a-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function YS(e,t,r,n,a,i,s){var o=Tne(e,t,n,i);if(r.canEntireRowFit(o,s))Ah(e,t,r,i,s);else if(W7e(e,r,o,t)){var c=q7e(r,o,t,e);Ah(e,t,r,i,s),Q2(e,t,a,i,s),YS(e,t,c,n,a,i,s)}else Q2(e,t,a,i,s),YS(e,t,r,n,a,i,s)}function Ah(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}z7e(e,c,n);var d=c.getTextPos();vne(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function z7e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=bne(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),V7e(e,t,r,n.lineWidth))}function V7e(e,t,r,n){var a,i,s,o;n.top&&(a=r.x,i=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,s,o)),n.bottom&&(a=r.x,i=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,s,o)),n.left&&(a=r.x,i=r.y,s=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,i,s,o)),n.right&&(a=r.x+t.width,i=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,i,s,o));function c(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Tne(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Q2(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return Ah(e,t,o,n,a)}),t.callEndPageHooks(e,n);var s=t.settings.margin;wne(e,t,r,n),One(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Ah(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function One(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function H7e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Ane(this,n),i=Cne(this,a);return Pne(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){vne(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return u1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){u1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new u1(this),i=Nne(a,t,window,r,!1),s=i.head,o=i.body,c=((n=s[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var lT;function TR(e,t){var r=Ane(e,t),n=Cne(e,r);Pne(e,n)}try{if(typeof window<"u"&&window){var gz=window,vz=gz.jsPDF||((lT=gz.jspdf)===null||lT===void 0?void 0:lT.jsPDF);vz&&H7e(vz)}}catch(e){console.error("Could not apply autoTable plugin",e)}const G7e=(e,t)=>{if(!t)try{return Mt(Wr(e),"yyyy-MM-dd")}catch{try{const a=new Date(e);return isNaN(a.getTime())?(console.warn(`[calculateEstimatedDate] Could not parse baseDateStr with any known method: ${e}`),e):Mt(a,"yyyy-MM-dd")}catch{return console.warn(`[calculateEstimatedDate] Further error parsing baseDateStr: ${e}`),e}}let r;try{r=Wr(e)}catch{try{if(r=new Date(e),isNaN(r.getTime()))throw new Error("Invalid base date after new Date()")}catch(a){return console.error(`[calculateEstimatedDate] Invalid baseDate: ${e}`,a),"Invalid Date"}}if(isNaN(r.getTime()))return console.error(`[calculateEstimatedDate] BaseDate is invalid after parsing attempts: ${e}`),"Invalid Date";try{const n=t.toLowerCase().split(" ");if(n.length!==2)return Mt(r,"yyyy-MM-dd");const a=parseInt(n[0],10),i=n[1].endsWith("s")?n[1]:n[1]+"s";if(isNaN(a))return Mt(r,"yyyy-MM-dd");let s={};if(i==="days")s={days:a};else if(i==="weeks")s={weeks:a};else if(i==="months")s={months:a};else if(i==="years")s={years:a};else return Mt(r,"yyyy-MM-dd");return Mt(SK(r,s),"yyyy-MM-dd")}catch(n){console.error(`Error calculating estimated date with baseDate: ${e}, timeGap: ${t}`,n);try{return Mt(r,"yyyy-MM-dd")}catch{return"Invalid Date"}}},Dne=({plan:e,treatmentsWithEstimatedDates:t})=>{var n,a,i,s;if(!e)return null;const r=()=>{var o;return x(_r,{children:[x("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[l("img",{src:"https://i.postimg.cc/j2qGSXwJ/facetslogo.png",alt:"Facets Logo",style:{height:"35px"}}),x("div",{style:{textAlign:"right"},children:[l("h1",{style:{fontSize:"22px",margin:"0",color:"#0060df",fontWeight:"700"},children:"Treatment Plan"}),x("p",{style:{margin:"4px 0 0",color:"#666",fontSize:"12px",fontWeight:"500"},children:["Generated on: ",Mt(new Date,"MMM d, yyyy")]})]})]}),x("div",{style:{marginBottom:"12px"},children:[x("p",{style:{margin:"0",fontSize:"13px",fontWeight:"700",color:"#000"},children:["Patient: ",e.patientName]}),x("p",{style:{margin:"4px 0 0",fontSize:"13px",fontWeight:"700",color:"#000"},children:["Reg. No: ",((o=e.patient)==null?void 0:o.registration_number)||"N/A"]})]}),l("div",{style:{borderBottom:"2px solid #0060df",marginBottom:"15px"}})]})};return x("div",{id:"printable-content",className:"print-only",style:{display:"none",padding:"20px",fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"white",color:"#000"},children:[x("div",{style:{maxWidth:"210mm",margin:"0 auto",backgroundColor:"white",position:"relative",minHeight:"auto"},children:[l(r,{}),x("div",{style:{marginBottom:"20px"},children:[l("h2",{style:{fontSize:"15px",color:"#0060df",marginBottom:"12px",fontWeight:"700"},children:"Patient Details"}),x("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"13px",marginBottom:"15px"},children:[x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Gender"}),l("p",{style:{margin:"0",color:"#000",fontWeight:"700"},children:((n=e.patient)==null?void 0:n.gender)||"N/A"})]}),x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Age"}),l("p",{style:{margin:"0",color:"#000",fontWeight:"700"},children:(a=e.patient)!=null&&a.age?`${e.patient.age} years`:"N/A"})]}),x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Plan Title"}),l("p",{style:{margin:"0",color:"#000",fontWeight:"700"},children:e.title})]}),x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Priority"}),l("p",{style:{margin:"0",color:"#0060df",fontWeight:"700"},children:e.priority?e.priority.charAt(0).toUpperCase()+e.priority.slice(1):"N/A"})]}),x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Status"}),l("p",{style:{margin:"0",color:"#000",fontWeight:"700"},children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"N/A"})]}),x("div",{children:[l("p",{style:{margin:"0 0 3px",color:"#666",fontWeight:"500"},children:"Start Date"}),l("p",{style:{margin:"0",color:"#000",fontWeight:"700"},children:Mt(new Date(e.start_date),"MMM d, yyyy")})]})]}),x("div",{children:[l("p",{style:{margin:"0 0 4px",color:"#666",fontSize:"13px",fontWeight:"500"},children:"Description"}),l("div",{style:{border:"1px solid #e5e7eb",padding:"10px",fontSize:"13px",lineHeight:"1.4",color:"#000",fontWeight:"500"},children:e.description||"No description available."})]})]}),x("div",{style:{marginBottom:"20px"},children:[l("h2",{style:{fontSize:"15px",color:"#0060df",marginBottom:"12px",fontWeight:"700"},children:"Treatment Details"}),x("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[l("thead",{children:x("tr",{style:{borderBottom:"2px solid #0060df"},children:[l("th",{style:{textAlign:"left",padding:"8px 10px 8px 0",fontWeight:"700",color:"#000"},children:"Treatment"}),l("th",{style:{textAlign:"left",padding:"8px 10px",fontWeight:"700",color:"#000"},children:"Description"}),l("th",{style:{textAlign:"center",padding:"8px 10px",fontWeight:"700",color:"#000",width:"80px"},children:"Status"}),l("th",{style:{textAlign:"center",padding:"8px 10px",fontWeight:"700",color:"#000",width:"90px"},children:"Date"}),l("th",{style:{textAlign:"right",padding:"8px 0 8px 10px",fontWeight:"700",color:"#000",width:"80px"},children:"Cost"})]})}),l("tbody",{children:t.map((o,c)=>x("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[l("td",{style:{padding:"10px 10px 10px 0",verticalAlign:"top",color:"#000",fontWeight:"700"},children:o.type||o.title||`Visit ${c+1}`}),l("td",{style:{padding:"10px",verticalAlign:"top",color:"#000",fontWeight:"500"},children:o.description||o.procedures||"N/A"}),l("td",{style:{padding:"10px",textAlign:"center",verticalAlign:"top"},children:l("span",{style:{color:o.status==="pending"?"#f97316":"#000",fontWeight:"700"},children:o.status?o.status.charAt(0).toUpperCase()+o.status.slice(1):"N/A"})}),l("td",{style:{padding:"10px",textAlign:"center",verticalAlign:"top",color:"#000",fontWeight:"700"},children:o.scheduled_date?Mt(new Date(o.scheduled_date),"MMM d, yyyy"):o.estimatedVisitDate?Mt(new Date(o.estimatedVisitDate),"MMM d, yyyy"):"N/A"}),l("td",{style:{padding:"10px 0 10px 10px",textAlign:"right",verticalAlign:"top",color:"#000",fontWeight:"700"},children:o.cost?Xd(parseFloat(String(o.cost))):"N/A"})]},o.id||c))})]})]}),l("div",{style:{position:"absolute",bottom:"15px",right:"0",fontSize:"11px",color:"#666",fontWeight:"500"},children:"Page 1 of 2"})]}),l("div",{style:{pageBreakBefore:"always"}}),x("div",{style:{maxWidth:"210mm",margin:"0 auto",backgroundColor:"white",position:"relative"},children:[l(r,{}),x("div",{style:{marginBottom:"20px"},children:[l("h2",{style:{fontSize:"15px",color:"#0060df",marginBottom:"12px",fontWeight:"700"},children:"Additional Information"}),x("div",{style:{marginBottom:"15px"},children:[l("h3",{style:{fontSize:"13px",margin:"0 0 6px",fontWeight:"700",color:"#000"},children:"Post-Treatment Care"}),l("div",{style:{border:"1px solid #e5e7eb",padding:"10px",fontSize:"13px",lineHeight:"1.4",color:"#000",fontWeight:"500"},children:((s=(i=e.metadata)==null?void 0:i[0])==null?void 0:s.post_treatment_care)||"No post-treatment care instructions available."})]})]}),x("div",{style:{marginBottom:"20px"},children:[l("h2",{style:{fontSize:"15px",color:"#0060df",marginBottom:"12px",fontWeight:"700"},children:"Financial Summary"}),x("div",{style:{border:"1px solid #e5e7eb",fontSize:"13px"},children:[x("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #e5e7eb"},children:[l("span",{style:{color:"#0060df",fontWeight:"700"},children:"Total Treatment Cost:"}),l("span",{style:{fontWeight:"700"},children:Xd(e.totalCost||0)})]}),x("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",borderBottom:"1px solid #e5e7eb"},children:[l("span",{style:{color:"#0060df",fontWeight:"700"},children:"Insurance Coverage (Est.):"}),l("span",{style:{fontWeight:"700"},children:Xd(e.insurance_coverage||0)})]}),x("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[l("span",{style:{color:"#0060df",fontWeight:"700"},children:"Patient Responsibility:"}),l("span",{style:{fontWeight:"700"},children:Xd((e.totalCost||0)-(e.insurance_coverage||0))})]})]})]}),l("div",{style:{marginTop:"30px"},children:x("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"30px"},children:[x("div",{style:{width:"45%"},children:[l("div",{style:{borderBottom:"1px solid #000",marginBottom:"6px"}}),l("p",{style:{margin:"0",fontSize:"13px",fontWeight:"700",color:"#000"},children:"Doctor's Signature"})]}),x("div",{style:{width:"45%"},children:[l("div",{style:{borderBottom:"1px solid #000",marginBottom:"6px"}}),l("p",{style:{margin:"0",fontSize:"13px",fontWeight:"700",color:"#000"},children:"Patient's Signature"})]})]})}),x("div",{style:{textAlign:"center",color:"#000",fontSize:"13px",marginBottom:"20px"},children:[l("p",{style:{margin:"0",color:"#000",fontWeight:"500"},children:"This treatment plan is valid for 6 months from the date of issue."}),l("p",{style:{margin:"4px 0 0",color:"#000",fontWeight:"500"},children:"For any queries, please contact your dental care provider."})]}),l("div",{style:{position:"absolute",bottom:"15px",right:"0",fontSize:"11px",color:"#666",fontWeight:"500"},children:"Page 2 of 2"})]})]})};function Ine({open:e,onOpenChange:t,plan:r,onRefresh:n,onAddTreatment:a,onStatusChange:i,onDeletePlan:s,onTreatmentStatusChange:o,onDeleteTreatment:c,loading:u=!1,navigateToPatient:d,aiInitialSuggestion:f,onEditTreatment:h,bookedAppointments:m=[]}){var X,ne,ie,oe,de;const{toast:w}=_n(),g=Ss(),[y,b]=S.useState(!1),[_,N]=S.useState(!1),[E,C]=S.useState(1),D=5,[P,F]=S.useState(!1);typeof console<"u"&&console.groupCollapsed&&console.log&&console.groupEnd&&(console.groupCollapsed(`[TreatmentPlanDetails PROPS - Plan ID: ${r==null?void 0:r.id}]`),console.log("[TreatmentPlanDetails PROPS] Received plan:",JSON.parse(JSON.stringify(r||{}))),console.log("[TreatmentPlanDetails PROPS] plan.treatments:",JSON.parse(JSON.stringify((r==null?void 0:r.treatments)||[]))),console.log("[TreatmentPlanDetails PROPS] plan.originalAISuggestion:",JSON.parse(JSON.stringify((r==null?void 0:r.originalAISuggestion)||null))),console.log("[TreatmentPlanDetails PROPS] Received aiInitialSuggestionProp:",JSON.parse(JSON.stringify(f||null))),console.groupEnd());const L=V=>{if(!V||typeof V!="string")return;V=V.trim();const se=V.match(/^(\d+)\s*[-–]\s*(\d+)\s+(\w+)$/i);if(se&&se.length===4)return`${se[2]} ${se[3]}`;const fe=V.match(/^(\d+)\s+(\w+)$/i);if(fe&&fe.length===3)return`${fe[1]} ${fe[2]}`;const te=V.match(/^(\d+)$/);if(te&&te.length===2)return`${te[1]} minutes`;console.warn(`[TreatmentPlanDetails] Could not parse duration: "${V}". It does not match expected formats (e.g., "X-Y units", "X units", "X"). Falling back to undefined.`)},[W,T]=S.useState(null);S.useEffect(()=>{var te;let V=!0;const fe=(()=>{var ke;return f||(r!=null&&r.originalAISuggestion?r.originalAISuggestion:r!=null&&r.metadata&&r.metadata.length>0&&((ke=r.metadata[0])!=null&&ke.originalAISuggestion)?r.metadata[0].originalAISuggestion:null)})();return V&&(fe?T(fe):e&&r&&r.id&&r.patient_id&&r.description&&(!r.treatments||r.treatments.length===0)&&!((te=r.visits)!=null&&te.length)&&uf(()=>Promise.resolve().then(()=>fRe),void 0).then(ke=>ke.treatmentService.getAiSuggestionForPlan(r)).then(ke=>{V&&T(ke)}).catch(ke=>{console.error("[TreatmentPlanDetails] Error auto-fetching AI suggestion:",ke),V&&T(null)})),()=>{V=!1}},[e,r,f]);const R=S.useMemo(()=>{if(!(r!=null&&r.treatments)||r.treatments.length===0)return[];const V=new Map;for(const fe of r.treatments)fe&&typeof fe.id<"u"?V.has(fe.id)||V.set(fe.id,fe):console.warn("[TreatmentPlanDetails] Encountered a treatment without an ID:",fe);return Array.from(V.values()).sort((fe,te)=>{const ke=typeof fe.visit_number=="number"?fe.visit_number:1/0,Re=typeof te.visit_number=="number"?te.visit_number:1/0;if(ke!==Re)return ke-Re;const Ce=fe.created_at?new Date(fe.created_at).getTime():0,ve=te.created_at?new Date(te.created_at).getTime():0;return Ce-ve})},[r==null?void 0:r.treatments]);S.useMemo(()=>{if(!R)return[];const V=(E-1)*D,se=V+D;return R.slice(V,se)},[R,E]);const j=S.useMemo(()=>{if(!R||R.length===0)return[];let V=r.start_date||r.created_at;return R.map((se,fe)=>{let te;if(fe===0)te=Mt(Wr(V),"yyyy-MM-dd");else{const ke=R[fe-1];V=G7e(V,ke.time_gap),te=V}return{...se,estimatedVisitDate:te}})},[R,r==null?void 0:r.start_date,r==null?void 0:r.created_at]),Y=S.useMemo(()=>{if(!j)return[];const V=(E-1)*D,se=V+D;return j.slice(V,se)},[j,E]),Z=S.useMemo(()=>R?Math.ceil(R.length/D):1,[R]),re=()=>{const V="print-styles";let se=document.getElementById(V);se||(se=document.createElement("style"),se.id=V),se.innerHTML=`
        @media print {
            /* Hide everything except print content */
            body * {
                visibility: hidden;
            }
            #printable-content,
            #printable-content * {
                visibility: visible;
                color: black;
            }
            #printable-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white;
            }
            @page {
                size: auto;
                margin: 20mm;
            }
        }
    `,document.head.appendChild(se);const fe=document.getElementById("printable-content");fe&&(fe.style.display="block"),window.print();const te=()=>{fe&&(fe.style.display="none"),se&&se.parentNode&&se.parentNode.removeChild(se),window.removeEventListener("afterprint",te)};window.addEventListener("afterprint",te)},z=(V,se,fe)=>{const te=typeof fe=="number"?fe+1:V.visit_number;let ke=null;if(V.scheduled_date&&/^\d{4}-\d{2}-\d{2}$/.test(V.scheduled_date))ke=V.scheduled_date;else if(V.estimatedVisitDate&&/^\d{4}-\d{2}-\d{2}$/.test(V.estimatedVisitDate))ke=V.estimatedVisitDate;else if(V.scheduled_date)try{ke=Mt(Wr(V.scheduled_date),"yyyy-MM-dd")}catch{try{const Ce=new Date(V.scheduled_date);isNaN(Ce.getTime())||(ke=Mt(Ce,"yyyy-MM-dd"))}catch{}}return{id:V.id,treatment_plan_id:se,visit_number:te||0,procedures:V.description||V.procedures||"",type:V.type||V.title||"",estimated_duration:V.estimated_duration,time_gap:V.time_gap,status:V.status||"pending",scheduled_date:ke,cost:V.cost,priority:V.priority||"medium"}},q=async()=>{var fe,te;if(!((te=(fe=W==null?void 0:W.planDetails)==null?void 0:fe.appointmentPlan)!=null&&te.sittingDetails)||!(r!=null&&r.id)){w({title:"Error",description:"No AI suggestion details found or plan ID is missing.",variant:"destructive"});return}F(!0);let V=0;const se=W.planDetails.appointmentPlan.sittingDetails.length;try{for(const[ke,Re]of W.planDetails.appointmentPlan.sittingDetails.entries()){const Ce=Re.procedures||"No procedures detailed.",ve=Ce.substring(0,50)+(Ce.length>50?"...":""),Ge=`${Re.visit||`Visit ${ke+1}`} - ${ve}`,pt=L(Re.estimatedDuration),it={type:Ge,description:Ce,status:"pending",priority:"medium",cost:"0",estimated_duration:pt,time_gap:Re.timeGap||null,plan_id:r.id};await ba.createTreatment(it),V++}w({title:"Success",description:`${V} of ${se} AI suggested treatments created. Refreshing...`}),T(null),await n()}catch(ke){console.error("Error creating AI suggested treatments:",ke),w({title:"Creation Failed",description:`Failed to create some or all AI suggested treatments. ${V} created. ${ke.message}`,variant:"destructive"}),V>0&&await n()}finally{F(!1)}};if(!r)return null;const B=S.useMemo(()=>{if(!r.start_date||!r.end_date)return null;try{const V=new Date(r.start_date),se=new Date(r.end_date);return RK(se,V,{addSuffix:!1})}catch(V){return console.error("Error calculating duration:",V),null}},[r.start_date,r.end_date]),G=S.useMemo(()=>[{id:"planned",title:"Planned",description:"Plan created"},{id:"in_progress",title:"In Progress",description:"Treatment started"},{id:"completed",title:"Completed",description:"Plan finished"}],[]),Q=S.useMemo(()=>{const V=[];if(!(r!=null&&r.status))return V;const se=G.findIndex(fe=>fe.id===r.status);for(let fe=0;fe<se;fe++)V.push(G[fe].id);return r.status==="completed"&&(V.includes("planned")||V.push("planned"),V.includes("in_progress")||V.push("in_progress")),r.status,V},[r==null?void 0:r.status,G]),O=V=>{let se="bg-gray-100 text-gray-800";switch(V){case"planned":se="bg-blue-100 text-blue-800";break;case"in_progress":se="bg-yellow-100 text-yellow-800";break;case"completed":se="bg-green-100 text-green-800";break;case"cancelled":se="bg-red-100 text-red-800";break}return l("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${se}`,children:V.replace("_"," ")})},J=V=>{let se="bg-gray-100 text-gray-800";switch(V){case"low":se="bg-green-100 text-green-800";break;case"medium":se="bg-yellow-100 text-yellow-800";break;case"high":se="bg-red-100 text-red-800";break}return l("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${se}`,children:V})};return x(_r,{children:[l(Vn,{open:e,onOpenChange:t,children:x(Bn,{className:"max-w-4xl",children:[x(Jn,{children:[l(Zn,{children:"Treatment Plan Details"}),x(us,{children:["Created on ",Mt(new Date(r.created_at),"MMMM d, yyyy")]})]}),l("div",{className:"pr-6 py-4 max-h-[70vh] overflow-y-auto",children:x("div",{className:"space-y-6",children:[x("div",{className:"flex justify-between items-start",children:[x("div",{children:[l("h2",{className:"text-xl font-semibold",children:r.title||"Plan Title N/A"}),l("p",{className:"text-sm text-muted-foreground",children:r.description||"No description available."})]}),x("div",{className:"flex items-center gap-2",children:[O(r.status),r.priority&&J(r.priority)]})]}),r.status!=="cancelled"&&l("div",{className:"my-6",children:l(uRe,{steps:G,currentStepId:r.status,completedStepIds:Q})}),l("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x("div",{className:"space-y-4",children:[x("div",{className:"flex items-center gap-2",children:[l(vi,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[l("p",{className:"text-sm font-medium",children:"Patient"}),l("p",{children:r.patientName||"Patient Name N/A"})]}),d&&l(Fe,{variant:"ghost",size:"sm",className:"ml-auto",onClick:()=>d(r.patient_id),children:l(vce,{className:"h-4 w-4"})})]}),x("div",{className:"flex items-center gap-2",children:[l(Oi,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[l("p",{className:"text-sm font-medium",children:"Timeframe"}),x("p",{children:[r.start_date?Mt(new Date(r.start_date),"MMMM d, yyyy"):"Start Date N/A",r.start_date&&r.end_date&&` to ${Mt(new Date(r.end_date),"MMMM d, yyyy")}`]}),B&&x("p",{className:"text-sm text-muted-foreground",children:["Calculated Duration: ",B]}),((ne=(X=W==null?void 0:W.planDetails)==null?void 0:X.appointmentPlan)==null?void 0:ne.totalTreatmentTime)&&x("p",{className:"text-sm text-muted-foreground mt-1",children:["Suggested Total Plan Duration: ",W.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),r.teeth&&r.teeth.length>0?x("div",{className:"flex items-center gap-2",children:[l(fx,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[l("p",{className:"text-sm font-medium",children:"Affected Teeth"}),l("p",{className:"text-sm text-muted-foreground",children:r.teeth.map(V=>V.tooth_id).sort((V,se)=>V-se).join(", ")})]})]}):x("div",{className:"flex items-center gap-2",children:[l(fx,{className:"h-5 w-5 text-muted-foreground"}),x("div",{children:[l("p",{className:"text-sm font-medium",children:"Affected Teeth"}),l("p",{className:"text-sm text-muted-foreground",children:"N/A"})]})]})]})}),x("div",{className:"space-y-2",children:[x("div",{className:"flex items-center justify-between",children:[l("h3",{className:"text-lg font-medium",children:"Treatments"}),x("div",{className:"flex gap-2",children:[r.status==="planned"&&x(Fe,{variant:"outline",onClick:()=>i(r.id,"in_progress"),disabled:u,title:"Start this treatment plan",children:[u&&!y&&!_?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Us,{className:"h-4 w-4 mr-1"}),"Start Treatment"]}),x(Fe,{variant:"outline",size:"sm",onClick:n,disabled:u,children:[l(iF,{className:"h-4 w-4 mr-1"}),"Refresh"]}),x(Fe,{variant:"outline",size:"sm",onClick:a,disabled:u,children:[l(Zu,{className:"h-4 w-4 mr-1"}),"Add Treatment"]}),x(Fe,{onClick:re,variant:"outline",size:"sm",disabled:u,title:"Print this treatment plan",children:[l($ce,{className:"h-4 w-4 mr-1"})," ","Print Plan"]})]})]}),r.treatments&&r.treatments.length>0?x(_r,{children:[l("div",{className:"space-y-3",children:Y.map((V,se)=>l(lRe,{treatment:V,onStatusChange:o,onDelete:c,onEdit:()=>{const fe=z(V,r.id,se);h(fe)},loading:u},V.id))}),Z>1&&x("div",{className:"flex justify-center items-center gap-2 mt-4 pagination-controls-print-hide",children:[x(Fe,{variant:"outline",size:"sm",onClick:()=>C(V=>Math.max(V-1,1)),disabled:E===1||u,children:[l(y4,{className:"h-4 w-4"}),"Previous"]}),x("span",{className:"text-sm text-muted-foreground",children:["Page ",E," of ",Z]}),x(Fe,{variant:"outline",size:"sm",onClick:()=>C(V=>Math.min(V+1,Z)),disabled:E===Z||u,children:["Next",l(sm,{className:"h-4 w-4"})]})]})]}):(()=>{var ke,Re,Ce,ve,Ge,pt,it;const V=(Re=(ke=W==null?void 0:W.planDetails)==null?void 0:ke.appointmentPlan)==null?void 0:Re.sittingDetails,se=(ve=(Ce=f==null?void 0:f.planDetails)==null?void 0:Ce.appointmentPlan)==null?void 0:ve.sittingDetails,fe=(it=(pt=(Ge=r.originalAISuggestion)==null?void 0:Ge.planDetails)==null?void 0:pt.appointmentPlan)==null?void 0:it.sittingDetails,te=Array.isArray(V)&&V.length>0||Array.isArray(se)&&se.length>0||Array.isArray(fe)&&fe.length>0;return typeof console<"u"&&console.groupCollapsed&&console.log&&console.groupEnd&&(console.groupCollapsed(`[TreatmentPlanDetails IIFE - Plan ID: ${r==null?void 0:r.id}] AI Logic`),console.log("[TreatmentPlanDetails IIFE] Internal aiInitialSuggestion state:",JSON.parse(JSON.stringify(W||null))),console.log("[TreatmentPlanDetails IIFE] Prop aiInitialSuggestionProp:",JSON.parse(JSON.stringify(f||null))),console.log("[TreatmentPlanDetails IIFE] Plan plan.originalAISuggestion:",JSON.parse(JSON.stringify(r.originalAISuggestion||null))),console.log("[TreatmentPlanDetails IIFE] aiSittings1 (from internal state):",JSON.parse(JSON.stringify(V||null))),console.log("[TreatmentPlanDetails IIFE] aiSittings2 (from prop):",JSON.parse(JSON.stringify(se||null))),console.log("[TreatmentPlanDetails IIFE] aiSittings3 (from plan object):",JSON.parse(JSON.stringify(fe||null))),console.log("[TreatmentPlanDetails IIFE] Calculated showAiVisits:",te),console.groupEnd()),te?x("div",{className:"text-center py-6 border rounded-lg",children:[l(q0,{className:"h-8 w-8 mx-auto text-primary mb-3"}),l("p",{className:"text-muted-foreground mb-4",children:"AI-generated treatment visits are available for this plan."}),x(Fe,{onClick:q,disabled:P||u,size:"sm",children:[P?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Zu,{className:"mr-2 h-4 w-4"}),"Add AI Suggested Visits"]})]}):null})()]}),x(Lm,{defaultValue:"additionalInfo",className:"w-full tabs-print-all-content",children:[x(Rh,{className:"flex items-center min-h-[44px] grid w-full grid-cols-3 print-hide rounded-2xl bg-white/30 bg-gradient-to-br from-white/60 to-[#e3f0ff]/60 backdrop-blur-lg border border-[#d0e6ff] shadow-xl px-2 py-0 relative",style:{boxShadow:"0 6px 32px 0 #e3f0ff"},children:[x(Oa,{value:"additionalInfo",className:"flex h-full items-center justify-center gap-2 px-5 py-0 text-base font-semibold text-brand-medium rounded-xl focus:outline-none data-[state=active]:bg-white/80 data-[state=active]:shadow-md data-[state=active]:border data-[state=active]:border-blue-200 data-[state=active]:z-10 data-[state=active]:text-brand-primary hover:bg-white/40 transition-all",children:[l(b4,{className:"w-5 h-5"}),"Additional Information"]}),x(Oa,{value:"visits",className:"flex h-full items-center justify-center gap-2 px-5 py-0 text-base font-semibold text-brand-medium rounded-xl focus:outline-none data-[state=active]:bg-white/80 data-[state=active]:shadow-md data-[state=active]:border data-[state=active]:border-blue-200 data-[state=active]:z-10 data-[state=active]:text-brand-primary hover:bg-white/40 transition-all",children:[l(Oi,{className:"w-5 h-5"}),"Scheduled Visits"]}),x(Oa,{value:"financial",className:"flex h-full items-center justify-center gap-2 px-5 py-0 text-base font-semibold text-brand-medium rounded-xl focus:outline-none data-[state=active]:bg-white/80 data-[state=active]:shadow-md data-[state=active]:border data-[state=active]:border-blue-200 data-[state=active]:z-10 data-[state=active]:text-brand-primary hover:bg-white/40 transition-all",children:[l(s6,{className:"w-5 h-5"}),"Financial Information"]})]}),l(_a,{value:"additionalInfo",className:"space-y-4",children:x("div",{className:"border rounded-lg p-4",children:[l("h4",{className:"font-medium",children:"Clinical Information"}),x("div",{className:"mt-4 space-y-4",children:[r.metadata&&r.metadata.length>0&&r.metadata[0].clinical_considerations&&x("div",{children:[l("h5",{className:"text-sm font-medium",children:"Clinical Considerations"}),l("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].clinical_considerations})]}),r.metadata&&r.metadata.length>0&&r.metadata[0].key_materials&&x("div",{children:[l("h5",{className:"text-sm font-medium",children:"Key Materials"}),l("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].key_materials})]}),r.metadata&&r.metadata.length>0&&r.metadata[0].post_treatment_care&&x("div",{children:[l("h5",{className:"text-sm font-medium",children:"Post-Treatment Care"}),l("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].post_treatment_care})]}),(!r.metadata||r.metadata.length===0||r.metadata.length>0&&!r.metadata[0].clinical_considerations&&!r.metadata[0].key_materials&&!r.metadata[0].post_treatment_care)&&l("p",{className:"text-sm text-muted-foreground",children:"No additional clinical information available."})]})]})}),l(_a,{value:"visits",className:"space-y-4",children:x("div",{className:"border rounded-lg p-4",children:[l("div",{className:"flex justify-between items-center mb-3",children:l("h4",{className:"font-medium",children:"Scheduled Visits Overview"})}),j&&j.length>0?l("div",{className:"space-y-3",children:j.map((V,se)=>{const te=(m||[]).find(Ce=>Ce.treatment_id===V.id&&Ce.status!=="cancelled"),ke=!!te;let Re=null;if(ke&&te){let Ce="N/A",ve="N/A";const Ge=te.staff&&te.staff.first_name&&te.staff.last_name?`${te.staff.first_name} ${te.staff.last_name}`:"N/A";if(te.start_time&&typeof te.start_time=="string")try{const pt=Wr(te.start_time);Ce=Mt(pt,"MMM dd, yyyy"),ve=Mt(pt,"p")}catch(pt){console.error(`[TreatmentPlanDetails] Error parsing start_time for booked appointment: ${te.start_time}`,pt)}else console.warn("[TreatmentPlanDetails] Booked appointment start_time is missing or not a string.");Re={bookedDate:Ce,bookedTime:ve,doctorName:Ge}}return x("div",{className:"border rounded-md p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[x("div",{className:"flex justify-between items-start",children:[x("div",{children:[l("h5",{className:"font-medium text-gray-800",children:V.type||V.title||`Visit ${se+1}`}),l("p",{className:"text-xs text-gray-500 mt-0.5 truncate max-w-md",children:V.description||V.procedures||"No description"})]}),V.status&&l("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${V.status==="completed"?"bg-green-100 text-green-700":V.status==="cancelled"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:V.status.charAt(0).toUpperCase()+V.status.slice(1)})]}),x("div",{className:"mt-3 space-y-2 text-xs text-gray-600",children:[x("div",{className:"flex items-center",children:[l(Oi,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),l("strong",{children:"Est. Visit:"})," ",V.scheduled_date||V.estimatedVisitDate||"Not set"]}),V.estimated_duration&&x("div",{className:"flex items-center",children:[l(Us,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),l("strong",{children:"Duration:"})," ",V.estimated_duration]}),V.time_gap&&x("div",{className:"flex items-center",children:[l(iF,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),l("strong",{children:"Next visit in:"})," ",V.time_gap]}),V.cost!==void 0&&V.cost!==null&&parseFloat(String(V.cost))>0&&x("div",{className:"flex items-center",children:[l(s6,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),l("strong",{children:"Cost:"})," ",Xd(parseFloat(String(V.cost)))]})]}),l("div",{className:"mt-4 flex justify-end items-center",children:ke?x("div",{className:"flex items-center gap-4",children:[x("div",{className:"flex items-center justify-center h-9 px-3 text-sm font-medium text-white bg-green-500 rounded-md",children:[l(g1,{className:"w-3.5 h-3.5 mr-1.5"}),"Booked"]}),Re&&x("div",{className:"ml-4 p-3 bg-gray-50 rounded-md border border-blue-600 space-y-2 shadow-sm",children:[x("div",{className:"flex items-center space-x-2",children:[l(nD,{className:"h-4 w-4 text-gray-500"}),l("span",{className:"text-xs text-gray-600 font-medium",children:"Date:"}),l("span",{className:"text-xs text-green-600 font-semibold",children:Re.bookedDate})]}),x("div",{className:"flex items-center space-x-2",children:[l(Us,{className:"h-4 w-4 text-gray-500"}),l("span",{className:"text-xs text-gray-600 font-medium",children:"Time:"}),l("span",{className:"text-xs text-gray-800",children:Re.bookedTime})]}),x("div",{className:"flex items-center space-x-2",children:[l(iD,{className:"h-4 w-4 text-gray-500"}),l("span",{className:"text-xs text-gray-600 font-medium",children:"Doctor:"}),l("span",{className:"text-xs text-gray-800",children:Re.doctorName})]})]})]}):x(Fe,{variant:"outline",size:"sm",onClick:()=>{const Ce=V.scheduled_date||V.estimatedVisitDate,ve=r.patient_id,Ge=V.id,pt=V.type||V.title||"New Appointment";if(!Ce){w({title:"Cannot Book Appointment",description:"This visit does not have a scheduled or estimated date yet.",variant:"destructive"});return}const it=new URLSearchParams({date:Ce,patientId:ve});Ge&&it.append("treatmentId",Ge),it.append("description",pt),g(`/appointments?${it.toString()}`)},disabled:u||P,children:[l(Oi,{className:"w-3.5 h-3.5 mr-1.5"}),"Book Appointment"]})})]},V.id||se)})}):x("div",{className:"text-center py-8 border rounded-lg",children:[l(Oi,{className:"h-10 w-10 mx-auto text-muted-foreground mb-3"}),l("p",{className:"text-muted-foreground",children:"No scheduled visits for this plan yet."})]})]})}),l(_a,{value:"financial",className:"space-y-4",children:x("div",{className:"border rounded-lg p-4",children:[l("h4",{className:"font-medium",children:"Financial Summary"}),x("div",{className:"mt-4 space-y-2",children:[x("div",{className:"flex justify-between",children:[l("span",{className:"text-sm",children:"Total Treatment Cost:"}),l("span",{className:"font-medium",children:Xd(r.totalCost||0)})]}),x("div",{className:"flex justify-between",children:[l("span",{className:"text-sm",children:"Insurance Coverage (Est.):"}),l("span",{className:"font-medium",children:Xd(r.insurance_coverage||0)})]}),x("div",{className:"flex justify-between",children:[l("span",{className:"text-sm",children:"Patient Responsibility:"}),l("span",{className:"font-medium",children:Xd((r.totalCost||0)-(r.insurance_coverage||0))})]})]})]})})]}),x(fs,{className:"pt-4 mt-auto dialog-footer-print-hide",children:[" ",x("div",{className:"flex gap-2 items-center",children:[r.status==="planned"&&x(Fe,{variant:"outline",onClick:()=>i(r.id,"in_progress"),disabled:u,title:"Start this treatment plan",children:[u&&!y&&!_?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Us,{className:"h-4 w-4 mr-1"}),"Start Treatment"]}),(r.status==="planned"||r.status==="in_progress")&&x(vw,{open:_,onOpenChange:N,children:[l(UW,{asChild:!0,children:x(Fe,{variant:"outline",disabled:u,title:"Cancel this treatment plan",children:[u&&_?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Qu,{className:"h-4 w-4 mr-1"}),"Cancel Plan"]})}),x(Z1,{children:[x(Q1,{children:[l(ty,{children:"Cancel Treatment Plan"}),l(ry,{children:"Are you sure you want to cancel this treatment plan? This action cannot be undone."})]}),x(ey,{children:[l(ay,{children:"No, Keep Plan"}),l(ny,{onClick:()=>{i(r.id,"cancelled"),N(!1)},children:"Yes, Cancel Plan"})]})]})]}),x(vw,{open:y,onOpenChange:b,children:[l(UW,{asChild:!0,children:x(Fe,{variant:"outline",disabled:u,title:"Delete this treatment plan",children:[u&&y?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(om,{className:"h-4 w-4 mr-1"}),"Delete Plan"]})}),x(Z1,{children:[x(Q1,{children:[l(ty,{children:"Delete Treatment Plan"}),l(ry,{children:"Are you sure you want to delete this treatment plan? This action cannot be undone."})]}),x(ey,{children:[l(ay,{children:"No, Keep Plan"}),l(ny,{onClick:()=>{s(r.id),b(!1)},children:"Yes, Delete Plan"})]})]})]}),r.status==="completed"&&x(Fe,{variant:"outline",onClick:()=>i(r.id,"in_progress"),disabled:u,className:"mr-auto",children:[l(iG,{className:"h-4 w-4 mr-2"}),"Reopen Plan"]}),l(Fe,{variant:"outline",onClick:()=>t(!1),disabled:u,children:"Close"}),r.status!=="completed"&&r.status!=="cancelled"&&x(Fe,{onClick:()=>{if(!r.treatments||r.treatments.length===0){w({title:"No Treatments",description:"Please add at least one treatment before completing the plan.",variant:"destructive"});return}const V=r.treatments.find(se=>se.status!=="completed");if(V){const se=V.visit_number?`Visit ${V.visit_number}`:V.type||V.title||"a treatment";w({title:"Cannot Complete Plan",description:`Please complete ${se} before marking the entire plan as completed.`,variant:"destructive"});return}i(r.id,"completed")},disabled:u||!r.treatments||r.treatments.length===0,variant:"default",children:[l(g1,{className:"h-4 w-4 mr-2"}),"Mark as Completed"]})]})]})]})})]})}),l(Dne,{plan:{...r,patient:{full_name:r.patientName,age:((ie=r.patient)==null?void 0:ie.age)||0,gender:((oe=r.patient)==null?void 0:oe.gender)||"",registration_number:((de=r.patient)==null?void 0:de.registration_number)||"",...r.patient}},treatmentsWithEstimatedDates:j})]})}function NO(){return 12e4}function Y7e({patientId:e,toothIds:t,domain:r,condition:n,matrixDetails:a,selectedTreatment:i,symptoms:s,description:o,patientRecord:c,onSuggestionApply:u,disabled:d=!1}){const[f,h]=S.useState(!1),[m,w]=S.useState([]),{toast:g}=_n(),[y,b]=S.useState(null),[_,N]=S.useState(null),[E,C]=S.useState(null),[D,P]=S.useState(null);return x("div",{className:"space-y-4",children:[l("div",{className:"flex justify-center",children:l(Fe,{type:"button",onClick:async()=>{var T,R;if(f)return;if(!i){g({title:"Missing Information",description:"Please select a treatment option first.",variant:"destructive"});return}h(!0),w([]);const L=new AbortController,W=setTimeout(()=>L.abort(),NO());try{const j=L.signal;j.throwIfAborted();const Y="https://n8n1.kol.tel/webhook/2169736a-368b-49b5-b93f-ffc215203d99",Z=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,toothIds:t,domain:r,condition:n,treatment:i,details:a,patientRecord:c,userInput:{symptoms:s,description:o}})});if(j.throwIfAborted(),clearTimeout(W),!Z.ok)throw new Error(`AI suggestion failed: ${Z.status}`);const z=(R=(T=(await Z.json())[0])==null?void 0:T.output)==null?void 0:R.response;if(!z||!z.treatmentPlans||!Array.isArray(z.treatmentPlans))throw new Error("Invalid AI response structure: treatmentPlans missing or not an array.");const q=z.treatmentPlans.map(B=>{var oe,de,V;const G=B.planName,Q=G==null?void 0:G.toLowerCase(),O=(de=(oe=z.caseOverview)==null?void 0:oe.patientSelectedTreatment)==null?void 0:de.toLowerCase(),J=Q==null?void 0:Q.includes("(patient-selected)"),X=Q==null?void 0:Q.includes("(patient selected)"),ne=O&&(Q==null?void 0:Q.startsWith(O)),ie=J||X||ne;return console.log(`[AISuggestionForm] Plan: ${G} | Lower: ${Q} | C1: ${J} | C2: ${X} | patientSelectedTreatmentLower: ${O} | C3 (startsWith): ${ne} | FINAL isPatientSelected: ${ie}`),console.log(`[AISuggestionForm] Raw AI plan object for: ${G}`,B),console.log(`[AISuggestionForm] Metadata source fields for: ${G}`,{aiPlanClinicalConsiderations:B.clinicalConsiderations,aiPlanKeyMaterials:B.keyMaterials,aiOutputPostTreatmentCare:z.postTreatmentCare}),{title:B.planName,description:z.clinicalAssessment||"",planDetails:{planName:B.planName,clinicalProtocol:B.clinicalProtocol,keyMaterials:B.keyMaterials,clinicalConsiderations:B.clinicalConsiderations,expectedOutcomes:B.expectedOutcomes,appointmentPlan:B.appointmentPlan||((V=B.planDetails)==null?void 0:V.appointmentPlan),isPatientSelected:ie},caseOverview:z.caseOverview,patientFactors:z.patientFactors,recommendedInvestigations:z.recommendedInvestigations,clinicalRationale:z.clinicalRationale,postTreatmentCare:z.postTreatmentCare||""}});w(q)}catch(j){clearTimeout(W),console.error("Error generating suggestions:",j),j instanceof Error&&j.name==="AbortError"?g({title:"Request Timed Out",description:"The AI suggestion service took too long to respond (120 seconds).",variant:"destructive"}):g({title:"Generation Failed",description:j instanceof Error?j.message:"Failed to generate suggestions",variant:"destructive"})}finally{h(!1)}},disabled:d||!i,className:`ai-insights-button w-full flex items-center justify-center py-2 px-4 rounded-lg bg-[#1B56FD] text-white hover:bg-[#0118D8] ${f?"opacity-100 cursor-not-allowed":""}`,style:f?{opacity:1}:{},children:f?x(_r,{children:[l(Un,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):x(_r,{children:[l(q0,{className:"mr-2 h-4 w-4"}),"Generate AI Suggestions"]})})}),m.length>0&&x("div",{className:"mt-4 space-y-4",children:[l("h4",{className:"font-semibold text-sm",children:"Generated Treatment Plans"}),l("div",{className:"space-y-4",children:m.map((L,W)=>{var Y,Z,re,z,q;const T=L.planDetails.isPatientSelected,R=E===W,j=E!==null;return x("div",{className:Lt("rounded-xl shadow-md overflow-hidden mb-6 transition-opacity",T?"border-2 border-primary/70 bg-primary/5":"bg-white border border-muted/30",j&&!R&&"opacity-60 pointer-events-none select-none"),children:[x("div",{className:Lt("flex items-start justify-between p-4",T?"bg-primary/10":"bg-white"),children:[x("div",{children:[x("div",{className:"flex items-center gap-2 mb-1",children:[l("h5",{className:"font-semibold text-lg",children:L.title}),T&&l("span",{className:"px-3 py-1 rounded-full bg-primary text-white text-xs font-medium align-middle",children:"Patient Selected"}),!T&&l("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-medium align-middle",children:"Alternative"})]}),x("div",{className:"flex gap-4 mt-1 text-xs text-muted-foreground",children:[x("span",{children:[l("strong",{children:"Condition:"})," ",(Y=L.caseOverview)==null?void 0:Y.condition]}),x("span",{children:[l("strong",{children:"Severity:"})," ",(Z=L.caseOverview)==null?void 0:Z.severity]}),x("span",{children:[l("strong",{children:"Teeth:"})," ",(re=L.caseOverview)==null?void 0:re.teethInvolved]})]}),((z=L.caseOverview)==null?void 0:z.patientSymptoms)&&x("div",{className:"text-xs mt-1",children:[l("strong",{children:"Symptoms:"})," ",L.caseOverview.patientSymptoms]}),((q=L.caseOverview)==null?void 0:q.patientSelectedTreatment)&&x("div",{className:"text-xs",children:[l("strong",{children:"Patient Preference:"})," ",L.caseOverview.patientSelectedTreatment]})]}),l(Fe,{type:"button",variant:T?"default":"outline",size:"sm",onClick:()=>P(W),className:Lt("ml-4",T?"bg-primary text-white hover:bg-primary/90":"border-primary text-primary hover:bg-primary/10",j&&!R&&"opacity-60 pointer-events-none select-none"),disabled:d||j&&!R,children:R?x(_r,{children:[l("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Applied"]}):x(_r,{children:[T?l("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):l("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:l("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),T?"Apply Patient Selected Plan":"Apply Alternative Plan"]})})]}),x(V4,{type:"single",collapsible:!0,className:"w-full",children:[x(no,{value:"clinical-assessment",children:[l(ao,{className:"px-4",children:"Overall Clinical Assessment"}),l(io,{className:"px-4 pb-4",children:l("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:L.description})})]}),L.patientFactors&&x(no,{value:"patient-factors",children:[l(ao,{className:"px-4",children:"Patient Factors"}),x(io,{className:"px-4 pb-4 text-sm space-y-1",children:[x("p",{children:[l("strong",{children:"Relevant Medical Conditions:"})," ",L.patientFactors.relevantMedicalConditions]}),x("p",{children:[l("strong",{children:"Medication Considerations:"})," ",L.patientFactors.medicationConsiderations]}),x("p",{children:[l("strong",{children:"Age-Related Considerations:"})," ",L.patientFactors.ageRelatedConsiderations]})]})]}),L.recommendedInvestigations&&x(no,{value:"recommended-investigations",children:[l(ao,{className:"px-4",children:"Recommended Investigations"}),l(io,{className:"px-4 pb-4 text-sm",children:l("p",{children:L.recommendedInvestigations})})]}),x(no,{value:"plan-details",children:[x(ao,{className:"px-4",children:["Details for: ",L.planDetails.planName]}),l(io,{className:"px-4 pb-4",children:x("div",{className:"space-y-3 text-sm",children:[x("div",{children:[l("p",{className:"font-medium",children:"Clinical Protocol:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:L.planDetails.clinicalProtocol})]}),x("div",{children:[l("p",{className:"font-medium",children:"Key Materials:"}),l("p",{className:"text-muted-foreground",children:L.planDetails.keyMaterials})]}),x("div",{children:[l("p",{className:"font-medium",children:"Clinical Considerations:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:L.planDetails.clinicalConsiderations})]}),x("div",{children:[l("p",{className:"font-medium",children:"Expected Outcomes:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:L.planDetails.expectedOutcomes})]})]})})]}),L.planDetails.appointmentPlan&&x(no,{value:"appointment-plan",children:[l(ao,{className:"px-4",children:x("span",{className:"flex items-center",children:[l(Oi,{className:"mr-2 h-4 w-4"}),"Appointment Plan"]})}),l(io,{className:"px-4 pb-4",children:x("div",{className:"space-y-3 text-sm",children:[x("div",{className:"flex items-center gap-4 text-muted-foreground mb-2",children:[x("div",{children:[l(Us,{className:"h-4 w-4 inline mr-1"}),x("span",{children:["Total Sittings: ",L.planDetails.appointmentPlan.totalSittings]})]}),x("div",{children:[l(Oi,{className:"h-4 w-4 inline mr-1"}),x("span",{children:["Total Duration: ",L.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),L.planDetails.appointmentPlan.medicalPrecautions&&x("div",{className:"mb-3",children:[l("p",{className:"font-medium",children:"Medical Precautions:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:L.planDetails.appointmentPlan.medicalPrecautions})]}),l("div",{className:"space-y-2",children:L.planDetails.appointmentPlan.sittingDetails.map((B,G)=>x("div",{className:"border rounded p-3 bg-background",children:[x("p",{className:"font-medium",children:["Visit ",B.visit]}),l("p",{className:"text-muted-foreground mt-1",children:B.procedures}),x("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-3",children:[x("p",{className:"flex items-center",children:[l(Us,{className:"h-3 w-3 mr-1"}),"Duration: ",B.estimatedDuration]}),B.timeGap!=="N/A"&&x("p",{className:"flex items-center",children:[l(Oi,{className:"h-3 w-3 mr-1"}),"Next visit in: ",B.timeGap]})]})]},G))})]})})]}),L.clinicalRationale&&x(no,{value:"clinical-rationale",children:[l(ao,{className:"px-4",children:"Clinical Rationale"}),l(io,{className:"px-4 pb-4 text-sm",children:l("p",{className:"whitespace-pre-line",children:L.clinicalRationale})})]}),x(no,{value:"post-care",children:[l(ao,{className:"px-4",children:"Post-Treatment Care"}),l(io,{className:"px-4 pb-4",children:l("p",{className:"text-sm text-muted-foreground",children:L.postTreatmentCare})})]})]}),l(vw,{open:D===W,children:x(Z1,{children:[x(Q1,{children:[l(ty,{children:"Apply this plan?"}),l(ry,{children:"Are you sure you want to apply this treatment plan? This will pre-fill the form with the selected plan's details."})]}),x(ey,{children:[l(ay,{onClick:()=>P(null),children:"Cancel"}),l(ny,{onClick:()=>{C(W),P(null),u(L)},children:"Apply"})]})]})})]},W)})})]})]})}const K7e=Ie.object({symptoms:Ie.string().min(1,"Symptoms are required"),description:Ie.string().min(1,"Description is required"),patient_id:Ie.string().min(1,"Patient is required"),domain:Ie.string().optional(),condition:Ie.string().optional(),treatment:Ie.string().min(1,"Select a treatment").optional(),estimated_duration:Ie.string().optional(),total_visits:Ie.string().optional(),materials:Ie.string().optional(),clinical_considerations:Ie.string().optional(),post_treatment_care:Ie.string().optional(),status:Ie.enum(["planned","in_progress","completed","cancelled"]).optional(),start_date:Ie.string().optional(),priority:Ie.enum(["low","medium","high"]).optional(),ai_generated:Ie.boolean().optional(),initialTreatments:Ie.array(Ie.any()).optional(),originalAISuggestion:Ie.any().optional()});function AO({open:e,onOpenChange:t,onSubmit:r,patients:n,loading:a=!1,initialData:i}){const[s,o]=S.useState(""),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,m]=S.useState(null),[w,g]=S.useState(null),[y,b]=S.useState(null),[_,N]=S.useState(!1),[E,C]=S.useState([]),[D,P]=S.useState(!1),[F,L]=S.useState([]),[W,T]=S.useState(Date.now()),[R,j]=S.useState({}),[Y,Z]=S.useState([]),[re,z]=S.useState([]),[q,B]=S.useState([]),[G,Q]=S.useState(!1),[O,J]=S.useState(null),[X,ne]=S.useState(!1),[ie,oe]=S.useState([]),[de,V]=S.useState(!1),[se,fe]=S.useState(!1),[te,ke]=S.useState(null),[Re,Ce]=S.useState(null),[ve,Ge]=S.useState(!1),[pt,it]=S.useState(!1),{toast:Le}=_n(),ut=S.useRef(null);Ss();const he=fd({resolver:hd(K7e),defaultValues:i||{symptoms:"",description:"",patient_id:"",domain:"",condition:"",treatment:"",estimated_duration:"",total_visits:"",materials:"",clinical_considerations:"",post_treatment_care:"",status:"planned",start_date:Mt(new Date,"yyyy-MM-dd"),priority:"medium",ai_generated:!1,initialTreatments:[],originalAISuggestion:null}});S.useEffect(()=>{e?he.reset({symptoms:"",description:"",patient_id:w||"",domain:"",condition:"",treatment:"",estimated_duration:"",total_visits:"",materials:"",clinical_considerations:"",post_treatment_care:""}):(C([]),g(null),u(null),o(""),J(null),oe([]),V(!1),b(null),ke(null),N(!1),he.reset(),P(!1),L([]))},[e,w]),S.useEffect(()=>{e&&(async()=>{Q(!0);try{const Dt=await Rt.getTreatmentMatrixOptions();Z(Dt);const yr=[...new Set(Dt.map(Gr=>Gr.domain))].sort();z(yr),B([])}catch(Dt){console.error("Failed to fetch treatment options:",Dt)}finally{Q(!1)}})()},[e]);const Ee=he.watch("domain");S.useEffect(()=>{if(console.log(`Domain changed to: ${Ee}. Full matrix options:`,Y),Ee){const mt=Y.filter(Dt=>Dt.domain===Ee).map(Dt=>Dt.condition).sort();console.log(`Filtered conditions for ${Ee}:`,mt),B(mt)}else B([]),J(null),oe([])},[Ee,Y,he]),S.useEffect(()=>{if(!Ee||!Re){J(null);return}(async()=>{ne(!0);try{console.log(`Fetching matrix details for Domain: ${Ee}, Condition: ${Re}`);const Dt=await Rt.getMatrixDetails(Ee,Re);J(Dt)}catch(Dt){console.error("Failed to fetch matrix details:",Dt),J(null),Le({title:"Error",description:"Could not load details for the selected domain/condition.",variant:"destructive"})}finally{ne(!1)}})()},[Ee,Re,he,Le]);const Me=mt=>{he.setValue("domain",mt),J(null),oe([])},at=async mt=>{g(mt.id),u(`${mt.first_name||""} ${mt.last_name||""}`.trim()),he.setValue("patient_id",mt.id,{shouldValidate:!0}),o(""),j({}),C([]),b(null),N(!0);try{console.log(`Fetching full patient details for patient: ${mt.id}`);const Dt=await Rt.patients.getById(mt.id);b(Dt),console.log("Fetched full patient record:",Dt),console.log(`Fetching tooth conditions for patient: ${mt.id}`);const yr=await Rt.patients.getPatientToothConditions(mt.id);console.log("Fetched conditions data:",yr);const Gr={},fr=[];yr.forEach(Or=>{const cr=Array.isArray(Or.conditions)?Or.conditions.filter(Nn=>typeof Nn=="string"&&["healthy","decayed","filled","missing","treatment-planned","root-canal","extraction","crown","has-treatment-before","recommended-to-be-treated"].includes(Nn)):[],xn=cr.length>0?cr:["healthy"],Sn=xn.length>1||xn.length===1&&xn[0]!=="healthy";Or.tooth_id&&(Gr[Or.tooth_id]={conditions:xn,isSelected:Sn},Sn&&fr.push(Or.tooth_id))}),console.log("Formatted initialState for chart:",Gr),console.log("Initially selected IDs based on conditions:",fr),j(Gr),C(fr)}catch(Dt){console.error("Failed to fetch patient details or tooth conditions:",Dt),Le({title:"Error Loading Patient Data",description:"Could not load patient details or tooth conditions.",variant:"destructive"}),b(null),j({}),C([])}finally{N(!1)}},ct=mt=>{L(mt)},dt=async()=>{if(!ut.current||!w){console.error("Dental chart ref not available or no patient selected."),Le({title:"Error",description:"Could not save chart data. Please try again.",variant:"destructive"});return}fe(!0);try{const mt=ut.current.getTeethData(),Dt=ut.current.getLastActiveCondition();console.log("Data from chart ref:",mt),console.log("Last active condition from chart ref:",Dt);const yr=Object.entries(mt).filter(([,Or])=>Or.isSelected&&Or.condition!=="healthy").map(([Or,cr])=>({tooth_id:parseInt(Or,10),conditions:[cr.condition],patient_id:w}));console.log("Filtered and transformed data to save:",yr),await Rt.patients.savePatientToothConditionsDetailed(w,yr);const Gr=Object.entries(mt).filter(([,Or])=>Or.isSelected).map(([Or])=>parseInt(Or,10));C(Gr);const fr={};if(Object.entries(mt).forEach(([Or,cr])=>{fr[parseInt(Or,10)]={condition:cr.condition,conditions:[cr.condition],isSelected:cr.isSelected}}),j(fr),Dt)Ce(Dt);else{const Or=Object.values(mt).find(cr=>cr.isSelected&&cr.condition!=="healthy");Ce((Or==null?void 0:Or.condition)||null)}Le({title:"Chart Saved",description:"Patient's tooth conditions have been updated.",variant:"default"}),P(!1)}catch(mt){console.error("Failed to save tooth conditions:",mt),Le({title:"Save Failed",description:"Could not save tooth conditions to the database.",variant:"destructive"})}finally{fe(!1)}},Xe=()=>{if(!w){Le({title:"No Patient Selected",description:"Please select a patient before opening the dental chart.",variant:"default"});return}console.log("Opening chart dialog with prepared initial state:",R),L([...E]),T(Date.now()),P(!0)};S.useEffect(()=>{console.log("isChartDialogOpen state changed:",D)},[D]);const Nt=async mt=>{if(!w){Le({title:"Patient Not Selected",description:"Please select a patient before submitting.",variant:"destructive"});return}let Dt={...mt};Dt.symptoms&&(Dt.title=Dt.symptoms,delete Dt.symptoms),delete Dt.patient_name,te?Dt.originalAISuggestion=te:Dt.ai_generated=!1;try{await r(Dt,E),he.reset(),ke(null),t(!1)}catch(yr){console.error("Error submitting treatment plan form:",yr),Le({title:"Submission Error",description:"Failed to save the treatment plan. Please try again.",variant:"destructive"})}};S.useCallback(async()=>{var mt,Dt;if(!w||E.length===0||!Ee||!y){Le({title:"Missing Information",description:"Please select patient, teeth (and apply conditions in chart), and domain first.",variant:"default",duration:3e3});return}V(!0),oe([]);try{const yr="https://n8n1.kol.tel/webhook/2169736a-368b-49b5-b93f-ffc215203d99",Gr={patientId:w,toothIds:E,domain:Ee,details:O,treatment:he.getValues("treatment")||"",patientRecord:y};console.log("Sending payload to n8n:",Gr);const fr=await fetch(yr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Gr)});if(!fr.ok){const Sn=await fr.text();throw console.error("Error response from n8n webhook:",fr.status,Sn),new Error(`AI suggestion call failed: ${fr.status}`)}const Or=await fr.json();console.log("Received response from n8n:",Or);const cr=(Dt=(mt=Or[0])==null?void 0:mt.output)==null?void 0:Dt.response;if(!cr||!cr.treatmentPlans||!Array.isArray(cr.treatmentPlans)){console.warn("Invalid AI response structure: treatmentPlans missing or not an array. Response:",Or),oe([]),Le({title:"AI Response Error",description:"The AI returned an unexpected data format.",variant:"destructive"}),V(!1);return}const xn=cr.treatmentPlans.map(Sn=>{var ot,yt,Mr,ta,bt,vt;const Nn=Sn.planName,Pr=Nn==null?void 0:Nn.toLowerCase(),hn=he.getValues("treatment")||"",hs=hn==null?void 0:hn.toLowerCase();let Gn=!1;Pr&&(Gn=Pr.includes("(patient-selected)")||Pr.includes("(patient selected)"),!Gn&&hs&&Pr.startsWith(hs)&&(Gn=!0));const bi={condition:Ee||((ot=cr.caseOverview)==null?void 0:ot.condition)||"N/A",severity:(O==null?void 0:O.severity)||((yt=cr.caseOverview)==null?void 0:yt.severity)||"N/A",teethInvolved:E.join(", ")||((Mr=cr.caseOverview)==null?void 0:Mr.teethInvolved)||"N/A",patientSymptoms:he.getValues("symptoms")||((ta=cr.caseOverview)==null?void 0:ta.patientSymptoms),patientSelectedTreatment:hn||((bt=cr.caseOverview)==null?void 0:bt.patientSelectedTreatment)};return{title:Sn.planName||"AI Suggested Plan",description:cr.clinicalAssessment||Sn.description||Sn.clinicalProtocol||"No detailed assessment provided.",planDetails:{planName:Sn.planName,clinicalProtocol:Sn.clinicalProtocol,keyMaterials:Sn.keyMaterials,clinicalConsiderations:Sn.clinicalConsiderations,expectedOutcomes:Sn.expectedOutcomes,appointmentPlan:Sn.appointmentPlan||((vt=Sn.planDetails)==null?void 0:vt.appointmentPlan),isPatientSelected:Gn},caseOverview:bi,patientFactors:cr.patientFactors,recommendedInvestigations:cr.recommendedInvestigations,clinicalRationale:cr.clinicalRationale,postTreatmentCare:cr.postTreatmentCare||Sn.postTreatmentCare||""}});xn.length>0?(oe(xn),Le({title:"AI Suggestions Ready",description:`Received ${xn.length} new suggestions.`,variant:"default",duration:3e3})):(console.warn("Parsed suggestions array is empty. Raw AI output:",cr),oe([]),Le({title:"No Specific Suggestions",description:"The AI did not return specific treatment plans based on the input.",variant:"default",duration:3e3}))}catch(yr){console.error("Error fetching AI suggestions:",yr),Le({title:"AI Suggestion Failed",description:yr instanceof Error?yr.message:"Could not get suggestions. Check console.",variant:"destructive",duration:5e3}),oe([])}finally{V(!1)}},[w,E,Ee,O,he,Le,y]);const St=mt=>{var Dt,yr,Gr,fr,Or,cr;if(ke(mt),he.setValue("symptoms",mt.title),he.setValue("description",mt.description),(Dt=mt.planDetails)!=null&&Dt.clinicalConsiderations&&he.setValue("clinical_considerations",mt.planDetails.clinicalConsiderations),mt.postTreatmentCare&&he.setValue("post_treatment_care",mt.postTreatmentCare),(yr=mt.planDetails)!=null&&yr.keyMaterials&&he.setValue("materials",mt.planDetails.keyMaterials),(fr=(Gr=mt.planDetails)==null?void 0:Gr.appointmentPlan)!=null&&fr.totalSittings&&he.setValue("total_visits",mt.planDetails.appointmentPlan.totalSittings),(cr=(Or=mt.planDetails)==null?void 0:Or.appointmentPlan)!=null&&cr.totalTreatmentTime&&he.setValue("estimated_duration",mt.planDetails.appointmentPlan.totalTreatmentTime),O!=null&&O.treatment_options&&Array.isArray(O.treatment_options)&&mt.title){const xn=O.treatment_options.find(Sn=>mt.title.toLowerCase().includes(Sn.toLowerCase()));xn&&he.setValue("treatment",xn)}he.setValue("ai_generated",!0),Le({title:"AI Suggestion Applied",description:`"${mt.title}" has been pre-filled into the form.`})},At=mt=>{mt?t(!0):(Ge(!0),it(!0))},dn=()=>{Ge(!1),it(!1)},Nr=()=>{Ge(!1),it(!1),t(!1)};return x(_r,{children:[l(Vn,{open:e,onOpenChange:At,children:x(Bn,{className:"max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8 rounded-xl",children:[x(Jn,{children:[l(Zn,{children:"Create New Treatment Plan"}),l(us,{children:"Create a comprehensive treatment plan for a patient"})]}),l(Mh,{...he,children:x("form",{onSubmit:he.handleSubmit(Nt),className:"space-y-4 pb-6",children:[l(He,{control:he.control,name:"patient_id",render:({field:mt})=>x(De,{className:"relative",children:[l(Oe,{htmlFor:"patient-search",children:"Patient *"}),l(je,{children:l(ht,{type:"search",id:"patient-search",value:s,onChange:Dt=>{o(Dt.target.value),u(null)},placeholder:c||"Search by name, phone, or registration...",disabled:d,className:"w-full"})}),d&&l("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading patients..."}),h&&l("p",{className:"text-sm text-destructive mt-1",children:h}),s&&!d&&!h&&l(nd,{className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60",children:l("div",{className:"p-2",children:n.filter(Dt=>{var cr,xn;const yr=`${Dt.first_name||""} ${Dt.last_name||""}`.toLowerCase(),Gr=((cr=Dt.phone)==null?void 0:cr.toLowerCase())||"",fr=((xn=Dt.registration_number)==null?void 0:xn.toLowerCase())||"",Or=s.toLowerCase();return yr.includes(Or)||Gr.includes(Or)||fr.includes(Or)}).length>0?n.filter(Dt=>{var cr,xn;const yr=`${Dt.first_name||""} ${Dt.last_name||""}`.toLowerCase(),Gr=((cr=Dt.phone)==null?void 0:cr.toLowerCase())||"",fr=((xn=Dt.registration_number)==null?void 0:xn.toLowerCase())||"",Or=s.toLowerCase();return yr.includes(Or)||Gr.includes(Or)||fr.includes(Or)}).map(Dt=>l(Fe,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3 mb-1",onClick:()=>at(Dt),type:"button",children:x("div",{children:[l("div",{children:`${Dt.first_name||""} ${Dt.last_name||""}`.trim()}),x("div",{className:"text-xs text-muted-foreground",children:[Dt.registration_number&&`Reg: ${Dt.registration_number}`,Dt.registration_number&&Dt.phone&&" | ",Dt.phone&&`Ph: ${Dt.phone}`]})]})},Dt.id)):x("p",{className:"text-sm text-muted-foreground p-2",children:['No patients found matching "',s,'"']})})}),l(Ze,{})]})}),w&&l(He,{control:he.control,name:"domain",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Domain"}),x(Ur,{onValueChange:Me,value:mt.value||"",disabled:G,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:G?"Loading...":"Select domain"})})}),l($r,{children:G?l(wt,{value:"loading",disabled:!0,children:"Loading..."}):re.map(Dt=>l(wt,{value:Dt,children:Dt.charAt(0).toUpperCase()+Dt.slice(1)},Dt))})]}),l(Ze,{})]})}),w&&Ee&&x(De,{children:[l(Oe,{children:"Affected Teeth & Conditions"}),x("div",{className:"flex items-center gap-2",children:[x(Fe,{type:"button",variant:"outline",onClick:Xe,disabled:!w||!Ee,children:[l(fx,{className:"mr-2 h-4 w-4"}),"Select Teeth & Apply Domain Conditions"]}),E.length>0&&x("span",{className:"text-sm text-muted-foreground",children:["Selected: ",E.join(", ")]})]}),l(mi,{children:"Select the patient and domain first, then specify affected teeth and apply conditions from the selected domain."})]}),X&&x("div",{className:"flex justify-center items-center p-4",children:[l(Un,{className:"h-6 w-6 animate-spin text-muted-foreground"})," ",l("span",{className:"ml-2 text-muted-foreground",children:"Loading details..."})]}),!X&&O&&Ee&&Re&&x("div",{className:"my-4 p-4 border rounded-lg bg-secondary/10 space-y-2 text-sm",children:[x("h4",{className:"font-semibold text-base mb-2",children:["Details for ",Ee," / ",Re]}),O.urgency&&x("p",{children:[l("strong",{children:"Urgency:"})," ",O.urgency]}),O.severity&&x("p",{children:[l("strong",{children:"Severity:"})," ",O.severity]}),O.risk_impact&&x("p",{children:[l("strong",{children:"Risk/Impact:"})," ",O.risk_impact]}),O.recommended_investigations&&O.recommended_investigations.length>0&&x("p",{children:[l("strong",{children:"Investigations:"})," ",O.recommended_investigations.join(", ")]}),O.treatment_options&&O.treatment_options.length>0&&x("div",{className:"mt-3",children:[l("p",{className:"font-semibold mb-1",children:"Select Treatment:"}),l(He,{control:he.control,name:"treatment",render:({field:mt})=>x("div",{className:"space-y-1 ml-1",children:[O.treatment_options.map(Dt=>x("label",{className:"flex items-center gap-2 cursor-pointer",children:[l("input",{type:"radio",value:Dt,checked:mt.value===Dt,onChange:yr=>{yr.target.checked&&mt.onChange(Dt)},className:"form-radio h-4 w-4 text-primary focus:ring-primary border-muted-foreground"}),l("span",{children:Dt})]},Dt)),l(Ze,{})]})})]})]}),O&&he.watch("treatment")&&x("div",{className:"space-y-4",children:[l(He,{control:he.control,name:"symptoms",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Symptoms *"}),l(je,{children:l(ht,{placeholder:"Enter patient symptoms",...mt})}),l(Ze,{})]})}),l(He,{control:he.control,name:"description",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Description *"}),l(je,{children:l(on,{placeholder:"Detailed description of the treatment plan",...mt,rows:3})}),l(Ze,{})]})})]}),w&&Ee&&E.length>0&&O&&he.watch("treatment")&&x("div",{className:"my-4 p-4 border rounded-lg bg-muted/30",children:[x("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[l(q0,{className:"mr-2 h-5 w-5 text-primary"}),"AI Treatment Suggestions"]}),l(Y7e,{patientId:w,toothIds:E,domain:Ee,condition:Re||"",matrixDetails:O,selectedTreatment:he.watch("treatment")||"",symptoms:he.watch("symptoms"),description:he.watch("description"),patientRecord:y,onSuggestionApply:St,disabled:de||!w||E.length===0||!Ee||_||!he.watch("treatment")})]}),ie.length>0&&x("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50 shadow",children:[l("h3",{className:"text-lg font-semibold mb-3 text-slate-800",children:"AI Suggestions"}),l("div",{className:"space-y-4",children:ie.map((mt,Dt)=>{var yr;return x("div",{className:Lt("border rounded-lg overflow-hidden bg-card",mt.planDetails.isPatientSelected&&"border-primary/50 bg-primary/5"),children:[l("div",{className:"p-4 bg-muted/50",children:x("div",{className:"flex items-start justify-between",children:[x("div",{children:[x("h5",{className:"font-medium text-base",children:[mt.title," ",mt.planDetails.isPatientSelected&&l("span",{className:"ml-2 text-xs text-primary font-normal",children:"(Patient Selected Plan)"})]}),mt.caseOverview&&x("div",{className:"mt-1 text-xs text-muted-foreground",children:[x("p",{children:[l("strong",{children:"Condition:"})," ",mt.caseOverview.condition]}),x("p",{children:[l("strong",{children:"Severity:"})," ",mt.caseOverview.severity]}),x("p",{children:[l("strong",{children:"Teeth:"})," ",mt.caseOverview.teethInvolved]}),mt.caseOverview.patientSymptoms&&x("p",{children:[l("strong",{children:"Symptoms:"})," ",mt.caseOverview.patientSymptoms]}),mt.caseOverview.patientSelectedTreatment&&x("p",{children:[l("strong",{children:"Patient Preference:"})," ",mt.caseOverview.patientSelectedTreatment]})]})]}),l(Fe,{type:"button",variant:mt.planDetails.isPatientSelected?"outline":"secondary",size:"sm",onClick:()=>St(mt),className:mt.planDetails.isPatientSelected?"bg-primary text-white hover:bg-primary/90":"",children:"Apply Selected Plan"})]})}),x(V4,{type:"single",collapsible:!0,className:"w-full",children:[x(no,{value:`clinical-assessment-${Dt}`,children:[l(ao,{className:"px-4",children:"Overall Clinical Assessment"}),l(io,{className:"px-4 pb-4",children:l("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:mt.description})})]}),mt.patientFactors&&x(no,{value:`patient-factors-${Dt}`,children:[l(ao,{className:"px-4",children:"Patient Factors"}),x(io,{className:"px-4 pb-4 text-sm space-y-1",children:[x("p",{children:[l("strong",{children:"Relevant Medical Conditions:"})," ",mt.patientFactors.relevantMedicalConditions]}),x("p",{children:[l("strong",{children:"Medication Considerations:"})," ",mt.patientFactors.medicationConsiderations]}),x("p",{children:[l("strong",{children:"Age-Related Considerations:"})," ",mt.patientFactors.ageRelatedConsiderations]})]})]}),mt.recommendedInvestigations&&x(no,{value:`recommended-investigations-${Dt}`,children:[l(ao,{className:"px-4",children:"Recommended Investigations"}),l(io,{className:"px-4 pb-4 text-sm",children:l("p",{children:mt.recommendedInvestigations})})]}),mt.planDetails&&x(no,{value:`plan-details-${Dt}`,children:[x(ao,{className:"px-4",children:["Details for: ",mt.planDetails.planName||mt.title]}),l(io,{className:"px-4 pb-4",children:x("div",{className:"space-y-3 text-sm",children:[mt.planDetails.clinicalProtocol&&x("div",{children:[l("p",{className:"font-medium",children:"Clinical Protocol:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:mt.planDetails.clinicalProtocol})]}),mt.planDetails.keyMaterials&&x("div",{children:[l("p",{className:"font-medium",children:"Key Materials:"}),l("p",{className:"text-muted-foreground",children:mt.planDetails.keyMaterials})]}),mt.planDetails.clinicalConsiderations&&x("div",{children:[l("p",{className:"font-medium",children:"Clinical Considerations:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:mt.planDetails.clinicalConsiderations})]}),mt.planDetails.expectedOutcomes&&x("div",{children:[l("p",{className:"font-medium",children:"Expected Outcomes:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:mt.planDetails.expectedOutcomes})]})]})})]}),((yr=mt.planDetails)==null?void 0:yr.appointmentPlan)&&x(no,{value:`appointment-plan-${Dt}`,children:[l(ao,{className:"px-4",children:x("span",{className:"flex items-center",children:[l(Oi,{className:"mr-2 h-4 w-4"}),"Appointment Plan"]})}),l(io,{className:"px-4 pb-4",children:x("div",{className:"space-y-3 text-sm",children:[x("div",{className:"flex items-center gap-4 text-muted-foreground mb-2",children:[mt.planDetails.appointmentPlan.totalSittings&&x("div",{children:[l(Us,{className:"h-4 w-4 inline mr-1"}),x("span",{children:["Total Sittings: ",mt.planDetails.appointmentPlan.totalSittings]})]}),mt.planDetails.appointmentPlan.totalTreatmentTime&&x("div",{children:[l(Oi,{className:"h-4 w-4 inline mr-1"}),x("span",{children:["Total Duration: ",mt.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),mt.planDetails.appointmentPlan.medicalPrecautions&&x("div",{className:"mb-3",children:[l("p",{className:"font-medium",children:"Medical Precautions:"}),l("p",{className:"text-muted-foreground whitespace-pre-line",children:mt.planDetails.appointmentPlan.medicalPrecautions})]}),mt.planDetails.appointmentPlan.sittingDetails&&mt.planDetails.appointmentPlan.sittingDetails.length>0&&x("div",{className:"space-y-2",children:[l("p",{className:"font-medium text-sm mb-1",children:"Sitting Details:"}),mt.planDetails.appointmentPlan.sittingDetails.map((Gr,fr)=>x("div",{className:"border rounded p-3 bg-background",children:[l("p",{className:"font-medium",children:Gr.visit||`Visit ${fr+1}`}),l("p",{className:"text-muted-foreground mt-1",children:Gr.procedures}),x("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-3",children:[Gr.estimatedDuration&&x("p",{className:"flex items-center",children:[l(Us,{className:"h-3 w-3 mr-1"}),"Duration: ",Gr.estimatedDuration]}),Gr.timeGap&&Gr.timeGap!=="N/A"&&x("p",{className:"flex items-center",children:[l(Oi,{className:"h-3 w-3 mr-1"}),"Next visit in: ",Gr.timeGap]})]})]},fr))]})]})})]}),mt.clinicalRationale&&x(no,{value:`clinical-rationale-${Dt}`,children:[l(ao,{className:"px-4",children:"Clinical Rationale"}),l(io,{className:"px-4 pb-4 text-sm",children:l("p",{className:"whitespace-pre-line",children:mt.clinicalRationale})})]}),mt.postTreatmentCare&&x(no,{value:`post-care-${Dt}`,children:[l(ao,{className:"px-4",children:"Post-Treatment Care"}),l(io,{className:"px-4 pb-4",children:l("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:mt.postTreatmentCare})})]})]})]},Dt)})})]}),O&&x(_r,{children:[l(He,{control:he.control,name:"estimated_duration",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Estimated Duration"}),l(je,{children:l(ht,{...mt,placeholder:"e.g., 3-4 weeks"})}),l(Ze,{})]})}),l(He,{control:he.control,name:"total_visits",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Total Visits"}),l(je,{children:l(ht,{...mt,placeholder:"e.g., 2"})}),l(Ze,{})]})}),l(He,{control:he.control,name:"materials",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Required Materials"}),l(je,{children:l(on,{...mt,placeholder:"List of required materials",className:"min-h-[80px]"})}),l(Ze,{})]})}),l(He,{control:he.control,name:"clinical_considerations",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Clinical Considerations"}),l(je,{children:l(on,{...mt,placeholder:"Important clinical considerations",className:"min-h-[80px]"})}),l(Ze,{})]})}),l(He,{control:he.control,name:"post_treatment_care",render:({field:mt})=>x(De,{children:[l(Oe,{children:"Post-Treatment Care"}),l(je,{children:l(on,{...mt,placeholder:"Post-treatment care instructions",className:"min-h-[80px]"})}),l(Ze,{})]})})]}),x(fs,{children:[l(Fe,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),x(Fe,{type:"submit",disabled:a,children:[a?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Zu,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]})]})})]})}),l(Vn,{open:D,onOpenChange:P,children:x(Bn,{className:"max-w-2xl",children:[" ",x(Jn,{children:[l(Zn,{children:"Select Affected Teeth & Apply Conditions"}),l(us,{children:"Click teeth to select/deselect. Use the controls below to apply conditions from the selected domain to the selected teeth."})]}),l(_R,{ref:ut,initialState:R,onToothSelect:ct,domain:Ee||void 0,domainConditions:q},W),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>P(!1),disabled:se,children:"Cancel"}),x(Fe,{onClick:dt,disabled:se,children:[se?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Bce,{className:"mr-2 h-4 w-4"}),"Confirm & Save Chart"]})]})]})}),l(vw,{open:ve,children:x(Z1,{children:[x(Q1,{children:[l(ty,{children:"Cancel Plan?"}),l(ry,{children:"Are you sure you want to cancel this plan? All unsaved changes will be lost."})]}),x(ey,{children:[l(ay,{onClick:dn,children:"No"}),l(ny,{onClick:Nr,children:"Yes"})]})]})})]})}var JN="Popover",[Rne,aQe]=es(JN,[Cm]),sb=Cm(),[X7e,jm]=Rne(JN),Mne=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=sb(t),c=S.useRef(null),[u,d]=S.useState(!1),[f,h]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:JN});return l(P4,{...o,children:l(X7e,{scope:t,contentId:jl(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:S.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:S.useCallback(()=>d(!0),[]),onCustomAnchorRemove:S.useCallback(()=>d(!1),[]),modal:s,children:r})})};Mne.displayName=JN;var Fne="PopoverAnchor",J7e=S.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=jm(Fne,r),i=sb(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return S.useEffect(()=>(s(),()=>o()),[s,o]),l(Uw,{...i,...n,ref:t})});J7e.displayName=Fne;var Lne="PopoverTrigger",jne=S.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=jm(Lne,r),i=sb(r),s=Kr(t,a.triggerRef),o=l(vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Wne(a.open),...n,ref:s,onClick:Ht(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:l(Uw,{asChild:!0,...i,children:o})});jne.displayName=Lne;var OR="PopoverPortal",[Z7e,Q7e]=Rne(OR,{forceMount:void 0}),$ne=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=jm(OR,t);return l(Z7e,{scope:t,forceMount:r,children:l(uo,{present:r||i.open,children:l(gy,{asChild:!0,container:a,children:n})})})};$ne.displayName=OR;var iy="PopoverContent",Bne=S.forwardRef((e,t)=>{const r=Q7e(iy,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=jm(iy,e.__scopePopover);return l(uo,{present:n||i.open,children:i.modal?l(tMe,{...a,ref:t}):l(rMe,{...a,ref:t})})});Bne.displayName=iy;var eMe=lm("PopoverContent.RemoveScroll"),tMe=S.forwardRef((e,t)=>{const r=jm(iy,e.__scopePopover),n=S.useRef(null),a=Kr(t,n),i=S.useRef(!1);return S.useEffect(()=>{const s=n.current;if(s)return D4(s)},[]),l(Ww,{as:eMe,allowPinchZoom:!0,children:l(Une,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ht(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ht(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,u=o.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ht(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),rMe=S.forwardRef((e,t)=>{const r=jm(iy,e.__scopePopover),n=S.useRef(!1),a=S.useRef(!1);return l(Une,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Une=S.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=jm(iy,r),m=sb(r);return N4(),l($w,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:l(Ng,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:l(T4,{"data-state":Wne(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qne="PopoverClose",nMe=S.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=jm(qne,r);return l(vr.button,{type:"button",...n,ref:t,onClick:Ht(e.onClick,()=>a.onOpenChange(!1))})});nMe.displayName=qne;var aMe="PopoverArrow",iMe=S.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=sb(r);return l(O4,{...a,...n,ref:t})});iMe.displayName=aMe;function Wne(e){return e?"open":"closed"}var sMe=Mne,oMe=jne,lMe=$ne,zne=Bne;const pg=sMe,mg=oMe,wm=S.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>l(lMe,{children:l(zne,{ref:a,align:t,sideOffset:r,className:Lt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));wm.displayName=zne.displayName;var an=function(){return an=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},an.apply(this,arguments)};function cMe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Vne(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ob(e){return e.mode==="multiple"}function lb(e){return e.mode==="range"}function ZN(e){return e.mode==="single"}var uMe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dMe(e,t){return Mt(e,"LLLL y",t)}function fMe(e,t){return Mt(e,"d",t)}function hMe(e,t){return Mt(e,"LLLL",t)}function pMe(e){return"".concat(e)}function mMe(e,t){return Mt(e,"cccccc",t)}function gMe(e,t){return Mt(e,"yyyy",t)}var vMe=Object.freeze({__proto__:null,formatCaption:dMe,formatDay:fMe,formatMonthCaption:hMe,formatWeekNumber:pMe,formatWeekdayName:mMe,formatYearCaption:gMe}),yMe=function(e,t,r){return Mt(e,"do MMMM (EEEE)",r)},xMe=function(){return"Month: "},wMe=function(){return"Go to next month"},bMe=function(){return"Go to previous month"},_Me=function(e,t){return Mt(e,"cccc",t)},SMe=function(e){return"Week n. ".concat(e)},NMe=function(){return"Year: "},AMe=Object.freeze({__proto__:null,labelDay:yMe,labelMonthDropdown:xMe,labelNext:wMe,labelPrevious:bMe,labelWeekNumber:SMe,labelWeekday:_Me,labelYearDropdown:NMe});function kMe(){var e="buttons",t=uMe,r=Gw,n={},a={},i=1,s={},o=new Date;return{captionLayout:e,classNames:t,formatters:vMe,labels:AMe,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:s,today:o,mode:"default"}}function EMe(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,s=e.toDate;return n?i=Ws(n):t&&(i=new Date(t,0,1)),a?s=fm(a):r&&(s=new Date(r,11,31)),{fromDate:i?Dl(i):void 0,toDate:s?Dl(s):void 0}}var Hne=S.createContext(void 0);function CMe(e){var t,r=e.initialProps,n=kMe(),a=EMe(r),i=a.fromDate,s=a.toDate,o=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;o!=="buttons"&&(!i||!s)&&(o="buttons");var c;(ZN(r)||ob(r)||lb(r))&&(c=r.onSelect);var u=an(an(an({},n),r),{captionLayout:o,classNames:an(an({},n.classNames),r.classNames),components:an({},r.components),formatters:an(an({},n.formatters),r.formatters),fromDate:i,labels:an(an({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:an(an({},n.modifiers),r.modifiers),modifiersClassNames:an(an({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:an(an({},n.styles),r.styles),toDate:s});return l(Hne.Provider,{value:u,children:e.children})}function Wa(){var e=S.useContext(Hne);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Gne(e){var t=Wa(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return l("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function PMe(e){return l("svg",an({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:l("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Yne(e){var t,r,n=e.onChange,a=e.value,i=e.children,s=e.caption,o=e.className,c=e.style,u=Wa(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:PMe;return x("div",{className:o,style:c,children:[l("span",{className:u.classNames.vhidden,children:e["aria-label"]}),l("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),x("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,l(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function TMe(e){var t,r=Wa(),n=r.fromDate,a=r.toDate,i=r.styles,s=r.locale,o=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return l(_r,{});if(!a)return l(_r,{});var f=[];if(Jve(n,a))for(var h=Ws(n),m=n.getMonth();m<=a.getMonth();m++)f.push(MA(h,m));else for(var h=Ws(new Date),m=0;m<=11;m++)f.push(MA(h,m));var w=function(y){var b=Number(y.target.value),_=MA(Ws(e.displayMonth),b);e.onChange(_)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Yne;return l(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:w,value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:s}),children:f.map(function(y){return l("option",{value:y.getMonth(),children:o(y,{locale:s})},y.getMonth())})})}function OMe(e){var t,r=e.displayMonth,n=Wa(),a=n.fromDate,i=n.toDate,s=n.locale,o=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return l(_r,{});if(!i)return l(_r,{});for(var m=a.getFullYear(),w=i.getFullYear(),g=m;g<=w;g++)h.push(wL(PK(new Date),g));var y=function(_){var N=wL(Ws(r),Number(_.target.value));e.onChange(N)},b=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Yne;return l(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:o.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:s}),children:h.map(function(_){return l("option",{value:_.getFullYear(),children:d(_,{locale:s})},_.getFullYear())})})}function DMe(e,t){var r=S.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function IMe(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,s=e.fromDate,o=e.numberOfMonths,c=o===void 0?1:o;if(i&&w1(i,a)<0){var u=-1*(c-1);a=pl(i,u)}return s&&w1(a,s)<0&&(a=s),Ws(a)}function RMe(){var e=Wa(),t=IMe(e),r=DMe(t,e.month),n=r[0],a=r[1],i=function(s){var o;if(!e.disableNavigation){var c=Ws(s);a(c),(o=e.onMonthChange)===null||o===void 0||o.call(e,c)}};return[n,i]}function MMe(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Ws(e),i=Ws(pl(a,n)),s=w1(i,a),o=[],c=0;c<s;c++){var u=pl(a,c);o.push(u)}return r&&(o=o.reverse()),o}function FMe(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,s=n?i:1,o=Ws(e);if(!r)return pl(o,s);var c=w1(r,e);if(!(c<i))return pl(o,s)}}function LMe(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,s=n?i:1,o=Ws(e);if(!r)return pl(o,-s);var c=w1(o,r);if(!(c<=0))return pl(o,-s)}}var Kne=S.createContext(void 0);function jMe(e){var t=Wa(),r=RMe(),n=r[0],a=r[1],i=MMe(n,t),s=FMe(n,t),o=LMe(n,t),c=function(f){return i.some(function(h){return U4(f,h)})},u=function(f,h){c(f)||(h&&ah(f,h)?a(pl(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:o,nextMonth:s,isDateDisplayed:c};return l(Kne.Provider,{value:d,children:e.children})}function cb(){var e=S.useContext(Kne);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function yz(e){var t,r=Wa(),n=r.classNames,a=r.styles,i=r.components,s=cb().goToMonth,o=function(d){s(pl(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:Gne,u=l(c,{id:e.id,displayMonth:e.displayMonth});return x("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[l("div",{className:n.vhidden,children:u}),l(TMe,{onChange:o,displayMonth:e.displayMonth}),l(OMe,{onChange:o,displayMonth:e.displayMonth})]})}function $Me(e){return l("svg",an({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BMe(e){return l("svg",an({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var KS=S.forwardRef(function(e,t){var r=Wa(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var s=i.join(" "),o=an(an({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),l("button",an({},e,{ref:t,type:"button",className:s,style:o}))});function UMe(e){var t,r,n=Wa(),a=n.dir,i=n.locale,s=n.classNames,o=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return l(_r,{});var h=u(e.previousMonth,{locale:i}),m=[s.nav_button,s.nav_button_previous].join(" "),w=d(e.nextMonth,{locale:i}),g=[s.nav_button,s.nav_button_next].join(" "),y=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:BMe,b=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:$Me;return x("div",{className:s.nav,style:o.nav,children:[!e.hidePrevious&&l(KS,{name:"previous-month","aria-label":h,className:m,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?l(y,{className:s.nav_icon,style:o.nav_icon}):l(b,{className:s.nav_icon,style:o.nav_icon})}),!e.hideNext&&l(KS,{name:"next-month","aria-label":w,className:g,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?l(b,{className:s.nav_icon,style:o.nav_icon}):l(y,{className:s.nav_icon,style:o.nav_icon})})]})}function xz(e){var t=Wa().numberOfMonths,r=cb(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,s=r.displayMonths,o=s.findIndex(function(w){return U4(e.displayMonth,w)}),c=o===0,u=o===s.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return l(UMe,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function qMe(e){var t,r=Wa(),n=r.classNames,a=r.disableNavigation,i=r.styles,s=r.captionLayout,o=r.components,c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:Gne,u;return a?u=l(c,{id:e.id,displayMonth:e.displayMonth}):s==="dropdown"?u=l(yz,{displayMonth:e.displayMonth,id:e.id}):s==="dropdown-buttons"?u=x(_r,{children:[l(yz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),l(xz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=x(_r,{children:[l(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l(xz,{displayMonth:e.displayMonth,id:e.id})]}),l("div",{className:n.caption,style:i.caption,children:u})}function WMe(e){var t=Wa(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?l("tfoot",{className:a,style:n.tfoot,children:l("tr",{children:l("td",{colSpan:8,children:r})})}):l(_r,{})}function zMe(e,t,r){for(var n=r?wh(new Date):co(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var s=Ua(n,i);a.push(s)}return a}function VMe(){var e=Wa(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,s=e.ISOWeek,o=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=zMe(a,i,s);return x("tr",{style:r.head_row,className:t.head_row,children:[n&&l("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return l("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:o(d,{locale:a})},f)})]})}function HMe(){var e,t=Wa(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:VMe;return l("thead",{style:n.head,className:r.head,children:l(i,{})})}function GMe(e){var t=Wa(),r=t.locale,n=t.formatters.formatDay;return l(_r,{children:n(e.date,{locale:r})})}var DR=S.createContext(void 0);function YMe(e){if(!ob(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return l(DR.Provider,{value:t,children:e.children})}return l(KMe,{initialProps:e.initialProps,children:e.children})}function KMe(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,s=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var w=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!w){var g=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var y=n?Vne([],n):[];if(d.selected){var b=y.findIndex(function(_){return ll(u,_)});y.splice(b,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,d,f)}}},o={disabled:[]};n&&o.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return ll(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:s,modifiers:o};return l(DR.Provider,{value:c,children:r})}function IR(){var e=S.useContext(DR);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function XMe(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?ll(a,e)&&ll(n,e)?void 0:ll(a,e)?{from:a,to:void 0}:ll(n,e)?void 0:k6(n,e)?{from:e,to:a}:{from:n,to:e}:a?k6(e,a)?{from:a,to:e}:{from:e,to:a}:n?ah(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var RR=S.createContext(void 0);function JMe(e){if(!lb(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l(RR.Provider,{value:t,children:e.children})}return l(ZMe,{initialProps:e.initialProps,children:e.children})}function ZMe(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,s=a.to,o=t.min,c=t.max,u=function(m,w,g){var y,b;(y=t.onDayClick)===null||y===void 0||y.call(t,m,w,g);var _=XMe(m,n);(b=t.onSelect)===null||b===void 0||b.call(t,_,m,w,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],s?(d.range_end=[s],ll(i,s)||(d.range_middle=[{after:i,before:s}])):d.range_end=[i]):s&&(d.range_start=[s],d.range_end=[s]),o&&(i&&!s&&d.disabled.push({after:IA(i,o-1),before:Ua(i,o-1)}),i&&s&&d.disabled.push({after:i,before:Ua(i,o-1)}),!i&&s&&d.disabled.push({after:IA(s,o-1),before:Ua(s,o-1)})),c){if(i&&!s&&(d.disabled.push({before:Ua(i,-c+1)}),d.disabled.push({after:Ua(i,c-1)})),i&&s){var f=Wu(s,i)+1,h=c-f;d.disabled.push({before:IA(i,h)}),d.disabled.push({after:Ua(s,h)})}!i&&s&&(d.disabled.push({before:Ua(s,-c+1)}),d.disabled.push({after:Ua(s,c-1)}))}return l(RR.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function MR(){var e=S.useContext(RR);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function h5(e){return Array.isArray(e)?Vne([],e):e!==void 0?[e]:[]}function QMe(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=h5(a)}),t}var id;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(id||(id={}));var eFe=id.Selected,rh=id.Disabled,tFe=id.Hidden,rFe=id.Today,cT=id.RangeEnd,uT=id.RangeMiddle,dT=id.RangeStart,nFe=id.Outside;function aFe(e,t,r){var n,a=(n={},n[eFe]=h5(e.selected),n[rh]=h5(e.disabled),n[tFe]=h5(e.hidden),n[rFe]=[e.today],n[cT]=[],n[uT]=[],n[dT]=[],n[nFe]=[],n);return e.fromDate&&a[rh].push({before:e.fromDate}),e.toDate&&a[rh].push({after:e.toDate}),ob(e)?a[rh]=a[rh].concat(t.modifiers[rh]):lb(e)&&(a[rh]=a[rh].concat(r.modifiers[rh]),a[dT]=r.modifiers[dT],a[uT]=r.modifiers[uT],a[cT]=r.modifiers[cT]),a}var Xne=S.createContext(void 0);function iFe(e){var t=Wa(),r=IR(),n=MR(),a=aFe(t,r,n),i=QMe(t.modifiers),s=an(an({},a),i);return l(Xne.Provider,{value:s,children:e.children})}function Jne(){var e=S.useContext(Xne);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function sFe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function oFe(e){return!!(e&&typeof e=="object"&&"from"in e)}function lFe(e){return!!(e&&typeof e=="object"&&"after"in e)}function cFe(e){return!!(e&&typeof e=="object"&&"before"in e)}function uFe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function dFe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=Wu(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var s=Wu(e,n)>=0&&Wu(a,e)>=0;return s}return a?ll(a,e):n?ll(n,e):!1}function fFe(e){return MD(e)}function hFe(e){return Array.isArray(e)&&e.every(MD)}function pFe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(fFe(r))return ll(e,r);if(hFe(r))return r.includes(e);if(oFe(r))return dFe(e,r);if(uFe(r))return r.dayOfWeek.includes(e.getDay());if(sFe(r)){var n=Wu(r.before,e),a=Wu(r.after,e),i=n>0,s=a<0,o=k6(r.before,r.after);return o?s&&i:i||s}return lFe(r)?Wu(e,r.after)>0:cFe(r)?Wu(r.before,e)>0:typeof r=="function"?r(e):!1})}function FR(e,t,r){var n=Object.keys(t).reduce(function(i,s){var o=t[s];return pFe(e,o)&&i.push(s),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!U4(e,r)&&(a.outside=!0),a}function mFe(e,t){for(var r=Ws(e[0]),n=fm(e[e.length-1]),a,i,s=r;s<=n;){var o=FR(s,t),c=!o.disabled&&!o.hidden;if(!c){s=Ua(s,1);continue}if(o.selected)return s;o.today&&!i&&(i=s),a||(a=s),s=Ua(s,1)}return i||a}var gFe=365;function Zne(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,s=t.retry,o=s===void 0?{count:0,lastFocused:e}:s,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:Ua,week:x1,month:pl,year:K0e,startOfWeek:function(y){return a.ISOWeek?wh(y):co(y,{locale:f,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?TK(y):R0(y,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=X0e([u,m]):n==="after"&&d&&(m=J0e([d,m]));var w=!0;if(i){var g=FR(m,i);w=!g.disabled&&!g.hidden}return w?m:o.count>gFe?o.lastFocused:Zne(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:an(an({},o),{count:o.count+1})})}var Qne=S.createContext(void 0);function vFe(e){var t=cb(),r=Jne(),n=S.useState(),a=n[0],i=n[1],s=S.useState(),o=s[0],c=s[1],u=mFe(t.displayMonths,r),d=a??(o&&t.isDateDisplayed(o))?o:u,f=function(){c(a),i(void 0)},h=function(y){i(y)},m=Wa(),w=function(y,b){if(a){var _=Zne(a,{moveBy:y,direction:b,context:m,modifiers:r});ll(a,_)||(t.goToDate(_,a),h(_))}},g={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return l(Qne.Provider,{value:g,children:e.children})}function LR(){var e=S.useContext(Qne);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function yFe(e,t){var r=Jne(),n=FR(e,r,t);return n}var jR=S.createContext(void 0);function xFe(e){if(!ZN(e.initialProps)){var t={selected:void 0};return l(jR.Provider,{value:t,children:e.children})}return l(wFe,{initialProps:e.initialProps,children:e.children})}function wFe(e){var t=e.initialProps,r=e.children,n=function(i,s,o){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,s,o),s.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,s,o);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,s,o)},a={selected:t.selected,onDayClick:n};return l(jR.Provider,{value:a,children:r})}function eae(){var e=S.useContext(jR);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function bFe(e,t){var r=Wa(),n=eae(),a=IR(),i=MR(),s=LR(),o=s.focusDayAfter,c=s.focusDayBefore,u=s.focusWeekAfter,d=s.focusWeekBefore,f=s.blur,h=s.focus,m=s.focusMonthBefore,w=s.focusMonthAfter,g=s.focusYearBefore,y=s.focusYearAfter,b=s.focusStartOfWeek,_=s.focusEndOfWeek,N=function(z){var q,B,G,Q;ZN(r)?(q=n.onDayClick)===null||q===void 0||q.call(n,e,t,z):ob(r)?(B=a.onDayClick)===null||B===void 0||B.call(a,e,t,z):lb(r)?(G=i.onDayClick)===null||G===void 0||G.call(i,e,t,z):(Q=r.onDayClick)===null||Q===void 0||Q.call(r,e,t,z)},E=function(z){var q;h(e),(q=r.onDayFocus)===null||q===void 0||q.call(r,e,t,z)},C=function(z){var q;f(),(q=r.onDayBlur)===null||q===void 0||q.call(r,e,t,z)},D=function(z){var q;(q=r.onDayMouseEnter)===null||q===void 0||q.call(r,e,t,z)},P=function(z){var q;(q=r.onDayMouseLeave)===null||q===void 0||q.call(r,e,t,z)},F=function(z){var q;(q=r.onDayPointerEnter)===null||q===void 0||q.call(r,e,t,z)},L=function(z){var q;(q=r.onDayPointerLeave)===null||q===void 0||q.call(r,e,t,z)},W=function(z){var q;(q=r.onDayTouchCancel)===null||q===void 0||q.call(r,e,t,z)},T=function(z){var q;(q=r.onDayTouchEnd)===null||q===void 0||q.call(r,e,t,z)},R=function(z){var q;(q=r.onDayTouchMove)===null||q===void 0||q.call(r,e,t,z)},j=function(z){var q;(q=r.onDayTouchStart)===null||q===void 0||q.call(r,e,t,z)},Y=function(z){var q;(q=r.onDayKeyUp)===null||q===void 0||q.call(r,e,t,z)},Z=function(z){var q;switch(z.key){case"ArrowLeft":z.preventDefault(),z.stopPropagation(),r.dir==="rtl"?o():c();break;case"ArrowRight":z.preventDefault(),z.stopPropagation(),r.dir==="rtl"?c():o();break;case"ArrowDown":z.preventDefault(),z.stopPropagation(),u();break;case"ArrowUp":z.preventDefault(),z.stopPropagation(),d();break;case"PageUp":z.preventDefault(),z.stopPropagation(),z.shiftKey?g():m();break;case"PageDown":z.preventDefault(),z.stopPropagation(),z.shiftKey?y():w();break;case"Home":z.preventDefault(),z.stopPropagation(),b();break;case"End":z.preventDefault(),z.stopPropagation(),_();break}(q=r.onDayKeyDown)===null||q===void 0||q.call(r,e,t,z)},re={onClick:N,onFocus:E,onBlur:C,onKeyDown:Z,onKeyUp:Y,onMouseEnter:D,onMouseLeave:P,onPointerEnter:F,onPointerLeave:L,onTouchCancel:W,onTouchEnd:T,onTouchMove:R,onTouchStart:j};return re}function _Fe(){var e=Wa(),t=eae(),r=IR(),n=MR(),a=ZN(e)?t.selected:ob(e)?r.selected:lb(e)?n.selected:void 0;return a}function SFe(e){return Object.values(id).includes(e)}function NFe(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(SFe(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function AFe(e,t){var r=an({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=an(an({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function kFe(e,t,r){var n,a,i,s=Wa(),o=LR(),c=yFe(e,t),u=bFe(e,c),d=_Fe(),f=!!(s.onDayClick||s.mode!=="default");S.useEffect(function(){var D;c.outside||o.focusedDay&&f&&ll(o.focusedDay,e)&&((D=r.current)===null||D===void 0||D.focus())},[o.focusedDay,e,r,f,c.outside]);var h=NFe(s,c).join(" "),m=AFe(s,c),w=!!(c.outside&&!s.showOutsideDays||c.hidden),g=(i=(a=s.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:GMe,y=l(g,{date:e,displayMonth:t,activeModifiers:c}),b={style:m,className:h,children:y,role:"gridcell"},_=o.focusTarget&&ll(o.focusTarget,e)&&!c.outside,N=o.focusedDay&&ll(o.focusedDay,e),E=an(an(an({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=N||_?0:-1,n)),u),C={isButton:f,isHidden:w,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:b};return C}function EFe(e){var t=S.useRef(null),r=kFe(e.date,e.displayMonth,t);return r.isHidden?l("div",{role:"gridcell"}):r.isButton?l(KS,an({name:"day",ref:t},r.buttonProps)):l("div",an({},r.divProps))}function CFe(e){var t=e.number,r=e.dates,n=Wa(),a=n.onWeekNumberClick,i=n.styles,s=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:o});if(!a)return l("span",{className:s.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:o}),h=function(m){a(t,r,m)};return l(KS,{name:"week-number","aria-label":f,className:s.weeknumber,style:i.weeknumber,onClick:h,children:d})}function PFe(e){var t,r,n=Wa(),a=n.styles,i=n.classNames,s=n.showWeekNumber,o=n.components,c=(t=o==null?void 0:o.Day)!==null&&t!==void 0?t:EFe,u=(r=o==null?void 0:o.WeekNumber)!==null&&r!==void 0?r:CFe,d;return s&&(d=l("td",{className:i.cell,style:a.cell,children:l(u,{number:e.weekNumber,dates:e.dates})})),x("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return l("td",{className:i.cell,style:a.cell,role:"presentation",children:l(c,{displayMonth:e.displayMonth,date:f})},Qge(f))})]})}function wz(e,t,r){for(var n=r!=null&&r.ISOWeek?TK(t):R0(t,r),a=r!=null&&r.ISOWeek?wh(e):co(e,r),i=Wu(n,a),s=[],o=0;o<=i;o++)s.push(Ua(a,o));var c=s.reduce(function(u,d){var f=r!=null&&r.ISOWeek?FD(d):jD(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function TFe(e,t){var r=wz(Ws(e),fm(e),t);if(t!=null&&t.useFixedWeeks){var n=tve(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],s=x1(i,6-n),o=wz(x1(i,1),s,t);r.push.apply(r,o)}}return r}function OFe(e){var t,r,n,a=Wa(),i=a.locale,s=a.classNames,o=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,w=TFe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),g=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:HMe,y=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:PFe,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:WMe;return x("table",{id:e.id,className:s.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&l(g,{}),l("tbody",{className:s.tbody,style:o.tbody,children:w.map(function(_){return l(y,{displayMonth:e.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),l(b,{displayMonth:e.displayMonth})]})}function DFe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var IFe=DFe()?S.useLayoutEffect:S.useEffect,fT=!1,RFe=0;function bz(){return"react-day-picker-".concat(++RFe)}function MFe(e){var t,r=e??(fT?bz():null),n=S.useState(r),a=n[0],i=n[1];return IFe(function(){a===null&&i(bz())},[]),S.useEffect(function(){fT===!1&&(fT=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function FFe(e){var t,r,n=Wa(),a=n.dir,i=n.classNames,s=n.styles,o=n.components,c=cb().displayMonths,u=MFe(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=s.month,m=e.displayIndex===0,w=e.displayIndex===c.length-1,g=!m&&!w;a==="rtl"&&(t=[m,w],w=t[0],m=t[1]),m&&(f.push(i.caption_start),h=an(an({},h),s.caption_start)),w&&(f.push(i.caption_end),h=an(an({},h),s.caption_end)),g&&(f.push(i.caption_between),h=an(an({},h),s.caption_between));var y=(r=o==null?void 0:o.Caption)!==null&&r!==void 0?r:qMe;return x("div",{className:f.join(" "),style:h,children:[l(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l(OFe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function LFe(e){var t=Wa(),r=t.classNames,n=t.styles;return l("div",{className:r.months,style:n.months,children:e.children})}function jFe(e){var t,r,n=e.initialProps,a=Wa(),i=LR(),s=cb(),o=S.useState(!1),c=o[0],u=o[1];S.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=an(an({},a.styles.root),a.style),h=Object.keys(n).filter(function(w){return w.startsWith("data-")}).reduce(function(w,g){var y;return an(an({},w),(y={},y[g]=n[g],y))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:LFe;return l("div",an({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:l(m,{children:s.displayMonths.map(function(w,g){return l(FFe,{displayIndex:g,displayMonth:w},g)})})}))}function $Fe(e){var t=e.children,r=cMe(e,["children"]);return l(CMe,{initialProps:r,children:l(jMe,{children:l(xFe,{initialProps:r,children:l(YMe,{initialProps:r,children:l(JMe,{initialProps:r,children:l(iFe,{children:l(vFe,{children:t})})})})})})})}function BFe(e){return l($Fe,an({},e,{children:l(jFe,{initialProps:e})}))}function bm({className:e,classNames:t,showOutsideDays:r=!0,...n}){return l(BFe,{showOutsideDays:r,className:Lt("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Lt(hx({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Lt(hx({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>l(y4,{className:"h-4 w-4"}),IconRight:({...a})=>l(sm,{className:"h-4 w-4"})},...n})}bm.displayName="Calendar";const UFe=Ie.object({type:Ie.string().min(1,"Treatment type is required"),description:Ie.string().min(1,"Description is required"),status:Ie.enum(["pending","completed","cancelled"]),cost:Ie.string().min(1,"Cost is required").refine(e=>!isNaN(parseFloat(e)),"Cost must be a valid number").refine(e=>parseFloat(e)>=0,"Cost must be a non-negative number"),estimated_duration:Ie.string().optional().nullable().transform(e=>e===""?null:e),priority:Ie.enum(["low","medium","high"]),plan_id:Ie.string().min(1),scheduled_date:Ie.string().optional().nullable().transform(e=>e===""?null:e),time_gap:Ie.string().optional().nullable().transform(e=>e===""?null:e)});function XS({open:e,onOpenChange:t,onSubmit:r,planId:n,loading:a=!1,initialData:i,isEditMode:s=!1}){const o=fd({resolver:hd(UFe),defaultValues:{type:"",description:"",status:"pending",cost:"0",estimated_duration:"",priority:"medium",plan_id:n,scheduled_date:null,time_gap:null}});Qe.useEffect(()=>{if(n&&!s&&o.setValue("plan_id",n),s&&i){const u=i.priority,f=["low","medium","high"].includes(u||"")?u:"medium";o.reset({type:i.type||"",description:i.procedures||i.description||"",status:i.status||"pending",cost:i.cost!==void 0&&i.cost!==null?String(i.cost):"0",estimated_duration:i.estimated_duration||null,priority:f,plan_id:i.treatment_plan_id||n,scheduled_date:i.scheduled_date?Mt(Wr(i.scheduled_date),"yyyy-MM-dd"):null,time_gap:i.time_gap||null})}else s||o.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null})},[n,i,s,o]);const c=async u=>{await r(u),s||o.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null})};return l(Vn,{open:e,onOpenChange:u=>{u||s||o.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null}),t(u)},children:x(Bn,{className:"max-w-lg overflow-y-auto max-h-[90vh]",children:[" ",x(Jn,{children:[l(Zn,{children:s?"Edit Treatment Details":"Add New Treatment"}),l(us,{children:s?"Update the details of this treatment or visit.":"Add a treatment procedure to the plan."})]}),l(Mh,{...o,children:x("form",{onSubmit:o.handleSubmit(c),className:"space-y-4 py-2 pr-2",children:[l(He,{control:o.control,name:"type",render:({field:u})=>x(De,{children:[l(Oe,{children:"Treatment Type / Title *"}),l(je,{children:l(ht,{placeholder:"e.g., Root Canal, Filling, Visit 1",...u})}),l(Ze,{})]})}),l(He,{control:o.control,name:"description",render:({field:u})=>x(De,{children:[l(Oe,{children:"Description / Procedures *"}),l(je,{children:l(on,{placeholder:"Detailed description of the treatment or procedures",...u,rows:3})}),l(Ze,{})]})}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(zp,{name:"cost",control:o.control,render:({field:u,fieldState:{error:d}})=>x(De,{children:[l(Oe,{children:"Cost (₹) *"}),l(je,{children:l(ht,{type:"text",inputMode:"decimal",placeholder:"0.00",ref:u.ref,name:u.name,onBlur:u.onBlur,value:u.value===null||u.value===void 0?"":String(u.value),onChange:f=>u.onChange(f.target.value),"aria-invalid":!!d})}),d&&l(Ze,{children:d.message})]})}),l(He,{control:o.control,name:"estimated_duration",render:({field:u})=>x(De,{children:[l(Oe,{children:"Estimated Duration"}),l(je,{children:l(ht,{type:"text",placeholder:"e.g., 30 minutes, 1 hour",...u,value:u.value??""})}),l(Ze,{})]})})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(He,{control:o.control,name:"scheduled_date",render:({field:u})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Scheduled Date"}),x(pg,{children:[l(mg,{asChild:!0,children:l(je,{children:x(Fe,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!u.value&&"text-muted-foreground"}`,children:[u.value?Mt(Wr(u.value),"PPP"):l("span",{children:"Pick a date"}),l(nD,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{mode:"single",selected:u.value?Wr(u.value):void 0,onSelect:d=>u.onChange(d?Mt(d,"yyyy-MM-dd"):null),disabled:d=>d<new Date("1900-01-01"),initialFocus:!0})})]}),l(Ze,{})]})}),l(He,{control:o.control,name:"time_gap",render:({field:u})=>x(De,{children:[l(Oe,{children:"Next Visit In (Time Gap)"}),l(je,{children:l(ht,{placeholder:"e.g., 7 days, 2 weeks",...u,value:u.value??""})}),l(Ze,{})]})})]}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l(He,{control:o.control,name:"status",render:({field:u})=>x(De,{children:[l(Oe,{children:"Status"}),x(Ur,{onValueChange:u.onChange,value:u.value||"pending",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select status"})})}),x($r,{children:[l(wt,{value:"pending",children:"Pending"}),l(wt,{value:"completed",children:"Completed"}),l(wt,{value:"cancelled",children:"Cancelled"})]})]}),l(Ze,{})]})}),l(He,{control:o.control,name:"priority",render:({field:u})=>x(De,{children:[l(Oe,{children:"Priority"}),x(Ur,{onValueChange:u.onChange,value:u.value||"medium",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select priority"})})}),x($r,{children:[l(wt,{value:"low",children:"Low"}),l(wt,{value:"medium",children:"Medium"}),l(wt,{value:"high",children:"High"})]})]}),l(Ze,{})]})})]}),x(fs,{className:"pt-4",children:[" ",l(Fe,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),x(Fe,{type:"submit",disabled:a||o.formState.isSubmitting,children:[a||o.formState.isSubmitting?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):s?null:l(Zu,{className:"mr-2 h-4 w-4"}),s?"Save Changes":"Add Treatment"]})]})]})})]})})}function qFe({open:e,onOpenChange:t,patient:r,onSuccess:n}){return l(Vn,{open:e,onOpenChange:t,children:x(Bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:r?"Edit Patient":"New Patient"})}),l(NR,{patient:r,onSuccess:n,onCancel:()=>t(!1)})]})})}function _z(){const{id:e}=fy();return e?l(zFe,{}):l(WFe,{})}function WFe(){var Ge,pt,it;const e=Ss(),{toast:t}=_n(),[r,n]=S.useState([]),[a,i]=S.useState(!0),[s,o]=S.useState(""),[c,u]=S.useState(!1),[d,f]=S.useState(!1),[h,m]=S.useState(!1),[w,g]=S.useState([]),[y,b]=S.useState(null),[_,N]=S.useState(null),[E,C]=S.useState(!1),[D,P]=S.useState(!1),[F,L]=S.useState(!1),[W,T]=S.useState(null),[R,j]=S.useState(!1),[Y,Z]=S.useState(!1),[re,z]=S.useState(null),[q,B]=S.useState(null),[G,Q]=S.useState([]),[O,J]=S.useState(null);S.useEffect(()=>{ne(),X()},[]);const X=async()=>{try{const Le=await Rt.patients.getAll();Q(Le)}catch{Q([])}},ne=async()=>{try{const ut=(await Rt.patients.getAll()).map(he=>({...he,profileCompletion:ie(he)}));n(ut),i(!1)}catch(Le){console.error("Error fetching patients:",Le),i(!1)}},ie=Le=>{if(!Le)return 0;const ut=["first_name","last_name","gender","age","phone","email","address","city","state","postal_code","emergency_contact_name","emergency_contact_phone","blood_group","allergies","medical_conditions"];let he=0;return ut.forEach(Ee=>{Le[Ee]!==null&&Le[Ee]!==void 0&&Le[Ee]!==""&&he++}),Math.floor(he/ut.length*100)},oe=async Le=>{if(o(Le),Le.length>2)try{const he=(await Rt.patients.search(Le)).map(Ee=>({...Ee,profileCompletion:ie(Ee)}));n(he)}catch(ut){console.error("Error searching patients:",ut)}else Le.length===0&&ne()},de=async Le=>{b(Le),f(!0),m(!0),g([]);try{const ut=await ba.getPatientTreatmentPlans(Le.id);g(ut||[])}catch{t({title:"Error",description:"Failed to load treatment plans",variant:"destructive"}),g([])}finally{m(!1)}},V=()=>{f(!1),b(null),g([])},se=S.useCallback(async Le=>{if(N(null),C(!0),J(null),Le&&Le.id){const he=(await ba.getPatientTreatmentPlans(Le.patient_id)).find(Ee=>Ee.id===Le.id);if(he){let Ee=null;if(!he.treatments||he.treatments.length===0)try{Ee=await ba.getAiSuggestionForPlan(he)}catch{Ee=null}N(he),J(Ee)}else t({title:"Error",description:"Failed to fetch plan details.",variant:"destructive"}),C(!1)}},[]),fe=()=>{C(!1),N(null)},te=()=>{P(!0)},ke=Le=>{B(Le.id),z(null),j(!0)},Re=(Le,ut)=>{B(Le.id),z(ut),Z(!0)},Ce=async(Le,ut=!1)=>{m(!0);try{const he=await ba.getPatientTreatmentPlans(Le);if(g(he||[]),_&&_.id&&E){const Ee=he==null?void 0:he.find(Me=>Me.id===_.id);if(Ee){let Me=null,at=0;const ct=3,dt=2500;for(ut&&console.log(`[Patients.tsx REFRESH] Expecting treatments for plan ${_.id}. Will attempt up to ${ct} times.`);at<ct;){at>0?(console.log(`[Patients.tsx REFRESH ATTEMPT ${at+1}/${ct}] Retrying to fetch details for plan ${_.id} after ${dt}ms...`),await new Promise(Nt=>setTimeout(Nt,dt))):ut&&at===0&&await new Promise(Nt=>setTimeout(Nt,1e3));const Xe=await Rt.patients.getTreatmentPlanDetails(Ee.id);if(Xe&&Xe.data)if(ut)if(Xe.data.treatments&&Xe.data.treatments.length>0){console.log(`[Patients.tsx REFRESH ATTEMPT ${at+1}] Treatments found for plan ${_.id}.`),Me=Xe.data;break}else console.log(`[Patients.tsx REFRESH ATTEMPT ${at+1}] Treatments still not found for plan ${_.id}.`),at===ct-1&&(Me=Xe.data,console.warn(`[Patients.tsx REFRESH] Max attempts reached. Using plan data which might not have latest treatments for plan ${_.id}.`));else{Me=Xe.data;break}else if(console.error(`[Patients.tsx REFRESH ATTEMPT ${at+1}] Failed to fetch details for plan ${_.id}. Error: ${Xe==null?void 0:Xe.error}`),at===ct-1&&_&&console.warn(`[Patients.tsx REFRESH] Max attempts reached and failed to fetch details for plan ${_.id}. Plan data in dialog will be stale.`),!Xe||!Xe.data){Me=null;break}at++}if(Me){const Nt=(await ba.getPatientTreatmentPlans(y.id)).find(St=>St.id===(Me.id||_&&_.id));if(Nt){N(Nt),console.log("[Patients.tsx REFRESH] fullFreshPlan after attempts:",JSON.parse(JSON.stringify(Nt))),console.log("[Patients.tsx REFRESH] fullFreshPlan.treatments:",JSON.parse(JSON.stringify(Nt.treatments||[]))),console.log("[Patients.tsx REFRESH] fullFreshPlan.originalAISuggestion:",JSON.parse(JSON.stringify(Nt.originalAISuggestion||null)));let St=null;if(Nt.treatments&&Nt.treatments.length>0)St=null;else if(ut)console.warn(`[Patients.tsx REFRESH] Expected treatments for plan ${Nt.id} after AI add, but none found after retries. Retaining existing AI suggestion to allow retry.`),St=O;else if(Nt.originalAISuggestion)St=Nt.originalAISuggestion;else{console.log("[Patients.tsx REFRESH] Plan has no treatments, no embedded originalAISuggestion. Attempting to fetch new AI suggestion.");try{St=await ba.getAiSuggestionForPlan(Nt)}catch(At){console.error("[Patients.tsx REFRESH] Failed to fetch new AI suggestion:",At),St=null}}J(St),console.log("[Patients.tsx REFRESH] newAiSuggestionState set to state:",JSON.parse(JSON.stringify(St||null)))}else t({title:"Warning",description:"Could not refresh plan details. Displayed data might be stale.",variant:"default"}),ut&&console.warn(`[Patients.tsx REFRESH] Failed to fetch plan details for plan ${_.id} after AI add attempt. AI suggestion state will be preserved to allow retry.`)}else t({title:"Warning",description:"Could not refresh plan details. Displayed data might be stale.",variant:"default"}),ut&&console.warn(`[Patients.tsx REFRESH] Failed to fetch plan details for plan ${_.id} after AI add attempt. AI suggestion state will be preserved to allow retry.`)}}}catch(he){console.error("[Patients.tsx REFRESH] Error in refreshTreatmentPlans:",he),t({title:"Error",description:"Failed to refresh treatment plans.",variant:"destructive"}),g([])}finally{m(!1)}},ve=S.useMemo(()=>{const Le=(_==null?void 0:_.treatments)||[];if(!Le.length)return[];const ut=new Map;for(const Me of Le)Me&&typeof Me.id<"u"&&(ut.has(Me.id)||ut.set(Me.id,Me));const he=Array.from(ut.values()).sort((Me,at)=>{const ct=typeof Me.visit_number=="number"?Me.visit_number:1/0,dt=typeof at.visit_number=="number"?at.visit_number:1/0;if(ct!==dt)return ct-dt;const Xe=Me.created_at?new Date(Me.created_at).getTime():0,Nt=at.created_at?new Date(at.created_at).getTime():0;return Xe-Nt});let Ee=(_==null?void 0:_.start_date)||(_==null?void 0:_.created_at);return he.map((Me,at)=>{let ct;if(at===0)ct=Mt(Wr(Ee),"yyyy-MM-dd");else{const dt=he[at-1];Ee=VFe(Ee,dt.time_gap),ct=Ee}return{...Me,estimatedVisitDate:ct}})},[_==null?void 0:_.treatments,_==null?void 0:_.start_date,_==null?void 0:_.created_at]);return x(_r,{children:[l("style",{children:`
        .glass-treatment-btn {
          background: linear-gradient(135deg, rgba(255,255,255,0.45) 0%, rgba(173,216,255,0.25) 100%);
          border-radius: 18px;
          border: 1.5px solid rgba(120, 180, 255, 0.18);
          box-shadow: 0 4px 24px 0 rgba(120,180,255,0.10), 0 1.5px 6px 0 rgba(120,180,255,0.10);
          backdrop-filter: blur(22px) saturate(180%);
          -webkit-backdrop-filter: blur(22px) saturate(180%);
          color: #2563eb;
          font-weight: 600;
          padding: 0.85rem 1.5rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          transition: box-shadow 0.2s, background 0.2s, border 0.2s;
          outline: none;
        }
        .glass-treatment-btn:hover {
          background: linear-gradient(135deg, rgba(255,255,255,0.60) 0%, rgba(173,216,255,0.35) 100%);
          box-shadow: 0 12px 40px 0 rgba(120,180,255,0.18), 0 2px 8px 0 rgba(120,180,255,0.15);
          color: #1d4ed8;
          border: 1.5px solid rgba(120,180,255,0.28);
        }
      `}),x("div",{className:"space-y-6",children:[l("div",{className:"flex items-center justify-between",children:x("div",{children:[l("h1",{className:"text-2xl font-semibold tracking-tight",children:"Patients"}),l("p",{className:"text-sm text-muted-foreground",children:"Manage patient information and appointments"})]})}),x("div",{className:"flex items-center gap-4",children:[x("div",{className:"relative flex-1",children:[l(w4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),l(ht,{placeholder:"Search by name, phone, or registration number...",className:"pl-8",value:s,onChange:Le=>oe(Le.target.value)})]}),x(Fe,{onClick:()=>u(!0),children:[l(Zu,{className:"h-4 w-4 mr-2"}),"New Patient"]})]}),c&&l(qFe,{open:c,onOpenChange:u,onSuccess:Le=>{u(!1),e(`/patients/${Le}`)}}),a?l("div",{className:"text-center py-8",children:"Loading patients..."}):l("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(Le=>x(or,{children:[l(hr,{className:"pt-6",children:x("div",{className:"flex flex-col space-y-2",children:[x("div",{className:"flex items-center justify-between",children:[x("h3",{className:"font-medium",children:[Le.first_name," ",Le.last_name]}),l("div",{className:`px-2 py-1 rounded-full text-xs ${Le.profileCompletion===100?"bg-green-100 text-green-800":Le.profileCompletion>50?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:Le.profileCompletion===100?"Complete":Le.profileCompletion>50?"In Progress":"Basic"})]}),x("div",{className:"flex items-center text-sm text-muted-foreground",children:[l(S5,{className:"h-4 w-4 mr-2"}),Le.phone]}),Le.email&&x("div",{className:"flex items-center text-sm text-muted-foreground",children:[l(x4,{className:"h-4 w-4 mr-2"}),Le.email]}),x("div",{className:"mt-2",children:[x("div",{className:"flex items-center justify-between text-sm mb-1",children:[l("span",{children:"Profile Completion"}),x("span",{children:[Le.profileCompletion,"%"]})]}),l(kre,{value:Le.profileCompletion})]})]})}),x(eg,{className:"flex flex-col gap-2 items-stretch",children:[x("div",{className:"flex justify-between w-full",children:[l(Fe,{variant:"outline",size:"sm",onClick:()=>e(`/patients/${Le.id}`,{state:{action:"view"}}),children:"View Details"}),x(Fe,{variant:"secondary",size:"sm",onClick:()=>e(`/patients/${Le.id}`,{state:{action:"edit"}}),children:[l(vi,{className:"h-4 w-4 mr-1"}),Le.profileCompletion<100?"Complete Profile":"Edit Profile"]})]}),x(Fe,{type:"button",className:"glass-treatment-btn",onClick:()=>de(Le),children:[l(b5,{className:"h-5 w-5"})," Treatment Plan"]})]})]},Le.id))}),l(Vn,{open:d,onOpenChange:V,children:x(Bn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:y?`Treatment Plans for ${y.first_name} ${y.last_name}`:"Treatment Plans"})}),l("div",{className:"flex justify-end mb-4",children:x(Fe,{type:"button",className:"glass-treatment-btn",onClick:te,children:[l(b5,{className:"h-5 w-5"})," Add Treatment Plan"]})}),h?l("div",{className:"flex items-center justify-center py-12",children:"Loading..."}):w.length===0?l("div",{className:"text-center text-muted-foreground py-8",children:"No treatment plans found for this patient."}):l("div",{className:"grid grid-cols-1 gap-4",children:w.map(Le=>l(Pre,{plan:Le,onViewDetails:se},Le.id))})]})}),l(Vn,{open:D,onOpenChange:P,children:x(Bn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:"Add Treatment Plan"})}),y&&l(AO,{open:D,onOpenChange:P,onSubmit:async(Le,ut)=>{const{clinical_considerations:he,key_materials:Ee,post_treatment_care:Me,total_visits:at,condition:ct,domain:dt,symptoms:Xe,materials:Nt,estimated_duration:St,initialTreatments:At,originalAISuggestion:dn,...Nr}=Le,mt={title:Le.title||Le.symptoms||"Untitled Plan",description:Le.description||"",patient_id:Le.patient_id,status:Le.status||"planned",start_date:Le.start_date||new Date().toISOString().split("T")[0],priority:Le.priority||"medium",ai_generated:Le.ai_generated||!1},Dt=await ba.createTreatmentPlan(mt,ut);if(!Dt||Dt.error||!Dt.data||!Dt.data.id){t({title:"Error",description:"Failed to create treatment plan.",variant:"destructive"});return}const yr=Dt.data.id,Gr=await Rt.patients.createTreatmentPlanMetadata({treatment_plan_id:yr,clinical_considerations:he||null,key_materials:Ee||null,post_treatment_care:Me||null,total_visits:at?Number(at):0,completed_visits:0,originalAISuggestion:dn||null});if(Gr&&Gr.error){t({title:"Error",description:"Failed to save plan metadata.",variant:"destructive"});return}P(!1),Ce(mt.patient_id);let fr=null,Or=null;if(yr){const cr=await Rt.patients.getTreatmentPlanDetails(yr);cr&&cr.data?(fr=cr.data,dn&&(fr.originalAISuggestion=dn)):cr&&cr.error&&(Or=cr.error)}if(Or||!fr||fr.error){t({title:"Error",description:"Failed to fetch full plan details. Please try again.",variant:"destructive"});return}N({...fr,treatments:fr.visits||[]}),C(!0),J(dn||null)},patients:G,loading:!1,initialData:{patient_id:y.id}})]})}),l(Vn,{open:F,onOpenChange:L,children:x(Bn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:"Edit Treatment Plan"})}),y&&W&&l(AO,{open:F,onOpenChange:L,onSubmit:async(Le,ut)=>{await ba.updateTreatmentPlan(W.id,{...Le,patient_id:y.id}),L(!1),Ce(y.id)},patients:G,loading:!1,initialData:W})]})}),l(Vn,{open:R,onOpenChange:j,children:x(Bn,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:"Add Treatment"})}),q&&l(XS,{open:R,onOpenChange:j,onSubmit:async Le=>{await ba.createTreatment({...Le,plan_id:q}),j(!1),y&&Ce(y.id)},planId:q,loading:!1})]})}),l(Vn,{open:Y,onOpenChange:Z,children:x(Bn,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:"Edit Treatment"})}),q&&re&&l(XS,{open:Y,onOpenChange:Z,onSubmit:async Le=>{await ba.updateTreatment(re.id,{...Le,plan_id:q}),Z(!1),y&&Ce(y.id)},planId:q,loading:!1,initialData:re,isEditMode:!0})]})}),l(Vn,{open:E,onOpenChange:fe,children:x(Bn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[_&&!_.error&&x(_r,{children:[l(Ine,{open:E,onOpenChange:fe,plan:_,onRefresh:async()=>{y&&Ce(y.id,!0)},onAddTreatment:()=>ke(_),onStatusChange:async(Le,ut)=>{await ba.updateTreatmentPlan(Le,{status:ut}),y&&Ce(y.id)},onDeletePlan:async Le=>{await ba.deleteTreatmentPlan(Le),C(!1),y&&Ce(y.id)},onTreatmentStatusChange:async(Le,ut)=>{await ba.updateTreatment(Le,{status:ut}),y&&Ce(y.id)},onDeleteTreatment:async Le=>{await ba.deleteTreatment(Le),y&&Ce(y.id)},onEditTreatment:Le=>Re(_,Le),loading:!1,navigateToPatient:()=>{},aiInitialSuggestion:O}),l(Dne,{plan:{..._,patient:{full_name:_.patientName,age:((Ge=_.patient)==null?void 0:Ge.age)||0,gender:((pt=_.patient)==null?void 0:pt.gender)||"",registration_number:((it=_.patient)==null?void 0:it.registration_number)||"",..._.patient}},treatmentsWithEstimatedDates:ve})]}),_&&_.error&&x("div",{className:"text-red-500",children:["Error loading treatment plan: ",_.error.message]})]})})]})]})}function zFe(){const e=Ss(),{id:t}=fy(),{state:r}=Em(),[n,a]=S.useState(null),[i,s]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(!0),[m,w]=S.useState((r==null?void 0:r.action)==="edit"),[g,y]=S.useState(!1),[b,_]=S.useState(!1),{toast:N}=_n();console.log(`Patients.tsx: PatientDetails rendering. isEditing: ${m}, Patient ID: ${t}`),S.useEffect(()=>{t&&E(t)},[t]);const E=async P=>{h(!0);try{er.invalidate(`patients:${P}`),er.invalidate(`appointments:patient:${P}`),er.invalidate(`medical_records:${P}`),er.invalidate(`patient_dental_history_teeth:${P}`);const[F,L,W,T]=await Promise.all([Rt.patients.getById(P),Rt.appointments.getByPatientId(P),Rt.patients.getMedicalRecords(P),Rt.patients.getPatientDentalHistoryTeeth(P)]);a(F),s(L||[]),c(W||[]),d(T||[])}catch(F){console.error("Error fetching patient details:",F)}finally{h(!1)}},C=()=>{y(!0)},D=P=>{e(`/appointments?patientId=${P}&action=new`)};return f?l("div",{className:"flex items-center justify-center h-full",children:"Loading patient details..."}):n?x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{children:[l("h1",{className:"text-2xl font-semibold tracking-tight",children:m?"Edit Patient Profile":"Patient Details"}),x("p",{className:"text-sm text-muted-foreground",children:[n.first_name," ",n.last_name]})]}),x("div",{className:"flex gap-2",children:[l(Fe,{variant:"outline",onClick:()=>e("/patients"),children:"Back to List"}),l(Fe,{onClick:()=>{console.log(`Patients.tsx: Edit/View button clicked. Current isEditing: ${m}`),w(!m),console.log("Patients.tsx: setIsEditing called.")},children:m?"View Details":"Edit Profile"})]})]}),m?l(_r,{children:l(NR,{patient:n,onSuccess:()=>{E(t),w(!1)},onCancel:()=>w(!1)},(n==null?void 0:n.id)||"new-patient-form")}):l(qIe,{patient:n,appointments:i,medicalRecords:o,dentalHistoryTeeth:u,onEdit:()=>w(!0),onBookAppointment:D,onAddMedicalRecord:C}),l(Vn,{open:g,onOpenChange:y,children:x(Bn,{className:"max-w-5xl w-full mx-auto rounded-lg shadow-lg",children:[l(Jn,{children:l(Zn,{children:"Add New Medical Record"})}),l(Cre,{patientId:t,patientName:(n==null?void 0:n.first_name)+" "+(n==null?void 0:n.last_name),onSubmit:async P=>{_(!0);try{await Rt.patients.createMedicalRecord({patient_id:t,record_date:P.chief_complaint?new Date().toISOString().split("T")[0]:"",record_type:"dental",description:JSON.stringify(P)},[]),N({title:"Success",description:"Medical record added successfully."}),y(!1),E(t)}catch(F){console.error("Error adding medical record:",F),N({title:"Error",description:"Failed to add medical record.",variant:"destructive"})}finally{_(!1)}},onCancel:()=>y(!1),isLoading:b})]})})]}):l("div",{className:"flex items-center justify-center h-full",children:"Patient not found"})}function VFe(e,t){if(!t)try{return Mt(Wr(e),"yyyy-MM-dd")}catch{try{const a=new Date(e);return isNaN(a.getTime())?e:Mt(a,"yyyy-MM-dd")}catch{return e}}let r;try{r=Wr(e)}catch{r=new Date(e)}if(isNaN(r.getTime()))return"Invalid Date";try{const n=t.toLowerCase().split(" ");if(n.length!==2)return Mt(r,"yyyy-MM-dd");const a=parseInt(n[0],10),i=n[1].endsWith("s")?n[1]:n[1]+"s";if(isNaN(a))return Mt(r,"yyyy-MM-dd");let s={};if(i==="days")s={days:a};else if(i==="weeks")s={weeks:a};else if(i==="months")s={months:a};else if(i==="years")s={years:a};else return Mt(r,"yyyy-MM-dd");return Mt(SK(r,s),"yyyy-MM-dd")}catch{return Mt(r,"yyyy-MM-dd")}}function Sz(e,t){const[r,n]=S.useState(!1);return S.useEffect(()=>{let a;try{a=GD(e,i=>{t&&t(i)}),n(!0)}catch(i){console.error("Error subscribing to changes:",i),n(!1)}return()=>{a&&a.unsubscribe(),n(!1)}},[e,t]),r}function Nz(e,t={}){const[r,n]=S.useState(!1);return{update:S.useCallback(async(i,s)=>{n(!0),s&&s();try{const o=await e(i);return t.onSuccess&&t.onSuccess(o),o}catch(o){throw console.error(t.errorMessage||"Update failed",o),t.onError&&t.onError(o),o}finally{n(!1)}},[e,t]),loading:r}}const hT=async e=>{if(!e)return console.log("[getBookedAppointmentDetailsForPlan] No planId provided, exiting."),[];console.log(`[getBookedAppointmentDetailsForPlan] Attempting to fetch for planId: ${e}`);let t=null;try{if(console.log(`[getBookedAppointmentDetailsForPlan] ENTERING TRY BLOCK for planId: ${e}`),console.log(`[getBookedAppointmentDetailsForPlan] PRE: Calling treatmentService.getVisitsByPlanId for planId: ${e}`),t=await ba.getVisitsByPlanId(e),console.log(`[getBookedAppointmentDetailsForPlan] POST: treatmentService.getVisitsByPlanId returned for planId ${e}. Result:`,t),!t)return console.log(`[getBookedAppointmentDetailsForPlan] Visits data is null or undefined for plan ${e}.`),[];if(t.length===0)return console.log(`[getBookedAppointmentDetailsForPlan] No visits found (empty array) for plan ${e}`),[];const r=t.map(i=>i.id);if(console.log(`[getBookedAppointmentDetailsForPlan] Visit IDs for plan ${e}:`,r),r.length===0)return console.log(`[getBookedAppointmentDetailsForPlan] No visit IDs extracted (map result empty) for plan ${e}`),[];console.log("[getBookedAppointmentDetailsForPlan] PRE: Calling api.appointments.getAppointmentsByTreatmentIds with visitIds:",r);const n=await Rt.appointments.getAppointmentsByTreatmentIds(r);if(console.log(`[getBookedAppointmentDetailsForPlan] POST: api.appointments.getAppointmentsByTreatmentIds returned. Appointments for visit IDs (${r.join(", ")}):`,n),!n)return console.log("[getBookedAppointmentDetailsForPlan] Appointments data is null or undefined for the given visit IDs."),[];if(n.length===0)return console.log("[getBookedAppointmentDetailsForPlan] No appointments found (empty array) for visit IDs"),[];const a=n.filter(i=>i.status!=="cancelled"&&i.treatment_id).map(i=>i);return console.log(`[getBookedAppointmentDetailsForPlan] Filtered Booked Appointments for plan ${e}:`,a),a}catch(r){return console.error(`[getBookedAppointmentDetailsForPlan] CRITICAL ERROR in getBookedAppointmentDetailsForPlan for planId ${e}. Error:`,r),t!==null?console.error("[getBookedAppointmentDetailsForPlan] State of 'visits' when error occurred:",t):console.error("[getBookedAppointmentDetailsForPlan] 'visits' was null when error occurred (error likely in getVisitsByPlanId itself)."),[]}};function HFe(){const{toast:e}=_n(),[t,r]=S.useState(!0),[n,a]=S.useState([]),[i,s]=S.useState([]),[o,c]=S.useState(null),[u,d]=S.useState({plans:null,selectedPlan:null}),f=Sz("treatment_plans",()=>{b()}),h=Sz("treatments",T=>{o&&T.new&&T.new.plan_id===o.id?_():b()}),{update:m,loading:w}=Nz(T=>ba.updateTreatment(T.treatmentId,{status:T.newStatus}),{onError:()=>{e({title:"Update Failed",description:"Failed to update treatment status. Please try again.",variant:"destructive"}),o&&u.selectedPlan&&c({...u.selectedPlan})}}),{update:g,loading:y}=Nz(T=>ba.updateTreatmentPlan(T.planId,{status:T.newStatus}),{onError:()=>{e({title:"Update Failed",description:"Failed to update plan status. Please try again.",variant:"destructive"}),u.plans&&a([...u.plans])}}),b=S.useCallback(async()=>{try{r(!0);const[T,R]=await Promise.all([ba.getAllTreatmentPlans(),Rt.patients.getAll()]),j=ba.processTreatmentPlanData(T,R);a(j),s(R)}catch(T){console.error("Error fetching data:",T),e({title:"Error",description:"Failed to load treatment plans",variant:"destructive"})}finally{r(!1)}},[e]),_=S.useCallback(async()=>{if(o)try{const R=(await ba.getAllTreatmentPlans()).find(j=>j.id===o.id);if(R){const j=ba.processTreatmentPlanData([R],i)[0];c(j)}}catch(T){console.error("Error refreshing plan:",T)}},[o,i]);S.useEffect(()=>{b()},[]);const N=S.useCallback((T,R,j)=>n.filter(Y=>{var q,B,G;const Z=T?((q=Y.title)==null?void 0:q.toLowerCase().includes(T.toLowerCase()))||((B=Y.description)==null?void 0:B.toLowerCase().includes(T.toLowerCase()))||((G=Y.patientName)==null?void 0:G.toLowerCase().includes(T.toLowerCase())):!0,re=R&&R!=="all"?Y.patient_id===R:!0,z=j&&j!=="all"?Y.status===j:!0;return Z&&re&&z}),[n]),E=S.useCallback(async(T,R)=>{var Z,re,z,q;let j=null,Y=null;try{r(!0);const{originalAISuggestion:B,clinical_considerations:G,materials:Q,post_treatment_care:O,total_visits:J,...X}=T,ne={title:X.title||"Untitled Plan",description:X.description||"No description",patient_id:X.patient_id||"",status:X.status||"planned",start_date:X.start_date||Mt(new Date,"yyyy-MM-dd"),priority:X.priority||"medium",ai_generated:!!B},ie=await ba.createTreatmentPlan(ne,R);if(ie.error||!ie.data||!ie.data.id)throw console.error("Error creating base treatment plan:",ie.error),e({title:"Error",description:((Z=ie.error)==null?void 0:Z.message)||"Failed to create base treatment plan record.",variant:"destructive"}),ie.error||new Error("Base plan creation failed or ID missing.");j=ie.data.id,Y=ie.data,e({title:"Plan Created",description:"Base plan record and teeth associations saved. Saving metadata..."});const oe={treatment_plan_id:j,clinical_considerations:G||null,key_materials:Q||null,post_treatment_care:O||null,total_visits:J?parseInt(J):((q=(z=(re=B==null?void 0:B.planDetails)==null?void 0:re.appointmentPlan)==null?void 0:z.sittingDetails)==null?void 0:q.length)||0,completed_visits:0};try{await Rt.patients.createTreatmentPlanMetadata(oe),e({title:"Metadata Saved",description:"Additional plan details saved successfully."})}catch(fe){console.error("Error creating treatment plan metadata:",fe),e({title:"Warning",description:"Plan created, but failed to save some additional details (metadata).",variant:"default"})}const de=await Rt.patients.getTreatmentPlanDetails(j);if(de.error||!de.data)return console.error("Error fetching new plan details:",de.error),e({title:"Warning",description:"Plan fully created, but failed to fetch updated details. A manual refresh may be needed.",variant:"default"}),b(),{...ba.processTreatmentPlanData([{...Y,treatments:[],metadata:oe}],i)[0],originalAISuggestion:B};const V=de.data,se=ba.processTreatmentPlanData([V],i)[0];return b(),console.log("[useTreatmentPlans] createTreatmentPlan - Returning originalAISuggestion:",T.originalAISuggestion),{...se,originalAISuggestion:T.originalAISuggestion}}catch(B){throw console.error("Error in createTreatmentPlan process:",B),e({title:"Error",description:`An unexpected error occurred: ${B instanceof Error?B.message:"Please check console."}`,variant:"destructive"}),B}finally{r(!1)}},[b,i,e]),C=S.useCallback(async T=>{try{r(!0),await ba.createTreatment(T),e({title:"Treatment Added",description:"New treatment has been successfully added to the plan."}),await _()}catch(R){throw console.error("Error creating treatment:",R),e({title:"Error",description:R.message||"Failed to add treatment.",variant:"destructive"}),R}finally{r(!1)}},[e,_]),D=S.useCallback(async(T,R)=>{try{r(!0),await ba.updateTreatment(T,R),e({title:"Treatment Updated",description:"Treatment details have been successfully updated."}),await _()}catch(j){throw console.error("Error updating treatment details:",j),e({title:"Error",description:j.message||"Failed to update treatment details.",variant:"destructive"}),j}finally{r(!1)}},[e,_]),P=S.useCallback(async(T,R)=>{if(d({...u,selectedPlan:{...o}}),o){const j=o.treatments.map(re=>re.id===T?{...re,status:R}:re),Y=j.filter(re=>re.status==="completed").length,Z=Math.round(Y/j.length*100);c({...o,treatments:j,completedTreatments:Y,progress:Z})}await m({treatmentId:T,newStatus:R})},[o,u,m]),F=S.useCallback(async(T,R)=>{d({...u,plans:[...n]});const j=n.map(Y=>Y.id===T?{...Y,status:R}:Y);a(j),o&&o.id===T&&c({...o,status:R}),await g({planId:T,newStatus:R})},[n,o,u,g]),L=S.useCallback(async T=>{d({...u,selectedPlan:{...o}});try{if(r(!0),o){const R=o.treatments.find(q=>q.id===T),j=o.treatments.filter(q=>q.id!==T),Y=j.filter(q=>q.status==="completed").length,Z=j.length,re=Z?Math.round(Y/Z*100):0,z=j.reduce((q,B)=>q+parseFloat(B.cost||0),0);c({...o,treatments:j,completedTreatments:Y,totalTreatments:Z,progress:re,totalCost:z})}await ba.deleteTreatment(T),e({title:"Success",description:"Treatment deleted successfully"}),await _()}catch(R){console.error("Error deleting treatment:",R),u.selectedPlan&&c(u.selectedPlan),e({title:"Error",description:"Failed to delete treatment",variant:"destructive"})}finally{r(!1)}},[_,o,u,e]),W=S.useCallback(async T=>{try{r(!0);const R=n.filter(j=>j.id!==T);a(R),await ba.deleteTreatmentPlan(T),e({title:"Success",description:"Treatment plan deleted successfully"}),o&&o.id===T&&c(null)}catch(R){console.error("Error deleting treatment plan:",R),b(),e({title:"Error",description:"Failed to delete treatment plan",variant:"destructive"})}finally{r(!1)}},[b,n,o,e]);return{loading:t,treatmentPlans:n,patients:i,selectedPlan:o,setSelectedPlan:c,treatmentPlansSubscribed:f,treatmentsSubscribed:h,updatingTreatmentStatus:w,updatingPlanStatus:y,filterPlans:N,fetchData:b,refreshSelectedPlan:_,createTreatmentPlan:E,createTreatment:C,updateTreatmentDetails:D,handleUpdateTreatmentStatus:P,handleUpdatePlanStatus:F,deleteTreatment:L,deletePlan:W}}function GFe({open:e,onOpenChange:t,patients:r}){const[n,a]=S.useState(""),[i,s]=S.useState(""),[o,c]=S.useState(""),[u,d]=S.useState(null),[f,h]=S.useState(""),[m,w]=S.useState(""),[g,y]=S.useState([]),[b,_]=S.useState(null),[N,E]=S.useState(!1),[C,D]=S.useState(null),[P,F]=S.useState({}),{toast:L}=_n(),[W,T]=S.useState(!1),[R,j]=S.useState(!1),Y=X=>{var dt;if(!X)return console.log("[generateSuggestions] No details provided."),[];console.log("[generateSuggestions] Processing details object:",X),console.log("[generateSuggestions] Processing details (stringified):",JSON.stringify(X));const ne=Array.isArray(X.medical_conditions)?X.medical_conditions.map(Xe=>String(Xe).toLowerCase()):[],ie=String(((dt=X.lifestyle_habits)==null?void 0:dt.additional_concerns)||"").toLowerCase(),oe=X.dental_history,de=String((oe==null?void 0:oe.chief_complaint)||"").toLowerCase(),V=String((oe==null?void 0:oe.pain_description)||"").toLowerCase(),se=String((oe==null?void 0:oe.functional_concerns)||"").toLowerCase();console.log("[generateSuggestions] Parsed medicalConditions array:",ne),console.log("[generateSuggestions] Parsed lifestyleConcerns string:",ie),console.log("[generateSuggestions] Parsed chiefComplaint string:",de),console.log("[generateSuggestions] Parsed painDescription string:",V),console.log("[generateSuggestions] Parsed functionalConcerns string:",se);const fe=["pain","throbbing","sensitivity","sensitive","hot food","severe tooth pain","ache"],te=["filling","root canal","lodgement","molar","cavity","broken","chipped","missing"],ke=["gum","recession","periodontal","bleeding","swelling","pocketing","mobile"],Re=["jaw","clicking","tmj","bruxism","grinding","headache","lock"],Ce=["stain","deposits","white teeth","cosmetic","discolored","yellow"],ve=`${de} ${V} ${se} ${ie}`;console.log("[generateSuggestions] Combined searchable text:",ve);const Ge=[],pt=new Set;let it=0;const Le=(Xe,Nt,St)=>{let At=St.split(" ")[0];const dn=St.match(/\b(\d{2}(?:,\s*\d{2})*)\b/);return dn?At=`Teeth ${dn[0]}`:Nt.length>0&&(At=Nt[0].charAt(0).toUpperCase()+Nt[0].slice(1)),`${Xe}: ${At}`},ut=fe.filter(Xe=>ve.includes(Xe)||ne.includes(Xe));if(ut.length>0&&it<3){const Xe=Le("Assess Pain",ut,V||de);if(!pt.has(Xe)){const Nt=`Patient reports pain/sensitivity related to: "${V||de||"N/A"}". Relevant Medical Conditions: ${ne.join(", ")||"None"}.`,St=`Regarding the reported pain/sensitivity (${V||de||"see condition"}), what are the likely causes? What diagnostic steps (tests, imaging) and initial pain management strategies are recommended?`;Ge.push({label:Xe,condition:Nt,question:St}),pt.add(Xe),it++}}const he=te.filter(Xe=>ve.includes(Xe));if(he.length>0&&it<3){const Xe=Le("Evaluate Restorative",he,de||se);if(!pt.has(Xe)){const Nt=`Patient presents with potential restorative needs (${he.join(", ")}). Chief Complaint: "${de||"N/A"}". Functional Concerns: "${se||"N/A"}".`,St=`Given the potential restorative issues (${de||se||he.join(", ")||"see condition"}), what diagnostic evaluations are needed? What are the primary restorative treatment options to consider?`;Ge.push({label:Xe,condition:Nt,question:St}),pt.add(Xe),it++}}const Ee=ke.filter(Xe=>ve.includes(Xe));if(Ee.length>0&&it<3){const Xe=Le("Check Perio",Ee,se||de);if(!pt.has(Xe)){const Nt=`Patient shows signs potentially related to periodontal health (${Ee.join(", ")}). Chief Complaint: "${de||"N/A"}". Functional Concerns: "${se||"N/A"}". Relevant Medical Conditions: ${ne.join(", ")||"None"}.`,St=`Based on potential periodontal indicators (${se||de||Ee.join(", ")||"see condition"}), what periodontal assessment (probing, bleeding index) is necessary? What initial hygiene or treatment steps should be considered?`;Ge.push({label:Xe,condition:Nt,question:St}),pt.add(Xe),it++}}const Me=Ce.filter(Xe=>ve.includes(Xe));if(Me.length>0&&it<3){const Xe=Le("Review Esthetics",Me,se||de);if(!pt.has(Xe)){const Nt=`Patient has expressed concerns or shows signs related to dental esthetics (${Me.join(", ")}). Chief Complaint: "${de||"N/A"}". Functional Concerns: "${se||"N/A"}".`,St=`Regarding the esthetic concerns (${de||se||Me.join(", ")||"see condition"}), what options are available (e.g., whitening, veneers, cleaning)? What factors should be considered in treatment planning?`;Ge.push({label:Xe,condition:Nt,question:St}),pt.add(Xe),it++}}const at=Re.filter(Xe=>ve.includes(Xe));if(at.length>0&&it<3){const Xe=Le("Assess TMJ",at,de||V||se);if(!pt.has(Xe)){const Nt=`Patient reports symptoms potentially related to TMJ dysfunction (${at.join(", ")}). Chief Complaint: "${de||"N/A"}". Pain Description: "${V||"N/A"}". Functional Concerns: "${se||"N/A"}".`,St=`Considering the potential TMJ symptoms (${de||V||se||at.join(", ")||"see condition"}), how should TMJ function be assessed? What are the initial management options for potential TMJ disorders or bruxism?`;Ge.push({label:Xe,condition:Nt,question:St}),pt.add(Xe),it++}}const ct=Ge;return console.log("[generateSuggestions] Final generated suggestions (more exact labels):",JSON.stringify(ct,null,2)),ct};S.useEffect(()=>{(async()=>{if(!i){d(null),console.log("[fetchDetails] No patient selected, clearing details.");return}console.log("[fetchDetails] Fetching details for patient ID:",i);try{const{data:ne,error:ie}=await $e.from("patients").select("*").eq("id",i).single();ie?(console.error("[fetchDetails] Error fetching patient details:",ie),d(null)):ne?(console.log("[fetchDetails] Raw data received:",ne),console.log("[fetchDetails] Setting fetchedPatientDetails with full record:",ne),d(ne)):(console.log("[fetchDetails] No data received for patient ID:",i),d(null))}catch(ne){console.error("[fetchDetails] Exception fetching patient details:",ne),d(null)}})(),(!e||!i)&&F({})},[i,e]),S.useEffect(()=>{console.log("[suggestionEffect] Suggestion useEffect triggered. Patient ID:",i),console.log("[suggestionEffect] Using fetchedPatientDetails:",u);let X=[];i&&u&&u.id===i?(X=Y(u),console.log("[suggestionEffect] Generated specific suggestions:",X)):console.log("[suggestionEffect] Conditions not met for generating specific suggestions."),y(X),console.log("[suggestionEffect] Set dynamicSuggestions to:",X)},[i,u]),S.useEffect(()=>{console.log("[clearFieldsEffect] Clearing fields due to patient change:",i),h(""),w(""),_(null),D(null),F({})},[i]);const Z=X=>{s(X.id),c(`${X.first_name||""} ${X.last_name||""}`.trim()),a("")},re=X=>{h(X.condition),w(X.question),_(X.label)},z=()=>{w("I want three treatment plans"),_(null)},q=async()=>{var ie;if(!i){L({title:"Patient Required",description:"Please select a patient",variant:"destructive",duration:3e3});return}if(Object.keys(P).length===0){L({title:"Teeth Required",description:"Please select at least one tooth.",variant:"destructive",duration:3e3});return}if(!f.trim()){L({title:"Input Required",description:"Please describe the patient's current condition.",variant:"destructive",duration:3e3});return}if(!m.trim()){L({title:"Input Required",description:"Please enter the specific question for the AI.",variant:"destructive",duration:3e3});return}E(!0),D(null);const X=new AbortController,ne=setTimeout(()=>{X.abort(),console.log(`Fetch request timed out after ${NO()} ms`)},NO());try{const oe="https://n8n1.kol.tel/webhook/33d4fdab-98eb-4cc4-8a69-2ab835e76511",de=await fetch(oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:i,toothIds:Object.keys(P).map(Number),condition:f,question:m,patientRecord:u}),signal:X.signal});clearTimeout(ne);const V=await de.text();if(!de.ok)throw console.error("Error response from webhook (not ok):",de.status,V),new Error(`Webhook call failed with status: ${de.status}. Response: ${V.substring(0,200)}...`);let se;try{se=JSON.parse(V)}catch(te){throw console.error("Failed to parse JSON response from webhook:",te),console.error("Raw response text was:",V),new Error(`Invalid JSON response from AI generator. Content: ${V.substring(0,200)}...`)}console.log("Successfully parsed webhook response data:",se);const fe=(ie=se==null?void 0:se[0])==null?void 0:ie.output;if(fe){const te=JSON.stringify(fe);D(te);const ke=fe.response,Re=JSON.stringify(ke||{});L({title:"Treatment Plan Generated",description:"The AI-generated plan is now available below.",variant:"default",duration:5e3});const{data:Ce,error:ve}=await $e.from("ai_treatment_plans").insert({patient_id:i,title:f,description:m,content:Re,created_at:new Date().toISOString()}).select("id").single();if(ve)console.error("Error saving AI treatment plan to database:",ve),L({title:"Save Failed",description:"Failed to save the main AI plan details. Check console.",variant:"destructive",duration:5e3});else if(Ce){console.log("AI treatment plan saved successfully with ID:",Ce.id);const Ge=Ce.id,pt=Object.keys(P).map(Number);if(pt&&pt.length>0){const it=pt.map(ut=>({ai_treatment_plan_id:Ge,tooth_id:ut})),{error:Le}=await $e.from("ai_treatment_plans_teeth").insert(it);Le?(console.error("Error linking teeth to AI treatment plan:",Le),L({title:"Partial Save",description:"AI plan saved, but failed to link selected teeth. Check console.",variant:"default",duration:5e3})):console.log("Teeth linked to AI treatment plan successfully.")}}}else throw console.error("Could not extract output object from webhook response:",se),new Error("Received invalid response format from AI generator (missing output).")}catch(oe){console.error("Error generating treatment plan:",oe);let de="Please check console for details.";oe instanceof Error&&(de=oe.message,oe.name==="AbortError"&&(de="The request timed out after 120 seconds.")),L({title:"Generation Failed",description:`Could not trigger treatment plan generation. ${de}`,variant:"destructive",duration:5e3})}finally{clearTimeout(ne),E(!1)}},B=()=>{D(null),F({}),s(""),c(""),a(""),h(""),w(""),d(null),y([]),_(null),t(!1)},G=X=>{X?t(!0):(T(!0),j(!0))},Q=()=>{T(!1),j(!1)},O=()=>{T(!1),j(!1),B()},J=r.filter(X=>{var V,se;const ne=`${X.first_name||""} ${X.last_name||""}`.toLowerCase(),ie=((V=X.phone)==null?void 0:V.toLowerCase())||"",oe=((se=X.registration_number)==null?void 0:se.toLowerCase())||"",de=n.toLowerCase();return ne.includes(de)||ie.includes(de)||oe.includes(de)});return x(_r,{children:[l(Vn,{open:e,onOpenChange:G,children:x(Bn,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[x(Jn,{children:[x(Zn,{className:"flex items-center gap-2",children:[l(q0,{className:"h-5 w-5"}),"AI Treatment Plan Generator"]}),l(us,{children:"Select a patient and describe the current issue to generate a treatment plan using AI."})]}),x("div",{className:"space-y-3 py-4",children:[x("div",{className:"space-y-2 relative",children:[" ",l(tr,{htmlFor:"patient-search",children:"Select Patient"}),l(ht,{type:"search",id:"patient-search",value:n,onChange:X=>{a(X.target.value),i&&(s(""),c(""),d(null))},placeholder:o||"Search by name, phone, or registration...",className:"w-full"}),n&&x(nd,{className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60",children:[" ",l("div",{className:"p-2",children:J.length>0?J.map(X=>l(Fe,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3 mb-1",onClick:()=>Z(X),children:x("div",{children:[l("div",{children:`${X.first_name||""} ${X.last_name||""}`.trim()}),x("div",{className:"text-xs text-muted-foreground",children:[X.registration_number&&`Reg: ${X.registration_number}`,X.registration_number&&X.phone&&" | ",X.phone&&`Ph: ${X.phone}`,!X.registration_number&&!X.phone&&`ID: ${X.id.substring(0,6)}...`]})]})},X.id)):x("p",{className:"text-sm text-muted-foreground p-2",children:['No patients found matching "',n,'"']})})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Teeth *"}),i?l(SR,{value:P,onChange:F,placeholder:"Select Affected Teeth...",disabled:!i}):l("div",{className:"flex items-center justify-center h-10 px-3 border rounded-md bg-gray-50 text-sm text-muted-foreground",children:"Select a patient to enable teeth selection."})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"condition-input",children:"Condition"}),l(on,{id:"condition-input",placeholder:"Describe symptoms, observations, relevant history...",rows:5,value:f,onChange:X=>h(X.target.value),disabled:!i})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"question-input",children:"Question"}),l(on,{id:"question-input",placeholder:"What specific question do you have based on the condition?",rows:3,value:m,onChange:X=>w(X.target.value),disabled:!i})]}),i&&g.length>0&&x("div",{className:"space-y-2 pt-2",children:[" ",l(tr,{children:"Query Suggestions"})," ",x("div",{className:"flex flex-wrap gap-2 pt-1",children:[" ",l(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                      h-auto px-2.5 py-0.5 rounded-full border-none
                      transition-colors duration-150 ease-in-out
                      focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                      disabled:opacity-60 disabled:cursor-not-allowed
                      bg-[#e8eefd] text-[#1B56FD] hover:bg-[#d1dffd]
                      disabled:bg-blue-50 disabled:text-blue-300
                    `,onClick:z,children:"I want three treatment plans"},"fixed-suggestion"),g.map((X,ne)=>{const ie=X.label===b;return l(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                      h-auto px-2.5 py-0.5
                      rounded-full
                      border-none
                      transition-colors duration-150 ease-in-out
                      focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                      disabled:opacity-60 disabled:cursor-not-allowed
                     ${ie?`
                      bg-[#1B56FD] /* Main blue background */
                      text-white /* White text */
                      hover:bg-[#0118D8] /* Darker blue hover */
                      disabled:bg-blue-300 disabled:text-gray-100
                    `:`
                      bg-[#e8eefd] /* Light blue background */
                      text-[#1B56FD] /* Main blue text */
                      hover:bg-[#d1dffd] /* Slightly darker light blue hover */
                      disabled:bg-blue-50 disabled:text-blue-300
                    `}`,onClick:()=>re(X),children:X.label},ne)})]}),l("p",{className:"text-xs text-muted-foreground pt-1",children:"Click a suggestion to populate the fields above. The fixed suggestion only populates the question."})," "]}),i&&g.length===0&&x("div",{className:"space-y-2 pt-2",children:[l(tr,{children:"Query Suggestions"}),l("div",{className:"flex flex-wrap gap-2 pt-1",children:l(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                      h-auto px-2.5 py-0.5 rounded-full border-none
                      transition-colors duration-150 ease-in-out
                      focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                      disabled:opacity-60 disabled:cursor-not-allowed
                      bg-[#e8eefd] text-[#1B56FD] hover:bg-[#d1dffd]
                      disabled:bg-blue-50 disabled:text-blue-300
                    `,onClick:z,children:"I want three treatment plans"},"fixed-suggestion-only")}),l("p",{className:"text-xs text-muted-foreground pt-1",children:"Click the suggestion to populate the question field."})]}),C&&x("div",{className:"pt-6 mt-6 border-t border-gray-200",children:[l(tr,{className:"text-base font-medium mb-3 block text-gray-700",children:"AI Generated Plan"}),x("div",{className:"flex items-start space-x-3",children:[l("div",{className:"flex-shrink-0 w-9 h-9 rounded-full bg-indigo-100 flex items-center justify-center border border-indigo-200 shadow-sm",children:l(YH,{className:"w-5 h-5 text-indigo-600"})}),l("div",{className:"flex-1 min-w-0 overflow-hidden",children:l("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:l(nd,{className:"h-auto pr-4",children:x("div",{className:"space-y-4 text-sm text-gray-800",children:[" ",(()=>{const X=(ie,oe,de="mb-4")=>oe?x("div",{className:de,children:[x("strong",{className:"block font-semibold text-gray-800 mb-1",children:[ie,":"]}),l("p",{className:"text-gray-700 whitespace-pre-wrap",children:oe})]}):null,ne=ie=>!ie||typeof ie!="string"?null:ie.match(/^\s*\d+\.\s+/m)?l("ol",{className:"list-decimal list-inside pl-4 mt-1 space-y-1 text-gray-700",children:ie.split(/\n?\s*\d+\.\s+/).filter(Boolean).map((oe,de)=>l("li",{children:oe.trim()},de))}):l("p",{className:"text-gray-700 whitespace-pre-wrap mt-1",children:ie});try{const oe=JSON.parse(C).response;return typeof oe!="object"||oe===null?(console.warn("Extracted response data is not an object:",oe),l("pre",{className:"whitespace-pre-wrap text-xs",children:C})):x("div",{className:"space-y-6",children:[X("Clinical Assessment",oe.clinicalAssessment),X("Evidence & Rationale",oe.evidenceAndRationale),oe.treatmentPlans&&Array.isArray(oe.treatmentPlans)&&oe.treatmentPlans.length>0&&x("div",{children:[l("h3",{className:"text-lg font-semibold text-gray-800 mb-3 border-b pb-2",children:"Treatment Plans"}),l("div",{className:"space-y-6",children:oe.treatmentPlans.map((de,V)=>x("div",{className:"pl-2 border-l-4 border-indigo-200",children:[de.planName&&l("h4",{className:"text-base font-semibold text-indigo-700 mb-2",children:de.planName}),X("Recommendation",de.recommendation,"mb-2"),X("Approach",de.approach,"mb-2"),X("Benefits",de.benefits,"mb-2"),X("Considerations",de.considerations,"mb-2"),de.procedureSteps&&x("div",{className:"mb-2",children:[l("strong",{className:"block font-semibold text-gray-800 mb-1",children:"Procedure Steps:"}),ne(de.procedureSteps)]})]},V))})]}),X("Follow Up",oe.followUp),X("Patient Instructions",oe.patientInstructions)]})}catch(ie){return console.warn("Failed to parse generatedPlan (output object) as JSON, displaying raw:",ie),l("pre",{className:"whitespace-pre-wrap text-xs",children:C})}})()]})})})})]})]})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>T(!0),children:"Cancel"}),l(Fe,{onClick:q,disabled:!i||Object.keys(P).length===0||!f.trim()||!m.trim(),className:`ai-insights-button ${N?"opacity-100 cursor-not-allowed":""}`,style:N?{opacity:1}:{},children:N?x(_r,{children:[l(q0,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):x(_r,{children:[l(q0,{className:"mr-2 h-4 w-4"}),"Generate Plan"]})})]})]})}),l(vw,{open:W,children:x(Z1,{children:[x(Q1,{children:[l(ty,{children:"Cancel Plan?"}),l(ry,{children:"Are you sure you want to cancel this plan? All unsaved changes will be lost."})]}),x(ey,{children:[l(ay,{onClick:Q,children:"No"}),l(ny,{onClick:O,children:"Yes"})]})]})})]})}function YFe(){const e=Ss(),{toast:t}=_n(),{loading:r,patients:n,selectedPlan:a,setSelectedPlan:i,treatmentPlansSubscribed:s,updatingTreatmentStatus:o,updatingPlanStatus:c,filterPlans:u,refreshSelectedPlan:d,createTreatmentPlan:f,createTreatment:h,handleUpdateTreatmentStatus:m,handleUpdatePlanStatus:w,deleteTreatment:g,deletePlan:y,updateTreatmentDetails:b}=HFe(),[_,N]=S.useState(""),[E,C]=S.useState(null),[D,P]=S.useState(null),[F,L]=S.useState(!1),[W,T]=S.useState(!1),[R,j]=S.useState(!1),[Y,Z]=S.useState(!1),[re,z]=S.useState(null),[q,B]=S.useState([]),[G,Q]=S.useState(null),[O,J]=S.useState(!1),X=async(ke,Re)=>{try{const Ce=await f(ke,Re);L(!1),i(Ce),console.log("[TreatmentPlansPage] handleCreatePlan - newPlan object:",Ce),console.log("[TreatmentPlansPage] handleCreatePlan - newPlan.originalAISuggestion:",Ce==null?void 0:Ce.originalAISuggestion),Ce!=null&&Ce.originalAISuggestion?z(Ce.originalAISuggestion):z(null),T(!0)}catch(Ce){console.error("Error creating plan:",Ce)}},ne=async ke=>{try{await h(ke),j(!1),await d()}catch(Re){console.error("Error adding treatment:",Re)}},ie=async ke=>{if(!G||!G.id){t({title:"Error",description:"No treatment selected for update.",variant:"destructive"});return}try{const Re={...ke,plan_id:ke.plan_id||G.plan_id};await b(G.id,Re),J(!1),Q(null)}catch(Re){console.error("Error updating treatment:",Re)}},oe=ke=>{Q(ke),J(!0)},de=async ke=>{i(ke),T(!0);try{const Re=await hT(ke.id);B(Re)}catch(Re){console.error("Error fetching booked appointment details:",Re),B([])}},V=()=>{j(!0)},se=ke=>{e(`/patients/${ke}`)},fe=(ke,Re)=>w(ke,Re),te=(ke,Re)=>m(ke,Re);return x("div",{className:"space-y-6",children:[l(Fa,{heading:"Treatment Plans",text:"Manage dental treatment plans and procedures",children:x("div",{className:"flex items-center gap-4",children:[x("div",{className:"relative flex-1",children:[l(w4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),l(ht,{placeholder:"Search treatment plans...",className:"pl-8",value:_,onChange:ke=>N(ke.target.value)})]}),x(Ur,{value:E||"all",onValueChange:ke=>C(ke==="all"?null:ke),children:[l(jr,{className:"w-[220px]",children:l(qr,{placeholder:"Filter by patient"})}),x($r,{children:[l(wt,{value:"all",children:"All Patients"}),n.map(ke=>x(wt,{value:ke.id,children:[ke.first_name," ",ke.last_name]},ke.id))]})]}),x(Ur,{value:D||"all",onValueChange:ke=>P(ke==="all"?null:ke),children:[l(jr,{className:"w-[180px]",children:l(qr,{placeholder:"Filter by status"})}),x($r,{children:[l(wt,{value:"all",children:"All Statuses"}),l(wt,{value:"planned",children:"Planned"}),l(wt,{value:"in_progress",children:"In Progress"}),l(wt,{value:"completed",children:"Completed"}),l(wt,{value:"cancelled",children:"Cancelled"})]})]}),x(Fe,{className:"ai-insights-button",onClick:()=>Z(!0),children:[l(Hce,{className:"h-4 w-4 mr-2"}),"AI Generate Plan"]}),x(Fe,{onClick:()=>L(!0),children:[l(Zu,{className:"h-4 w-4 mr-2"}),"New Treatment Plan"]})]})}),l("div",{className:"flex items-center justify-end",children:x("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[l("div",{className:`h-2 w-2 rounded-full ${s?"bg-green-500":"bg-red-500"}`}),x("span",{children:["Real-time updates ",s?"active":"inactive"]})]})}),r&&l("div",{className:"flex justify-center my-12",children:x("div",{className:"flex flex-col items-center gap-2",children:[l(Un,{className:"h-8 w-8 animate-spin text-primary"}),l("p",{className:"text-muted-foreground",children:"Loading treatment plans..."})]})}),!r&&u(_,E,D).length===0&&x("div",{className:"text-center py-12 border rounded-lg",children:[l(b4,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),l("h3",{className:"text-lg font-medium",children:"No Treatment Plans Found"}),l("p",{className:"text-muted-foreground mt-1 mb-6",children:"Create your first treatment plan to get started"}),x(Fe,{onClick:()=>L(!0),children:[l(Zu,{className:"h-4 w-4 mr-2"}),"New Treatment Plan"]})]}),l("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u(_,E,D).map(ke=>l(Pre,{plan:ke,onViewDetails:de},ke.id))}),l(AO,{open:F,onOpenChange:L,onSubmit:X,patients:n,loading:r}),W&&a&&l(Ine,{open:W,onOpenChange:ke=>{T(ke),ke?ke&&a&&(async()=>{try{const Ce=await hT(a.id);B(Ce)}catch(Ce){console.error("[TreatmentPlansPage] fetchDetails: Error fetching booked appointment details on dialog open:",Ce),B([])}})():B([])},plan:a,onRefresh:async()=>{if(await d(),a)try{const ke=await hT(a.id);B(ke)}catch(ke){console.error("Error fetching booked appointment details after refresh:",ke),B([])}},onAddTreatment:V,onStatusChange:fe,onDeletePlan:async ke=>{await y(ke),T(!1)},onTreatmentStatusChange:te,onDeleteTreatment:g,onEditTreatment:oe,loading:r||c||o,navigateToPatient:se,aiInitialSuggestion:re,bookedAppointments:q},a.id),a&&l(XS,{open:R,onOpenChange:j,onSubmit:ne,planId:a.id,loading:r}),a&&G&&l(XS,{open:O,onOpenChange:ke=>{ke||Q(null),J(ke)},onSubmit:ie,planId:a.id,initialData:G,loading:r,isEditMode:!0}),l(GFe,{open:Y,onOpenChange:Z,patients:n})]})}var QN="Switch",[KFe,iQe]=es(QN),[XFe,JFe]=KFe(QN),tae=S.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:s,disabled:o,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=S.useState(null),w=Kr(t,N=>m(N)),g=S.useRef(!1),y=h?d||!!h.closest("form"):!0,[b,_]=hl({prop:a,defaultProp:i??!1,onChange:u,caller:QN});return x(XFe,{scope:r,checked:b,disabled:o,children:[l(vr.button,{type:"button",role:"switch","aria-checked":b,"aria-required":s,"data-state":iae(b),"data-disabled":o?"":void 0,disabled:o,value:c,...f,ref:w,onClick:Ht(e.onClick,N=>{_(E=>!E),y&&(g.current=N.isPropagationStopped(),g.current||N.stopPropagation())})}),y&&l(aae,{control:h,bubbles:!g.current,name:n,value:c,checked:b,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});tae.displayName=QN;var rae="SwitchThumb",nae=S.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=JFe(rae,r);return l(vr.span,{"data-state":iae(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});nae.displayName=rae;var ZFe="SwitchBubbleInput",aae=S.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const s=S.useRef(null),o=Kr(s,i),c=H4(r),u=C4(t);return S.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const w=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(w)}},[c,r,n]),l("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aae.displayName=ZFe;function iae(e){return e?"checked":"unchecked"}var sae=tae,QFe=nae;const R2=S.forwardRef(({className:e,...t},r)=>l(sae,{className:Lt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:l(QFe,{className:Lt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));R2.displayName=sae.displayName;function eLe(){const[e,t]=S.useState(null),[r,n]=S.useState([]),[a,i]=S.useState(!0),[s,o]=S.useState(!1),[c,u]=S.useState(!1),[d,f]=S.useState({first_name:"",last_name:"",email:"",role:"doctor",specialization:"",working_hours:JSON.stringify([{day:"monday",start:"09:00",end:"17:00"},{day:"tuesday",start:"09:00",end:"17:00"},{day:"wednesday",start:"09:00",end:"17:00"},{day:"thursday",start:"09:00",end:"17:00"},{day:"friday",start:"09:00",end:"17:00"}])}),[h,m]=S.useState([]),[w,g]=S.useState(!0),[y,b]=S.useState(!1),[_,N]=S.useState({staff_id:"",start_time:"",end_time:"",reason:""}),[E,C]=S.useState(null),[D,P]=S.useState(null),[F,L]=S.useState(!1);S.useEffect(()=>{Promise.all([R(),W(),T()])},[]),S.useEffect(()=>{const G=localStorage.getItem("customClinicLogo");G&&C(G)},[]);const W=async()=>{try{const G=await Rt.staff.getAll();n(G)}catch(G){console.error("Error fetching staff:",G)}},T=async()=>{g(!0);try{const G=await Rt.absences.getAll();m(G||[])}catch(G){console.error("Error fetching absences:",G),Wi({title:"Error",description:"Could not fetch staff absences.",variant:"destructive"})}finally{g(!1)}},R=async()=>{try{const G=await Rt.settings.get();t(G),i(!1)}catch(G){console.error("Error fetching settings:",G),i(!1)}},j=async()=>{if(e){Wi({title:"Saving changes...",description:"Please wait while we update your settings."}),o(!0);try{await Rt.settings.update(e),Wi({title:"Settings saved successfully",description:"All your changes have been updated.",variant:"default"})}catch(G){console.error("Error saving settings:",G),Wi({title:"Error",description:"Failed to save settings. Please try again.",variant:"destructive"})}finally{o(!1)}}},Y=(G,Q,O)=>{if(!e)return;const J=[...e.working_hours],X=J.findIndex(ne=>ne.day===G);X!==-1&&(J[X]={...J[X],[Q]:O},t({...e,working_hours:J}))},Z=async()=>{try{await Rt.staff.create(d),u(!1),W(),f({first_name:"",last_name:"",email:"",role:"doctor",specialization:"",working_hours:JSON.stringify([{day:"monday",start:"09:00",end:"17:00"},{day:"tuesday",start:"09:00",end:"17:00"},{day:"wednesday",start:"09:00",end:"17:00"},{day:"thursday",start:"09:00",end:"17:00"},{day:"friday",start:"09:00",end:"17:00"}])}),Wi({title:"Staff member created",description:"New staff member has been added successfully."})}catch(G){console.error("Error creating staff:",G),Wi({title:"Error",description:"Failed to create staff member. Please try again.",variant:"destructive"})}},re=async()=>{if(!_.staff_id||!_.start_time||!_.end_time){Wi({title:"Missing Information",description:"Please select staff, start time, and end time.",variant:"destructive"});return}const G=new Date(_.start_time).toISOString(),Q=new Date(_.end_time).toISOString();if(new Date(Q)<=new Date(G)){Wi({title:"Invalid Dates",description:"End time must be after start time.",variant:"destructive"});return}try{await Rt.absences.create({..._,start_time:G,end_time:Q}),b(!1),T(),N({staff_id:"",start_time:"",end_time:"",reason:""}),Wi({title:"Absence Added",description:"Staff absence recorded successfully."})}catch(O){console.error("Error creating absence:",O),Wi({title:"Error",description:`Failed to add absence: ${O instanceof Error?O.message:"Unknown error"}`,variant:"destructive"})}},z=async G=>{if(confirm("Are you sure you want to delete this absence record?"))try{await Rt.absences.delete(G),T(),Wi({title:"Absence Deleted",description:"The absence record has been removed."})}catch(Q){console.error("Error deleting absence:",Q),Wi({title:"Error",description:"Failed to delete absence.",variant:"destructive"})}},q=G=>{if(G.target.files&&G.target.files[0]){const Q=G.target.files[0];if(Q.size>1*1024*1024){Wi({title:"File Too Large",description:"Please upload a logo smaller than 1MB.",variant:"destructive"});return}P(Q);const O=new FileReader;O.onloadend=()=>{C(O.result),L(!1)},O.readAsDataURL(Q)}},B=()=>{E?(localStorage.setItem("customClinicLogo",E),Wi({title:"Logo Saved",description:"Your new clinic logo has been saved.",variant:"default"}),L(!0)):Wi({title:"No Logo Selected",description:"Please select a logo file first.",variant:"destructive"})};return a?l("div",{children:"Loading settings..."}):e?x(_r,{children:[x("div",{className:"space-y-6",children:[l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l(bce,{className:"h-6 w-6 text-blue-600"})})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Clinic Information"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your clinic details and contact information"})]})]}),x("div",{className:"mt-6 space-y-4",children:[x("div",{className:"space-y-2",children:[l(tr,{children:"Clinic Name"}),l(ht,{value:e.name,onChange:G=>t({...e,name:G.target.value})})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Address"}),l(ht,{value:e.address,onChange:G=>t({...e,address:G.target.value})})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"space-y-2",children:[l(tr,{children:"Phone"}),l(ht,{value:e.phone,onChange:G=>t({...e,phone:G.target.value})})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Email"}),l(ht,{type:"email",value:e.email,onChange:G=>t({...e,email:G.target.value})})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Website"}),l(ht,{value:e.website,onChange:G=>t({...e,website:G.target.value})})]}),x("div",{className:"mt-6 space-y-4",children:[x("div",{children:[l(tr,{htmlFor:"logo-upload",className:"block text-sm font-medium text-gray-700",children:"Clinic Logo"}),l("p",{className:"text-xs text-gray-500 mt-1 mb-2",children:"Recommended aspect ratio: 4:1 (e.g., 200x50 pixels). Max file size: 1MB."}),l("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-blue-400 transition-colors duration-150 ease-in-out",children:x("div",{className:"space-y-1 text-center",children:[!E&&l("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),E&&l("div",{className:"my-2 flex justify-center",children:l("img",{src:E,alt:"Clinic Logo Preview",className:"max-h-24 max-w-[250px] object-contain rounded-md shadow-md"})}),x("div",{className:"flex text-sm text-gray-600 justify-center",children:[x("label",{htmlFor:"logo-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[l("span",{children:E?"Change logo":"Upload a file"}),l("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"sr-only",accept:"image/png, image/jpeg, image/svg+xml",onChange:q})]}),!E&&l("p",{className:"pl-1",children:"or drag and drop"})]}),l("p",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG up to 1MB"})]})})]}),D&&l("div",{className:"mt-3 flex justify-center",children:l(Fe,{onClick:B,className:"min-w-[120px]",disabled:F,children:F?"Logo Saved!":"Save Logo"})})]})]})]})}),l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l(Us,{className:"h-6 w-6 text-blue-600"})})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Working Hours"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Set your clinic's operating hours"})]})]}),l("div",{className:"mt-6",children:l("div",{className:"space-y-4",children:e.working_hours.map(G=>x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center gap-4",children:[l(R2,{checked:G.is_open,onCheckedChange:Q=>Y(G.day,"is_open",Q)}),l("span",{className:"text-sm font-medium capitalize",children:G.day})]}),x("div",{className:"flex items-center gap-2",children:[l(ht,{type:"time",value:G.start,onChange:Q=>Y(G.day,"start",Q.target.value),disabled:!G.is_open,className:"w-32"}),l("span",{className:"text-sm text-muted-foreground",children:"to"}),l(ht,{type:"time",value:G.end,onChange:Q=>Y(G.day,"end",Q.target.value),disabled:!G.is_open,className:"w-32"})]})]},G.day))})})]})}),l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l(v4,{className:"h-6 w-6 text-blue-600"})})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Notification Preferences"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your notification settings"})]})]}),x("div",{className:"mt-6 space-y-6",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{className:"space-y-0.5",children:[l(tr,{children:"Email Notifications"}),l("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),l(R2,{checked:e.notification_preferences.email_notifications,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,email_notifications:G}})})]}),x("div",{className:"flex items-center justify-between",children:[x("div",{className:"space-y-0.5",children:[l(tr,{children:"SMS Notifications"}),l("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via SMS"})]}),l(R2,{checked:e.notification_preferences.sms_notifications,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,sms_notifications:G}})})]}),x("div",{className:"flex items-center justify-between",children:[x("div",{className:"space-y-0.5",children:[l(tr,{children:"Appointment Reminders"}),l("p",{className:"text-sm text-muted-foreground",children:"Send reminders for upcoming appointments"})]}),l(R2,{checked:e.notification_preferences.appointment_reminders,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,appointment_reminders:G}})})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Reminder Time"}),x(Ur,{value:e.notification_preferences.reminder_time,onValueChange:G=>t({...e,notification_preferences:{...e.notification_preferences,reminder_time:G}}),children:[l(jr,{children:l(qr,{})}),x($r,{children:[l(wt,{value:"1h",children:"1 hour before"}),l(wt,{value:"2h",children:"2 hours before"}),l(wt,{value:"24h",children:"24 hours before"}),l(wt,{value:"48h",children:"48 hours before"})]})]})]})]})]})}),l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l(_4,{className:"h-6 w-6 text-blue-600"})})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Staff Management"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Manage clinic staff and their roles"})]})]}),x(Fe,{onClick:()=>u(!0),children:[l(Zu,{className:"h-4 w-4 mr-2"}),"Add Staff Member"]})]}),l("div",{className:"mt-6 space-y-4",children:r.map(G=>x("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[x("div",{className:"flex items-center space-x-4",children:[l("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:l(vi,{className:"h-5 w-5 text-gray-600"})}),x("div",{children:[x("h3",{className:"font-medium",children:[G.first_name," ",G.last_name]}),x("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[l("span",{className:"capitalize",children:G.role}),G.specialization&&x("span",{children:["• ",G.specialization]})]})]})]}),x("div",{className:"flex items-center space-x-2",children:[x(Fe,{variant:"ghost",size:"sm",children:[l(x4,{className:"h-4 w-4 mr-2"}),G.email]}),l(Fe,{variant:"destructive",size:"sm",onClick:()=>{confirm("Are you sure you want to remove this staff member?")},children:l(om,{className:"h-4 w-4"})})]})]},G.id))})]})}),l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:x("div",{className:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center",children:[l(Us,{className:"h-6 w-6 text-orange-600"})," "]})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Staff Absences"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Manage scheduled staff absences"})]})]}),x(Fe,{onClick:()=>{N({staff_id:"",start_time:"",end_time:"",reason:""}),b(!0)},children:[l(Zu,{className:"h-4 w-4 mr-2"}),"Add Absence"]})]}),x("div",{className:"mt-6 space-y-4",children:[w&&l("div",{children:"Loading absences..."}),!w&&h.length===0&&l("p",{className:"text-sm text-gray-500",children:"No absences recorded."}),!w&&h.map(G=>{var Q,O;return x("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[x("div",{className:"flex items-center space-x-4",children:[l("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:l(vi,{className:"h-5 w-5 text-gray-600"})}),x("div",{children:[x("h3",{className:"font-medium",children:[((Q=G.staff)==null?void 0:Q.first_name)||"Unknown"," ",((O=G.staff)==null?void 0:O.last_name)||"Staff"]}),x("p",{className:"text-sm text-gray-500",children:[Mt(Wr(G.start_time),"MMM d, yyyy h:mm a")," - ",Mt(Wr(G.end_time),"MMM d, yyyy h:mm a")]}),G.reason&&x("p",{className:"text-xs text-gray-400",children:["Reason: ",G.reason]})]})]}),l(Fe,{variant:"destructive",size:"sm",onClick:()=>z(G.id),children:l(om,{className:"h-4 w-4"})})]},G.id)})]})]})}),l("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:x("div",{className:"p-6",children:[x("div",{className:"flex items-center",children:[l("div",{className:"flex-shrink-0",children:l("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l(Wce,{className:"h-6 w-6 text-blue-600"})})}),x("div",{className:"ml-4",children:[l("h2",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),l("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your security preferences and access controls"})]})]}),x("div",{className:"mt-6",children:[l(Fe,{className:"w-full",children:"Change Password"}),l("div",{className:"mt-4",children:x("div",{className:"relative flex items-start",children:[l("div",{className:"flex items-center h-5",children:l("input",{id:"2fa",name:"2fa",type:"checkbox",className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),x("div",{className:"ml-3 text-sm",children:[l("label",{htmlFor:"2fa",className:"font-medium text-gray-700",children:"Enable Two-Factor Authentication"}),l("p",{className:"text-gray-500",children:"Add an extra layer of security to your account"})]})]})})]})]})}),l("div",{className:"flex justify-end",children:l(Fe,{onClick:j,disabled:s,className:"min-w-[120px]",children:s?"Saving...":"Save Changes"})})]}),l(Vn,{open:c,onOpenChange:u,children:x(Bn,{children:[l(Jn,{children:l(Zn,{children:"Add Staff Member"})}),x("div",{className:"space-y-4",children:[x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"space-y-2",children:[l(tr,{children:"First Name"}),l(ht,{value:d.first_name,onChange:G=>f({...d,first_name:G.target.value})})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Last Name"}),l(ht,{value:d.last_name,onChange:G=>f({...d,last_name:G.target.value})})]})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Email"}),l(ht,{type:"email",value:d.email,onChange:G=>f({...d,email:G.target.value})})]}),x("div",{className:"space-y-2",children:[l(tr,{children:"Role"}),x(Ur,{value:d.role,onValueChange:G=>f({...d,role:G}),children:[l(jr,{children:l(qr,{})}),x($r,{children:[l(wt,{value:"doctor",children:"Doctor"}),l(wt,{value:"assistant",children:"Assistant"}),l(wt,{value:"receptionist",children:"Receptionist"})]})]})]}),d.role==="doctor"&&x("div",{className:"space-y-2",children:[l(tr,{children:"Specialization"}),l(ht,{value:d.specialization,onChange:G=>f({...d,specialization:G.target.value}),placeholder:"e.g., Orthodontics, Periodontics"})]})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),l(Fe,{onClick:Z,children:"Add Staff Member"})]})]})}),l(Vn,{open:y,onOpenChange:b,children:x(Bn,{children:[l(Jn,{children:l(Zn,{children:"Add Staff Absence"})}),x("div",{className:"space-y-4 py-4",children:[x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"absence-staff",children:"Staff Member"}),x(Ur,{value:_.staff_id,onValueChange:G=>N({..._,staff_id:G}),children:[l(jr,{id:"absence-staff",children:l(qr,{placeholder:"Select staff member"})}),l($r,{children:r.map(G=>x(wt,{value:G.id,children:[G.first_name," ",G.last_name," (",G.role,")"]},G.id))})]})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"absence-start",children:"Start Time"}),l(ht,{id:"absence-start",type:"datetime-local",value:_.start_time,onChange:G=>N({..._,start_time:G.target.value})})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"absence-end",children:"End Time"}),l(ht,{id:"absence-end",type:"datetime-local",value:_.end_time,onChange:G=>N({..._,end_time:G.target.value})})]})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"absence-reason",children:"Reason (Optional)"}),l(ht,{id:"absence-reason",value:_.reason,onChange:G=>N({..._,reason:G.target.value}),placeholder:"e.g., Vacation, Conference"})]})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),l(Fe,{onClick:re,children:"Add Absence"})]})]})})]}):l("div",{children:"No settings found"})}var tLe="Separator",Az="horizontal",rLe=["horizontal","vertical"],oae=S.forwardRef((e,t)=>{const{decorative:r,orientation:n=Az,...a}=e,i=nLe(n)?n:Az,o=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return l(vr.div,{"data-orientation":i,...o,...a,ref:t})});oae.displayName=tLe;function nLe(e){return rLe.includes(e)}var lae=oae;const im=S.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>l(lae,{ref:a,decorative:r,orientation:t,className:Lt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));im.displayName=lae.displayName;function aLe(){var _,N,E,C;const{user:e}=ui(),{toast:t}=_n(),[r,n]=S.useState(null),[a,i]=S.useState(!0),[s,o]=S.useState(!1),[c,u]=S.useState(!1),[d,f]=S.useState(null),[h,m]=S.useState(null),w=S.useCallback(async()=>{if(e){i(!0);try{const{data:D,error:P,status:F}=await $e.from("profiles").select("id, first_name, last_name, mobile_number, address, date_of_birth, gender, avatar_url").eq("id",e.id).single();if(P&&F!==406)throw P;D?(n({...D,mobile_number:D.mobile_number||null,address:D.address||null,date_of_birth:D.date_of_birth||null,gender:D.gender||null,avatar_url:D.avatar_url||null,current_plan:"Pro Plan",payment_method_details:"Visa ending in 4242"}),m(D.avatar_url||null)):(n({id:e.id,first_name:"",last_name:"",mobile_number:null,address:null,date_of_birth:null,gender:null,avatar_url:null,current_plan:"Free Plan",payment_method_details:"N/A"}),m(null))}catch(D){console.error("Error fetching profile:",D),t({title:"Error Fetching Profile",description:D.message||"Could not load profile data.",variant:"destructive"}),n({id:(e==null?void 0:e.id)||"",first_name:"",last_name:"",mobile_number:null,address:null,date_of_birth:null,gender:null,avatar_url:null,current_plan:"Free Plan",payment_method_details:"N/A"}),m(null)}finally{i(!1)}}},[e,t]);S.useEffect(()=>{w()},[w]);const g=D=>{const{name:P,value:F}=D.target;n(L=>L?{...L,[P]:F}:null)},y=D=>{if(D.target.files&&D.target.files[0]){const P=D.target.files[0],F=2*1024*1024;if(P.size>F){t({title:"File Too Large",description:"Please select an image smaller than 2MB.",variant:"destructive"}),D.target.value="",f(null);return}f(P);const L=new FileReader;L.onloadend=()=>{m(L.result)},L.readAsDataURL(P)}else f(null),m((r==null?void 0:r.avatar_url)||null)},b=async D=>{if(D.preventDefault(),!r||!e)return;o(!0);let P=r.avatar_url;try{if(d){const W=d.name.split(".").pop(),T=`${e.id}-${Date.now()}.${W}`,{error:R}=await $e.storage.from("avatars").upload(T,d,{cacheControl:"3600",upsert:!0});if(R)throw new Error(`Failed to upload avatar: ${R.message}`);const{data:j}=$e.storage.from("avatars").getPublicUrl(T);j!=null&&j.publicUrl?P=j.publicUrl:console.warn("Could not get public URL for uploaded avatar, but upload might have succeeded.")}const F={id:e.id,first_name:r.first_name||"",last_name:r.last_name||"",mobile_number:r.mobile_number,address:r.address,date_of_birth:r.date_of_birth,gender:r.gender,avatar_url:P,updated_at:new Date().toISOString()},{error:L}=await $e.from("profiles").upsert(F,{onConflict:"id"});if(L)throw L;t({title:"Profile updated successfully!"}),f(null),P!==r.avatar_url&&(n(W=>W?{...W,avatar_url:P}:null),m(P??null)),u(!1)}catch(F){console.error("Failed to save profile:",F),t({title:"Update Failed",description:F.message||"Could not save profile changes.",variant:"destructive"})}finally{o(!1)}};return a?l(Fa,{heading:"Profile",text:"Loading profile..."}):!e||!r?l(Fa,{heading:"Profile",text:"Could not load profile data."}):x("div",{className:"container mx-auto py-8",children:[l(Fa,{heading:"User Profile",text:"View and update your personal information."}),x(or,{className:"max-w-2xl mx-auto mt-6",children:[l(xr,{children:l(br,{children:"Your Details"})}),x("form",{onSubmit:b,children:[x(hr,{className:"space-y-6",children:[" ",x("div",{className:"flex flex-col items-center space-y-4",children:[!c&&x(L4,{className:"h-24 w-24",children:[l(CD,{src:h||(r==null?void 0:r.avatar_url)||void 0,alt:"User Avatar"}),x(j4,{children:[(N=(_=r==null?void 0:r.first_name)==null?void 0:_[0])==null?void 0:N.toUpperCase(),(C=(E=r==null?void 0:r.last_name)==null?void 0:E[0])==null?void 0:C.toUpperCase()]})]}),c&&x("div",{className:"w-full max-w-xs flex flex-col items-center",children:[x(tr,{htmlFor:"avatarFile",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted transition-colors",children:[h&&!d?x("div",{className:"relative group",children:[l("img",{src:h,alt:"Current avatar",className:"h-28 w-28 object-cover rounded-lg"}),l("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:l(Z0,{className:"w-8 h-8 text-white"})})]}):d?x("div",{className:"text-center",children:[l("img",{src:h||void 0,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg mx-auto mb-2"}),l("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:d.name}),x(Fe,{variant:"ghost",size:"sm",className:"mt-1 text-destructive hover:text-destructive-foreground",onClick:D=>{D.preventDefault(),f(null),m((r==null?void 0:r.avatar_url)||null);const P=document.getElementById("avatarFile");P&&(P.value="")},children:[l(Qu,{className:"w-4 h-4 mr-1"})," Remove"]})]}):x("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[l(Z0,{className:"w-8 h-8 mb-2 text-muted-foreground"}),x("p",{className:"mb-1 text-sm text-muted-foreground",children:[l("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),l("p",{className:"text-xs text-muted-foreground",children:"SVG, PNG, JPG or GIF (MAX. 2MB)"})]}),l(ht,{id:"avatarFile",name:"avatarFile",type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml",onChange:y,disabled:s,className:"hidden"})]}),!d&&l("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Upload a square picture (e.g., 100x100px). Max 2MB."})]})]}),l(im,{})," ",x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"email",children:"Email"}),l(ht,{id:"email",type:"email",value:e.email||"",disabled:!0}),l("p",{className:"text-sm text-muted-foreground",children:"Email address cannot be changed here."})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"first_name",children:"First Name"}),l(ht,{id:"first_name",name:"first_name",value:r.first_name||"",onChange:g,disabled:!c||s})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"last_name",children:"Last Name"}),l(ht,{id:"last_name",name:"last_name",value:r.last_name||"",onChange:g,disabled:!c||s})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"mobile_number",children:"Mobile Number"}),l(ht,{id:"mobile_number",name:"mobile_number",type:"tel",value:r.mobile_number||"",onChange:g,disabled:!c||s,placeholder:"e.g., +1 123 456 7890"})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"address",children:"Address"}),l(ht,{id:"address",name:"address",value:r.address||"",onChange:g,disabled:!c||s,placeholder:"e.g., 123 Main St, Anytown, USA"})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"date_of_birth",children:"Date of Birth"}),l(ht,{id:"date_of_birth",name:"date_of_birth",type:"date",value:r.date_of_birth||"",onChange:g,disabled:!c||s})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"gender",children:"Gender"}),l(ht,{id:"gender",name:"gender",value:r.gender||"",onChange:g,disabled:!c||s,placeholder:"e.g., Male, Female, Non-binary, Prefer not to say"})]}),l(im,{}),x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Subscription"}),x("div",{className:"flex justify-between items-center",children:[l("span",{className:"text-muted-foreground",children:"Current Plan:"}),l("span",{children:r.current_plan||"N/A"})]})]}),x("div",{className:"space-y-2",children:[l("h3",{className:"text-lg font-medium",children:"Payment Method"}),x("div",{className:"flex justify-between items-center",children:[l("span",{className:"text-muted-foreground",children:"Payment Details:"}),l("span",{children:r.payment_method_details||"N/A"})]})]})]}),l(eg,{className:"flex justify-end gap-2",children:c?x(_r,{children:[l(Fe,{type:"button",variant:"outline",onClick:()=>{u(!1),f(null),m((r==null?void 0:r.avatar_url)||null),w()},disabled:s,children:"Cancel"}),l(Fe,{type:"submit",disabled:s,children:s?"Saving...":"Save Changes"})]}):l(Fe,{type:"button",onClick:()=>u(!0),children:"Edit Profile"})})]})]})]})}const Mp={free:{name:"Free Plan",price:"₹0",features:["Basic Patient Record Management","Appointment Scheduling (up to 10/month)","Standard Email Reminders","Community Support"]},professional:{name:"Professional Plan",price:"₹49",priceSuffix:"/ month",features:["All features in Free Plan","Unlimited Patient Records","Unlimited Appointment Scheduling","Automated SMS & Email Reminders","Basic Treatment Planning","Consent Form Management","Priority Email Support","5 GB Document Storage"]}},iLe=[{question:"Can I change my plan later?",answer:"Yes, you can upgrade or downgrade your plan at any time from your account settings. Changes will take effect from the next billing cycle."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, American Express) and PayPal."},{question:"Is my payment information secure?",answer:"Absolutely. We use industry-standard encryption and partner with Stripe, a leading payment processor, to ensure your payment details are handled securely."},{question:"What happens if my payment fails?",answer:"If a payment fails, we'll notify you and attempt to retry the payment method. You'll have a grace period to update your payment details before any service interruption."}];function sLe(){const[e,t]=S.useState("professional"),[r,n]=S.useState(""),[a,i]=S.useState(!1),s=Mp[e],o=e==="free"?0:49,c=e==="free"?0:4,u=o+c;return x("div",{className:"container mx-auto py-8 px-4 md:px-6 lg:px-8",children:[l(Fa,{heading:"Payments & Subscription",text:"Manage your billing details and subscription plan."}),x("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-6",children:[x(or,{className:"lg:col-span-2",children:[x(xr,{children:[l(br,{children:"Payment Details"}),l(_c,{children:"Enter your payment information to subscribe."})]}),l(hr,{children:x("form",{onSubmit:f=>{f.preventDefault(),console.log("Processing payment for:",e,"Total:",u)},className:"space-y-6",children:[x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"email",children:"Email address"}),l(ht,{id:"email",type:"email",placeholder:"you@example.com",required:!0,defaultValue:"m@example.com"})," "]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"cardNumber",children:"Credit Card Number"}),l(ht,{id:"cardNumber",type:"text",placeholder:"XXXX XXXX XXXX XXXX",required:!0})]}),x("div",{className:"grid grid-cols-2 gap-4",children:[x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"expiryDate",children:"Expiry Date"}),l(ht,{id:"expiryDate",type:"text",placeholder:"MM / YY",required:!0})]}),x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"cvv",children:"CVV"}),l(ht,{id:"cvv",type:"text",placeholder:"XXX",required:!0})]})]}),x("div",{className:"flex items-center space-x-2",children:[l(Fo,{id:"promo",checked:a,onCheckedChange:f=>i(!!f)}),l(tr,{htmlFor:"promo",className:"cursor-pointer",children:"I have a promo code"})]}),a&&x("div",{className:"space-y-2",children:[l(tr,{htmlFor:"promoCode",children:"Promo Code"}),l(ht,{id:"promoCode",type:"text",placeholder:"Enter code",value:r,onChange:f=>n(f.target.value)})]}),x("div",{className:"space-y-2 border-t pt-4 mt-4",children:[x("div",{className:"flex justify-between",children:[l("span",{children:"Subtotal"}),x("span",{children:["₹",o.toFixed(2)]})]}),x("div",{className:"flex justify-between text-muted-foreground",children:[l("span",{children:"Platform Fee"}),x("span",{children:["₹",c.toFixed(2)]})]}),x("div",{className:"flex justify-between font-semibold text-lg border-t pt-2 mt-2",children:[l("span",{children:"Total Amount"}),x("span",{children:["₹",u.toFixed(2)]})]})]}),l(Fe,{type:"submit",className:"w-full",disabled:e==="free",children:e==="free"?"Free Plan Selected":`Subscribe to ${s.name}`})]})})]}),x("div",{className:"space-y-8",children:[x(or,{children:[l(xr,{children:l(br,{children:"Choose Your Plan"})}),l(hr,{children:x(js,{value:e,onValueChange:f=>t(f),children:[x(tr,{htmlFor:"free-plan",className:`flex flex-col items-start space-y-1 rounded-md border p-4 cursor-pointer transition-colors ${e==="free"?"border-primary bg-primary/5":"hover:bg-accent hover:text-accent-foreground"}`,children:[x("div",{className:"flex justify-between w-full items-center",children:[l("span",{className:"font-semibold",children:Mp.free.name}),l(Mn,{value:"free",id:"free-plan",className:"translate-y-0"})]}),l("span",{className:"text-2xl font-bold",children:Mp.free.price}),l("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 mt-2",children:Mp.free.features.map((f,h)=>l("li",{children:f},h))})]}),x(tr,{htmlFor:"professional-plan",className:`flex flex-col items-start space-y-1 rounded-md border p-4 cursor-pointer transition-colors ${e==="professional"?"border-primary bg-primary/5":"hover:bg-accent hover:text-accent-foreground"}`,children:[x("div",{className:"flex justify-between w-full items-center",children:[l("span",{className:"font-semibold",children:Mp.professional.name}),l(Mn,{value:"professional",id:"professional-plan",className:"translate-y-0"})]}),x("span",{className:"text-2xl font-bold",children:[Mp.professional.price,l("span",{className:"text-sm font-normal text-muted-foreground",children:Mp.professional.priceSuffix})]}),l("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 mt-2",children:Mp.professional.features.map((f,h)=>l("li",{children:f},h))})]})]})}),x(eg,{children:[l(Fe,{variant:"outline",className:"w-full",children:"Modify Plan"})," "]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Frequently Asked Questions"})}),l(hr,{children:l(V4,{type:"single",collapsible:!0,className:"w-full",children:iLe.map((f,h)=>x(no,{value:`item-${h+1}`,children:[l(ao,{children:f.question}),l(io,{children:f.answer})]},h))})})]})]})]})]})}function oLe(){const[e,t]=S.useState([]),[r,n]=S.useState(""),[a,i]=S.useState(null),[s,o]=S.useState(null),[c,u]=S.useState([]),[d,f]=S.useState(!1),[h,m]=S.useState(!1),[w,g]=S.useState(null),[y,b]=S.useState(null),[_,N]=S.useState(!1),[E,C]=S.useState(!1),[D,P]=S.useState([]),{toast:F}=_n(),[L,W]=S.useState(null),[T,R]=S.useState(null);S.useEffect(()=>{(async()=>{f(!0),g(null);try{const{data:q,error:B}=await $e.from("patients").select("id, first_name, last_name, phone, registration_number").order("last_name",{ascending:!0}).order("first_name",{ascending:!0});if(B)throw B;t(q||[])}catch(q){g("Failed to fetch patients."),console.error("Error fetching patients:",q)}finally{f(!1)}})()},[]),S.useEffect(()=>{Rt.staff.getDoctors().then(P).catch(()=>P([]))},[]);const j=S.useCallback(async z=>{if(z){m(!0),b(null),u([]);try{if(!z)throw new Error("Patient ID became null unexpectedly.");const{data:q,error:B}=await $e.from("medical_records").select(`
          *,
          staff:created_by ( first_name, last_name ),
          teeth:medical_record_teeth ( teeth ( id, description ) ) 
        `).eq("patient_id",z).order("record_date",{ascending:!1});if(B)throw B;const G=(q||[]).map(Q=>{const J=(Q.teeth||[]).map(X=>X.teeth).filter(Boolean);return{...Q,teeth:J}});u(G)}catch(q){b("Failed to fetch medical records."),console.error("Error fetching medical records:",q)}finally{m(!1)}}},[]);S.useEffect(()=>{a?j(a):u([])},[a,j]);const Y=z=>{W(z.id),R(`${z.first_name||""} ${z.last_name||""}`.trim()),i(z.id),o(`${z.first_name||""} ${z.last_name||""}`.trim())},Z=()=>{if(!a){F({title:"No Patient Selected",description:"Please select a patient before adding a record.",variant:"destructive"});return}N(!0)},re=async z=>{if(a){C(!0);try{const q=[...(Array.isArray(z.xray_images)?z.xray_images:[]).map((Q,O)=>({type:"xray",name:Q.name||`X-ray Image ${O+1}`,...Q})),...(Array.isArray(z.clinical_photos)?z.clinical_photos:[]).map((Q,O)=>({type:"photo",name:Q.name||`Clinical Photo ${O+1}`,...Q})),...(Array.isArray(z.documents)?z.documents:[]).map((Q,O)=>({type:"document",name:Q.name||`Document ${O+1}`,...Q}))],B={chief_complaint:z.chief_complaint,vital_signs:{blood_pressure:z.blood_pressure,pulse_rate:z.pulse_rate},examination:{extra_oral:z.extra_oral_exam,intra_oral:z.intra_oral_exam},diagnosis:{notes:z.diagnosis_notes,codes:z.diagnosis_codes},treatment:{phase:z.treatment_phase,procedures:z.treatment_procedures},prescriptions:z.prescriptions,instructions:{home_care:z.home_care_instructions,follow_up:z.follow_up_date},lab_results:z.lab_results,custom_notes:z.custom_notes,doctor:z.doctor,xray_images:z.xray_images,clinical_photos:z.clinical_photos,documents:z.documents,record_date:z.record_date},G={patient_id:a,record_date:new Date().toISOString(),record_type:"examination",description:JSON.stringify(B),attachments:q.length?q:null};await Rt.patients.createMedicalRecord(G,[]),console.log("Dental record saved:",G),F({title:"Success",description:"Dental record added successfully."}),N(!1),j(a)}catch(q){console.error("Error saving dental record:",q),F({title:"Error",description:"Failed to save dental record. "+q.message,variant:"destructive"})}finally{C(!1)}}};return x("div",{className:"w-full min-h-screen h-screen flex flex-col md:flex-row gap-4 md:gap-8 px-2 md:px-4 py-4 md:py-8 bg-white",children:[x("div",{className:"flex flex-1 flex-col md:flex-row gap-6 w-full h-full",children:[l("div",{className:"w-full md:w-1/3 lg:w-1/4 flex-shrink-0",children:x("div",{className:"h-full flex flex-col",children:[l("div",{className:"w-full mb-3",children:l(ht,{id:"patient-search",type:"search",placeholder:"Search by name or ID...",value:r,onChange:z=>n(z.target.value),className:"text-sm md:text-base"})}),l("div",{className:"flex-1 overflow-y-auto",children:l("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-0 w-full justify-start",style:{maxHeight:"calc(100vh - 140px)",overflowY:"auto",margin:0,padding:0},children:e.filter(z=>{var O,J;const q=`${z.first_name||""} ${z.last_name||""}`.toLowerCase(),B=((O=z.phone)==null?void 0:O.toLowerCase())||"",G=((J=z.registration_number)==null?void 0:J.toLowerCase())||"",Q=r.toLowerCase();return q.includes(Q)||B.includes(Q)||G.includes(Q)}).map(z=>{var B,G;const q=`${(((B=z.first_name)==null?void 0:B[0])||"").toUpperCase()}${(((G=z.last_name)==null?void 0:G[0])||"").toUpperCase()}`;return x("div",{className:"relative flex flex-col items-center p-1.5 rounded-lg shadow bg-white/70 border border-blue-200 transition-all duration-200 cursor-pointer group min-w-[110px] max-w-[140px] font-sans",style:{boxShadow:"0 1px 4px 0 rgba(0,0,0,0.04)",background:"rgba(255,255,255,0.90)"},onMouseEnter:Q=>{Q.currentTarget.style.background="rgba(255,255,255,0.97)",Q.currentTarget.style.backdropFilter="blur(12px)",Q.currentTarget.style.border="0.5px solid",Q.currentTarget.style.borderImage="linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%) 1",Q.currentTarget.style.boxShadow="0 0 0 2px #3b82f6, 0 8px 32px 0 rgba(59,130,246,0.10)",Q.currentTarget.style.transform="scale(1.045)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(255,255,255,0.90)",Q.currentTarget.style.backdropFilter="blur(6px)",Q.currentTarget.style.border="0.5px solid #bfdbfe",Q.currentTarget.style.borderImage="",Q.currentTarget.style.boxShadow="0 1px 4px 0 rgba(0,0,0,0.04)",Q.currentTarget.style.transform="scale(1)"},onClick:()=>Y(z),children:[l(L4,{className:"h-9 w-9 mb-1 shadow-sm border border-blue-200 bg-white/70",children:l(j4,{className:"text-sm",children:q||"?"})}),l("div",{className:"font-bold text-center text-[15px] mb-0.5 truncate w-full capitalize text-gray-900 drop-shadow-sm",children:`${z.first_name||""} ${z.last_name||""}`.trim()||"Unnamed"}),z.registration_number&&x("div",{className:"text-[11px] text-blue-700 font-semibold mb-0.5",children:["Reg: ",z.registration_number]}),z.phone&&l("div",{className:"text-[11px] text-muted-foreground mb-1",children:z.phone}),l("div",{className:"pointer-events-none absolute inset-0 rounded-lg",style:{background:"linear-gradient(120deg,rgba(255,255,255,0.10) 0%,rgba(96,165,250,0.07) 100%)"}})]},z.id)})})})]})}),l("div",{className:"flex-1 flex flex-col",children:l("div",{className:"w-full max-w-4xl mx-auto flex flex-col gap-6 border border-dotted border-gray-300 rounded-xl p-4 md:p-8 min-h-[400px]",children:L?l(Ere,{medicalRecords:c,onAddMedicalRecord:Z,doctors:D,fullPage:!0}):x("div",{className:"w-full max-w-2xl mx-auto flex flex-col items-center justify-center h-96 text-center animate-fade-in py-12 md:py-24",children:[l(iD,{className:"w-16 h-16 md:w-20 md:h-20 text-muted-foreground mb-4 md:mb-6"}),l("h2",{className:"text-xl md:text-2xl font-semibold mb-2",children:"Select a patient to view their medical records"}),l("p",{className:"text-muted-foreground mb-4",children:"Scroll and click a patient card to get started."})]})})})]}),l(Vn,{open:_,onOpenChange:N,children:l(Bn,{className:"max-w-5xl w-full mx-auto rounded-lg shadow-lg",children:a&&s&&l(Cre,{patientId:a,patientName:s,onSubmit:re,onCancel:()=>N(!1),isLoading:E})})})]})}const qo=S.forwardRef(({className:e,...t},r)=>l("div",{className:"relative w-full overflow-auto",children:l("table",{ref:r,className:Lt("w-full caption-bottom text-sm",e),...t})}));qo.displayName="Table";const Wo=S.forwardRef(({className:e,...t},r)=>l("thead",{ref:r,className:Lt("[&_tr]:border-b",e),...t}));Wo.displayName="TableHeader";const zo=S.forwardRef(({className:e,...t},r)=>l("tbody",{ref:r,className:Lt("[&_tr:last-child]:border-0",e),...t}));zo.displayName="TableBody";const lLe=S.forwardRef(({className:e,...t},r)=>l("tfoot",{ref:r,className:Lt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));lLe.displayName="TableFooter";const Dn=S.forwardRef(({className:e,...t},r)=>l("tr",{ref:r,className:Lt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Dn.displayName="TableRow";const Kt=S.forwardRef(({className:e,...t},r)=>l("th",{ref:r,className:Lt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Kt.displayName="TableHead";const Wt=S.forwardRef(({className:e,...t},r)=>l("td",{ref:r,className:Lt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Wt.displayName="TableCell";const cLe=S.forwardRef(({className:e,...t},r)=>l("caption",{ref:r,className:Lt("mt-4 text-sm text-muted-foreground",e),...t}));cLe.displayName="TableCaption";const uLe=Lw("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sd=S.forwardRef(({className:e,variant:t,...r},n)=>l("div",{ref:n,role:"alert",className:Lt(uLe({variant:t}),e),...r}));sd.displayName="Alert";const od=S.forwardRef(({className:e,...t},r)=>l("h5",{ref:r,className:Lt("mb-1 font-medium leading-none tracking-tight",e),...t}));od.displayName="AlertTitle";const ld=S.forwardRef(({className:e,...t},r)=>l("div",{ref:r,className:Lt("text-sm [&_p]:leading-relaxed",e),...t}));ld.displayName="AlertDescription";function $l({className:e,...t}){return l("div",{className:Lt("animate-pulse rounded-md bg-muted",e),...t})}const e3="inventory_items",$R=async()=>{const{data:e,error:t}=await $e.from(e3).select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching inventory items:",t),new Error(t.message);return e||[]},dLe=async e=>{const{data:t,error:r}=await $e.from(e3).select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return console.log(`Inventory item with id ${e} not found.`),null;throw console.error(`Error fetching inventory item ${e}:`,r),new Error(r.message)}return t},fLe=async e=>{var i;const{data:t,error:r}=await $e.from(e3).insert([e]).select().single();if(r)throw console.error("Error adding inventory item:",r),new Error(r.message);if(!t)throw new Error("Failed to add inventory item, no data returned.");const n={inventory_item_id:t.id,item_id:null,quantity_change:t.quantity,change_type:"initial_stock",user_id:((i=(await $e.auth.getUser()).data.user)==null?void 0:i.id)||null,notes:"Initial stock set during item creation",inventory_item_batch_id:null,purchase_order_item_id:null},{error:a}=await $e.from("inventory_log").insert([n]);return a&&console.error("Error logging initial inventory stock:",a),t},hLe=async(e,t)=>{var i;const r=await dLe(e);if(!r)throw new Error(`Inventory item ${e} not found.`);if(t.quantity!==void 0&&t.quantity!==r.quantity){const s=t.quantity-r.quantity,o={inventory_item_id:e,item_id:null,quantity_change:s,change_type:s>0?"add":"use",user_id:((i=(await $e.auth.getUser()).data.user)==null?void 0:i.id)||null,notes:`Quantity updated from ${r.quantity} to ${t.quantity}`,inventory_item_batch_id:null,purchase_order_item_id:null},{error:c}=await $e.from("inventory_log").insert([o]);c&&console.error("Error logging inventory quantity change:",c)}const{data:n,error:a}=await $e.from(e3).update(t).eq("id",e).select().single();if(a)throw console.error(`Error updating inventory item ${e}:`,a),new Error(a.message);if(!n)throw new Error(`Failed to update inventory item ${e}, no data returned.`);return n},kz=async(e,t)=>{const{data:r,error:n}=await $e.from("inventory_log").select("*").gte("created_at",e).lte("created_at",t).order("created_at",{ascending:!0});if(n)throw console.error("Error fetching inventory log entries:",n),new Error(n.message);return r||[]},pLe=async e=>{let t=$e.from("inventory_log").select(`
      *,
      inventory_items (item_name, item_code)
    `).order("created_at",{ascending:!1});const r=["Expired","Damaged","Lost","Stock Count Correction","Used","Other","adjustment"];if(t=t.in("change_type",r),e.startDate&&(t=t.gte("created_at",e.startDate.toISOString())),e.endDate){const i=new Date(e.endDate);i.setDate(i.getDate()+1),t=t.lt("created_at",i.toISOString())}if(e.searchTerm){const i=`%${e.searchTerm}%`;t=t.or(`inventory_items.item_name.ilike.${i},inventory_items.item_code.ilike.${i},notes.ilike.${i},change_type.ilike.${i}`)}const{data:n,error:a}=await t;if(a)throw console.error("Error fetching detailed inventory logs:",a),new Error(a.message);return n||[]},Ez=async e=>{const{data:t,error:r}=await $e.from("inventory_adjustment_requests").insert({inventory_item_id:e.inventory_item_id,inventory_item_batch_id:e.inventory_item_batch_id,quantity_to_decrease:e.quantity_to_decrease,reason:e.reason,notes:e.notes,photo_url:e.photo_url,requested_by_user_id:e.requested_by_user_id,custom_approver_emails:e.custom_approver_emails,approver_role_target:e.approver_role_target,status:"pending"}).select("id, inventory_item_id, inventory_item_batch_id, quantity_to_decrease, reason, notes, photo_url, status, requested_by_user_id, requested_at, reviewed_by_user_id, reviewed_at, reviewer_notes, created_at, updated_at, approval_token, approval_token_expires_at, custom_approver_emails, approver_role_target").single();if(r)throw console.error("Error creating inventory adjustment request:",r),r;if(!t)throw new Error("Failed to create adjustment request, no data returned.");return t},Cz=async(e,t)=>{const r=e.name.split(".").pop(),n=`inventory_adjustments/${t}/${Date.now()}.${r}`;try{const{error:a,data:i}=await $e.storage.from("inventory-proofs").upload(n,e);return a?(console.error("Error uploading adjustment photo (likely CORS or network issue):",a),null):n}catch(a){return console.error("Exception during photo upload:",a),null}},mLe=async(e,t)=>{let r=$e.from("inventory_adjustment_requests").select(`
            *,
            inventory_items ( item_name ),
            requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
        `).eq("status","pending").neq("requested_by_user_id",e);if(t==="admin")r=r.or("approver_role_target.eq.admin,approver_role_target.is.null");else if(t==="owner")r=r.or("approver_role_target.eq.owner,approver_role_target.is.null");else if(t==="doctor")r=r.eq("approver_role_target","doctor");else return[];r=r.order("requested_at",{ascending:!0});const{data:n,error:a}=await r;if(a)throw console.error("Error fetching pending adjustment requests:",a),a;return n||[]},gLe=async e=>{const{data:t,error:r}=await $e.from("inventory_adjustment_requests").select(`
            *,
            inventory_items ( item_name ),
            requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
        `).eq("id",e).single();if(r){if(r.code==="PGRST116")return console.log(`Adjustment request with id ${e} not found.`),null;throw console.error(`Error fetching adjustment request ${e}:`,r),r}return t},vLe=async(e,t,r=20)=>{let n=$e.from("inventory_adjustment_requests").select(`
      *,
      inventory_items ( item_name ),
      requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
    `).eq("requested_by_user_id",e);t&&t.length>0&&(n=n.in("status",t)),n=n.order("requested_at",{ascending:!1}).limit(r);const{data:a,error:i}=await n;if(i)throw console.error("Error fetching adjustment requests for user:",i),i;return a||[]},JS=async e=>{if(!e)return null;const{data:t,error:r}=await $e.storage.from("inventory-proofs").createSignedUrl(e,60*10);return r?(console.error("Error creating signed URL for adjustment photo:",r),null):(t==null?void 0:t.signedUrl)||null},cae=async(e,t,r)=>{const{error:n}=await $e.rpc("process_approved_adjustment",{p_request_id:e,p_reviewer_user_id:t,p_reviewer_notes:r===void 0?null:r});if(n)throw console.error(`Error approving adjustment request ${e}:`,n),n},uae=async(e,t,r)=>{const{error:n}=await $e.from("inventory_adjustment_requests").update({status:"rejected",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r}).eq("id",e).eq("status","pending");if(n)throw console.error(`Error rejecting adjustment request ${e}:`,n),n},yLe=async(e,t)=>{const{data:r,error:n}=await $e.rpc("verify_adjustment_approval_token",{p_request_id:e,p_raw_token:t});return n?(console.error("Error verifying adjustment token:",n),null):r&&r.length>0?r[0]:null},xLe=async e=>{const{data:t,error:r}=await $e.from("stock_takes").insert(e).select().single();if(r)throw console.error("Error creating stock take entry:",r),r;if(!t)throw new Error("Failed to create stock take entry, no data returned.");return t},dae=Qe.forwardRef(({status:e,className:t,onClick:r},n)=>{let a="",i="";switch(e){case"In Stock":a="bg-green-100 text-green-800";break;case"Low Stock":a="bg-yellow-100 text-yellow-800",i="animate-pulse";break;case"Expired":a="bg-red-100 text-red-800";break;default:a="bg-gray-100 text-gray-800"}return l("span",{ref:n,className:gn("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold capitalize",a,i,t),onClick:r,children:e})});dae.displayName="InventoryStatusBadge";const wLe=e=>(e.quantity??0)<=(e.low_stock_threshold??0)?"Low Stock":"In Stock",bLe=e=>{switch(e){case"In Stock":return"text-green-600 font-bold";case"Low Stock":return"text-red-600 font-bold";default:return""}},_Le=({onEditItem:e,refreshTrigger:t,searchTerm:r,categoryFilter:n,onDataFiltered:a})=>{const[i,s]=S.useState([]),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState("item_name"),[m,w]=S.useState("asc");Ss();const{toast:g}=_n(),{user:y}=ui(),b=S.useRef(null),_=S.useRef(null),N=S.useRef(0),E=5,C=1e3,D=3e4,P=S.useCallback(async()=>{c(!0),d(null);try{let W=$e.from("inventory_items").select("*");r&&(W=W.ilike("item_name",`%${r}%`)),n!=="all"&&(W=W.eq("category",n));const T={ascending:m==="asc"};W=W.order(f,T);const{data:R,error:j}=await W;if(j)throw j;const Y=await Promise.all((R||[]).map(async Z=>{let re=[];if(Z.is_batched){const{data:z,error:q}=await $e.from("inventory_item_batches").select("*").eq("inventory_item_id",Z.id).order("expiry_date",{ascending:!0,nullsFirst:!1});q?console.error(`Failed to fetch batches for item ${Z.id}:`,q):re=z||[]}return{...Z,stock_status:wLe(Z),batches:re}}));s(Y),a(Y)}catch(W){console.error("Failed to fetch inventory items:",W),d(W instanceof Error?W.message:"An unknown error occurred"),g({title:"Error Fetching Inventory",description:W instanceof Error?W.message:"Could not load items.",variant:"destructive"})}finally{c(!1)}},[r,n,f,m,a]);S.useEffect(()=>{P()},[P,t]),S.useEffect(()=>{if(!$e){console.error("Supabase client is not available");return}let W=$e.channel("inventory_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},T=>{P()}).subscribe((T,R)=>{if(T==="SUBSCRIBED")N.current=0,_.current&&(clearTimeout(_.current),_.current=null);else if(T==="CHANNEL_ERROR"||T==="TIMED_OUT"||T==="CLOSED")if(console.error(`List Realtime subscription ${T}:`,R),R&&console.error("Error message:",R.message),N.current<E){N.current+=1;const j=Math.min(C*Math.pow(2,N.current-1),D);console.error(`List attempting to reconnect in ${j/1e3} seconds...`),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{b.current&&b.current.subscribe()},j)}else console.error("List max reconnection attempts reached."),g({title:"Realtime Connection Issue",description:"Inventory list updates may be delayed. Please refresh if needed.",variant:"destructive",duration:1e4})});return b.current=W,()=>{_.current&&clearTimeout(_.current);const T=b.current;T&&($e.removeChannel(T).catch(R=>console.error("Error removing list channel:",R)),b.current=null)}},[$e,P,g]);const F=W=>{f===W?w(T=>T==="asc"?"desc":"asc"):(h(W),w("asc"))},L=W=>f!==W?l(w5,{className:"ml-2 h-4 w-4 opacity-30 group-hover:opacity-100"}):l(w5,{className:`ml-2 h-4 w-4 ${m==="asc"?"":"rotate-180"}`});return o?l("div",{className:"space-y-2",children:[...Array(5)].map((W,T)=>l($l,{className:"h-10 w-full"},T))}):u?x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:u})]}):i.length===0?l("p",{className:"text-center text-gray-500 mt-4",children:"No inventory items found. Add one to get started!"}):l("div",{className:"rounded-md border",children:x(qo,{className:"min-w-full divide-y divide-gray-200 bg-white shadow-md rounded-lg overflow-hidden",children:[l(Wo,{className:"bg-gray-50",children:x(Dn,{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[l(Kt,{className:"px-6 py-3",children:x(Fe,{variant:"ghost",onClick:()=>F("item_code"),className:"px-0 group",children:["Item Code ",L("item_code")]})}),l(Kt,{className:"px-6 py-3",children:"Batch No / Info"}),l(Kt,{className:"px-6 py-3",children:"Supplier ID/Info"}),l(Kt,{className:"px-6 py-3",children:x(Fe,{variant:"ghost",onClick:()=>F("item_name"),className:"px-0 group",children:["Item Name ",L("item_name")]})}),l(Kt,{className:"px-6 py-3 text-right",children:x(Fe,{variant:"ghost",onClick:()=>F("quantity"),className:"px-0 group",children:["Quantity ",L("quantity")]})}),l(Kt,{className:"px-6 py-3",children:"Status"})]})}),l(zo,{className:"bg-white divide-y divide-gray-200",children:i.map(W=>x(Dn,{className:"hover:bg-gray-100 text-sm text-gray-900",children:[l(Wt,{className:"px-6 py-4 whitespace-nowrap",children:W.item_code||"N/A"}),l(Wt,{className:"px-6 py-4 whitespace-nowrap",children:W.is_batched&&W.batches&&W.batches.length>0?W.batches.map(T=>T.batch_number||"N/A").join(", "):W.is_batched?"No batches":"N/A"}),l(Wt,{className:"px-6 py-4 whitespace-nowrap",children:W.supplier_info||"N/A"}),l(Wt,{className:"px-6 py-4 whitespace-nowrap",children:W.item_name}),l(Wt,{className:"px-6 py-4 whitespace-nowrap text-right",children:W.quantity??"-"}),l(Wt,{className:"px-6 py-4 whitespace-nowrap",children:l(dae,{status:W.stock_status,className:bLe(W.stock_status)})})]},W.id))})]})})},SLe=async(e,t,r)=>{if(!e)throw new Error("No file provided for upload.");if(!t)throw new Error("User ID is required for upload.");const n=e.name.split(".").pop(),i=`invoices/${`${t}_${Date.now()}.${n}`}`,{data:s,error:o}=await $e.storage.from("invoices").upload(i,e);if(o)throw console.error("Error uploading invoice to storage:",o),new Error(`Storage upload failed: ${o.message}`);console.log("File uploaded successfully to:",s.path);const c={file_name:e.name,storage_path:s.path,uploaded_by_user_id:t,inventory_item_id:r},{data:u,error:d}=await $e.from("invoices").insert(c).select().single();if(d)throw console.error("Error inserting invoice record:",d),await $e.storage.from("invoices").remove([s.path]),console.warn("Orphaned file removed from storage due to DB insert failure:",s.path),new Error(`Database insert failed: ${d.message}`);return console.log("Invoice record created successfully:",u),s.path},NLe=async()=>{const{data:e,error:t}=await $e.from("invoices").select(`
            *,
            inventory_items (
                item_name
            )
        `).order("uploaded_at",{ascending:!1});if(t)throw console.error("Error fetching invoices with item names:",t),t;return e},ALe=async(e,t=60)=>{const{data:r,error:n}=await $e.storage.from("invoices").createSignedUrl(e,t);if(n)throw console.error("Error creating signed URL:",n),n;return r.signedUrl},kLe=VN({item_name:ro().min(1,{message:"Item name is required"}),category:gw(["Medicines","Tools","Consumables"],{required_error:"Category is required"}),supplier_info:ro().optional().nullable(),low_stock_threshold:xR.number().int().min(0,{message:"Threshold must be 0 or greater"}),item_code:ro().optional().nullable()}),ELe=({itemToEdit:e,onSave:t,onCancel:r})=>{const{toast:n}=_n(),{user:a}=ui(),[i,s]=S.useState(null),o=!!e,c=["Medicines","Tools","Consumables"],u=y=>{if(y&&c.includes(y))return y},d=fd({resolver:hd(kLe),defaultValues:{item_name:(e==null?void 0:e.item_name)??"",category:u(e==null?void 0:e.category),supplier_info:(e==null?void 0:e.supplier_info)??"",low_stock_threshold:Number((e==null?void 0:e.low_stock_threshold)??10),item_code:(e==null?void 0:e.item_code)??""}}),{handleSubmit:f,control:h,reset:m}=d;S.useEffect(()=>{m(e?{item_name:e.item_name,category:u(e.category),supplier_info:e.supplier_info??"",low_stock_threshold:Number(e.low_stock_threshold??10),item_code:e.item_code??""}:{item_name:"",category:void 0,supplier_info:"",low_stock_threshold:10,item_code:""})},[e,m]);const w=y=>{y.target.files&&y.target.files[0]?s(y.target.files[0]):s(null)};return l(Mh,{...d,children:x("form",{onSubmit:f(async y=>{if(!a){n({title:"Error",description:"You must be logged in to save items.",variant:"destructive"});return}let b=null;try{if(o&&e){const _={item_name:y.item_name,category:y.category,supplier_info:y.supplier_info||null,low_stock_threshold:y.low_stock_threshold,item_code:y.item_code||null};b=await hLe(e.id,_),n({title:"Success",description:"Inventory item updated."})}else{const _={item_name:y.item_name,category:y.category,quantity:0,supplier_info:y.supplier_info||null,low_stock_threshold:y.low_stock_threshold,item_code:y.item_code||null,is_batched:y.category==="Medicines",photo_url:null,updated_at:null};if(b=await fLe(_),n({title:"Success",description:"New inventory item added."}),i&&b)try{console.log(`Uploading invoice for new item ID: ${b.id}`),await SLe(i,a.id,b.id),n({title:"Invoice Uploaded",description:`Invoice "${i.name}" uploaded successfully.`})}catch(N){console.error("Invoice upload failed after item creation:",N),n({title:"Warning",description:`Item was added, but invoice upload failed: ${N instanceof Error?N.message:"Unknown error"}`,variant:"default",duration:7e3})}}if(!b)throw new Error("Failed to get saved item data.");t(b),s(null)}catch(_){console.error("Failed to save inventory item:",_),n({title:"Error",description:`Failed to save item: ${_ instanceof Error?_.message:"Unknown error"}`,variant:"destructive"})}}),className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Basic Information"}),l(He,{control:h,name:"item_name",render:({field:y})=>x(De,{children:[l(Oe,{children:"Item Name *"}),l(je,{children:l(ht,{placeholder:"e.g., Amoxicillin 500mg",...y})}),l(Ze,{})]})}),l(He,{control:h,name:"category",render:({field:y})=>x(De,{children:[l(Oe,{children:"Category *"}),x(Ur,{onValueChange:y.onChange,value:y.value??"",defaultValue:y.value??"",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select a category"})})}),l($r,{children:c.map(b=>l(wt,{value:b,children:b},b))})]}),l(Ze,{})]})}),l(He,{control:h,name:"item_code",render:({field:y})=>x(De,{children:[l(Oe,{children:"Item Code/SKU (Optional)"}),l(je,{children:l(ht,{placeholder:"e.g., MED-001",...y,value:y.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"low_stock_threshold",render:({field:y})=>x(De,{children:[l(Oe,{children:"Low Stock Threshold"}),l(je,{children:l(ht,{type:"number",min:"0",placeholder:"10",...y,value:String(y.value??"")})}),l(Ze,{})]})})]}),x("div",{className:"md:col-span-2 grid grid-cols-1 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold",children:"Supplier Information"}),l(He,{control:h,name:"supplier_info",render:({field:y})=>x(De,{children:[l(Oe,{children:"Supplier Details (Optional)"}),l(je,{children:l(ht,{placeholder:"e.g., Supplier Name, Contact",...y,value:y.value??""})}),l(Ze,{})]})})]}),!o&&x("div",{className:"md:col-span-2 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Upload"}),x(De,{children:[l(Oe,{children:"Attach Invoice (Optional)"}),l(je,{children:l("div",{className:"flex items-center justify-center w-full",children:x("label",{htmlFor:"invoice-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted/50",children:[x("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[l(Z0,{className:"w-8 h-8 mb-4 text-muted-foreground"}),x("p",{className:"mb-2 text-sm text-muted-foreground",children:[l("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),l("p",{className:"text-xs text-muted-foreground",children:"PDF, DOCX, XLSX, PNG, JPG (MAX. 5MB)"})]}),l(ht,{id:"invoice-upload",type:"file",className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.jpg,.jpeg,.png",onChange:w})]})})}),i&&x("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:["Selected: ",i.name]})]})]}),x("div",{className:"md:col-span-2 flex justify-end space-x-2 pt-4",children:[l(Fe,{type:"button",variant:"outline",onClick:()=>{s(null),r()},children:"Cancel"}),l(Fe,{type:"submit",disabled:d.formState.isSubmitting,children:d.formState.isSubmitting?"Saving...":o?"Update Item":"Add Item"})]})]})})},CLe={reorder:l(aG,{className:"text-blue-500",size:16}),expiry:l(Oi,{className:"text-red-500",size:16}),clinical:l(Ece,{className:"text-orange-500",size:16})},Pz={High:"bg-red-100 text-red-600",Medium:"bg-yellow-100 text-yellow-600",Low:"bg-green-100 text-green-600"},PLe=e=>{var a;const t={},r=[];let n=null;for(const i of e){const s=i.message.trim(),o=s.match(/\*\*(.*?)\*\*/),c=((a=o==null?void 0:o[1])==null?void 0:a.trim())||null;if(c){n=c;const u=s.replace(/\*\*(.*?)\*\*\s*:?/,"").trim();t[n]||(t[n]=[]),u&&u!=="-"&&u.length>5&&t[n].push({insight:i,content:u})}else n?s&&s!=="-"&&s.length>5&&t[n].push({insight:i,content:s}):s&&s.length>10&&s!=="-"&&r.push({insight:i,content:s})}return{grouped:t,ungrouped:r}},TLe=({onLoadingChange:e,onInitialFetchComplete:t})=>{const[r,n]=S.useState(null),[a,i]=S.useState(""),[s,o]=S.useState(!1),[c,u]=S.useState(null),d=async m=>{var w;o(!0),u(null),e(!0);try{m==null||m.throwIfAborted();const{data:g,error:y}=await $e.functions.invoke("ai-insights");if(m==null||m.throwIfAborted(),y)throw y;const b=g;if((w=b.assets)!=null&&w.structuredInsights)n(b.assets.structuredInsights),i(b.generatedAt);else throw new Error("Invalid AI insight format.")}catch(g){g.name==="AbortError"?u("AI insights request timed out (120 seconds)."):g&&typeof g=="object"&&"message"in g?u(g.message||"Unknown error fetching AI insights"):u("An unknown error occurred while fetching AI insights."),n(null)}finally{o(!1),e(!1),t()}};if(S.useEffect(()=>{const m=new AbortController,w=setTimeout(()=>m.abort(),12e4);return d(m.signal),()=>{clearTimeout(w),m.abort(),e(!1),t()}},[e,t]),s)return x(or,{children:[l(xr,{children:l(br,{className:"animate-pulse",children:"AI Suggestions"})}),x(hr,{children:[l($l,{className:"h-4 w-full mb-2"}),l($l,{className:"h-4 w-full mb-2"}),l($l,{className:"h-4 w-full mb-2"})]})]});if(c)return x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:c})]});if(!r)return null;const{grouped:f,ungrouped:h}=PLe(r);return x("div",{className:"space-y-6",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{className:"text-xl font-semibold flex gap-2 items-center",children:[l(sF,{className:"text-yellow-400"}),"AI Suggestions"]}),x("div",{className:"text-xs text-muted-foreground",children:["Generated: ",new Date(a).toLocaleString()]})]}),x("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[Object.entries(f).map(([m,w],g)=>!w||w.length===0?null:x("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4 space-y-3 hover:shadow-md transition-all",children:[x("div",{className:"flex items-center justify-between",children:[x("div",{className:"font-semibold text-base flex items-center gap-2",children:[CLe[w[0].insight.type],m]}),x("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${Pz[w[0].insight.impact]}`,children:[w[0].insight.impact," Impact"]})]}),l("ul",{className:"space-y-2 text-sm text-gray-700",children:w.map((y,b)=>l("li",{className:"border-l-2 pl-3 border-gray-300",children:y.content},b))})]},g)),h.length>0&&x("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-sm p-4 space-y-3 col-span-full",children:[x("div",{className:"font-semibold text-base flex items-center gap-2",children:[l(sF,{className:"text-purple-500"}),"General Suggestions"]}),l("ul",{className:"space-y-2 text-sm text-gray-700",children:h.map((m,w)=>x("li",{className:"flex justify-between items-start border-l-2 pl-3 border-gray-300",children:[l("span",{children:m.content}),l("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${Pz[m.insight.impact]}`,children:m.insight.impact})]},w))})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ZS={};ZS.version="0.18.5";var fae=1252,OLe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],BR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},UR=function(e){OLe.indexOf(e)!=-1&&(fae=BR[0]=e)};function DLe(){UR(1252)}var Vu=function(e){UR(e)};function qR(){Vu(1200),DLe()}function Tz(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function ILe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function hae(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var M2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?ILe(e.slice(2)):t==254&&r==255?hae(e.slice(2)):t==65279?e.slice(1):e},M_=function(t){return String.fromCharCode(t)},Oz=function(t){return String.fromCharCode(t)},kO,Qp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xw(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),s=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Qp.charAt(i)+Qp.charAt(s)+Qp.charAt(o)+Qp.charAt(c);return t}function Sc(e){var t="",r=0,n=0,a=0,i=0,s=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Qp.indexOf(e.charAt(u++)),s=Qp.indexOf(e.charAt(u++)),r=i<<2|s>>4,t+=String.fromCharCode(r),o=Qp.indexOf(e.charAt(u++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Qp.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Lh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function _m(e){return Pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Dz(e){return Pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var hc=function(t){return Pn?Lh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function t3(e){if(typeof ArrayBuffer>"u")return hc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function $m(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function RLe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function WR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return WR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Bs=Pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Lh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function MLe(e){for(var t=[],r=0,n=e.length+250,a=_m(e.length+255),i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s<128)a[r++]=s;else if(s<2048)a[r++]=192|s>>6&31,a[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|s>>8&7,a[r++]=128|s>>2&63,a[r++]=128|o>>6&15|(s&3)<<4,a[r++]=128|o&63}else a[r++]=224|s>>12&15,a[r++]=128|s>>6&63,a[r++]=128|s&63;r>n&&(t.push(a.slice(0,r)),r=0,a=_m(65535),n=65530)}return t.push(a.slice(0,r)),Bs(t)}var fl=/\u0000/g,F2=/[\u0001-\u0006]/g;function d1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Hu(e,t){var r=""+e;return r.length>=t?r:Ti("0",t-r.length)+r}function zR(e,t){var r=""+e;return r.length>=t?r:Ti(" ",t-r.length)+r}function QS(e,t){var r=""+e;return r.length>=t?r:r+Ti(" ",t-r.length)}function FLe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ti("0",t-r.length)+r}function LLe(e,t){var r=""+e;return r.length>=t?r:Ti("0",t-r.length)+r}var Iz=Math.pow(2,32);function Rv(e,t){if(e>Iz||e<-Iz)return FLe(e,t);var r=Math.round(e);return LLe(r,t)}function e4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var Rz=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],pT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function jLe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Jr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},Mz={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$Le={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function t4(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,s=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*s+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=s,s=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=i):(d=u,o=s)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function B0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,s=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),s=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=VLe(c,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var pae=new Date(1899,11,31,0,0,0),BLe=pae.getTime(),ULe=new Date(1900,2,1,0,0,0);function mae(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=ULe&&(r+=24*60*60*1e3),(r-(BLe+(e.getTimezoneOffset()-pae.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function VR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qLe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function WLe(e){var t=e<0?12:11,r=VR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function zLe(e){var t=VR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ww(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=WLe(e):t===10?r=e.toFixed(10).substr(0,12):r=zLe(e),VR(qLe(r.toUpperCase()))}function gg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ww(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return au(14,mae(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function VLe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function HLe(e,t,r,n){var a="",i=0,s=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return pT[r.m-1][1];case 5:return pT[r.m-1][0];default:return pT[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return Rz[r.q][0];default:return Rz[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Hu(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,i=Math.round(s*(r.S+r.u)),i>=60*s&&(i=0),t==="s"?i===0?"0":""+i/s:(a=Hu(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Hu(c,u):"";return d}function em(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var gae=/%/g;function GLe(e,t,r){var n=t.replace(gae,""),a=t.length-n.length;return mh(e,n,r*Math.pow(10,2*a))+Ti("%",a)}function YLe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function vae(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+vae(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var yae=/# (\?+)( ?)\/( ?)(\d+)/;function KLe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),s=a-i*n,o=n;return r+(i===0?"":""+i)+" "+(s===0?Ti(" ",e[1].length+1+e[4].length):zR(s,e[1].length)+e[2]+"/"+e[3]+Hu(o,e[4].length))}function XLe(e,t,r){return r+(t===0?"":""+t)+Ti(" ",e[1].length+2+e[4].length)}var xae=/^#*0*\.([0#]+)/,wae=/\).*[0#]/,bae=/\(###\) ###\\?-####/;function sl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function Fz(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function Lz(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function JLe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function ZLe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Vc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wae)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vc("n",n,r):"("+Vc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return YLe(e,t,r);if(t.indexOf("%")!==-1)return GLe(e,t,r);if(t.indexOf("E")!==-1)return vae(t,r);if(t.charCodeAt(0)===36)return"$"+Vc(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Rv(c,t.length);if(t.match(/^[#?]+$/))return a=Rv(r,0),a==="0"&&(a=""),a.length>t.length?a:sl(t.substr(0,t.length-a.length))+a;if(i=t.match(yae))return KLe(i,c,u);if(t.match(/^#+0+$/))return u+Rv(c,t.length-t.indexOf("0"));if(i=t.match(xae))return a=Fz(r,i[1].length).replace(/^([^\.]+)$/,"$1."+sl(i[1])).replace(/\.$/,"."+sl(i[1])).replace(/\.(\d*)$/,function(w,g){return"."+g+Ti("0",sl(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+Fz(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+em(Rv(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vc(e,t,-r):em(""+(Math.floor(r)+JLe(r,i[1].length)))+"."+Hu(Lz(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Vc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=d1(Vc(e,t.replace(/[\\-]/g,""),r)),s=0,d1(d1(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return s<a.length?a.charAt(s++):w==="0"?"0":""}));if(t.match(bae))return a=Vc(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=t4(c,Math.pow(10,s)-1,!1),a=""+u,d=mh("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=QS(o[2],s),d.length<i[4].length&&(d=sl(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=t4(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?zR(o[1],s)+i[2]+"/"+i[3]+QS(o[2],s):Ti(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Rv(r,0),t.length<=a.length?a:sl(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return sl(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return s=Lz(r,i[1].length),r<0?"-"+Vc(e,t,-r):em(ZLe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Hu(0,3-w.length):"")+w})+"."+Hu(s,i[1].length);switch(t){case"###,##0.00":return Vc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=em(Rv(c,0));return m!=="0"?u+m:"";case"###,###.00":return Vc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Vc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function QLe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return mh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function e9e(e,t,r){var n=t.replace(gae,""),a=t.length-n.length;return mh(e,n,r*Math.pow(10,2*a))+Ti("%",a)}function _ae(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+_ae(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+i):r+="E+"+(s-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Bd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wae)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Bd("n",n,r):"("+Bd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return QLe(e,t,r);if(t.indexOf("%")!==-1)return e9e(e,t,r);if(t.indexOf("E")!==-1)return _ae(t,r);if(t.charCodeAt(0)===36)return"$"+Bd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,s,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Hu(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:sl(t.substr(0,t.length-a.length))+a;if(i=t.match(yae))return XLe(i,c,u);if(t.match(/^#+0+$/))return u+Hu(c,t.length-t.indexOf("0"));if(i=t.match(xae))return a=(""+r).replace(/^([^\.]+)$/,"$1."+sl(i[1])).replace(/\.$/,"."+sl(i[1])),a=a.replace(/\.(\d*)$/,function(w,g){return"."+g+Ti("0",sl(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+em(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Bd(e,t,-r):em(""+r)+"."+Ti("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Bd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=d1(Bd(e,t.replace(/[\\-]/g,""),r)),s=0,d1(d1(t.replace(/\\/g,"")).replace(/[0#]/g,function(w){return s<a.length?a.charAt(s++):w==="0"?"0":""}));if(t.match(bae))return a=Bd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(i[4].length,7),o=t4(c,Math.pow(10,s)-1,!1),a=""+u,d=mh("n",i[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=QS(o[2],s),d.length<i[4].length&&(d=sl(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(i[1].length,i[4].length),7),o=t4(c,Math.pow(10,s)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?zR(o[1],s)+i[2]+"/"+i[3]+QS(o[2],s):Ti(" ",2*s+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:sl(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),s=a.indexOf(".");var f=t.indexOf(".")-s,h=t.length-a.length-f;return sl(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Bd(e,t,-r):em(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Hu(0,3-w.length):"")+w})+"."+Hu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=em(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return Bd(e,t.slice(0,t.lastIndexOf(".")),r)+sl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function mh(e,t,r){return(r|0)===r?Bd(e,t,r):Vc(e,t,r)}function t9e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Sae=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Cy(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":e4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Sae))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function r9e(e,t,r,n){for(var a=[],i="",s=0,o="",c="t",u,d,f,h="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!e4(e,s))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},s+=7;break;case'"':for(i="";(f=e.charCodeAt(++s))!==34&&s<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++s;break;case"\\":var m=e.charAt(++s),w=m==="("||m===")"?m:"t";a[a.length]={t:w,v:m},++s;break;case"_":a[a.length]={t:"t",v:" "},s+=2;break;case"@":a[a.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(u==null&&(u=B0(t,r,e.charAt(s+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(s,2)},c=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=B0(t,r),u==null))return"";for(i=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"上":var g={t:o,v:o};if(u==null&&(u=B0(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",h="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",s+=5,h="h"):e.substr(s,5).toUpperCase()==="上午/下午"?(u!=null&&(g.v=u.H>=12?"下午":"上午"),g.t="T",s+=5,h="h"):(g.t="t",++s),u==null&&g.t==="T")return"";a[a.length]=g,c=o;break;case"[":for(i=o;e.charAt(s++)!=="]"&&s<e.length;)i+=e.charAt(s);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Sae)){if(u==null&&(u=B0(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Cy(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++s<e.length&&(o=e.charAt(s))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++s)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)i+=e.charAt(s);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++s;break;case"$":a[a.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++s;break}var y=0,b=0,_;for(s=a.length-1,c="t";s>=0;--s)switch(a[s].t){case"h":case"H":a[s].t=h,c="h",y<1&&(y=1);break;case"s":(_=a[s].v.match(/\.0+$/))&&(b=Math.max(b,_[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=a[s].t;break;case"m":c==="s"&&(a[s].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&a[s].v.match(/[Hh]/)&&(y=1),y<2&&a[s].v.match(/[Mm]/)&&(y=2),y<3&&a[s].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var N="",E;for(s=0;s<a.length;++s)switch(a[s].t){case"t":case"T":case" ":case"D":break;case"X":a[s].v="",a[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[s].v=HLe(a[s].t.charCodeAt(0),a[s].v,u,b),a[s].t="t";break;case"n":case"?":for(E=s+1;a[E]!=null&&((o=a[E].t)==="?"||o==="D"||(o===" "||o==="t")&&a[E+1]!=null&&(a[E+1].t==="?"||a[E+1].t==="t"&&a[E+1].v==="/")||a[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[E].v==="/"||a[E].v===" "&&a[E+1]!=null&&a[E+1].t=="?"));)a[s].v+=a[E].v,a[E]={v:"",t:";"},++E;N+=a[s].v,s=E-1;break;case"G":a[s].t="t",a[s].v=gg(t,r);break}var C="",D,P;if(N.length>0){N.charCodeAt(0)==40?(D=t<0&&N.charCodeAt(0)===45?-t:t,P=mh("n",N,D)):(D=t<0&&n>1?-t:t,P=mh("n",N,D),D<0&&a[0]&&a[0].t=="t"&&(P=P.substr(1),a[0].v="-"+a[0].v)),E=P.length-1;var F=a.length;for(s=0;s<a.length;++s)if(a[s]!=null&&a[s].t!="t"&&a[s].v.indexOf(".")>-1){F=s;break}var L=a.length;if(F===a.length&&P.indexOf("E")===-1){for(s=a.length-1;s>=0;--s)a[s]==null||"n?".indexOf(a[s].t)===-1||(E>=a[s].v.length-1?(E-=a[s].v.length,a[s].v=P.substr(E+1,a[s].v.length)):E<0?a[s].v="":(a[s].v=P.substr(0,E+1),E=-1),a[s].t="t",L=s);E>=0&&L<a.length&&(a[L].v=P.substr(0,E+1)+a[L].v)}else if(F!==a.length&&P.indexOf("E")===-1){for(E=P.indexOf(".")-1,s=F;s>=0;--s)if(!(a[s]==null||"n?".indexOf(a[s].t)===-1)){for(d=a[s].v.indexOf(".")>-1&&s===F?a[s].v.indexOf(".")-1:a[s].v.length-1,C=a[s].v.substr(d+1);d>=0;--d)E>=0&&(a[s].v.charAt(d)==="0"||a[s].v.charAt(d)==="#")&&(C=P.charAt(E--)+C);a[s].v=C,a[s].t="t",L=s}for(E>=0&&L<a.length&&(a[L].v=P.substr(0,E+1)+a[L].v),E=P.indexOf(".")+1,s=F;s<a.length;++s)if(!(a[s]==null||"n?(".indexOf(a[s].t)===-1&&s!==F)){for(d=a[s].v.indexOf(".")>-1&&s===F?a[s].v.indexOf(".")+1:0,C=a[s].v.substr(0,d);d<a[s].v.length;++d)E<P.length&&(C+=P.charAt(E++));a[s].v=C,a[s].t="t",L=s}}}for(s=0;s<a.length;++s)a[s]!=null&&"n?".indexOf(a[s].t)>-1&&(D=n>1&&t<0&&s>0&&a[s-1].v==="-"?-t:t,a[s].v=mh(a[s].t,a[s].v,D),a[s].t="t");var W="";for(s=0;s!==a.length;++s)a[s]!=null&&(W+=a[s].v);return W}var jz=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function $z(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function n9e(e,t){var r=t9e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(jz),o=r[1].match(jz);return $z(t,s)?[n,r[0]]:$z(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,i]}function au(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Jr)[e],n==null&&(n=r.table&&r.table[Mz[e]]||Jr[Mz[e]]),n==null&&(n=$Le[e]||"General");break}if(e4(n,0))return gg(t,r);t instanceof Date&&(t=mae(t,r.date1904));var a=n9e(n,t);if(e4(a[1]))return gg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return r9e(a[1],t,r,a[0])}function gh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Jr[r]==null){t<0&&(t=r);continue}if(Jr[r]==e){t=r;break}}t<0&&(t=391)}return Jr[t]=e,t}function r3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&gh(e[t],t)}function Py(){Jr=jLe()}var a9e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Nae=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function i9e(e){var t=typeof e=="number"?Jr[e]:e;return t=t.replace(Nae,"(\\d+)"),new RegExp("^"+t+"$")}function s9e(e,t,r){var n=-1,a=-1,i=-1,s=-1,o=-1,c=-1;(t.match(Nae)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":s=m;break;case"s":c=m;break;case"m":s>=0?o=m:a=m;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return s==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var o9e=function(){var e={};e.version="1.2.0";function t(){for(var P=0,F=new Array(256),L=0;L!=256;++L)P=L,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,F[L]=P;return typeof Int32Array<"u"?new Int32Array(F):F}var r=t();function n(P){var F=0,L=0,W=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(W=0;W!=256;++W)T[W]=P[W];for(W=0;W!=256;++W)for(L=P[W],F=256+W;F<4096;F+=256)L=T[F]=L>>>8^P[L&255];var R=[];for(W=1;W!=16;++W)R[W-1]=typeof Int32Array<"u"?T.subarray(W*256,W*256+256):T.slice(W*256,W*256+256);return R}var a=n(r),i=a[0],s=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],w=a[9],g=a[10],y=a[11],b=a[12],_=a[13],N=a[14];function E(P,F){for(var L=F^-1,W=0,T=P.length;W<T;)L=L>>>8^r[(L^P.charCodeAt(W++))&255];return~L}function C(P,F){for(var L=F^-1,W=P.length-15,T=0;T<W;)L=N[P[T++]^L&255]^_[P[T++]^L>>8&255]^b[P[T++]^L>>16&255]^y[P[T++]^L>>>24]^g[P[T++]]^w[P[T++]]^m[P[T++]]^h[P[T++]]^f[P[T++]]^d[P[T++]]^u[P[T++]]^c[P[T++]]^o[P[T++]]^s[P[T++]]^i[P[T++]]^r[P[T++]];for(W+=15;T<W;)L=L>>>8^r[(L^P[T++])&255];return~L}function D(P,F){for(var L=F^-1,W=0,T=P.length,R=0,j=0;W<T;)R=P.charCodeAt(W++),R<128?L=L>>>8^r[(L^R)&255]:R<2048?(L=L>>>8^r[(L^(192|R>>6&31))&255],L=L>>>8^r[(L^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,j=P.charCodeAt(W++)&1023,L=L>>>8^r[(L^(240|R>>8&7))&255],L=L>>>8^r[(L^(128|R>>2&63))&255],L=L>>>8^r[(L^(128|j>>6&15|(R&3)<<4))&255],L=L>>>8^r[(L^(128|j&63))&255]):(L=L>>>8^r[(L^(224|R>>12&15))&255],L=L>>>8^r[(L^(128|R>>6&63))&255],L=L>>>8^r[(L^(128|R&63))&255]);return~L}return e.table=r,e.bstr=E,e.buf=C,e.str=D,e}(),Br=function(){var t={};t.version="1.2.1";function r(ce,we){for(var xe=ce.split("/"),_e=we.split("/"),Ne=0,Se=0,Ve=Math.min(xe.length,_e.length);Ne<Ve;++Ne){if(Se=xe[Ne].length-_e[Ne].length)return Se;if(xe[Ne]!=_e[Ne])return xe[Ne]<_e[Ne]?-1:1}return xe.length-_e.length}function n(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:n(ce.slice(0,-1));var we=ce.lastIndexOf("/");return we===-1?ce:ce.slice(0,we+1)}function a(ce){if(ce.charAt(ce.length-1)=="/")return a(ce.slice(0,-1));var we=ce.lastIndexOf("/");return we===-1?ce:ce.slice(we+1)}function i(ce,we){typeof we=="string"&&(we=new Date(we));var xe=we.getHours();xe=xe<<6|we.getMinutes(),xe=xe<<5|we.getSeconds()>>>1,ce.write_shift(2,xe);var _e=we.getFullYear()-1980;_e=_e<<4|we.getMonth()+1,_e=_e<<5|we.getDate(),ce.write_shift(2,_e)}function s(ce){var we=ce.read_shift(2)&65535,xe=ce.read_shift(2)&65535,_e=new Date,Ne=xe&31;xe>>>=5;var Se=xe&15;xe>>>=4,_e.setMilliseconds(0),_e.setFullYear(xe+1980),_e.setMonth(Se-1),_e.setDate(Ne);var Ve=we&31;we>>>=5;var ft=we&63;return we>>>=6,_e.setHours(we),_e.setMinutes(ft),_e.setSeconds(Ve<<1),_e}function o(ce){so(ce,0);for(var we={},xe=0;ce.l<=ce.length-4;){var _e=ce.read_shift(2),Ne=ce.read_shift(2),Se=ce.l+Ne,Ve={};switch(_e){case 21589:xe=ce.read_shift(1),xe&1&&(Ve.mtime=ce.read_shift(4)),Ne>5&&(xe&2&&(Ve.atime=ce.read_shift(4)),xe&4&&(Ve.ctime=ce.read_shift(4))),Ve.mtime&&(Ve.mt=new Date(Ve.mtime*1e3));break}ce.l=Se,we[_e]=Ve}return we}var c;function u(){return c||(c={})}function d(ce,we){if(ce[0]==80&&ce[1]==75)return cr(ce,we);if((ce[0]|32)==109&&(ce[1]|32)==105)return ot(ce,we);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var xe=3,_e=512,Ne=0,Se=0,Ve=0,ft=0,et=0,st=[],Je=ce.slice(0,512);so(Je,0);var Ft=f(Je);switch(xe=Ft[0],xe){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Ft[1]==0)return cr(ce,we);default:throw new Error("Major Version: Expected 3 or 4 saw "+xe)}_e!==512&&(Je=ce.slice(0,_e),so(Je,28));var Jt=ce.slice(0,_e);h(Je,xe);var lr=Je.read_shift(4,"i");if(xe===3&&lr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+lr);Je.l+=4,Ve=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),ft=Je.read_shift(4,"i"),Ne=Je.read_shift(4,"i"),et=Je.read_shift(4,"i"),Se=Je.read_shift(4,"i");for(var zt=-1,qt=0;qt<109&&(zt=Je.read_shift(4,"i"),!(zt<0));++qt)st[qt]=zt;var Qr=m(ce,_e);y(et,Se,Qr,_e,st);var qn=_(Qr,Ve,st,_e);qn[Ve].name="!Directory",Ne>0&&ft!==j&&(qn[ft].name="!MiniFAT"),qn[st[0]].name="!FAT",qn.fat_addrs=st,qn.ssz=_e;var la={},za=[],Vl=[],Nc=[];N(Ve,qn,Qr,za,Ne,la,Vl,ft),w(Vl,Nc,za),za.shift();var Go={FileIndex:Vl,FullPaths:Nc};return we&&we.raw&&(Go.raw={header:Jt,sectors:Qr}),Go}function f(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(Y,"Header Signature: "),ce.l+=16;var we=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),we]}function h(ce,we){var xe=9;switch(ce.l+=2,xe=ce.read_shift(2)){case 9:if(we!=3)throw new Error("Sector Shift: Expected 9 saw "+xe);break;case 12:if(we!=4)throw new Error("Sector Shift: Expected 12 saw "+xe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+xe)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function m(ce,we){for(var xe=Math.ceil(ce.length/we)-1,_e=[],Ne=1;Ne<xe;++Ne)_e[Ne-1]=ce.slice(Ne*we,(Ne+1)*we);return _e[xe-1]=ce.slice(xe*we),_e}function w(ce,we,xe){for(var _e=0,Ne=0,Se=0,Ve=0,ft=0,et=xe.length,st=[],Je=[];_e<et;++_e)st[_e]=Je[_e]=_e,we[_e]=xe[_e];for(;ft<Je.length;++ft)_e=Je[ft],Ne=ce[_e].L,Se=ce[_e].R,Ve=ce[_e].C,st[_e]===_e&&(Ne!==-1&&st[Ne]!==Ne&&(st[_e]=st[Ne]),Se!==-1&&st[Se]!==Se&&(st[_e]=st[Se])),Ve!==-1&&(st[Ve]=_e),Ne!==-1&&_e!=st[_e]&&(st[Ne]=st[_e],Je.lastIndexOf(Ne)<ft&&Je.push(Ne)),Se!==-1&&_e!=st[_e]&&(st[Se]=st[_e],Je.lastIndexOf(Se)<ft&&Je.push(Se));for(_e=1;_e<et;++_e)st[_e]===_e&&(Se!==-1&&st[Se]!==Se?st[_e]=st[Se]:Ne!==-1&&st[Ne]!==Ne&&(st[_e]=st[Ne]));for(_e=1;_e<et;++_e)if(ce[_e].type!==0){if(ft=_e,ft!=st[ft])do ft=st[ft],we[_e]=we[ft]+"/"+we[_e];while(ft!==0&&st[ft]!==-1&&ft!=st[ft]);st[_e]=-1}for(we[0]+="/",_e=1;_e<et;++_e)ce[_e].type!==2&&(we[_e]+="/")}function g(ce,we,xe){for(var _e=ce.start,Ne=ce.size,Se=[],Ve=_e;xe&&Ne>0&&Ve>=0;)Se.push(we.slice(Ve*R,Ve*R+R)),Ne-=R,Ve=O0(xe,Ve*4);return Se.length===0?Pt(0):Bs(Se).slice(0,ce.size)}function y(ce,we,xe,_e,Ne){var Se=j;if(ce===j){if(we!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Ve=xe[ce],ft=(_e>>>2)-1;if(!Ve)return;for(var et=0;et<ft&&(Se=O0(Ve,et*4))!==j;++et)Ne.push(Se);y(O0(Ve,_e-4),we-1,xe,_e,Ne)}}function b(ce,we,xe,_e,Ne){var Se=[],Ve=[];Ne||(Ne=[]);var ft=_e-1,et=0,st=0;for(et=we;et>=0;){Ne[et]=!0,Se[Se.length]=et,Ve.push(ce[et]);var Je=xe[Math.floor(et*4/_e)];if(st=et*4&ft,_e<4+st)throw new Error("FAT boundary crossed: "+et+" 4 "+_e);if(!ce[Je])break;et=O0(ce[Je],st)}return{nodes:Se,data:Jz([Ve])}}function _(ce,we,xe,_e){var Ne=ce.length,Se=[],Ve=[],ft=[],et=[],st=_e-1,Je=0,Ft=0,Jt=0,lr=0;for(Je=0;Je<Ne;++Je)if(ft=[],Jt=Je+we,Jt>=Ne&&(Jt-=Ne),!Ve[Jt]){et=[];var zt=[];for(Ft=Jt;Ft>=0;){zt[Ft]=!0,Ve[Ft]=!0,ft[ft.length]=Ft,et.push(ce[Ft]);var qt=xe[Math.floor(Ft*4/_e)];if(lr=Ft*4&st,_e<4+lr)throw new Error("FAT boundary crossed: "+Ft+" 4 "+_e);if(!ce[qt]||(Ft=O0(ce[qt],lr),zt[Ft]))break}Se[Jt]={nodes:ft,data:Jz([et])}}return Se}function N(ce,we,xe,_e,Ne,Se,Ve,ft){for(var et=0,st=_e.length?2:0,Je=we[ce].data,Ft=0,Jt=0,lr;Ft<Je.length;Ft+=128){var zt=Je.slice(Ft,Ft+128);so(zt,64),Jt=zt.read_shift(2),lr=ZR(zt,0,Jt-st),_e.push(lr);var qt={name:lr,type:zt.read_shift(1),color:zt.read_shift(1),L:zt.read_shift(4,"i"),R:zt.read_shift(4,"i"),C:zt.read_shift(4,"i"),clsid:zt.read_shift(16),state:zt.read_shift(4,"i"),start:0,size:0},Qr=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);Qr!==0&&(qt.ct=E(zt,zt.l-8));var qn=zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2)+zt.read_shift(2);qn!==0&&(qt.mt=E(zt,zt.l-8)),qt.start=zt.read_shift(4,"i"),qt.size=zt.read_shift(4,"i"),qt.size<0&&qt.start<0&&(qt.size=qt.type=0,qt.start=j,qt.name=""),qt.type===5?(et=qt.start,Ne>0&&et!==j&&(we[et].name="!StreamData")):qt.size>=4096?(qt.storage="fat",we[qt.start]===void 0&&(we[qt.start]=b(xe,qt.start,we.fat_addrs,we.ssz)),we[qt.start].name=qt.name,qt.content=we[qt.start].data.slice(0,qt.size)):(qt.storage="minifat",qt.size<0?qt.size=0:et!==j&&qt.start!==j&&we[et]&&(qt.content=g(qt,we[et].data,(we[ft]||{}).data))),qt.content&&so(qt.content,0),Se[lr]=qt,Ve.push(qt)}}function E(ce,we){return new Date((uc(ce,we+4)/1e7*Math.pow(2,32)+uc(ce,we)/1e7-11644473600)*1e3)}function C(ce,we){return u(),d(c.readFileSync(ce),we)}function D(ce,we){var xe=we&&we.type;switch(xe||Pn&&Buffer.isBuffer(ce)&&(xe="buffer"),xe||"base64"){case"file":return C(ce,we);case"base64":return d(hc(Sc(ce)),we);case"binary":return d(hc(ce),we)}return d(ce,we)}function P(ce,we){var xe=we||{},_e=xe.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=_e+"/",ce.FileIndex[0]={name:_e,type:5}),xe.CLSID&&(ce.FileIndex[0].clsid=xe.CLSID),F(ce)}function F(ce){var we="Sh33tJ5";if(!Br.find(ce,"/"+we)){var xe=Pt(4);xe[0]=55,xe[1]=xe[3]=50,xe[2]=54,ce.FileIndex.push({name:we,type:2,content:xe,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+we),L(ce)}}function L(ce,we){P(ce);for(var xe=!1,_e=!1,Ne=ce.FullPaths.length-1;Ne>=0;--Ne){var Se=ce.FileIndex[Ne];switch(Se.type){case 0:_e?xe=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Se.R*Se.L*Se.C)&&(xe=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(xe=!0);break;default:xe=!0;break}}if(!(!xe&&!we)){var Ve=new Date(1987,1,19),ft=0,et=Object.create?Object.create(null):{},st=[];for(Ne=0;Ne<ce.FullPaths.length;++Ne)et[ce.FullPaths[Ne]]=!0,ce.FileIndex[Ne].type!==0&&st.push([ce.FullPaths[Ne],ce.FileIndex[Ne]]);for(Ne=0;Ne<st.length;++Ne){var Je=n(st[Ne][0]);_e=et[Je],_e||(st.push([Je,{name:a(Je).replace("/",""),type:1,clsid:re,ct:Ve,mt:Ve,content:null}]),et[Je]=!0)}for(st.sort(function(lr,zt){return r(lr[0],zt[0])}),ce.FullPaths=[],ce.FileIndex=[],Ne=0;Ne<st.length;++Ne)ce.FullPaths[Ne]=st[Ne][0],ce.FileIndex[Ne]=st[Ne][1];for(Ne=0;Ne<st.length;++Ne){var Ft=ce.FileIndex[Ne],Jt=ce.FullPaths[Ne];if(Ft.name=a(Jt).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||re,Ne===0)Ft.C=st.length>1?1:-1,Ft.size=0,Ft.type=5;else if(Jt.slice(-1)=="/"){for(ft=Ne+1;ft<st.length&&n(ce.FullPaths[ft])!=Jt;++ft);for(Ft.C=ft>=st.length?-1:ft,ft=Ne+1;ft<st.length&&n(ce.FullPaths[ft])!=n(Jt);++ft);Ft.R=ft>=st.length?-1:ft,Ft.type=1}else n(ce.FullPaths[Ne+1]||"")==n(Jt)&&(Ft.R=Ne+1),Ft.type=2}}}function W(ce,we){var xe=we||{};if(xe.fileType=="mad")return yt(ce,xe);switch(L(ce),xe.fileType){case"zip":return Sn(ce,xe)}var _e=function(lr){for(var zt=0,qt=0,Qr=0;Qr<lr.FileIndex.length;++Qr){var qn=lr.FileIndex[Qr];if(qn.content){var la=qn.content.length;la>0&&(la<4096?zt+=la+63>>6:qt+=la+511>>9)}}for(var za=lr.FullPaths.length+3>>2,Vl=zt+7>>3,Nc=zt+127>>7,Go=Vl+qt+za+Nc,_i=Go+127>>7,Ac=_i<=109?0:Math.ceil((_i-109)/127);Go+_i+Ac+127>>7>_i;)Ac=++_i<=109?0:Math.ceil((_i-109)/127);var Va=[1,Ac,_i,Nc,za,qt,zt,0];return lr.FileIndex[0].size=zt<<6,Va[7]=(lr.FileIndex[0].start=Va[0]+Va[1]+Va[2]+Va[3]+Va[4]+Va[5])+(Va[6]+7>>3),Va}(ce),Ne=Pt(_e[7]<<9),Se=0,Ve=0;{for(Se=0;Se<8;++Se)Ne.write_shift(1,Z[Se]);for(Se=0;Se<8;++Se)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Se=0;Se<3;++Se)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,_e[2]),Ne.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:j),Ne.write_shift(4,_e[3]),Ne.write_shift(-4,_e[1]?_e[0]-1:j),Ne.write_shift(4,_e[1]),Se=0;Se<109;++Se)Ne.write_shift(-4,Se<_e[2]?_e[1]+Se:-1)}if(_e[1])for(Ve=0;Ve<_e[1];++Ve){for(;Se<236+Ve*127;++Se)Ne.write_shift(-4,Se<_e[2]?_e[1]+Se:-1);Ne.write_shift(-4,Ve===_e[1]-1?j:Ve+1)}var ft=function(lr){for(Ve+=lr;Se<Ve-1;++Se)Ne.write_shift(-4,Se+1);lr&&(++Se,Ne.write_shift(-4,j))};for(Ve=Se=0,Ve+=_e[1];Se<Ve;++Se)Ne.write_shift(-4,z.DIFSECT);for(Ve+=_e[2];Se<Ve;++Se)Ne.write_shift(-4,z.FATSECT);ft(_e[3]),ft(_e[4]);for(var et=0,st=0,Je=ce.FileIndex[0];et<ce.FileIndex.length;++et)Je=ce.FileIndex[et],Je.content&&(st=Je.content.length,!(st<4096)&&(Je.start=Ve,ft(st+511>>9)));for(ft(_e[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,z.ENDOFCHAIN);for(Ve=Se=0,et=0;et<ce.FileIndex.length;++et)Je=ce.FileIndex[et],Je.content&&(st=Je.content.length,!(!st||st>=4096)&&(Je.start=Ve,ft(st+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,z.ENDOFCHAIN);for(Se=0;Se<_e[4]<<2;++Se){var Ft=ce.FullPaths[Se];if(!Ft||Ft.length===0){for(et=0;et<17;++et)Ne.write_shift(4,0);for(et=0;et<3;++et)Ne.write_shift(4,-1);for(et=0;et<12;++et)Ne.write_shift(4,0);continue}Je=ce.FileIndex[Se],Se===0&&(Je.start=Je.size?Je.start-1:j);var Jt=Se===0&&xe.root||Je.name;if(st=2*(Jt.length+1),Ne.write_shift(64,Jt,"utf16le"),Ne.write_shift(2,st),Ne.write_shift(1,Je.type),Ne.write_shift(1,Je.color),Ne.write_shift(-4,Je.L),Ne.write_shift(-4,Je.R),Ne.write_shift(-4,Je.C),Je.clsid)Ne.write_shift(16,Je.clsid,"hex");else for(et=0;et<4;++et)Ne.write_shift(4,0);Ne.write_shift(4,Je.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,Je.start),Ne.write_shift(4,Je.size),Ne.write_shift(4,0)}for(Se=1;Se<ce.FileIndex.length;++Se)if(Je=ce.FileIndex[Se],Je.size>=4096)if(Ne.l=Je.start+1<<9,Pn&&Buffer.isBuffer(Je.content))Je.content.copy(Ne,Ne.l,0,Je.size),Ne.l+=Je.size+511&-512;else{for(et=0;et<Je.size;++et)Ne.write_shift(1,Je.content[et]);for(;et&511;++et)Ne.write_shift(1,0)}for(Se=1;Se<ce.FileIndex.length;++Se)if(Je=ce.FileIndex[Se],Je.size>0&&Je.size<4096)if(Pn&&Buffer.isBuffer(Je.content))Je.content.copy(Ne,Ne.l,0,Je.size),Ne.l+=Je.size+63&-64;else{for(et=0;et<Je.size;++et)Ne.write_shift(1,Je.content[et]);for(;et&63;++et)Ne.write_shift(1,0)}if(Pn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function T(ce,we){var xe=ce.FullPaths.map(function(et){return et.toUpperCase()}),_e=xe.map(function(et){var st=et.split("/");return st[st.length-(et.slice(-1)=="/"?2:1)]}),Ne=!1;we.charCodeAt(0)===47?(Ne=!0,we=xe[0].slice(0,-1)+we):Ne=we.indexOf("/")!==-1;var Se=we.toUpperCase(),Ve=Ne===!0?xe.indexOf(Se):_e.indexOf(Se);if(Ve!==-1)return ce.FileIndex[Ve];var ft=!Se.match(F2);for(Se=Se.replace(fl,""),ft&&(Se=Se.replace(F2,"!")),Ve=0;Ve<xe.length;++Ve)if((ft?xe[Ve].replace(F2,"!"):xe[Ve]).replace(fl,"")==Se||(ft?_e[Ve].replace(F2,"!"):_e[Ve]).replace(fl,"")==Se)return ce.FileIndex[Ve];return null}var R=64,j=-2,Y="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function q(ce,we,xe){u();var _e=W(ce,xe);c.writeFileSync(we,_e)}function B(ce){for(var we=new Array(ce.length),xe=0;xe<ce.length;++xe)we[xe]=String.fromCharCode(ce[xe]);return we.join("")}function G(ce,we){var xe=W(ce,we);switch(we&&we.type||"buffer"){case"file":return u(),c.writeFileSync(we.filename,xe),xe;case"binary":return typeof xe=="string"?xe:B(xe);case"base64":return xw(typeof xe=="string"?xe:B(xe));case"buffer":if(Pn)return Buffer.isBuffer(xe)?xe:Lh(xe);case"array":return typeof xe=="string"?hc(xe):xe}return xe}var Q;function O(ce){try{var we=ce.InflateRaw,xe=new we;if(xe._processChunk(new Uint8Array([3,0]),xe._finishFlushFlag),xe.bytesRead)Q=ce;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function J(ce,we){if(!Q)return fr(ce,we);var xe=Q.InflateRaw,_e=new xe,Ne=_e._processChunk(ce.slice(ce.l),_e._finishFlushFlag);return ce.l+=_e.bytesRead,Ne}function X(ce){return Q?Q.deflateRawSync(ce):St(ce)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function de(ce){var we=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(we>>16|we>>8|we)&255}for(var V=typeof Uint8Array<"u",se=V?new Uint8Array(256):[],fe=0;fe<256;++fe)se[fe]=de(fe);function te(ce,we){var xe=se[ce&255];return we<=8?xe>>>8-we:(xe=xe<<8|se[ce>>8&255],we<=16?xe>>>16-we:(xe=xe<<8|se[ce>>16&255],xe>>>24-we))}function ke(ce,we){var xe=we&7,_e=we>>>3;return(ce[_e]|(xe<=6?0:ce[_e+1]<<8))>>>xe&3}function Re(ce,we){var xe=we&7,_e=we>>>3;return(ce[_e]|(xe<=5?0:ce[_e+1]<<8))>>>xe&7}function Ce(ce,we){var xe=we&7,_e=we>>>3;return(ce[_e]|(xe<=4?0:ce[_e+1]<<8))>>>xe&15}function ve(ce,we){var xe=we&7,_e=we>>>3;return(ce[_e]|(xe<=3?0:ce[_e+1]<<8))>>>xe&31}function Ge(ce,we){var xe=we&7,_e=we>>>3;return(ce[_e]|(xe<=1?0:ce[_e+1]<<8))>>>xe&127}function pt(ce,we,xe){var _e=we&7,Ne=we>>>3,Se=(1<<xe)-1,Ve=ce[Ne]>>>_e;return xe<8-_e||(Ve|=ce[Ne+1]<<8-_e,xe<16-_e)||(Ve|=ce[Ne+2]<<16-_e,xe<24-_e)||(Ve|=ce[Ne+3]<<24-_e),Ve&Se}function it(ce,we,xe){var _e=we&7,Ne=we>>>3;return _e<=5?ce[Ne]|=(xe&7)<<_e:(ce[Ne]|=xe<<_e&255,ce[Ne+1]=(xe&7)>>8-_e),we+3}function Le(ce,we,xe){var _e=we&7,Ne=we>>>3;return xe=(xe&1)<<_e,ce[Ne]|=xe,we+1}function ut(ce,we,xe){var _e=we&7,Ne=we>>>3;return xe<<=_e,ce[Ne]|=xe&255,xe>>>=8,ce[Ne+1]=xe,we+8}function he(ce,we,xe){var _e=we&7,Ne=we>>>3;return xe<<=_e,ce[Ne]|=xe&255,xe>>>=8,ce[Ne+1]=xe&255,ce[Ne+2]=xe>>>8,we+16}function Ee(ce,we){var xe=ce.length,_e=2*xe>we?2*xe:we+5,Ne=0;if(xe>=we)return ce;if(Pn){var Se=Dz(_e);if(ce.copy)ce.copy(Se);else for(;Ne<ce.length;++Ne)Se[Ne]=ce[Ne];return Se}else if(V){var Ve=new Uint8Array(_e);if(Ve.set)Ve.set(ce);else for(;Ne<xe;++Ne)Ve[Ne]=ce[Ne];return Ve}return ce.length=_e,ce}function Me(ce){for(var we=new Array(ce),xe=0;xe<ce;++xe)we[xe]=0;return we}function at(ce,we,xe){var _e=1,Ne=0,Se=0,Ve=0,ft=0,et=ce.length,st=V?new Uint16Array(32):Me(32);for(Se=0;Se<32;++Se)st[Se]=0;for(Se=et;Se<xe;++Se)ce[Se]=0;et=ce.length;var Je=V?new Uint16Array(et):Me(et);for(Se=0;Se<et;++Se)st[Ne=ce[Se]]++,_e<Ne&&(_e=Ne),Je[Se]=0;for(st[0]=0,Se=1;Se<=_e;++Se)st[Se+16]=ft=ft+st[Se-1]<<1;for(Se=0;Se<et;++Se)ft=ce[Se],ft!=0&&(Je[Se]=st[ft+16]++);var Ft=0;for(Se=0;Se<et;++Se)if(Ft=ce[Se],Ft!=0)for(ft=te(Je[Se],_e)>>_e-Ft,Ve=(1<<_e+4-Ft)-1;Ve>=0;--Ve)we[ft|Ve<<Ft]=Ft&15|Se<<4;return _e}var ct=V?new Uint16Array(512):Me(512),dt=V?new Uint16Array(32):Me(32);if(!V){for(var Xe=0;Xe<512;++Xe)ct[Xe]=0;for(Xe=0;Xe<32;++Xe)dt[Xe]=0}(function(){for(var ce=[],we=0;we<32;we++)ce.push(5);at(ce,dt,32);var xe=[];for(we=0;we<=143;we++)xe.push(8);for(;we<=255;we++)xe.push(9);for(;we<=279;we++)xe.push(7);for(;we<=287;we++)xe.push(8);at(xe,ct,288)})();var Nt=function(){for(var we=V?new Uint8Array(32768):[],xe=0,_e=0;xe<oe.length-1;++xe)for(;_e<oe[xe+1];++_e)we[_e]=xe;for(;_e<32768;++_e)we[_e]=29;var Ne=V?new Uint8Array(259):[];for(xe=0,_e=0;xe<ie.length-1;++xe)for(;_e<ie[xe+1];++_e)Ne[_e]=xe;function Se(ft,et){for(var st=0;st<ft.length;){var Je=Math.min(65535,ft.length-st),Ft=st+Je==ft.length;for(et.write_shift(1,+Ft),et.write_shift(2,Je),et.write_shift(2,~Je&65535);Je-- >0;)et[et.l++]=ft[st++]}return et.l}function Ve(ft,et){for(var st=0,Je=0,Ft=V?new Uint16Array(32768):[];Je<ft.length;){var Jt=Math.min(65535,ft.length-Je);if(Jt<10){for(st=it(et,st,+(Je+Jt==ft.length)),st&7&&(st+=8-(st&7)),et.l=st/8|0,et.write_shift(2,Jt),et.write_shift(2,~Jt&65535);Jt-- >0;)et[et.l++]=ft[Je++];st=et.l*8;continue}st=it(et,st,+(Je+Jt==ft.length)+2);for(var lr=0;Jt-- >0;){var zt=ft[Je];lr=(lr<<5^zt)&32767;var qt=-1,Qr=0;if((qt=Ft[lr])&&(qt|=Je&-32768,qt>Je&&(qt-=32768),qt<Je))for(;ft[qt+Qr]==ft[Je+Qr]&&Qr<250;)++Qr;if(Qr>2){zt=Ne[Qr],zt<=22?st=ut(et,st,se[zt+1]>>1)-1:(ut(et,st,3),st+=5,ut(et,st,se[zt-23]>>5),st+=3);var qn=zt<8?0:zt-4>>2;qn>0&&(he(et,st,Qr-ie[zt]),st+=qn),zt=we[Je-qt],st=ut(et,st,se[zt]>>3),st-=3;var la=zt<4?0:zt-2>>1;la>0&&(he(et,st,Je-qt-oe[zt]),st+=la);for(var za=0;za<Qr;++za)Ft[lr]=Je&32767,lr=(lr<<5^ft[Je])&32767,++Je;Jt-=Qr-1}else zt<=143?zt=zt+48:st=Le(et,st,1),st=ut(et,st,se[zt]),Ft[lr]=Je&32767,++Je}st=ut(et,st,0)-1}return et.l=(st+7)/8|0,et.l}return function(et,st){return et.length<8?Se(et,st):Ve(et,st)}}();function St(ce){var we=Pt(50+Math.floor(ce.length*1.1)),xe=Nt(ce,we);return we.slice(0,xe)}var At=V?new Uint16Array(32768):Me(32768),dn=V?new Uint16Array(32768):Me(32768),Nr=V?new Uint16Array(128):Me(128),mt=1,Dt=1;function yr(ce,we){var xe=ve(ce,we)+257;we+=5;var _e=ve(ce,we)+1;we+=5;var Ne=Ce(ce,we)+4;we+=4;for(var Se=0,Ve=V?new Uint8Array(19):Me(19),ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],et=1,st=V?new Uint8Array(8):Me(8),Je=V?new Uint8Array(8):Me(8),Ft=Ve.length,Jt=0;Jt<Ne;++Jt)Ve[ne[Jt]]=Se=Re(ce,we),et<Se&&(et=Se),st[Se]++,we+=3;var lr=0;for(st[0]=0,Jt=1;Jt<=et;++Jt)Je[Jt]=lr=lr+st[Jt-1]<<1;for(Jt=0;Jt<Ft;++Jt)(lr=Ve[Jt])!=0&&(ft[Jt]=Je[lr]++);var zt=0;for(Jt=0;Jt<Ft;++Jt)if(zt=Ve[Jt],zt!=0){lr=se[ft[Jt]]>>8-zt;for(var qt=(1<<7-zt)-1;qt>=0;--qt)Nr[lr|qt<<zt]=zt&7|Jt<<3}var Qr=[];for(et=1;Qr.length<xe+_e;)switch(lr=Nr[Ge(ce,we)],we+=lr&7,lr>>>=3){case 16:for(Se=3+ke(ce,we),we+=2,lr=Qr[Qr.length-1];Se-- >0;)Qr.push(lr);break;case 17:for(Se=3+Re(ce,we),we+=3;Se-- >0;)Qr.push(0);break;case 18:for(Se=11+Ge(ce,we),we+=7;Se-- >0;)Qr.push(0);break;default:Qr.push(lr),et<lr&&(et=lr);break}var qn=Qr.slice(0,xe),la=Qr.slice(xe);for(Jt=xe;Jt<286;++Jt)qn[Jt]=0;for(Jt=_e;Jt<30;++Jt)la[Jt]=0;return mt=at(qn,At,286),Dt=at(la,dn,30),we}function Gr(ce,we){if(ce[0]==3&&!(ce[1]&3))return[_m(we),2];for(var xe=0,_e=0,Ne=Dz(we||1<<18),Se=0,Ve=Ne.length>>>0,ft=0,et=0;(_e&1)==0;){if(_e=Re(ce,xe),xe+=3,_e>>>1)_e>>1==1?(ft=9,et=5):(xe=yr(ce,xe),ft=mt,et=Dt);else{xe&7&&(xe+=8-(xe&7));var st=ce[xe>>>3]|ce[(xe>>>3)+1]<<8;if(xe+=32,st>0)for(!we&&Ve<Se+st&&(Ne=Ee(Ne,Se+st),Ve=Ne.length);st-- >0;)Ne[Se++]=ce[xe>>>3],xe+=8;continue}for(;;){!we&&Ve<Se+32767&&(Ne=Ee(Ne,Se+32767),Ve=Ne.length);var Je=pt(ce,xe,ft),Ft=_e>>>1==1?ct[Je]:At[Je];if(xe+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Ne[Se++]=Ft;else{if(Ft==256)break;Ft-=257;var Jt=Ft<8?0:Ft-4>>2;Jt>5&&(Jt=0);var lr=Se+ie[Ft];Jt>0&&(lr+=pt(ce,xe,Jt),xe+=Jt),Je=pt(ce,xe,et),Ft=_e>>>1==1?dt[Je]:dn[Je],xe+=Ft&15,Ft>>>=4;var zt=Ft<4?0:Ft-2>>1,qt=oe[Ft];for(zt>0&&(qt+=pt(ce,xe,zt),xe+=zt),!we&&Ve<lr&&(Ne=Ee(Ne,lr+100),Ve=Ne.length);Se<lr;)Ne[Se]=Ne[Se-qt],++Se}}}return we?[Ne,xe+7>>>3]:[Ne.slice(0,Se),xe+7>>>3]}function fr(ce,we){var xe=ce.slice(ce.l||0),_e=Gr(xe,we);return ce.l+=_e[1],_e[0]}function Or(ce,we){if(ce)typeof console<"u"&&console.error(we);else throw new Error(we)}function cr(ce,we){var xe=ce;so(xe,0);var _e=[],Ne=[],Se={FileIndex:_e,FullPaths:Ne};P(Se,{root:we.root});for(var Ve=xe.length-4;(xe[Ve]!=80||xe[Ve+1]!=75||xe[Ve+2]!=5||xe[Ve+3]!=6)&&Ve>=0;)--Ve;xe.l=Ve+4,xe.l+=4;var ft=xe.read_shift(2);xe.l+=6;var et=xe.read_shift(4);for(xe.l=et,Ve=0;Ve<ft;++Ve){xe.l+=20;var st=xe.read_shift(4),Je=xe.read_shift(4),Ft=xe.read_shift(2),Jt=xe.read_shift(2),lr=xe.read_shift(2);xe.l+=8;var zt=xe.read_shift(4),qt=o(xe.slice(xe.l+Ft,xe.l+Ft+Jt));xe.l+=Ft+Jt+lr;var Qr=xe.l;xe.l=zt+4,xn(xe,st,Je,Se,qt),xe.l=Qr}return Se}function xn(ce,we,xe,_e,Ne){ce.l+=2;var Se=ce.read_shift(2),Ve=ce.read_shift(2),ft=s(ce);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var et=ce.read_shift(4),st=ce.read_shift(4),Je=ce.read_shift(4),Ft=ce.read_shift(2),Jt=ce.read_shift(2),lr="",zt=0;zt<Ft;++zt)lr+=String.fromCharCode(ce[ce.l++]);if(Jt){var qt=o(ce.slice(ce.l,ce.l+Jt));(qt[21589]||{}).mt&&(ft=qt[21589].mt),((Ne||{})[21589]||{}).mt&&(ft=Ne[21589].mt)}ce.l+=Jt;var Qr=ce.slice(ce.l,ce.l+st);switch(Ve){case 8:Qr=J(ce,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ve)}var qn=!1;Se&8&&(et=ce.read_shift(4),et==134695760&&(et=ce.read_shift(4),qn=!0),st=ce.read_shift(4),Je=ce.read_shift(4)),st!=we&&Or(qn,"Bad compressed size: "+we+" != "+st),Je!=xe&&Or(qn,"Bad uncompressed size: "+xe+" != "+Je),ta(_e,lr,Qr,{unsafe:!0,mt:ft})}function Sn(ce,we){var xe=we||{},_e=[],Ne=[],Se=Pt(1),Ve=xe.compression?8:0,ft=0,et=0,st=0,Je=0,Ft=0,Jt=ce.FullPaths[0],lr=Jt,zt=ce.FileIndex[0],qt=[],Qr=0;for(et=1;et<ce.FullPaths.length;++et)if(lr=ce.FullPaths[et].slice(Jt.length),zt=ce.FileIndex[et],!(!zt.size||!zt.content||lr=="Sh33tJ5")){var qn=Je,la=Pt(lr.length);for(st=0;st<lr.length;++st)la.write_shift(1,lr.charCodeAt(st)&127);la=la.slice(0,la.l),qt[Ft]=o9e.buf(zt.content,0);var za=zt.content;Ve==8&&(za=X(za)),Se=Pt(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,ft),Se.write_shift(2,Ve),zt.mt?i(Se,zt.mt):Se.write_shift(4,0),Se.write_shift(-4,qt[Ft]),Se.write_shift(4,za.length),Se.write_shift(4,zt.content.length),Se.write_shift(2,la.length),Se.write_shift(2,0),Je+=Se.length,_e.push(Se),Je+=la.length,_e.push(la),Je+=za.length,_e.push(za),Se=Pt(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,ft),Se.write_shift(2,Ve),Se.write_shift(4,0),Se.write_shift(-4,qt[Ft]),Se.write_shift(4,za.length),Se.write_shift(4,zt.content.length),Se.write_shift(2,la.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,qn),Qr+=Se.l,Ne.push(Se),Qr+=la.length,Ne.push(la),++Ft}return Se=Pt(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,Ft),Se.write_shift(2,Ft),Se.write_shift(4,Qr),Se.write_shift(4,Je),Se.write_shift(2,0),Bs([Bs(_e),Bs(Ne),Se])}var Nn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pr(ce,we){if(ce.ctype)return ce.ctype;var xe=ce.name||"",_e=xe.match(/\.([^\.]+)$/);return _e&&Nn[_e[1]]||we&&(_e=(xe=we).match(/[\.\\]([^\.\\])+$/),_e&&Nn[_e[1]])?Nn[_e[1]]:"application/octet-stream"}function hn(ce){for(var we=xw(ce),xe=[],_e=0;_e<we.length;_e+=76)xe.push(we.slice(_e,_e+76));return xe.join(`\r
`)+`\r
`}function hs(ce){var we=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(st){var Je=st.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});we=we.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),we.charAt(0)==`
`&&(we="=0D"+we.slice(1)),we=we.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var xe=[],_e=we.split(`\r
`),Ne=0;Ne<_e.length;++Ne){var Se=_e[Ne];if(Se.length==0){xe.push("");continue}for(var Ve=0;Ve<Se.length;){var ft=76,et=Se.slice(Ve,Ve+ft);et.charAt(ft-1)=="="?ft--:et.charAt(ft-2)=="="?ft-=2:et.charAt(ft-3)=="="&&(ft-=3),et=Se.slice(Ve,Ve+ft),Ve+=ft,Ve<Se.length&&(et+="="),xe.push(et)}}return xe.join(`\r
`)}function Gn(ce){for(var we=[],xe=0;xe<ce.length;++xe){for(var _e=ce[xe];xe<=ce.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+ce[++xe];we.push(_e)}for(var Ne=0;Ne<we.length;++Ne)we[Ne]=we[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return hc(we.join(`\r
`))}function bi(ce,we,xe){for(var _e="",Ne="",Se="",Ve,ft=0;ft<10;++ft){var et=we[ft];if(!et||et.match(/^\s*$/))break;var st=et.match(/^(.*?):\s*([^\s].*)$/);if(st)switch(st[1].toLowerCase()){case"content-location":_e=st[2].trim();break;case"content-type":Se=st[2].trim();break;case"content-transfer-encoding":Ne=st[2].trim();break}}switch(++ft,Ne.toLowerCase()){case"base64":Ve=hc(Sc(we.slice(ft).join("")));break;case"quoted-printable":Ve=Gn(we.slice(ft));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var Je=ta(ce,_e.slice(xe.length),Ve,{unsafe:!0});Se&&(Je.ctype=Se)}function ot(ce,we){if(B(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var xe=we&&we.root||"",_e=(Pn&&Buffer.isBuffer(ce)?ce.toString("binary"):B(ce)).split(`\r
`),Ne=0,Se="";for(Ne=0;Ne<_e.length;++Ne)if(Se=_e[Ne],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),xe||(xe=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,xe.length)!=xe))for(;xe.length>0&&(xe=xe.slice(0,xe.length-1),xe=xe.slice(0,xe.lastIndexOf("/")+1),Se.slice(0,xe.length)!=xe););var Ve=(_e[1]||"").match(/boundary="(.*?)"/);if(!Ve)throw new Error("MAD cannot find boundary");var ft="--"+(Ve[1]||""),et=[],st=[],Je={FileIndex:et,FullPaths:st};P(Je);var Ft,Jt=0;for(Ne=0;Ne<_e.length;++Ne){var lr=_e[Ne];lr!==ft&&lr!==ft+"--"||(Jt++&&bi(Je,_e.slice(Ft,Ne),xe),Ft=Ne)}return Je}function yt(ce,we){var xe=we||{},_e=xe.boundary||"SheetJS";_e="------="+_e;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Se=ce.FullPaths[0],Ve=Se,ft=ce.FileIndex[0],et=1;et<ce.FullPaths.length;++et)if(Ve=ce.FullPaths[et].slice(Se.length),ft=ce.FileIndex[et],!(!ft.size||!ft.content||Ve=="Sh33tJ5")){Ve=Ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Qr){return"_x"+Qr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Qr){return"_u"+Qr.charCodeAt(0).toString(16)+"_"});for(var st=ft.content,Je=Pn&&Buffer.isBuffer(st)?st.toString("binary"):B(st),Ft=0,Jt=Math.min(1024,Je.length),lr=0,zt=0;zt<=Jt;++zt)(lr=Je.charCodeAt(zt))>=32&&lr<128&&++Ft;var qt=Ft>=Jt*4/5;Ne.push(_e),Ne.push("Content-Location: "+(xe.root||"file:///C:/SheetJS/")+Ve),Ne.push("Content-Transfer-Encoding: "+(qt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Pr(ft,Ve)),Ne.push(""),Ne.push(qt?hs(Je):hn(Je))}return Ne.push(_e+`--\r
`),Ne.join(`\r
`)}function Mr(ce){var we={};return P(we,ce),we}function ta(ce,we,xe,_e){var Ne=_e&&_e.unsafe;Ne||P(ce);var Se=!Ne&&Br.find(ce,we);if(!Se){var Ve=ce.FullPaths[0];we.slice(0,Ve.length)==Ve?Ve=we:(Ve.slice(-1)!="/"&&(Ve+="/"),Ve=(Ve+we).replace("//","/")),Se={name:a(we),type:2},ce.FileIndex.push(Se),ce.FullPaths.push(Ve),Ne||Br.utils.cfb_gc(ce)}return Se.content=xe,Se.size=xe?xe.length:0,_e&&(_e.CLSID&&(Se.clsid=_e.CLSID),_e.mt&&(Se.mt=_e.mt),_e.ct&&(Se.ct=_e.ct)),Se}function bt(ce,we){P(ce);var xe=Br.find(ce,we);if(xe){for(var _e=0;_e<ce.FileIndex.length;++_e)if(ce.FileIndex[_e]==xe)return ce.FileIndex.splice(_e,1),ce.FullPaths.splice(_e,1),!0}return!1}function vt(ce,we,xe){P(ce);var _e=Br.find(ce,we);if(_e){for(var Ne=0;Ne<ce.FileIndex.length;++Ne)if(ce.FileIndex[Ne]==_e)return ce.FileIndex[Ne].name=a(xe),ce.FullPaths[Ne]=xe,!0}return!1}function Qt(ce){L(ce,!0)}return t.find=T,t.read=D,t.parse=d,t.write=G,t.writeFile=q,t.utils={cfb_new:Mr,cfb_add:ta,cfb_del:bt,cfb_mov:vt,cfb_gc:Qt,ReadShift:ex,CheckField:Hae,prep_blob:so,bconcat:Bs,use_zlib:O,_deflateRaw:St,_inflateRaw:fr,consts:z},t}();function l9e(e){return typeof e=="string"?t3(e):Array.isArray(e)?RLe(e):e}function ub(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=t3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Zd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([l9e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=e,s.href=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=$m(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function c9e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Mi(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function Bz(e,t){for(var r=[],n=Mi(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function n3(e){for(var t=[],r=Mi(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function a3(e){for(var t=[],r=Mi(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function u9e(e){for(var t=[],r=Mi(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var r4=new Date(1899,11,30,0,0,0);function _s(e,t){var r=e.getTime(),n=r4.getTime()+(e.getTimezoneOffset()-r4.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Aae=new Date,d9e=r4.getTime()+(Aae.getTimezoneOffset()-r4.getTimezoneOffset())*6e4,Uz=Aae.getTimezoneOffset();function i3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+d9e),t.getTimezoneOffset()!==Uz&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Uz)*6e4),t}function f9e(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var qz=new Date("2017-02-19T19:06:09.000Z"),kae=isNaN(qz.getFullYear())?new Date("2/19/17"):qz,h9e=kae.getFullYear()==2017;function ni(e,t){var r=new Date(e);if(h9e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(kae.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function vg(e,t){if(Pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Zd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Zd(hae(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Zd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Zd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function ai(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ai(e[r]));return t}function Ti(e,t){for(var r="";r.length<t;)r+=e;return r}function Xu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var p9e=["january","february","march","april","may","june","july","august","september","october","november","december"];function sy(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&p9e.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var m9e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),s=[i[0]],o=1;o<i.length;++o)s.push(a),s.push(i[o]);return s}}();function Eae(e){return e?e.content&&e.type?vg(e.content,!0):e.data?M2(e.data):e.asNodeBuffer&&Pn?M2(e.asNodeBuffer().toString("binary")):e.asBinary?M2(e.asBinary()):e._data&&e._data.getContent?M2(vg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Cae(e){if(!e)return null;if(e.data)return Tz(e.data);if(e.asNodeBuffer&&Pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Tz(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function g9e(e){return e&&e.name.slice(-4)===".bin"?Cae(e):Eae(e)}function Yc(e,t){for(var r=e.FullPaths||Mi(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var s=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||a==s)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function HR(e,t){var r=Yc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function os(e,t,r){if(!r)return g9e(HR(e,t));if(!t)return null;try{return os(e,t)}catch{return null}}function pc(e,t,r){if(!r)return Eae(HR(e,t));if(!t)return null;try{return pc(e,t)}catch{return null}}function v9e(e,t,r){return Cae(HR(e,t))}function Wz(e){for(var t=e.FullPaths||Mi(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function En(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Pn?n=Lh(r):n=MLe(r),Br.utils.cfb_add(e,t,n)}Br.utils.cfb_add(e,t,r)}else e.file(t,r)}function GR(){return Br.utils.cfb_new()}function Pae(e,t){switch(t.type){case"base64":return Br.read(e,{type:"base64"});case"binary":return Br.read(e,{type:"binary"});case"buffer":case"array":return Br.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function L2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ts=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,y9e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,zz=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,x9e=/<[^>]*>/g,Ho=ts.match(zz)?zz:x9e,w9e=/<\w*:/,b9e=/<(\/?)\w+:/;function sn(e,t,r){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var s=e.match(y9e),o=0,c="",u=0,d="",f="",h=1;if(s)for(u=0;u!=s.length;++u){for(f=s[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(a=f.charCodeAt(i+1))==34||a==39?1:0,c=f.slice(i+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var m=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[m]&&d.slice(o-3,o)=="ext")continue;n[m]=c,n[m.toLowerCase()]=c}}return n}function bf(e){return e.replace(b9e,"<$1")}var Tae={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},YR=n3(Tae),Qn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(o,c){return Tae[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var s=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,s)+r(a.slice(s+3))}}(),KR=/[&<>'"]/g,_9e=/[\u0000-\u0008\u000b-\u001f]/g;function Pa(e){var t=e+"";return t.replace(KR,function(r){return YR[r]}).replace(_9e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Vz(e){return Pa(e).replace(/ /g,"_x0020_")}var Oae=/[\u0000-\u001f]/g;function XR(e){var t=e+"";return t.replace(KR,function(r){return YR[r]}).replace(/\n/g,"<br/>").replace(Oae,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function S9e(e){var t=e+"";return t.replace(KR,function(r){return YR[r]}).replace(Oae,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var Hz=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function N9e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ei(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function mT(e){for(var t="",r=0,n=0,a=0,i=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=a&63,t+=String.fromCharCode(s);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function Gz(e){var t=_m(2*e.length),r,n,a=1,i=0,s=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[i++]=s&255,t[i++]=s>>>8,s=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function Yz(e){return Lh(e,"binary").toString("utf8")}var F_="foo bar bazâð£",Da=Pn&&(Yz(F_)==mT(F_)&&Yz||Gz(F_)==mT(F_)&&Gz)||mT,Zd=Pn?function(e){return Lh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},bw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Dae=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),A9e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),k9e=/<\/?(?:vt:)?variant>/g,E9e=/<(?:vt:)([^>]*)>([\s\S]*)</;function Kz(e,t){var r=sn(e),n=e.match(A9e(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(i){var s=i.replace(k9e,"").match(E9e);s&&a.push({v:Da(s[2]),t:s[1]})}),a}var Iae=/(^\s|\s$|\n)/;function lo(e,t){return"<"+e+(t.match(Iae)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function _w(e){return Mi(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function rr(e,t,r){return"<"+e+(r!=null?_w(r):"")+(t!=null?(t.match(Iae)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function EO(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function C9e(e,t){switch(typeof e){case"string":var r=rr("vt:lpwstr",Pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return rr((e|0)==e?"vt:i4":"vt:r8",Pa(String(e)));case"boolean":return rr("vt:bool",e?"true":"false")}if(e instanceof Date)return rr("vt:filetime",EO(e));throw new Error("Unable to serialize "+e)}function JR(e){if(Pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Da($m(WR(e)));throw new Error("Bad input format: expected Buffer or string")}var Sw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ws={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Rg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],cc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function P9e(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function T9e(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,s=n?-t:t;isFinite(s)?s==0?a=i=0:(a=Math.floor(Math.log(s)/Math.LN2),i=s*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var Xz=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},Jz=Pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Lh(t)})):Xz(e)}:Xz,Zz=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(fh(e,a)));return n.join("").replace(fl,"")},ZR=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(fl,""):Zz(e,t,r)}:Zz,Qz=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Rae=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Qz(e,t,r)}:Qz,eV=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Uv(e,a)));return n.join("")},db=Pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):eV(t,r,n)}:eV,Mae=function(e,t){var r=uc(e,t);return r>0?db(e,t+4,t+4+r-1):""},Fae=Mae,Lae=function(e,t){var r=uc(e,t);return r>0?db(e,t+4,t+4+r-1):""},jae=Lae,$ae=function(e,t){var r=2*uc(e,t);return r>0?db(e,t+4,t+4+r-1):""},Bae=$ae,Uae=function(t,r){var n=uc(t,r);return n>0?ZR(t,r+4,r+4+n):""},qae=Uae,Wae=function(e,t){var r=uc(e,t);return r>0?db(e,t+4,t+4+r):""},zae=Wae,Vae=function(e,t){return P9e(e,t)},n4=Vae,QR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Pn&&(Fae=function(t,r){if(!Buffer.isBuffer(t))return Mae(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},jae=function(t,r){if(!Buffer.isBuffer(t))return Lae(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Bae=function(t,r){if(!Buffer.isBuffer(t))return $ae(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},qae=function(t,r){if(!Buffer.isBuffer(t))return Uae(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},zae=function(t,r){if(!Buffer.isBuffer(t))return Wae(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},n4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Vae(t,r)},QR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Uv=function(e,t){return e[t]},fh=function(e,t){return e[t+1]*256+e[t]},O9e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},uc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},O0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},D9e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ex(e,t){var r="",n,a,i=[],s,o,c,u;switch(t){case"dbcs":if(u=this.l,Pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(fh(this,u)),u+=2;e*=2;break;case"utf8":r=db(this,this.l,this.l+e);break;case"utf16le":e*=2,r=ZR(this,this.l,this.l+e);break;case"wstr":return ex.call(this,e,"dbcs");case"lpstr-ansi":r=Fae(this,this.l),e=4+uc(this,this.l);break;case"lpstr-cp":r=jae(this,this.l),e=4+uc(this,this.l);break;case"lpwstr":r=Bae(this,this.l),e=4+2*uc(this,this.l);break;case"lpp4":e=4+uc(this,this.l),r=qae(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+uc(this,this.l),r=zae(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Uv(this,this.l+e++))!==0;)i.push(M_(s));r=i.join("");break;case"_wstr":for(e=0,r="";(s=fh(this,this.l+e))!==0;)i.push(M_(s)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Uv(this,u),this.l=u+1,o=ex.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(M_(fh(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return s=Uv(this,u),this.l=u+1,o=ex.call(this,e-c,s?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(M_(Uv(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Uv(this,this.l),this.l++,n;case 2:return n=(t==="i"?O9e:fh)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?O0:D9e)(this,this.l),this.l+=4,n):(a=uc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=n4(this,this.l):a=n4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=Rae(this,this.l,e);break}}return this.l+=e,r}var I9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},R9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},M9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function F9e(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)M9e(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,I9e(this,t,this.l);break;case 8:if(n=8,r==="f"){T9e(this,t,this.l);break}case 16:break;case-4:n=4,R9e(this,t,this.l);break}return this.l+=n,this}function Hae(e,t){var r=Rae(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function so(e,t){e.l=t,e.read_shift=ex,e.chk=Hae,e.write_shift=F9e}function Vo(e,t){e.l+=t}function Pt(e){var t=_m(e);return so(t,0),t}function jh(e,t,r){if(e){var n,a,i;so(e,e.l||0);for(var s=e.length,o=0,c=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Pw[o]||Pw[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;c=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=c,t(d,u,o))return}}}function Bl(){var e=[],t=Pn?256:2048,r=function(u){var d=Pt(u);return so(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},s=function(){return a(),Bs(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:o,end:s,_bufs:e}}function jt(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=Pw[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,(a&127)+128),s.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&QR(r)&&e.push(r)}}function tx(e,t,r){var n=ai(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function tV(e,t,r){var n=ai(e);return n.s=tx(n.s,t.s,r),n.e=tx(n.e,t.s,r),n}function rx(e,t){if(e.cRel&&e.c<0)for(e=ai(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ai(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=tn(e);return!e.cRel&&e.cRel!=null&&(r=$9e(r)),!e.rRel&&e.rRel!=null&&(r=L9e(r)),r}function gT(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+xi(e.s.c)+":"+(e.e.cRel?"":"$")+xi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Qi(e.s.r)+":"+(e.e.rRel?"":"$")+Qi(e.e.r):rx(e.s,t.biff)+":"+rx(e.e,t.biff)}function e7(e){return parseInt(j9e(e),10)-1}function Qi(e){return""+(e+1)}function L9e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function j9e(e){return e.replace(/\$(\d+)$/,"$1")}function t7(e){for(var t=B9e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function xi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function $9e(e){return e.replace(/^([A-Z])/,"$$$1")}function B9e(e){return e.replace(/^\$([A-Z])/,"$1")}function U9e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function wi(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function tn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Ul(e){var t=e.indexOf(":");return t==-1?{s:wi(e),e:wi(e)}:{s:wi(e.slice(0,t)),e:wi(e.slice(t+1))}}function wn(e,t){return typeof t>"u"||typeof t=="number"?wn(e.s,e.e):(typeof e!="string"&&(e=tn(e)),typeof t!="string"&&(t=tn(t)),e==t?e:e+":"+t)}function ea(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function rV(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=au(e.z,r?_s(t):t)}catch{}try{return e.w=au((e.XF||{}).numFmtId||(r?14:0),r?_s(t):t)}catch{return""+t}}function kh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?$h[e.v]||e.v:t==null?rV(e,e.v):rV(e,t))}function Bm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Gae(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),s=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?wi(n.origin):n.origin;s=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=ea(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(u.e.r=s=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},w=s+f,g=o+h;if(u.s.r>w&&(u.s.r=w),u.s.c>g&&(u.s.c=g),u.e.r<w&&(u.e.r=w),u.e.c<g&&(u.e.c=g),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Jr[14],n.cellDates?(m.t="d",m.w=au(m.z,_s(m.v))):(m.t="n",m.v=_s(m.v),m.w=au(m.z,m.v))):m.t="s";if(a)i[w]||(i[w]=[]),i[w][g]&&i[w][g].z&&(m.z=i[w][g].z),i[w][g]=m;else{var y=tn({c:g,r:w});i[y]&&i[y].z&&(m.z=i[y].z),i[y]=m}}}return u.s.c<1e7&&(i["!ref"]=wn(u)),i}function Ty(e,t){return Gae(null,e,t)}function q9e(e){return e.read_shift(4,"i")}function Ju(e,t){return t||(t=Pt(4)),t.write_shift(4,e),t}function Bo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function qs(e,t){var r=!1;return t==null&&(r=!0,t=Pt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function W9e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function z9e(e,t){return t||(t=Pt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function r7(e,t){var r=e.l,n=e.read_shift(1),a=Bo(e),i=[],s={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(W9e(e));s.r=i}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}function V9e(e,t){var r=!1;return t==null&&(r=!0,t=Pt(15+4*e.t.length)),t.write_shift(1,0),qs(e.t,t),r?t.slice(0,t.l):t}var H9e=r7;function G9e(e,t){var r=!1;return t==null&&(r=!0,t=Pt(23+4*e.t.length)),t.write_shift(1,1),qs(e.t,t),t.write_shift(4,1),z9e({},t),r?t.slice(0,t.l):t}function lu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Mg(e,t){return t==null&&(t=Pt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Fg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Lg(e,t){return t==null&&(t=Pt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Y9e=Bo,Yae=qs;function n7(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function a4(e,t){var r=!1;return t==null&&(r=!0,t=Pt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var K9e=Bo,CO=n7,a7=a4;function i7(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?n4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):O0(t,0)>>2;return r?a/100:a}function Kae(e,t){t==null&&(t=Pt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Xae(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function X9e(e,t){return t||(t=Pt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var jg=Xae,Oy=X9e;function jo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function yg(e,t){return(t||Pt(8)).write_shift(8,e,"f")}function J9e(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Y0[a];u&&(t.rgb=Aw(u));break;case 2:t.rgb=Aw([s,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function i4(e,t){if(t||(t=Pt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Z9e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Q9e(e,t){t||(t=Pt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Jae(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function eje(e){return Jae(e,1)}function tje(e){return Jae(e,2)}var s7=2,Ol=3,L_=11,nV=12,s4=19,j_=64,rje=65,nje=71,aje=4108,ije=4126,Fs=80,Zae=81,sje=[Fs,Zae],PO={1:{n:"CodePage",t:s7},2:{n:"Category",t:Fs},3:{n:"PresentationFormat",t:Fs},4:{n:"ByteCount",t:Ol},5:{n:"LineCount",t:Ol},6:{n:"ParagraphCount",t:Ol},7:{n:"SlideCount",t:Ol},8:{n:"NoteCount",t:Ol},9:{n:"HiddenCount",t:Ol},10:{n:"MultimediaClipCount",t:Ol},11:{n:"ScaleCrop",t:L_},12:{n:"HeadingPairs",t:aje},13:{n:"TitlesOfParts",t:ije},14:{n:"Manager",t:Fs},15:{n:"Company",t:Fs},16:{n:"LinksUpToDate",t:L_},17:{n:"CharacterCount",t:Ol},19:{n:"SharedDoc",t:L_},22:{n:"HyperlinksChanged",t:L_},23:{n:"AppVersion",t:Ol,p:"version"},24:{n:"DigSig",t:rje},26:{n:"ContentType",t:Fs},27:{n:"ContentStatus",t:Fs},28:{n:"Language",t:Fs},29:{n:"Version",t:Fs},255:{},2147483648:{n:"Locale",t:s4},2147483651:{n:"Behavior",t:s4},1919054434:{}},TO={1:{n:"CodePage",t:s7},2:{n:"Title",t:Fs},3:{n:"Subject",t:Fs},4:{n:"Author",t:Fs},5:{n:"Keywords",t:Fs},6:{n:"Comments",t:Fs},7:{n:"Template",t:Fs},8:{n:"LastAuthor",t:Fs},9:{n:"RevNumber",t:Fs},10:{n:"EditTime",t:j_},11:{n:"LastPrinted",t:j_},12:{n:"CreatedDate",t:j_},13:{n:"ModifiedDate",t:j_},14:{n:"PageCount",t:Ol},15:{n:"WordCount",t:Ol},16:{n:"CharCount",t:Ol},17:{n:"Thumbnail",t:nje},18:{n:"Application",t:Fs},19:{n:"DocSecurity",t:Ol},255:{},2147483648:{n:"Locale",t:s4},2147483651:{n:"Behavior",t:s4},1919054434:{}},aV={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},oje=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function lje(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var cje=lje([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Y0=ai(cje),$h={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Qae={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},OO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},$_={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function o7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function uje(e){var t=o7();if(!e||!e.match)return t;var r={};if((e.match(Ho)||[]).forEach(function(n){var a=sn(n);switch(a[0].replace(w9e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[OO[a.ContentType]]!==void 0&&t[OO[a.ContentType]].push(a.PartName);break}}),t.xmlns!==ws.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function eie(e,t){var r=u9e(OO),n=[],a;n[n.length]=ts,n[n.length]=rr("Types",null,{xmlns:ws.CT,"xmlns:xsd":ws.xsd,"xmlns:xsi":ws.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return rr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=rr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:$_[c][t.bookType]||$_[c].xlsx}))},s=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:$_[c][t.bookType]||$_[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=rr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var On={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Nw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function nx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Ho)||[]).forEach(function(a){var i=sn(a);if(i[0]==="<Relationship"){var s={};s.Type=i.Type,s.Target=i.Target,s.Id=i.Id,i.TargetMode&&(s.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:L2(i.Target,t);r[o]=s,n[i.Id]=s}}),r["!id"]=n,r}function f1(e){var t=[ts,rr("Relationships",null,{xmlns:ws.RELS})];return Mi(e["!id"]).forEach(function(r){t[t.length]=rr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ea(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[On.HLINK,On.XPATH,On.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var dje="application/vnd.oasis.opendocument.spreadsheet";function fje(e,t){for(var r=JR(e),n,a;n=Sw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=sn(n[0],!1),a.path=="/"&&a.type!==dje)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function hje(e){var t=[ts];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function iV(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function pje(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function mje(e){var t=[ts];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(iV(e[r][0],e[r][1])),t.push(pje("",e[r][0]));return t.push(iV("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function tie(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ZS.version+"</meta:generator></office:meta></office:document-meta>"}var tu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],gje=function(){for(var e=new Array(tu.length),t=0;t<tu.length;++t){var r=tu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function rie(e){var t={};e=Da(e);for(var r=0;r<tu.length;++r){var n=tu[r],a=e.match(gje[r]);a!=null&&a.length>0&&(t[n[1]]=Qn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=ni(t[n[1]]))}return t}function vT(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Pa(t),n[n.length]=r?rr(e,t,r):lo(e,t))}function nie(e,t){var r=t||{},n=[ts,rr("cp:coreProperties",null,{"xmlns:cp":ws.CORE_PROPS,"xmlns:dc":ws.dc,"xmlns:dcterms":ws.dcterms,"xmlns:dcmitype":ws.dcmitype,"xmlns:xsi":ws.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&vT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:EO(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&vT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:EO(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=tu.length;++i){var s=tu[i],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:e?e[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&vT(s[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var K0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],aie=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function iie(e,t,r,n){var a=[];if(typeof e=="string")a=Kz(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(d){return{v:d}}));var s=typeof t=="string"?Kz(t,n).map(function(d){return d.v}):t,o=0,c=0;if(s.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=s.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=s.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=s.slice(o,o+c);break}o+=c}}function vje(e,t,r){var n={};return t||(t={}),e=Da(e),K0.forEach(function(a){var i=(e.match(bw(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Qn(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var s=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));s&&s.length>0&&(n[a[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&iie(n.HeadingPairs,n.TitlesOfParts,t,r),t}function sie(e){var t=[],r=rr;return e||(e={}),e.Application="SheetJS",t[t.length]=ts,t[t.length]=rr("Properties",null,{xmlns:ws.EXT_PROPS,"xmlns:vt":ws.vt}),K0.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var yje=/<[^>]+>[^<]*/g;function xje(e,t){var r={},n="",a=e.match(yje);if(a)for(var i=0;i!=a.length;++i){var s=a[i],o=sn(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Qn(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var c=s.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Qn(d);break;case"bool":r[n]=ei(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=ni(d);break;case"cy":case"error":r[n]=Qn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,u,c)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}function oie(e){var t=[ts,rr("Properties",null,{xmlns:ws.CUST_PROPS,"xmlns:vt":ws.vt})];if(!e)return t.join("");var r=1;return Mi(e).forEach(function(a){++r,t[t.length]=rr("property",C9e(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var DO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},yT;function wje(e,t,r){yT||(yT=n3(DO)),t=yT[t]||t,e[t]=r}function bje(e,t){var r=[];return Mi(DO).map(function(n){for(var a=0;a<tu.length;++a)if(tu[a][1]==n)return tu[a];for(a=0;a<K0.length;++a)if(K0[a][1]==n)return K0[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(lo(DO[n[1]]||n[1],a))}}),rr("DocumentProperties",r.join(""),{xmlns:cc.o})}function _je(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Mi(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var s=0;s<tu.length;++s)if(i==tu[s][1])return;for(s=0;s<K0.length;++s)if(i==K0[s][1])return;for(s=0;s<r.length;++s)if(i==r[s])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(rr(Vz(i),o,{"dt:dt":c}))}}),t&&Mi(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var s=t[i],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),a.push(rr(Vz(i),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+cc.o+'">'+a.join("")+"</"+n+">"}function l7(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Sje(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var s=Pt(8);return s.write_shift(4,n),s.write_shift(4,a),s}function lie(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function cie(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function uie(e,t,r){return t===31?cie(e):lie(e,t,r)}function IO(e,t,r){return uie(e,t,r===!1?0:4)}function Nje(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return uie(e,t,0)}function Aje(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(fl,""),e.l-a&2&&(e.l+=2)}return r}function kje(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(fl,"");return r}function Eje(e){var t=e.l,r=o4(e,Zae);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=o4(e,Ol);return[r,n]}function Cje(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Eje(e));return r}function sV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var i=e.read_shift(4),s=e.read_shift(4);n[i]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(fl,"").replace(F2,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function die(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Pje(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function o4(e,t,r){var n=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==nV&&n!==t&&sje.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===nV?n:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return lie(e,n,4).replace(fl,"");case 31:return cie(e);case 64:return l7(e);case 65:return die(e);case 71:return Pje(e);case 80:return IO(e,n,!i.raw).replace(fl,"");case 81:return Nje(e,n).replace(fl,"");case 4108:return Cje(e);case 4126:case 4127:return n==4127?Aje(e):kje(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function oV(e,t){var r=Pt(4),n=Pt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Pt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Sje(t);break;case 31:case 80:for(n=Pt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Bs([r,n])}function lV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],s=0,o=0,c=-1,u={};for(s=0;s!=a;++s){var d=e.read_shift(4),f=e.read_shift(4);i[s]=[d,f+r]}i.sort(function(_,N){return _[1]-N[1]});var h={};for(s=0;s!=a;++s){if(e.l!==i[s][1]){var m=!0;if(s>0&&t)switch(t[i[s-1][0]].t){case 2:e.l+2===i[s][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[s][1]&&(e.l=i[s][1],m=!1);break;case 4108:e.l<=i[s][1]&&(e.l=i[s][1],m=!1);break}if((!t||s==0)&&e.l<=i[s][1]&&(m=!1,e.l=i[s][1]),m)throw new Error("Read Error: Expected address "+i[s][1]+" at "+e.l+" :"+s)}if(t){var w=t[i[s][0]];if(h[w.n]=o4(e,w.t,{raw:!0}),w.p==="version"&&(h[w.n]=String(h[w.n]>>16)+"."+("0000"+String(h[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(h[w.n]){case 0:h[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Vu(o=h[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[w.n])}}else if(i[s][0]===1){if(o=h.CodePage=o4(e,s7),Vu(o),c!==-1){var g=e.l;e.l=i[c][1],u=sV(e,o),e.l=g}}else if(i[s][0]===0){if(o===0){c=s,e.l=i[s+1][1];continue}u=sV(e,o)}else{var y=u[i[s][0]],b;switch(e[e.l]){case 65:e.l+=4,b=die(e);break;case 30:e.l+=4,b=IO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,b=IO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,b=e.read_shift(4,"i");break;case 19:e.l+=4,b=e.read_shift(4);break;case 5:e.l+=4,b=e.read_shift(8,"f");break;case 11:e.l+=4,b=qi(e,4);break;case 64:e.l+=4,b=ni(l7(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[y]=b}}return e.l=r+n,h}var fie=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Tje(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function cV(e,t,r){var n=Pt(8),a=[],i=[],s=8,o=0,c=Pt(8),u=Pt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),s+=8+c.length,!t){u=Pt(8),u.write_shift(4,0),a.unshift(u);var d=[Pt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Pt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Bs(d),i.unshift(c),s+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(fie.indexOf(e[o][0])>-1||aie.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],m=0;if(t){m=+t[e[o][0]];var w=r[m];if(w.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}c=oV(w.t,h)}else{var y=Tje(h);y==-1&&(y=31,h=String(h)),c=oV(y,h)}i.push(c),u=Pt(8),u.write_shift(4,t?m:2+o),a.push(u),s+=8+c.length}var b=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,b),b+=i[o].length;return n.write_shift(4,s),n.write_shift(4,i.length),Bs([n].concat(a).concat(i))}function uV(e,t,r){var n=e.content;if(!n)return{};so(n,0);var a,i,s,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Br.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(s=n.read_shift(16),c=n.read_shift(4));var f=lV(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=i,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var w;try{w=lV(n,null)}catch{}for(m in w)h[m]=w[m];return h.FMTID=[i,s],h}function dV(e,t,r,n,a,i){var s=Pt(a?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,Br.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,a?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,a?68:48);var c=cV(e,r,n);if(o.push(c),a){var u=cV(a,null,null);s.write_shift(16,i,"hex"),s.write_shift(4,68+c.length),o.push(u)}return Bs(o)}function Fp(e,t){return e.read_shift(t),null}function Oje(e,t){t||(t=Pt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Dje(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function qi(e,t){return e.read_shift(t)===1}function ol(e,t){return t||(t=Pt(2)),t.write_shift(2,+!!e),t}function ls(e){return e.read_shift(2,"u")}function Kc(e,t){return t||(t=Pt(2)),t.write_shift(2,e),t}function hie(e,t){return Dje(e,t,ls)}function Ije(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function pie(e,t,r){return r||(r=Pt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function fb(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var s=n?e.read_shift(n,a):"";return s}function Rje(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,i=1+(r&1),s=0,o,c={};a&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*s),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Mje(e){var t=e.t||"",r=Pt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Pt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Bs(a)}function xg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function hb(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):xg(e,n,r)}function $g(e,t,r){if(r.biff>5)return hb(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function mie(e,t,r){return r||(r=Pt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Fje(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Lje(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(fl,"");return n&&(e.l+=24),a}function jje(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(i>>1,"utf16le").replace(fl,"");return r+s}function $je(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Lje(e);case"0303000000000000c000000000000046":return jje(e);default:throw new Error("Unsupported Moniker "+r)}}function B_(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(fl,""):"";return r}function fV(e,t){t||(t=Pt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Bje(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,s,o,c,u="",d,f;a&16&&(i=B_(e,r-e.l)),a&128&&(s=B_(e,r-e.l)),(a&257)===257&&(o=B_(e,r-e.l)),(a&257)===1&&(c=$je(e,r-e.l)),a&8&&(u=B_(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=l7(e)),e.l=r;var h=s||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),i&&(m.Tooltip=i),m}function Uje(e){var t=Pt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(i==28)n=n.slice(1),fV(n,t);else if(i&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&fV(a>-1?n.slice(a+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function gie(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function vie(e,t){var r=gie(e);return r[3]=0,r}function _f(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function wg(e,t,r,n){return n||(n=Pt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function qje(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Wje(e,t,r){return t===0?"":$g(e,t,r)}function zje(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[a,i,s]}function yie(e){var t=e.read_shift(2),r=i7(e);return[t,r]}function Vje(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=fb(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function s3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function xie(e,t){return t||(t=Pt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function wie(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var Hje=wie;function bie(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Gje(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Yje(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Eo(e){e.l+=2,e.l+=e.read_shift(2)}var Kje={0:Eo,4:Eo,5:Eo,6:Eo,7:Yje,8:Eo,9:Eo,10:Eo,11:Eo,12:Eo,13:Gje,14:Eo,15:Eo,16:Eo,17:Eo,18:Eo,19:Eo,20:Eo,21:bie};function Xje(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(Kje[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function U_(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function c7(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Pt(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Jje(e,t){return t===0||e.read_shift(2),1200}function Zje(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=$g(e,0,r);return e.read_shift(t+n-e.l),a}function Qje(e,t){var r=!t||t.biff==8,n=Pt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function e$e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function t$e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var s=fb(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:a,dt:i,name:s}}function r$e(e,t){var r=!t||t.biff>=8?2:1,n=Pt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function n$e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),i=[],s=0;s!=a&&e.l<r;++s)i.push(Rje(e));return i.Count=n,i.Unique=a,i}function a$e(e,t){var r=Pt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=Mje(e[a]);var i=Bs([r].concat(n));return i.parts=[r.length].concat(n.map(function(s){return s.length})),i}function i$e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function s$e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function o$e(e){var t=qje(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function l$e(e){return e.read_shift(2),e.read_shift(4)}function hV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function c$e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:i,CurTab:s,FirstTab:o,Selected:c,TabRatio:u}}function u$e(){var e=Pt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function d$e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function f$e(e){var t=Pt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function h$e(){}function p$e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=fb(e,0,r),n}function m$e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Pt(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function g$e(e){var t=_f(e);return t.isst=e.read_shift(4),t}function v$e(e,t,r,n){var a=Pt(10);return wg(e,t,n,a),a.write_shift(4,r),a}function y$e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=_f(e);r.biff==2&&e.l++;var i=hb(e,n-e.l,r);return a.val=i,a}function x$e(e,t,r,n,a){var i=!a||a.biff==8,s=Pt(8+ +i+(1+i)*r.length);return wg(e,t,n,s),s.write_shift(2,r.length),i&&s.write_shift(1,1),s.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),s}function w$e(e,t,r){var n=e.read_shift(2),a=$g(e,0,r);return[n,a]}function b$e(e,t,r,n){var a=r&&r.biff==5;n||(n=Pt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var _$e=$g;function pV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),s=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:o},e:{r:s,c}}}function S$e(e,t){var r=t.biff==8||!t.biff?4:2,n=Pt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function N$e(e){var t=e.read_shift(2),r=e.read_shift(2),n=yie(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function A$e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(yie(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(i.length!=s-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:s,rkrec:i}}function k$e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(i.length!=s-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:s,ixfe:i}}function E$e(e,t,r,n){var a={},i=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=oje[o>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=s&15,a.dgRight=s>>4&15,a.dgTop=s>>8&15,a.dgBottom=s>>12&15,a.icvLeft=s>>16&127,a.icvRight=s>>23&127,a.grbitDiag=s>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function C$e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=E$e(e,t,n.fStyle,r),n}function mV(e,t,r,n){var a=r&&r.biff==5;n||(n=Pt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function P$e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function T$e(e){var t=Pt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function gV(e,t,r){var n=_f(e);(r.biff==2||t==9)&&++e.l;var a=Ije(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function O$e(e,t,r,n,a,i){var s=Pt(8);return wg(e,t,n,s),pie(r,i,s),s}function D$e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=_f(e),a=jo(e);return n.val=a,n}function I$e(e,t,r,n){var a=Pt(14);return wg(e,t,n,a),yg(r,a),a}var vV=Wje;function R$e(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var s=xg(e,i),o=[];n>e.l;)o.push(hb(e));return[i,a,s,o]}function yV(e,t,r){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=Vje(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var M$e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function xV(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=xg(e,s,r);a&32&&(u=M$e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:XWe(e,d,r,o);return{chKey:i,Name:u,itab:c,rgce:f}}function _ie(e,t,r){if(r.biff<8)return F$e(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(zje(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function F$e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=fb(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function L$e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),i=xg(e,n,r),s=xg(e,a,r);return[i,s]}function j$e(e,t,r){var n=wie(e);e.l++;var a=e.read_shift(1);return t-=8,[JWe(e,t,r),a,n]}function wV(e,t,r){var n=Hje(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,YWe(e,t,r)]}function $$e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function B$e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),o=$g(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,s,i]}}function U$e(e,t,r){return B$e(e,t,r)}function q$e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(s3(e));return r}function W$e(e){var t=Pt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)xie(e[r],t);return t}function z$e(e,t,r){if(r&&r.biff<8)return H$e(e,t,r);var n=bie(e),a=Xje(e,t-22,n[1]);return{cmo:n,ft:a}}var V$e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function H$e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((V$e[n]||Vo)(e,t,r)),{cmo:[a,n,i],ft:s}}function G$e(e,t,r){var n=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:s=Fje(e,6,r);var o=e.read_shift(2);e.read_shift(2),ls(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=xg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function Y$e(e,t){var r=s3(e);e.l+=16;var n=Bje(e,t-24);return[r,n]}function K$e(e){var t=Pt(24),r=wi(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Bs([t,Uje(e[1])])}function X$e(e,t){e.read_shift(2);var r=s3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(fl,""),[r,n]}function J$e(e){var t=e[1].Tooltip,r=Pt(10+2*(t.length+1));r.write_shift(2,2048);var n=wi(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Z$e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=aV[r]||r,r=e.read_shift(2),t[1]=aV[r]||r,t}function Q$e(e){return e||(e=Pt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function eBe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(vie(e));return r}function tBe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(vie(e));return r}function rBe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Sie(e,t,r){if(!r.cellStyles)return Vo(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:s,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function nBe(e,t){var r=Pt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function aBe(e,t){var r={};return t<32||(e.l+=16,r.header=jo(e),r.footer=jo(e),e.l+=2),r}function iBe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function sBe(e){for(var t=Pt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var oBe=_f,lBe=hie,cBe=hb;function uBe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function dBe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=_f(e);++e.l;var a=$g(e,t-7,r);return n.t="str",n.val=a,n}function fBe(e){var t=_f(e);++e.l;var r=jo(e);return t.t="n",t.val=r,t}function hBe(e,t,r){var n=Pt(15);return vb(n,e,t),n.write_shift(8,r,"f"),n}function pBe(e){var t=_f(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function mBe(e,t,r){var n=Pt(9);return vb(n,e,t),n.write_shift(2,r),n}function gBe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function vBe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function yBe(e,t,r){var n=e.l+t,a=_f(e),i=e.read_shift(2),s=xg(e,i,r);return e.l=n,a.t="str",a.val=s,a}var xBe=[2,3,48,49,131,139,140,245],RO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=n3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=_m(1);switch(c.type){case"base64":d=hc(Sc(o));break;case"binary":d=hc(o);break;case"buffer":case"array":d=o;break}so(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,w=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,y=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(y=d.read_shift(2));var b=d.read_shift(2),_=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),w&&(d.l+=36);for(var N=[],E={},C=Math.min(d.length,f==2?521:y-10-(m?264:0)),D=w?32:11;d.l<C&&d[d.l]!=13;)switch(E={},E.name=kO.utils.decode(_,d.slice(d.l,d.l+D)).replace(/[\u0000\r\n].*$/g,""),d.l+=D,E.type=String.fromCharCode(d.read_shift(1)),f!=2&&!w&&(E.offset=d.read_shift(4)),E.len=d.read_shift(1),f==2&&(E.offset=d.read_shift(2)),E.dec=d.read_shift(1),E.name.length&&N.push(E),f!=2&&(d.l+=w?13:14),E.type){case"B":(!m||E.len!=8)&&c.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var P=0,F=0;for(u[0]=[],F=0;F!=N.length;++F)u[0][F]=N[F].name;for(;g-- >0;){if(d[d.l]===42){d.l+=b;continue}for(++d.l,u[++P]=[],F=0,F=0;F!=N.length;++F){var L=d.slice(d.l,d.l+N[F].len);d.l+=N[F].len,so(L,0);var W=kO.utils.decode(_,L);switch(N[F].type){case"C":W.trim().length&&(u[P][F]=W.replace(/\s+$/,""));break;case"D":W.length===8?u[P][F]=new Date(+W.slice(0,4),+W.slice(4,6)-1,+W.slice(6,8)):u[P][F]=W;break;case"F":u[P][F]=parseFloat(W.trim());break;case"+":case"I":u[P][F]=w?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(W.trim().toUpperCase()){case"Y":case"T":u[P][F]=!0;break;case"N":case"F":u[P][F]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+W+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[P][F]="##MEMO##"+(w?parseInt(W.trim(),10):L.read_shift(4));break;case"N":W=W.replace(/\u0000/g,"").trim(),W&&W!="."&&(u[P][F]=+W||0);break;case"@":u[P][F]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":u[P][F]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":u[P][F]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][F]=-L.read_shift(-8,"f");break;case"B":if(m&&N[F].len==8){u[P][F]=L.read_shift(8,"f");break}case"G":case"P":L.l+=N[F].len;break;case"0":if(N[F].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[F].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=N,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Ty(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Bm(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,c){var u=c||{};if(+u.codepage>=0&&Vu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Bl(),f=u4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),w=o["!cols"]||[],g=0,y=0,b=0,_=1;for(g=0;g<h.length;++g){if(((w[g]||{}).DBF||{}).name){h[g]=w[g].DBF.name,++b;continue}if(h[g]!=null){if(++b,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(y=0;y<1024;++y)if(h.indexOf(h[g]+"_"+y)==-1){h[g]+="_"+y;break}}}}var N=ea(o["!ref"]),E=[],C=[],D=[];for(g=0;g<=N.e.c-N.s.c;++g){var P="",F="",L=0,W=[];for(y=0;y<m.length;++y)m[y][g]!=null&&W.push(m[y][g]);if(W.length==0||h[g]==null){E[g]="?";continue}for(y=0;y<W.length;++y){switch(typeof W[y]){case"number":F="B";break;case"string":F="C";break;case"boolean":F="L";break;case"object":F=W[y]instanceof Date?"D":"C";break;default:F="C"}L=Math.max(L,String(W[y]).length),P=P&&P!=F?"C":F}L>250&&(L=250),F=((w[g]||{}).DBF||{}).type,F=="C"&&w[g].DBF.len>L&&(L=w[g].DBF.len),P=="B"&&F=="N"&&(P="N",D[g]=w[g].DBF.dec,L=w[g].DBF.len),C[g]=P=="C"||F=="N"?L:i[P]||0,_+=C[g],E[g]=P}var T=d.next(32);for(T.write_shift(4,318902576),T.write_shift(4,m.length),T.write_shift(2,296+32*b),T.write_shift(2,_),g=0;g<4;++g)T.write_shift(4,0);for(T.write_shift(4,0|(+t[fae]||3)<<8),g=0,y=0;g<h.length;++g)if(h[g]!=null){var R=d.next(32),j=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,j,"sbcs"),R.write_shift(1,E[g]=="?"?"C":E[g],"sbcs"),R.write_shift(4,y),R.write_shift(1,C[g]||i[E[g]]||0),R.write_shift(1,D[g]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),y+=C[g]||i[E[g]]||0}var Y=d.next(264);for(Y.write_shift(4,13),g=0;g<65;++g)Y.write_shift(4,0);for(g=0;g<m.length;++g){var Z=d.next(_);for(Z.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(E[y]){case"L":Z.write_shift(1,m[g][y]==null?63:m[g][y]?84:70);break;case"B":Z.write_shift(8,m[g][y]||0,"f");break;case"N":var re="0";for(typeof m[g][y]=="number"&&(re=m[g][y].toFixed(D[y]||0)),b=0;b<C[y]-re.length;++b)Z.write_shift(1,32);Z.write_shift(1,re,"sbcs");break;case"D":m[g][y]?(Z.write_shift(4,("0000"+m[g][y].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(m[g][y].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+m[g][y].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var z=String(m[g][y]!=null?m[g][y]:"").slice(0,C[y]);for(Z.write_shift(1,z,"sbcs"),b=0;b<C[y]-z.length;++b)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:s}}(),Nie=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Mi(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var w=e[m];return typeof w=="number"?Oz(w):w},n=function(h,m,w){var g=m.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return g==59?h:Oz(g)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return i(Sc(h),m);case"binary":return i(h,m);case"buffer":return i(Pn&&Buffer.isBuffer(h)?h.toString("binary"):$m(h),m);case"array":return i(vg(h),m)}throw new Error("Unrecognized type "+m.type)}function i(h,m){var w=h.split(/[\n\r]+/),g=-1,y=-1,b=0,_=0,N=[],E=[],C=null,D={},P=[],F=[],L=[],W=0,T;for(+m.codepage>=0&&Vu(+m.codepage);b!==w.length;++b){W=0;var R=w[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),j=R.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),Y=j[0],Z;if(R.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&E.push(R.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,z=!1,q=!1,B=!1,G=-1,Q=-1;for(_=1;_<j.length;++_)switch(j[_].charAt(0)){case"A":break;case"X":y=parseInt(j[_].slice(1))-1,z=!0;break;case"Y":for(g=parseInt(j[_].slice(1))-1,z||(y=0),T=N.length;T<=g;++T)N[T]=[];break;case"K":Z=j[_].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Xu(Z))?isNaN(sy(Z).getDate())||(Z=ni(Z)):(Z=Xu(Z),C!==null&&Cy(C)&&(Z=i3(Z))),re=!0;break;case"E":B=!0;var O=h1(j[_].slice(1),{r:g,c:y});N[g][y]=[N[g][y],O];break;case"S":q=!0,N[g][y]=[N[g][y],"S5S"];break;case"G":break;case"R":G=parseInt(j[_].slice(1))-1;break;case"C":Q=parseInt(j[_].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}if(re&&(N[g][y]&&N[g][y].length==2?N[g][y][0]=Z:N[g][y]=Z,C=null),q){if(B)throw new Error("SYLK shared formula cannot have own formula");var J=G>-1&&N[G][Q];if(!J||!J[1])throw new Error("SYLK shared formula cannot find base");N[g][y][1]=qie(J[1],{r:g-G,c:y-Q})}break;case"F":var X=0;for(_=1;_<j.length;++_)switch(j[_].charAt(0)){case"X":y=parseInt(j[_].slice(1))-1,++X;break;case"Y":for(g=parseInt(j[_].slice(1))-1,T=N.length;T<=g;++T)N[T]=[];break;case"M":W=parseInt(j[_].slice(1))/20;break;case"F":break;case"G":break;case"P":C=E[parseInt(j[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=j[_].slice(1).split(" "),T=parseInt(L[0],10);T<=parseInt(L[1],10);++T)W=parseInt(L[2],10),F[T-1]=W===0?{hidden:!0}:{wch:W},Sm(F[T-1]);break;case"C":y=parseInt(j[_].slice(1))-1,F[y]||(F[y]={});break;case"R":g=parseInt(j[_].slice(1))-1,P[g]||(P[g]={}),W>0?(P[g].hpt=W,P[g].hpx=ly(W)):W===0&&(P[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}X<1&&(C=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}}return P.length>0&&(D["!rows"]=P),F.length>0&&(D["!cols"]=F),m&&m.sheetRows&&(N=N.slice(0,m.sheetRows)),[N,D]}function s(h,m){var w=a(h,m),g=w[0],y=w[1],b=Ty(g,m);return Mi(y).forEach(function(_){b[_]=y[_]}),b}function o(h,m){return Bm(s(h,m),m)}function c(h,m,w,g){var y="C;Y"+(w+1)+";X"+(g+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+m7(h.f,{r:w,c:g}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(h,m){m.forEach(function(w,g){var y="F;W"+(g+1)+" "+(g+1)+" ";w.hidden?y+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=kw(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Ew(w.wpx)),typeof w.wch=="number"&&(y+=Math.round(w.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function d(h,m){m.forEach(function(w,g){var y="F;";w.hidden?y+="M0;":w.hpt?y+="M"+20*w.hpt+";":w.hpx&&(y+="M"+20*Cw(w.hpx)+";"),y.length>2&&h.push(y+"R"+(g+1))})}function f(h,m){var w=["ID;PWXL;N;E"],g=[],y=ea(h["!ref"]),b,_=Array.isArray(h),N=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),h["!cols"]&&u(w,h["!cols"]),h["!rows"]&&d(w,h["!rows"]),w.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var E=y.s.r;E<=y.e.r;++E)for(var C=y.s.c;C<=y.e.c;++C){var D=tn({r:E,c:C});b=_?(h[E]||[])[C]:h[D],!(!b||b.v==null&&(!b.f||b.F))&&g.push(c(b,h,E,C))}return w.join(N)+N+g.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),Aie=function(){function e(i,s){switch(s.type){case"base64":return t(Sc(i),s);case"binary":return t(i,s);case"buffer":return t(Pn&&Buffer.isBuffer(i)?i.toString("binary"):$m(i),s);case"array":return t(vg(i),s)}throw new Error("Unrecognized type "+s.type)}function t(i,s){for(var o=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),m=h[0],w=h[1];++d;for(var g=o[d]||"";(g.match(/["]/g)||[]).length&1&&d<o.length-1;)g+=`
`+o[++d];switch(g=g.trim(),+m){case-1:if(g==="BOT"){f[++c]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[c][u]=!0:g==="FALSE"?f[c][u]=!1:isNaN(Xu(w))?isNaN(sy(w).getDate())?f[c][u]=w:f[c][u]=ni(w):f[c][u]=Xu(w),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[c][u++]=g!==""?g:null;break}if(g==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(i,s){return Ty(e(i,s),s)}function n(i,s){return Bm(r(i,s),s)}var a=function(){var i=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},s=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=ea(c["!ref"]),f,h=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){s(u,-1,0,"BOT");for(var w=d.s.c;w<=d.e.c;++w){var g=tn({r:m,c:w});if(f=h?(c[m]||[])[w]:c[g],!f){s(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?s(u,1,0,"="+f.f):s(u,1,0,""):s(u,0,y,"V");break;case"b":s(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=au(f.z||Jr[14],_s(ni(f.v)))),s(u,0,f.w,"V");break;default:s(u,1,0,"")}}}s(u,-1,0,"EOD");var b=`\r
`,_=u.join(b);return _}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),kie=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),w=-1,g=-1,y=0,b=[];y!==m.length;++y){var _=m[y].trim().split(":");if(_[0]==="cell"){var N=wi(_[1]);if(b.length<=N.r)for(w=b.length;w<=N.r;++w)b[w]||(b[w]=[]);switch(w=N.r,g=N.c,_[2]){case"t":b[w][g]=e(_[3]);break;case"v":b[w][g]=+_[3];break;case"vtf":var E=_[_.length-1];case"vtc":switch(_[3]){case"nl":b[w][g]=!!+_[4];break;default:b[w][g]=+_[4];break}_[2]=="vtf"&&(b[w][g]=[b[w][g],E])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return Ty(r(f,h),h)}function a(f,h){return Bm(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],w,g="",y=Ul(f["!ref"]),b=Array.isArray(f),_=y.s.r;_<=y.e.r;++_)for(var N=y.s.c;N<=y.e.c;++N)if(g=tn({r:_,c:N}),w=b?(f[_]||[])[N]:f[g],!(!w||w.v==null||w.t==="z")){switch(m=["cell",g,"t"],w.t){case"s":case"str":m.push(t(w.v));break;case"n":w.f?(m[2]="vtf",m[3]="n",m[4]=w.v,m[5]=t(w.f)):(m[2]="v",m[3]=w.v);break;case"b":m[2]="vt"+(w.f?"f":"c"),m[3]="nl",m[4]=w.v?"1":"0",m[5]=t(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var E=_s(ni(w.v));m[2]="vtc",m[3]="nd",m[4]=""+E,m[5]=w.w||au(w.z||Jr[14],E);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,s,o,s,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),oy=function(){function e(d,f,h,m,w){w.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Xu(d))?isNaN(sy(d).getDate())?f[h][m]=d:f[h][m]=ni(d):f[h][m]=Xu(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var w=d.split(/[\r\n]/),g=w.length-1;g>=0&&w[g].length===0;)--g;for(var y=10,b=0,_=0;_<=g;++_)b=w[_].indexOf(" "),b==-1?b=w[_].length:b++,y=Math.max(y,b);for(_=0;_<=g;++_){m[_]=[];var N=0;for(e(w[_].slice(0,y).trim(),m,_,N,h),N=1;N<=(w[_].length-y)/10+1;++N)e(w[_].slice(y+(N-1)*10,y+N*10).trim(),m,_,N,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,w=0;m<d.length;++m)(w=d.charCodeAt(m))==34?h=!h:!h&&w in r&&(f[w]=(f[w]||0)+1);w=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&w.push([f[m],m]);if(!w.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&w.push([f[m],m])}return w.sort(function(g,y){return g[0]-y[0]||n[g[1]]-n[y[1]]}),r[w.pop()[1]]||44}function i(d,f){var h=f||{},m="",w=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var y=0,b=0,_=0,N=0,E=0,C=m.charCodeAt(0),D=!1,P=0,F=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var L=h.dateNF!=null?i9e(h.dateNF):null;function W(){var T=d.slice(N,E),R={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)R.t="z";else if(h.raw)R.t="s",R.v=T;else if(T.trim().length===0)R.t="s",R.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(R.t="s",R.v=T.slice(2,-1).replace(/""/g,'"')):Rqe(T)?(R.t="n",R.f=T.slice(1)):(R.t="s",R.v=T);else if(T=="TRUE")R.t="b",R.v=!0;else if(T=="FALSE")R.t="b",R.v=!1;else if(!isNaN(_=Xu(T)))R.t="n",h.cellText!==!1&&(R.w=T),R.v=_;else if(!isNaN(sy(T).getDate())||L&&T.match(L)){R.z=h.dateNF||Jr[14];var j=0;L&&T.match(L)&&(T=s9e(T,h.dateNF,T.match(L)||[]),j=1),h.cellDates?(R.t="d",R.v=ni(T,j)):(R.t="n",R.v=_s(ni(T,j))),h.cellText!==!1&&(R.w=au(R.z,R.v instanceof Date?_s(R.v):R.v)),h.cellNF||delete R.z}else R.t="s",R.v=T;if(R.t=="z"||(h.dense?(w[y]||(w[y]=[]),w[y][b]=R):w[tn({c:b,r:y})]=R),N=E+1,F=d.charCodeAt(N),g.e.c<b&&(g.e.c=b),g.e.r<y&&(g.e.r=y),P==C)++b;else if(b=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;E<d.length;++E)switch(P=d.charCodeAt(E)){case 34:F===34&&(D=!D);break;case C:case 10:case 13:if(!D&&W())break e;break}return E-N>0&&W(),w["!ref"]=wn(g),w}function s(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):Ty(t(d,f),f)}function o(d,f){var h="",m=f.type=="string"?[0,0,0,0]:S7(d,f);switch(f.type){case"base64":h=Sc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):(f.codepage,h=Pn&&Buffer.isBuffer(d)?d.toString("binary"):$m(d));break;case"array":h=vg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Da(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Da(h):f.type=="binary",h.slice(0,19)=="socialcalc:version:"?kie.to_sheet(f.type=="string"?h:Da(h),f):s(h,f)}function c(d,f){return Bm(o(d,f),f)}function u(d){for(var f=[],h=ea(d["!ref"]),m,w=Array.isArray(d),g=h.s.r;g<=h.e.r;++g){for(var y=[],b=h.s.c;b<=h.e.c;++b){var _=tn({r:g,c:b});if(m=w?(d[g]||[])[b]:d[_],!m||m.v==null){y.push("          ");continue}for(var N=(m.w||(kh(m),m.w)||"").slice(0,10);N.length<10;)N+=" ";y.push(N+(b===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function wBe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=Nie.to_workbook(e,r);return r.WTF=n,a}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return oy.to_workbook(e,t)}}var X0=function(){function e(O,J,X){if(O){so(O,O.l||0);for(var ne=X.Enum||G;O.l<O.length;){var ie=O.read_shift(2),oe=ne[ie]||ne[65535],de=O.read_shift(2),V=O.l+de,se=oe.f&&oe.f(O,de,X);if(O.l=V,J(se,oe,ie))return}}}function t(O,J){switch(J.type){case"base64":return r(hc(Sc(O)),J);case"binary":return r(hc(O),J);case"buffer":case"array":return r(O,J)}throw"Unsupported type "+J.type}function r(O,J){if(!O)return O;var X=J||{},ne=X.dense?[]:{},ie="Sheet1",oe="",de=0,V={},se=[],fe=[],te={s:{r:0,c:0},e:{r:0,c:0}},ke=X.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)X.Enum=G,e(O,function(Ge,pt,it){switch(it){case 0:X.vers=Ge,Ge>=4096&&(X.qpro=!0);break;case 6:te=Ge;break;case 204:Ge&&(oe=Ge);break;case 222:oe=Ge;break;case 15:case 51:X.qpro||(Ge[1].v=Ge[1].v.slice(1));case 13:case 14:case 16:it==14&&(Ge[2]&112)==112&&(Ge[2]&15)>1&&(Ge[2]&15)<15&&(Ge[1].z=X.dateNF||Jr[14],X.cellDates&&(Ge[1].t="d",Ge[1].v=i3(Ge[1].v))),X.qpro&&Ge[3]>de&&(ne["!ref"]=wn(te),V[ie]=ne,se.push(ie),ne=X.dense?[]:{},te={s:{r:0,c:0},e:{r:0,c:0}},de=Ge[3],ie=oe||"Sheet"+(de+1),oe="");var Le=X.dense?(ne[Ge[0].r]||[])[Ge[0].c]:ne[tn(Ge[0])];if(Le){Le.t=Ge[1].t,Le.v=Ge[1].v,Ge[1].z!=null&&(Le.z=Ge[1].z),Ge[1].f!=null&&(Le.f=Ge[1].f);break}X.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[tn(Ge[0])]=Ge[1];break}},X);else if(O[2]==26||O[2]==14)X.Enum=Q,O[2]==14&&(X.qpro=!0,O.l=0),e(O,function(Ge,pt,it){switch(it){case 204:ie=Ge;break;case 22:Ge[1].v=Ge[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ge[3]>de&&(ne["!ref"]=wn(te),V[ie]=ne,se.push(ie),ne=X.dense?[]:{},te={s:{r:0,c:0},e:{r:0,c:0}},de=Ge[3],ie="Sheet"+(de+1)),ke>0&&Ge[0].r>=ke)break;X.dense?(ne[Ge[0].r]||(ne[Ge[0].r]=[]),ne[Ge[0].r][Ge[0].c]=Ge[1]):ne[tn(Ge[0])]=Ge[1],te.e.c<Ge[0].c&&(te.e.c=Ge[0].c),te.e.r<Ge[0].r&&(te.e.r=Ge[0].r);break;case 27:Ge[14e3]&&(fe[Ge[14e3][0]]=Ge[14e3][1]);break;case 1537:fe[Ge[0]]=Ge[1],Ge[0]==de&&(ie=Ge[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(ne["!ref"]=wn(te),V[oe||ie]=ne,se.push(oe||ie),!fe.length)return{SheetNames:se,Sheets:V};for(var Re={},Ce=[],ve=0;ve<fe.length;++ve)V[se[ve]]?(Ce.push(fe[ve]||se[ve]),Re[fe[ve]]=V[fe[ve]]||V[se[ve]]):(Ce.push(fe[ve]),Re[fe[ve]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:Re}}function n(O,J){var X=J||{};if(+X.codepage>=0&&Vu(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Bl(),ie=ea(O["!ref"]),oe=Array.isArray(O),de=[];nr(ne,0,i(1030)),nr(ne,6,c(ie));for(var V=Math.min(ie.e.r,8191),se=ie.s.r;se<=V;++se)for(var fe=Qi(se),te=ie.s.c;te<=ie.e.c;++te){se===ie.s.r&&(de[te]=xi(te));var ke=de[te]+fe,Re=oe?(O[se]||[])[te]:O[ke];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?nr(ne,13,m(se,te,Re.v)):nr(ne,14,g(se,te,Re.v));else{var Ce=kh(Re);nr(ne,15,f(se,te,Ce.slice(0,239)))}}return nr(ne,1),ne.end()}function a(O,J){var X=J||{};if(+X.codepage>=0&&Vu(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Bl();nr(ne,0,s(O));for(var ie=0,oe=0;ie<O.SheetNames.length;++ie)(O.Sheets[O.SheetNames[ie]]||{})["!ref"]&&nr(ne,27,B(O.SheetNames[ie],oe++));var de=0;for(ie=0;ie<O.SheetNames.length;++ie){var V=O.Sheets[O.SheetNames[ie]];if(!(!V||!V["!ref"])){for(var se=ea(V["!ref"]),fe=Array.isArray(V),te=[],ke=Math.min(se.e.r,8191),Re=se.s.r;Re<=ke;++Re)for(var Ce=Qi(Re),ve=se.s.c;ve<=se.e.c;++ve){Re===se.s.r&&(te[ve]=xi(ve));var Ge=te[ve]+Ce,pt=fe?(V[Re]||[])[ve]:V[Ge];if(!(!pt||pt.t=="z"))if(pt.t=="n")nr(ne,23,W(Re,ve,de,pt.v));else{var it=kh(pt);nr(ne,22,P(Re,ve,de,it.slice(0,239)))}}++de}}return nr(ne,1),ne.end()}function i(O){var J=Pt(2);return J.write_shift(2,O),J}function s(O){var J=Pt(26);J.write_shift(2,4096),J.write_shift(2,4),J.write_shift(4,0);for(var X=0,ne=0,ie=0,oe=0;oe<O.SheetNames.length;++oe){var de=O.SheetNames[oe],V=O.Sheets[de];if(!(!V||!V["!ref"])){++ie;var se=Ul(V["!ref"]);X<se.e.r&&(X=se.e.r),ne<se.e.c&&(ne=se.e.c)}}return X>8191&&(X=8191),J.write_shift(2,X),J.write_shift(1,ie),J.write_shift(1,ne),J.write_shift(2,0),J.write_shift(2,0),J.write_shift(1,1),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(4,0),J}function o(O,J,X){var ne={s:{c:0,r:0},e:{c:0,r:0}};return J==8&&X.qpro?(ne.s.c=O.read_shift(1),O.l++,ne.s.r=O.read_shift(2),ne.e.c=O.read_shift(1),O.l++,ne.e.r=O.read_shift(2),ne):(ne.s.c=O.read_shift(2),ne.s.r=O.read_shift(2),J==12&&X.qpro&&(O.l+=2),ne.e.c=O.read_shift(2),ne.e.r=O.read_shift(2),J==12&&X.qpro&&(O.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function c(O){var J=Pt(8);return J.write_shift(2,O.s.c),J.write_shift(2,O.s.r),J.write_shift(2,O.e.c),J.write_shift(2,O.e.r),J}function u(O,J,X){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(ne[0].c=O.read_shift(1),ne[3]=O.read_shift(1),ne[0].r=O.read_shift(2),O.l+=2):(ne[2]=O.read_shift(1),ne[0].c=O.read_shift(2),ne[0].r=O.read_shift(2)),ne}function d(O,J,X){var ne=O.l+J,ie=u(O,J,X);if(ie[1].t="s",X.vers==20768){O.l++;var oe=O.read_shift(1);return ie[1].v=O.read_shift(oe,"utf8"),ie}return X.qpro&&O.l++,ie[1].v=O.read_shift(ne-O.l,"cstr"),ie}function f(O,J,X){var ne=Pt(7+X.length);ne.write_shift(1,255),ne.write_shift(2,J),ne.write_shift(2,O),ne.write_shift(1,39);for(var ie=0;ie<ne.length;++ie){var oe=X.charCodeAt(ie);ne.write_shift(1,oe>=128?95:oe)}return ne.write_shift(1,0),ne}function h(O,J,X){var ne=u(O,J,X);return ne[1].v=O.read_shift(2,"i"),ne}function m(O,J,X){var ne=Pt(7);return ne.write_shift(1,255),ne.write_shift(2,J),ne.write_shift(2,O),ne.write_shift(2,X,"i"),ne}function w(O,J,X){var ne=u(O,J,X);return ne[1].v=O.read_shift(8,"f"),ne}function g(O,J,X){var ne=Pt(13);return ne.write_shift(1,255),ne.write_shift(2,J),ne.write_shift(2,O),ne.write_shift(8,X,"f"),ne}function y(O,J,X){var ne=O.l+J,ie=u(O,J,X);if(ie[1].v=O.read_shift(8,"f"),X.qpro)O.l=ne;else{var oe=O.read_shift(2);E(O.slice(O.l,O.l+oe),ie),O.l+=oe}return ie}function b(O,J,X){var ne=J&32768;return J&=-32769,J=(ne?O:0)+(J>=8192?J-16384:J),(ne?"":"$")+(X?xi(J):Qi(J))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(O,J){so(O,0);for(var X=[],ne=0,ie="",oe="",de="",V="";O.l<O.length;){var se=O[O.l++];switch(se){case 0:X.push(O.read_shift(8,"f"));break;case 1:oe=b(J[0].c,O.read_shift(2),!0),ie=b(J[0].r,O.read_shift(2),!1),X.push(oe+ie);break;case 2:{var fe=b(J[0].c,O.read_shift(2),!0),te=b(J[0].r,O.read_shift(2),!1);oe=b(J[0].c,O.read_shift(2),!0),ie=b(J[0].r,O.read_shift(2),!1),X.push(fe+te+":"+oe+ie)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(O.read_shift(2));break;case 6:{for(var ke="";se=O[O.l++];)ke+=String.fromCharCode(se);X.push('"'+ke.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:V=X.pop(),de=X.pop(),X.push(["AND","OR"][se-20]+"("+de+","+V+")");break;default:if(se<32&&N[se])V=X.pop(),de=X.pop(),X.push(de+N[se]+V);else if(_[se]){if(ne=_[se][1],ne==69&&(ne=O[O.l++]),ne>X.length){console.error("WK1 bad formula parse 0x"+se.toString(16)+":|"+X.join("|")+"|");return}var Re=X.slice(-ne);X.length-=ne,X.push(_[se][0]+"("+Re.join(",")+")")}else return se<=7?console.error("WK1 invalid opcode "+se.toString(16)):se<=24?console.error("WK1 unsupported op "+se.toString(16)):se<=30?console.error("WK1 invalid opcode "+se.toString(16)):se<=115?console.error("WK1 unsupported function opcode "+se.toString(16)):console.error("WK1 unrecognized opcode "+se.toString(16))}}X.length==1?J[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function C(O){var J=[{c:0,r:0},{t:"n",v:0},0];return J[0].r=O.read_shift(2),J[3]=O[O.l++],J[0].c=O[O.l++],J}function D(O,J){var X=C(O);return X[1].t="s",X[1].v=O.read_shift(J-4,"cstr"),X}function P(O,J,X,ne){var ie=Pt(6+ne.length);ie.write_shift(2,O),ie.write_shift(1,X),ie.write_shift(1,J),ie.write_shift(1,39);for(var oe=0;oe<ne.length;++oe){var de=ne.charCodeAt(oe);ie.write_shift(1,de>=128?95:de)}return ie.write_shift(1,0),ie}function F(O,J){var X=C(O);X[1].v=O.read_shift(2);var ne=X[1].v>>1;if(X[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return X[1].v=ne,X}function L(O,J){var X=C(O),ne=O.read_shift(4),ie=O.read_shift(4),oe=O.read_shift(2);if(oe==65535)return ne===0&&ie===3221225472?(X[1].t="e",X[1].v=15):ne===0&&ie===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var de=oe&32768;return oe=(oe&32767)-16446,X[1].v=(1-de*2)*(ie*Math.pow(2,oe+32)+ne*Math.pow(2,oe)),X}function W(O,J,X,ne){var ie=Pt(14);if(ie.write_shift(2,O),ie.write_shift(1,X),ie.write_shift(1,J),ne==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var oe=0,de=0,V=0,se=0;return ne<0&&(oe=1,ne=-ne),de=Math.log2(ne)|0,ne/=Math.pow(2,de-31),se=ne>>>0,(se&2147483648)==0&&(ne/=2,++de,se=ne>>>0),ne-=se,se|=2147483648,se>>>=0,ne*=Math.pow(2,32),V=ne>>>0,ie.write_shift(4,V),ie.write_shift(4,se),de+=16383+(oe?32768:0),ie.write_shift(2,de),ie}function T(O,J){var X=L(O);return O.l+=J-14,X}function R(O,J){var X=C(O),ne=O.read_shift(4);return X[1].v=ne>>6,X}function j(O,J){var X=C(O),ne=O.read_shift(8,"f");return X[1].v=ne,X}function Y(O,J){var X=j(O);return O.l+=J-10,X}function Z(O,J){return O[O.l+J-1]==0?O.read_shift(J,"cstr"):""}function re(O,J){var X=O[O.l++];X>J-1&&(X=J-1);for(var ne="";ne.length<X;)ne+=String.fromCharCode(O[O.l++]);return ne}function z(O,J,X){if(!(!X.qpro||J<21)){var ne=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var ie=O.read_shift(J-21,"cstr");return[ne,ie]}}function q(O,J){for(var X={},ne=O.l+J;O.l<ne;){var ie=O.read_shift(2);if(ie==14e3){for(X[ie]=[0,""],X[ie][0]=O.read_shift(2);O[O.l];)X[ie][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return X}function B(O,J){var X=Pt(5+O.length);X.write_shift(2,14e3),X.write_shift(2,J);for(var ne=0;ne<O.length;++ne){var ie=O.charCodeAt(ne);X[X.l++]=ie>127?95:ie}return X[X.l++]=0,X}var G={0:{n:"BOF",f:ls},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:F},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function bBe(e){var t={},r=e.match(Ho),n=0,a=!1;if(r)for(;n!=r.length;++n){var i=sn(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=BR[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var _Be=function(){var e=bw("t"),t=bw("rPr");function r(i){var s=i.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Qn(s[1])},c=i.match(t);return c&&(o.s=bBe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),SBe=function(){var t=/(\r\n|\n)/g;function r(a,i,s){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),a.b&&(i.push("<b>"),s.push("</b>")),a.i&&(i.push("<i>"),s.push("</i>")),a.strike&&(i.push("<s>"),s.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),s.push("</"+c+">")),s.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),NBe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ABe=/<(?:\w+:)?r>/,kBe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function u7(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Qn(Da(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Da(e),r&&(n.h=XR(n.t))):e.match(ABe)&&(n.r=Da(e),n.t=Qn(Da((e.replace(kBe,"").match(NBe)||[]).join("").replace(Ho,""))),r&&(n.h=SBe(_Be(n.r)))),n):{t:""}}var EBe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,CBe=/<(?:\w+:)?(?:si|sstItem)>/g,PBe=/<\/(?:\w+:)?(?:si|sstItem)>/;function TBe(e,t){var r=[],n="";if(!e)return r;var a=e.match(EBe);if(a){n=a[2].replace(CBe,"").split(PBe);for(var i=0;i!=n.length;++i){var s=u7(n[i].trim(),t);s!=null&&(r[r.length]=s)}a=sn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var OBe=/^\s|\s$|[\t\n\r]/;function Eie(e,t){if(!t.bookSST)return"";var r=[ts];r[r.length]=rr("sst",null,{xmlns:Rg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(OBe)&&(i+=' xml:space="preserve"'),i+=">"+Pa(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function DBe(e){return[e.read_shift(4),e.read_shift(4)]}function IBe(e,t){var r=[],n=!1;return jh(e,function(i,s,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function RBe(e,t){return t||(t=Pt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var MBe=V9e;function FBe(e){var t=Bl();jt(t,159,RBe(e));for(var r=0;r<e.length;++r)jt(t,19,MBe(e[r]));return jt(t,160),t.end()}function Cie(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function vh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function LBe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=vh(e,4),t.U=vh(e,4),t.W=vh(e,4),t}function jBe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function $Be(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(jBe(e));return t}function BBe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function UBe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=vh(e,4),t.U=vh(e,4),t.W=vh(e,4),t}function qBe(e){var t=UBe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Pie(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Tie(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function WBe(e){var t=vh(e);switch(t.Minor){case 2:return[t.Minor,zBe(e)];case 3:return[t.Minor,VBe()];case 4:return[t.Minor,HBe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function zBe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Pie(e,r),a=Tie(e,e.length-e.l);return{t:"Std",h:n,v:a}}function VBe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function HBe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Ho,function(i){var s=sn(i);switch(bf(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function GBe(e,t){var r={},n=r.EncryptionVersionInfo=vh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=Pie(e,a),t-=a,r.EncryptionVerifier=Tie(e,t),r}function YBe(e){var t={},r=t.EncryptionVersionInfo=vh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function d7(e){var t=0,r,n=Cie(e),a=n.length+1,i,s,o,c,u;for(r=_m(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)s=r[i],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^s;return t^52811}var Oie=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},a=function(s,o){return n(s^o)},i=function(s){for(var o=t[s.length-1],c=104,u=s.length-1;u>=0;--u)for(var d=s[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(s){for(var o=Cie(s),c=i(o),u=o.length,d=_m(16),f=0;f!=16;++f)d[f]=0;var h,m,w;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,m=o[o.length-1],d[u]=a(m,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,w=15-o.length;w>0;)h=c>>8,d[u]=a(e[w],h),--u,--w,h=c&255,d[u]=a(o[u],h),--u,--w;return d}}(),KBe=function(e,t,r,n,a){a||(a=t),n||(n=Oie(e));var i,s;for(i=0;i!=t.length;++i)s=t[i],s^=n[r],s=(s>>5|s<<3)&255,a[i]=s,++r;return[a,r,n]},XBe=function(e){var t=0,r=Oie(e);return function(n){var a=KBe("",n,t,r);return t=a[1],a[0]}};function JBe(e,t,r,n){var a={key:ls(e),verificationBytes:ls(e)};return r.password&&(a.verifier=d7(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=XBe(r.password)),a}function ZBe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=YBe(e):n.Data=GBe(e,t),n}function QBe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?ZBe(e,t-2,n):JBe(e,r.biff>=8?t:t-2,r,n),n}var Die=function(){function e(a,i){switch(i.type){case"base64":return t(Sc(a),i);case"binary":return t(a,i);case"buffer":return t(Pn&&Buffer.isBuffer(a)?a.toString("binary"):$m(a),i);case"array":return t(vg(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var s=i||{},o=s.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,m=0,w,g=-1;w=h.exec(d);){switch(w[0]){case"\\cell":var y=d.slice(m,h.lastIndex-w[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var b={v:y,t:"s"};Array.isArray(o)?o[f][g]=b:o[tn({r:f,c:g})]=b}break}m=h.lastIndex}g>u.e.c&&(u.e.c=g)}),o["!ref"]=wn(u),o}function r(a,i){return Bm(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],s=ea(a["!ref"]),o,c=Array.isArray(a),u=s.s.r;u<=s.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=s.s.c;d<=s.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=s.s.c;d<=s.e.c;++d){var f=tn({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(kh(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function eUe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Aw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function tUe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),i=Math.min(t,r,n),s=a-i;if(s===0)return[0,0,t];var o=0,c=0,u=a+i;switch(c=s/(u>1?2-u:u),a){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,c,u/2]}function rUe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),i=n-a/2,s=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,s[0]+=a,s[1]+=c;break;case 1:c=a*(2-o),s[0]+=c,s[1]+=a;break;case 2:c=a*(o-2),s[1]+=a,s[2]+=c;break;case 3:c=a*(4-o),s[1]+=c,s[2]+=a;break;case 4:c=a*(o-4),s[2]+=a,s[0]+=c;break;case 5:c=a*(6-o),s[2]+=c,s[0]+=a;break}for(var u=0;u!=3;++u)s[u]=Math.round(s[u]*255);return s}function l4(e,t){if(t===0)return e;var r=tUe(eUe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Aw(rUe(r))}var Iie=6,nUe=15,aUe=1,Mo=Iie;function kw(e){return Math.floor((e+Math.round(128/Mo)/256)*Mo)}function Ew(e){return Math.floor((e-5)/Mo*100+.5)/100}function c4(e){return Math.round((e*Mo+5)/Mo*256)/256}function xT(e){return c4(Ew(kw(e)))}function f7(e){var t=Math.abs(e-xT(e)),r=Mo;if(t>.005)for(Mo=aUe;Mo<nUe;++Mo)Math.abs(e-xT(e))<=t&&(t=Math.abs(e-xT(e)),r=Mo);Mo=r}function Sm(e){e.width?(e.wpx=kw(e.width),e.wch=Ew(e.wpx),e.MDW=Mo):e.wpx?(e.wch=Ew(e.wpx),e.width=c4(e.wch),e.MDW=Mo):typeof e.wch=="number"&&(e.width=c4(e.wch),e.wpx=kw(e.width),e.MDW=Mo),e.customWidth&&delete e.customWidth}var iUe=96,Rie=iUe;function Cw(e){return e*96/Rie}function ly(e){return e*Rie/96}var sUe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function oUe(e,t,r,n){t.Borders=[];var a={},i=!1;(e[0].match(Ho)||[]).forEach(function(s){var o=sn(s);switch(bf(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=ei(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=ei(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function lUe(e,t,r,n){t.Fills=[];var a={},i=!1;(e[0].match(Ho)||[]).forEach(function(s){var o=sn(s);switch(bf(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function cUe(e,t,r,n){t.Fonts=[];var a={},i=!1;(e[0].match(Ho)||[]).forEach(function(s){var o=sn(s);switch(bf(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Da(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?ei(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?ei(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?ei(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?ei(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?ei(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?ei(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?ei(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=BR[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=ei(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Y0[a.color.index];a.color.index==81&&(c=Y0[1]),c||(c=Y0[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=l4(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function uUe(e,t,r){t.NumberFmt=[];for(var n=Mi(Jr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Jr[n[a]];var i=e[0].match(Ho);if(i)for(a=0;a<i.length;++a){var s=sn(i[a]);switch(bf(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Qn(Da(s.formatCode)),c=parseInt(s.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}gh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function dUe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=rr("numFmt",null,{numFmtId:n,formatCode:Pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=rr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var q_=["numFmtId","fillId","fontId","borderId","xfId"],W_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function fUe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(Ho)||[]).forEach(function(i){var s=sn(i),o=0;switch(bf(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<q_.length;++o)n[q_[o]]&&(n[q_[o]]=parseInt(n[q_[o]],10));for(o=0;o<W_.length;++o)n[W_[o]]&&(n[W_[o]]=ei(n[W_[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};s.vertical&&(c.vertical=s.vertical),s.horizontal&&(c.horizontal=s.horizontal),s.textRotation!=null&&(c.textRotation=s.textRotation),s.indent&&(c.indent=s.indent),s.wrapText&&(c.wrapText=ei(s.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function hUe(e){var t=[];return t[t.length]=rr("cellXfs",null),e.forEach(function(r){t[t.length]=rr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=rr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var pUe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&uUe(f,d,u),(f=o.match(a))&&cUe(f,d,c,u),(f=o.match(n))&&lUe(f,d,c,u),(f=o.match(i))&&oUe(f,d,c,u),(f=o.match(r))&&fUe(f,d,u),d}}();function Mie(e,t){var r=[ts,rr("styleSheet",null,{xmlns:Rg[0],"xmlns:vt":ws.vt})],n;return e.SSF&&(n=dUe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=hUe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function mUe(e,t){var r=e.read_shift(2),n=Bo(e);return[r,n]}function gUe(e,t,r){r||(r=Pt(6+4*t.length)),r.write_shift(2,e),qs(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function vUe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Z9e(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=J9e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Bo(e),n}function yUe(e,t){t||(t=Pt(25+4*32)),t.write_shift(2,e.sz*20),Q9e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),i4(e.color,t);var n=0;return n=2,t.write_shift(1,n),qs(e.name,t),t.length>t.l?t.slice(0,t.l):t}var xUe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],wT,wUe=Vo;function bV(e,t){t||(t=Pt(4*3+8*7+16*1)),wT||(wT=n3(xUe));var r=wT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(i4({auto:1},t),i4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function bUe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Fie(e,t,r){r||(r=Pt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function _2(e,t){return t||(t=Pt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var _Ue=Vo;function SUe(e,t){return t||(t=Pt(51)),t.write_shift(1,0),_2(null,t),_2(null,t),_2(null,t),_2(null,t),_2(null,t),t.length>t.l?t.slice(0,t.l):t}function NUe(e,t){return t||(t=Pt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),a4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function AUe(e,t,r){var n=Pt(2052);return n.write_shift(4,e),a4(t,n),a4(r,n),n.length>n.l?n.slice(0,n.l):n}function kUe(e,t,r){var n={};n.NumberFmt=[];for(var a in Jr)n.NumberFmt[a]=Jr[a];n.CellXf=[],n.Fonts=[];var i=[],s=!1;return jh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],gh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=l4(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:i.push(d),s=!0;break;case 38:i.pop(),s=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!s||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function EUe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(jt(e,615,Ju(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&jt(e,44,gUe(a,t[a]))}),jt(e,616))}}function CUe(e){var t=1;jt(e,611,Ju(t)),jt(e,43,yUe({sz:12,color:{theme:1},name:"Calibri",family:2})),jt(e,612)}function PUe(e){var t=2;jt(e,603,Ju(t)),jt(e,45,bV({patternType:"none"})),jt(e,45,bV({patternType:"gray125"})),jt(e,604)}function TUe(e){var t=1;jt(e,613,Ju(t)),jt(e,46,SUe()),jt(e,614)}function OUe(e){var t=1;jt(e,626,Ju(t)),jt(e,47,Fie({numFmtId:0},65535)),jt(e,627)}function DUe(e,t){jt(e,617,Ju(t.length)),t.forEach(function(r){jt(e,47,Fie(r,0))}),jt(e,618)}function IUe(e){var t=1;jt(e,619,Ju(t)),jt(e,48,NUe({xfId:0,name:"Normal"})),jt(e,620)}function RUe(e){var t=0;jt(e,505,Ju(t)),jt(e,506)}function MUe(e){var t=0;jt(e,508,AUe(t,"TableStyleMedium9","PivotStyleMedium4")),jt(e,509)}function FUe(e,t){var r=Bl();return jt(r,278),EUe(r,e.SSF),CUe(r),PUe(r),TUe(r),OUe(r),DUe(r,t.cellXfs),IUe(r),RUe(r),MUe(r),jt(r,279),r.end()}var LUe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function jUe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Ho)||[]).forEach(function(a){var i=sn(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[LUe.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function $Ue(){}function BUe(){}var UUe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,qUe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,WUe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zUe(e,t,r){t.themeElements={};var n;[["clrScheme",UUe,jUe],["fontScheme",qUe,$Ue],["fmtScheme",WUe,BUe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var VUe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Lie(e,t){(!e||e.length===0)&&(e=h7());var r,n={};if(!(r=e.match(VUe)))throw new Error("themeElements not found in theme");return zUe(r[0],n,t),n.raw=e,n}function h7(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ts];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function HUe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var s;try{s=Pae(i,{type:"array"})}catch{return}var o=pc(s,"theme/theme/theme1.xml",!0);if(o)return Lie(o,r)}}function GUe(e){return e.read_shift(4)}function YUe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=KUe(e,4);break;case 2:t.xclrValue=gie(e);break;case 3:t.xclrValue=GUe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function KUe(e,t){return Vo(e,t)}function XUe(e,t){return Vo(e,t)}function JUe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=YUe(e);break;case 6:n[1]=XUe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function ZUe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(JUe(e,r-e.l));return{ixfe:n,ext:i}}function QUe(e,t){t.forEach(function(r){r[0]})}function eqe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Bo(e)}}function tqe(e){var t=Pt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),qs(e.name,t),t.slice(0,t.l)}function rqe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function nqe(e){var t=Pt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function aqe(e,t){var r=Pt(8+2*t.length);return r.write_shift(4,e),qs(t,r),r.slice(0,r.l)}function iqe(e){return e.l+=4,e.read_shift(4)!=0}function sqe(e,t){var r=Pt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function oqe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},i=[],s=!1,o=2;return jh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(d),s=!0;break;case 36:i.pop(),s=!1;break;default:if(!u.T){if(!s||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function lqe(){var e=Bl();return jt(e,332),jt(e,334,Ju(1)),jt(e,335,tqe({name:"XLDAPR",version:12e4,flags:3496657072})),jt(e,336),jt(e,339,aqe(1,"XLDAPR")),jt(e,52),jt(e,35,Ju(514)),jt(e,4096,Ju(0)),jt(e,4097,Kc(1)),jt(e,36),jt(e,53),jt(e,340),jt(e,337,sqe(1)),jt(e,51,nqe([[1,0]])),jt(e,338),jt(e,333),e.end()}function cqe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,s;return e.replace(Ho,function(o){var c=sn(o);switch(bf(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(s=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function jie(){var e=[ts];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function uqe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ho)||[]).forEach(function(n){var a=sn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function dqe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=tn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function fqe(e,t,r){var n=[];return jh(e,function(i,s,o){switch(o){case 63:n.push(i);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function hqe(e,t,r,n){if(!e)return e;var a=n||{},i=!1;jh(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function pqe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Yv=1024;function $ie(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[rr("xml",null,{"xmlns:v":cc.v,"xmlns:o":cc.o,"xmlns:x":cc.x,"xmlns:mv":cc.mv}).replace(/\/>/,">"),rr("o:shapelayout",rr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),rr("v:shapetype",[rr("v:stroke",null,{joinstyle:"miter"}),rr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Yv<e*1e3;)Yv+=1e3;return t.forEach(function(i){var s=wi(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?rr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=rr("v:fill",c,o),d={on:"t",obscured:"t"};++Yv,a=a.concat(["<v:shape"+_w({id:"_x0000_s"+Yv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,rr("v:shadow",null,d),rr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",lo("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),lo("x:AutoFill","False"),lo("x:Row",String(s.r)),lo("x:Column",String(s.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function _V(e,t,r,n){var a=Array.isArray(e),i;t.forEach(function(s){var o=wi(s.ref);if(a?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[s.ref],!i){i={t:"z"},a?e[o.r][o.c]=i:e[s.ref]=i;var c=ea(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=wn(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:s.author,t:s.t,r:s.r,T:r};s.h&&(d.h=s.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}i.c.push(d)})}function mqe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=sn(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=wi(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&u7(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Bie(e){var t=[ts,rr("comments",null,{xmlns:Rg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=Pa(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Pa(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(lo("t",Pa(i[0]||"")));else{for(var s=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)s+=`Reply:
    `+i[o]+`
`;t.push(lo("t",Pa(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function gqe(e,t){var r=[],n=!1,a={},i=0;return e.replace(Ho,function(o,c){var u=sn(o);switch(bf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":a.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function vqe(e,t,r){var n=[ts,rr("ThreadedComments",null,{xmlns:ws.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&t.indexOf(s.a)==-1&&t.push(s.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,s.ID=c.id,s.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(rr("threadedComment",lo("text",s.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function yqe(e,t){var r=[],n=!1;return e.replace(Ho,function(i){var s=sn(i);switch(bf(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return i}),r}function xqe(e){var t=[ts,rr("personList",null,{xmlns:ws.TCMNT,"xmlns:x":Rg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(rr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function wqe(e){var t={};t.iauthor=e.read_shift(4);var r=jg(e);return t.rfx=r.s,t.ref=tn(r.s),e.l+=16,t}function bqe(e,t){return t==null&&(t=Pt(36)),t.write_shift(4,e[1].iauthor),Oy(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var _qe=Bo;function Sqe(e){return qs(e.slice(0,54))}function Nqe(e,t){var r=[],n=[],a={},i=!1;return jh(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function Aqe(e){var t=Bl(),r=[];return jt(t,628),jt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),jt(t,632,Sqe(a.a)))})}),jt(t,631),jt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:wi(n[0]),e:wi(n[0])};jt(t,635,bqe([i,a])),a.t&&a.t.length>0&&jt(t,637,G9e(a)),jt(t,636),delete a.iauthor})}),jt(t,634),jt(t,629),t.end()}var kqe="application/vnd.ms-office.vbaProject";function Eqe(e){var t=Br.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Br.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Br.write(t)}function Cqe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Br.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Uie=["xlsb","xlsm","xlam","biff8","xla"];function Pqe(){return{"!type":"dialog"}}function Tqe(){return{"!type":"dialog"}}function Oqe(){return{"!type":"macro"}}function Dqe(){return{"!type":"macro"}}var h1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,s){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=s.length>0?parseInt(s,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+xi(d)+(c?"":"$")+Qi(u)}return function(a,i){return t=i,a.replace(e,r)}}(),p7=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,m7=function(){return function(t,r){return t.replace(p7,function(n,a,i,s,o,c){var u=t7(s)-(i?0:r.c),d=e7(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function qie(e,t){return e.replace(p7,function(r,n,a,i,s,o){return n+(a=="$"?a+i:xi(t7(i)+t.c))+(s=="$"?s+o:Qi(e7(o)+t.r))})}function Iqe(e,t,r){var n=Ul(t),a=n.s,i=wi(r),s={r:i.r-a.r,c:i.c-a.c};return qie(e,s)}function Rqe(e){return e.length!=1}function SV(e){return e.replace(/_xlfn\./g,"")}function as(e){e.l+=1}function Nm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Wie(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return zie(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),s=Nm(e),o=Nm(e);return{s:{r:a,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function zie(e){var t=Nm(e),r=Nm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function Mqe(e,t,r){if(r.biff<8)return zie(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Nm(e),s=Nm(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function Vie(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Fqe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Nm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Fqe(e){var t=Nm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Lqe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function jqe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return $qe(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),s=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(s==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:s,rRel:o}}function $qe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Bqe(e,t,r){var n=(e[e.l++]&96)>>5,a=Wie(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function Uqe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var s=Wie(e,i,r);return[n,a,s]}function qqe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Wqe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function zqe(e,t,r){var n=(e[e.l++]&96)>>5,a=Mqe(e,t-1,r);return[n,a]}function Vqe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function NV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Hqe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Gqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Yqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Kqe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Xqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Hie(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Jqe(e){return e.read_shift(2),Hie(e)}function Zqe(e){return e.read_shift(2),Hie(e)}function Qqe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Vie(e,0,r);return[n,a]}function eWe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=jqe(e,0,r);return[n,a]}function tWe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=Vie(e,0,r);return[n,a,i]}function rWe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[ize[a],Kie[a],n]}function nWe(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:aWe(e);return[a,(i[0]===0?Kie:aze)[i[1]]]}function aWe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function iWe(e,t,r){e.l+=r&&r.biff==2?3:4}function sWe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function oWe(e){return e.l++,$h[e.read_shift(1)]}function lWe(e){return e.l++,e.read_shift(2)}function cWe(e){return e.l++,e.read_shift(1)!==0}function uWe(e){return e.l++,jo(e)}function dWe(e,t,r){return e.l++,fb(e,t-1,r)}function fWe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=qi(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=$h[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=jo(e);break;case 2:r[1]=$g(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function hWe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?jg:s3)(e));return a}function pWe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,s=[];i!=n&&(s[i]=[]);++i)for(var o=0;o!=a;++o)s[i][o]=fWe(e,r.biff);return s}function mWe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function gWe(e,t,r){if(r.biff==5)return vWe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function vWe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function yWe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function xWe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function wWe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function bWe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var _We=Vo,SWe=Vo,NWe=Vo;function pb(e,t,r){return e.l+=2,[Lqe(e)]}function g7(e){return e.l+=6,[]}var AWe=pb,kWe=g7,EWe=g7,CWe=pb;function Gie(e){return e.l+=2,[ls(e),e.read_shift(2)&1]}var PWe=pb,TWe=Gie,OWe=g7,DWe=pb,IWe=pb,RWe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function MWe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),s=RWe[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:a,C:i}}function FWe(e){return e.l+=2,[e.read_shift(4)]}function LWe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function jWe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function $We(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function BWe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function UWe(e){return e.l+=4,[0,0]}var AV={1:{n:"PtgExp",f:sWe},2:{n:"PtgTbl",f:NWe},3:{n:"PtgAdd",f:as},4:{n:"PtgSub",f:as},5:{n:"PtgMul",f:as},6:{n:"PtgDiv",f:as},7:{n:"PtgPower",f:as},8:{n:"PtgConcat",f:as},9:{n:"PtgLt",f:as},10:{n:"PtgLe",f:as},11:{n:"PtgEq",f:as},12:{n:"PtgGe",f:as},13:{n:"PtgGt",f:as},14:{n:"PtgNe",f:as},15:{n:"PtgIsect",f:as},16:{n:"PtgUnion",f:as},17:{n:"PtgRange",f:as},18:{n:"PtgUplus",f:as},19:{n:"PtgUminus",f:as},20:{n:"PtgPercent",f:as},21:{n:"PtgParen",f:as},22:{n:"PtgMissArg",f:as},23:{n:"PtgStr",f:dWe},26:{n:"PtgSheet",f:LWe},27:{n:"PtgEndSheet",f:jWe},28:{n:"PtgErr",f:oWe},29:{n:"PtgBool",f:cWe},30:{n:"PtgInt",f:lWe},31:{n:"PtgNum",f:uWe},32:{n:"PtgArray",f:Vqe},33:{n:"PtgFunc",f:rWe},34:{n:"PtgFuncVar",f:nWe},35:{n:"PtgName",f:mWe},36:{n:"PtgRef",f:Qqe},37:{n:"PtgArea",f:Bqe},38:{n:"PtgMemArea",f:yWe},39:{n:"PtgMemErr",f:_We},40:{n:"PtgMemNoMem",f:SWe},41:{n:"PtgMemFunc",f:xWe},42:{n:"PtgRefErr",f:wWe},43:{n:"PtgAreaErr",f:qqe},44:{n:"PtgRefN",f:eWe},45:{n:"PtgAreaN",f:zqe},46:{n:"PtgMemAreaN",f:$We},47:{n:"PtgMemNoMemN",f:BWe},57:{n:"PtgNameX",f:gWe},58:{n:"PtgRef3d",f:tWe},59:{n:"PtgArea3d",f:Uqe},60:{n:"PtgRefErr3d",f:bWe},61:{n:"PtgAreaErr3d",f:Wqe},255:{}},qWe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},WWe={1:{n:"PtgElfLel",f:Gie},2:{n:"PtgElfRw",f:DWe},3:{n:"PtgElfCol",f:AWe},6:{n:"PtgElfRwV",f:IWe},7:{n:"PtgElfColV",f:CWe},10:{n:"PtgElfRadical",f:PWe},11:{n:"PtgElfRadicalS",f:OWe},13:{n:"PtgElfColS",f:kWe},15:{n:"PtgElfColSV",f:EWe},16:{n:"PtgElfRadicalLel",f:TWe},25:{n:"PtgList",f:MWe},29:{n:"PtgSxName",f:FWe},255:{}},zWe={0:{n:"PtgAttrNoop",f:UWe},1:{n:"PtgAttrSemi",f:Xqe},2:{n:"PtgAttrIf",f:Yqe},4:{n:"PtgAttrChoose",f:Hqe},8:{n:"PtgAttrGoto",f:Gqe},16:{n:"PtgAttrSum",f:iWe},32:{n:"PtgAttrBaxcel",f:NV},33:{n:"PtgAttrBaxcel",f:NV},64:{n:"PtgAttrSpace",f:Jqe},65:{n:"PtgAttrSpaceSemi",f:Zqe},128:{n:"PtgAttrIfError",f:Kqe},255:{}};function mb(e,t,r,n){if(n.biff<8)return Vo(e,t);for(var a=e.l+t,i=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=pWe(e,0,n),i.push(r[s][1]);break;case"PtgMemArea":r[s][2]=hWe(e,r[s][1],n),i.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),i.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=a-e.l,t!==0&&i.push(Vo(e,t)),i}function gb(e,t,r){for(var n=e.l+t,a,i,s=[];n!=e.l;)t=n-e.l,i=e[e.l],a=AV[i]||AV[qWe[i]],(i===24||i===25)&&(a=(i===24?WWe:zWe)[e[e.l+1]]),!a||!a.f?Vo(e,t):s.push([a.n,a.f(e,t,r)]);return s}function VWe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var s=n[i];if(s)switch(s[0]){case 2:a.push('"'+s[1].replace(/"/g,'""')+'"');break;default:a.push(s[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var HWe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function GWe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Yie(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function kV(e,t,r){var n=Yie(e,t,r);return n=="#REF"?n:GWe(n,r)}function Io(e,t,r,n,a){var i=a&&a.biff||8,s={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,m,w="";if(!e[0]||!e[0][0])return"";for(var g=-1,y="",b=0,_=e[0].length;b<_;++b){var N=e[0][b];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:y=Ti(" ",e[0][g][1][1]);break;case 1:y=Ti("\r",e[0][g][1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}u=u+y,g=-1}o.push(u+HWe[N[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=tx(N[1][1],s,a),o.push(rx(d,i));break;case"PtgRefN":d=r?tx(N[1][1],r,a):N[1][1],o.push(rx(d,i));break;case"PtgRef3d":f=N[1][1],d=tx(N[1][2],s,a),w=kV(n,f,a),o.push(w+"!"+rx(d,i));break;case"PtgFunc":case"PtgFuncVar":var E=N[1][0],C=N[1][1];E||(E=0),E&=127;var D=E==0?[]:o.slice(-E);o.length-=E,C==="User"&&(C=D.shift()),o.push(C+"("+D.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":m=tV(N[1][1],r?{s:r}:s,a),o.push(gT(m,a));break;case"PtgArea":m=tV(N[1][1],s,a),o.push(gT(m,a));break;case"PtgArea3d":f=N[1][1],m=N[1][2],w=kV(n,f,a),o.push(w+"!"+gT(m,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=N[1][2];var P=(n.names||[])[h-1]||(n[0]||[])[h],F=P?P.Name:"SH33TJSNAME"+String(h);F&&F.slice(0,6)=="_xlfn."&&!a.xlfn&&(F=F.slice(6)),o.push(F);break;case"PtgNameX":var L=N[1][1];h=N[1][2];var W;if(a.biff<=5)L<0&&(L=-L),n[L]&&(W=n[L][h]);else{var T="";if(((n[L]||[])[0]||[])[0]==14849||(((n[L]||[])[0]||[])[0]==1025?n[L][h]&&n[L][h].itab>0&&(T=n.SheetNames[n[L][h].itab-1]+"!"):T=n.SheetNames[h-1]+"!"),n[L]&&n[L][h])T+=n[L][h].Name;else if(n[0]&&n[0][h])T+=n[0][h].Name;else{var R=(Yie(n,L,a)||"").split(";;");R[h-1]?T=R[h-1]:T+="SH33TJSERRX"}o.push(T);break}W||(W={Name:"SH33TJSERRY"}),o.push(W.Name);break;case"PtgParen":var j="(",Y=")";if(g>=0){switch(y="",e[0][g][1][0]){case 2:j=Ti(" ",e[0][g][1][1])+j;break;case 3:j=Ti("\r",e[0][g][1][1])+j;break;case 4:Y=Ti(" ",e[0][g][1][1])+Y;break;case 5:Y=Ti("\r",e[0][g][1][1])+Y;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(j+o.pop()+Y);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:N[1][1],r:N[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[tn(d)]){var re=n.sharedf[tn(d)];o.push(Io(re,s,Z,n,a))}else{var z=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Io(u[1],s,Z,n,a)),z=!0;break}z||o.push(N[1])}break;case"PtgArray":o.push("{"+VWe(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&q.indexOf(e[0][b][0])==-1){N=e[0][g];var B=!0;switch(N[1][0]){case 4:B=!1;case 0:y=Ti(" ",N[1][1]);break;case 5:B=!1;case 1:y=Ti("\r",N[1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((B?y:"")+o.pop()+(B?"":y)),g=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function YWe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,s=e.read_shift(a);if(s==65535)return[[],Vo(e,t-2)];var o=gb(e,s,r);return t!==s+a&&(i=mb(e,t-s-a,o,r)),e.l=n,[o,i]}function KWe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,s=e.read_shift(a);if(s==65535)return[[],Vo(e,t-2)];var o=gb(e,s,r);return t!==s+a&&(i=mb(e,t-s-a,o,r)),e.l=n,[o,i]}function XWe(e,t,r,n){var a=e.l+t,i=gb(e,n,r),s;return a!==e.l&&(s=mb(e,a-e.l,i,r)),[i,s]}function JWe(e,t,r){var n=e.l+t,a,i=e.read_shift(2),s=gb(e,i,r);return i==65535?[[],Vo(e,t-2)]:(t!==i+2&&(a=mb(e,n-i-2,s,r)),[s,a])}function ZWe(e){var t;if(fh(e,e.l+6)!==65535)return[jo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function QWe(e){if(e==null){var t=Pt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return yg(e);return yg(0)}function bT(e,t,r){var n=e.l+t,a=_f(e);r.biff==2&&++e.l;var i=ZWe(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=KWe(e,n-e.l,r);return{cell:a,val:i[0],formula:o,shared:s>>3&1,tt:i[1]}}function eze(e,t,r,n,a){var i=wg(t,r,a),s=QWe(e.v),o=Pt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Pt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Bs([i,s,o,u]);return f}function o3(e,t,r){var n=e.read_shift(4),a=gb(e,n,r),i=e.read_shift(4),s=i>0?mb(e,i,a,r):null;return[a,s]}var tze=o3,l3=o3,rze=o3,nze=o3,aze={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Kie={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ize={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function EV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function sze(e){var t="of:="+e.replace(p7,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function _T(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function oze(e){return e.replace(/\./,"!")}var ax={},p1={},ix=typeof Map<"u";function v7(e,t,r){var n=0,a=e.length;if(r){if(ix?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ix?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(ix?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function c3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Mo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Ew(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=c4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function J0(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Um(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){gh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Xie(e,t,r,n,a,i){try{n.cellNF&&(e.z=Jr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ni(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Jr[t]==null&&gh(a9e[t]||"General",t),e.t==="e")e.w=e.w||$h[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v);else if(e.t==="d"){var s=_s(e.v);(s|0)===s?e.w=s.toString(10):e.w=ww(s)}else{if(e.v===void 0)return"";e.w=gg(e.v,p1)}else e.t==="d"?e.w=au(t,_s(e.v),p1):e.w=au(t,e.v,p1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=l4(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=l4(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function lze(e,t,r){if(e&&e["!ref"]){var n=ea(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function cze(e,t){var r=ea(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=wn(r))}var uze=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,dze=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,fze=/<(?:\w:)?hyperlink [^>]*>/mg,hze=/"(\w*:\w*)"/,pze=/<(?:\w:)?col\b[^>]*[\/]?>/g,mze=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,gze=/<(?:\w:)?pageMargins[^>]*\/>/g,Jie=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,vze=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,yze=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function xze(e,t,r,n,a,i,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(dze);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Jie);h?y7(h[0],o,a,r):(h=u.match(vze))&&bze(h[0],h[1]||"",o,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var w=u.slice(m,m+50).match(hze);w&&cze(o,w[1])}var g=u.match(yze);g&&g[1]&&Rze(g[1],a);var y=[];if(t.cellStyles){var b=u.match(pze);b&&Pze(y,b)}f&&Lze(f[1],o,t,c,i,s);var _=d.match(mze);_&&(o["!autofilter"]=Oze(_[0]));var N=[],E=d.match(uze);if(E)for(m=0;m!=E.length;++m)N[m]=ea(E[m].slice(E[m].indexOf('"')+1));var C=d.match(fze);C&&kze(o,C,n);var D=d.match(gze);if(D&&(o["!margins"]=Eze(sn(D[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=wn(c)),t.sheetRows>0&&o["!ref"]){var P=ea(o["!ref"]);t.sheetRows<=+P.e.r&&(P.e.r=t.sheetRows-1,P.e.r>c.e.r&&(P.e.r=c.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>c.e.c&&(P.e.c=c.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=wn(P))}return y.length>0&&(o["!cols"]=y),N.length>0&&(o["!merges"]=N),o}function wze(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+wn(e[r])+'"/>';return t+"</mergeCells>"}function y7(e,t,r,n){var a=sn(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Qn(Da(a.codeName)))}function bze(e,t,r,n,a){y7(e.slice(0,e.indexOf(">")),r,n,a)}function _ze(e,t,r,n,a){var i=!1,s={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,s.codeName=Zd(Pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+rr("outlinePr",null,u)}!i&&!o||(a[a.length]=rr("sheetPr",o,s))}var Sze=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Nze=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Aze(e){var t={sheet:1};return Sze.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Nze.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=d7(e.password).toString(16).toUpperCase()),rr("sheetProtection",null,t)}function kze(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var i=sn(Da(t[a]),!0);if(!i.ref)return;var s=((r||{})["!id"]||[])[i.id];s?(i.Target=s.Target,i.location&&(i.Target+="#"+Qn(i.location))):(i.Target="#"+Qn(i.location),s={Target:i.Target,TargetMode:"Internal"}),i.Rel=s,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=ea(i.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=tn({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function Eze(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Cze(e){return J0(e),rr("pageMargins",null,e)}function Pze(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=sn(t[n],!0);a.hidden&&(a.hidden=ei(a.hidden));var i=parseInt(a.min,10)-1,s=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,f7(a.width)),Sm(a);i<=s;)e[i++]=ai(a)}}function Tze(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=rr("col",null,c3(a,n)));return r[r.length]="</cols>",r.join("")}function Oze(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Dze(e,t,r,n){var a=typeof e.ref=="string"?e.ref:wn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,s=Ul(a);s.s.r==s.e.r&&(s.e.r=Ul(t["!ref"]).e.r,a=wn(s));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),rr("autoFilter",null,{ref:a})}var Ize=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Rze(e,t){t.Views||(t.Views=[{}]),(e.match(Ize)||[]).forEach(function(r,n){var a=sn(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),ei(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function Mze(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rr("sheetViews",rr("sheetView",null,a),{})}function Fze(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,s=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=$h[e.v];break;case"d":n&&n.cellDates?a=ni(e.v,-1).toISOString():(e=ai(e),e.t="n",a=""+(e.v=_s(ni(e.v)))),typeof e.z>"u"&&(e.z=Jr[14]);break;default:a=e.v;break}var o=lo("v",Pa(a)),c={r:t},u=Um(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=lo("v",""+v7(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=s),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=rr("f",Pa(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),rr("c",o,c)}var Lze=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=bw("v"),s=bw("f");return function(c,u,d,f,h,m){for(var w=0,g="",y=[],b=[],_=0,N=0,E=0,C="",D,P,F=0,L=0,W,T,R=0,j=0,Y=Array.isArray(m.CellXf),Z,re=[],z=[],q=Array.isArray(u),B=[],G={},Q=!1,O=!!d.sheetStubs,J=c.split(t),X=0,ne=J.length;X!=ne;++X){g=J[X].trim();var ie=g.length;if(ie!==0){var oe=0;e:for(w=0;w<ie;++w)switch(g[w]){case">":if(g[w-1]!="/"){++w;break e}if(d&&d.cellStyles){if(P=sn(g.slice(oe,w),!0),F=P.r!=null?parseInt(P.r,10):F+1,L=-1,d.sheetRows&&d.sheetRows<F)continue;G={},Q=!1,P.ht&&(Q=!0,G.hpt=parseFloat(P.ht),G.hpx=ly(G.hpt)),P.hidden=="1"&&(Q=!0,G.hidden=!0),P.outlineLevel!=null&&(Q=!0,G.level=+P.outlineLevel),Q&&(B[F-1]=G)}break;case"<":oe=w;break}if(oe>=w)break;if(P=sn(g.slice(oe,w),!0),F=P.r!=null?parseInt(P.r,10):F+1,L=-1,!(d.sheetRows&&d.sheetRows<F)){f.s.r>F-1&&(f.s.r=F-1),f.e.r<F-1&&(f.e.r=F-1),d&&d.cellStyles&&(G={},Q=!1,P.ht&&(Q=!0,G.hpt=parseFloat(P.ht),G.hpx=ly(G.hpt)),P.hidden=="1"&&(Q=!0,G.hidden=!0),P.outlineLevel!=null&&(Q=!0,G.level=+P.outlineLevel),Q&&(B[F-1]=G)),y=g.slice(w).split(e);for(var de=0;de!=y.length&&y[de].trim().charAt(0)=="<";++de);for(y=y.slice(de),w=0;w!=y.length;++w)if(g=y[w].trim(),g.length!==0){if(b=g.match(r),_=w,N=0,E=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,b!=null&&b.length===2){for(_=0,C=b[1],N=0;N!=C.length&&!((E=C.charCodeAt(N)-64)<1||E>26);++N)_=26*_+E;--_,L=_}else++L;for(N=0;N!=g.length&&g.charCodeAt(N)!==62;++N);if(++N,P=sn(g.slice(0,N),!0),P.r||(P.r=tn({r:F-1,c:L})),C=g.slice(N),D={t:""},(b=C.match(i))!=null&&b[1]!==""&&(D.v=Qn(b[1])),d.cellFormula){if((b=C.match(s))!=null&&b[1]!==""){if(D.f=Qn(Da(b[1])).replace(/\r\n/g,`
`),d.xlfn||(D.f=SV(D.f)),b[0].indexOf('t="array"')>-1)D.F=(C.match(a)||[])[1],D.F.indexOf(":")>-1&&re.push([ea(D.F),D.F]);else if(b[0].indexOf('t="shared"')>-1){T=sn(b[0]);var V=Qn(Da(b[1]));d.xlfn||(V=SV(V)),z[parseInt(T.si,10)]=[T,V,P.r]}}else(b=C.match(/<f[^>]*\/>/))&&(T=sn(b[0]),z[T.si]&&(D.f=Iqe(z[T.si][1],z[T.si][2],P.r)));var se=wi(P.r);for(N=0;N<re.length;++N)se.r>=re[N][0].s.r&&se.r<=re[N][0].e.r&&se.c>=re[N][0].s.c&&se.c<=re[N][0].e.c&&(D.F=re[N][1])}if(P.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(O)D.t="z";else continue;else D.t=P.t||"n";switch(f.s.c>L&&(f.s.c=L),f.e.c<L&&(f.e.c=L),D.t){case"n":if(D.v==""||D.v==null){if(!O)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!O)continue;D.t="z"}else W=ax[parseInt(D.v,10)],D.v=W.t,D.r=W.r,d.cellHTML&&(D.h=W.h);break;case"str":D.t="s",D.v=D.v!=null?Da(D.v):"",d.cellHTML&&(D.h=XR(D.v));break;case"inlineStr":b=C.match(n),D.t="s",b!=null&&(W=u7(b[1]))?(D.v=W.t,d.cellHTML&&(D.h=W.h)):D.v="";break;case"b":D.v=ei(D.v);break;case"d":d.cellDates?D.v=ni(D.v,1):(D.v=_s(ni(D.v,1)),D.t="n");break;case"e":(!d||d.cellText!==!1)&&(D.w=D.v),D.v=Qae[D.v];break}if(R=j=0,Z=null,Y&&P.s!==void 0&&(Z=m.CellXf[P.s],Z!=null&&(Z.numFmtId!=null&&(R=Z.numFmtId),d.cellStyles&&Z.fillId!=null&&(j=Z.fillId))),Xie(D,R,j,d,h,m),d.cellDates&&Y&&D.t=="n"&&Cy(Jr[R])&&(D.t="d",D.v=i3(D.v)),P.cm&&d.xlmeta){var fe=(d.xlmeta.Cell||[])[+P.cm-1];fe&&fe.type=="XLDAPR"&&(D.D=!0)}if(q){var te=wi(P.r);u[te.r]||(u[te.r]=[]),u[te.r][te.c]=D}else u[P.r]=D}}}}B.length>0&&(u["!rows"]=B)}}();function jze(e,t,r,n){var a=[],i=[],s=ea(e["!ref"]),o="",c,u="",d=[],f=0,h=0,m=e["!rows"],w=Array.isArray(e),g={r:u},y,b=-1;for(h=s.s.c;h<=s.e.c;++h)d[h]=xi(h);for(f=s.s.r;f<=s.e.r;++f){for(i=[],u=Qi(f),h=s.s.c;h<=s.e.c;++h){c=d[h]+u;var _=w?(e[f]||[])[h]:e[c];_!==void 0&&(o=Fze(_,c,e,t))!=null&&i.push(o)}(i.length>0||m&&m[f])&&(g={r:u},m&&m[f]&&(y=m[f],y.hidden&&(g.hidden=1),b=-1,y.hpx?b=Cw(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(g.ht=b,g.customHeight=1),y.level&&(g.outlineLevel=y.level)),a[a.length]=rr("row",i.join(""),g))}if(m)for(;f<m.length;++f)m&&m[f]&&(g={r:f+1},y=m[f],y.hidden&&(g.hidden=1),b=-1,y.hpx?b=Cw(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(g.ht=b,g.customHeight=1),y.level&&(g.outlineLevel=y.level),a[a.length]=rr("row","",g));return a.join("")}function Zie(e,t,r,n){var a=[ts,rr("worksheet",null,{xmlns:Rg[0],"xmlns:r":ws.r})],i=r.SheetNames[e],s=0,o="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=ea(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=wn(d)}n||(n={}),c["!comments"]=[];var f=[];_ze(c,r,e,t,a),a[a.length]=rr("dimension",null,{ref:u}),a[a.length]=Mze(c,t,e,r),t.sheetFormat&&(a[a.length]=rr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=Tze(c,c["!cols"])),a[s=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=jze(c,t),o.length>0&&(a[a.length]=o)),a.length>s+1&&(a[a.length]="</sheetData>",a[s]=a[s].replace("/>",">")),c["!protect"]&&(a[a.length]=Aze(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=Dze(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=wze(c["!merges"]));var h=-1,m,w=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(w=Ea(n,-1,Pa(g[1].Target).replace(/#.*$/,""),On.HLINK),m["r:id"]="rId"+w),(h=g[1].Target.indexOf("#"))>-1&&(m.location=Pa(g[1].Target.slice(h+1))),g[1].Tooltip&&(m.tooltip=Pa(g[1].Tooltip)),a[a.length]=rr("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=Cze(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=lo("ignoredErrors",rr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(w=Ea(n,-1,"../drawings/drawing"+(e+1)+".xml",On.DRAW),a[a.length]=rr("drawing",null,{"r:id":"rId"+w}),c["!drawing"]=f),c["!comments"].length>0&&(w=Ea(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",On.VML),a[a.length]=rr("legacyDrawing",null,{"r:id":"rId"+w}),c["!legacy"]=w),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function $ze(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function Bze(e,t,r){var n=Pt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Cw(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var s=0;a.level&&(s|=a.level),a.hidden&&(s|=16),(a.hpx||a.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var w=Array.isArray(r)?(r[u.r]||[])[u.c]:r[tn(u)];w&&(f<0&&(f=m),h=m)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var g=n.l;return n.l=c,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Uze(e,t,r,n){var a=Bze(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&jt(e,0,a)}var qze=jg,Wze=Oy;function zze(){}function Vze(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Y9e(e),r}function Hze(e,t,r){r==null&&(r=Pt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return i4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Yae(e,r),r.slice(0,r.l)}function Gze(e){var t=lu(e);return[t]}function Yze(e,t,r){return r==null&&(r=Pt(8)),Mg(t,r)}function Kze(e){var t=Fg(e);return[t]}function Xze(e,t,r){return r==null&&(r=Pt(4)),Lg(t,r)}function Jze(e){var t=lu(e),r=e.read_shift(1);return[t,r,"b"]}function Zze(e,t,r){return r==null&&(r=Pt(9)),Mg(t,r),r.write_shift(1,e.v?1:0),r}function Qze(e){var t=Fg(e),r=e.read_shift(1);return[t,r,"b"]}function eVe(e,t,r){return r==null&&(r=Pt(5)),Lg(t,r),r.write_shift(1,e.v?1:0),r}function tVe(e){var t=lu(e),r=e.read_shift(1);return[t,r,"e"]}function rVe(e,t,r){return r==null&&(r=Pt(9)),Mg(t,r),r.write_shift(1,e.v),r}function nVe(e){var t=Fg(e),r=e.read_shift(1);return[t,r,"e"]}function aVe(e,t,r){return r==null&&(r=Pt(8)),Lg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function iVe(e){var t=lu(e),r=e.read_shift(4);return[t,r,"s"]}function sVe(e,t,r){return r==null&&(r=Pt(12)),Mg(t,r),r.write_shift(4,t.v),r}function oVe(e){var t=Fg(e),r=e.read_shift(4);return[t,r,"s"]}function lVe(e,t,r){return r==null&&(r=Pt(8)),Lg(t,r),r.write_shift(4,t.v),r}function cVe(e){var t=lu(e),r=jo(e);return[t,r,"n"]}function uVe(e,t,r){return r==null&&(r=Pt(16)),Mg(t,r),yg(e.v,r),r}function Qie(e){var t=Fg(e),r=jo(e);return[t,r,"n"]}function dVe(e,t,r){return r==null&&(r=Pt(12)),Lg(t,r),yg(e.v,r),r}function fVe(e){var t=lu(e),r=i7(e);return[t,r,"n"]}function hVe(e,t,r){return r==null&&(r=Pt(12)),Mg(t,r),Kae(e.v,r),r}function pVe(e){var t=Fg(e),r=i7(e);return[t,r,"n"]}function mVe(e,t,r){return r==null&&(r=Pt(8)),Lg(t,r),Kae(e.v,r),r}function gVe(e){var t=lu(e),r=r7(e);return[t,r,"is"]}function vVe(e){var t=lu(e),r=Bo(e);return[t,r,"str"]}function yVe(e,t,r){return r==null&&(r=Pt(12+4*e.v.length)),Mg(t,r),qs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function xVe(e){var t=Fg(e),r=Bo(e);return[t,r,"str"]}function wVe(e,t,r){return r==null&&(r=Pt(8+4*e.v.length)),Lg(t,r),qs(e.v,r),r.length>r.l?r.slice(0,r.l):r}function bVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=l3(e,n-e.l,r);s[3]=Io(o,null,a,r.supbooks,r)}else e.l=n;return s}function _Ve(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=e.read_shift(1),s=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=l3(e,n-e.l,r);s[3]=Io(o,null,a,r.supbooks,r)}else e.l=n;return s}function SVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=jo(e),s=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=l3(e,n-e.l,r);s[3]=Io(o,null,a,r.supbooks,r)}else e.l=n;return s}function NVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=Bo(e),s=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=l3(e,n-e.l,r);s[3]=Io(o,null,a,r.supbooks,r)}else e.l=n;return s}var AVe=jg,kVe=Oy;function EVe(e,t){return t==null&&(t=Pt(4)),t.write_shift(4,e),t}function CVe(e,t){var r=e.l+t,n=jg(e),a=n7(e),i=Bo(e),s=Bo(e),o=Bo(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:o};return s&&(c.Tooltip=s),c}function PVe(e,t){var r=Pt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Oy({s:wi(e[0]),e:wi(e[0])},r),a7("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return qs(a||"",r),qs(e[1].Tooltip||"",r),qs("",r),r.slice(0,r.l)}function TVe(){}function OVe(e,t,r){var n=e.l+t,a=Xae(e),i=e.read_shift(1),s=[a];if(s[2]=i,r.cellFormula){var o=tze(e,n-e.l,r);s[1]=o}else e.l=n;return s}function DVe(e,t,r){var n=e.l+t,a=jg(e),i=[a];if(r.cellFormula){var s=nze(e,n-e.l,r);i[1]=s,e.l=n}else e.l=n;return i}function IVe(e,t,r){r==null&&(r=Pt(18));var n=c3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var ese=["left","right","top","bottom","header","footer"];function RVe(e){var t={};return ese.forEach(function(r){t[r]=jo(e)}),t}function MVe(e,t){return t==null&&(t=Pt(6*8)),J0(e),ese.forEach(function(r){yg(e[r],t)}),t}function FVe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function LVe(e,t,r){r==null&&(r=Pt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function jVe(e){var t=Pt(24);return t.write_shift(4,4),t.write_shift(4,1),Oy(e,t),t}function $Ve(e,t){return t==null&&(t=Pt(16*4+2)),t.write_shift(2,e.password?d7(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function BVe(){}function UVe(){}function qVe(e,t,r,n,a,i,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,w,g,y,b,_,N,E,C,D=[];o.biff=12,o["!row"]=0;var P=0,F=!1,L=[],W={},T=o.supbooks||a.supbooks||[[]];if(T.sharedf=W,T.arrayf=L,T.SheetNames=a.SheetNames||a.Sheets.map(function(q){return q.name}),!o.supbooks&&(o.supbooks=T,a.Names))for(var R=0;R<a.Names.length;++R)T[0][R+1]=a.Names[R];var j=[],Y=[],Z=!1;Pw[16]={n:"BrtShortReal",f:Qie};var re;if(jh(e,function(B,G,Q){if(!h)switch(Q){case 148:u=B;break;case 0:m=B,o.sheetRows&&o.sheetRows<=m.r&&(h=!0),E=Qi(y=m.r),o["!row"]=m.r,(B.hidden||B.hpt||B.level!=null)&&(B.hpt&&(B.hpx=ly(B.hpt)),Y[B.r]=B);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:B[2]},B[2]){case"n":w.v=B[1];break;case"s":N=ax[B[1]],w.v=N.t,w.r=N.r;break;case"b":w.v=!!B[1];break;case"e":w.v=B[1],o.cellText!==!1&&(w.w=$h[w.v]);break;case"str":w.t="s",w.v=B[1];break;case"is":w.t="s",w.v=B[1].t;break}if((g=s.CellXf[B[0].iStyleRef])&&Xie(w,g.numFmtId,null,o,i,s),b=B[0].c==-1?b+1:B[0].c,o.dense?(c[y]||(c[y]=[]),c[y][b]=w):c[xi(b)+E]=w,o.cellFormula){for(F=!1,P=0;P<L.length;++P){var O=L[P];m.r>=O[0].s.r&&m.r<=O[0].e.r&&b>=O[0].s.c&&b<=O[0].e.c&&(w.F=wn(O[0]),F=!0)}!F&&B.length>3&&(w.f=B[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>b&&(d.s.c=b),d.e.r<m.r&&(d.e.r=m.r),d.e.c<b&&(d.e.c=b),o.cellDates&&g&&w.t=="n"&&Cy(Jr[g.numFmtId])){var J=B0(w.v);J&&(w.t="d",w.v=new Date(J.y,J.m-1,J.d,J.H,J.M,J.S,J.u))}re&&(re.type=="XLDAPR"&&(w.D=!0),re=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;w={t:"z",v:void 0},b=B[0].c==-1?b+1:B[0].c,o.dense?(c[y]||(c[y]=[]),c[y][b]=w):c[xi(b)+E]=w,d.s.r>m.r&&(d.s.r=m.r),d.s.c>b&&(d.s.c=b),d.e.r<m.r&&(d.e.r=m.r),d.e.c<b&&(d.e.c=b),re&&(re.type=="XLDAPR"&&(w.D=!0),re=void 0);break;case 176:D.push(B);break;case 49:re=((o.xlmeta||{}).Cell||[])[B-1];break;case 494:var X=n["!id"][B.relId];for(X?(B.Target=X.Target,B.loc&&(B.Target+="#"+B.loc),B.Rel=X):B.relId==""&&(B.Target="#"+B.loc),y=B.rfx.s.r;y<=B.rfx.e.r;++y)for(b=B.rfx.s.c;b<=B.rfx.e.c;++b)o.dense?(c[y]||(c[y]=[]),c[y][b]||(c[y][b]={t:"z",v:void 0}),c[y][b].l=B):(_=tn({c:b,r:y}),c[_]||(c[_]={t:"z",v:void 0}),c[_].l=B);break;case 426:if(!o.cellFormula)break;L.push(B),C=o.dense?c[y][b]:c[xi(b)+E],C.f=Io(B[1],d,{r:m.r,c:b},T,o),C.F=wn(B[0]);break;case 427:if(!o.cellFormula)break;W[tn(B[0].s)]=B[1],C=o.dense?c[y][b]:c[xi(b)+E],C.f=Io(B[1],d,{r:m.r,c:b},T,o);break;case 60:if(!o.cellStyles)break;for(;B.e>=B.s;)j[B.e--]={width:B.w/256,hidden:!!(B.flags&1),level:B.level},Z||(Z=!0,f7(B.w/256)),Sm(j[B.e+1]);break;case 161:c["!autofilter"]={ref:wn(B)};break;case 476:c["!margins"]=B;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),B.name&&(a.Sheets[r].CodeName=B.name),(B.above||B.left)&&(c["!outline"]={above:B.above,left:B.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),B.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!G.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+Q.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=wn(u||d)),o.sheetRows&&c["!ref"]){var z=ea(c["!ref"]);o.sheetRows<=+z.e.r&&(z.e.r=o.sheetRows-1,z.e.r>d.e.r&&(z.e.r=d.e.r),z.e.r<z.s.r&&(z.s.r=z.e.r),z.e.c>d.e.c&&(z.e.c=d.e.c),z.e.c<z.s.c&&(z.s.c=z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=wn(z))}return D.length>0&&(c["!merges"]=D),j.length>0&&(c["!cols"]=j),Y.length>0&&(c["!rows"]=Y),c}function WVe(e,t,r,n,a,i,s){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=ai(t),t.z=t.z||Jr[14],t.v=_s(ni(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=Um(a.cellXfs,t,a),t.l&&i["!links"].push([tn(c),t.l]),t.c&&i["!comments"].push([tn(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=v7(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,s?jt(e,18,lVe(t,c)):jt(e,7,sVe(t,c))):(c.t="str",s?jt(e,17,wVe(t,c)):jt(e,6,yVe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?s?jt(e,13,mVe(t,c)):jt(e,2,hVe(t,c)):s?jt(e,16,dVe(t,c)):jt(e,5,uVe(t,c)),!0;case"b":return c.t="b",s?jt(e,15,eVe(t,c)):jt(e,4,Zze(t,c)),!0;case"e":return c.t="e",s?jt(e,14,aVe(t,c)):jt(e,3,rVe(t,c)),!0}return s?jt(e,12,Xze(t,c)):jt(e,1,Yze(t,c)),!0}function zVe(e,t,r,n){var a=ea(t["!ref"]||"A1"),i,s="",o=[];jt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){s=Qi(d),Uze(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=xi(h)),i=o[h]+s;var m=c?(t[d]||[])[h]:t[i];if(!m){f=!1;continue}f=WVe(e,m,d,h,n,t,f)}}jt(e,146)}function VVe(e,t){!t||!t["!merges"]||(jt(e,177,EVe(t["!merges"].length)),t["!merges"].forEach(function(r){jt(e,176,kVe(r))}),jt(e,178))}function HVe(e,t){!t||!t["!cols"]||(jt(e,390),t["!cols"].forEach(function(r,n){r&&jt(e,60,IVe(n,r))}),jt(e,391))}function GVe(e,t){!t||!t["!ref"]||(jt(e,648),jt(e,649,jVe(ea(t["!ref"]))),jt(e,650))}function YVe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Ea(r,-1,n[1].Target.replace(/#.*$/,""),On.HLINK);jt(e,494,PVe(n,a))}}),delete t["!links"]}function KVe(e,t,r,n){if(t["!comments"].length>0){var a=Ea(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",On.VML);jt(e,551,a7("rId"+a)),t["!legacy"]=a}}function XVe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:wn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Ul(i);o.s.r==o.e.r&&(o.e.r=Ul(t["!ref"]).e.r,i=wn(o));for(var c=0;c<s.length;++c){var u=s[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),jt(e,161,Oy(ea(i))),jt(e,162)}}function JVe(e,t,r){jt(e,133),jt(e,137,LVe(t,r)),jt(e,138),jt(e,134)}function ZVe(e,t){t["!protect"]&&jt(e,535,$Ve(t["!protect"]))}function QVe(e,t,r,n){var a=Bl(),i=r.SheetNames[e],s=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=ea(s["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],jt(a,129),(r.vbaraw||s["!outline"])&&jt(a,147,Hze(o,s["!outline"])),jt(a,148,Wze(c)),JVe(a,s,r.Workbook),HVe(a,s),zVe(a,s,e,t),ZVe(a,s),XVe(a,s,r,e),VVe(a,s),YVe(a,s,n),s["!margins"]&&jt(a,476,MVe(s["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&GVe(a,s),KVe(a,s,e,n),jt(a,130),a.end()}function eHe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var s=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var a=Qn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,a,n]}function tHe(e,t,r,n,a,i){var s=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=eHe(f);d.s.r=d.s.c=0,d.e.c=o,u=xi(o),h[0].forEach(function(m,w){s[u+Qi(w)]={t:"n",v:m,z:h[1]},c=w}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(s["!ref"]=wn(d)),s}function rHe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(Jie);return o&&y7(o[0],i,a,r),(s=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=s[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function nHe(e,t){e.l+=10;var r=Bo(e);return{name:r}}function aHe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},s=!1;return jh(e,function(c,u,d){switch(d){case 550:i["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var x7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],iHe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],sHe=[],oHe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function CV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var i=t[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=ei(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function PV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=ei(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function tse(e){PV(e.WBProps,x7),PV(e.CalcPr,oHe),CV(e.WBView,iHe),CV(e.Sheets,sHe),p1.date1904=ei(e.WBProps.date1904)}function lHe(e){return!e.Workbook||!e.Workbook.WBProps?"false":ei(e.Workbook.WBProps.date1904)?"true":"false"}var cHe="][*?/\\".split("");function rse(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return cHe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function uHe(e,t,r){e.forEach(function(n,a){rse(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[a]&&t[a].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function dHe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];uHe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)lze(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var fHe=/<\w+:workbook/;function hHe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},s=0;if(e.replace(Ho,function(c,u){var d=sn(c);switch(bf(d[0])){case"<?xml":break;case"<workbook":c.match(fHe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":x7.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ei(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Da(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Qn(Da(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Da(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),ei(d.hidden||"0")&&(i.Hidden=!0),s=u+c.length;break;case"</definedName>":i.Ref=Qn(Da(e.slice(s,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Rg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return tse(r),r}function nse(e){var t=[ts];t[t.length]=rr("workbook",null,{xmlns:Rg[0],"xmlns:r":ws.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(x7.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=rr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var s={name:Pa(e.SheetNames[i].slice(0,31))};if(s.sheetId=""+(i+1),s["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}t[t.length]=rr("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=rr("definedName",Pa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function pHe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=CO(e),r.name=Bo(e),r}function mHe(e,t){return t||(t=Pt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),a7(e.strRelID,t),qs(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function gHe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Bo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function vHe(e,t){t||(t=Pt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Yae(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function yHe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function xHe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=K9e(e),s=rze(e,0,r),o=n7(e);e.l=n;var c={Name:i,Ptg:s};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function wHe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var i=[],s=[[]];return s.SheetNames=[],s.XTI=[],Pw[16]={n:"BrtFRTArchID$",f:yHe},jh(e,function(c,u,d){switch(d){case 156:s.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Io(c.Ptg,null,null,s,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([d,c]):s[0]=[d,c],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(c),s.XTI=s.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),tse(r),r.Names=i,r.supbooks=s,r}function bHe(e,t){jt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};jt(e,156,mHe(a))}jt(e,144)}function _He(e,t){t||(t=Pt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return qs("SheetJS",t),qs(ZS.version,t),qs(ZS.version,t),qs("7262",t),t.length>t.l?t.slice(0,t.l):t}function SHe(e,t){t||(t=Pt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function NHe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(jt(e,135),jt(e,158,SHe(a)),jt(e,136))}}function AHe(e,t){var r=Bl();return jt(r,131),jt(r,128,_He()),jt(r,153,vHe(e.Workbook&&e.Workbook.WBProps||null)),NHe(r,e),bHe(r,e),jt(r,132),r.end()}function kHe(e,t,r){return t.slice(-4)===".bin"?wHe(e,r):hHe(e,r)}function EHe(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?qVe(e,n,r,a,i,s,o):xze(e,n,r,a,i,s,o)}function CHe(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?aHe(e,n,r,a,i):rHe(e,n,r,a,i)}function PHe(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?Oqe():Dqe()}function THe(e,t,r,n,a,i,s,o){return t.slice(-4)===".bin"?Pqe():Tqe()}function OHe(e,t,r,n){return t.slice(-4)===".bin"?kUe(e,r,n):pUe(e,r,n)}function DHe(e,t,r){return Lie(e,r)}function IHe(e,t,r){return t.slice(-4)===".bin"?IBe(e,r):TBe(e,r)}function RHe(e,t,r){return t.slice(-4)===".bin"?Nqe(e,r):mqe(e,r)}function MHe(e,t,r){return t.slice(-4)===".bin"?fqe(e):uqe(e)}function FHe(e,t,r,n){return r.slice(-4)===".bin"?hqe(e,t,r,n):void 0}function LHe(e,t,r){return t.slice(-4)===".bin"?oqe(e,t,r):cqe(e,t,r)}function jHe(e,t,r){return(t.slice(-4)===".bin"?AHe:nse)(e)}function $He(e,t,r,n,a){return(t.slice(-4)===".bin"?QVe:Zie)(e,r,n,a)}function BHe(e,t,r){return(t.slice(-4)===".bin"?FUe:Mie)(e,r)}function UHe(e,t,r){return(t.slice(-4)===".bin"?FBe:Eie)(e,r)}function qHe(e,t,r){return(t.slice(-4)===".bin"?Aqe:Bie)(e)}function WHe(e){return(e.slice(-4)===".bin"?lqe:jie)()}var ase=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,ise=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ru(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(ase),i,s,o,c;if(a)for(c=0;c!=a.length;++c)i=a[c].match(ise),(s=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(s+1),n[o]=i[2].slice(1,i[2].length-1));return n}function zHe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(ase),a,i,s,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(ise),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?s="xmlns"+a[1].slice(6):s=a[1].slice(i+1),r[s]=a[2].slice(1,a[2].length-1));return r}var sx;function VHe(e,t){var r=sx[e]||Qn(e);return r==="General"?gg(t):au(r,t)}function HHe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=ei(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=ni(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Qn(t)]=a}function GHe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||$h[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v):e.w=gg(e.v):e.w=VHe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=sx[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Cy(n)){var a=B0(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function YHe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=sUe[n.Pattern]||n.Pattern)}e[t.ID]=t}function KHe(e,t,r,n,a,i,s,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],w=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&s&&(f=s.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ei(e);break;case"String":n.t="s",n.r=Hz(Qn(e)),n.v=e.indexOf("<")>-1?Qn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(ni(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Qn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Qae[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=Hz(t||e));break}if(GHe(n,d,u),u.cellFormula!==!1)if(n.Formula){var g=Qn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=h1(g,a),delete n.Formula,n.ArrayRange=="RC"?n.F=h1("RC:RC",a):n.ArrayRange&&(n.F=h1(n.ArrayRange,a),c.push([ea(n.F),n.F]))}else for(w=0;w<c.length;++w)a.r>=c[w][0].s.r&&a.r<=c[w][0].e.r&&a.c>=c[w][0].s.c&&a.c<=c[w][0].e.c&&(n.F=c[w][1]);u.cellStyles&&(m.forEach(function(y){!h.patternType&&y.patternType&&(h.patternType=y.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function XHe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ST(e,t){var r=t||{};Py();var n=M2(JR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Da(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var s=ai(r);return s.type="string",oy.to_workbook(n,s)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(pt){a.indexOf("<"+pt)>=0&&(i=!0)}),i)return MGe(n,r);sx={"General Number":"General","General Date":Jr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Jr[15],"Short Date":Jr[14],"Long Time":Jr[19],"Medium Time":Jr[18],"Short Time":Jr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Jr[2],Standard:Jr[4],Percent:Jr[10],Scientific:Jr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},m="",w={},g={},y=Ru('<Data ss:Type="String">'),b=0,_=0,N=0,E={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},D={},P="",F=0,L=[],W={},T={},R=0,j=[],Y=[],Z={},re=[],z,q=!1,B=[],G=[],Q={},O=0,J=0,X={Sheets:[],WBProps:{date1904:!1}},ne={};Sw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=Sw.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?KHe(n.slice(b,o.index),P,y,c[c.length-1][0]=="comment"?Z:w,{c:_,r:N},C,re[_],g,B,r):(P="",y=Ru(o[0]),b=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Y.length>0&&(w.c=Y),(!r.sheetRows||r.sheetRows>N)&&w.v!==void 0&&(r.dense?(h[N]||(h[N]=[]),h[N][_]=w):h[xi(_)+Qi(N)]=w),w.HRef&&(w.l={Target:Qn(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(O=_+(parseInt(w.MergeAcross,10)|0),J=N+(parseInt(w.MergeDown,10)|0),L.push({s:{c:_,r:N},e:{c:O,r:J}})),!r.sheetStubs)w.MergeAcross?_=O+1:++_;else if(w.MergeAcross||w.MergeDown){for(var oe=_;oe<=O;++oe)for(var de=N;de<=J;++de)(oe>_||de>N)&&(r.dense?(h[de]||(h[de]=[]),h[de][oe]={t:"z"}):h[xi(oe)+Qi(de)]={t:"z"});_=O+1}else++_;else w=zHe(o[0]),w.Index&&(_=+w.Index-1),_<E.s.c&&(E.s.c=_),_>E.e.c&&(E.e.c=_),o[0].slice(-2)==="/>"&&++_,Y=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<E.s.r&&(E.s.r=N),N>E.e.r&&(E.e.r=N),o[0].slice(-2)==="/>"&&(g=Ru(o[0]),g.Index&&(N=+g.Index-1)),_=0,++N):(g=Ru(o[0]),g.Index&&(N=+g.Index-1),Q={},(g.AutoFitHeight=="0"||g.Height)&&(Q.hpx=parseInt(g.Height,10),Q.hpt=Cw(Q.hpx),G[N]=Q),g.Hidden=="1"&&(Q.hidden=!0,G[N]=Q));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(m),E.s.r<=E.e.r&&E.s.c<=E.e.c&&(h["!ref"]=wn(E),r.sheetRows&&r.sheetRows<=E.e.r&&(h["!fullref"]=h["!ref"],E.e.r=r.sheetRows-1,h["!ref"]=wn(E))),L.length&&(h["!merges"]=L),re.length>0&&(h["!cols"]=re),G.length>0&&(h["!rows"]=G),d[m]=h}else E={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=_=0,c.push([o[3],!1]),u=Ru(o[0]),m=Qn(u.Name),h=r.dense?[]:{},L=[],B=[],G=[],ne={name:m,Hidden:0},X.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),re=[],q=!1}break;case"style":o[1]==="/"?YHe(C,D,r):D=Ru(o[0]);break;case"numberformat":D.nf=Qn(Ru(o[0]).Format||"General"),sx[D.nf]&&(D.nf=sx[D.nf]);for(var V=0;V!=392&&Jr[V]!=D.nf;++V);if(V==392){for(V=57;V!=392;++V)if(Jr[V]==null){gh(D.nf,V);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(z=Ru(o[0]),z.Hidden&&(z.hidden=!0,delete z.Hidden),z.Width&&(z.wpx=parseInt(z.Width,10)),!q&&z.wpx>10){q=!0,Mo=Iie;for(var se=0;se<re.length;++se)re[se]&&Sm(re[se])}q&&Sm(z),re[z.Index-1||re.length]=z;for(var fe=0;fe<+z.Span;++fe)re[re.length]=ai(z);break;case"namedrange":if(o[1]==="/")break;X.Names||(X.Names=[]);var te=sn(o[0]),ke={Name:te.Name,Ref:h1(te.RefersTo.slice(1),{r:0,c:0})};X.Sheets.length>0&&(ke.Sheet=X.Sheets.length-1),X.Names.push(ke);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(F,o.index):F=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=Ru(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?wje(W,ie,n.slice(R,o.index)):R=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));XHe(Z),Y.push(Z)}else c.push([o[3],!1]),u=Ru(o[0]),Z={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=Ru(o[0]);h["!autofilter"]={ref:h1(Re.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return RV(n,r);var Ce=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(o[3]){case"date1904":X.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(R,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else R=o.index+o[0].length;break;case"header":h["!margins"]||J0(h["!margins"]={},"xlml"),isNaN(+sn(o[0]).Margin)||(h["!margins"].header=+sn(o[0]).Margin);break;case"footer":h["!margins"]||J0(h["!margins"]={},"xlml"),isNaN(+sn(o[0]).Margin)||(h["!margins"].footer=+sn(o[0]).Margin);break;case"pagemargins":var ve=sn(o[0]);h["!margins"]||J0(h["!margins"]={},"xlml"),isNaN(+ve.Top)||(h["!margins"].top=+ve.Top),isNaN(+ve.Left)||(h["!margins"].left=+ve.Left),isNaN(+ve.Right)||(h["!margins"].right=+ve.Right),isNaN(+ve.Bottom)||(h["!margins"].bottom=+ve.Bottom);break;case"displayrighttoleft":X.Views||(X.Views=[]),X.Views[0]||(X.Views[0]={}),X.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?HHe(T,ie,j,n.slice(R,o.index)):(j=o,R=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ge={};return!r.bookSheets&&!r.bookProps&&(Ge.Sheets=d),Ge.SheetNames=f,Ge.Workbook=X,Ge.SSF=ai(Jr),Ge.Props=W,Ge.Custprops=T,Ge}function MO(e,t){switch(b7(t=t||{}),t.type||"base64"){case"base64":return ST(Sc(e),t);case"binary":case"buffer":case"file":return ST(e,t);case"array":return ST($m(e),t)}}function JHe(e,t){var r=[];return e.Props&&r.push(bje(e.Props,t)),e.Custprops&&r.push(_je(e.Props,e.Custprops)),r.join("")}function ZHe(){return""}function QHe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(rr("NumberFormat",null,{"ss:Format":Pa(Jr[n.numFmtId])}));var s={"ss:ID":"s"+(21+a)};r.push(rr("Style",i.join(""),s))}),rr("Styles",r.join(""))}function sse(e){return rr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+m7(e.Ref,{r:0,c:0})})}function eGe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(sse(a)))}return rr("Names",r.join(""))}function tGe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],s=0;s<a.length;++s){var o=a[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(sse(o)))}return i.join("")}function rGe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(rr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(rr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(rr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(rr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(lo("ProtectContents","True")),e["!protect"].objects&&a.push(lo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(lo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(lo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(lo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){e["!protect"][s[0]]&&a.push("<"+s[1]+"/>")})),a.length==0?"":rr("WorksheetOptions",a.join(""),{xmlns:cc.x})}function nGe(e){return e.map(function(t){var r=N9e(t.t||""),n=rr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return rr("Comment",n,{"ss:Author":t.a})}).join("")}function aGe(e,t,r,n,a,i,s){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Pa(m7(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var c=wi(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==s.r?"":"["+(c.r-s.r)+"]")+"C"+(c.c==s.c?"":"["+(c.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Pa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=s.c||u[d].s.r!=s.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=$h[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Jr[14]);break;case"s":f="String",h=S9e(e.v||"");break}var m=Um(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+m),o["ss:Index"]=s.c+1;var w=e.v!=null?h:"",g=e.t=="z"?"":'<Data ss:Type="'+f+'">'+w+"</Data>";return(e.c||[]).length>0&&(g+=nGe(e.c)),rr("Cell",g,o)}function iGe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=ly(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function sGe(e,t,r,n){if(!e["!ref"])return"";var a=ea(e["!ref"]),i=e["!merges"]||[],s=0,o=[];e["!cols"]&&e["!cols"].forEach(function(y,b){Sm(y);var _=!!y.width,N=c3(b,y),E={"ss:Index":b+1};_&&(E["ss:Width"]=kw(N.width)),y.hidden&&(E["ss:Hidden"]="1"),o.push(rr("Column",null,E))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[iGe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(s=0;s!=i.length;++s)if(!(i[s].s.c>f)&&!(i[s].s.r>u)&&!(i[s].e.c<f)&&!(i[s].e.r<u)){(i[s].s.c!=f||i[s].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},w=tn(m),g=c?(e[u]||[])[f]:e[w];d.push(aGe(g,w,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function oGe(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],s=i?tGe(i,t,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=i?sGe(i,t,e,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(rGe(i,t,e,r)),n.join("")}function lGe(e,t){t||(t={}),e.SSF||(e.SSF=ai(Jr)),e.SSF&&(Py(),r3(e.SSF),t.revssf=a3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Um(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(JHe(e,t)),r.push(ZHe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(rr("Worksheet",oGe(n,t,e),{"ss:Name":Pa(e.SheetNames[n])}));return r[2]=QHe(e,t),r[3]=eGe(e),ts+rr("Workbook",r.join(""),{xmlns:cc.ss,"xmlns:o":cc.o,"xmlns:x":cc.x,"xmlns:ss":cc.ss,"xmlns:dt":cc.dt,"xmlns:html":cc.html})}function cGe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=eje(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=tje(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var uGe=[60,1084,2066,2165,2175];function dGe(e,t,r,n,a){var i=n,s=[],o=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}s.push(o),r.l+=i;for(var c=fh(r,r.l),u=FO[c],d=0;u!=null&&uGe.indexOf(c)>-1;)i=fh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+i),s.push(o),r.l+=4+i,u=FO[c=fh(r,r.l)];var f=Bs(s);so(f,0);var h=0;f.lens=[];for(var m=0;m<s.length;++m)f.lens.push(h),h+=s[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Ld(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Jr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||$h[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v):e.w=gg(e.v):e.w=au(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Cy(Jr[n]||String(n))){var a=B0(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function z_(e,t,r){return{v:e,ixfe:t,t:r}}function fGe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},i={},s={},o=null,c=[],u="",d={},f,h="",m,w,g,y,b={},_=[],N,E,C=[],D=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},F={},L=function(St){return St<8?Y0[St]:St<64&&D[St-8]||Y0[St]},W=function(St,At,dn){var Nr=At.XF.data;if(!(!Nr||!Nr.patternType||!dn||!dn.cellStyles)){At.s={},At.s.patternType=Nr.patternType;var mt;(mt=Aw(L(Nr.icvFore)))&&(At.s.fgColor={rgb:mt}),(mt=Aw(L(Nr.icvBack)))&&(At.s.bgColor={rgb:mt})}},T=function(St,At,dn){if(!(Q>1)&&!(dn.sheetRows&&St.r>=dn.sheetRows)){if(dn.cellStyles&&At.XF&&At.XF.data&&W(St,At,dn),delete At.ixfe,delete At.XF,f=St,h=tn(St),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),St.r<s.s.r&&(s.s.r=St.r),St.c<s.s.c&&(s.s.c=St.c),St.r+1>s.e.r&&(s.e.r=St.r+1),St.c+1>s.e.c&&(s.e.c=St.c+1),dn.cellFormula&&At.f){for(var Nr=0;Nr<_.length;++Nr)if(!(_[Nr][0].s.c>St.c||_[Nr][0].s.r>St.r)&&!(_[Nr][0].e.c<St.c||_[Nr][0].e.r<St.r)){At.F=wn(_[Nr][0]),(_[Nr][0].s.c!=St.c||_[Nr][0].s.r!=St.r)&&delete At.f,At.f&&(At.f=""+Io(_[Nr][1],s,St,B,R));break}}dn.dense?(a[St.r]||(a[St.r]=[]),a[St.r][St.c]=At):a[h]=At}},R={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(R.password=t.password);var j,Y=[],Z=[],re=[],z=[],q=!1,B=[];B.SheetNames=R.snames,B.sharedf=R.sharedf,B.arrayf=R.arrayf,B.names=[],B.XTI=[];var G=0,Q=0,O=0,J=[],X=[],ne;R.codepage=1200,Vu(1200);for(var ie=!1;e.l<e.length-1;){var oe=e.l,de=e.read_shift(2);if(de===0&&G===10)break;var V=e.l===e.length?0:e.read_shift(2),se=FO[de];if(se&&se.f){if(t.bookSheets&&G===133&&de!==133)break;if(G=de,se.r===2||se.r==12){var fe=e.read_shift(2);if(V-=2,!R.enc&&fe!==de&&((fe&255)<<8|fe>>8)!==de)throw new Error("rt mismatch: "+fe+"!="+de);se.r==12&&(e.l+=10,V-=10)}var te={};if(de===10?te=se.f(e,V,R):te=dGe(de,se,e,V,R),Q==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(de){case 34:r.opts.Date1904=P.WBProps.date1904=te;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(R.enc||(e.l=0),R.enc=te,!t.password)throw new Error("File is password-protected");if(te.valid==null)throw new Error("Encryption scheme unsupported");if(!te.valid)throw new Error("Password is incorrect");break;case 92:R.lastuser=te;break;case 66:var ke=Number(te);switch(ke){case 21010:ke=1200;break;case 32768:ke=1e4;break;case 32769:ke=1252;break}Vu(R.codepage=ke),ie=!0;break;case 317:R.rrtabid=te;break;case 25:R.winlocked=te;break;case 439:r.opts.RefreshAll=te;break;case 12:r.opts.CalcCount=te;break;case 16:r.opts.CalcDelta=te;break;case 17:r.opts.CalcIter=te;break;case 13:r.opts.CalcMode=te;break;case 14:r.opts.CalcPrecision=te;break;case 95:r.opts.CalcSaveRecalc=te;break;case 15:R.CalcRefMode=te;break;case 2211:r.opts.FullCalc=te;break;case 129:te.fDialog&&(a["!type"]="dialog"),te.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),te.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:C.push(te);break;case 430:B.push([te]),B[B.length-1].XTI=[];break;case 35:case 547:B[B.length-1].push(te);break;case 24:case 536:ne={Name:te.Name,Ref:Io(te.rgce,s,null,B,R)},te.itab>0&&(ne.Sheet=te.itab-1),B.names.push(ne),B[0]||(B[0]=[],B[0].XTI=[]),B[B.length-1].push(te),te.Name=="_xlnm._FilterDatabase"&&te.itab>0&&te.rgce&&te.rgce[0]&&te.rgce[0][0]&&te.rgce[0][0][0]=="PtgArea3d"&&(X[te.itab-1]={ref:wn(te.rgce[0][0][1][2])});break;case 22:R.ExternCount=te;break;case 23:B.length==0&&(B[0]=[],B[0].XTI=[]),B[B.length-1].XTI=B[B.length-1].XTI.concat(te),B.XTI=B.XTI.concat(te);break;case 2196:if(R.biff<8)break;ne!=null&&(ne.Comment=te[1]);break;case 18:a["!protect"]=te;break;case 19:te!==0&&R.WTF&&console.error("Password verifier: "+te);break;case 133:i[te.pos]=te,R.snames.push(te.name);break;case 10:{if(--Q)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,a["!ref"]=wn(s),t.sheetRows&&t.sheetRows<=s.e.r){var Re=s.e.r;s.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=wn(s),s.e.r=Re}s.e.r++,s.e.c++}Y.length>0&&(a["!merges"]=Y),Z.length>0&&(a["!objects"]=Z),re.length>0&&(a["!cols"]=re),z.length>0&&(a["!rows"]=z),P.Sheets.push(F)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(R.biff===8&&(R.biff={9:2,521:3,1033:4}[de]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[te.BIFFVer]||8),R.biffguess=te.BIFFVer==0,te.BIFFVer==0&&te.dt==4096&&(R.biff=5,ie=!0,Vu(R.codepage=28591)),R.biff==8&&te.BIFFVer==0&&te.dt==16&&(R.biff=2),Q++)break;if(a=t.dense?[]:{},R.biff<8&&!ie&&(ie=!0,Vu(R.codepage=t.codepage||1252)),R.biff<5||te.BIFFVer==0&&te.dt==4096){u===""&&(u="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:e.l-V,name:u};i[Ce.pos]=Ce,R.snames.push(u)}else u=(i[oe]||{name:""}).name;te.dt==32&&(a["!type"]="chart"),te.dt==64&&(a["!type"]="macro"),Y=[],Z=[],R.arrayf=_=[],re=[],z=[],q=!1,F={Hidden:(i[oe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[te.r]||[])[te.c]:a[tn({c:te.c,r:te.r})])&&++te.c,N={ixfe:te.ixfe,XF:C[te.ixfe]||{},v:te.val,t:"n"},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t);break;case 5:case 517:N={ixfe:te.ixfe,XF:C[te.ixfe],v:te.val,t:te.t},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t);break;case 638:N={ixfe:te.ixfe,XF:C[te.ixfe],v:te.rknum,t:"n"},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t);break;case 189:for(var ve=te.c;ve<=te.C;++ve){var Ge=te.rkrec[ve-te.c][0];N={ixfe:Ge,XF:C[Ge],v:te.rkrec[ve-te.c][1],t:"n"},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:ve,r:te.r},N,t)}break;case 6:case 518:case 1030:{if(te.val=="String"){o=te;break}if(N=z_(te.val,te.cell.ixfe,te.tt),N.XF=C[N.ixfe],t.cellFormula){var pt=te.formula;if(pt&&pt[0]&&pt[0][0]&&pt[0][0][0]=="PtgExp"){var it=pt[0][0][1][0],Le=pt[0][0][1][1],ut=tn({r:it,c:Le});b[ut]?N.f=""+Io(te.formula,s,te.cell,B,R):N.F=((t.dense?(a[it]||[])[Le]:a[ut])||{}).F}else N.f=""+Io(te.formula,s,te.cell,B,R)}O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T(te.cell,N,t),o=te}break;case 7:case 519:if(o)o.val=te,N=z_(te,o.cell.ixfe,"s"),N.XF=C[N.ixfe],t.cellFormula&&(N.f=""+Io(o.formula,s,o.cell,B,R)),O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T(o.cell,N,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(te);var he=tn(te[0].s);if(m=t.dense?(a[te[0].s.r]||[])[te[0].s.c]:a[he],t.cellFormula&&m){if(!o||!he||!m)break;m.f=""+Io(te[1],s,te[0],B,R),m.F=wn(te[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;b[tn(o.cell)]=te[0],m=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[tn(o.cell)],(m||{}).f=""+Io(te[0],s,f,B,R)}}break;case 253:N=z_(c[te.isst].t,te.ixfe,"s"),c[te.isst].h&&(N.h=c[te.isst].h),N.XF=C[N.ixfe],O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:te.ixfe,XF:C[te.ixfe],t:"z"},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t));break;case 190:if(t.sheetStubs)for(var Ee=te.c;Ee<=te.C;++Ee){var Me=te.ixfe[Ee-te.c];N={ixfe:Me,XF:C[Me],t:"z"},O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:Ee,r:te.r},N,t)}break;case 214:case 516:case 4:N=z_(te.val,te.ixfe,"s"),N.XF=C[N.ixfe],O>0&&(N.z=J[N.ixfe>>8&63]),Ld(N,t,r.opts.Date1904),T({c:te.c,r:te.r},N,t);break;case 0:case 512:Q===1&&(s=te);break;case 252:c=te;break;case 1054:if(R.biff==4){J[O++]=te[1];for(var at=0;at<O+163&&Jr[at]!=te[1];++at);at>=163&&gh(te[1],O+163)}else gh(te[1],te[0]);break;case 30:{J[O++]=te;for(var ct=0;ct<O+163&&Jr[ct]!=te;++ct);ct>=163&&gh(te,O+163)}break;case 229:Y=Y.concat(te);break;case 93:Z[te.cmo[0]]=R.lastobj=te;break;case 438:R.lastobj.TxO=te;break;case 127:R.lastobj.ImData=te;break;case 440:for(y=te[0].s.r;y<=te[0].e.r;++y)for(g=te[0].s.c;g<=te[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[tn({c:g,r:y})],m&&(m.l=te[1]);break;case 2048:for(y=te[0].s.r;y<=te[0].e.r;++y)for(g=te[0].s.c;g<=te[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[tn({c:g,r:y})],m&&m.l&&(m.l.Tooltip=te[1]);break;case 28:{if(R.biff<=5&&R.biff>=2)break;m=t.dense?(a[te[0].r]||[])[te[0].c]:a[tn(te[0])];var dt=Z[te[2]];m||(t.dense?(a[te[0].r]||(a[te[0].r]=[]),m=a[te[0].r][te[0].c]={t:"z"}):m=a[tn(te[0])]={t:"z"},s.e.r=Math.max(s.e.r,te[0].r),s.s.r=Math.min(s.s.r,te[0].r),s.e.c=Math.max(s.e.c,te[0].c),s.s.c=Math.min(s.s.c,te[0].c)),m.c||(m.c=[]),w={a:te[1],t:dt.TxO.t},m.c.push(w)}break;case 2173:QUe(C[te.ixfe],te.ext);break;case 125:{if(!R.cellStyles)break;for(;te.e>=te.s;)re[te.e--]={width:te.w/256,level:te.level||0,hidden:!!(te.flags&1)},q||(q=!0,f7(te.w/256)),Sm(re[te.e+1])}break;case 520:{var Xe={};te.level!=null&&(z[te.r]=Xe,Xe.level=te.level),te.hidden&&(z[te.r]=Xe,Xe.hidden=!0),te.hpt&&(z[te.r]=Xe,Xe.hpt=te.hpt,Xe.hpx=ly(te.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||J0(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[de]]=te;break;case 161:a["!margins"]||J0(a["!margins"]={}),a["!margins"].header=te.header,a["!margins"].footer=te.footer;break;case 574:te.RTL&&(P.Views[0].RTL=!0);break;case 146:D=te;break;case 2198:j=te;break;case 140:E=te;break;case 442:u?F.CodeName=te||F.name:P.WBProps.CodeName=te||"ThisWorkbook";break}}else se||console.error("Missing Info for XLS Record 0x"+de.toString(16)),e.l+=V}return r.SheetNames=Mi(i).sort(function(Nt,St){return Number(Nt)-Number(St)}).map(function(Nt){return i[Nt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&X.forEach(function(Nt,St){r.Sheets[r.SheetNames[St]]["!autofilter"]=Nt}),r.Strings=c,r.SSF=ai(Jr),R.enc&&(r.Encryption=R.enc),j&&(r.Themes=j),r.Metadata={},E!==void 0&&(r.Metadata.Country=E),B.names.length>0&&(P.Names=B.names),r.Workbook=P,r}var ox={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function hGe(e,t,r){var n=Br.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=uV(n,PO,ox.DSI);for(var i in a)t[i]=a[i]}catch(u){if(r.WTF)throw u}var s=Br.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=uV(s,TO,ox.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(iie(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function pGe(e,t){var r=[],n=[],a=[],i=0,s,o=Bz(PO,"n"),c=Bz(TO,"n");if(e.Props)for(s=Mi(e.Props),i=0;i<s.length;++i)(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Props[s[i]]]);if(e.Custprops)for(s=Mi(e.Custprops),i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},s[i])||(Object.prototype.hasOwnProperty.call(o,s[i])?r:Object.prototype.hasOwnProperty.call(c,s[i])?n:a).push([s[i],e.Custprops[s[i]]]);var u=[];for(i=0;i<a.length;++i)fie.indexOf(a[i][0])>-1||aie.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Br.utils.cfb_add(t,"/SummaryInformation",dV(n,ox.SI,c,TO)),(r.length||u.length)&&Br.utils.cfb_add(t,"/DocumentSummaryInformation",dV(r,ox.DSI,o,PO,u.length?u:null,ox.UDI))}function ose(e,t){t||(t={}),b7(t),qR(),t.codepage&&UR(t.codepage);var r,n;if(e.FullPaths){if(Br.find(e,"/encryption"))throw new Error("File is password-protected");r=Br.find(e,"!CompObj"),n=Br.find(e,"/Workbook")||Br.find(e,"/Book")}else{switch(t.type){case"base64":e=hc(Sc(e));break;case"binary":e=hc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}so(e,0),n={content:e}}var a,i;if(r&&cGe(r),t.bookProps&&!t.bookSheets)a={};else{var s=Pn?"buffer":"array";if(n&&n.content)a=fGe(n.content,t);else if((i=Br.find(e,"PerfectOffice_MAIN"))&&i.content)a=X0.to_workbook(i.content,(t.type=s,t));else if((i=Br.find(e,"NativeContent_MAIN"))&&i.content)a=X0.to_workbook(i.content,(t.type=s,t));else throw(i=Br.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Br.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=Eqe(e))}var o={};return e.FullPaths&&hGe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function mGe(e,t){var r=t||{},n=Br.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Br.utils.cfb_add(n,a,lse(e,r)),r.biff==8&&(e.Props||e.Custprops)&&pGe(e,n),r.biff==8&&e.vbaraw&&Cqe(n,Br.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Pw={0:{f:$ze},1:{f:Gze},2:{f:fVe},3:{f:tVe},4:{f:Jze},5:{f:cVe},6:{f:vVe},7:{f:iVe},8:{f:NVe},9:{f:SVe},10:{f:bVe},11:{f:_Ve},12:{f:Kze},13:{f:pVe},14:{f:nVe},15:{f:Qze},16:{f:Qie},17:{f:xVe},18:{f:oVe},19:{f:r7},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:xHe},40:{},42:{},43:{f:vUe},44:{f:mUe},45:{f:wUe},46:{f:_Ue},47:{f:bUe},48:{},49:{f:q9e},50:{},51:{f:rqe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Sie},62:{f:gVe},63:{f:dqe},64:{f:BVe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Vo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:FVe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Vze},148:{f:qze,p:16},151:{f:TVe},152:{},153:{f:gHe},154:{},155:{},156:{f:pHe},157:{},158:{},159:{T:1,f:DBe},160:{T:-1},161:{T:1,f:jg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:AVe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:eqe},336:{T:-1},337:{f:iqe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:CO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_ie},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OVe},427:{f:DVe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:RVe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zze},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:CVe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:CO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:_qe},633:{T:1},634:{T:-1},635:{T:1,f:wqe},636:{T:-1},637:{f:H9e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:nHe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:UVe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},FO={6:{f:bT},10:{f:Fp},12:{f:ls},13:{f:ls},14:{f:qi},15:{f:qi},16:{f:jo},17:{f:qi},18:{f:qi},19:{f:ls},20:{f:vV},21:{f:vV},23:{f:_ie},24:{f:xV},25:{f:qi},26:{},27:{},28:{f:U$e},29:{},34:{f:qi},35:{f:yV},38:{f:jo},39:{f:jo},40:{f:jo},41:{f:jo},42:{f:qi},43:{f:qi},47:{f:QBe},49:{f:p$e},51:{f:ls},60:{},61:{f:c$e},64:{f:qi},65:{f:h$e},66:{f:ls},77:{},80:{},81:{},82:{},85:{f:ls},89:{},90:{},91:{},92:{f:Zje},93:{f:z$e},94:{},95:{f:qi},96:{},97:{},99:{f:qi},125:{f:Sie},128:{f:P$e},129:{f:e$e},130:{f:ls},131:{f:qi},132:{f:qi},133:{f:t$e},134:{},140:{f:Z$e},141:{f:ls},144:{},146:{f:tBe},151:{},152:{},153:{},154:{},155:{},156:{f:ls},157:{},158:{},160:{f:lBe},161:{f:aBe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:A$e},190:{f:k$e},193:{f:Fp},197:{},198:{},199:{},200:{},201:{},202:{f:qi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ls},220:{},221:{f:qi},222:{},224:{f:C$e},225:{f:Jje},226:{f:Fp},227:{},229:{f:q$e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:n$e},253:{f:g$e},255:{f:i$e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:hie},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:qi},353:{f:Fp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:R$e},431:{f:qi},432:{},433:{},434:{},437:{},438:{f:G$e},439:{f:qi},440:{f:Y$e},441:{},442:{f:hb},443:{},444:{f:ls},445:{},446:{},448:{f:Fp},449:{f:l$e,r:2},450:{f:Fp},512:{f:pV},513:{f:oBe},515:{f:D$e},516:{f:y$e},517:{f:gV},519:{f:cBe},520:{f:s$e},523:{},545:{f:wV},549:{f:hV},566:{},574:{f:d$e},638:{f:N$e},659:{},1048:{},1054:{f:w$e},1084:{},1212:{f:j$e},2048:{f:X$e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:U_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Fp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:rBe,r:12},2173:{f:ZUe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:qi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:L$e,r:12},2197:{},2198:{f:HUe,r:12},2199:{},2200:{},2201:{},2202:{f:$$e,r:12},2203:{f:Fp},2204:{},2205:{},2206:{},2207:{},2211:{f:o$e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ls},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:iBe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:eBe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:pV},1:{},2:{f:pBe},3:{f:fBe},4:{f:dBe},5:{f:gV},7:{f:gBe},8:{},9:{f:U_},11:{},22:{f:ls},30:{f:_$e},31:{},32:{},33:{f:wV},36:{},37:{f:hV},50:{f:vBe},62:{},52:{},67:{},68:{f:ls},69:{},86:{},126:{},127:{f:uBe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:yBe},223:{},234:{},354:{},421:{},518:{f:bT},521:{f:U_},536:{f:xV},547:{f:yV},561:{},579:{},1030:{f:bT},1033:{f:U_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function nr(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,a),s.write_shift(2,i),i>0&&QR(r)&&e.push(r)}}function gGe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return nr(e,t,r,a);var i=t;if(!isNaN(i)){for(var s=r.parts||[],o=0,c=0,u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(s[o]||8224)<=8224;)u+=s[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function vb(e,t,r){return e||(e=Pt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function vGe(e,t,r,n){var a=Pt(9);return vb(a,e,t),pie(r,n||"b",a),a}function yGe(e,t,r){var n=Pt(8+2*r.length);return vb(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function xGe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?_s(ni(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?nr(e,2,mBe(r,n,a)):nr(e,3,hBe(r,n,a));return;case"b":case"e":nr(e,5,vGe(r,n,t.v,t.t));return;case"s":case"str":nr(e,4,yGe(r,n,(t.v||"").slice(0,255)));return}nr(e,1,vb(null,r,n))}function wGe(e,t,r,n){var a=Array.isArray(t),i=ea(t["!ref"]||"A1"),s,o="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),s=wn(i)}for(var u=i.s.r;u<=i.e.r;++u){o=Qi(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=xi(d)),s=c[d]+o;var f=a?(t[u]||[])[d]:t[s];f&&xGe(e,f,u,d)}}}function bGe(e,t){for(var r=t||{},n=Bl(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return nr(n,r.biff==4?1033:r.biff==3?521:9,c7(e,16,r)),wGe(n,e.Sheets[e.SheetNames[a]],a,r),nr(n,10),n.end()}function _Ge(e,t,r){nr(e,49,m$e({sz:12,name:"Arial"},r))}function SGe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&nr(e,1054,b$e(a,t[a],r))})}function NGe(e,t){var r=Pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),nr(e,2151,r),r=Pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),xie(ea(t["!ref"]||"A1"),r),r.write_shift(4,4),nr(e,2152,r)}function AGe(e,t){for(var r=0;r<16;++r)nr(e,224,mV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){nr(e,224,mV(n,0,t))})}function kGe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];nr(e,440,K$e(n)),n[1].Tooltip&&nr(e,2048,J$e(n))}delete t["!links"]}function EGe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&nr(e,125,nBe(c3(a,n),a))})}}function CGe(e,t,r,n,a){var i=16+Um(a.cellXfs,t,a);if(t.v==null&&!t.bf){nr(e,513,wg(r,n,i));return}if(t.bf)nr(e,6,eze(t,r,n,a,i));else switch(t.t){case"d":case"n":var s=t.t=="d"?_s(ni(t.v)):t.v;nr(e,515,I$e(r,n,s,i));break;case"b":case"e":nr(e,517,O$e(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=v7(a.Strings,t.v,a.revStrings);nr(e,253,v$e(r,n,o,i))}else nr(e,516,x$e(r,n,(t.v||"").slice(0,255),i,a));break;default:nr(e,513,wg(r,n,i))}}function PGe(e,t,r){var n=Bl(),a=r.SheetNames[e],i=r.Sheets[a]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",h=[],m=ea(i["!ref"]||"A1"),w=u?65536:16384;if(m.e.c>255||m.e.r>=w){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,w-1)}nr(n,2057,c7(r,16,t)),nr(n,13,Kc(1)),nr(n,12,Kc(100)),nr(n,15,ol(!0)),nr(n,17,ol(!1)),nr(n,16,yg(.001)),nr(n,95,ol(!0)),nr(n,42,ol(!1)),nr(n,43,ol(!1)),nr(n,130,Kc(1)),nr(n,128,T$e()),nr(n,131,ol(!1)),nr(n,132,ol(!1)),u&&EGe(n,i["!cols"]),nr(n,512,S$e(m,t)),u&&(i["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){f=Qi(g);for(var y=m.s.c;y<=m.e.c;++y){g===m.s.r&&(h[y]=xi(y)),d=h[y]+f;var b=c?(i[g]||[])[y]:i[d];b&&(CGe(n,b,g,y,t),u&&b.l&&i["!links"].push([d,b.l]))}}var _=o.CodeName||o.name||a;return u&&nr(n,574,f$e((s.Views||[])[0])),u&&(i["!merges"]||[]).length&&nr(n,229,W$e(i["!merges"])),u&&kGe(n,i),nr(n,442,mie(_)),u&&NGe(n,i),nr(n,10),n.end()}function TGe(e,t,r){var n=Bl(),a=(e||{}).Workbook||{},i=a.Sheets||[],s=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(nr(n,2057,c7(e,5,r)),r.bookType=="xla"&&nr(n,135),nr(n,225,o?Kc(1200):null),nr(n,193,Oje(2)),c&&nr(n,191),c&&nr(n,192),nr(n,226),nr(n,92,Qje("SheetJS",r)),nr(n,66,Kc(o?1200:1252)),o&&nr(n,353,Kc(0)),o&&nr(n,448),nr(n,317,sBe(e.SheetNames.length)),o&&e.vbaraw&&nr(n,211),o&&e.vbaraw){var u=s.CodeName||"ThisWorkbook";nr(n,442,mie(u))}nr(n,156,Kc(17)),nr(n,25,ol(!1)),nr(n,18,ol(!1)),nr(n,19,Kc(0)),o&&nr(n,431,ol(!1)),o&&nr(n,444,Kc(0)),nr(n,61,u$e()),nr(n,64,ol(!1)),nr(n,141,Kc(0)),nr(n,34,ol(lHe(e)=="true")),nr(n,14,ol(!0)),o&&nr(n,439,ol(!1)),nr(n,218,Kc(0)),_Ge(n,e,r),SGe(n,e.SSF,r),AGe(n,r),o&&nr(n,352,ol(!1));var d=n.end(),f=Bl();o&&nr(f,140,Q$e()),o&&r.Strings&&gGe(f,252,a$e(r.Strings)),nr(f,10);var h=f.end(),m=Bl(),w=0,g=0;for(g=0;g<e.SheetNames.length;++g)w+=(o?12:11)+(o?2:1)*e.SheetNames[g].length;var y=d.length+w+h.length;for(g=0;g<e.SheetNames.length;++g){var b=i[g]||{};nr(m,133,r$e({pos:y,hs:b.Hidden||0,dt:0,name:e.SheetNames[g]},r)),y+=t[g].length}var _=m.end();if(w!=_.length)throw new Error("BS8 "+w+" != "+_.length);var N=[];return d.length&&N.push(d),_.length&&N.push(_),h.length&&N.push(h),Bs(N)}function OGe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=ai(Jr)),e&&e.SSF&&(Py(),r3(e.SSF),r.revssf=a3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,_7(r),r.cellXfs=[],Um(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=PGe(a,r,e);return n.unshift(TGe(e,n,r)),Bs(n)}function lse(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Ul(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return OGe(e,t);case 4:case 3:case 2:return bGe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function TV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),s=a.index,o=i&&i.index||e.length,c=m9e(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(s=0;s<c.length;++s){var g=c[s].trim(),y=g.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(y!="<td"&&y!="<th")){var b=g.split(/<\/t[dh]>/i);for(o=0;o<b.length;++o){var _=b[o].trim();if(_.match(/<t[dh]/i)){for(var N=_,E=0;N.charAt(0)=="<"&&(E=N.indexOf(">"))>-1;)N=N.slice(E+1);for(var C=0;C<w.length;++C){var D=w[C];D.s.c==d&&D.s.r<u&&u<=D.e.r&&(d=D.e.c+1,C=-1)}var P=sn(_.slice(0,_.indexOf(">")));h=P.colspan?+P.colspan:1,((f=+P.rowspan)>1||h>1)&&w.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var F=P.t||P["data-t"]||"";if(!N.length){d+=h;continue}if(N=Dae(N),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!N.length){d+=h;continue}var L={t:"s",v:N};r.raw||!N.trim().length||F=="s"||(N==="TRUE"?L={t:"b",v:!0}:N==="FALSE"?L={t:"b",v:!1}:isNaN(Xu(N))?isNaN(sy(N).getDate())||(L={t:"d",v:ni(N)},r.cellDates||(L={t:"n",v:_s(L.v)}),L.z=r.dateNF||Jr[14]):L={t:"n",v:Xu(N)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=L):n[tn({r:u,c:d})]=L,d+=h}}}}return n["!ref"]=wn(m),w.length&&(n["!merges"]=w),n}function DGe(e,t,r,n){for(var a=e["!merges"]||[],i=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>s)&&!(a[u].e.r<r||a[u].e.c<s)){if(a[u].s.r<r||a[u].s.c<s){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=tn({r,c:s}),f=n.dense?(e[r]||[])[s]:e[d],h=f&&f.v!=null&&(f.h||XR(f.w||(kh(f),f.w)||""))||"",m={};o>1&&(m.rowspan=o),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,i.push(rr("td",h,m))}}var w="<tr>";return w+i.join("")+"</tr>"}var IGe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',RGe="</body></html>";function MGe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Bm(TV(r[0],t),t);var n=k7();return r.forEach(function(a,i){E7(n,TV(a,t),"Sheet"+(i+1))}),n}function FGe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function cse(e,t){var r=t||{},n=r.header!=null?r.header:IGe,a=r.footer!=null?r.footer:RGe,i=[n],s=Ul(e["!ref"]);r.dense=Array.isArray(e),i.push(FGe(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)i.push(DGe(e,s,o,r));return i.push("</table>"+a),i.join("")}function use(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var s=typeof n.origin=="string"?wi(n.origin):n.origin;a=s.r,i=s.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Ul(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),w=0,g=0,y=0,b=0,_=0,N=0;for(e["!cols"]||(e["!cols"]=[]);w<o.length&&g<c;++w){var E=o[w];if(OV(E)){if(n.display)continue;m[g]={hidden:!0}}var C=E.children;for(y=b=0;y<C.length;++y){var D=C[y];if(!(n.display&&OV(D))){var P=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):Dae(D.innerHTML),F=D.getAttribute("data-z")||D.getAttribute("z");for(h=0;h<f.length;++h){var L=f[h];L.s.c==b+i&&L.s.r<g+a&&g+a<=L.e.r&&(b=L.e.c+1-i,h=-1)}N=+D.getAttribute("colspan")||1,((_=+D.getAttribute("rowspan")||1)>1||N>1)&&f.push({s:{r:g+a,c:b+i},e:{r:g+a+(_||1)-1,c:b+i+(N||1)-1}});var W={t:"s",v:P},T=D.getAttribute("data-t")||D.getAttribute("t")||"";P!=null&&(P.length==0?W.t=T||"z":n.raw||P.trim().length==0||T=="s"||(P==="TRUE"?W={t:"b",v:!0}:P==="FALSE"?W={t:"b",v:!1}:isNaN(Xu(P))?isNaN(sy(P).getDate())||(W={t:"d",v:ni(P)},n.cellDates||(W={t:"n",v:_s(W.v)}),W.z=n.dateNF||Jr[14]):W={t:"n",v:Xu(P)})),W.z===void 0&&F!=null&&(W.z=F);var R="",j=D.getElementsByTagName("A");if(j&&j.length)for(var Y=0;Y<j.length&&!(j[Y].hasAttribute("href")&&(R=j[Y].getAttribute("href"),R.charAt(0)!="#"));++Y);R&&R.charAt(0)!="#"&&(W.l={Target:R}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][b+i]=W):e[tn({c:b+i,r:g+a})]=W,u.e.c<b+i&&(u.e.c=b+i),b+=N}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,g-1+a),e["!ref"]=wn(u),g>=c&&(e["!fullref"]=wn((u.e.r=o.length-w+g-1+a,u))),e}function dse(e,t){var r=t||{},n=r.dense?[]:{};return use(n,e,t)}function LGe(e,t){return Bm(dse(e,t),t)}function OV(e){var t="",r=jGe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function jGe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function $Ge(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Qn(t.replace(/<[^>]*>/g,""));return[r]}var DV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function fse(e,t){var r=t||{},n=JR(e),a=[],i,s,o={name:""},c="",u=0,d,f,h={},m=[],w=r.dense?[]:{},g,y,b={value:""},_="",N=0,E=[],C=-1,D=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},F=0,L={},W=[],T={},R=0,j=0,Y=[],Z=1,re=1,z=[],q={Names:[]},B={},G=["",""],Q=[],O={},J="",X=0,ne=!1,ie=!1,oe=0;for(Sw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=Sw.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"工作表":g[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?w["!ref"]=wn(P):w["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(w["!fullref"]=w["!ref"],P.e.r=r.sheetRows-1,w["!ref"]=wn(P)),W.length&&(w["!merges"]=W),Y.length&&(w["!rows"]=Y),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=w,ie=!1):g[0].charAt(g[0].length-2)!=="/"&&(d=sn(g[0],!1),C=D=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,w=r.dense?[]:{},W=[],Y=[],ie=!0);break;case"table-row-group":g[1]==="/"?--F:++F;break;case"table-row":case"行":if(g[1]==="/"){C+=Z,Z=1;break}if(f=sn(g[0],!1),f.行号?C=f.行号-1:C==-1&&(C=0),Z=+f["number-rows-repeated"]||1,Z<10)for(oe=0;oe<Z;++oe)F>0&&(Y[C+oe]={level:F});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(w[C]||(w[C]=[]),w[C][D]={t:"z"}):w[tn({r:C,c:D})]={t:"z"}),_="",E=[];break;case"table-cell":case"数据":if(g[0].charAt(g[0].length-2)==="/")++D,b=sn(g[0],!1),re=parseInt(b["number-columns-repeated"]||"1",10),y={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(y.f=EV(Qn(b.formula))),(b.数据类型||b["value-type"])=="string"&&(y.t="s",y.v=Qn(b["string-value"]||""),r.dense?(w[C]||(w[C]=[]),w[C][D]=y):w[tn({r:C,c:D})]=y),D+=re-1;else if(g[1]!=="/"){++D,_="",N=0,E=[],re=1;var de=Z?C+Z-1:C;if(D>P.e.c&&(P.e.c=D),D<P.s.c&&(P.s.c=D),C<P.s.r&&(P.s.r=C),de>P.e.r&&(P.e.r=de),b=sn(g[0],!1),Q=[],O={},y={t:b.数据类型||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=Qn(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(R=parseInt(b["number-matrix-rows-spanned"],10)||0,j=parseInt(b["number-matrix-columns-spanned"],10)||0,T={s:{r:C,c:D},e:{r:C+R-1,c:D+j-1}},y.F=wn(T),z.push([T,y.F])),b.formula)y.f=EV(b.formula);else for(oe=0;oe<z.length;++oe)C>=z[oe][0].s.r&&C<=z[oe][0].e.r&&D>=z[oe][0].s.c&&D<=z[oe][0].e.c&&(y.F=z[oe][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(R=parseInt(b["number-rows-spanned"],10)||0,j=parseInt(b["number-columns-spanned"],10)||0,T={s:{r:C,c:D},e:{r:C+R-1,c:D+j-1}},W.push(T)),b["number-columns-repeated"]&&(re=parseInt(b["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=ei(b["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(b.value);break;case"percentage":y.t="n",y.v=parseFloat(b.value);break;case"currency":y.t="n",y.v=parseFloat(b.value);break;case"date":y.t="d",y.v=ni(b["date-value"]),r.cellDates||(y.t="n",y.v=_s(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=f9e(b["time-value"])/86400,r.cellDates&&(y.t="d",y.v=i3(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(b.数据数值);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",b["string-value"]!=null&&(_=Qn(b["string-value"]),E=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(ne=!1,y.t==="s"&&(y.v=_||"",E.length&&(y.R=E),ne=N==0),B.Target&&(y.l=B),Q.length>0&&(y.c=Q,Q=[]),_&&r.cellText!==!1&&(y.w=_),ne&&(y.t="z",delete y.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=C))for(var V=0;V<Z;++V){if(re=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(w[C+V]||(w[C+V]=[]),w[C+V][D]=V==0?y:ai(y);--re>0;)w[C+V][D+re]=ai(y);else for(w[tn({r:C+V,c:D})]=y;--re>0;)w[tn({r:C+V,c:D+re})]=ai(y);P.e.c<=D&&(P.e.c=D)}re=parseInt(b["number-columns-repeated"]||"1",10),D+=re-1,re=0,y={},_="",E=[]}B={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i;O.t=_,E.length&&(O.R=E),O.a=J,Q.push(O)}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);J="",X=0,_="",N=0,E=[];break;case"creator":g[1]==="/"?J=n.slice(X,g.index):X=g.index+g[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);_="",N=0,E=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(L[o.name]=c,(i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",o=sn(g[0],!1),a.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":s=sn(g[0],!1),c+=DV[g[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":s=sn(g[0],!1),c+=DV[g[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,g.index);break}else u=g.index+g[0].length;break;case"named-range":s=sn(g[0],!1),G=_T(s["cell-range-address"]);var se={Name:s.name,Ref:G[0]+"!"+G[1]};ie&&(se.Sheet=m.length),q.Names.push(se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(g[1]==="/"&&(!b||!b["string-value"])){var fe=$Ge(n.slice(N,g.index));_=(_.length>0?_+`
`:"")+fe[0]}else sn(g[0],!1),N=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{G=_T(sn(g[0])["target-range-address"]),h[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(B=sn(g[0],!1),!B.href)break;B.Target=Qn(B.href),delete B.href,B.Target.charAt(0)=="#"&&B.Target.indexOf(".")>-1?(G=_T(B.Target.slice(1)),B.Target="#"+G[0]+"!"+G[1]):B.Target.match(/^\.\.[\\\/]/)&&(B.Target=B.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(g)}}var te={Sheets:h,SheetNames:m,Workbook:q};return r.bookSheets&&delete te.Sheets,te}function IV(e,t){t=t||{},Yc(e,"META-INF/manifest.xml")&&fje(os(e,"META-INF/manifest.xml"),t);var r=pc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=fse(Da(r),t);return Yc(e,"meta.xml")&&(n.Props=rie(os(e,"meta.xml"))),n}function RV(e,t){return fse(e,t)}var BGe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+_w({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ts+t}}(),MV=function(){var e=function(i){return Pa(i).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,s,o){var c=[];c.push('      <table:table table:name="'+Pa(s.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Ul(i["!ref"]||"A1"),h=i["!merges"]||[],m=0,w=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=f.e.r;++u){for(g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+g+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var b=!1,_={},N="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(b=!0),_["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,_["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(b){c.push(r);continue}var E=tn({r:u,c:d}),C=w?(i[u]||[])[d]:i[E];if(C&&C.f&&(_["table:formula"]=Pa(sze(C.f)),C.F&&C.F.slice(0,E.length)==E)){var D=Ul(C.F);_["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,_["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!C){c.push(t);continue}switch(C.t){case"b":N=C.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=C.v?"true":"false";break;case"n":N=C.w||String(C.v||0),_["office:value-type"]="float",_["office:value"]=C.v||0;break;case"s":case"str":N=C.v==null?"":C.v,_["office:value-type"]="string";break;case"d":N=C.w||ni(C.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=ni(C.v).toISOString(),_["table:style-name"]="ce1";break;default:c.push(t);continue}var P=e(N);if(C.l&&C.l.Target){var F=C.l.Target;F=F.charAt(0)=="#"?"#"+oze(F.slice(1)):F,F.charAt(0)!="#"&&!F.match(/^\w+:/)&&(F="../"+F),P=rr("text:a",P,{"xlink:href":F.replace(/&/g,"&amp;")})}c.push("          "+rr("table:table-cell",rr("text:p",P,{}),_)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,s){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Sm(f),f.ods=o;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;s.SheetNames.map(function(u){return s.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(s,o){var c=[ts],u=_w({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=_w({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(tie().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,s),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=s.SheetNames.length;++f)c.push(n(s.Sheets[s.SheetNames[f]],s,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function hse(e,t){if(t.bookType=="fods")return MV(e,t);var r=GR(),n="",a=[],i=[];return n="mimetype",En(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",En(r,n,MV(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",En(r,n,BGe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",En(r,n,ts+tie()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",En(r,n,mje(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",En(r,n,hje(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function bg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function LO(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Da($m(e))}function UGe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):hc(Zd(e))}function qGe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Am(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function FV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function WGe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function zGe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Tw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ka(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ii(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function sa(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Tw(e,r),i=a&7;a=Math.floor(a/8);var s=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=Tw(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function eo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ka(n*8+a.type)),a.type==2&&t.push(ka(a.data.length)),t.push(a.data))})}),Am(t)}function w7(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Hc(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Tw(e,n),i=sa(e.slice(n[0],n[0]+a));n[0]+=a;var s={id:Ii(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=sa(o.data),u=Ii(c[3][0].data);s.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(s.merge=Ii(i[3][0].data)>>>0>0),r.push(s)}return r}function Mv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ka(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ka(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(s){a.push(s.data),s.meta[3]=[{type:0,data:ka(s.data.length)}],n[2].push({data:eo(s.meta),type:2})});var i=eo(n);t.push(ka(i.length)),t.push(i),a.forEach(function(s){return t.push(s)})}),Am(t)}function VGe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Tw(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}a.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Am(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Am(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Gc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(VGe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Am(t)}function Fv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=ka(n),s=i.length;t.push(i),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,a[0]=0,a[1]=s&255,a[2]=s>>8&255,a[3]=s>>16&255,r+=n}return Am(t)}function HGe(e,t,r,n){var a=bg(e),i=a.getUint32(4,!0),s=(n>1?12:8)+FV(i&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);i&512&&(o=a.getUint32(s,!0),s+=4),s+=FV(i&(n>1?12288:4096))*4,i&16&&(c=a.getUint32(s,!0),s+=4),i&32&&(u=a.getFloat64(s,!0),s+=8),i&64&&(d.setTime(d.getTime()+a.getFloat64(s,!0)*1e3),s+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function GGe(e,t,r){var n=bg(e),a=n.getUint32(8,!0),i=12,s=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=WGe(e,i),i+=16),a&2&&(u=n.getFloat64(i,!0),i+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(o=n.getUint32(i,!0),i+=4),a&16&&(s=n.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function NT(e,t){var r=new Uint8Array(32),n=bg(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,zGe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function AT(e,t){var r=new Uint8Array(32),n=bg(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function YGe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return HGe(e,t,r,e[0]);case 5:return GGe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Do(e){var t=sa(e);return Tw(t[1][0].data)}function LV(e,t){var r=sa(t.data),n=Ii(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(s){var o=sa(s.data),c=Ii(o[1][0].data)>>>0;switch(n){case 1:i[c]=LO(o[3][0].data);break;case 8:{var u=e[Do(o[9][0].data)][0],d=sa(u.data),f=e[Do(d[1][0].data)][0],h=Ii(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=sa(f.data);i[c]=m[3].map(function(w){return LO(w.data)}).join("")}break}}),i}function KGe(e,t){var r,n,a,i,s,o,c,u,d,f,h,m,w,g,y=sa(e),b=Ii(y[1][0].data)>>>0,_=Ii(y[2][0].data)>>>0,N=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&Ii(y[8][0].data)>0||!1,E,C;if((i=(a=y[7])==null?void 0:a[0])!=null&&i.data&&t!=0)E=(o=(s=y[7])==null?void 0:s[0])==null?void 0:o.data,C=(u=(c=y[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=y[4])==null?void 0:d[0])!=null&&f.data&&t!=1)E=(m=(h=y[4])==null?void 0:h[0])==null?void 0:m.data,C=(g=(w=y[3])==null?void 0:w[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=N?4:1,P=bg(E),F=[],L=0;L<E.length/2;++L){var W=P.getUint16(L*2,!0);W<65535&&F.push([L,W])}if(F.length!=_)throw"Expected ".concat(_," cells, found ").concat(F.length);var T=[];for(L=0;L<F.length-1;++L)T[F[L][0]]=C.subarray(F[L][1]*D,F[L+1][1]*D);return F.length>=1&&(T[F[F.length-1][0]]=C.subarray(F[F.length-1][1]*D)),{R:b,cells:T}}function XGe(e,t){var r,n=sa(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ii(n[7][0].data)>>>0>0?1:0:-1,i=w7(n[5],function(s){return KGe(s,a)});return{nrows:Ii(n[4][0].data)>>>0,data:i.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(c,u){if(s[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));s[o.R][u]=c}),s},[])}}function JGe(e,t,r){var n,a=sa(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ii(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(Ii(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=wn(i);var s=sa(a[4][0].data),o=LV(e,e[Do(s[4][0].data)][0]),c=(n=s[17])!=null&&n[0]?LV(e,e[Do(s[17][0].data)][0]):[],u=sa(s[3][0].data),d=0;u[1].forEach(function(f){var h=sa(f.data),m=e[Do(h[2][0].data)][0],w=Ii(m.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var g=XGe(e,m);g.data.forEach(function(y,b){y.forEach(function(_,N){var E=tn({r:d+b,c:N}),C=YGe(_,o,c);C&&(r[E]=C)})}),d+=g.nrows})}function ZGe(e,t){var r=sa(t.data),n={"!ref":"A1"},a=e[Do(r[2][0].data)],i=Ii(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return JGe(e,a[0],n),n}function QGe(e,t){var r,n=sa(t.data),a={name:(r=n[1])!=null&&r[0]?LO(n[1][0].data):"",sheets:[]},i=w7(n[2],Do);return i.forEach(function(s){e[s].forEach(function(o){var c=Ii(o.meta[1][0].data);c==6e3&&a.sheets.push(ZGe(e,o))})}),a}function eYe(e,t){var r=k7(),n=sa(t.data),a=w7(n[1],Do);if(a.forEach(function(i){e[i].forEach(function(s){var o=Ii(s.meta[1][0].data);if(o==2){var c=QGe(e,s);c.sheets.forEach(function(u,d){E7(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function kT(e){var t,r,n,a,i={},s=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Gc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Hc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,s.push(f.id)})}}),!s.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ii(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||s.forEach(function(c){i[c].forEach(function(u){var d=Ii(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return eYe(i,o)}function tYe(e,t,r){var n,a,i,s;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(i=e[8])==null?void 0:i[0])==null?void 0:s.data)&&Ii(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=bg(e[7][0].data),d=0,f=[],h=bg(e[4][0].data),m=0,w=[],g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),h.setUint16(g*2,m,!0);var y,b;switch(typeof t[g]){case"string":y=NT({t:"s",v:t[g]},r),b=AT({t:"s",v:t[g]},r);break;case"number":y=NT({t:"n",v:t[g]},r),b=AT({t:"n",v:t[g]},r);break;case"boolean":y=NT({t:"b",v:t[g]},r),b=AT({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}f.push(y),d+=y.length,w.push(b),m+=b.length,++c}for(e[2][0].data=ka(c);g<e[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return e[6][0].data=Am(f),e[3][0].data=Am(w),c}function rYe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ul(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(wn(n)));var i=u4(r,{range:n,header:1}),s=["~Sh33tJ5~"];i.forEach(function(J){return J.forEach(function(X){typeof X=="string"&&s.push(X)})});var o={},c=[],u=Br.read(t.numbers,{type:"base64"});u.FileIndex.map(function(J,X){return[J,u.FullPaths[X]]}).forEach(function(J){var X=J[0],ne=J[1];if(X.type==2&&X.name.match(/\.iwa/)){var ie=X.content,oe=Gc(ie),de=Hc(oe);de.forEach(function(V){c.push(V.id),o[V.id]={deps:[],location:ne,type:Ii(V.messages[0].meta[1][0].data)}})}}),c.sort(function(J,X){return J-X});var d=c.filter(function(J){return J>1}).map(function(J){return[J,ka(J)]});u.FileIndex.map(function(J,X){return[J,u.FullPaths[X]]}).forEach(function(J){var X=J[0];if(J[1],!!X.name.match(/\.iwa/)){var ne=Hc(Gc(X.content));ne.forEach(function(ie){ie.messages.forEach(function(oe){d.forEach(function(de){ie.messages.some(function(V){return Ii(V.meta[1][0].data)!=11006&&qGe(V.data,de[1])})&&o[de[0]].deps.push(ie.id)})})})}});for(var f=Br.find(u,o[1].location),h=Hc(Gc(f.content)),m,w=0;w<h.length;++w){var g=h[w];g.id==1&&(m=g)}var y=Do(sa(m.messages[0].data)[1][0].data);for(f=Br.find(u,o[y].location),h=Hc(Gc(f.content)),w=0;w<h.length;++w)g=h[w],g.id==y&&(m=g);for(y=Do(sa(m.messages[0].data)[2][0].data),f=Br.find(u,o[y].location),h=Hc(Gc(f.content)),w=0;w<h.length;++w)g=h[w],g.id==y&&(m=g);for(y=Do(sa(m.messages[0].data)[2][0].data),f=Br.find(u,o[y].location),h=Hc(Gc(f.content)),w=0;w<h.length;++w)g=h[w],g.id==y&&(m=g);var b=sa(m.messages[0].data);{b[6][0].data=ka(n.e.r+1),b[7][0].data=ka(n.e.c+1);var _=Do(b[46][0].data),N=Br.find(u,o[_].location),E=Hc(Gc(N.content));{for(var C=0;C<E.length&&E[C].id!=_;++C);if(E[C].id!=_)throw"Bad ColumnRowUIDMapArchive";var D=sa(E[C].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var P=0;P<=n.e.c;++P){var F=[];F[1]=F[2]=[{type:0,data:ka(P+420690)}],D[1].push({type:2,data:eo(F)}),D[2].push({type:0,data:ka(P)}),D[3].push({type:0,data:ka(P)})}D[4]=[],D[5]=[],D[6]=[];for(var L=0;L<=n.e.r;++L)F=[],F[1]=F[2]=[{type:0,data:ka(L+726270)}],D[4].push({type:2,data:eo(F)}),D[5].push({type:0,data:ka(L)}),D[6].push({type:0,data:ka(L)});E[C].messages[0].data=eo(D)}N.content=Fv(Mv(E)),N.size=N.content.length,delete b[46];var W=sa(b[4][0].data);{W[7][0].data=ka(n.e.r+1);var T=sa(W[1][0].data),R=Do(T[2][0].data);N=Br.find(u,o[R].location),E=Hc(Gc(N.content));{if(E[0].id!=R)throw"Bad HeaderStorageBucket";var j=sa(E[0].messages[0].data);for(L=0;L<i.length;++L){var Y=sa(j[2][0].data);Y[1][0].data=ka(L),Y[4][0].data=ka(i[L].length),j[2][L]={type:j[2][0].type,data:eo(Y)}}E[0].messages[0].data=eo(j)}N.content=Fv(Mv(E)),N.size=N.content.length;var Z=Do(W[2][0].data);N=Br.find(u,o[Z].location),E=Hc(Gc(N.content));{if(E[0].id!=Z)throw"Bad HeaderStorageBucket";for(j=sa(E[0].messages[0].data),P=0;P<=n.e.c;++P)Y=sa(j[2][0].data),Y[1][0].data=ka(P),Y[4][0].data=ka(n.e.r+1),j[2][P]={type:j[2][0].type,data:eo(Y)};E[0].messages[0].data=eo(j)}N.content=Fv(Mv(E)),N.size=N.content.length;var re=Do(W[4][0].data);(function(){for(var J=Br.find(u,o[re].location),X=Hc(Gc(J.content)),ne,ie=0;ie<X.length;++ie){var oe=X[ie];oe.id==re&&(ne=oe)}var de=sa(ne.messages[0].data);{de[3]=[];var V=[];s.forEach(function(te,ke){V[1]=[{type:0,data:ka(ke)}],V[2]=[{type:0,data:ka(1)}],V[3]=[{type:2,data:UGe(te)}],de[3].push({type:2,data:eo(V)})})}ne.messages[0].data=eo(de);var se=Mv(X),fe=Fv(se);J.content=fe,J.size=J.content.length})();var z=sa(W[3][0].data);{var q=z[1][0];delete z[2];var B=sa(q.data);{var G=Do(B[2][0].data);(function(){for(var J=Br.find(u,o[G].location),X=Hc(Gc(J.content)),ne,ie=0;ie<X.length;++ie){var oe=X[ie];oe.id==G&&(ne=oe)}var de=sa(ne.messages[0].data);{delete de[6],delete z[7];var V=new Uint8Array(de[5][0].data);de[5]=[];for(var se=0,fe=0;fe<=n.e.r;++fe){var te=sa(V);se+=tYe(te,i[fe],s),te[1][0].data=ka(fe),de[5].push({data:eo(te),type:2})}de[1]=[{type:0,data:ka(n.e.c+1)}],de[2]=[{type:0,data:ka(n.e.r+1)}],de[3]=[{type:0,data:ka(se)}],de[4]=[{type:0,data:ka(n.e.r+1)}]}ne.messages[0].data=eo(de);var ke=Mv(X),Re=Fv(ke);J.content=Re,J.size=J.content.length})()}q.data=eo(B)}W[3][0].data=eo(z)}b[4][0].data=eo(W)}m.messages[0].data=eo(b);var Q=Mv(h),O=Fv(Q);return f.content=O,f.size=f.content.length,u}function pse(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function b7(e){pse([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function _7(e){pse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function nYe(e){return On.WS.indexOf(e)>-1?"sheet":e==On.CS?"chart":e==On.DS?"dialog":e==On.MS?"macro":e&&e.length?e:"sheet"}function aYe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,nYe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function iYe(e,t,r,n,a,i,s,o,c,u,d,f){try{i[n]=nx(pc(e,r,!0),t);var h=os(e,t),m;switch(o){case"sheet":m=EHe(h,t,a,c,i[n],u,d,f);break;case"chart":if(m=CHe(h,t,a,c,i[n],u,d,f),!m||!m["!drawel"])break;var w=L2(m["!drawel"].Target,t),g=Nw(w),y=pqe(pc(e,w,!0),nx(pc(e,g,!0),w)),b=L2(y,w),_=Nw(b);m=tHe(pc(e,b,!0),b,c,nx(pc(e,_,!0),b),u,m);break;case"macro":m=PHe(h,t,a,c,i[n],u,d,f);break;case"dialog":m=THe(h,t,a,c,i[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=m;var N=[];i&&i[n]&&Mi(i[n]).forEach(function(E){var C="";if(i[n][E].Type==On.CMNT){C=L2(i[n][E].Target,t);var D=RHe(os(e,C,!0),C,c);if(!D||!D.length)return;_V(m,D,!1)}i[n][E].Type==On.TCMNT&&(C=L2(i[n][E].Target,t),N=N.concat(gqe(os(e,C,!0),c)))}),N&&N.length&&_V(m,N,!0,c.people||[])}catch(E){if(c.WTF)throw E}}function zc(e){return e.charAt(0)=="/"?e.slice(1):e}function sYe(e,t){if(Py(),t=t||{},b7(t),Yc(e,"META-INF/manifest.xml")||Yc(e,"objectdata.xml"))return IV(e,t);if(Yc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof kT<"u"){if(e.FileIndex)return kT(e);var r=Br.utils.cfb_new();return Wz(e).forEach(function(Y){En(r,Y,v9e(e,Y))}),kT(r)}throw new Error("Unsupported NUMBERS file")}if(!Yc(e,"[Content_Types].xml"))throw Yc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Yc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=Wz(e),a=uje(pc(e,"[Content_Types].xml")),i=!1,s,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",os(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!os(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(ax=[],a.sst)try{ax=IHe(os(e,zc(a.sst)),a.sst,t)}catch(Y){if(t.WTF)throw Y}t.cellStyles&&a.themes.length&&(c=DHe(pc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=OHe(os(e,zc(a.style)),a.style,c,t))}a.links.map(function(Y){try{var Z=nx(pc(e,Nw(zc(Y))),Y);return FHe(os(e,zc(Y)),Z,Y,t)}catch{}});var d=kHe(os(e,zc(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=os(e,zc(a.coreprops[0]),!0),h&&(f=rie(h)),a.extprops.length!==0&&(h=os(e,zc(a.extprops[0]),!0),h&&vje(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=pc(e,zc(a.custprops[0]),!0),h&&(m=xje(h,t)));var w={};if((t.bookSheets||t.bookProps)&&(d.Sheets?s=d.Sheets.map(function(Z){return Z.name}):f.Worksheets&&f.SheetNames.length>0&&(s=f.SheetNames),t.bookProps&&(w.Props=f,w.Custprops=m),t.bookSheets&&typeof s<"u"&&(w.SheetNames=s),t.bookSheets?w.SheetNames:t.bookProps))return w;s={};var g={};t.bookDeps&&a.calcchain&&(g=MHe(os(e,zc(a.calcchain)),a.calcchain));var y=0,b={},_,N;{var E=d.Sheets;f.Worksheets=E.length,f.SheetNames=[];for(var C=0;C!=E.length;++C)f.SheetNames[C]=E[C].name}var D=i?"bin":"xml",P=a.workbooks[0].lastIndexOf("/"),F=(a.workbooks[0].slice(0,P+1)+"_rels/"+a.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");Yc(e,F)||(F="xl/_rels/workbook."+D+".rels");var L=nx(pc(e,F,!0),F.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=LHe(os(e,zc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=yqe(os(e,zc(a.people[0])),t)),L&&(L=aYe(L,d.Sheets));var W=os(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var T="sheet";if(L&&L[y]?(_="xl/"+L[y][1].replace(/[\/]?xl\//,""),Yc(e,_)||(_=L[y][1]),Yc(e,_)||(_=F.replace(/_rels\/.*$/,"")+L[y][1]),T=L[y][2]):(_="xl/worksheets/sheet"+(y+1-W)+"."+D,_=_.replace(/sheet0\./,"sheet.")),N=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var R=!1,j=0;j!=t.sheets.length;++j)typeof t.sheets[j]=="number"&&t.sheets[j]==y&&(R=1),typeof t.sheets[j]=="string"&&t.sheets[j].toLowerCase()==f.SheetNames[y].toLowerCase()&&(R=1);if(!R)continue e}}iYe(e,_,N,f.SheetNames[y],y,b,s,T,t,d,c,u)}return w={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:g,Sheets:s,SheetNames:f.SheetNames,Strings:ax,Styles:u,Themes:c,SSF:ai(Jr)},t&&t.bookFiles&&(e.files?(w.keys=n,w.files=e.files):(w.keys=[],w.files={},e.FullPaths.forEach(function(Y,Z){Y=Y.replace(/^Root Entry[\/]/,""),w.keys.push(Y),w.files[Y]=e.FileIndex[Z]}))),t&&t.bookVBA&&(a.vba.length>0?w.vbaraw=os(e,zc(a.vba[0]),!0):a.defaults&&a.defaults.bin===kqe&&(w.vbaraw=os(e,"xl/vbaProject.bin",!0))),w}function oYe(e,t){var r=t||{},n="Workbook",a=Br.find(e,n);try{if(n="/!DataSpaces/Version",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(LBe(a.content),n="/!DataSpaces/DataSpaceMap",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=$Be(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=BBe(a.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);qBe(a.content)}catch{}if(n="/EncryptionInfo",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=WBe(a.content);if(n="/EncryptedPackage",a=Br.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function lYe(e,t){return t.bookType=="ods"?hse(e,t):t.bookType=="numbers"?rYe(e,t):t.bookType=="xlsb"?cYe(e,t):uYe(e,t)}function cYe(e,t){Yv=1024,e&&!e.SSF&&(e.SSF=ai(Jr)),e&&e.SSF&&(Py(),r3(e.SSF),t.revssf=a3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ix?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Uie.indexOf(t.bookType)>-1,a=o7();_7(t=t||{});var i=GR(),s="",o=0;if(t.cellXfs=[],Um(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",En(i,s,nie(e.Props,t)),a.coreprops.push(s),Ea(t.rels,2,s,On.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,En(i,s,sie(e.Props)),a.extprops.push(s),Ea(t.rels,3,s,On.EXT_PROPS),e.Custprops!==e.Props&&Mi(e.Custprops||{}).length>0&&(s="docProps/custom.xml",En(i,s,oie(e.Custprops)),a.custprops.push(s),Ea(t.rels,4,s,On.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,En(i,s,$He(o-1,s,t,e,d)),a.sheets.push(s),Ea(t.wbrels,-1,"worksheets/sheet"+o+"."+r,On.WS[0])}if(f){var m=f["!comments"],w=!1,g="";m&&m.length>0&&(g="xl/comments"+o+"."+r,En(i,g,qHe(m,g)),a.comments.push(g),Ea(d,-1,"../comments"+o+"."+r,On.CMNT),w=!0),f["!legacy"]&&w&&En(i,"xl/drawings/vmlDrawing"+o+".vml",$ie(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&En(i,Nw(s),f1(d))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,En(i,s,UHe(t.Strings,s,t)),a.strs.push(s),Ea(t.wbrels,-1,"sharedStrings."+r,On.SST)),s="xl/workbook."+r,En(i,s,jHe(e,s)),a.workbooks.push(s),Ea(t.rels,1,s,On.WB),s="xl/theme/theme1.xml",En(i,s,h7(e.Themes,t)),a.themes.push(s),Ea(t.wbrels,-1,"theme/theme1.xml",On.THEME),s="xl/styles."+r,En(i,s,BHe(e,s,t)),a.styles.push(s),Ea(t.wbrels,-1,"styles."+r,On.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",En(i,s,e.vbaraw),a.vba.push(s),Ea(t.wbrels,-1,"vbaProject.bin",On.VBA)),s="xl/metadata."+r,En(i,s,WHe(s)),a.metadata.push(s),Ea(t.wbrels,-1,"metadata."+r,On.XLMETA),En(i,"[Content_Types].xml",eie(a,t)),En(i,"_rels/.rels",f1(t.rels)),En(i,"xl/_rels/workbook."+r+".rels",f1(t.wbrels)),delete t.revssf,delete t.ssf,i}function uYe(e,t){Yv=1024,e&&!e.SSF&&(e.SSF=ai(Jr)),e&&e.SSF&&(Py(),r3(e.SSF),t.revssf=a3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ix?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Uie.indexOf(t.bookType)>-1,a=o7();_7(t=t||{});var i=GR(),s="",o=0;if(t.cellXfs=[],Um(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),s="docProps/core.xml",En(i,s,nie(e.Props,t)),a.coreprops.push(s),Ea(t.rels,2,s,On.CORE_PROPS),s="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,En(i,s,sie(e.Props)),a.extprops.push(s),Ea(t.rels,3,s,On.EXT_PROPS),e.Custprops!==e.Props&&Mi(e.Custprops||{}).length>0&&(s="docProps/custom.xml",En(i,s,oie(e.Custprops)),a.custprops.push(s),Ea(t.rels,4,s,On.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,En(i,s,Zie(o-1,t,e,f)),a.sheets.push(s),Ea(t.wbrels,-1,"worksheets/sheet"+o+"."+r,On.WS[0])}if(h){var w=h["!comments"],g=!1,y="";if(w&&w.length>0){var b=!1;w.forEach(function(_){_[1].forEach(function(N){N.T==!0&&(b=!0)})}),b&&(y="xl/threadedComments/threadedComment"+o+"."+r,En(i,y,vqe(w,d,t)),a.threadedcomments.push(y),Ea(f,-1,"../threadedComments/threadedComment"+o+"."+r,On.TCMNT)),y="xl/comments"+o+"."+r,En(i,y,Bie(w)),a.comments.push(y),Ea(f,-1,"../comments"+o+"."+r,On.CMNT),g=!0}h["!legacy"]&&g&&En(i,"xl/drawings/vmlDrawing"+o+".vml",$ie(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&En(i,Nw(s),f1(f))}return t.Strings!=null&&t.Strings.length>0&&(s="xl/sharedStrings."+r,En(i,s,Eie(t.Strings,t)),a.strs.push(s),Ea(t.wbrels,-1,"sharedStrings."+r,On.SST)),s="xl/workbook."+r,En(i,s,nse(e)),a.workbooks.push(s),Ea(t.rels,1,s,On.WB),s="xl/theme/theme1.xml",En(i,s,h7(e.Themes,t)),a.themes.push(s),Ea(t.wbrels,-1,"theme/theme1.xml",On.THEME),s="xl/styles."+r,En(i,s,Mie(e,t)),a.styles.push(s),Ea(t.wbrels,-1,"styles."+r,On.STY),e.vbaraw&&n&&(s="xl/vbaProject.bin",En(i,s,e.vbaraw),a.vba.push(s),Ea(t.wbrels,-1,"vbaProject.bin",On.VBA)),s="xl/metadata."+r,En(i,s,jie()),a.metadata.push(s),Ea(t.wbrels,-1,"metadata."+r,On.XLMETA),d.length>1&&(s="xl/persons/person.xml",En(i,s,xqe(d)),a.people.push(s),Ea(t.wbrels,-1,"persons/person.xml",On.PEOPLE)),En(i,"[Content_Types].xml",eie(a,t)),En(i,"_rels/.rels",f1(t.rels)),En(i,"xl/_rels/workbook."+r+".rels",f1(t.wbrels)),delete t.revssf,delete t.ssf,i}function S7(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Sc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function dYe(e,t){return Br.find(e,"EncryptedPackage")?oYe(e,t):ose(e,t)}function fYe(e,t){var r,n=e,a=t||{};return a.type||(a.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=Pae(n,a),sYe(r,a)}function mse(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return MO(e.slice(r),t);default:break e}return oy.to_workbook(e,t)}function hYe(e,t){var r="",n=S7(e,t);switch(t.type){case"base64":r=Sc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=vg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Da(r)),t.type="binary",mse(r,t)}function pYe(e,t){var r=e;return t.type=="base64"&&(r=Sc(r)),r=kO.utils.decode(1200,r.slice(2),"str"),t.type="binary",mse(r,t)}function mYe(e){return e.match(/[^\x00-\x7F]/)?Zd(e):e}function ET(e,t,r,n){return n?(r.type="string",oy.to_workbook(e,r)):oy.to_workbook(t,r)}function jO(e,t){qR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return jO(new Uint8Array(e),(r=ai(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),p1={},r.dateNF&&(p1.dateNF=r.dateNF),r.type||(r.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Pn?"buffer":"binary",n=c9e(e),typeof Uint8Array<"u"&&!Pn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=mYe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=ai(r),r.type="array",jO(WR(n),r)}switch((a=S7(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return dYe(Br.read(n,r),r);break;case 9:if(a[1]<=8)return ose(n,r);break;case 60:return MO(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return wBe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Aie.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?fYe(n,r):ET(e,n,r,i);case 239:return a[3]===60?MO(n,r):ET(e,n,r,i);case 255:if(a[1]===254)return pYe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return X0.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return X0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return RO.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Die.to_workbook(n,r);break;case 10:case 13:case 32:return hYe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return xBe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?RO.to_workbook(n,r):ET(e,n,r,i)}function gse(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ub(t.file,Br.write(e,{type:Pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Br.write(e,t)}function gYe(e,t){var r=ai(t||{}),n=lYe(e,r);return vYe(n,r)}function vYe(e,t){var r={},n=Pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Br.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(t3(a))}return t.password&&typeof encrypt_agile<"u"?gse(encrypt_agile(a,t.password),t):t.type==="file"?ub(t.file,a):t.type=="string"?Da(a):a}function yYe(e,t){var r=t||{},n=mGe(e,r);return gse(n,r)}function Ud(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return xw(Zd(n));case"binary":return Zd(n);case"string":return e;case"file":return ub(t.file,n,"utf8");case"buffer":return Pn?Lh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ud(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function xYe(e,t){switch(t.type){case"base64":return xw(e);case"binary":return e;case"string":return e;case"file":return ub(t.file,e,"binary");case"buffer":return Pn?Lh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function V_(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?xw(r):t.type=="string"?Da(r):r;case"file":return ub(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function vse(e,t){qR(),dHe(e);var r=ai(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=vse(e,r);return r.type="array",t3(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ud(lGe(e,r),r);case"slk":case"sylk":return Ud(Nie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Ud(cse(e.Sheets[e.SheetNames[a]],r),r);case"txt":return xYe(yse(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Ud(A7(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Ud(Aie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return V_(RO.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Ud(oy.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Ud(Die.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Ud(kie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Ud(hse(e,r),r);case"wk1":return V_(X0.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return V_(X0.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),V_(lse(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),yYe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return gYe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function wYe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function N7(e,t,r){var n={};return n.type="file",n.file=t,wYe(n),vse(e,n)}function bYe(e,t,r,n,a,i,s,o){var c=Qi(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||e[r])for(var m=t.s.c;m<=t.e.c;++m){var w=s?e[r][m]:e[n[m]+c];if(w===void 0||w.t===void 0){if(u===void 0)continue;i[m]!=null&&(h[i[m]]=u);continue}var g=w.v;switch(w.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(i[m]!=null){if(g==null)if(w.t=="e"&&g===null)h[i[m]]=null;else if(u!==void 0)h[i[m]]=u;else if(d&&g===null)h[i[m]]=null;else continue;else h[i[m]]=d&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?g:kh(w,g,o);g!=null&&(f=!1)}}return{row:h,isempty:f}}function u4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],s=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=ea(d);break;case"number":c=ea(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Qi(c.s.r),h=[],m=[],w=0,g=0,y=Array.isArray(e),b=c.s.r,_=0,N={};y&&!e[b]&&(e[b]=[]);var E=u.skipHidden&&e["!cols"]||[],C=u.skipHidden&&e["!rows"]||[];for(_=c.s.c;_<=c.e.c;++_)if(!(E[_]||{}).hidden)switch(h[_]=xi(_),r=y?e[b][_]:e[h[_]+f],n){case 1:i[_]=_-c.s.c;break;case 2:i[_]=h[_];break;case 3:i[_]=u.header[_-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=kh(r,null,u),g=N[s]||0,!g)N[s]=1;else{do o=s+"_"+g++;while(N[o]);N[s]=g,N[o]=1}i[_]=o}for(b=c.s.r+a;b<=c.e.r;++b)if(!(C[b]||{}).hidden){var D=bYe(e,c,b,h,n,i,y,u);(D.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[w++]=D.row)}return m.length=w,m}var jV=/"/g;function _Ye(e,t,r,n,a,i,s,o){for(var c=!0,u=[],d="",f=Qi(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=o.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(o.rawNumbers&&m.t=="n"?m.v:kh(m,null,o));for(var w=0,g=0;w!==d.length;++w)if((g=d.charCodeAt(w))===a||g===i||g===34||o.forceQuotes){d='"'+d.replace(jV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(jV,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(s)}function A7(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=ea(e["!ref"]),i=n.FS!==void 0?n.FS:",",s=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],w=a.s.c;w<=a.e.c;++w)(h[w]||{}).hidden||(f[w]=xi(w));for(var g=0,y=a.s.r;y<=a.e.r;++y)(m[y]||{}).hidden||(d=_Ye(e,a,y,f,s,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?o:"")+d)));return delete n.dense,r.join("")}function yse(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=A7(e,t);return r}function SYe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=ea(e["!ref"]),i="",s=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)s[o]=xi(o);for(var d=a.s.r;d<=a.e.r;++d)for(i=Qi(d),o=a.s.c;o<=a.e.c;++o)if(t=s[o]+i,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function xse(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},s=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var c=typeof n.origin=="string"?wi(n.origin):n.origin;s=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:s+t.length-1+a}};if(i["!ref"]){var f=ea(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),s==-1&&(s=f.e.r+1,d.e.r=s+t.length-1+a)}else s==-1&&(s=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(g,y){Mi(g).forEach(function(b){(m=h.indexOf(b))==-1&&(h[m=h.length]=b);var _=g[b],N="z",E="",C=tn({c:o+m,r:s+y+a});u=Ow(i,C),_&&typeof _=="object"&&!(_ instanceof Date)?i[C]=_:(typeof _=="number"?N="n":typeof _=="boolean"?N="b":typeof _=="string"?N="s":_ instanceof Date?(N="d",n.cellDates||(N="n",_=_s(_)),E=n.dateNF||Jr[14]):_===null&&n.nullError&&(N="e",_=0),u?(u.t=N,u.v=_,delete u.w,delete u.R,E&&(u.z=E)):i[C]=u={t:N,v:_},E&&(u.z=E))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var w=Qi(s);if(a)for(m=0;m<h.length;++m)i[xi(m+o)+w]={t:"s",v:h[m]};return i["!ref"]=wn(d),i}function NYe(e,t){return xse(null,e,t)}function Ow(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=wi(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ow(e,tn(t)):Ow(e,tn({r:t,c:r||0}))}function AYe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function k7(){return{SheetNames:[],Sheets:{}}}function E7(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var s=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=s+a)!=-1;++a);}if(rse(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function kYe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=AYe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function EYe(e,t){return e.z=t,e}function wse(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function CYe(e,t,r){return wse(e,"#"+t,r)}function PYe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function TYe(e,t,r,n){for(var a=typeof t!="string"?t:ea(t),i=typeof t=="string"?t:wn(t),s=a.s.r;s<=a.e.r;++s)for(var o=a.s.c;o<=a.e.c;++o){var c=Ow(e,s,o);c.t="n",c.F=i,delete c.v,s==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var of={encode_col:xi,encode_row:Qi,encode_cell:tn,encode_range:wn,decode_col:t7,decode_row:e7,split_cell:U9e,decode_cell:wi,decode_range:Ul,format_cell:kh,sheet_add_aoa:Gae,sheet_add_json:xse,sheet_add_dom:use,aoa_to_sheet:Ty,json_to_sheet:NYe,table_to_sheet:dse,table_to_book:LGe,sheet_to_csv:A7,sheet_to_txt:yse,sheet_to_json:u4,sheet_to_html:cse,sheet_to_formulae:SYe,sheet_to_row_object_array:u4,sheet_get_cell:Ow,book_new:k7,book_append_sheet:E7,book_set_sheet_visibility:kYe,cell_set_number_format:EYe,cell_set_hyperlink:wse,cell_set_internal_link:CYe,cell_add_comment:PYe,sheet_set_array_formula:TYe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const OYe=(e,t="inventory_export")=>{const r=e.map(s=>({"Item Name":s.item_name,Category:s.category,Quantity:s.quantity,"Expiry Date":s.expiry_date?new Date(s.expiry_date).toLocaleDateString():"N/A","Supplier Info":s.supplier_info||"N/A","Purchase Price":s.purchase_price!=null?Number(s.purchase_price):"N/A",Status:s.stock_status,"Low Stock Threshold":s.low_stock_threshold,"Created At":new Date(s.created_at).toLocaleString()})),n=of.json_to_sheet(r),a=[{wch:30},{wch:15},{wch:10},{wch:15},{wch:25},{wch:15},{wch:12},{wch:20},{wch:20}];n["!cols"]=a;const i=of.book_new();of.book_append_sheet(i,n,"Inventory"),N7(i,`${t}.xlsx`)},DYe=(e,t="inventory_export")=>{const r=new Hr,n=["Item Name","Category","Qty","Expiry","Supplier","Price","Status"],a=e.map(i=>[i.item_name,i.category,i.quantity,i.expiry_date?new Date(i.expiry_date).toLocaleDateString():"N/A",i.supplier_info||"N/A",i.purchase_price!=null?`$${Number(i.purchase_price).toFixed(2)}`:"N/A",i.stock_status]);r.setFontSize(18),r.text("Inventory Report",14,22),r.setFontSize(11),r.setTextColor(100),r.text(`Generated on: ${new Date().toLocaleDateString()}`,14,29),TR(r,{head:[n],body:a,startY:35,theme:"grid",headStyles:{fillColor:[22,160,133]},styles:{fontSize:8},columnStyles:{0:{cellWidth:40},2:{halign:"right"},5:{halign:"right"}}}),r.save(`${t}.pdf`)},IYe=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[a,i]=S.useState(""),[s,o]=S.useState("all"),[c,u]=S.useState([]),[d,f]=S.useState(0),[h,m]=S.useState(!1),[w,g]=S.useState(!1),y=()=>{n(null),t(!0)},b=P=>{n(P),t(!0)},_=()=>{t(!1),n(null)},N=P=>{console.log("Item saved:",P),_(),f(F=>F+1)},E=()=>{w&&!h||(h?(m(!1),g(!1)):(g(!0),m(!0)))},C=P=>{},D=()=>{g(!1)};return x("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[x(Fa,{heading:"Inventory Management",text:"Track medicines, tools, and consumables.",className:"flex items-center justify-between",children:[x(Vn,{open:e,onOpenChange:t,children:[l(rb,{asChild:!0,children:x(Fe,{onClick:y,children:[l(Ch,{className:"mr-2 h-4 w-4"})," Add New Item"]})}),x(Bn,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:r?"Edit Inventory Item":"Add New Inventory Item"})}),l(ELe,{itemToEdit:r,onSave:N,onCancel:_})]})]}),l(Fe,{variant:"outline",onClick:E,disabled:w&&!h,className:`ai-insights-button ${w&&h?"opacity-100 cursor-not-allowed":""}`,style:w&&h?{opacity:1}:{},children:w&&h?x(_r,{children:[l(q0,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):x(_r,{children:[l(YH,{className:"mr-2 h-4 w-4"}),h?"Hide AI Insights":"Show AI Insights"]})})]}),x("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[x("div",{className:"relative flex-1",children:[l(w4,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),l(ht,{type:"search",placeholder:"Search by item name...",className:"pl-8 sm:w-full",value:a,onChange:P=>i(P.target.value)})]}),x(Ur,{value:s,onValueChange:P=>o(P),children:[l(jr,{className:"w-full sm:w-[180px]",children:l(qr,{placeholder:"Filter by category"})}),x($r,{children:[l(wt,{value:"all",children:"All Categories"}),l(wt,{value:"Medicines",children:"Medicines"}),l(wt,{value:"Tools",children:"Tools"}),l(wt,{value:"Consumables",children:"Consumables"})]})]}),x(Fe,{variant:"outline",onClick:()=>OYe(c),disabled:c.length===0,className:"w-full sm:w-auto",children:[l(aF,{className:"mr-2 h-4 w-4"})," Export Excel"]}),x(Fe,{variant:"outline",onClick:()=>DYe(c),disabled:c.length===0,className:"w-full sm:w-auto",children:[l(aF,{className:"mr-2 h-4 w-4"})," Export PDF"]})]}),h&&l(TLe,{onLoadingChange:C,onInitialFetchComplete:D}),l(_Le,{onEditItem:b,refreshTrigger:d,searchTerm:a,categoryFilter:s,onDataFiltered:u})]})},RYe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,i]=S.useState(null),[s,o]=S.useState(null),{toast:c}=_n();S.useEffect(()=>{(async()=>{n(!0),i(null);try{const f=await NLe();Array.isArray(f)?t(f):(console.warn("Fetched invoices data is not an array:",f),t([]))}catch(f){console.error("Failed to fetch invoices:",f);const h=f instanceof Error?f.message:"An unknown error occurred";i(h),c({title:"Error Fetching Invoices",description:h,variant:"destructive"})}finally{n(!1)}})()},[c]);const u=async d=>{o(d.id);try{const f=await ALe(d.storage_path);window.open(f,"_blank")}catch(f){console.error("Failed to get download URL:",f),c({title:"Error Getting Download Link",description:f instanceof Error?f.message:"Could not generate link.",variant:"destructive"})}finally{o(null)}};return r?l("div",{className:"space-y-2",children:[...Array(3)].map((d,f)=>l($l,{className:"h-10 w-full"},f))}):a?x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:a})]}):e.length===0?l("p",{className:"text-center text-gray-500 mt-4",children:"No invoices found."}):l("div",{className:"rounded-md border",children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"File Name"}),l(Kt,{children:"Related Item"}),l(Kt,{children:"Uploaded At"}),l(Kt,{children:"Uploaded By"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:e.map(d=>{var f;return x(Dn,{children:[l(Wt,{className:"font-medium",children:d.file_name}),l(Wt,{children:((f=d.inventory_items)==null?void 0:f.item_name)??l("span",{className:"text-xs text-muted-foreground",children:"N/A"})}),l(Wt,{children:new Date(d.uploaded_at).toLocaleString()}),l(Wt,{className:"text-xs text-muted-foreground",children:d.uploaded_by_user_id?"User ID: ..."+d.uploaded_by_user_id.slice(-6):"Unknown"}),x(Wt,{className:"text-right space-x-1",children:[l(Fe,{variant:"ghost",size:"icon",onClick:()=>u(d),disabled:s===d.id,title:"View Invoice",children:s===d.id?l("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):l(Fw,{className:"h-4 w-4"})}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>u(d),disabled:s===d.id,title:"Download/View Invoice",children:s===d.id?l("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):l(QH,{className:"h-4 w-4"})})]})]},d.id)})})]})})},MYe=()=>x("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[l(Fa,{heading:"Uploaded Invoices",text:"View and download previously uploaded invoices."}),l(RYe,{})]}),FYe=({asset:e,isOpen:t,onOpenChange:r,onIntervalSet:n})=>{const{toast:a}=_n(),[i,s]=S.useState(e.maintenance_interval_value||""),[o,c]=S.useState(e.maintenance_interval_unit||void 0),[u,d]=S.useState(!1);S.useEffect(()=>{s(e.maintenance_interval_value||""),c(e.maintenance_interval_unit||void 0)},[e,t]);const f=async()=>{if(i===""||!o){a({title:"Validation Error",description:"Please provide both interval period and unit.",variant:"destructive"});return}if(i<=0){a({title:"Validation Error",description:"Interval period must be positive.",variant:"destructive"});return}d(!0);try{const{error:h}=await $e.from("assets").update({maintenance_interval_value:i,maintenance_interval_unit:o}).eq("id",e.id);if(h)throw h;a({title:"Success",description:`Maintenance interval for ${e.asset_name} updated.`}),n(),r(!1)}catch(h){a({title:"Error updating interval",description:h.message||"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}};return l(Vn,{open:t,onOpenChange:r,children:x(Bn,{className:"sm:max-w-[425px]",children:[x(Jn,{children:[l(Zn,{children:"Set Maintenance Interval"}),x(us,{children:["Configure the maintenance interval for asset: ",l("strong",{children:e.asset_name}),"."]})]}),x("div",{className:"grid gap-4 py-4",children:[x("div",{className:"grid grid-cols-4 items-center gap-4",children:[l(tr,{htmlFor:"intervalValue",className:"text-right",children:"Interval Period"}),l(ht,{id:"intervalValue",type:"number",value:i,onChange:h=>s(h.target.value===""?"":parseInt(h.target.value,10)),className:"col-span-3",min:"1",placeholder:"e.g., 3"})]}),x("div",{className:"grid grid-cols-4 items-center gap-4",children:[l(tr,{htmlFor:"intervalUnit",className:"text-right",children:"Interval"}),x(Ur,{value:o,onValueChange:h=>c(h),children:[l(jr,{className:"col-span-3",children:l(qr,{placeholder:"Select unit"})}),x($r,{children:[l(wt,{value:"days",children:"Days"}),l(wt,{value:"weeks",children:"Weeks"}),l(wt,{value:"months",children:"Months"}),l(wt,{value:"years",children:"Years"})]})]})]})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>r(!1),disabled:u,children:"Cancel"}),l(Fe,{onClick:f,disabled:u,children:u?"Saving...":"Save Interval"})]})]})})};function LYe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function jYe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $Ye=function(){function e(r){var n=this;this._insertTag=function(a){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,i),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jYe(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=LYe(a);try{i.insertRule(n,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var a;return(a=n.parentNode)==null?void 0:a.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Co="-ms-",d4="-moz-",fa="-webkit-",bse="comm",C7="rule",P7="decl",BYe="@import",_se="@keyframes",UYe="@layer",qYe=Math.abs,u3=String.fromCharCode,WYe=Object.assign;function zYe(e,t){return oo(e,0)^45?(((t<<2^oo(e,0))<<2^oo(e,1))<<2^oo(e,2))<<2^oo(e,3):0}function Sse(e){return e.trim()}function VYe(e,t){return(e=t.exec(e))?e[0]:e}function ha(e,t,r){return e.replace(t,r)}function $O(e,t){return e.indexOf(t)}function oo(e,t){return e.charCodeAt(t)|0}function Dw(e,t,r){return e.slice(t,r)}function qd(e){return e.length}function T7(e){return e.length}function H_(e,t){return t.push(e),e}function HYe(e,t){return e.map(t).join("")}var d3=1,cy=1,Nse=0,ql=0,cs=0,Dy="";function f3(e,t,r,n,a,i,s){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:d3,column:cy,length:s,return:""}}function S2(e,t){return WYe(f3("",null,null,"",null,null,0),e,{length:-e.length},t)}function GYe(){return cs}function YYe(){return cs=ql>0?oo(Dy,--ql):0,cy--,cs===10&&(cy=1,d3--),cs}function bc(){return cs=ql<Nse?oo(Dy,ql++):0,cy++,cs===10&&(cy=1,d3++),cs}function lf(){return oo(Dy,ql)}function p5(){return ql}function yb(e,t){return Dw(Dy,e,t)}function Iw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ase(e){return d3=cy=1,Nse=qd(Dy=e),ql=0,[]}function kse(e){return Dy="",e}function m5(e){return Sse(yb(ql-1,BO(e===91?e+2:e===40?e+1:e)))}function KYe(e){for(;(cs=lf())&&cs<33;)bc();return Iw(e)>2||Iw(cs)>3?"":" "}function XYe(e,t){for(;--t&&bc()&&!(cs<48||cs>102||cs>57&&cs<65||cs>70&&cs<97););return yb(e,p5()+(t<6&&lf()==32&&bc()==32))}function BO(e){for(;bc();)switch(cs){case e:return ql;case 34:case 39:e!==34&&e!==39&&BO(cs);break;case 40:e===41&&BO(e);break;case 92:bc();break}return ql}function JYe(e,t){for(;bc()&&e+cs!==57;)if(e+cs===84&&lf()===47)break;return"/*"+yb(t,ql-1)+"*"+u3(e===47?e:bc())}function ZYe(e){for(;!Iw(lf());)bc();return yb(e,ql)}function QYe(e){return kse(g5("",null,null,null,[""],e=Ase(e),0,[0],e))}function g5(e,t,r,n,a,i,s,o,c){for(var u=0,d=0,f=s,h=0,m=0,w=0,g=1,y=1,b=1,_=0,N="",E=a,C=i,D=n,P=N;y;)switch(w=_,_=bc()){case 40:if(w!=108&&oo(P,f-1)==58){$O(P+=ha(m5(_),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:P+=m5(_);break;case 9:case 10:case 13:case 32:P+=KYe(w);break;case 92:P+=XYe(p5()-1,7);continue;case 47:switch(lf()){case 42:case 47:H_(eKe(JYe(bc(),p5()),t,r),c);break;default:P+="/"}break;case 123*g:o[u++]=qd(P)*b;case 125*g:case 59:case 0:switch(_){case 0:case 125:y=0;case 59+d:b==-1&&(P=ha(P,/\f/g,"")),m>0&&qd(P)-f&&H_(m>32?BV(P+";",n,r,f-1):BV(ha(P," ","")+";",n,r,f-2),c);break;case 59:P+=";";default:if(H_(D=$V(P,t,r,u,d,a,o,N,E=[],C=[],f),i),_===123)if(d===0)g5(P,t,D,D,E,i,f,o,C);else switch(h===99&&oo(P,3)===110?100:h){case 100:case 108:case 109:case 115:g5(e,D,D,n&&H_($V(e,D,D,0,0,a,o,N,a,E=[],f),C),a,C,f,o,n?E:C);break;default:g5(P,D,D,D,[""],C,0,o,C)}}u=d=m=0,g=b=1,N=P="",f=s;break;case 58:f=1+qd(P),m=w;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&YYe()==125)continue}switch(P+=u3(_),_*g){case 38:b=d>0?1:(P+="\f",-1);break;case 44:o[u++]=(qd(P)-1)*b,b=1;break;case 64:lf()===45&&(P+=m5(bc())),h=lf(),d=f=qd(N=P+=ZYe(p5())),_++;break;case 45:w===45&&qd(P)==2&&(g=0)}}return i}function $V(e,t,r,n,a,i,s,o,c,u,d){for(var f=a-1,h=a===0?i:[""],m=T7(h),w=0,g=0,y=0;w<n;++w)for(var b=0,_=Dw(e,f+1,f=qYe(g=s[w])),N=e;b<m;++b)(N=Sse(g>0?h[b]+" "+_:ha(_,/&\f/g,h[b])))&&(c[y++]=N);return f3(e,t,r,a===0?C7:o,c,u,d)}function eKe(e,t,r){return f3(e,t,r,bse,u3(GYe()),Dw(e,2,-2),0)}function BV(e,t,r,n){return f3(e,t,r,P7,Dw(e,0,n),Dw(e,n+1,-1),n)}function m1(e,t){for(var r="",n=T7(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function tKe(e,t,r,n){switch(e.type){case UYe:if(e.children.length)break;case BYe:case P7:return e.return=e.return||e.value;case bse:return"";case _se:return e.return=e.value+"{"+m1(e.children,n)+"}";case C7:e.value=e.props.join(",")}return qd(r=m1(e.children,n))?e.return=e.value+"{"+r+"}":""}function rKe(e){var t=T7(e);return function(r,n,a,i){for(var s="",o=0;o<t;o++)s+=e[o](r,n,a,i)||"";return s}}function nKe(e){return function(t){t.root||(t=t.return)&&e(t)}}function aKe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var iKe=function(t,r,n){for(var a=0,i=0;a=i,i=lf(),a===38&&i===12&&(r[n]=1),!Iw(i);)bc();return yb(t,ql)},sKe=function(t,r){var n=-1,a=44;do switch(Iw(a)){case 0:a===38&&lf()===12&&(r[n]=1),t[n]+=iKe(ql-1,r,n);break;case 2:t[n]+=m5(a);break;case 4:if(a===44){t[++n]=lf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=u3(a)}while(a=bc());return t},oKe=function(t,r){return kse(sKe(Ase(t),r))},UV=new WeakMap,lKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,a=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!UV.get(n))&&!a){UV.set(t,!0);for(var i=[],s=oKe(r,i),o=n.props,c=0,u=0;c<s.length;c++)for(var d=0;d<o.length;d++,u++)t.props[u]=i[c]?s[c].replace(/&\f/g,o[d]):o[d]+" "+s[c]}}},cKe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Ese(e,t){switch(zYe(e,t)){case 5103:return fa+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fa+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return fa+e+d4+e+Co+e+e;case 6828:case 4268:return fa+e+Co+e+e;case 6165:return fa+e+Co+"flex-"+e+e;case 5187:return fa+e+ha(e,/(\w+).+(:[^]+)/,fa+"box-$1$2"+Co+"flex-$1$2")+e;case 5443:return fa+e+Co+"flex-item-"+ha(e,/flex-|-self/,"")+e;case 4675:return fa+e+Co+"flex-line-pack"+ha(e,/align-content|flex-|-self/,"")+e;case 5548:return fa+e+Co+ha(e,"shrink","negative")+e;case 5292:return fa+e+Co+ha(e,"basis","preferred-size")+e;case 6060:return fa+"box-"+ha(e,"-grow","")+fa+e+Co+ha(e,"grow","positive")+e;case 4554:return fa+ha(e,/([^-])(transform)/g,"$1"+fa+"$2")+e;case 6187:return ha(ha(ha(e,/(zoom-|grab)/,fa+"$1"),/(image-set)/,fa+"$1"),e,"")+e;case 5495:case 3959:return ha(e,/(image-set\([^]*)/,fa+"$1$`$1");case 4968:return ha(ha(e,/(.+:)(flex-)?(.*)/,fa+"box-pack:$3"+Co+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fa+e+e;case 4095:case 3583:case 4068:case 2532:return ha(e,/(.+)-inline(.+)/,fa+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qd(e)-1-t>6)switch(oo(e,t+1)){case 109:if(oo(e,t+4)!==45)break;case 102:return ha(e,/(.+:)(.+)-([^]+)/,"$1"+fa+"$2-$3$1"+d4+(oo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$O(e,"stretch")?Ese(ha(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(oo(e,t+1)!==115)break;case 6444:switch(oo(e,qd(e)-3-(~$O(e,"!important")&&10))){case 107:return ha(e,":",":"+fa)+e;case 101:return ha(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+fa+(oo(e,14)===45?"inline-":"")+"box$3$1"+fa+"$2$3$1"+Co+"$2box$3")+e}break;case 5936:switch(oo(e,t+11)){case 114:return fa+e+Co+ha(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return fa+e+Co+ha(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return fa+e+Co+ha(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return fa+e+Co+e+e}return e}var uKe=function(t,r,n,a){if(t.length>-1&&!t.return)switch(t.type){case P7:t.return=Ese(t.value,t.length);break;case _se:return m1([S2(t,{value:ha(t.value,"@","@"+fa)})],a);case C7:if(t.length)return HYe(t.props,function(i){switch(VYe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return m1([S2(t,{props:[ha(i,/:(read-\w+)/,":"+d4+"$1")]})],a);case"::placeholder":return m1([S2(t,{props:[ha(i,/:(plac\w+)/,":"+fa+"input-$1")]}),S2(t,{props:[ha(i,/:(plac\w+)/,":"+d4+"$1")]}),S2(t,{props:[ha(i,/:(plac\w+)/,Co+"input-$1")]})],a)}return""})}},dKe=[uKe],fKe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var a=t.stylisPlugins||dKe,i={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)i[y[b]]=!0;o.push(g)});var c,u=[lKe,cKe];{var d,f=[tKe,nKe(function(g){d.insert(g)})],h=rKe(u.concat(a,f)),m=function(y){return m1(QYe(y),h)};c=function(y,b,_,N){d=_,m(y?y+"{"+b.styles+"}":b.styles),N&&(w.inserted[b.name]=!0)}}var w={key:r,sheet:new $Ye({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return w.sheet.hydrate(o),w},CT={exports:{}},wa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qV;function hKe(){if(qV)return wa;qV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,w=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,_=e?Symbol.for("react.scope"):60119;function N(C){if(typeof C=="object"&&C!==null){var D=C.$$typeof;switch(D){case t:switch(C=C.type,C){case c:case u:case n:case i:case a:case f:return C;default:switch(C=C&&C.$$typeof,C){case o:case d:case w:case m:case s:return C;default:return D}}case r:return D}}}function E(C){return N(C)===u}return wa.AsyncMode=c,wa.ConcurrentMode=u,wa.ContextConsumer=o,wa.ContextProvider=s,wa.Element=t,wa.ForwardRef=d,wa.Fragment=n,wa.Lazy=w,wa.Memo=m,wa.Portal=r,wa.Profiler=i,wa.StrictMode=a,wa.Suspense=f,wa.isAsyncMode=function(C){return E(C)||N(C)===c},wa.isConcurrentMode=E,wa.isContextConsumer=function(C){return N(C)===o},wa.isContextProvider=function(C){return N(C)===s},wa.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},wa.isForwardRef=function(C){return N(C)===d},wa.isFragment=function(C){return N(C)===n},wa.isLazy=function(C){return N(C)===w},wa.isMemo=function(C){return N(C)===m},wa.isPortal=function(C){return N(C)===r},wa.isProfiler=function(C){return N(C)===i},wa.isStrictMode=function(C){return N(C)===a},wa.isSuspense=function(C){return N(C)===f},wa.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===n||C===u||C===i||C===a||C===f||C===h||typeof C=="object"&&C!==null&&(C.$$typeof===w||C.$$typeof===m||C.$$typeof===s||C.$$typeof===o||C.$$typeof===d||C.$$typeof===y||C.$$typeof===b||C.$$typeof===_||C.$$typeof===g)},wa.typeOf=N,wa}var WV;function pKe(){return WV||(WV=1,CT.exports=hKe()),CT.exports}var PT,zV;function mKe(){if(zV)return PT;zV=1;var e=pKe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=a;function s(w){return e.isMemo(w)?a:i[w.$$typeof]||t}var o=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function m(w,g,y){if(typeof g!="string"){if(h){var b=f(g);b&&b!==h&&m(w,b,y)}var _=c(g);u&&(_=_.concat(u(g)));for(var N=s(w),E=s(g),C=0;C<_.length;++C){var D=_[C];if(!r[D]&&!(y&&y[D])&&!(E&&E[D])&&!(N&&N[D])){var P=d(g,D);try{o(w,D,P)}catch{}}}}return w}return PT=m,PT}mKe();var gKe=!0;function vKe(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(n+=a+" ")}),n}var Cse=function(t,r,n){var a=t.key+"-"+r.name;(n===!1||gKe===!1)&&t.registered[a]===void 0&&(t.registered[a]=r.styles)},yKe=function(t,r,n){Cse(t,r,n);var a=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+a:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function xKe(e){for(var t=0,r,n=0,a=e.length;a>=4;++n,a-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var wKe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bKe=/[A-Z]|^ms/g,_Ke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Pse=function(t){return t.charCodeAt(1)===45},VV=function(t){return t!=null&&typeof t!="boolean"},TT=aKe(function(e){return Pse(e)?e:e.replace(bKe,"-$&").toLowerCase()}),HV=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(_Ke,function(n,a,i){return Wd={name:a,styles:i,next:Wd},a})}return wKe[t]!==1&&!Pse(t)&&typeof r=="number"&&r!==0?r+"px":r};function Rw(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var a=r;if(a.anim===1)return Wd={name:a.name,styles:a.styles,next:Wd},a.name;var i=r;if(i.styles!==void 0){var s=i.next;if(s!==void 0)for(;s!==void 0;)Wd={name:s.name,styles:s.styles,next:Wd},s=s.next;var o=i.styles+";";return o}return SKe(e,t,r)}case"function":{if(e!==void 0){var c=Wd,u=r(e);return Wd=c,Rw(e,t,u)}break}}var d=r;return d}function SKe(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=Rw(e,t,r[a])+";";else for(var i in r){var s=r[i];if(typeof s!="object"){var o=s;VV(o)&&(n+=TT(i)+":"+HV(i,o)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&t==null)for(var c=0;c<s.length;c++)VV(s[c])&&(n+=TT(i)+":"+HV(i,s[c])+";");else{var u=Rw(e,t,s);switch(i){case"animation":case"animationName":{n+=TT(i)+":"+u+";";break}default:n+=i+"{"+u+"}"}}}return n}var GV=/label:\s*([^\s;{]+)\s*(;|$)/g,Wd;function Tse(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";Wd=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,a+=Rw(r,t,i);else{var s=i;a+=s[0]}for(var o=1;o<e.length;o++)if(a+=Rw(r,t,e[o]),n){var c=i;a+=c[o]}GV.lastIndex=0;for(var u="",d;(d=GV.exec(a))!==null;)u+="-"+d[1];var f=xKe(a)+u;return{name:f,styles:a,next:Wd}}var NKe=function(t){return t()},AKe=lx.useInsertionEffect?lx.useInsertionEffect:!1,kKe=AKe||NKe,Ose=S.createContext(typeof HTMLElement<"u"?fKe({key:"css"}):null);Ose.Provider;var EKe=function(t){return S.forwardRef(function(r,n){var a=S.useContext(Ose);return t(r,a,n)})},CKe=S.createContext({}),O7={}.hasOwnProperty,UO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",PKe=function(t,r){var n={};for(var a in r)O7.call(r,a)&&(n[a]=r[a]);return n[UO]=t,n},TKe=function(t){var r=t.cache,n=t.serialized,a=t.isStringTag;return Cse(r,n,a),kKe(function(){return yKe(r,n,a)}),null},OKe=EKe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[UO],i=[n],s="";typeof e.className=="string"?s=vKe(t.registered,i,e.className):e.className!=null&&(s=e.className+" ");var o=Tse(i,void 0,S.useContext(CKe));s+=t.key+"-"+o.name;var c={};for(var u in e)O7.call(e,u)&&u!=="css"&&u!==UO&&(c[u]=e[u]);return c.className=s,r&&(c.ref=r),S.createElement(S.Fragment,null,S.createElement(TKe,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))}),DKe=OKe,YV=function(t,r){var n=arguments;if(r==null||!O7.call(r,"css"))return S.createElement.apply(void 0,n);var a=n.length,i=new Array(a);i[0]=DKe,i[1]=PKe(t,r);for(var s=2;s<a;s++)i[s]=n[s];return S.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(YV||(YV={}));function IKe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Tse(t)}function RKe(){var e=IKe.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const G_=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch{return"Invalid Date"}};RKe`
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
`;const MKe=({status:e})=>{if(!e)return l(vc,{variant:"outline",className:"bg-gray-200 text-gray-700",children:"Unknown"});let t="default",r="";switch(e){case"Active":t="default",r="bg-green-100 text-green-800";break;case"Under Maintenance":t="secondary",r="bg-yellow-100 text-yellow-800 animate-blink";break;case"Retired":t="outline",r="bg-gray-200 text-gray-700";break;case"Disposed":t="destructive",r="bg-red-100 text-red-800";break;default:t="outline",r="bg-gray-200 text-gray-700";break}return l(vc,{variant:t,className:r,children:e})},FKe=({onMarkAsServiced:e,onDisposeAsset:t,refreshTrigger:r,searchTerm:n,categoryFilter:a,statusFilter:i,tagFilter:s,onDataFiltered:o})=>{const[c,u]=S.useState([]),[d,f]=S.useState(!0),[h,m]=S.useState(null),[w,g]=S.useState("asset_name"),[y,b]=S.useState("asc"),{toast:_}=_n(),[N,E]=S.useState(!1),[C,D]=S.useState(null),P=S.useCallback(async()=>{f(!0),m(null);try{let T=$e.from("assets").select(`
        *,
        asset_tags (
          tags (id, name, color)
        )
      `);n&&(T=T.or(`asset_name.ilike.%${n}%,serial_number.ilike.%${n}%`)),a!=="all"&&(T=T.eq("category",a)),i!=="all"&&(T=T.eq("status",i)),s!=="all"&&console.warn("Tag filtering in AssetList is not fully implemented for direct client-side query. Requires RPC or subquery.");const R={ascending:y==="asc"},j=["serial_number","location","purchase_date","warranty_expiry_date","next_maintenance_due_date","status"];j.includes(w)&&y==="asc"?R.nullsFirst=!1:j.includes(w)&&y==="desc"&&(R.nullsFirst=!0),T=T.order(w,R);const{data:Y,error:Z}=await T;if(Z)throw Z;const re=(Y||[]).map(z=>({...z,tags:Array.isArray(z.asset_tags)?z.asset_tags.map(q=>q.tags).filter(Boolean):[]}));u(re),o(re)}catch(T){console.error("Failed to fetch assets:",T),m(T instanceof Error?T.message:"An unknown error occurred"),_({title:"Error Fetching Assets",description:T instanceof Error?T.message:"Could not load assets.",variant:"destructive"})}finally{f(!1)}},[_,n,a,i,s,w,y,o]),F=T=>{D(T),E(!0)};S.useEffect(()=>{P()},[P,r]),S.useEffect(()=>{if(!$e)return;const T=$e.channel("assets_changes").on("postgres_changes",{event:"*",schema:"public",table:"assets"},R=>{console.log("Asset Realtime change received:",R),P()}).subscribe((R,j)=>{R==="SUBSCRIBED"&&console.log("Subscribed to asset changes!"),(R==="CHANNEL_ERROR"||R==="TIMED_OUT"||R==="CLOSED")&&console.error("Asset Realtime subscription error/closed:",R,j)});return()=>{console.log("Unsubscribing from asset changes"),$e.removeChannel(T)}},[$e,_,P]);const L=T=>{w===T?b(R=>R==="asc"?"desc":"asc"):(g(T),b("asc"))},W=T=>w!==T?l(w5,{className:"ml-2 h-4 w-4 opacity-30 group-hover:opacity-100"}):l(w5,{className:`ml-2 h-4 w-4 ${y==="asc"?"":"rotate-180"}`});return d?l("div",{className:"space-y-2",children:[...Array(5)].map((T,R)=>l($l,{className:"h-10 w-full"},R))}):h?x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:h})]}):c.length===0?l("p",{className:"text-center text-gray-500 mt-4",children:"No assets found matching the criteria."}):x("div",{className:"rounded-md border",children:[x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:x(Fe,{variant:"ghost",onClick:()=>L("asset_name"),className:"px-0 group",children:["Asset Name ",W("asset_name")]})}),l(Kt,{children:x(Fe,{variant:"ghost",onClick:()=>L("category"),className:"px-0 group",children:["Category ",W("category")]})}),l(Kt,{children:"Tags"}),l(Kt,{children:x(Fe,{variant:"ghost",onClick:()=>L("serial_number"),className:"px-0 group",children:["Serial No. ",W("serial_number")]})}),l(Kt,{children:x(Fe,{variant:"ghost",onClick:()=>L("location"),className:"px-0 group",children:["Location ",W("location")]})}),l(Kt,{children:x(Fe,{variant:"ghost",onClick:()=>L("status"),className:"px-0 group",children:["Status ",W("status")]})}),l(Kt,{className:"hidden md:table-cell",children:x(Fe,{variant:"ghost",onClick:()=>L("purchase_date"),className:"px-0 group",children:["Purchase Date ",W("purchase_date")]})}),l(Kt,{className:"hidden md:table-cell",children:x(Fe,{variant:"ghost",onClick:()=>L("warranty_expiry_date"),className:"px-0 group",children:["Warranty Expiry ",W("warranty_expiry_date")]})}),l(Kt,{className:"hidden md:table-cell",children:x(Fe,{variant:"ghost",onClick:()=>L("last_serviced_date"),className:"px-0 group",children:["Last Serviced ",W("last_serviced_date")]})}),l(Kt,{className:"hidden md:table-cell",children:x(Fe,{variant:"ghost",onClick:()=>L("next_maintenance_due_date"),className:"px-0 group",children:["Next Due ",W("next_maintenance_due_date")]})}),l(Kt,{className:"text-right",children:"Actions"})," "]})}),l(zo,{children:c.map(T=>x(Dn,{children:[l(Wt,{className:"font-medium p-2 text-center text-sm",children:T.asset_name}),l(Wt,{className:"p-2 text-center text-sm",children:T.category}),l(Wt,{className:"p-2 text-center text-sm",children:T.tags&&T.tags.length>0?T.tags.map(R=>l(vc,{variant:"outline",className:"mr-1 mb-1 text-xs",style:R.color?{backgroundColor:R.color,color:"#fff",borderColor:R.color}:{},children:R.name},R.id)):"-"}),l(Wt,{className:"p-2 text-center text-sm",children:T.serial_number||"N/A"}),l(Wt,{className:"p-2 text-center text-sm",children:T.location||"N/A"}),l(Wt,{className:"p-2 text-center text-sm",children:l(MKe,{status:T.status})}),l(Wt,{className:"hidden md:table-cell p-2 text-center text-sm",children:G_(T.purchase_date)}),l(Wt,{className:"hidden md:table-cell p-2 text-center text-sm",children:G_(T.warranty_expiry_date)}),l(Wt,{className:"hidden md:table-cell p-2 text-center text-sm",children:G_(T.last_serviced_date)}),l(Wt,{className:"hidden md:table-cell p-2 text-center text-sm",children:G_(T.next_maintenance_due_date)}),l(Wt,{className:"text-right p-2 text-sm",children:x("div",{className:"flex items-center justify-end space-x-1",children:[T.service_document_url&&l(Fe,{variant:"ghost",size:"icon",asChild:!0,title:"View Service Document",children:l("a",{href:T.service_document_url,target:"_blank",rel:"noopener noreferrer",children:l(Oce,{className:"h-4 w-4"})})}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>e(T),title:"Mark as Serviced",disabled:T.status==="Retired"||T.status==="Disposed",children:l(Yce,{className:"h-4 w-4"})}),l(Fe,{variant:"ghost",size:"icon",asChild:!0,title:"View Details",children:l(Yi,{to:`/assets/${T.id}`,children:l(Fw,{className:"h-4 w-4"})})}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>t(T),title:"Dispose Asset",disabled:T.status==="Disposed"||T.status==="Retired",children:l(GH,{className:"h-4 w-4"})}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>F(T),title:"Set Maintenance Interval",children:l(_ce,{className:"h-4 w-4"})})]})})]},T.id))})]}),N&&C&&l(FYe,{asset:C,isOpen:N,onOpenChange:E,onIntervalSet:()=>{P(),_({title:"Success",description:"Maintenance interval updated."})}})]})},D7="assets",LKe=async()=>{const{data:e,error:t}=await $e.from(D7).select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching assets:",t),new Error(t.message);return e||[]},jKe=async e=>{const t={...e,serial_number:e.serial_number||null,location:e.location||null,supplier_info:e.supplier_info||null,service_document_url:e.service_document_url||null,barcode_value:e.barcode_value||null},{data:r,error:n}=await $e.from(D7).insert([t]).select().single();if(n)throw console.error("Error adding asset:",n),n.code==="23505"?new Error(`Failed to add asset. ${n.details||"A unique value (like Serial Number or Barcode) might already exist."}`):new Error(n.message);if(!r)throw new Error("Failed to add asset, no data returned.");return r},$Ke=async(e,t)=>{const r={...t};r.serial_number===""&&(r.serial_number=null),r.location===""&&(r.location=null),r.supplier_info===""&&(r.supplier_info=null),r.service_document_url===""&&(r.service_document_url=null),r.barcode_value===""&&(r.barcode_value=null);const{data:n,error:a}=await $e.from(D7).update(r).eq("id",e).select().single();if(a)throw console.error(`Error updating asset ${e}:`,a),a.code==="23505"?a.details.includes("serial_number")?new Error("Failed to update asset. The provided Serial Number already exists."):a.details.includes("barcode_value")?new Error("Failed to update asset. The provided Barcode/QR Code Value already exists."):new Error(`Failed to update asset. ${a.details||"A unique value (like Serial Number or Barcode) might already exist."}`):new Error(a.message);if(!n)throw new Error(`Failed to update asset ${e}, no data returned.`);return n},BKe=VN({asset_name:ro().min(1,{message:"Asset name is required"}),category:gw(["Equipment & Tools","Furniture","IT","Other"],{required_error:"Category is required"}),serial_number:ro().optional().nullable(),location:ro().optional().nullable(),purchase_date:ro().optional().nullable(),purchase_price:xR.number().min(0,{message:"Price must be 0 or greater"}).optional().nullable(),warranty_expiry_date:ro().optional().nullable(),last_serviced_date:ro().optional().nullable(),next_maintenance_due_date:ro().optional().nullable(),status:gw(["Active","Under Maintenance","Retired","Disposed"],{required_error:"Status is required"}),supplier_info:ro().optional().nullable(),service_document_url:ro().url({message:"Please enter a valid URL"}).optional().nullable(),barcode_value:ro().optional().nullable(),requires_maintenance:yR().optional().default(!1)}),UKe=({assetToEdit:e,onSave:t,onCancel:r})=>{const{toast:n}=_n(),a=!!e,i=["Equipment & Tools","Furniture","IT","Other"],s=["Active","Under Maintenance","Retired","Disposed"],o=g=>{if(g&&i.includes(g))return g},c=g=>{if(g&&s.includes(g))return g},u=g=>{if(g)try{return new Date(g).toISOString().split("T")[0]}catch{return}},d=fd({resolver:hd(BKe),defaultValues:{asset_name:(e==null?void 0:e.asset_name)??"",category:o(e==null?void 0:e.category),serial_number:(e==null?void 0:e.serial_number)??"",location:(e==null?void 0:e.location)??"",purchase_date:u(e==null?void 0:e.purchase_date),purchase_price:e!=null&&e.purchase_price?Number(e.purchase_price):null,warranty_expiry_date:u(e==null?void 0:e.warranty_expiry_date),last_serviced_date:u(e==null?void 0:e.last_serviced_date),next_maintenance_due_date:u(e==null?void 0:e.next_maintenance_due_date),status:c(e==null?void 0:e.status)??"Active",supplier_info:(e==null?void 0:e.supplier_info)??"",service_document_url:(e==null?void 0:e.service_document_url)??"",barcode_value:(e==null?void 0:e.barcode_value)??"",requires_maintenance:(e==null?void 0:e.requires_maintenance)??!1}}),{handleSubmit:f,control:h,reset:m}=d;return S.useEffect(()=>{m(e?{asset_name:e.asset_name,category:o(e.category),serial_number:e.serial_number??"",location:e.location??"",purchase_date:u(e.purchase_date),purchase_price:e.purchase_price?Number(e.purchase_price):null,warranty_expiry_date:u(e.warranty_expiry_date),last_serviced_date:u(e.last_serviced_date),next_maintenance_due_date:u(e.next_maintenance_due_date),status:c(e.status),supplier_info:e.supplier_info??"",service_document_url:e.service_document_url??"",barcode_value:e.barcode_value??"",requires_maintenance:e.requires_maintenance??!1}:{asset_name:"",category:void 0,serial_number:"",location:"",purchase_date:"",purchase_price:null,warranty_expiry_date:"",last_serviced_date:"",next_maintenance_due_date:"",status:"Active",supplier_info:"",service_document_url:"",barcode_value:"",requires_maintenance:!1})},[e,m]),l(Mh,{...d,children:x("form",{onSubmit:f(async g=>{try{let y;const b={...g};a&&e?(y=await $Ke(e.id,b),n({title:"Success",description:"Asset updated."})):(y=await jKe(b),n({title:"Success",description:"New asset added."})),t(y)}catch(y){console.error("Failed to save asset:",y),n({title:"Error",description:`Failed to save asset: ${y instanceof Error?y.message:"Unknown error"}`,variant:"destructive"})}}),className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Basic Information"}),l(He,{control:h,name:"asset_name",render:({field:g})=>x(De,{children:[l(Oe,{children:"Asset Name *"}),l(je,{children:l(ht,{placeholder:"e.g., Dental Chair Unit X1",...g})}),l(Ze,{})]})}),l(He,{control:h,name:"category",render:({field:g})=>x(De,{children:[l(Oe,{children:"Category *"}),x(Ur,{onValueChange:g.onChange,value:g.value??"",defaultValue:g.value??"",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select a category"})})}),l($r,{children:i.map(y=>l(wt,{value:y,children:y},y))})]}),l(Ze,{})]})}),l(He,{control:h,name:"serial_number",render:({field:g})=>x(De,{children:[l(Oe,{children:"Serial Number"}),l(je,{children:l(ht,{placeholder:"Asset Serial Number",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"location",render:({field:g})=>x(De,{children:[l(Oe,{children:"Location"}),l(je,{children:l(ht,{placeholder:"e.g., Room 3, North Branch",...g,value:g.value??""})}),l(Ze,{})]})})]}),x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Status & Warranty"}),l(He,{control:h,name:"status",render:({field:g})=>x(De,{children:[l(Oe,{children:"Status *"}),x(Ur,{onValueChange:g.onChange,value:g.value??"",defaultValue:g.value??"",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select asset status"})})}),l($r,{children:s.map(y=>l(wt,{value:y,children:y},y))})]}),l(Ze,{})]})}),l(He,{control:h,name:"warranty_expiry_date",render:({field:g})=>x(De,{children:[l(Oe,{children:"Warranty Expiry"}),l(je,{children:l(ht,{type:"date",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"requires_maintenance",render:({field:g})=>l(De,{className:"md:col-span-2",children:x("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[l(je,{children:l(Fo,{checked:g.value,onCheckedChange:g.onChange})}),x("div",{className:"space-y-1 leading-none",children:[l(Oe,{children:"Requires Maintenance"}),l(mi,{children:"Check this box if the asset currently requires maintenance."})]})]})})})]}),x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Purchase Details"}),l(He,{control:h,name:"purchase_date",render:({field:g})=>x(De,{children:[l(Oe,{children:"Date"}),l(je,{children:l(ht,{type:"date",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"purchase_price",render:({field:g})=>x(De,{children:[l(Oe,{children:"Price"}),l(je,{children:l(ht,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...g,value:String(g.value??"")})}),l(Ze,{})]})})]}),x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Maintenance Details"}),l(He,{control:h,name:"last_serviced_date",render:({field:g})=>x(De,{children:[l(Oe,{children:"Last Serviced"}),l(je,{children:l(ht,{type:"date",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"next_maintenance_due_date",render:({field:g})=>x(De,{children:[l(Oe,{children:"Next Due"}),l(je,{children:l(ht,{type:"date",...g,value:g.value??""})}),l(Ze,{})]})})]}),x("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold md:col-span-2",children:"Additional Information"}),l(He,{control:h,name:"supplier_info",render:({field:g})=>x(De,{className:"md:col-span-2",children:[l(Oe,{children:"Supplier Info"}),l(je,{children:l(on,{placeholder:"Supplier name, contact, notes...",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"service_document_url",render:({field:g})=>x(De,{children:[l(Oe,{children:"Service Doc URL"}),l(je,{children:l(ht,{type:"url",placeholder:"https://example.com/invoice.pdf",...g,value:g.value??""})}),l(Ze,{})]})}),l(He,{control:h,name:"barcode_value",render:({field:g})=>x(De,{children:[l(Oe,{children:"Barcode/QR"}),l(je,{children:l(ht,{placeholder:"Scan or enter code",...g,value:g.value??""})}),l(Ze,{})]})})]}),x("div",{className:"md:col-span-2 rounded-md border p-4",children:[l("h3",{className:"text-lg font-semibold mb-4",children:"Tags"}),l("div",{className:"min-h-[60px] text-muted-foreground",children:"Tag management UI will be implemented here. (e.g., Multi-select combobox)"})]}),x("div",{className:"md:col-span-2 flex justify-end space-x-2 pt-4",children:[l(Fe,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l(Fe,{type:"submit",disabled:d.formState.isSubmitting,children:d.formState.isSubmitting?"Saving...":a?"Update Asset":"Add Asset"})]})]})})},qKe=({asset:e,open:t,onOpenChange:r,onSuccess:n})=>{const[a,i]=S.useState(""),[s,o]=S.useState(""),[c,u]=S.useState(void 0),[d,f]=S.useState([]),[h,m]=S.useState(!1),[w,g]=S.useState(!1),{toast:y}=_n();S.useEffect(()=>{(async()=>{if(e!=null&&e.id&&t){g(!0);const{data:N,error:E}=await $e.from("asset_documents").select("id, file_name").eq("asset_id",e.id).order("uploaded_at",{ascending:!1});E?(console.error("Error fetching asset documents for dialog:",E),y({title:"Error",description:"Could not load documents for invoice selection.",variant:"destructive"})):f(N||[]),g(!1)}else t||f([])})()},[e,t,y]),S.useEffect(()=>{t&&(i(""),o(""),u(void 0))},[t,e]);const b=async()=>{if(!e||!e.id){y({title:"Error",description:"No asset selected.",variant:"destructive"});return}if(!e.maintenance_interval_months||e.maintenance_interval_months<=0){y({title:"Configuration Error",description:"Maintenance interval is not set for this asset. Please edit the asset to set a valid maintenance interval.",variant:"destructive"});return}const{data:{user:_},error:N}=await $e.auth.getUser();if(N||!_){y({title:"Authentication Error",description:"Could not get current user. Please ensure you are logged in.",variant:"destructive"});return}const E=_.id,C=parseFloat(s)||0;m(!0);try{const{error:D}=await $e.rpc("mark_asset_as_serviced",{p_asset_id:e.id,p_serviced_by_user_id:E,p_service_notes:a,p_maintenance_cost:C,p_invoice_document_id:c||null});if(D)throw D;y({title:"Success",description:`${e.asset_name} marked as serviced.`}),n(),r(!1)}catch(D){console.error("Error marking asset as serviced:",D),y({title:"Error",description:D.message||"Could not mark asset as serviced.",variant:"destructive"})}finally{m(!1)}};return e?l(Vn,{open:t,onOpenChange:r,children:x(Bn,{className:"sm:max-w-md",children:[l(Jn,{children:x(Zn,{children:["Mark as Serviced: ",e.asset_name]})}),x("div",{className:"py-4 grid gap-4",children:[x("div",{children:[x("p",{children:[l("strong",{children:"Asset:"})," ",e.asset_name]}),x("p",{children:[l("strong",{children:"Last Serviced:"})," ",e.last_serviced_date?new Date(e.last_serviced_date).toLocaleDateString():"N/A"]}),x("p",{children:[l("strong",{children:"Next Due:"})," ",e.next_maintenance_due_date?new Date(e.next_maintenance_due_date).toLocaleDateString():"N/A"]})]}),x("div",{children:[l(tr,{htmlFor:"maintenance-cost",children:"Maintenance Cost (₹)"}),l(ht,{id:"maintenance-cost",type:"number",value:s,onChange:_=>o(_.target.value),placeholder:"0.00"})]}),x("div",{children:[l(tr,{htmlFor:"invoice-document",children:"Link Invoice (Optional)"}),x(Ur,{onValueChange:u,value:c,children:[l(jr,{id:"invoice-document",disabled:w||d.length===0,children:l(qr,{placeholder:w?"Loading documents...":d.length===0?"No documents available":"Select an invoice"})}),x($r,{children:[l(wt,{value:"none",children:"None"}),d.map(_=>l(wt,{value:_.id,children:_.file_name},_.id))]})]}),d.length===0&&!w&&l("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload documents on the asset detail page first."})]}),x("div",{children:[l(tr,{htmlFor:"service-notes",children:"Service Notes (Optional)"}),l(on,{id:"service-notes",value:a,onChange:_=>i(_.target.value),placeholder:"Enter any notes about the service performed..."})]}),(!e.maintenance_interval_months||e.maintenance_interval_months<=0)&&l("p",{className:"text-sm text-destructive",children:"Warning: Maintenance interval is not set for this asset. The next due date cannot be calculated automatically. Please edit the asset to set a maintenance interval."})]}),x(fs,{children:[l(MN,{asChild:!0,children:l(Fe,{variant:"outline",children:"Cancel"})}),l(Fe,{onClick:b,disabled:h||!e.maintenance_interval_months||e.maintenance_interval_months<=0,children:h?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):"Confirm Service"})]})]})}):null},WKe=["Sold","Scrapped","Donated","Stolen","Obsolete","Other"],zKe=({asset:e,open:t,onOpenChange:r,onSuccess:n})=>{const[a,i]=S.useState(new Date),[s,o]=S.useState(void 0),[c,u]=S.useState(""),[d,f]=S.useState(""),[h,m]=S.useState(!1),{toast:w}=_n();S.useEffect(()=>{t&&(i(new Date),o(void 0),u(""),f(""))},[t,e]);const g=async()=>{if(!e||!e.id){w({title:"Error",description:"No asset selected.",variant:"destructive"});return}if(!a){w({title:"Validation Error",description:"Disposal date is required.",variant:"destructive"});return}if(!s){w({title:"Validation Error",description:"Disposal reason is required.",variant:"destructive"});return}const{data:{user:y},error:b}=await $e.auth.getUser();if(b||!y){w({title:"Authentication Error",description:"Could not get current user.",variant:"destructive"});return}m(!0);try{const _=parseFloat(d)||0,N=Mt(a,"yyyy-MM-dd"),{error:E}=await $e.rpc("dispose_asset",{p_asset_id:e.id,p_disposed_by_user_id:y.id,p_disposal_date:N,p_disposal_reason:s,p_salvage_value:_,p_disposal_notes:c});if(E)throw E;w({title:"Success",description:`${e.asset_name} marked as disposed.`}),n(),r(!1)}catch(_){console.error("Error disposing asset:",_),w({title:"Error",description:_.message||"Could not dispose asset.",variant:"destructive"})}finally{m(!1)}};return e?l(Vn,{open:t,onOpenChange:r,children:x(Bn,{className:"sm:max-w-[500px]",children:[l(Jn,{children:x(Zn,{children:["Dispose Asset: ",e.asset_name]})}),x("div",{className:"py-4 grid gap-4",children:[x("div",{children:[l(tr,{htmlFor:"disposal-date",children:"Disposal Date"}),x(pg,{children:[l(mg,{asChild:!0,children:x(Fe,{variant:"outline",className:Lt("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[l(Oi,{className:"mr-2 h-4 w-4"}),a?Mt(a,"PPP"):l("span",{children:"Pick a date"})]})}),l(wm,{className:"w-auto p-0",children:l(bm,{mode:"single",selected:a,onSelect:i,initialFocus:!0})})]})]}),x("div",{children:[l(tr,{htmlFor:"disposal-reason",children:"Reason"}),x(Ur,{onValueChange:y=>o(y),value:s,children:[l(jr,{id:"disposal-reason",children:l(qr,{placeholder:"Select disposal reason"})}),l($r,{children:WKe.map(y=>l(wt,{value:y,children:y},y))})]})]}),x("div",{children:[l(tr,{htmlFor:"salvage-value",children:"Salvage Value (₹)"}),l(ht,{id:"salvage-value",type:"number",value:d,onChange:y=>f(y.target.value),placeholder:"0.00"})]}),x("div",{children:[l(tr,{htmlFor:"disposal-notes",children:"Notes (Optional)"}),l(on,{id:"disposal-notes",value:c,onChange:y=>u(y.target.value),placeholder:"Enter any additional notes about the disposal..."})]})]}),x(fs,{children:[l(MN,{asChild:!0,children:l(Fe,{variant:"outline",children:"Cancel"})}),l(Fe,{onClick:g,disabled:h||!a||!s,children:h?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):"Confirm Disposal"})]})]})}):null},VKe=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[a,i]=S.useState(null),[s,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,m]=S.useState(0),[w,g]=S.useState(""),[y,b]=S.useState("all"),[_,N]=S.useState("all"),[E,C]=S.useState("all"),[D,P]=S.useState([]),[F,L]=S.useState([]);S.useEffect(()=>{(async()=>{const{data:O,error:J}=await $e.from("tags").select("id, name").order("name");J?console.error("Error fetching tags:",J):P(O||[])})()},[]);const W=Q=>{n(null),t(!0)},T=()=>{t(!1),n(null)},R=Q=>{i(Q),o(!0)},j=Q=>{u(Q),f(!0)},Y=()=>{m(Q=>Q+1)},Z=Q=>{console.log("Asset saved:",Q),T(),m(O=>O+1)},re=Q=>{g(Q.target.value),m(O=>O+1)},z=Q=>{b(Q),m(O=>O+1)},q=Q=>{N(Q),m(O=>O+1)},B=Q=>{C(Q),m(O=>O+1)},G=S.useCallback(Q=>{L(Q)},[]);return x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"Asset Management"})," ",x("div",{className:"mb-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[x("div",{className:"flex flex-col md:flex-row gap-2 flex-grow",children:[l(ht,{placeholder:"Search by name or serial...",value:w,onChange:re,className:"max-w-sm"}),x(Ur,{value:y,onValueChange:z,children:[l(jr,{className:"w-full md:w-[180px]",children:l(qr,{placeholder:"Filter by Category"})}),x($r,{children:[l(wt,{value:"all",children:"All Categories"}),l(wt,{value:"Equipment",children:"Equipment"}),l(wt,{value:"Furniture",children:"Furniture"}),l(wt,{value:"IT",children:"IT"}),l(wt,{value:"Other",children:"Other"})]})]}),x(Ur,{value:_,onValueChange:q,children:[l(jr,{className:"w-full md:w-[180px]",children:l(qr,{placeholder:"Filter by Status"})}),x($r,{children:[l(wt,{value:"all",children:"All Statuses"}),l(wt,{value:"Active",children:"Active"}),l(wt,{value:"Under Maintenance",children:"Under Maintenance"}),l(wt,{value:"Retired",children:"Retired"}),l(wt,{value:"Disposed",children:"Disposed"})]})]}),x(Ur,{value:E,onValueChange:B,children:[l(jr,{className:"w-full md:w-[180px]",children:l(qr,{placeholder:"Filter by Tag"})}),x($r,{children:[l(wt,{value:"all",children:"All Tags"}),D.map(Q=>l(wt,{value:Q.id,children:Q.name},Q.id))]})]})]}),l("div",{className:"flex gap-2",children:x(Vn,{open:e,onOpenChange:t,children:[l(rb,{asChild:!0,children:x(Fe,{onClick:()=>W(),children:[l(Ch,{className:"mr-2 h-4 w-4"})," Add New Asset"]})}),x(Bn,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[l(Jn,{children:l(Zn,{children:r?"Edit Asset":"Add New Asset"})}),l(UKe,{assetToEdit:r,onSave:Z,onCancel:T})]})]})})]}),l(FKe,{onMarkAsServiced:R,onDisposeAsset:j,refreshTrigger:h,searchTerm:w,categoryFilter:y,statusFilter:_,onDataFiltered:G}),a&&l(qKe,{asset:a,open:s,onOpenChange:o,onSuccess:Y}),c&&l(zKe,{asset:c,open:d,onOpenChange:f,onSuccess:Y})]})},HKe=()=>{var E,C;const{assetId:e}=fy(),[t,r]=S.useState(null),[n,a]=S.useState([]),[i,s]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState(!0),[f,h]=S.useState(null),[m,w]=S.useState(!1),g=Qe.useRef(null),{toast:y}=_n(),b=async()=>{if(!e)return;const{data:D,error:P}=await $e.from("asset_documents").select("*").eq("asset_id",e).order("uploaded_at",{ascending:!1});P?console.error("Error fetching documents:",P):s(D||[])};S.useEffect(()=>{(async()=>{if(!e){h("Asset ID is missing."),d(!1);return}d(!0),h(null);try{const{data:P,error:F}=await $e.from("assets").select(`
            *,
            asset_tags (
              tag_id,
              tags (id, name, color)
            )
          `).eq("id",e).single();if(F)throw F;const L=P?{...P,tags:Array.isArray(P.asset_tags)?P.asset_tags.map(Y=>Y.tags).filter(Boolean):[]}:null;r(L);const{data:W,error:T}=await $e.from("maintenance_log").select("*").eq("asset_id",e).order("serviced_at",{ascending:!1});if(T)throw T;a(W||[]);const{data:R,error:j}=await $e.from("asset_documents").select("*").eq("asset_id",e).order("uploaded_at",{ascending:!1});if(j)throw j;if(s(R||[]),P&&(P.status==="Disposed"||P.status==="Retired")){const{data:Y,error:Z}=await $e.from("asset_disposal_log").select("*").eq("asset_id",e).order("disposal_recorded_at",{ascending:!1});if(Z)throw Z;c(Y||[])}}catch(P){console.error("Failed to fetch asset details:",P),h(P.message||"An unknown error occurred")}finally{d(!1)}})()},[e]);const _=async D=>{const P=D.target.files;if(!P||P.length===0||!e)return;const F=P[0];w(!0);try{const{data:{user:L},error:W}=await $e.auth.getUser();if(W||!L)throw new Error("User not authenticated.");const T=`public/${e}/${Date.now()}_${F.name}`,{error:R}=await $e.storage.from("asset-documents").upload(T,F);if(R)throw R;const{data:j}=$e.storage.from("asset-documents").getPublicUrl(T);if(!(j!=null&&j.publicUrl))throw new Error("Could not get public URL.");const{error:Y}=await $e.from("asset_documents").insert({asset_id:e,file_name:F.name,file_url:j.publicUrl,file_type:F.type,file_size_bytes:F.size,uploaded_by_user_id:L.id});if(Y)throw Y;y({title:"Success",description:"Document uploaded successfully."}),b()}catch(L){console.error("Error uploading document:",L),y({title:"Upload Error",description:L.message||"Failed to upload document.",variant:"destructive"})}finally{w(!1),g.current&&(g.current.value="")}};if(u)return x("div",{className:"container mx-auto p-4 md:p-6 space-y-4",children:[l($l,{className:"h-8 w-1/4"}),l($l,{className:"h-40 w-full"}),l($l,{className:"h-40 w-full"})]});if(f)return l("div",{className:"container mx-auto p-4 md:p-6",children:x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:f})]})});if(!t)return l("div",{className:"container mx-auto p-4 md:p-6",children:"Asset not found."});const N=D=>{if(!D)return"N/A";try{const P=new Date(D);return D.includes("T")?P.toLocaleString():P.toLocaleDateString()}catch{return"Invalid Date"}};return x("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[l(Fa,{heading:`Asset Details: ${t.asset_name}`}),x(or,{children:[l(xr,{children:l(br,{children:"Asset Information"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x("div",{children:[l("strong",{children:"Name:"})," ",t.asset_name]}),x("div",{children:[l("strong",{children:"Category:"})," ",t.category]}),x("div",{children:[l("strong",{children:"Serial Number:"})," ",t.serial_number||"N/A"]}),x("div",{children:[l("strong",{children:"Location:"})," ",t.location||"N/A"]}),x("div",{children:[l("strong",{children:"Status:"})," ",t.status]}),x("div",{children:[l("strong",{children:"Purchase Date:"})," ",N(t.purchase_date)]}),x("div",{children:[l("strong",{children:"Warranty Expiry:"})," ",N(t.warranty_expiry_date)]}),x("div",{children:[l("strong",{children:"Supplier Info:"})," ",t.supplier_info||"N/A"]}),x("div",{children:[l("strong",{children:"Maintenance Interval:"})," ",t.maintenance_interval_months?`${t.maintenance_interval_months} months`:"Not Set"]}),x("div",{children:[l("strong",{children:"Last Serviced:"})," ",N(t.last_serviced_date)]}),x("div",{children:[l("strong",{children:"Next Due:"})," ",N(t.next_maintenance_due_date)]}),x("div",{children:[l("strong",{children:"Purchase Cost:"})," ₹",((E=t.purchase_price)==null?void 0:E.toFixed(2))||"0.00"]}),x("div",{className:"md:col-span-2",children:[l("strong",{children:"Tags:"}),t.tags&&t.tags.length>0?l("span",{className:"ml-2",children:t.tags.map(D=>l(vc,{variant:"secondary",className:"mr-1 mb-1",style:D.color?{backgroundColor:D.color,color:"#fff"}:{},children:D.name},D.id))}):l("span",{className:"ml-2 text-muted-foreground",children:"No tags"})]})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Cost Tracking"})}),l(hr,{children:(()=>{const D=t.purchase_price||0,P=n.reduce((W,T)=>W+(T.maintenance_cost||0),0),F=(t.status==="Disposed"||t.status==="Retired")&&t.salvage_value||0,L=D+P-F;return x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x("div",{children:[l("strong",{children:"Purchase Cost:"})," ₹",D.toFixed(2)]}),x("div",{children:[l("strong",{children:"Total Maintenance Cost:"})," ₹",P.toFixed(2)]}),(t.status==="Disposed"||t.status==="Retired")&&x("div",{children:[l("strong",{children:"Salvage Value:"})," ₹",F.toFixed(2)]}),x("div",{children:[l("strong",{children:"Total Cost of Ownership:"})," ₹",L.toFixed(2)]})]})})()})]}),(t.status==="Disposed"||t.status==="Retired")&&t.disposal_date&&x(or,{className:"border-destructive",children:[l(xr,{children:l(br,{className:"text-destructive",children:"Disposal Information"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x("div",{children:[l("strong",{children:"Disposal Date:"})," ",N(t.disposal_date)]}),x("div",{children:[l("strong",{children:"Reason:"})," ",t.disposal_reason||"N/A"]}),x("div",{children:[l("strong",{children:"Salvage Value:"})," ₹",((C=t.salvage_value)==null?void 0:C.toFixed(2))||"0.00"]}),t.disposal_notes&&x("div",{className:"md:col-span-2",children:[l("strong",{children:"Notes:"})," ",t.disposal_notes]})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Maintenance History"})}),l(hr,{children:n.length>0?l("div",{className:"overflow-x-auto",children:x("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[l("thead",{className:"bg-gray-50",children:x("tr",{children:[l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Serviced At"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Prev. Next Due"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"New Next Due"})]})}),l("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(D=>{var F;const P=i.find(L=>L.id===D.invoice_document_id);return x("tr",{children:[l("td",{className:"px-4 py-2 whitespace-nowrap",children:N(D.serviced_at)}),x("td",{className:"px-4 py-2 whitespace-nowrap",children:["₹",((F=D.maintenance_cost)==null?void 0:F.toFixed(2))||"0.00"]}),l("td",{className:"px-4 py-2 whitespace-nowrap",children:P?l("a",{href:P.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:P.file_name}):D.invoice_document_id?"Invoice not found":"-"}),l("td",{className:"px-4 py-2",children:D.notes||"-"}),l("td",{className:"px-4 py-2 whitespace-nowrap",children:N(D.previous_next_maintenance_due_date)}),l("td",{className:"px-4 py-2 whitespace-nowrap",children:N(D.new_next_maintenance_due_date)})]},D.id)})})]})}):l("p",{className:"text-gray-500",children:"No maintenance history recorded."})})]}),o.length>0&&x(or,{children:[l(xr,{children:l(br,{children:"Disposal Log"})}),l(hr,{children:l("div",{className:"overflow-x-auto",children:x("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[l("thead",{className:"bg-gray-50",children:x("tr",{children:[l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Recorded At"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Disposal Date"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Salvage Value (₹)"}),l("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),l("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(D=>{var P;return x("tr",{children:[l("td",{className:"px-4 py-2 whitespace-nowrap",children:N(D.disposal_recorded_at)}),l("td",{className:"px-4 py-2 whitespace-nowrap",children:N(D.disposal_date)}),l("td",{className:"px-4 py-2",children:D.disposal_reason}),x("td",{className:"px-4 py-2 whitespace-nowrap",children:["₹",((P=D.salvage_value)==null?void 0:P.toFixed(2))||"0.00"]}),l("td",{className:"px-4 py-2",children:D.disposal_notes||"-"})]},D.id)})})]})})})]}),x(or,{children:[l(xr,{children:l(br,{children:"Documents"})}),x(hr,{children:[i.length>0?l("ul",{children:i.map(D=>x("li",{children:[l("a",{href:D.file_url,target:"_blank",rel:"noopener noreferrer",children:D.file_name})," (Uploaded: ",N(D.uploaded_at),")"]},D.id))}):l("p",{children:"No documents uploaded."}),x("div",{className:"mt-4 border-t pt-4",children:[l("h4",{className:"font-semibold mb-2",children:"Upload New Document"}),x("div",{className:"flex items-center gap-2",children:[l(ht,{type:"file",ref:g,onChange:_,disabled:m,className:"flex-grow"}),x(Fe,{size:"sm",onClick:()=>{var D;return(D=g.current)==null?void 0:D.click()},disabled:m,children:[m?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(Z0,{className:"mr-2 h-4 w-4"}),m?"Uploading...":"Choose File"]})]})]})]})]})]})};function I7({className:e,date:t,onDateChange:r}){return l("div",{className:Lt("grid gap-2",e),children:x(pg,{children:[l(mg,{asChild:!0,children:x(Fe,{id:"date",variant:"outline",className:Lt("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[l(Oi,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?x(_r,{children:[Mt(t.from,"LLL dd, y")," -"," ",Mt(t.to,"LLL dd, y")]}):Mt(t.from,"LLL dd, y"):l("span",{children:"Pick a date range"})]})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:r,numberOfMonths:2})})]})})}const Y_=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],KV={"In Stock":"#22C55E","Low Stock":"#FBBF24",Expired:"#F87171"},XV=["#4F46E5","#A5B4FC"],GKe=({inventoryData:e=[],logData:t=[]})=>{const r=S.useMemo(()=>{const c={Medicines:0,Tools:0,Consumables:0};return e.forEach(u=>{const d=u.category;d&&c[d]!==void 0&&c[d]++}),Object.entries(c).map(([u,d])=>({name:u,value:d}))},[e]),n=S.useMemo(()=>{const c={"In Stock":0,"Low Stock":0,Expired:0};return e.forEach(u=>{c[u.stock_status]!==void 0&&c[u.stock_status]++}),Object.entries(c).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]);e.length;const a=r.reduce((c,u)=>c+u.value,0),i=n.reduce((c,u)=>c+u.value,0),s=()=>{var h;const c=e.reduce((m,w)=>m+(w.quantity||0),0),u=[...t].sort((m,w)=>new Date(m.created_at).getTime()-new Date(w.created_at).getTime()),d=new Map;if(u.length===0){const m=Date.now();d.set(m,{timestamp:m,name:new Date(m).toLocaleDateString(),value:c})}else{const m=u.reduce((D,P)=>D+P.quantity_change,0),w=c-m,y=new Date(u[0].created_at).getTime()-1;d.set(y,{timestamp:y,name:new Date(y).toLocaleDateString(),value:w});let b=w;u.forEach(D=>{b+=D.quantity_change;const P=new Date(D.created_at).getTime();d.set(P,{timestamp:P,name:new Date(P).toLocaleDateString(),value:b})});const _=Array.from(d.keys()).pop()??y,N=Date.now(),E=24*60*60*1e3;(((h=d.get(_))==null?void 0:h.value)!==c||N-_>E)&&d.set(N,{timestamp:N,name:new Date(N).toLocaleDateString(),value:c})}return Array.from(d.values())},o=(c,u)=>{const{payload:d}=c;return l("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:d.map((f,h)=>{const m=u>0?(f.payload.value/u*100).toFixed(1):0;return x("div",{className:"flex items-center",children:[l("span",{className:"w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:f.color}}),f.payload.name," (",m,"%)"]},`legend-${f.payload.name}-${h}`)})})};return x("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[" ",x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Items by Category"})}),x(hr,{className:"flex flex-col items-center pt-4",children:[" ",l(Oo,{width:"100%",height:220,children:x(Jp,{children:[l($o,{data:r,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:r.map((c,u)=>l(Xc,{fill:Y_[u%Y_.length],stroke:Y_[u%Y_.length]},`cell-cat-${u}`))}),l(ti,{formatter:(c,u)=>[`${c} (${a>0?(c/a*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),l(Yu,{content:c=>o(c,a)})]})})]})]}),x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Items by Status"})}),x(hr,{className:"flex flex-col items-center pt-4",children:[" ",l(Oo,{width:"100%",height:220,children:x(Jp,{children:[l($o,{data:n,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:n.map((c,u)=>l(Xc,{fill:KV[c.name],stroke:KV[c.name]},`cell-stat-${u}`))}),l(ti,{formatter:(c,u)=>[`${c} (${i>0?(c/i*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),l(Yu,{content:c=>o(c,i)})]})})]})]}),x(or,{className:"md:col-span-2 lg:col-span-3",children:[" ",x(xr,{className:"pb-2",children:[" ",l(br,{className:"text-sm font-medium",children:"Item Quantities"}),l("p",{className:"text-xs text-muted-foreground",children:"Current stock vs. low stock threshold"})," "]}),x(hr,{className:"pb-4 pl-2 pr-4",children:[" ",l(Oo,{width:"100%",height:300,children:x(tw,{data:e,margin:{top:5,right:5,left:-10,bottom:5},barGap:4,barCategoryGap:"20%",children:[l(Rl,{dataKey:"item_name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"10px"},interval:0,angle:-45,textAnchor:"end",height:60}),l(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1}),l(ti,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(c,u)=>[`${c}`,u==="quantity"?"Quantity":"Low Stock Threshold"]}),l(nu,{dataKey:"quantity",fill:XV[0],name:"Quantity",radius:[4,4,0,0],barSize:10}),l(nu,{dataKey:"low_stock_threshold",fill:XV[1],name:"Low Stock Threshold",radius:[4,4,0,0],barSize:10})]})})]})]}),x(or,{className:"md:col-span-2 lg:col-span-3",children:[x(xr,{className:"flex flex-row items-center justify-between pb-2",children:[" ",x("div",{children:[l(br,{className:"text-sm font-medium",children:"Overall Inventory Trend"}),l("p",{className:"text-xs text-muted-foreground",children:"Total quantity changes over time"})," "]})]}),x(hr,{className:"pb-4 pl-2 pr-4",children:[" ",l(Oo,{width:"100%",height:300,children:x(gee,{data:s(),margin:{top:5,right:10,left:-10,bottom:5},children:[l("defs",{children:x("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[l("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.8}),l("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),l(QI,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),l(Rl,{dataKey:"timestamp",type:"number",domain:["dataMin","dataMax"],axisLine:!1,tickLine:!1,tickFormatter:c=>new Date(c).toLocaleDateString(),dy:10,style:{fontSize:"12px"}}),l(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1,domain:[0,"dataMax + 10"]}),l(ti,{contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(c,u,d)=>[`Total Quantity: ${c}`,d.payload.name]}),l(Ih,{type:"monotone",dataKey:"value",connectNulls:!0,stroke:"#4F46E5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:2,dot:{r:4,fill:"#4F46E5",stroke:"#fff",strokeWidth:2},activeDot:{r:6},name:"Total Quantity"})]})})]})]})]})},YKe=["Medicines","Tools","Consumables"],KKe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,i]=S.useState(!1),[s,o]=S.useState(null),[c,u]=S.useState(void 0),[d,f]=S.useState("all"),[h,m]=S.useState(""),[w,g]=S.useState({inventoryLevelStatus:{},upcomingExpiryItems:[]}),[y,b]=S.useState([]);S.useEffect(()=>{(async()=>{i(!0),o(null);try{const W=(await $R()).map(Z=>({...Z,stock_status:Z.quantity>Z.low_stock_threshold?"In Stock":"Low Stock"}));t(W),n(W);const T=new Date(0).toISOString(),R=new Date().toISOString(),j=await kz(T,R);b(j);const Y=await _(W);g(Y)}catch(L){const W=L instanceof Error?L.message:"Failed to load initial inventory or log data";o(W),console.error("Error fetching initial data:",L)}finally{i(!1)}})()},[]),S.useEffect(()=>{let F=[...e];c!=null&&c.from&&(c!=null&&c.to)?F=F.filter(L=>{const W=new Date(L.created_at);return W>=c.from&&W<=c.to}):c!=null&&c.from?F=F.filter(L=>new Date(L.created_at)>=c.from):c!=null&&c.to&&(F=F.filter(L=>new Date(L.created_at)<=c.to)),d!=="all"&&(F=F.filter(L=>L.category===d)),h&&(F=F.filter(L=>{var W;return(W=L.supplier_info)==null?void 0:W.toLowerCase().includes(h.toLowerCase())})),n(F)},[c,d,h,e]),S.useEffect(()=>{(async()=>{if(c!=null&&c.from&&(c!=null&&c.to)){i(!0),o(null);try{const L=c.from.toISOString(),W=c.to.toISOString(),T=await kz(L,W);b(T)}catch(L){o(`Error fetching inventory log data: ${L instanceof Error?L.message:String(L)}`)}finally{i(!1)}}else b([])})()},[c]);const _=async F=>{const L=F.reduce((T,R)=>(R.stock_status==="Low Stock"&&(T[R.item_name]=R.quantity),T),{}),W=F.filter(T=>{if(!T.expiry_date)return!1;const R=new Date(T.expiry_date),j=new Date;return j.setDate(j.getDate()+90),R<=j}).sort((T,R)=>new Date(T.expiry_date).getTime()-new Date(R.expiry_date).getTime());return{inventoryLevelStatus:L,upcomingExpiryItems:W}},N=F=>F?new Date(F).toLocaleDateString():"N/A",E=(F,L="Inventory Report")=>{const W=new Hr;W.text(L,14,15);const T=["ID","Name","Category","Quantity","Unit Price","Supplier","Expiry Date","Status"],R=[];F.forEach(j=>{const Y=[j.id,j.item_name,j.category,j.quantity,j.purchase_price??"N/A",j.supplier_info??"N/A",N(j.expiry_date),j.stock_status];R.push(Y)}),TR(W,{head:[T],body:R,startY:20}),W.save(`${L.replace(/\s+/g,"_")}.pdf`)},C=(F,L="Inventory Report")=>{const W=F.map(j=>({ID:j.id,Name:j.item_name,Category:j.category,Quantity:j.quantity,"Unit Price":j.purchase_price??"N/A",Supplier:j.supplier_info??"N/A","Expiry Date":N(j.expiry_date),Status:j.stock_status,"Low Stock Threshold":j.low_stock_threshold,"Created At":N(j.created_at)})),T=of.json_to_sheet(W),R=of.book_new();of.book_append_sheet(R,T,"Inventory"),N7(R,`${L.replace(/\s+/g,"_")}.xlsx`)},D=()=>{if(console.log("Generating Stock Report with data:",r),r.length===0){o("No data available to generate report.");return}o(null);try{E(r,"Stock Report"),C(r,"Stock Report")}catch(F){console.error("Error generating stock report:",F),o(`Error generating stock report: ${F instanceof Error?F.message:String(F)}`)}},P=()=>{const F=new Date,L=new Date;L.setDate(F.getDate()+90);const W=r.filter(T=>T.expiry_date?new Date(T.expiry_date)<=L:!1).sort((T,R)=>{const j=T.expiry_date?new Date(T.expiry_date).getTime():0,Y=R.expiry_date?new Date(R.expiry_date).getTime():0;return j-Y});if(console.log("Generating Expiry Report with data:",W),W.length===0){o("No items expiring soon to generate report.");return}o(null);try{E(W,"Expiry Report (Next 90 Days)"),C(W,"Expiry Report (Next 90 Days)")}catch(T){console.error("Error generating expiry report:",T),o(`Error generating expiry report: ${T instanceof Error?T.message:String(T)}`)}};return x("div",{className:"space-y-4",children:[x(or,{children:[l(xr,{children:l(br,{children:"Filters"})}),x(hr,{className:"flex flex-col md:flex-row gap-4 items-end",children:[" ",x("div",{className:"flex-1",children:[l("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Date Range (Created At)"}),l(I7,{date:c,onDateChange:u})]}),x("div",{className:"flex-1",children:[l("label",{htmlFor:"inv-category-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Category"}),x(Ur,{value:d,onValueChange:F=>f(F),children:[l(jr,{id:"inv-category-filter",children:l(qr,{placeholder:"Filter by Category"})}),x($r,{children:[l(wt,{value:"all",children:"All Categories"}),YKe.map(F=>l(wt,{value:F,children:F},F))]})]})]}),x("div",{className:"flex-1",children:[l("label",{htmlFor:"inv-supplier-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Supplier"}),l(ht,{id:"inv-supplier-filter",placeholder:"Filter by supplier...",value:h,onChange:F=>m(F.target.value)})]})]})]}),x("div",{className:"flex gap-2",children:[l(Fe,{onClick:D,disabled:a,children:"Generate Stock Report"}),l(Fe,{onClick:P,variant:"outline",disabled:a,children:"Generate Expiry Report"})]}),a&&l("p",{children:"Loading report data..."}),s&&x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:s})]}),x("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Low Stock Items"}),l(Ll,{className:"h-4 w-4 text-muted-foreground text-red-500"})]}),x(hr,{children:[l("div",{className:"text-2xl font-bold",children:Object.keys(w.inventoryLevelStatus).length}),x("ul",{className:"text-xs text-muted-foreground list-disc pl-4",children:[Object.entries(w.inventoryLevelStatus).slice(0,5).map(([F,L])=>x("li",{children:[F," (",L,")"]},F)),Object.keys(w.inventoryLevelStatus).length>5&&l("li",{children:"...and more"})]}),Object.keys(w.inventoryLevelStatus).length===0&&l("p",{className:"text-xs text-muted-foreground",children:"No items currently low on stock."})]})]}),x(or,{children:[x(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l(br,{className:"text-sm font-medium",children:"Upcoming Expiry (90 days)"}),l(Ll,{className:"h-4 w-4 text-muted-foreground text-orange-500"})]}),x(hr,{children:[l("div",{className:"text-2xl font-bold",children:w.upcomingExpiryItems.length}),x("ul",{className:"text-xs text-muted-foreground list-disc pl-4",children:[w.upcomingExpiryItems.slice(0,5).map(F=>x("li",{children:[F.item_name," (",N(F.expiry_date),")"]},F.id)),w.upcomingExpiryItems.length>5&&l("li",{children:"...and more"})]}),w.upcomingExpiryItems.length===0&&l("p",{className:"text-xs text-muted-foreground",children:"No items expiring soon."})]})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Report Data Preview & Charts"})}),x(hr,{children:[x("p",{className:"text-muted-foreground mb-4",children:["Filtered Items: ",r.length]}),l(GKe,{inventoryData:r,logData:y})]})]})]})},K_=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],JV={Active:"#22C55E","Under Maintenance":"#FBBF24",Retired:"#9CA3AF",Disposed:"#F87171"},XKe="#8B5CF6",JKe="#F59E0B",ZKe=({assetData:e=[]})=>{const t=S.useMemo(()=>{const c={"Equipment & Tools":0,Furniture:0,IT:0,Other:0};return e.forEach(u=>{const d=u.category;d&&c[d]!==void 0&&c[d]++}),Object.entries(c).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]),r=S.useMemo(()=>{const c={Active:0,"Under Maintenance":0,Retired:0,Disposed:0};return e.forEach(u=>{const d=u.status;d&&c[d]!==void 0&&c[d]++}),Object.entries(c).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]),n=S.useMemo(()=>{const c={"0-500":0,"501-2000":0,"2001-10000":0,"10001+":0};return e.forEach(u=>{const d=u.purchase_price??0;d<=500?c["0-500"]++:d<=2e3?c["501-2000"]++:d<=1e4?c["2001-10000"]++:c["10001+"]++}),Object.entries(c).map(([u,d])=>({name:u,value:d}))},[e]),a=S.useMemo(()=>{const c=new Date;return e.filter(d=>d.next_maintenance_due_date).map(d=>({...d,daysUntilDue:Q0e(Wr(d.next_maintenance_due_date),c)})).filter(d=>d.daysUntilDue>=0&&d.daysUntilDue<=90).sort((d,f)=>d.daysUntilDue-f.daysUntilDue).slice(0,10).map(d=>({name:d.asset_name,value:d.daysUntilDue}))},[e]),i=t.reduce((c,u)=>c+u.value,0),s=r.reduce((c,u)=>c+u.value,0),o=(c,u)=>{const{payload:d}=c;return l("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:d.map((f,h)=>{const m=u>0?(f.payload.value/u*100).toFixed(1):0;return x("div",{className:"flex items-center",children:[l("span",{className:"w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:f.color}}),f.payload.name," (",m,"%)"]},`legend-${f.payload.name}-${h}`)})})};return x("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:[" ",x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Assets by Category"})}),l(hr,{className:"flex flex-col items-center pt-4",children:l(Oo,{width:"100%",height:180,children:x(Jp,{children:[l($o,{data:t,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:t.map((c,u)=>l(Xc,{fill:K_[u%K_.length],stroke:K_[u%K_.length]},`cell-asset-cat-${u}`))}),l(ti,{formatter:(c,u)=>[`${c} (${i>0?(c/i*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),l(Yu,{content:c=>o(c,i)})]})})})]}),x(or,{children:[l(xr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:l(br,{className:"text-sm font-medium",children:"Assets by Status"})}),l(hr,{className:"flex flex-col items-center pt-4",children:l(Oo,{width:"100%",height:180,children:x(Jp,{children:[l($o,{data:r,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:r.map((c,u)=>l(Xc,{fill:JV[c.name],stroke:JV[c.name]},`cell-asset-stat-${u}`))}),l(ti,{formatter:(c,u)=>[`${c} (${s>0?(c/s*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),l(Yu,{content:c=>o(c,s)})]})})})]}),x(or,{children:[x(xr,{className:"pb-2",children:[l(br,{className:"text-sm font-medium",children:"Asset Value Distribution"}),l("p",{className:"text-xs text-muted-foreground",children:"Count of assets by purchase price range"})]}),l(hr,{className:"pb-4 pl-2 pr-4",children:l(Oo,{width:"100%",height:200,children:x(tw,{data:n,margin:{top:5,right:5,left:-10,bottom:5},barCategoryGap:"20%",children:[l(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),l(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1}),l(ti,{cursor:{fill:"rgba(139, 92, 246, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:c=>[`${c} Assets`,null]}),l(nu,{dataKey:"value",fill:XKe,name:"Assets",radius:[4,4,0,0],barSize:12})]})})})]}),x(or,{children:[x(xr,{className:"pb-2",children:[l(br,{className:"text-sm font-medium",children:"Upcoming Maintenance (Next 90 Days)"}),l("p",{className:"text-xs text-muted-foreground",children:"Assets needing maintenance soon (max 10 shown)"})]}),l(hr,{className:"pb-4 pl-2 pr-4",children:l(Oo,{width:"100%",height:200,children:x(tw,{data:a,layout:"vertical",margin:{top:5,right:20,left:30,bottom:5},barCategoryGap:"20%",children:[l(Rl,{type:"number",hide:!0}),l(Ml,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,style:{fontSize:"10px"},width:100,interval:0}),l(ti,{cursor:{fill:"rgba(245, 158, 11, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:c=>[`Due in ${c} days`,null]}),l(nu,{dataKey:"value",fill:JKe,name:"Days Until Due",radius:[0,4,4,0],barSize:10})]})})})]})]})},QKe=["Equipment & Tools","Furniture","IT","Other"],eXe=["Active","Under Maintenance","Retired","Disposed"],tXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,i]=S.useState(!1),[s,o]=S.useState(null),[c,u]=S.useState(void 0),[d,f]=S.useState("all"),[h,m]=S.useState("all");S.useEffect(()=>{(async()=>{i(!0),o(null);try{const E=await LKe();t(E),n(E)}catch(E){o(E instanceof Error?E.message:"Failed to load asset data")}finally{i(!1)}})()},[]),S.useEffect(()=>{let N=[...e];c!=null&&c.from&&(c!=null&&c.to)?N=N.filter(E=>{if(!E.purchase_date)return!1;const C=new Date(E.purchase_date);return C>=c.from&&C<=c.to}):c!=null&&c.from?N=N.filter(E=>E.purchase_date&&new Date(E.purchase_date)>=c.from):c!=null&&c.to&&(N=N.filter(E=>E.purchase_date&&new Date(E.purchase_date)<=c.to)),d!=="all"&&(N=N.filter(E=>E.category===d)),h!=="all"&&(N=N.filter(E=>E.status===h)),n(N)},[c,d,h,e]);const w=N=>N?new Date(N).toLocaleDateString():"N/A",g=(N,E="Asset Report")=>{const C=new Hr;C.text(E,14,15);const D=["ID","Name","Category","Status","Purchase Date","Purchase Price","Supplier"],P=[];N.forEach(F=>{const L=[F.id,F.asset_name,F.category,F.status,w(F.purchase_date),F.purchase_price??"N/A",F.supplier_info??"N/A"];P.push(L)}),TR(C,{head:[D],body:P,startY:20}),C.save(`${E.replace(/\s+/g,"_")}.pdf`)},y=(N,E="Asset Report")=>{const C=N.map(F=>({ID:F.id,Name:F.asset_name,Category:F.category,Status:F.status,"Purchase Date":w(F.purchase_date),"Purchase Price":F.purchase_price??"N/A",Supplier:F.supplier_info??"N/A",Location:F.location,"Next Maintenance":w(F.next_maintenance_due_date)})),D=of.json_to_sheet(C),P=of.book_new();of.book_append_sheet(P,D,"Assets"),N7(P,`${E.replace(/\s+/g,"_")}.xlsx`)},b=()=>{if(console.log("Generating Asset List Report with data:",r),r.length===0){o("No data available to generate report.");return}o(null);try{g(r,"Asset List Report"),y(r,"Asset List Report")}catch(N){console.error("Error generating asset list report:",N),o(`Error generating asset list report: ${N instanceof Error?N.message:String(N)}`)}},_=()=>{const N=r.filter(E=>E.last_serviced_date||E.next_maintenance_due_date);if(console.log("Generating Maintenance History Report with data:",N),N.length===0){o("No assets with maintenance data available to generate report.");return}o(null);try{g(N,"Asset Maintenance Report"),y(N,"Asset Maintenance Report")}catch(E){console.error("Error generating asset maintenance report:",E),o(`Error generating asset maintenance report: ${E instanceof Error?E.message:String(E)}`)}};return x("div",{className:"space-y-4",children:[x(or,{children:[l(xr,{children:l(br,{children:"Filters"})}),x(hr,{className:"flex flex-col md:flex-row gap-4 items-end",children:[x("div",{className:"flex-1",children:[l("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Date Range"}),l(I7,{date:c,onDateChange:u})]}),x("div",{className:"flex-1",children:[l("label",{htmlFor:"asset-category-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Category"}),x(Ur,{value:d,onValueChange:N=>f(N),children:[l(jr,{id:"asset-category-filter",children:l(qr,{placeholder:"Filter by Category"})}),x($r,{children:[l(wt,{value:"all",children:"All Categories"}),QKe.map(N=>l(wt,{value:N,children:N},N))]})]})]}),x("div",{className:"flex-1",children:[l("label",{htmlFor:"asset-status-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),x(Ur,{value:h,onValueChange:N=>m(N),children:[l(jr,{id:"asset-status-filter",children:l(qr,{placeholder:"Filter by Status"})}),x($r,{children:[l(wt,{value:"all",children:"All Statuses"}),eXe.map(N=>l(wt,{value:N,children:N},N))]})]})]})]})]}),x("div",{className:"flex gap-2",children:[l(Fe,{onClick:b,disabled:a,children:"Generate Asset List"}),l(Fe,{onClick:_,variant:"outline",disabled:a,children:"Generate Maintenance Report"})]}),a&&l("p",{children:"Loading report data..."}),s&&x(sd,{variant:"destructive",children:[l(Ll,{className:"h-4 w-4"}),l(od,{children:"Error"}),l(ld,{children:s})]}),x(or,{children:[l(xr,{children:l(br,{children:"Report Data Preview & Charts"})}),x(hr,{children:[x("p",{className:"text-muted-foreground mb-4",children:["Filtered Assets: ",r.length]}),r.length>0?l("div",{className:"overflow-x-auto",children:x("table",{className:"table-auto w-full",children:[l("thead",{children:x("tr",{className:"text-left",children:[l("th",{className:"px-4 py-2",children:"Name"}),l("th",{className:"px-4 py-2",children:"Category"}),l("th",{className:"px-4 py-2",children:"Status"}),l("th",{className:"px-4 py-2",children:"Purchase Date"})]})}),l("tbody",{children:r.map(N=>x("tr",{children:[l("td",{className:"border px-4 py-2",children:N.asset_name}),l("td",{className:"border px-4 py-2",children:N.category}),l("td",{className:"border px-4 py-2",children:N.status}),l("td",{className:"border px-4 py-2",children:w(N.purchase_date)})]},N.id))})]})}):l("div",{className:"h-60 border rounded-md flex items-center justify-center text-muted-foreground",children:"No assets match the selected criteria."}),x("div",{className:"mt-6",children:[" ",l(ZKe,{assetData:r})," "]})]})]})]})},rXe=[{name:"Page A",uv:4e3,pv:2400,amt:2400},{name:"Page B",uv:3e3,pv:1398,amt:2210},{name:"Page C",uv:2e3,pv:9800,amt:2290},{name:"Page D",uv:2780,pv:3908,amt:2e3},{name:"Page E",uv:1890,pv:4800,amt:2181},{name:"Page F",uv:2390,pv:3800,amt:2500},{name:"Page G",uv:3490,pv:4300,amt:2100}],nXe=()=>x("div",{className:"mt-4",children:[l("h2",{className:"text-lg font-semibold mb-2",children:"Report Data Preview"}),x(mee,{width:500,height:300,data:rXe,margin:{top:5,right:30,left:20,bottom:5},children:[l(QI,{strokeDasharray:"3 3"}),l(Rl,{dataKey:"name"}),l(Ml,{}),l(ti,{}),l(Yu,{}),l(hm,{type:"monotone",dataKey:"pv",stroke:"#8884d8",activeDot:{r:8}}),l(hm,{type:"monotone",dataKey:"uv",stroke:"#82ca9d"})]})]}),aXe=()=>x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"Reports & Analytics"}),x(Lm,{defaultValue:"inventory",className:"mt-4",children:[x(Rh,{className:"grid w-full grid-cols-2 md:w-[400px]",children:[l(Oa,{value:"inventory",children:"Inventory Reports"}),l(Oa,{value:"assets",children:"Asset Reports"}),l(Oa,{value:"report-data-preview",children:"Report Data Preview"})]}),l(_a,{value:"inventory",className:"mt-4",children:l(KKe,{})}),l(_a,{value:"assets",className:"mt-4",children:l(tXe,{})}),l(_a,{value:"report-data-preview",className:"mt-4",children:l(nXe,{})})]})]}),iXe=VN({message:ro().min(1,"Reminder message is required."),reminder_date:ere({required_error:"Please select a date."}),reminder_time:ro().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Invalid time format (HH:MM)."}),recurrence_type:gw(["none","daily","weekly","monthly","yearly"]).default("none"),recurrence_interval:J2().int().min(1).optional(),recurrence_days:tre(J2().int().min(0).max(6)).optional(),times_per_day:J2().int().min(1).optional()}).refine(e=>!(e.recurrence_type!=="none"&&!e.recurrence_interval||e.recurrence_type==="weekly"&&(!e.recurrence_days||e.recurrence_days.length===0)),{message:"Interval is required for recurrence. Days are required for weekly recurrence.",path:["recurrence_interval"]}),sXe=({initialData:e,onSaveSuccess:t})=>{const{user:r}=ui(),{toast:n}=_n(),[a,i]=S.useState(!1),s=fd({resolver:hd(iXe)});S.useEffect(()=>{var c,u,d,f;if(e){const h=new Date(e.reminder_datetime);s.reset({message:e.message,reminder_date:h,reminder_time:Mt(h,"HH:mm"),recurrence_type:((c=e.recurrence_config)==null?void 0:c.type)||"none",recurrence_interval:(u=e.recurrence_config)==null?void 0:u.interval,recurrence_days:(d=e.recurrence_config)==null?void 0:d.days,times_per_day:((f=e.recurrence_config)==null?void 0:f.times_per_day)||1})}else s.reset({message:"",reminder_date:void 0,reminder_time:"",recurrence_type:"none",recurrence_interval:1,recurrence_days:[],times_per_day:1})},[e,s]);const o=async c=>{i(!0);const[u,d]=c.reminder_time.split(":").map(Number);let f=p1e(h1e(c.reminder_date,u),d);if(f<new Date){s.setError("reminder_time",{message:"Reminder time cannot be in the past."}),s.setError("reminder_date",{message:"Reminder date/time cannot be in the past."}),i(!1);return}const h={type:c.recurrence_type,interval:c.recurrence_type!=="none"?c.recurrence_interval:void 0,days:c.recurrence_type==="weekly"?c.recurrence_days:void 0,times_per_day:c.recurrence_type==="daily"?c.times_per_day:void 0};Object.keys(h).forEach(g=>h[g]===void 0&&delete h[g]);let m=null,w=null;if(e!=null&&e.id)m={message:c.message,reminder_datetime:f.toISOString(),recurrence_config:h};else{if(!r){n({title:"Error",description:"You must be logged in to create a reminder.",variant:"destructive"}),i(!1);return}w={user_id:r.id,message:c.message,reminder_datetime:f.toISOString(),recurrence_config:h,is_active:!0}}try{if(e!=null&&e.id&&m)await iX(e.id,m),n({title:"Success",description:"Reminder updated successfully."});else if(w)await U1e(w),n({title:"Success",description:"Reminder created successfully."});else throw new Error("Invalid state for saving reminder.");t()}catch(g){console.error("Failed to save reminder:",g),n({title:"Error",description:g.message||"Could not save reminder.",variant:"destructive"})}finally{i(!1)}};return l(Mh,{...s,children:x("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[l(He,{control:s.control,name:"message",render:({field:c})=>x(De,{children:[l(Oe,{children:"Reminder Message"}),l(je,{children:l(on,{placeholder:"Enter reminder details...",...c})}),l(Ze,{})]})}),x("div",{className:"flex flex-col sm:flex-row gap-4",children:[l(He,{control:s.control,name:"reminder_date",render:({field:c})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Date"}),x(pg,{children:[l(mg,{asChild:!0,children:l(je,{children:x(Fe,{variant:"outline",className:Lt("w-full sm:w-[240px] pl-3 text-left font-normal",!c.value&&"text-muted-foreground"),children:[c.value?Mt(c.value,"PPP"):l("span",{children:"Pick a date"}),l(Oi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{mode:"single",selected:c.value,onSelect:c.onChange,disabled:u=>u<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),l(Ze,{})]})}),l(He,{control:s.control,name:"reminder_time",render:({field:c})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Time (HH:MM)"}),l("div",{className:"relative",children:l(je,{children:l(ht,{type:"time",className:"w-full sm:w-[120px] pl-3",...c})})}),l(Ze,{})]})})]}),l(He,{control:s.control,name:"recurrence_type",render:({field:c})=>x(De,{children:[l(Oe,{children:"Recurrence"}),x(Ur,{onValueChange:c.onChange,value:c.value??"none",children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select recurrence type"})})}),x($r,{children:[l(wt,{value:"none",children:"None"}),l(wt,{value:"daily",children:"Daily"}),l(wt,{value:"weekly",children:"Weekly"}),l(wt,{value:"monthly",children:"Monthly"}),l(wt,{value:"yearly",children:"Yearly"})]})]}),l(Ze,{})]})}),s.watch("recurrence_type")!=="none"&&x("div",{className:"p-4 border rounded-md bg-muted/40 space-y-4 mt-2",children:[l(He,{control:s.control,name:"recurrence_interval",render:({field:c})=>x(De,{children:[l(Oe,{children:"Repeat Every"}),x("div",{className:"flex items-center gap-2",children:[l(je,{children:l(ht,{type:"number",min:"1",className:"w-20",...c,value:c.value??1,onChange:u=>c.onChange(parseInt(u.target.value,10)||1)})}),x("span",{children:[s.watch("recurrence_type")==="daily"&&"Day(s)",s.watch("recurrence_type")==="weekly"&&"Week(s)",s.watch("recurrence_type")==="monthly"&&"Month(s)",s.watch("recurrence_type")==="yearly"&&"Year(s)"]})]}),l(Ze,{})]})}),s.watch("recurrence_type")==="daily"&&l(He,{control:s.control,name:"times_per_day",render:({field:c})=>x(De,{children:[l(Oe,{children:"Times Per Day"}),x("div",{className:"flex items-center gap-2",children:[l(je,{children:l(ht,{type:"number",min:"1",max:"24",className:"w-20",...c,value:c.value??1,onChange:u=>c.onChange(parseInt(u.target.value,10)||1)})}),l("span",{children:"time(s)"})]}),l(mi,{className:"text-xs",children:"How many times the reminder should trigger each day."}),l(Ze,{})]})}),s.watch("recurrence_type")==="weekly"&&l(He,{control:s.control,name:"recurrence_days",render:()=>x(De,{children:[l(Oe,{children:"Repeat On"}),l("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-7",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((c,u)=>l(He,{control:s.control,name:"recurrence_days",render:({field:d})=>{var f;return x(De,{className:"flex flex-row items-start space-x-2 space-y-0",children:[l(je,{children:l(Fo,{checked:(f=d.value)==null?void 0:f.includes(u),onCheckedChange:h=>h?d.onChange([...d.value||[],u]):d.onChange((d.value||[]).filter(m=>m!==u))})}),l(Oe,{className:"font-normal",children:c})]},u)}},c))}),l(Ze,{})]})}),l("p",{className:"text-xs text-muted-foreground",children:"Monthly/Yearly options and End Date/Count coming soon."})]}),l(Fe,{type:"submit",disabled:a,children:a?"Saving...":e?"Update Reminder":"Create Reminder"}),e&&l(Fe,{type:"button",variant:"outline",onClick:()=>t(),className:"ml-2",children:"Cancel Edit"})]})})},oXe=({onEdit:e,refreshKey:t,activeReminderIds:r})=>{const{toast:n}=_n(),[a,i]=S.useState([]),[s,o]=S.useState(!0),[c,u]=S.useState(null),d=async()=>{o(!0),u(null);try{const w=await aX();i(w||[])}catch(w){console.error("Failed to fetch reminders:",w),u("Failed to load reminders. Please try again."),n({title:"Error",description:"Could not fetch reminders.",variant:"destructive"})}finally{o(!1)}};S.useEffect(()=>{d()},[t]);const f=async w=>{const g=w.is_active;i(y=>y.map(b=>b.id===w.id?{...b,is_active:!g}:b));try{await iX(w.id,{is_active:!g}),n({title:"Success",description:`Reminder ${g?"deactivated":"activated"}.`})}catch(y){console.error("Failed to toggle reminder state:",y),i(b=>b.map(_=>_.id===w.id?{..._,is_active:g}:_)),n({title:"Error",description:"Could not update reminder status.",variant:"destructive"})}},h=async w=>{const g=[...a];i(y=>y.filter(b=>b.id!==w));try{await q1e(w),n({title:"Success",description:"Reminder deleted."})}catch(y){console.error("Failed to delete reminder:",y),i(g),n({title:"Error",description:"Could not delete reminder.",variant:"destructive"})}},m=w=>{e(w)};return s?x("div",{className:"space-y-4",children:[l($l,{className:"h-24 w-full"}),l($l,{className:"h-24 w-full"})]}):c?x(sd,{variant:"destructive",children:[l(od,{children:"Error"}),l(ld,{children:c})]}):a.length===0?l("p",{className:"text-muted-foreground",children:"No reminders found."}):l("div",{className:"space-y-4",children:a.map(w=>{var g;return r.has(w.id),x(or,{className:Lt(!w.is_active&&"opacity-60"),children:[x(xr,{className:"flex flex-row items-center justify-between pb-2",children:[l(br,{className:"text-lg font-medium",children:w.message}),x("div",{className:"flex items-center space-x-2",children:[x(Fe,{variant:"ghost",size:"icon",onClick:()=>f(w),title:w.is_active?"Deactivate":"Activate",children:[w.is_active?l(xce,{className:"h-4 w-4"}):l(v4,{className:"h-4 w-4"})," "]}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>m(w),title:"Edit",children:l(zce,{className:"h-4 w-4"})}),l(Fe,{variant:"ghost",size:"icon",onClick:()=>h(w.id),title:"Delete",children:l(om,{className:"h-4 w-4 text-destructive"})})]})]}),x(hr,{children:[x("p",{className:"text-sm text-muted-foreground",children:["Next due: ",Mt(new Date(w.reminder_datetime),"PPP 'at' HH:mm")]}),((g=w.recurrence_config)==null?void 0:g.type)&&w.recurrence_config.type!=="none"&&x("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:["Recurring: ",w.recurrence_config.type]}),!w.is_active&&l("p",{className:"text-xs text-amber-600 mt-1",children:"Inactive"})]})]},w.id)})})},lXe=()=>{const[e,t]=S.useState(0),[r,n]=S.useState(null),{activeReminderIds:a}=sX(),i=o=>{n(o),window.scrollTo({top:0,behavior:"smooth"})};return x("div",{className:"container mx-auto p-4",children:[l(Fa,{heading:"Reminders",text:"Create and manage reminders for yourself or the clinic."}),x("div",{className:"mt-6",children:[l("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Reminder":"Create New Reminder"}),l(sXe,{initialData:r,onSaveSuccess:()=>{n(null),t(o=>o+1)}},(r==null?void 0:r.id)||"new")]}),l(im,{className:"my-8"}),x("div",{className:"mt-8",children:[l("h2",{className:"text-xl font-semibold mb-4",children:"Existing Reminders"}),l(oXe,{onEdit:i,refreshKey:e,activeReminderIds:a})]})]})},Qs=[];for(let e=0;e<256;++e)Qs.push((e+256).toString(16).slice(1));function cXe(e,t=0){return(Qs[e[t+0]]+Qs[e[t+1]]+Qs[e[t+2]]+Qs[e[t+3]]+"-"+Qs[e[t+4]]+Qs[e[t+5]]+"-"+Qs[e[t+6]]+Qs[e[t+7]]+"-"+Qs[e[t+8]]+Qs[e[t+9]]+"-"+Qs[e[t+10]]+Qs[e[t+11]]+Qs[e[t+12]]+Qs[e[t+13]]+Qs[e[t+14]]+Qs[e[t+15]]).toLowerCase()}let OT;const uXe=new Uint8Array(16);function dXe(){if(!OT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");OT=crypto.getRandomValues.bind(crypto)}return OT(uXe)}const fXe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ZV={randomUUID:fXe};function Mw(e,t,r){var a;if(ZV.randomUUID&&!e)return ZV.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??dXe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,cXe(n)}const hXe=async()=>{const{data:e,error:t}=await $e.from("purchase_orders").select(`
      id,
      po_number,
      order_date,
      expected_delivery_date,
      status,
      total_amount,
      notes,
      created_at,
      updated_at,
      supplier_id,
      created_by,
      suppliers (
        name
      )
    `).order("order_date",{ascending:!1});if(t)throw console.error("Error fetching purchase orders:",t),t;return(e||[]).map(r=>{var n;return{id:r.id,po_number:r.po_number,supplier_id:r.supplier_id,supplier_name:((n=r.suppliers)==null?void 0:n.name)||"N/A",order_date:r.order_date,expected_delivery_date:r.expected_delivery_date,status:r.status,total_amount:r.total_amount,notes:r.notes,created_by:r.created_by,created_at:r.created_at,updated_at:r.updated_at}})},pXe=async()=>{const{data:e,error:t}=await $e.from("suppliers").select("id, name").order("name");if(t)throw console.error("Error fetching suppliers from Supabase:",t),t;return e?e.map(n=>({value:n.id,label:n.name})):[]},R7=async()=>{const{data:e,error:t}=await $e.from("inventory_items").select("id, item_name, category, is_batched, item_code").order("item_name");if(t)throw console.error("Error fetching inventory items from Supabase:",t),t;return e?e.map(n=>({value:n.id,label:n.item_name,category:n.category||void 0,is_batched:n.is_batched||!1,item_code:n.item_code||null})):[]},mXe=async(e,t)=>{const{data:r,error:n}=await $e.rpc("generate_po_number");if(n||!r)throw console.error("Error generating PO number:",n),n||new Error("Failed to generate PO number.");const i={po_number:r,supplier_id:e.supplier_id,order_date:e.order_date.toISOString().split("T")[0],expected_delivery_date:e.expected_delivery_date?e.expected_delivery_date.toISOString().split("T")[0]:null,notes:e.notes||null,status:"Pending",created_by:t||null},{data:s,error:o}=await $e.from("purchase_orders").insert(i).select("id, po_number").single();if(o||!s)throw console.error("Error creating purchase order header:",o),o||new Error("Failed to create purchase order header.");const c=e.items.map(d=>({purchase_order_id:s.id,inventory_item_id:d.inventory_item_id,description:d.description||null,quantity_ordered:d.quantity_ordered,unit_price:d.unit_price})),{error:u}=await $e.from("purchase_order_items").insert(c);if(u)throw console.error("Error creating purchase order items:",u),await $e.from("purchase_orders").delete().match({id:s.id}),u;return{id:s.id,po_number:s.po_number}},Dse=async e=>{var s;const{data:t,error:r}=await $e.from("purchase_orders").select(`
      id,
      po_number,
      order_date,
      expected_delivery_date,
      status,
      total_amount,
      notes,
      created_at,
      updated_at,
      supplier_id,
      created_by,
      suppliers ( name )
    `).eq("id",e).single();if(r){if(console.error(`Error fetching purchase order ${e}:`,r),r.code==="PGRST116")return null;throw r}if(!t)return null;const{data:n,error:a}=await $e.from("purchase_order_items").select(`
      id,
      inventory_item_id,
      description,
      quantity_ordered,
      quantity_received,
      unit_price,
      subtotal,
      inventory_items ( item_name )
    `).eq("purchase_order_id",e);if(a)throw console.error(`Error fetching items for purchase order ${e}:`,a),a;const i=(n||[]).map(o=>{var c,u;return{id:o.id,inventory_item_id:o.inventory_item_id,description:o.description||((c=o.inventory_items)==null?void 0:c.item_name)||"N/A",product_name:((u=o.inventory_items)==null?void 0:u.item_name)||"N/A",quantity_ordered:o.quantity_ordered,quantity_received:o.quantity_received,unit_price:o.unit_price,subtotal:o.subtotal}});return{...t,supplier_name:((s=t.suppliers)==null?void 0:s.name)||"N/A",items:i,status:t.status}},gXe=async e=>{const{data:t,error:r}=await $e.rpc("handle_receive_po_item_batch",{p_po_item_id:e.p_po_item_id,p_quantity_received:e.p_quantity_received,p_batch_number:e.p_batch_number,p_expiry_date:e.p_expiry_date,p_purchase_price:e.p_purchase_price,p_received_by_user_id:e.p_received_by_user_id});if(r)throw console.error("Error receiving PO item batch via RPC:",r),r},vXe=async(e,t,r,n)=>{if(!n)throw new Error("User must be logged in to upload invoices.");if(!r)throw new Error("No file selected for upload.");const a=r.name.split(".").pop(),i=`${Mw()}.${a}`,s=`purchase_invoices/${t}/${i}`,{error:o}=await $e.storage.from("invoices").upload(s,r);if(o)throw console.error("Error uploading invoice file:",o),o;const{error:c}=await $e.from("invoices").insert({file_name:r.name,storage_path:s,uploaded_by_user_id:n,purchase_order_id:e});if(c)throw console.error("Error saving invoice record to database:",c),await $e.storage.from("invoices").remove([s]),c;return{storage_path:s}},QV=async e=>{const{data:t,error:r}=await $e.from("invoices").select("id, file_name, storage_path, uploaded_at, uploaded_by_user_id").eq("purchase_order_id",e).order("uploaded_at",{ascending:!1});if(r)throw console.error("Error fetching invoices for PO:",r),r;return t||[]},yXe=async e=>{const{data:t,error:r}=await $e.storage.from("invoices").createSignedUrl(e,300);return r?(console.error("Error creating signed URL:",r),null):(t==null?void 0:t.signedUrl)||null},xXe=async(e,t)=>{const{error:r}=await $e.from("purchase_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw console.error(`Error updating purchase order ${e} status to ${t}:`,r),r},wXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,i]=S.useState(null);S.useEffect(()=>{(async()=>{try{n(!0);const c=await hXe();t(c),i(null)}catch(c){console.error(c),i("Failed to fetch purchase orders.")}finally{n(!1)}})()},[]);const s=o=>{switch(o){case"Pending":return"outline";case"Ordered":return"secondary";case"Partially Received":return"default";case"Received":return"default";case"Cancelled":return"destructive";default:return"outline"}};return x("div",{className:"container mx-auto p-4",children:[l(Fa,{heading:"Purchase Orders",text:"Manage and track all your purchase orders.",children:x(Yi,{to:"/purchases/create",children:[" ",x(Fe,{children:[l(Ch,{className:"mr-2 h-4 w-4"}),"Create New PO"]})]})}),x("div",{className:"mt-6",children:[r&&l("p",{children:"Loading purchase orders..."}),a&&l("p",{className:"text-red-500",children:a}),!r&&!a&&e.length===0&&l("p",{children:"No purchase orders found."}),!r&&!a&&e.length>0&&x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"PO Number"}),l(Kt,{children:"Supplier"}),l(Kt,{children:"Order Date"}),l(Kt,{children:"Status"}),l(Kt,{className:"text-right",children:"Total Amount"}),l(Kt,{children:"Actions"})]})}),l(zo,{children:e.map(o=>{var c;return x(Dn,{children:[l(Wt,{className:"font-medium",children:o.po_number}),l(Wt,{children:o.supplier_name}),l(Wt,{children:new Date(o.order_date).toLocaleDateString()}),l(Wt,{children:l(vc,{variant:s(o.status),className:o.status==="Received"?"bg-green-500 hover:bg-green-600 text-white":"",children:o.status})}),l(Wt,{className:"text-right",children:((c=o.total_amount)==null?void 0:c.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"N/A"}),l(Wt,{className:"text-right",children:x(Yi,{to:`/purchases/${o.id}`,children:[" ",l(Fe,{variant:"outline",size:"sm",children:"View"})]})})]},o.id)})})]})]})]})},bXe=Ie.object({inventory_item_id:Ie.string().uuid({message:"Please select an inventory item."}),description:Ie.string().optional(),quantity_ordered:Ie.number().min(1,{message:"Quantity must be at least 1."}),unit_price:Ie.number().min(0,{message:"Unit price cannot be negative."})}),_Xe=Ie.object({supplier_id:Ie.string().uuid({message:"Please select a supplier."}),order_date:Ie.date({required_error:"Order date is required.",invalid_type_error:"Invalid date format for order date."}),expected_delivery_date:Ie.date().nullable().optional(),notes:Ie.string().optional(),items:Ie.array(bXe).min(1,{message:"Please add at least one item to the purchase order."}),invoice_file:Ie.custom(e=>e==null||e instanceof File,"Invalid file format").refine(e=>!e||e.size<=5*1024*1024,"File size should be less than 5MB.").refine(e=>!e||["application/pdf","image/png","image/jpeg","image/jpg"].includes(e.type),"Only .pdf, .png, .jpg, .jpeg files are accepted.").optional().nullable()});function Eh(e){return Array.isArray?Array.isArray(e):Mse(e)==="[object Array]"}function SXe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function NXe(e){return e==null?"":SXe(e)}function Qd(e){return typeof e=="string"}function Ise(e){return typeof e=="number"}function AXe(e){return e===!0||e===!1||kXe(e)&&Mse(e)=="[object Boolean]"}function Rse(e){return typeof e=="object"}function kXe(e){return Rse(e)&&e!==null}function dc(e){return e!=null}function DT(e){return!e.trim().length}function Mse(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const EXe="Incorrect 'index' type",CXe=e=>`Invalid value for key ${e}`,PXe=e=>`Pattern length exceeds max of ${e}.`,TXe=e=>`Missing ${e} property in key`,OXe=e=>`Property 'weight' in key '${e}' must be a positive integer`,eH=Object.prototype.hasOwnProperty;class DXe{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let a=Fse(n);this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Fse(e){let t=null,r=null,n=null,a=1,i=null;if(Qd(e)||Eh(e))n=e,t=tH(e),r=qO(e);else{if(!eH.call(e,"name"))throw new Error(TXe("name"));const s=e.name;if(n=s,eH.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(OXe(s));t=tH(s),r=qO(s),i=e.getFn}return{path:t,id:r,weight:a,src:n,getFn:i}}function tH(e){return Eh(e)?e:e.split(".")}function qO(e){return Eh(e)?e.join("."):e}function IXe(e,t){let r=[],n=!1;const a=(i,s,o)=>{if(dc(i))if(!s[o])r.push(i);else{let c=s[o];const u=i[c];if(!dc(u))return;if(o===s.length-1&&(Qd(u)||Ise(u)||AXe(u)))r.push(NXe(u));else if(Eh(u)){n=!0;for(let d=0,f=u.length;d<f;d+=1)a(u[d],s,o+1)}else s.length&&a(u,s,o+1)}};return a(e,Qd(t)?t.split("."):t,0),n?r:r[0]}const RXe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},MXe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},FXe={location:0,threshold:.6,distance:100},LXe={useExtendedSearch:!1,getFn:IXe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ln={...MXe,...RXe,...FXe,...LXe};const jXe=/[^ ]+/g;function $Xe(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(a){const i=a.match(jXe).length;if(r.has(i))return r.get(i);const s=1/Math.pow(i,.5*e),o=parseFloat(Math.round(s*n)/n);return r.set(i,o),o},clear(){r.clear()}}}class M7{constructor({getFn:t=ln.getFn,fieldNormWeight:r=ln.fieldNormWeight}={}){this.norm=$Xe(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qd(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();Qd(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!dc(t)||DT(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((a,i)=>{let s=a.getFn?a.getFn(t):this.getFn(t,a.path);if(dc(s)){if(Eh(s)){let o=[];const c=[{nestedArrIndex:-1,value:s}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(dc(d))if(Qd(d)&&!DT(d)){let f={v:d,i:u,n:this.norm.get(d)};o.push(f)}else Eh(d)&&d.forEach((f,h)=>{c.push({nestedArrIndex:h,value:f})})}n.$[i]=o}else if(Qd(s)&&!DT(s)){let o={v:s,n:this.norm.get(s)};n.$[i]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Lse(e,t,{getFn:r=ln.getFn,fieldNormWeight:n=ln.fieldNormWeight}={}){const a=new M7({getFn:r,fieldNormWeight:n});return a.setKeys(e.map(Fse)),a.setSources(t),a.create(),a}function BXe(e,{getFn:t=ln.getFn,fieldNormWeight:r=ln.fieldNormWeight}={}){const{keys:n,records:a}=e,i=new M7({getFn:t,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(a),i}function X_(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:a=ln.distance,ignoreLocation:i=ln.ignoreLocation}={}){const s=t/e.length;if(i)return s;const o=Math.abs(n-r);return a?s+o/a:o?1:s}function UXe(e=[],t=ln.minMatchCharLength){let r=[],n=-1,a=-1,i=0;for(let s=e.length;i<s;i+=1){let o=e[i];o&&n===-1?n=i:!o&&n!==-1&&(a=i-1,a-n+1>=t&&r.push([n,a]),n=-1)}return e[i-1]&&i-n>=t&&r.push([n,i-1]),r}const D0=32;function qXe(e,t,r,{location:n=ln.location,distance:a=ln.distance,threshold:i=ln.threshold,findAllMatches:s=ln.findAllMatches,minMatchCharLength:o=ln.minMatchCharLength,includeMatches:c=ln.includeMatches,ignoreLocation:u=ln.ignoreLocation}={}){if(t.length>D0)throw new Error(PXe(D0));const d=t.length,f=e.length,h=Math.max(0,Math.min(n,f));let m=i,w=h;const g=o>1||c,y=g?Array(f):[];let b;for(;(b=e.indexOf(t,w))>-1;){let P=X_(t,{currentLocation:b,expectedLocation:h,distance:a,ignoreLocation:u});if(m=Math.min(P,m),w=b+d,g){let F=0;for(;F<d;)y[b+F]=1,F+=1}}w=-1;let _=[],N=1,E=d+f;const C=1<<d-1;for(let P=0;P<d;P+=1){let F=0,L=E;for(;F<L;)X_(t,{errors:P,currentLocation:h+L,expectedLocation:h,distance:a,ignoreLocation:u})<=m?F=L:E=L,L=Math.floor((E-F)/2+F);E=L;let W=Math.max(1,h-L+1),T=s?f:Math.min(h+L,f)+d,R=Array(T+2);R[T+1]=(1<<P)-1;for(let Y=T;Y>=W;Y-=1){let Z=Y-1,re=r[e.charAt(Z)];if(g&&(y[Z]=+!!re),R[Y]=(R[Y+1]<<1|1)&re,P&&(R[Y]|=(_[Y+1]|_[Y])<<1|1|_[Y+1]),R[Y]&C&&(N=X_(t,{errors:P,currentLocation:Z,expectedLocation:h,distance:a,ignoreLocation:u}),N<=m)){if(m=N,w=Z,w<=h)break;W=Math.max(1,2*h-w)}}if(X_(t,{errors:P+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:u})>m)break;_=R}const D={isMatch:w>=0,score:Math.max(.001,N)};if(g){const P=UXe(y,o);P.length?c&&(D.indices=P):D.isMatch=!1}return D}function WXe(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<n-r-1}return t}const f4=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class jse{constructor(t,{location:r=ln.location,threshold:n=ln.threshold,distance:a=ln.distance,includeMatches:i=ln.includeMatches,findAllMatches:s=ln.findAllMatches,minMatchCharLength:o=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:u=ln.ignoreDiacritics,ignoreLocation:d=ln.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d},t=c?t:t.toLowerCase(),t=u?f4(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(m,w)=>{this.chunks.push({pattern:m,alphabet:WXe(m),startIndex:w})},h=this.pattern.length;if(h>D0){let m=0;const w=h%D0,g=h-w;for(;m<g;)f(this.pattern.substr(m,D0),m),m+=D0;if(w){const y=h-D0;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:a}=this.options;if(t=r?t:t.toLowerCase(),t=n?f4(t):t,this.pattern===t){let g={isMatch:!0,score:0};return a&&(g.indices=[[0,t.length-1]]),g}const{location:i,distance:s,threshold:o,findAllMatches:c,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],h=0,m=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:b})=>{const{isMatch:_,score:N,indices:E}=qXe(t,g,y,{location:i+b,distance:s,threshold:o,findAllMatches:c,minMatchCharLength:u,includeMatches:a,ignoreLocation:d});_&&(m=!0),h+=N,_&&E&&(f=[...f,...E])});let w={isMatch:m,score:m?h/this.chunks.length:1};return m&&a&&(w.indices=f),w}}class qm{constructor(t){this.pattern=t}static isMultiMatch(t){return rH(t,this.multiRegex)}static isSingleMatch(t){return rH(t,this.singleRegex)}search(){}}function rH(e,t){const r=e.match(t);return r?r[1]:null}class zXe extends qm{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class VXe extends qm{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class HXe extends qm{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class GXe extends qm{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class YXe extends qm{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class KXe extends qm{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class $se extends qm{constructor(t,{location:r=ln.location,threshold:n=ln.threshold,distance:a=ln.distance,includeMatches:i=ln.includeMatches,findAllMatches:s=ln.findAllMatches,minMatchCharLength:o=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreDiacritics:u=ln.ignoreDiacritics,ignoreLocation:d=ln.ignoreLocation}={}){super(t),this._bitapSearch=new jse(t,{location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Bse extends qm{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const a=[],i=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+i,a.push([n,r-1]);const s=!!a.length;return{isMatch:s,score:s?0:1,indices:a}}}const WO=[zXe,Bse,HXe,GXe,KXe,YXe,VXe,$se],nH=WO.length,XXe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,JXe="|";function ZXe(e,t={}){return e.split(JXe).map(r=>{let n=r.trim().split(XXe).filter(i=>i&&!!i.trim()),a=[];for(let i=0,s=n.length;i<s;i+=1){const o=n[i];let c=!1,u=-1;for(;!c&&++u<nH;){const d=WO[u];let f=d.isMultiMatch(o);f&&(a.push(new d(f,t)),c=!0)}if(!c)for(u=-1;++u<nH;){const d=WO[u];let f=d.isSingleMatch(o);if(f){a.push(new d(f,t));break}}}return a})}const QXe=new Set([$se.type,Bse.type]);class eJe{constructor(t,{isCaseSensitive:r=ln.isCaseSensitive,ignoreDiacritics:n=ln.ignoreDiacritics,includeMatches:a=ln.includeMatches,minMatchCharLength:i=ln.minMatchCharLength,ignoreLocation:s=ln.ignoreLocation,findAllMatches:o=ln.findAllMatches,location:c=ln.location,threshold:u=ln.threshold,distance:d=ln.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:a,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:c,threshold:u,distance:d},t=r?t:t.toLowerCase(),t=n?f4(t):t,this.pattern=t,this.query=ZXe(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a,ignoreDiacritics:i}=this.options;t=a?t:t.toLowerCase(),t=i?f4(t):t;let s=0,o=[],c=0;for(let u=0,d=r.length;u<d;u+=1){const f=r[u];o.length=0,s=0;for(let h=0,m=f.length;h<m;h+=1){const w=f[h],{isMatch:g,indices:y,score:b}=w.search(t);if(g){if(s+=1,c+=b,n){const _=w.constructor.type;QXe.has(_)?o=[...o,...y]:o.push(y)}}else{c=0,s=0,o.length=0;break}}if(s){let h={isMatch:!0,score:c/s};return n&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const zO=[];function tJe(...e){zO.push(...e)}function VO(e,t){for(let r=0,n=zO.length;r<n;r+=1){let a=zO[r];if(a.condition(e,t))return new a(e,t)}return new jse(e,t)}const h4={AND:"$and",OR:"$or"},HO={PATH:"$path",PATTERN:"$val"},GO=e=>!!(e[h4.AND]||e[h4.OR]),rJe=e=>!!e[HO.PATH],nJe=e=>!Eh(e)&&Rse(e)&&!GO(e),aH=e=>({[h4.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Use(e,t,{auto:r=!0}={}){const n=a=>{let i=Object.keys(a);const s=rJe(a);if(!s&&i.length>1&&!GO(a))return n(aH(a));if(nJe(a)){const c=s?a[HO.PATH]:i[0],u=s?a[HO.PATTERN]:a[c];if(!Qd(u))throw new Error(CXe(c));const d={keyId:qO(c),pattern:u};return r&&(d.searcher=VO(u,t)),d}let o={children:[],operator:i[0]};return i.forEach(c=>{const u=a[c];Eh(u)&&u.forEach(d=>{o.children.push(n(d))})}),o};return GO(e)||(e=aH(e)),n(e)}function aJe(e,{ignoreFieldNorm:t=ln.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:a,norm:i,score:s})=>{const o=a?a.weight:null;n*=Math.pow(s===0&&o?Number.EPSILON:s,(o||1)*(t?1:i))}),r.score=n})}function iJe(e,t){const r=e.matches;t.matches=[],dc(r)&&r.forEach(n=>{if(!dc(n.indices)||!n.indices.length)return;const{indices:a,value:i}=n;let s={indices:a,value:i};n.key&&(s.key=n.key.src),n.idx>-1&&(s.refIndex=n.idx),t.matches.push(s)})}function sJe(e,t){t.score=e.score}function oJe(e,t,{includeMatches:r=ln.includeMatches,includeScore:n=ln.includeScore}={}){const a=[];return r&&a.push(iJe),n&&a.push(sJe),e.map(i=>{const{idx:s}=i,o={item:t[s],refIndex:s};return a.length&&a.forEach(c=>{c(i,o)}),o})}class Iy{constructor(t,r={},n){this.options={...ln,...r},this.options.useExtendedSearch,this._keyStore=new DXe(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof M7))throw new Error(EXe);this._myIndex=r||Lse(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){dc(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,a=this._docs.length;n<a;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,a-=1,r.push(i))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:i,sortFn:s,ignoreFieldNorm:o}=this.options;let c=Qd(t)?Qd(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return aJe(c,{ignoreFieldNorm:o}),i&&c.sort(s),Ise(r)&&r>-1&&(c=c.slice(0,r)),oJe(c,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(t){const r=VO(t,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:i,i:s,n:o})=>{if(!dc(i))return;const{isMatch:c,score:u,indices:d}=r.searchIn(i);c&&a.push({item:i,idx:s,matches:[{score:u,value:i,norm:o,indices:d}]})}),a}_searchLogical(t){const r=Use(t,this.options),n=(o,c,u)=>{if(!o.children){const{keyId:f,searcher:h}=o,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:h});return m&&m.length?[{idx:u,item:c,matches:m}]:[]}const d=[];for(let f=0,h=o.children.length;f<h;f+=1){const m=o.children[f],w=n(m,c,u);if(w.length)d.push(...w);else if(o.operator===h4.AND)return[]}return d},a=this._myIndex.records,i={},s=[];return a.forEach(({$:o,i:c})=>{if(dc(o)){let u=n(r,o,c);u.length&&(i[c]||(i[c]={idx:c,item:o,matches:[]},s.push(i[c])),u.forEach(({matches:d})=>{i[c].matches.push(...d)}))}}),s}_searchObjectList(t){const r=VO(t,this.options),{keys:n,records:a}=this._myIndex,i=[];return a.forEach(({$:s,i:o})=>{if(!dc(s))return;let c=[];n.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:s[d],searcher:r}))}),c.length&&i.push({idx:o,item:s,matches:c})}),i}_findMatches({key:t,value:r,searcher:n}){if(!dc(r))return[];let a=[];if(Eh(r))r.forEach(({v:i,i:s,n:o})=>{if(!dc(i))return;const{isMatch:c,score:u,indices:d}=n.searchIn(i);c&&a.push({score:u,key:t,value:i,idx:s,norm:o,indices:d})});else{const{v:i,n:s}=r,{isMatch:o,score:c,indices:u}=n.searchIn(i);o&&a.push({score:c,key:t,value:i,norm:s,indices:u})}return a}}Iy.version="7.1.0";Iy.createIndex=Lse;Iy.parseIndex=BXe;Iy.config=ln;Iy.parseQuery=Use;tJe(eJe);const lJe={includeScore:!0,shouldSort:!0,minMatchCharLength:2,threshold:.4,keys:["name"]},p4=(e,t)=>{if(!e||t.length===0)return{bestMatch:null,bestMatchScore:void 0,allMatches:[]};const n=new Iy(t,lJe).search(e);return n.length>0&&n[0].score!==void 0?{bestMatch:n[0].item,bestMatchScore:n[0].score,allMatches:n}:n.length>0?{bestMatch:n[0].item,bestMatchScore:void 0,allMatches:n}:{bestMatch:null,bestMatchScore:void 0,allMatches:[]}},iH=(e,t)=>e.map((r,n)=>{const{bestMatch:a,bestMatchScore:i,allMatches:s}=p4(r.name,t);return{originalOcrItemName:r.name,ocrItemIndex:n,bestMatch:a,bestMatchScore:i,allMatches:s}}),cJe="purchase_invoices",qse=async(e,t)=>{const r=e.name.split(".").pop(),a=`${`${t?t+"_":""}${Date.now()}.${r}`}`,{data:i,error:s}=await $e.storage.from(cJe).upload(a,e,{cacheControl:"3600",upsert:!1});if(s)throw console.error("Error uploading invoice file:",s),new Error(`Failed to upload invoice file: ${s.message}`);if(!i||!i.path)throw console.error("No path returned from storage upload"),new Error("Failed to upload invoice file: No path returned.");return i.path},Wse=async e=>{const{data:t,error:r}=await $e.from("invoices").insert({supplier_id:e.supplier_id,invoice_date:e.invoice_date,total_amount:e.total_amount,status:e.status||"pending",notes:e.notes,purchase_order_id:e.purchase_order_id,invoice_url:e.file_path}).select().single();if(r)throw console.error("Error creating invoice record:",r),new Error(`Failed to create invoice record: ${r.message}`);if(!t)throw new Error("Failed to create invoice record: No data returned.");return t},uJe=()=>{const e=Ss(),{toast:t}=_n(),{user:r}=ui(),[n,a]=S.useState([]),[i,s]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState(!1),[f,h]=S.useState(!1),[m,w]=S.useState(null),[g,y]=S.useState(null),b=fd({resolver:hd(_Xe),defaultValues:{supplier_id:"",order_date:new Date,expected_delivery_date:null,notes:"",items:[{inventory_item_id:"",quantity_ordered:1,unit_price:0,description:""}],invoice_file:null}}),{fields:_,append:N,remove:E,update:C}=FS({control:b.control,name:"items"});S.useEffect(()=>{(async()=>{try{const[T,R]=await Promise.all([pXe(),R7()]);a(T),s(R),c(R.map(j=>({id:j.value,name:j.label})))}catch{t({variant:"destructive",title:"Error fetching data",description:"Could not load suppliers or inventory items."})}})()},[t]);const D=async W=>{if(!(r!=null&&r.id)){t({variant:"destructive",title:"Authentication Error",description:"User ID not found."});return}d(!0);try{const T=await mXe(W,r.id);if(t({title:"Purchase Order Created",description:`PO #${T.po_number} has been successfully created.`}),W.invoice_file&&m)try{t({title:"Processing Invoice",description:"Uploading invoice file..."});const R=await qse(W.invoice_file,T.po_number);await Wse({file_path:R,purchase_order_id:T.id,supplier_id:W.supplier_id,invoice_date:m.invoice_date?new Date(m.invoice_date).toISOString().split("T")[0]:null,total_amount:m.total_amount,notes:`Invoice auto-linked from AI OCR. AI OCR Supplier: ${m.supplier_name||"N/A"}. AI OCR Date: ${m.invoice_date||"N/A"}. AI OCR Total: ${m.total_amount||"N/A"}`,file_name:W.invoice_file.name}),t({title:"Invoice Linked",description:`Invoice ${W.invoice_file.name} linked to PO #${T.po_number}.`})}catch(R){console.error("Failed to link invoice to PO:",R),t({variant:"destructive",title:"Invoice Linking Failed",description:(R==null?void 0:R.message)||"Could not link the uploaded invoice to the PO."})}e(`/purchases/${T.id}`)}catch(T){console.error("Failed to create PO:",T),t({variant:"destructive",title:"Failed to create Purchase Order",description:(T==null?void 0:T.message)||"An unexpected error occurred."})}finally{d(!1)}},P=(W,T)=>{const R=i.find(j=>j.value===T);R&&C(W,{...b.getValues(`items.${W}`),inventory_item_id:T,description:R.label})},F=async W=>{if(b.setValue("invoice_file",W,{shouldValidate:!0}),y(null),w(null),W){h(!0),t({title:"Processing Invoice",description:"Extracting data via AI, please wait..."});try{const T=new FileReader;T.readAsDataURL(W),T.onloadend=async()=>{const R=T.result,{data:j,error:Y}=await $e.functions.invoke("ocr-invoice-parser",{body:{image_data_urls:[R],file_type:W.type}});if(Y)throw Y;const Z=j;w(Z);const re=n.map(B=>({id:B.value,name:B.label})),z=Z.supplier_name?p4(Z.supplier_name,re):null,q=(Z.items||[]).map(B=>{const{bestMatch:G,allMatches:Q,bestMatchScore:O}=p4(B.description,o);return{...B,inventoryItemId:(G==null?void 0:G.id.toString())||null,matchDetails:{originalOcrItemName:B.description,ocrItemIndex:-1,bestMatch:G,bestMatchScore:O,allMatches:Q}}});y({...Z,items:q,matchedSupplier:(z==null?void 0:z.bestMatch)||null}),t({title:"Invoice Scanned by AI",description:"Review extracted data below to pre-fill form."}),h(!1)},T.onerror=R=>{console.error("File reading error:",R),t({variant:"destructive",title:"File Error",description:"Could not read file for OCR."}),h(!1)}}catch(T){console.error("AI OCR processing failed:",T),t({variant:"destructive",title:"AI OCR Error",description:T.message||"Failed to process invoice with AI."}),h(!1)}}},L=()=>{var W;if(g){if((W=g.matchedSupplier)!=null&&W.id&&b.setValue("supplier_id",g.matchedSupplier.id.toString(),{shouldValidate:!0}),g.invoice_date)try{const T=new Date(g.invoice_date);isNaN(T.getTime())?t({variant:"destructive",title:"Invalid Date",description:"AI OCR extracted an invalid date format."}):b.setValue("order_date",T,{shouldValidate:!0})}catch{t({variant:"destructive",title:"Date Error",description:"Could not parse AI OCR date."})}g.items.length>0&&(_.forEach((T,R)=>E(R)),g.items.forEach(T=>{var R;N({inventory_item_id:T.inventoryItemId||"",description:T.inventoryItemId&&((R=i.find(j=>j.value===T.inventoryItemId))==null?void 0:R.label)||T.description,quantity_ordered:T.quantity||1,unit_price:T.unit_price||0})})),t({title:"OCR Data Applied",description:"Form has been pre-filled with data from invoice."}),y(null)}};return x("div",{className:"container mx-auto p-4",children:[l(Fa,{heading:"Create New Purchase Order",text:"Fill in the details to create a new purchase order."}),x(Mh,{...b,children:[" ",x("form",{onSubmit:b.handleSubmit(D),className:"space-y-8 mt-6",children:[x("div",{className:"my-6 p-6 border rounded-lg shadow-sm",children:[l("h3",{className:"text-xl font-semibold mb-4",children:"Upload Invoice (Optional)"}),l(He,{control:b.control,name:"invoice_file",render:({field:W})=>x(De,{children:[l(Oe,{children:"Invoice Document"})," ",l(je,{children:l(am,{value:W.value,onFileChange:F,accept:"image/png,image/jpeg,image/jpg,application/pdf",maxSize:5,disabled:f})}),l(mi,{children:"Upload an invoice image (PNG, JPG) or PDF. OCR pre-fill currently only supports images."}),l(Ze,{})]})}),f&&l("p",{className:"text-sm text-muted-foreground mt-2",children:"Processing invoice..."}),g&&!f&&x("div",{className:"mt-4 p-4 border rounded-md bg-muted/50 space-y-3",children:[l("h4",{className:"text-lg font-medium",children:"Extracted Invoice Data:"}),g.matchedSupplier&&x("p",{children:["Supplier: ",g.matchedSupplier.name," (Matched by AI & Fuzzy Search)"]}),!g.matchedSupplier&&g.supplier_name&&x("p",{children:["Supplier (AI OCR): ",g.supplier_name]}),g.invoice_date&&x("p",{children:["Date: ",g.invoice_date]}),g.total_amount&&x("p",{children:["Total: ",g.total_amount]}),x("p",{className:"font-medium mt-2",children:["Items (",g.items.length,"):"]}),x("ul",{className:"list-disc pl-5 text-sm",children:[g.items.slice(0,5).map((W,T)=>{var R;return x("li",{children:[W.description," (Qty: ",W.quantity??"N/A",", Price: ",W.unit_price??"N/A",")",W.inventoryItemId&&i.find(j=>j.value===W.inventoryItemId)&&x("span",{className:"text-green-600 ml-2",children:["(Matched: ",(R=i.find(j=>j.value===W.inventoryItemId))==null?void 0:R.label,")"]}),!W.inventoryItemId&&l("span",{className:"text-orange-600 ml-2",children:"(No direct match)"})]},T)}),g.items.length>5&&l("li",{children:"...and more"})]}),l(Fe,{type:"button",onClick:L,className:"mt-3",children:"Apply OCR Data to Form"})]})]}),l(im,{className:"my-8"}),x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l(He,{control:b.control,name:"supplier_id",render:({field:W})=>x(De,{children:[l(Oe,{children:"Supplier"}),x(Ur,{onValueChange:W.onChange,defaultValue:W.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select a supplier"})})}),l($r,{children:n.map(T=>l(wt,{value:T.value,children:T.label},T.value))})]}),l(Ze,{})]})}),l(He,{control:b.control,name:"order_date",render:({field:W})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Order Date"}),x(pg,{children:[l(mg,{asChild:!0,children:l(je,{children:x(Fe,{variant:"outline",className:Lt("w-full pl-3 text-left font-normal",!W.value&&"text-muted-foreground"),children:[W.value?new Date(W.value).toLocaleDateString():l("span",{children:"Pick a date"}),l(Oi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{mode:"single",selected:W.value,onSelect:W.onChange,initialFocus:!0})})]}),l(Ze,{})]})}),l(He,{control:b.control,name:"expected_delivery_date",render:({field:W})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Expected Delivery Date (Optional)"}),x(pg,{children:[l(mg,{asChild:!0,children:l(je,{children:x(Fe,{variant:"outline",className:Lt("w-full pl-3 text-left font-normal",!W.value&&"text-muted-foreground"),children:[W.value?new Date(W.value).toLocaleDateString():l("span",{children:"Pick a date"}),l(Oi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{mode:"single",selected:W.value||void 0,onSelect:W.onChange})})]}),l(Ze,{})]})})]}),l(He,{control:b.control,name:"notes",render:({field:W})=>x(De,{children:[l(Oe,{children:"Notes (Optional)"}),l(je,{children:l(on,{placeholder:"Any additional notes for this purchase order",...W})}),l(Ze,{})]})}),x("div",{className:"space-y-4",children:[l(tr,{className:"text-lg font-semibold",children:"Order Items"}),_.map((W,T)=>x("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 border p-4 rounded-md relative",children:[l("div",{className:"md:col-span-4",children:l(He,{control:b.control,name:`items.${T}.inventory_item_id`,render:({field:R})=>x(De,{children:[l(Oe,{children:"Item"}),x(Ur,{onValueChange:j=>{R.onChange(j),P(T,j)},defaultValue:R.value,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select an item"})})}),l($r,{children:i.map(j=>x(wt,{value:j.value,children:[j.label," ",j.category?`(${j.category})`:""]},j.value))})]}),(()=>{const j=b.getValues(`items.${T}.inventory_item_id`),Y=i.find(Z=>Z.value===j);return Y!=null&&Y.item_code?x("p",{className:"text-xs text-muted-foreground mt-1",children:["Code: ",Y.item_code]}):null})(),l(Ze,{})]})})}),l("div",{className:"md:col-span-3",children:l(He,{control:b.control,name:`items.${T}.description`,render:({field:R})=>x(De,{children:[l(Oe,{children:"Description"}),l(je,{children:l(ht,{placeholder:"Item description",...R})}),l(Ze,{})]})})}),l("div",{className:"md:col-span-2",children:l(He,{control:b.control,name:`items.${T}.quantity_ordered`,render:({field:R})=>x(De,{children:[l(Oe,{children:"Quantity"}),l(je,{children:l(ht,{type:"number",placeholder:"Qty",...R,onChange:j=>R.onChange(parseInt(j.target.value,10)||0)})}),l(Ze,{})]})})}),l("div",{className:"md:col-span-2",children:l(He,{control:b.control,name:`items.${T}.unit_price`,render:({field:R})=>x(De,{children:[l(Oe,{children:"Unit Price"}),l(je,{children:l(ht,{type:"number",step:"0.01",placeholder:"Price",...R,onChange:j=>R.onChange(parseFloat(j.target.value)||0)})}),l(Ze,{})]})})}),l("div",{className:"md:col-span-1 flex items-end",children:_.length>1&&l(Fe,{type:"button",variant:"destructive",size:"icon",onClick:()=>E(T),children:l(om,{className:"h-4 w-4"})})})]},W.id)),x(Fe,{type:"button",variant:"outline",onClick:()=>N({inventory_item_id:"",quantity_ordered:1,unit_price:0,description:""}),children:[l(Ch,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),x("div",{className:"flex justify-end space-x-2",children:[l(Fe,{type:"button",variant:"outline",onClick:()=>e("/purchases"),disabled:u,children:"Cancel"}),l(Fe,{type:"submit",disabled:u,children:u?"Creating...":"Create Purchase Order"})]})]})]})]})};var IT={exports:{}},sH;function dJe(){return sH||(sH=1,function(e){var t=function(r){var n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(B,G,Q){B[G]=Q.value},s,o=typeof Symbol=="function"?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function f(B,G,Q){return Object.defineProperty(B,G,{value:Q,enumerable:!0,configurable:!0,writable:!0}),B[G]}try{f({},"")}catch{f=function(G,Q,O){return G[Q]=O}}function h(B,G,Q,O){var J=G&&G.prototype instanceof N?G:N,X=Object.create(J.prototype),ne=new re(O||[]);return i(X,"_invoke",{value:R(B,Q,ne)}),X}r.wrap=h;function m(B,G,Q){try{return{type:"normal",arg:B.call(G,Q)}}catch(O){return{type:"throw",arg:O}}}var w="suspendedStart",g="suspendedYield",y="executing",b="completed",_={};function N(){}function E(){}function C(){}var D={};f(D,c,function(){return this});var P=Object.getPrototypeOf,F=P&&P(P(z([])));F&&F!==n&&a.call(F,c)&&(D=F);var L=C.prototype=N.prototype=Object.create(D);E.prototype=C,i(L,"constructor",{value:C,configurable:!0}),i(C,"constructor",{value:E,configurable:!0}),E.displayName=f(C,d,"GeneratorFunction");function W(B){["next","throw","return"].forEach(function(G){f(B,G,function(Q){return this._invoke(G,Q)})})}r.isGeneratorFunction=function(B){var G=typeof B=="function"&&B.constructor;return G?G===E||(G.displayName||G.name)==="GeneratorFunction":!1},r.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,C):(B.__proto__=C,f(B,d,"GeneratorFunction")),B.prototype=Object.create(L),B},r.awrap=function(B){return{__await:B}};function T(B,G){function Q(X,ne,ie,oe){var de=m(B[X],B,ne);if(de.type==="throw")oe(de.arg);else{var V=de.arg,se=V.value;return se&&typeof se=="object"&&a.call(se,"__await")?G.resolve(se.__await).then(function(fe){Q("next",fe,ie,oe)},function(fe){Q("throw",fe,ie,oe)}):G.resolve(se).then(function(fe){V.value=fe,ie(V)},function(fe){return Q("throw",fe,ie,oe)})}}var O;function J(X,ne){function ie(){return new G(function(oe,de){Q(X,ne,oe,de)})}return O=O?O.then(ie,ie):ie()}i(this,"_invoke",{value:J})}W(T.prototype),f(T.prototype,u,function(){return this}),r.AsyncIterator=T,r.async=function(B,G,Q,O,J){J===void 0&&(J=Promise);var X=new T(h(B,G,Q,O),J);return r.isGeneratorFunction(G)?X:X.next().then(function(ne){return ne.done?ne.value:X.next()})};function R(B,G,Q){var O=w;return function(X,ne){if(O===y)throw new Error("Generator is already running");if(O===b){if(X==="throw")throw ne;return q()}for(Q.method=X,Q.arg=ne;;){var ie=Q.delegate;if(ie){var oe=j(ie,Q);if(oe){if(oe===_)continue;return oe}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(O===w)throw O=b,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);O=y;var de=m(B,G,Q);if(de.type==="normal"){if(O=Q.done?b:g,de.arg===_)continue;return{value:de.arg,done:Q.done}}else de.type==="throw"&&(O=b,Q.method="throw",Q.arg=de.arg)}}}function j(B,G){var Q=G.method,O=B.iterator[Q];if(O===s)return G.delegate=null,Q==="throw"&&B.iterator.return&&(G.method="return",G.arg=s,j(B,G),G.method==="throw")||Q!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),_;var J=m(O,B.iterator,G.arg);if(J.type==="throw")return G.method="throw",G.arg=J.arg,G.delegate=null,_;var X=J.arg;if(!X)return G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,_;if(X.done)G[B.resultName]=X.value,G.next=B.nextLoc,G.method!=="return"&&(G.method="next",G.arg=s);else return X;return G.delegate=null,_}W(L),f(L,d,"Generator"),f(L,c,function(){return this}),f(L,"toString",function(){return"[object Generator]"});function Y(B){var G={tryLoc:B[0]};1 in B&&(G.catchLoc=B[1]),2 in B&&(G.finallyLoc=B[2],G.afterLoc=B[3]),this.tryEntries.push(G)}function Z(B){var G=B.completion||{};G.type="normal",delete G.arg,B.completion=G}function re(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(Y,this),this.reset(!0)}r.keys=function(B){var G=Object(B),Q=[];for(var O in G)Q.push(O);return Q.reverse(),function J(){for(;Q.length;){var X=Q.pop();if(X in G)return J.value=X,J.done=!1,J}return J.done=!0,J}};function z(B){if(B){var G=B[c];if(G)return G.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var Q=-1,O=function J(){for(;++Q<B.length;)if(a.call(B,Q))return J.value=B[Q],J.done=!1,J;return J.value=s,J.done=!0,J};return O.next=O}}return{next:q}}r.values=z;function q(){return{value:s,done:!0}}return re.prototype={constructor:re,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(Z),!B)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=s)},stop:function(){this.done=!0;var B=this.tryEntries[0],G=B.completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var G=this;function Q(oe,de){return X.type="throw",X.arg=B,G.next=oe,de&&(G.method="next",G.arg=s),!!de}for(var O=this.tryEntries.length-1;O>=0;--O){var J=this.tryEntries[O],X=J.completion;if(J.tryLoc==="root")return Q("end");if(J.tryLoc<=this.prev){var ne=a.call(J,"catchLoc"),ie=a.call(J,"finallyLoc");if(ne&&ie){if(this.prev<J.catchLoc)return Q(J.catchLoc,!0);if(this.prev<J.finallyLoc)return Q(J.finallyLoc)}else if(ne){if(this.prev<J.catchLoc)return Q(J.catchLoc,!0)}else if(ie){if(this.prev<J.finallyLoc)return Q(J.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,G){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var O=this.tryEntries[Q];if(O.tryLoc<=this.prev&&a.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var J=O;break}}J&&(B==="break"||B==="continue")&&J.tryLoc<=G&&G<=J.finallyLoc&&(J=null);var X=J?J.completion:{};return X.type=B,X.arg=G,J?(this.method="next",this.next=J.finallyLoc,_):this.complete(X)},complete:function(B,G){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&G&&(this.next=G),_},finish:function(B){for(var G=this.tryEntries.length-1;G>=0;--G){var Q=this.tryEntries[G];if(Q.finallyLoc===B)return this.complete(Q.completion,Q.afterLoc),Z(Q),_}},catch:function(B){for(var G=this.tryEntries.length-1;G>=0;--G){var Q=this.tryEntries[G];if(Q.tryLoc===B){var O=Q.completion;if(O.type==="throw"){var J=O.arg;Z(Q)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(B,G,Q){return this.delegate={iterator:z(B),resultName:G,nextLoc:Q},this.method==="next"&&(this.arg=s),_}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(IT)),IT.exports}var RT,oH;function F7(){return oH||(oH=1,RT=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`),RT}var MT,lH;function zse(){if(lH)return MT;lH=1;const e=F7();let t=0;return MT=({id:r,action:n,payload:a={}})=>{let i=r;return typeof i>"u"&&(i=e("Job",t),t+=1),{id:i,action:n,payload:a}},MT}var N2={},cH;function L7(){if(cH)return N2;cH=1;let e=!1;return N2.logging=e,N2.setLogging=t=>{e=t},N2.log=(...t)=>e?console.log.apply(this,t):null,N2}var FT,uH;function fJe(){if(uH)return FT;uH=1;const e=zse(),{log:t}=L7(),r=F7();let n=0;return FT=()=>{const a=r("Scheduler",n),i={},s={};let o=[];n+=1;const c=()=>o.length,u=()=>Object.keys(i).length,d=()=>{if(o.length!==0){const g=Object.keys(i);for(let y=0;y<g.length;y+=1)if(typeof s[g[y]]>"u"){o[0](i[g[y]]);break}}},f=(g,y)=>new Promise((b,_)=>{const N=e({action:g,payload:y});o.push(async E=>{o.shift(),s[E.id]=N;try{b(await E[g].apply(this,[...y,N.id]))}catch(C){_(C)}finally{delete s[E.id],d()}}),t(`[${a}]: Add ${N.id} to JobQueue`),t(`[${a}]: JobQueue length=${o.length}`),d()});return{addWorker:g=>(i[g.id]=g,t(`[${a}]: Add ${g.id}`),t(`[${a}]: Number of workers=${u()}`),d(),g.id),addJob:async(g,...y)=>{if(u()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return f(g,y)},terminate:async()=>{Object.keys(i).forEach(async g=>{await i[g].terminate()}),o=[]},getQueueLen:c,getNumWorkers:u}},FT}function hJe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var LT,dH;function pJe(){return dH||(dH=1,LT=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof hJe=="function"&&(t.type="node"),typeof e>"u"?t:t[e]}),LT}var jT,fH;function mJe(){if(fH)return jT;fH=1;const t=pJe()("type")==="browser"?r=>new URL(r,window.location.href).href:r=>r;return jT=r=>{const n={...r};return["corePath","workerPath","langPath"].forEach(a=>{r[a]&&(n[a]=t(n[a]))}),n},jT}var $T,hH;function Vse(){return hH||(hH=1,$T={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),$T}const gJe="6.0.1",vJe={version:gJe};var BT,pH;function yJe(){return pH||(pH=1,BT={workerBlobURL:!0,logger:()=>{}}),BT}var UT,mH;function xJe(){if(mH)return UT;mH=1;const e=vJe.version;return UT={...yJe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${e}/dist/worker.min.js`},UT}var qT,gH;function wJe(){return gH||(gH=1,qT=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(e);return r}),qT}var WT,vH;function bJe(){return vH||(vH=1,WT=e=>{e.terminate()}),WT}var zT,yH;function _Je(){return yH||(yH=1,zT=(e,t)=>{e.onmessage=({data:r})=>{t(r)}}),zT}var VT,xH;function SJe(){return xH||(xH=1,VT=async(e,t)=>{e.postMessage(t)}),VT}var HT,wH;function NJe(){if(wH)return HT;wH=1;const e=r=>new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:s}}})=>{a(Error(`File could not be read! Code=${s}`))},i.readAsArrayBuffer(r)}),t=async r=>{let n=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?n=atob(r.split(",")[1]).split("").map(a=>a.charCodeAt(0)):n=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(n=await t(r.src)),r.tagName==="VIDEO"&&(n=await t(r.poster)),r.tagName==="CANVAS"&&await new Promise(a=>{r.toBlob(async i=>{n=await e(i),a()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const a=await r.convertToBlob();n=await e(a)}else(r instanceof File||r instanceof Blob)&&(n=await e(r));return new Uint8Array(n)};return HT=t,HT}var GT,bH;function AJe(){if(bH)return GT;bH=1;const e=xJe(),t=wJe(),r=bJe(),n=_Je(),a=SJe(),i=NJe();return GT={defaultOptions:e,spawnWorker:t,terminateWorker:r,onMessage:n,send:a,loadImage:i},GT}var YT,_H;function Hse(){if(_H)return YT;_H=1;const e=mJe(),t=zse(),{log:r}=L7(),n=F7(),a=Vse(),{defaultOptions:i,spawnWorker:s,terminateWorker:o,onMessage:c,loadImage:u,send:d}=AJe();let f=0;return YT=async(h="eng",m=a.LSTM_ONLY,w={},g={})=>{const y=n("Worker",f),{logger:b,errorHandler:_,...N}=e({...i,...w}),E={},C=typeof h=="string"?h.split("+"):h;let D=m,P=g;const F=[a.DEFAULT,a.LSTM_ONLY].includes(m)&&!N.legacyCore;let L,W;const T=new Promise((V,se)=>{W=V,L=se}),R=V=>{L(V.message)};let j=s(N);j.onerror=R,f+=1;const Y=({id:V,action:se,payload:fe})=>new Promise((te,ke)=>{r(`[${y}]: Start ${V}, action=${se}`);const Re=`${se}-${V}`;E[Re]={resolve:te,reject:ke},d(j,{workerId:y,jobId:V,action:se,payload:fe})}),Z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),re=V=>Y(t({id:V,action:"load",payload:{options:{lstmOnly:F,corePath:N.corePath,logging:N.logging}}})),z=(V,se,fe)=>Y(t({id:fe,action:"FS",payload:{method:"writeFile",args:[V,se]}})),q=(V,se)=>Y(t({id:se,action:"FS",payload:{method:"readFile",args:[V,{encoding:"utf8"}]}})),B=(V,se)=>Y(t({id:se,action:"FS",payload:{method:"unlink",args:[V]}})),G=(V,se,fe)=>Y(t({id:fe,action:"FS",payload:{method:V,args:se}})),Q=(V,se)=>Y(t({id:se,action:"loadLanguage",payload:{langs:V,options:{langPath:N.langPath,dataPath:N.dataPath,cachePath:N.cachePath,cacheMethod:N.cacheMethod,gzip:N.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(D)&&!N.legacyLang}}})),O=(V,se,fe,te)=>Y(t({id:te,action:"initialize",payload:{langs:V,oem:se,config:fe}})),J=(V="eng",se,fe,te)=>{if(F&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(se))throw Error("Legacy model requested but code missing.");const ke=se||D;D=ke;const Re=fe||P;P=Re;const ve=(typeof V=="string"?V.split("+"):V).filter(Ge=>!C.includes(Ge));return C.push(...ve),ve.length>0?Q(ve,te).then(()=>O(V,ke,Re,te)):O(V,ke,Re,te)},X=(V={},se)=>Y(t({id:se,action:"setParameters",payload:{params:V}})),ne=async(V,se={},fe={text:!0},te)=>Y(t({id:te,action:"recognize",payload:{image:await u(V),options:se,output:fe}})),ie=async(V,se)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Y(t({id:se,action:"detect",payload:{image:await u(V)}}))},oe=async()=>(j!==null&&(o(j),j=null),Promise.resolve());c(j,({workerId:V,jobId:se,status:fe,action:te,data:ke})=>{const Re=`${te}-${se}`;if(fe==="resolve")r(`[${V}]: Complete ${se}`),E[Re].resolve({jobId:se,data:ke}),delete E[Re];else if(fe==="reject")if(E[Re].reject(ke),delete E[Re],te==="load"&&L(ke),_)_(ke);else throw Error(ke);else fe==="progress"&&b({...ke,userJobId:se})});const de={id:y,worker:j,load:Z,writeText:z,readText:q,removeFile:B,FS:G,reinitialize:J,setParameters:X,recognize:ne,detect:ie,terminate:oe};return re().then(()=>Q(h)).then(()=>O(h,m,g)).then(()=>W(de)).catch(()=>{}),T},YT}var KT,SH;function kJe(){if(SH)return KT;SH=1;const e=Hse();return KT={recognize:async(n,a,i)=>{const s=await e(a,1,i);return s.recognize(n).finally(async()=>{await s.terminate()})},detect:async(n,a)=>{const i=await e("osd",0,a);return i.detect(n).finally(async()=>{await i.terminate()})}},KT}var XT,NH;function EJe(){return NH||(NH=1,XT={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),XT}var JT,AH;function CJe(){return AH||(AH=1,JT={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),JT}var ZT,kH;function PJe(){if(kH)return ZT;kH=1,dJe();const e=fJe(),t=Hse(),r=kJe(),n=EJe(),a=Vse(),i=CJe(),{setLogging:s}=L7();return ZT={languages:n,OEM:a,PSM:i,createScheduler:e,createWorker:t,setLogging:s,...r},ZT}var TJe=PJe();let Bu=null,I0=!1;const OJe=async()=>{if(Bu)return Bu;if(I0)return new Promise((e,t)=>{const r=setInterval(()=>{Bu?(clearInterval(r),e(Bu)):I0||(clearInterval(r),t(new Error("Tesseract worker initialization failed.")))},100)});I0=!0;try{return Bu=await TJe.createWorker("eng",void 0,{logger:t=>console.log(t)}),I0=!1,Bu}catch(e){throw console.error("Failed to initialize Tesseract worker:",e),I0=!1,e}},EH=async e=>{if(e.type==="application/pdf")throw console.warn("Attempted OCR on PDF file. Client-side Tesseract.js does not support PDF directly."),new Error("PDF processing via client-side OCR is not supported. Please use an image file (PNG, JPG) or implement server-side PDF OCR.");const t=await OJe();if(!t)throw new Error("Tesseract worker not available.");try{const{data:{text:r}}=await t.recognize(e);return r}catch(r){console.error("Error during OCR processing:",r);const n=Bu;if(Bu=null,I0=!1,n)try{await n.terminate()}catch(a){console.error("Error terminating worker:",a)}throw new Error("Failed to extract text using OCR.")}},DJe=async()=>{if(Bu){const e=Bu;Bu=null,I0=!1;try{await e.terminate(),console.log("Tesseract worker terminated.")}catch(t){console.error("Error terminating Tesseract worker:",t)}}},CH=e=>{var u;const t=e.split(`
`).map(d=>d.trim()).filter(d=>d!==""),r={items:[]},n=[/\b(\d{1,2}[-/.\s]\d{1,2}[-/.\s]\d{2,4})\b/,/\b(\d{4}[-/.\s]\d{1,2}[-/.\s]\d{1,2})\b/,/\b((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*[.\s,]*\d{1,2}[,\s]*\d{2,4})\b/i],a=["supplier","vendor","from:","invoice from","sold by"],i=["total","grand total","amount due","total amount","balance due"];for(const d of t){for(const f of a)if(d.toLowerCase().includes(f)){let h=(u=d.toLowerCase().split(f)[1])==null?void 0:u.trim();if(h!=null&&h.startsWith(":")&&(h=h.substring(1).trim()),h&&h.length>2){r.supplier=h.split(",")[0].trim();break}}if(r.supplier)break}if(!r.supplier&&t.length>0){const d=t[0];!n.some(f=>f.test(d))&&!d.toLowerCase().includes("invoice")&&(/\b(ltd|inc|llc|co)\b/i.test(d)||/^[a-zA-Z\s&]+$/.test(d.split(",")[0].trim()))&&(r.supplier=d.split(",")[0].trim())}for(const d of t){for(const f of n){const h=d.match(f);if(h&&h[1]){r.date=h[1];break}}if(r.date)break}let s=[];t.forEach(d=>{for(const f of i)if(d.toLowerCase().includes(f)){const h=d.match(/[\d,]+\.?\d*/g);h&&h.forEach(m=>{s.push({value:parseFloat(m.replace(/,/g,"")),line:d})})}}),s.length>0&&(s.sort((d,f)=>f.value-d.value),r.totalAmount=s[0].value);const o=["description","item","product","service","qty","quantity","price","unit price","amount","subtotal"],c=/([\d,]*\.?\d+)/g;return t.forEach((d,f)=>{const m=d.toLowerCase().split(/\s+/);if(m.filter(y=>o.includes(y)).length/m.length>.4&&m.length<6||/^[\d\s.,$€£\-+()%]+$/.test(d.trim())||d.length<10)return;const g=Array.from(d.matchAll(c));if(g.length>=2){const y=g[g.length-1],b=g[g.length-2],_=y[0].replace(/,/g,""),N=b[0].replace(/,/g,""),E=parseFloat(_),C=parseInt(N,10);if(!isNaN(E)&&!isNaN(C)&&C.toString()===N&&!N.includes(".")){const D=b.index;if(D!==void 0&&D>0){let P=d.substring(0,D).trim().replace(/[.,:;]$/,"").trim();P.length>2&&r.items.push({name:P,quantity:C,price:E})}}}}),r.items.length===0&&t.length>0&&console.warn("OCR parsing (old logic) did not find structured item lines. Raw lines:",t),console.log("Parsed OCR Data (Old Logic - Restored):",r),r},IJe=async()=>{console.log("Attempting to fetch inventory items for select/search...");const{data:e,error:t}=await $e.from("inventory_items").select("id, item_name, category, is_batched").order("item_name",{ascending:!0});if(t)throw console.error("Error fetching inventory items for select:",t),new Error(`Failed to fetch inventory items: ${t.message}`);return e?e.map(r=>({value:r.id,label:r.item_name,category:r.category,is_batched:r.is_batched??!1})):(console.warn("No inventory items found for select."),[])},Gse=["application/pdf","image/png","image/jpeg","image/jpg"],Yse=5*1024*1024,RJe=Ie.object({quantity_received_now:Ie.number().min(1,"Quantity must be at least 1"),batch_number:Ie.string().optional(),expiry_date:Ie.date().nullable().optional(),invoice_file:Ie.custom(e=>e instanceof File||e===null||e===void 0,"Invalid file format").refine(e=>!e||e.size<=Yse,"File size should be less than 5MB.").refine(e=>!e||Gse.includes(e.type),"Only .pdf, .png, .jpg, .jpeg files are accepted.").optional().nullable()}),MJe=({poItem:e,purchaseOrderId:t,poNumber:r,inventoryItemInfo:n,remainingQuantity:a,onReceiveSuccess:i,children:s})=>{const{toast:o}=_n(),{user:c}=ui(),[u,d]=S.useState(!1),[f,h]=S.useState(!1),[m,w]=S.useState(!1),[g,y]=S.useState(null),[b,_]=S.useState(null),[N,E]=S.useState([]),[C,D]=S.useState(!1),P=(n==null?void 0:n.is_batched)??!1,F=fd({resolver:hd(RJe.refine(W=>W.quantity_received_now<=a,{message:`Quantity cannot exceed remaining quantity (${a})`,path:["quantity_received_now"]}).refine(W=>!P||W.batch_number&&W.batch_number.trim()!=="",{message:"Batch number is required for batched items.",path:["batch_number"]}).refine(W=>!P||W.expiry_date,{message:"Expiry date is required for batched items.",path:["expiry_date"]})),defaultValues:{quantity_received_now:a>0?1:0,batch_number:"",expiry_date:null,invoice_file:null}});S.useEffect(()=>{(async()=>{if(u&&N.length===0){D(!0);try{const T=await IJe();E(T.map(R=>({id:R.value,name:R.label})))}catch(T){console.error("Failed to fetch inventory items for search:",T),o({variant:"destructive",title:"Error",description:"Could not load inventory items for matching."})}finally{D(!1)}}})(),u?(F.reset({quantity_received_now:a>0?1:0,batch_number:"",expiry_date:null,invoice_file:null}),y(null),_(null)):m||DJe()},[u,a,F,m,o]);const L=async W=>{if(h(!0),!c||!c.id){o({variant:"destructive",title:"Authentication Error",description:"User ID not found. Cannot record receipt."}),h(!1);return}try{let T=e.unit_price;if(b&&b.items){const j=b.items.find(Y=>Y.inventoryItemId===e.inventory_item_id);j&&(T=j.price,o({title:"Price Note",description:`Using confirmed invoice price (${T}) for this receipt of "${e.description}".`,duration:4e3}))}await gXe({p_po_item_id:e.id,p_quantity_received:W.quantity_received_now,p_batch_number:W.batch_number||null,p_expiry_date:W.expiry_date?W.expiry_date.toISOString().split("T")[0]:null,p_purchase_price:T,p_received_by_user_id:c.id});let R=null;if(W.invoice_file&&!b){w(!0),o({title:"Processing Invoice",description:"Extracting text from invoice, please wait..."});try{const j=await EH(W.invoice_file),Y=CH(j);y(Y);const Z=iH(Y.items,N),re=Y.items.map((z,q)=>{var G;const B=Z.find(Q=>Q.ocrItemIndex===q);return{...z,inventoryItemId:((G=B==null?void 0:B.bestMatch)==null?void 0:G.id.toString())||null,matchDetails:B}});_({...Y,items:re}),console.log("OCR Parsed Data:",Y),console.log("Fuzzy Matched Items:",re),o({title:"Invoice Processed",description:"Review extracted and matched data below. Confirm to proceed."}),w(!1),h(!1);return}catch(j){console.error("OCR Error or Matching Error:",j),o({variant:"destructive",title:"Processing Failed",description:j.message}),w(!1),h(!1);return}}if(b&&W.invoice_file){console.log("Confirmed OCR Data, attempting to upload invoice and create record:",b),o({title:"Processing Confirmed Invoice",description:"Uploading file and creating invoice record..."});try{const j=await qse(W.invoice_file,r);let Y=null;try{const Z=await Dse(t);Z?Y=Z.supplier_id:o({variant:"destructive",title:"Warning",description:"Could not fetch PO details to link supplier to invoice. Supplier will be unlinked."})}catch(Z){console.error("Failed to fetch PO for supplier ID:",Z),o({variant:"destructive",title:"Warning",description:"Error fetching PO details for invoice supplier linking."})}await Wse({file_path:j,purchase_order_id:t,supplier_id:Y,invoice_date:b.date?new Date(b.date).toISOString().split("T")[0]:null,total_amount:b.totalAmount,notes:`Invoice uploaded for PO: ${r}. OCR Supplier: ${b.supplier||"N/A"}. OCR Date: ${b.date||"N/A"}. OCR Total: ${b.totalAmount||"N/A"}`}),o({title:"Invoice Saved",description:`Invoice for PO ${r} processed and saved.`})}catch(j){console.error("Failed to upload invoice or create record:",j),o({variant:"destructive",title:"Invoice Processing Failed",description:j.message||"Could not save the invoice details."})}}o({title:"Success",description:`${W.quantity_received_now} units of "${e.description}" received.`}),i(),d(!1)}catch(T){console.error("Failed to receive items or process invoice:",T),o({variant:"destructive",title:"Error Receiving Items",description:(T==null?void 0:T.message)||"An unexpected error occurred while recording received items."})}finally{h(!1)}};return x(Vn,{open:u,onOpenChange:d,children:[l(rb,{asChild:!0,children:s}),x(Bn,{className:"sm:max-w-[425px]",children:[x(Jn,{children:[x(Zn,{children:["Receive Item: ",e.description]}),x(us,{children:["Record quantity received for this item. Ordered: ",e.quantity_ordered,", Received: ",e.quantity_received,", Remaining: ",a,"."]})]}),l(Mh,{...F,children:x("form",{onSubmit:F.handleSubmit(L),className:"space-y-4",children:[l(He,{control:F.control,name:"quantity_received_now",render:({field:W})=>x(De,{children:[l(Oe,{children:"Quantity Receiving Now"}),l(je,{children:l(ht,{type:"number",min:"1",max:a,...W,onChange:T=>W.onChange(parseInt(T.target.value,10)||0)})}),l(Ze,{})]})}),l(He,{control:F.control,name:"invoice_file",render:({field:W})=>x(De,{children:[l(Oe,{children:"Upload Invoice (Optional)"}),l(je,{children:l(am,{value:W.value,onFileChange:async T=>{if(W.onChange(T),_(null),y(null),T){w(!0),o({title:"Scanning Invoice",description:"Extracting text, please wait..."});try{const R=await EH(T),j=CH(R);y(j);const Y=iH(j.items,N),Z=j.items.map((q,B)=>{var Q;const G=Y.find(O=>O.ocrItemIndex===B);return{...q,inventoryItemId:((Q=G==null?void 0:G.bestMatch)==null?void 0:Q.id.toString())||null,matchDetails:G}});_({...j,items:Z});const re=e.inventory_item_id,z=Z.find(q=>q.inventoryItemId===re);if(z&&Z.filter(q=>q.inventoryItemId===re).length===1){const q=z.quantity,B=Math.min(q,a);B>0&&F.getValues("quantity_received_now")!==B&&(F.setValue("quantity_received_now",B,{shouldValidate:!0}),o({title:"Quantity Pre-filled",description:`Quantity for "${e.description}" pre-filled from invoice.`}))}console.log("Live OCR Parsed Data:",j),console.log("Fuzzy Matched Items on change:",Z),o({title:"Invoice Scanned",description:"Review extracted and matched data below."})}catch(R){console.error("OCR Error on change:",R),o({variant:"destructive",title:"OCR Failed",description:R.message}),_(null)}finally{w(!1)}}else _(null),y(null)},accept:Gse.join(","),maxSize:Yse,disabled:m||f})}),l(Ze,{})]})}),m&&l("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Processing invoice, please wait..."}),b&&!m&&x("div",{className:"space-y-4 p-4 border rounded-md mt-4",children:[l("h4",{className:"text-md font-semibold mb-2",children:"Confirm or Edit Extracted Invoice Data"}),x(De,{children:[l(Oe,{children:"Invoice Supplier"}),l(je,{children:l(ht,{value:b.supplier||"",onChange:W=>_(T=>T?{...T,supplier:W.target.value}:null),placeholder:"Supplier from invoice"})})]}),x(De,{children:[l(Oe,{children:"Invoice Date"}),l(je,{children:l(ht,{value:b.date||"",onChange:W=>_(T=>T?{...T,date:W.target.value}:null),placeholder:"Date from invoice (e.g., YYYY-MM-DD)"})})]}),x(De,{children:[l(Oe,{children:"Invoice Total Amount"}),l(je,{children:l(ht,{type:"number",value:b.totalAmount||"",onChange:W=>_(T=>T?{...T,totalAmount:parseFloat(W.target.value)||void 0}:null),placeholder:"Total amount from invoice"})})]}),x("div",{className:"space-y-2",children:[l(Oe,{children:"Invoice Items (Matched)"}),C&&l("p",{className:"text-sm text-muted-foreground",children:"Loading inventory for matching..."}),!C&&b.items.map((W,T)=>{var R;return x("div",{className:"p-3 border rounded-md space-y-2 bg-slate-50 dark:bg-slate-800",children:[x(De,{children:[l(Oe,{className:"text-xs",children:"OCR Item Name"}),l(ht,{value:W.name,onChange:j=>{const Y=b.items.map((Z,re)=>re===T?{...Z,name:j.target.value}:Z);_(Z=>Z?{...Z,items:Y}:null)},placeholder:"Item Name from Invoice",className:"text-sm"})]}),x("div",{className:"grid grid-cols-2 gap-2",children:[x(De,{children:[l(Oe,{className:"text-xs",children:"Qty"}),l(ht,{type:"number",value:W.quantity,onChange:j=>{const Y=b.items.map((Z,re)=>re===T?{...Z,quantity:parseInt(j.target.value)||0}:Z);_(Z=>Z?{...Z,items:Y}:null)},placeholder:"Qty",className:"text-sm"})]}),x(De,{children:[l(Oe,{className:"text-xs",children:"Price (Unit)"}),l(ht,{type:"number",value:W.price,onChange:j=>{const Y=b.items.map((Z,re)=>re===T?{...Z,price:parseFloat(j.target.value)||0}:Z);_(Z=>Z?{...Z,items:Y}:null)},placeholder:"Price",className:"text-sm"})]})]}),x(De,{children:[l(Oe,{className:"text-xs",children:"Match to Inventory Item"}),x(Ur,{value:W.inventoryItemId||"",onValueChange:j=>{const Y=[...b.items];Y[T].inventoryItemId=j==="NO_MATCH"?null:j,_(Z=>Z?{...Z,items:Y}:null)},children:[l(jr,{className:"text-sm",children:l(qr,{placeholder:"Select inventory match..."})}),x($r,{children:[((R=W.matchDetails)==null?void 0:R.bestMatch)&&x(wt,{value:W.matchDetails.bestMatch.id.toString(),children:["Best: ",W.matchDetails.bestMatch.name]}),N.filter(j=>{var Y,Z;return j.id!==((Z=(Y=W.matchDetails)==null?void 0:Y.bestMatch)==null?void 0:Z.id)}).map(j=>l(wt,{value:j.id.toString(),children:j.name},j.id)),l(wt,{value:"NO_MATCH",children:"No Match / Manual Entry"})]})]}),W.matchDetails&&W.matchDetails.allMatches.length>1&&!W.inventoryItemId&&x("p",{className:"text-xs text-muted-foreground mt-1",children:["Other possible matches: ",W.matchDetails.allMatches.slice(1,3).map(j=>j.item.name).join(", ")]})]})]},T)}),b.items.length===0&&l("p",{className:"text-xs text-muted-foreground",children:"No items found or parsed from invoice."})]})]}),P&&!b&&x(_r,{children:[l(He,{control:F.control,name:"batch_number",render:({field:W})=>x(De,{children:[l(Oe,{children:"Batch Number"}),l(je,{children:l(ht,{placeholder:"Enter batch number",...W})}),l(Ze,{})]})}),l(He,{control:F.control,name:"expiry_date",render:({field:W})=>x(De,{className:"flex flex-col",children:[l(Oe,{children:"Expiry Date"}),x(pg,{children:[l(mg,{asChild:!0,children:l(je,{children:x(Fe,{variant:"outline",className:Lt("w-full pl-3 text-left font-normal",!W.value&&"text-muted-foreground"),children:[W.value?new Date(W.value).toLocaleDateString():l("span",{children:"Pick expiry date"}),l(Oi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l(wm,{className:"w-auto p-0",align:"start",children:l(bm,{mode:"single",selected:W.value||void 0,onSelect:W.onChange,initialFocus:!0})})]}),l(Ze,{})]})})]}),x(fs,{children:[l(MN,{asChild:!0,children:l(Fe,{type:"button",variant:"outline",disabled:f||m,children:"Cancel"})}),l(Fe,{type:"submit",disabled:f||m||a<=0,children:f?"Saving Receipt...":m?"Processing Invoice...":"Confirm Receipt"})]})]})})]})]})},FJe=()=>{var Y;const{id:e}=fy(),t=Ss(),{toast:r}=_n(),{user:n}=ui(),[a,i]=S.useState(null),[s,o]=S.useState([]),[c,u]=S.useState([]),[d,f]=S.useState(!0),[h,m]=S.useState(!1),[w,g]=S.useState(!1),[y,b]=S.useState(!1),[_,N]=S.useState(null),E=S.useCallback(async Z=>{f(!0),N(null);try{const[re,z,q]=await Promise.all([Dse(Z),R7(),QV(Z)]);re?i(re):(N("Purchase order not found."),i(null)),o(z),u(q)}catch(re){console.error(re),N("Failed to fetch purchase order details or related data."),r({variant:"destructive",title:"Error",description:"Could not load purchase order details, items, or invoices."})}finally{f(!1)}},[r]);S.useEffect(()=>{e?E(e):(N("Purchase Order ID is missing."),f(!1))},[e,E]);const C=()=>{e&&(r({title:"Item Received",description:"Refreshing PO details..."}),E(e))},D=async Z=>{var z;const re=(z=Z.target.files)==null?void 0:z[0];if(!re||!e||!(a!=null&&a.po_number)||!(n!=null&&n.id)){r({variant:"destructive",title:"Upload Error",description:"Missing required information for upload."});return}if(!["application/pdf","image/png","image/jpeg"].includes(re.type)){r({variant:"destructive",title:"Invalid File Type",description:"Please upload a PDF, PNG, or JPG file."});return}m(!0);try{await vXe(e,a.po_number,re,n.id),r({title:"Success",description:`Invoice "${re.name}" uploaded.`});const q=await QV(e);u(q)}catch(q){console.error("Invoice upload failed:",q),r({variant:"destructive",title:"Upload Failed",description:(q==null?void 0:q.message)||"Could not upload invoice."})}finally{m(!1),Z.target.value=""}},P=async()=>{if(!(!e||!a)){g(!0);try{console.log(`Simulating approval for PO ID: ${e}`),i(Z=>Z?{...Z,status:"Approved"}:null),r({title:"PO Approved",description:`Purchase Order ${a.po_number} has been approved.`})}catch(Z){console.error("Failed to approve PO:",Z),r({variant:"destructive",title:"Approval Failed",description:(Z==null?void 0:Z.message)||"Could not approve purchase order."})}finally{g(!1)}}},F=async()=>{if(!(!e||!a)){b(!0);try{await xXe(e,"Ordered"),i(Z=>Z?{...Z,status:"Ordered"}:null),r({title:"PO Confirmed",description:`Purchase Order ${a.po_number} has been marked as Ordered.`})}catch(Z){console.error("Failed to confirm PO:",Z),r({variant:"destructive",title:"Confirmation Failed",description:(Z==null?void 0:Z.message)||"Could not confirm purchase order."})}finally{b(!1)}}},L=async Z=>{try{const re=await yXe(Z.storage_path);re?window.open(re,"_blank"):r({variant:"destructive",title:"Download Error",description:"Could not get download link."})}catch(re){console.error("Download failed:",re),r({variant:"destructive",title:"Download Failed",description:"Could not get download link."})}},W=Z=>{if(!Z)return"outline";switch(Z){case"Pending":return"outline";case"Approved":return"default";case"Ordered":return"secondary";case"Partially Received":return"default";case"Received":return"default";case"Cancelled":return"destructive";default:return"outline"}};if(d)return l("div",{className:"container mx-auto p-4",children:"Loading purchase order details..."});if(_)return x("div",{className:"container mx-auto p-4 text-red-500 flex items-center",children:[l(Ll,{className:"mr-2"})," ",_]});if(!a)return l("div",{className:"container mx-auto p-4",children:"Purchase order not found."});const T=a.status==="Ordered"||a.status==="Partially Received",R=a.status==="Pending",j=a.status==="Approved";return x("div",{className:"container mx-auto p-4 space-y-6",children:[l(Fa,{heading:`Purchase Order: ${a.po_number}`,text:`Details for PO from ${a.supplier_name}`}),x(or,{children:[l(xr,{children:l(br,{children:"Order Summary"})}),x(hr,{className:"grid md:grid-cols-3 gap-4",children:[x("div",{children:[l("span",{className:"font-semibold",children:"PO Number:"})," ",a.po_number]}),x("div",{children:[l("span",{className:"font-semibold",children:"Supplier:"})," ",a.supplier_name]}),x("div",{children:[l("span",{className:"font-semibold",children:"Order Date:"})," ",new Date(a.order_date).toLocaleDateString()]}),x("div",{children:[l("span",{className:"font-semibold",children:"Expected Delivery:"})," ",a.expected_delivery_date?new Date(a.expected_delivery_date).toLocaleDateString():"N/A"]}),x("div",{children:[l("span",{className:"font-semibold",children:"Status:"})," ",l(vc,{variant:W(a.status),className:a.status==="Received"?"bg-green-500 hover:bg-green-600 text-white":"",children:a.status})]}),x("div",{children:[l("span",{className:"font-semibold",children:"Total Amount:"})," ",((Y=a.total_amount)==null?void 0:Y.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"N/A"]}),a.notes&&x("div",{className:"md:col-span-3",children:[l("span",{className:"font-semibold",children:"Notes:"})," ",a.notes]})]})]}),l(im,{}),x(or,{children:[x(xr,{children:[l(br,{children:"Associated Invoices"}),l(_c,{children:"Manage invoices related to this purchase order."})]}),x(hr,{className:"space-y-4",children:[c.length>0?l("ul",{className:"list-disc pl-5 space-y-2",children:c.map(Z=>x("li",{className:"flex justify-between items-center",children:[x("span",{children:[Z.file_name," ",x("span",{className:"text-xs text-muted-foreground",children:["(",new Date(Z.uploaded_at).toLocaleString(),")"]})]}),x(Fe,{variant:"outline",size:"sm",onClick:()=>L(Z),children:[l(QH,{className:"mr-2 h-4 w-4"})," Download"]})]},Z.id))}):l("p",{className:"text-sm text-muted-foreground",children:"No invoices uploaded yet."}),x("div",{className:"mt-4",children:[l(tr,{htmlFor:"invoice-upload",className:"mb-2 block",children:"Upload New Invoice (PDF, PNG, JPG)"}),l(ht,{id:"invoice-upload",type:"file",accept:".pdf, image/png, image/jpeg",onChange:D,disabled:h||a.status==="Cancelled",className:"max-w-sm"}),h&&x("p",{className:"text-sm text-muted-foreground mt-2 flex items-center",children:[l(Z0,{className:"animate-pulse mr-1 h-4 w-4"})," Uploading..."]})]})]})]}),l(im,{}),T&&x(or,{children:[x(xr,{children:[l(br,{children:"Receive Items"}),l(_c,{children:"Record received quantities for items in this purchase order."})]}),l(hr,{className:"space-y-4",children:a.items.filter(Z=>Z.quantity_ordered-Z.quantity_received>0).length>0?a.items.map(Z=>{const re=Z.quantity_ordered-Z.quantity_received,z=s.find(q=>q.value===Z.inventory_item_id);return re<=0?null:x("div",{className:"flex justify-between items-center p-2 border rounded-md",children:[x("div",{children:[l("p",{className:"font-medium",children:Z.description||Z.product_name}),x("p",{className:"text-sm text-muted-foreground",children:["Ordered: ",Z.quantity_ordered,", Received: ",Z.quantity_received,", Remaining: ",re]})]}),l(MJe,{poItem:Z,purchaseOrderId:a.id,poNumber:a.po_number,inventoryItemInfo:z,remainingQuantity:re,onReceiveSuccess:C,children:x(Fe,{variant:"default",size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white",children:[l(Mce,{className:"mr-1 h-4 w-4"})," Receive"]})})]},`receive-${Z.id}`)}):l("p",{className:"text-sm text-muted-foreground",children:"All items have been fully received or no items are pending receipt."})})]}),l(im,{}),x("div",{className:"mt-8",children:[l(Fa,{heading:"Order Items Summary"}),x(qo,{className:"mt-4",children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Item Description"}),l(Kt,{className:"text-right",children:"Ordered"}),l(Kt,{className:"text-right",children:"Received"}),l(Kt,{className:"text-right",children:"Remaining"}),l(Kt,{className:"text-right",children:"Unit Price"}),l(Kt,{className:"text-right",children:"Subtotal"})]})}),l(zo,{children:a.items.map(Z=>{const re=Z.quantity_ordered-Z.quantity_received;return x(Dn,{children:[l(Wt,{children:Z.description||Z.product_name}),l(Wt,{className:"text-right",children:Z.quantity_ordered}),l(Wt,{className:"text-right",children:Z.quantity_received}),l(Wt,{className:"text-right font-medium",children:re}),l(Wt,{className:"text-right",children:Z.unit_price.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),l(Wt,{className:"text-right",children:Z.subtotal.toLocaleString("en-IN",{style:"currency",currency:"INR"})})]},Z.id)})})]})]}),x("div",{className:"flex justify-between items-center mt-6",children:[x("div",{children:[" ",R&&x(Fe,{onClick:P,disabled:w||d,variant:"default",className:"bg-green-500 hover:bg-green-600 text-white",children:[l(dx,{className:"mr-2 h-4 w-4"}),w?"Approving...":"Approve Order"]}),j&&x(Fe,{onClick:F,disabled:y||d,variant:"default",children:[l(Uce,{className:"mr-2 h-4 w-4"}),y?"Confirming...":"Confirm & Mark Ordered"]})]}),l(Fe,{variant:"outline",onClick:()=>t("/purchases"),children:"Back to Purchase Orders"})]})]})},LJe=async(e,t)=>{if(!e)throw new Error("No file provided for upload.");const r=e.name.split(".").pop(),n=`${Mw()}.${r}`,i=`${t?`urgent_purchase_slips/${t}`:"urgent_purchase_slips"}/${n}`,{error:s}=await $e.storage.from("urgent-purchase-slip").upload(i,e);if(s)throw console.error("Error uploading urgent purchase slip:",s),s;return{filePath:i,fileName:e.name}},PH=async e=>{const{data:t,error:r}=await $e.from("urgent_purchases").insert(e.header).select().single();if(r||!t)throw console.error("Error creating urgent purchase header:",r),r||new Error("Failed to create urgent purchase header.");const n=t;if(e.items&&e.items.length>0){const a=e.items.map(s=>({...s,urgent_purchase_id:n.id})),{error:i}=await $e.from("urgent_purchase_items").insert(a);if(i)throw console.error("Error creating urgent purchase items:",i),await $e.from("urgent_purchases").delete().match({id:n.id}),i}return{...n,items:(e.items||[]).map(a=>({...a,id:Mw(),urgent_purchase_id:n.id}))}},TH=async(e,t)=>{const{data:r,error:n}=await $e.from("urgent_purchases").select("requested_by_user_id, status").eq("id",e).single();if(n||!r)throw console.error("Error fetching urgent purchase for submission:",n),n||new Error("Urgent purchase not found for submission.");const a=r;if(a.requested_by_user_id!==t)throw new Error("User not authorized to submit this purchase for approval.");if(a.status!=="draft")throw new Error(`Urgent purchase is not in draft state (current: ${a.status}).`);const{data:i,error:s}=await $e.from("urgent_purchases").update({status:"pending_approval",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s||!i)throw console.error("Error submitting urgent purchase for approval:",s),s||new Error("Failed to submit urgent purchase for approval.");return i},jJe=async(e,t,r)=>{const{data:n,error:a}=await $e.from("urgent_purchases").update({status:"approved",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r,updated_at:new Date().toISOString()}).eq("id",e).eq("status","pending_approval").select().single();if(a||!n)throw console.error("Error approving urgent purchase:",a),a||new Error("Failed to approve urgent purchase or not found/not pending.");const i=n;return await BJe(i.id,t),i},$Je=async(e,t,r)=>{if(!r||r.trim()==="")throw new Error("Reviewer notes are required for rejecting an urgent purchase.");const{data:n,error:a}=await $e.from("urgent_purchases").update({status:"rejected",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r,updated_at:new Date().toISOString()}).eq("id",e).eq("status","pending_approval").select().single();if(a||!n)throw console.error("Error rejecting urgent purchase:",a),a||new Error("Failed to reject urgent purchase or not found/not pending.");return n},BJe=async(e,t)=>{const{data:r,error:n}=await $e.from("urgent_purchases").select(`
      *,
      urgent_purchase_items (*)
    `).eq("id",e).eq("status","approved").single();if(n||!r)throw console.error(`Error fetching approved urgent purchase ${e} for item processing:`,n),n||new Error("Approved urgent purchase not found or not in correct state for item processing.");const a=r;if(!a.urgent_purchase_items||a.urgent_purchase_items.length===0){console.log(`No items to process for urgent purchase ${e}.`);return}const i=a.urgent_purchase_items;for(const s of i){let o=null,c;const{data:u,error:d}=await $e.from("inventory_items").select("is_batched").eq("id",s.inventory_item_id).single();if(d||!u)throw console.error(`Inventory item ${s.inventory_item_id} not found for urgent purchase item ${s.id}`),d||new Error(`Inventory item ${s.inventory_item_id} not found.`);if(u.is_batched&&s.batch_number){c="BATCH_STOCK_IN";const{data:m,error:w}=await $e.from("inventory_item_batches").select("id").eq("inventory_item_id",s.inventory_item_id).eq("batch_number",s.batch_number).maybeSingle();if(w)throw console.error("Error fetching batch:",w),w;const g=m;if(g)o=g.id;else{const y={inventory_item_id:s.inventory_item_id,batch_number:s.batch_number,expiry_date:s.expiry_date||null,quantity_on_hand:0,purchase_price_at_receipt:0},{data:b,error:_}=await $e.from("inventory_item_batches").insert(y).select("id").single();if(_||!b)throw console.error("Error creating new batch:",_),_||new Error("Failed to create new batch.");o=b.id}}else c="add";const{error:h}=await $e.rpc("adjust_inventory_item_quantity",{p_inventory_item_id:s.inventory_item_id,p_quantity_change:s.quantity,p_change_type:c,p_user_id:t,p_notes:`Urgent purchase approved: ${a.id}. Slip: ${a.slip_filename||"N/A"}`,p_inventory_item_batch_id:o===null?void 0:o});if(h)throw console.error(`Error adjusting inventory for item ${s.inventory_item_id}:`,h),await $e.from("urgent_purchases").update({status:"rejected",reviewer_notes:`Item processing failed: ${h.message}`}).eq("id",e),h}console.log(`Successfully processed items for approved urgent purchase ${e}`)},UJe=async e=>{const{data:t,error:r}=await $e.from("urgent_purchases").select(`
      id,
      slip_image_path,
      slip_filename,
      invoice_delivery_date,
      status,
      confidence_score,
      notes,
      requested_by_user_id,
      requested_at,
      reviewed_by_user_id,
      reviewed_at,
      reviewer_notes,
      updated_at,
      urgent_purchase_items (*)
    `).eq("id",e).single();if(r){if(console.error(`Error fetching urgent purchase ${e}:`,r),r.code==="PGRST116")return null;throw r}if(!t)return null;const n=t;return{...n,items:n.urgent_purchase_items||[]}},h3=async e=>{let t=$e.from("urgent_purchases").select(`
      id,
      slip_filename,
      invoice_delivery_date,
      status,
      requested_by_user_id,
      requested_at,
      updated_at,
      target_approval_role,
      reviewed_by_user_id,
      reviewed_at,
      reviewer_notes
    `).order("updated_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.requested_by_user_id&&(t=t.eq("requested_by_user_id",e.requested_by_user_id));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching urgent purchases list:",n),n;return(r||[]).map(i=>({...i,items:[]}))},qJe=({onFileSelect:e,processing:t=!1,className:r})=>{const[n,a]=S.useState(null),[i,s]=S.useState(null);return x("div",{className:r,children:[l(am,{onFileChange:u=>{a(u),e(u),u?(i&&URL.revokeObjectURL(i),s(URL.createObjectURL(u))):(i&&URL.revokeObjectURL(i),s(null))},accept:"image/jpeg, image/png, image/webp, application/pdf",maxSize:10,uploading:t,value:n,preview:i||void 0,onRemove:()=>{a(null),e(null),i&&URL.revokeObjectURL(i),s(null)},id:"urgent-purchase-slip-upload"}),n&&!t&&x(sd,{className:"mt-4",children:[l(oF,{className:"h-4 w-4"}),l(od,{children:"File Ready"}),x(ld,{children:["Selected: ",n.name," (",(n.size/1024/1024).toFixed(2)," MB). Ready for processing."]})]}),t&&x(sd,{className:"mt-4",children:[l(oF,{className:"h-4 w-4"}),l(od,{children:"Processing..."}),l(ld,{children:"The slip is being uploaded and analyzed. Please wait."})]})]})},OH="__NO_MATCH_VALUE__",WJe=Ie.object({inventory_item_id:Ie.string().min(1,"Item selection is required."),quantity:Ie.number().min(1,"Quantity must be at least 1."),batch_number:Ie.string().optional().nullable(),expiry_date:Ie.date().optional().nullable()}),zJe=["admin","owner","doctor"],VJe=Ie.object({items:Ie.array(WJe).min(1,"At least one item is required."),invoice_delivery_date:Ie.date().optional().nullable(),notes:Ie.string().optional().nullable(),target_approval_role:Ie.string().min(1,"Target approval role is required.")}),HJe=({onClose:e,onSuccess:t})=>{const{toast:r}=_n(),{user:n}=ui(),[a,i]=S.useState("slip_upload"),[s,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null),[h,m]=S.useState([]),[w,g]=S.useState(""),[y,b]=S.useState([]),[_,N]=S.useState([]),[E,C]=S.useState(!1),D=zJe.filter(z=>z!==(n==null?void 0:n.role)),P=fd({resolver:hd(VJe),defaultValues:{items:[{inventory_item_id:"",quantity:1,batch_number:"",expiry_date:null}],invoice_delivery_date:new Date,notes:"",target_approval_role:""}}),{fields:F,append:L,remove:W}=FS({control:P.control,name:"items"});S.useEffect(()=>{(async()=>{try{const q=await R7();b(q),N(q.map(B=>({id:B.value,name:B.label,item_code:B.item_code})))}catch{r({variant:"destructive",title:"Error",description:"Could not load inventory items."})}})()},[r]);const T=z=>new Promise((q,B)=>{const G=new FileReader;G.onload=()=>q(G.result),G.onerror=Q=>B(Q),G.readAsDataURL(z)}),R=async z=>{if(o(z),f(null),m([]),z){u(!0);try{const q=await T(z),{data:B,error:G}=await $e.functions.invoke("ocr-slip-parser",{body:{image_data_urls:[q],file_type:z.type}});if(G)throw G;const Q=B;let O=0,J=0;const X=Q.items.map(oe=>{const{bestMatch:de,bestMatchScore:V}=p4(oe.slip_text,_);let se;return de&&typeof V=="number"?(se=1-V,se=Math.max(0,Math.min(1,se)),O+=se,J++):de?(se=.75,O+=se,J++):se=.1,{...oe,matched_item_id:(de==null?void 0:de.id)||null,matched_item_name:(de==null?void 0:de.name)||null,confidence:se}}),ne=J>0?O/J:Q.overall_confidence||0,ie={...Q,items:X,overall_confidence:ne};f(ie),m(ie.items.map(oe=>({...oe}))),r({title:"Slip Processed by Server",description:"Review the extracted items below."})}catch(q){console.error("Error processing slip with Edge Function:",q),r({variant:"destructive",title:"Processing Error",description:q.message||"Failed to process slip using server function."})}finally{u(!1)}}},j=(z,q,B)=>{const G=[...h];if(q==="matched_item_id")if(B===OH||B==="")G[z][q]=null,G[z].matched_item_name=null;else{G[z][q]=B;const Q=_.find(O=>O.id===B);G[z].matched_item_name=(Q==null?void 0:Q.name)||null}else G[z][q]=B;m(G)},Y=z=>{m(q=>q.filter((B,G)=>G!==z))},Z=async()=>{if(!n||!n.id){r({variant:"destructive",title:"Authentication Error",description:"User not logged in."});return}if(!d||h.length===0){r({variant:"destructive",title:"No Data",description:"No items to submit."});return}if(!w){r({variant:"destructive",title:"Validation Error",description:"Please select a target approval role."});return}C(!0);try{let z,q;if(s){const Q=await LJe(s,n.id);z=Q.filePath,q=Q.fileName}const B={header:{slip_image_path:z||null,slip_filename:q||null,invoice_delivery_date:d.invoice_delivery_date?d.invoice_delivery_date:null,status:"draft",confidence_score:d.overall_confidence,notes:`Urgent purchase via slip upload. OCR Confidence: ${((d.overall_confidence||0)*100).toFixed(0)}%`,requested_by_user_id:n.id,target_approval_role:w},items:h.filter(Q=>Q.matched_item_id&&(Q.quantity||0)>0).map(Q=>({inventory_item_id:Q.matched_item_id,slip_text:Q.slip_text,matched_item_name:Q.matched_item_name||"Unknown Item",quantity:Q.quantity||0,batch_number:Q.batch_number||null,expiry_date:Q.expiry_date||null}))};if(B.items.length===0){r({variant:"destructive",title:"No Valid Items",description:"No items with matched inventory ID and quantity > 0."}),C(!1);return}const G=await PH(B);if(G&&G.id)await TH(G.id,n.id),r({title:"Urgent Purchase Submitted",description:`Request ID: ${G.id} submitted for approval.`}),t();else throw new Error("Failed to get ID from created entry for submission.")}catch(z){r({variant:"destructive",title:"Submission Error",description:z.message||"Failed to submit urgent purchase for approval."})}finally{C(!1)}},re=async z=>{if(!n||!n.id){r({variant:"destructive",title:"Authentication Error",description:"User not logged in."});return}C(!0);try{const q={header:{invoice_delivery_date:z.invoice_delivery_date?z.invoice_delivery_date.toISOString().split("T")[0]:null,status:"draft",notes:z.notes||"Urgent purchase via Quick Entry.",requested_by_user_id:n.id,confidence_score:null,target_approval_role:z.target_approval_role},items:z.items.map(G=>{const Q=_.find(O=>O.id===G.inventory_item_id);return{inventory_item_id:G.inventory_item_id,matched_item_name:(Q==null?void 0:Q.name)||"Unknown Item",quantity:G.quantity,batch_number:G.batch_number||null,expiry_date:G.expiry_date?G.expiry_date.toISOString().split("T")[0]:null,slip_text:`Quick Entry: ${Q==null?void 0:Q.name}`}})},B=await PH(q);if(B&&B.id)await TH(B.id,n.id),r({title:"Quick Entry Submitted",description:`Request ID: ${B.id} submitted for approval.`}),P.reset(),t();else throw new Error("Failed to get ID from created quick entry for submission.")}catch(q){r({variant:"destructive",title:"Quick Entry Error",description:q.message||"Failed to submit quick entry for approval."})}finally{C(!1)}};return x(Lm,{value:a,onValueChange:z=>i(z),className:"w-full",children:[x(Rh,{className:"grid w-full grid-cols-2",children:[l(Oa,{value:"slip_upload",children:"Upload Slip/Invoice"}),l(Oa,{value:"quick_entry",children:"Quick Manual Entry"})]}),l(_a,{value:"slip_upload",children:x(or,{className:"border-0 shadow-none",children:[x(xr,{children:[l(br,{children:"Upload Delivery Slip or Invoice"}),l(_c,{children:"Upload an image (PNG, JPG). PDF support requires server-side OCR."})]}),x(hr,{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[" ",l(qJe,{onFileSelect:R,processing:c}),c&&x("div",{className:"flex items-center text-muted-foreground",children:[l(Un,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing slip..."]}),d&&!c&&x("div",{className:"mt-4",children:[l(tr,{htmlFor:"targetRoleSlip",children:"Send Approval To*"}),x(Ur,{value:w,onValueChange:g,children:[l(jr,{id:"targetRoleSlip",children:l(qr,{placeholder:"Select role for approval..."})}),l($r,{children:D.map(z=>l(wt,{value:z,children:z.charAt(0).toUpperCase()+z.slice(1)},z))})]}),!w&&E&&l("p",{className:"text-xs text-destructive mt-1",children:"Target approval role is required."})]}),d&&h.length>0&&!c&&x("div",{className:"space-y-3 mt-4",children:[x("h3",{className:"text-md font-semibold",children:["Review Extracted Items (Confidence: ",((d.overall_confidence||0)*100).toFixed(0),"%)"]}),d.invoice_delivery_date&&x("p",{className:"text-sm",children:["Detected Invoice/Delivery Date: ",d.invoice_delivery_date]}),h.map((z,q)=>l(or,{className:"p-3 space-y-2 bg-muted/50 border",children:x("div",{className:"grid grid-cols-6 gap-3 items-end",children:[x("div",{className:"col-span-6 sm:col-span-3 md:col-span-2",children:[l(tr,{htmlFor:`ocr-item-name-${q}`,className:"text-xs",children:"Slip Text"}),l(ht,{id:`ocr-item-name-${q}`,value:z.slip_text||"",onChange:B=>j(q,"slip_text",B.target.value),className:"h-8 text-sm"})]}),x("div",{className:"col-span-6 sm:col-span-3 md:col-span-2",children:[l(tr,{htmlFor:`ocr-item-inventory-${q}`,className:"text-xs",children:"Matched Item"}),x(Ur,{value:z.matched_item_id||"",onValueChange:B=>j(q,"matched_item_id",B),children:[l(jr,{className:"h-8 text-sm",children:l(qr,{placeholder:"Select item..."})}),x($r,{children:[l(wt,{value:OH,className:"text-sm",children:l("em",{children:"No Match / Clear Selection"})}),y.map(B=>x(wt,{value:B.value,className:"text-sm",children:[B.label," ",B.item_code?`(${B.item_code})`:""]},B.value))]})]}),z.confidence!==void 0&&z.confidence!==null&&x("p",{className:"text-xs mt-1",children:["Match Confidence: ",((z.confidence||0)*100).toFixed(0),"%"]})]}),x("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[l(tr,{htmlFor:`ocr-item-qty-${q}`,className:"text-xs",children:"Quantity"}),l(ht,{id:`ocr-item-qty-${q}`,type:"number",value:z.quantity||0,onChange:B=>j(q,"quantity",parseInt(B.target.value)||0),className:"h-8 text-sm"})]}),x("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[l(tr,{htmlFor:`ocr-item-batch-${q}`,className:"text-xs",children:"Batch No."}),l(ht,{id:`ocr-item-batch-${q}`,value:z.batch_number||"",onChange:B=>j(q,"batch_number",B.target.value),className:"h-8 text-sm"})]}),x("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[l(tr,{htmlFor:`ocr-item-expiry-${q}`,className:"text-xs",children:"Expiry Date"}),l(ht,{id:`ocr-item-expiry-${q}`,type:"date",placeholder:"YYYY-MM-DD",value:z.expiry_date||"",onChange:B=>j(q,"expiry_date",B.target.value),className:"h-8 text-sm"})]}),l("div",{className:"col-span-3 sm:col-span-2 md:col-span-1 flex items-end justify-end",children:l(Fe,{variant:"ghost",size:"icon",onClick:()=>Y(q),className:"text-destructive h-8 w-8",children:l(om,{className:"h-4 w-4"})})})]})},q))]})]}),x("div",{className:"flex justify-end space-x-2 p-4 border-t",children:[l(Fe,{variant:"outline",onClick:e,children:"Cancel"}),x(Fe,{onClick:Z,disabled:c||E||!d||h.length===0,children:[E?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(dx,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]})]})]})}),l(_a,{value:"quick_entry",children:x(or,{className:"border-0 shadow-none",children:[x(xr,{children:[l(br,{children:"Quick Manual Entry"}),l(_c,{children:"Manually add items to stock."})]}),x("form",{onSubmit:P.handleSubmit(re),children:[x(hr,{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[x("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x("div",{children:[l(tr,{htmlFor:"target_approval_role_quick",children:"Send Approval To*"}),l(zp,{name:"target_approval_role",control:P.control,render:({field:z,fieldState:q})=>x(_r,{children:[x(Ur,{onValueChange:z.onChange,defaultValue:z.value,children:[l(jr,{id:"target_approval_role_quick",children:l(qr,{placeholder:"Select role..."})}),l($r,{children:D.map(B=>l(wt,{value:B,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]}),q.error&&l("p",{className:"text-xs text-destructive mt-1",children:q.error.message})]})})]}),x("div",{children:[l(tr,{htmlFor:"quick-invoice-date",children:"Invoice/Delivery Date (Optional)"}),l(zp,{name:"invoice_delivery_date",control:P.control,render:({field:z})=>l(ht,{type:"date",value:z.value?new Date(z.value).toISOString().split("T")[0]:"",onChange:q=>z.onChange(q.target.value?new Date(q.target.value):null),className:"h-9"})})]}),x("div",{children:[l(tr,{htmlFor:"quick-notes",children:"Notes (Optional)"}),l(on,{id:"quick-notes",...P.register("notes")})]})]}),l("h4",{className:"text-md font-semibold pt-4",children:"Items"}),F.map((z,q)=>l(or,{className:"p-3 space-y-2 bg-muted/50",children:x("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 items-end",children:[x("div",{className:"sm:col-span-2 md:col-span-2",children:[l(tr,{htmlFor:`qitem-inventory-${q}`,className:"text-xs",children:"Inventory Item*"}),l(zp,{name:`items.${q}.inventory_item_id`,control:P.control,render:({field:B,fieldState:G})=>x(_r,{children:[x(Ur,{value:B.value||"",onValueChange:B.onChange,children:[l(jr,{className:"h-8 text-sm",children:l(qr,{placeholder:"Select item..."})}),l($r,{children:y.map(Q=>x(wt,{value:Q.value,className:"text-sm",children:[Q.label," ",Q.item_code?`(${Q.item_code})`:""]},Q.value))})]}),G.error&&l("p",{className:"text-xs text-destructive mt-1",children:G.error.message})]})})]}),x("div",{children:[l(tr,{htmlFor:`qitem-qty-${q}`,className:"text-xs",children:"Quantity*"}),l(zp,{name:`items.${q}.quantity`,control:P.control,render:({field:B,fieldState:G})=>x(_r,{children:[l(ht,{id:`qitem-qty-${q}`,type:"number",value:B.value||0,onChange:Q=>B.onChange(parseInt(Q.target.value,10)||0),className:"h-8 text-sm"}),G.error&&l("p",{className:"text-xs text-destructive mt-1",children:G.error.message})]})})]}),x("div",{children:[l(tr,{htmlFor:`qitem-batch-${q}`,className:"text-xs",children:"Batch No."}),l(zp,{name:`items.${q}.batch_number`,control:P.control,render:({field:B})=>l(ht,{id:`qitem-batch-${q}`,...B,value:B.value||"",className:"h-8 text-sm"})})]}),x("div",{children:[l(tr,{htmlFor:`qitem-expiry-${q}`,className:"text-xs",children:"Expiry Date"}),l(zp,{name:`items.${q}.expiry_date`,control:P.control,render:({field:B})=>l(ht,{type:"date",value:B.value?new Date(B.value).toISOString().split("T")[0]:"",onChange:G=>B.onChange(G.target.value?new Date(G.target.value):null),className:"h-8 text-sm"})})]}),l("div",{className:"flex items-center justify-end",children:F.length>1&&l(Fe,{type:"button",variant:"ghost",size:"icon",onClick:()=>W(q),className:"text-destructive h-8 w-8",children:l(om,{className:"h-4 w-4"})})})]})},z.id)),x(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>L({inventory_item_id:"",quantity:1,batch_number:"",expiry_date:null}),children:[l(Ch,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),x("div",{className:"flex justify-end space-x-2 p-4 border-t",children:[l(Fe,{variant:"outline",onClick:e,children:"Cancel"}),x(Fe,{type:"submit",disabled:E,children:[E?l(Un,{className:"mr-2 h-4 w-4 animate-spin"}):l(dx,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]})]})]})]})})]})},GJe=()=>{const{toast:e}=_n(),[t,r]=S.useState([]),[n,a]=S.useState(!1),[i,s]=S.useState(!1),o=async()=>{a(!0);try{const f=await h3();r(f)}catch(f){e({variant:"destructive",title:"Error fetching urgent purchases",description:f.message||"Could not load urgent purchase entries."})}finally{a(!1)}};S.useEffect(()=>{o()},[e]);const c=()=>{s(!1),o()},u=f=>{switch(f){case"approved":return"default";case"pending_approval":return"secondary";case"rejected":return"destructive";case"draft":return"outline";default:return"outline"}},d=f=>{if(!f)return!1;const h=new Date(f);return!isNaN(h.getTime())};return x("div",{className:"container mx-auto p-4",children:[l(Fa,{heading:"Urgent Purchase Entry",text:"Create or view history of urgent stock entries made without a PO.",children:x("div",{className:"flex gap-2",children:[x(Vn,{open:i,onOpenChange:s,children:[l(rb,{asChild:!0,children:x(Fe,{children:[l(Ch,{className:"mr-2 h-4 w-4"})," Create New Urgent Entry"]})}),x(Bn,{className:"sm:max-w-[80vw] md:max-w-[70vw] lg:max-w-[60vw] xl:max-w-[50vw]",children:[" ",x(Jn,{children:[l(Zn,{children:"Create Urgent Purchase Entry"}),x(us,{children:[" ","Upload a slip/invoice image for OCR processing or use the Quick Manual Entry tab."]})]}),l(HJe,{onClose:()=>s(!1),onSuccess:c})]})]}),l(Fe,{variant:"outline",asChild:!0,children:l(Yi,{to:"/purchases/urgent/history",children:"View Modification History"})}),l(Fe,{variant:"outline",asChild:!0,children:l(Yi,{to:"/purchases/urgent/my-requests",children:"View My Requests"})})]})}),n?l("div",{className:"flex justify-center items-center py-10",children:l(Un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l(or,{className:"mt-6",children:x(hr,{className:"p-0",children:[" ",x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Delivery Date"}),l(Kt,{children:"Status"}),l(Kt,{children:"Slip Filename"}),l(Kt,{children:"Requested At"}),l(Kt,{children:"Updated At"}),l(Kt,{children:"Actions"})]})}),l(zo,{children:t.length===0?l(Dn,{children:l(Wt,{colSpan:6,className:"text-center text-muted-foreground py-10",children:"No urgent purchase entries found."})}):t.map(f=>x(Dn,{children:[l(Wt,{children:d(f.invoice_delivery_date)?Mt(new Date(f.invoice_delivery_date),"PP"):"N/A"}),l(Wt,{children:l(vc,{variant:u(f.status),children:f.status.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())})}),l(Wt,{children:f.slip_filename||"N/A (Quick Entry)"}),l(Wt,{children:d(f.requested_at)?Mt(new Date(f.requested_at),"PPpp"):"N/A"}),l(Wt,{children:d(f.updated_at)?Mt(new Date(f.updated_at),"PPpp"):"N/A"}),l(Wt,{children:l(Fe,{variant:"outline",size:"sm",asChild:!0,children:x(Yi,{to:`/purchases/urgent/${f.id}`,children:[l(Fw,{className:"mr-2 h-4 w-4"})," View Details"]})})})]},f.id))})]})]})})]})},YJe=()=>{const{id:e}=fy(),{toast:t}=_n(),[r,n]=S.useState(null),[a,i]=S.useState(!1),[s,o]=S.useState(null);S.useEffect(()=>{const u=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;(async()=>{if(!e||!u.test(e)){o("Invalid or no purchase ID provided."),i(!1);return}i(!0),o(null);try{const f=await UJe(e);f?n(f):(o("Urgent purchase entry not found."),t({variant:"destructive",title:"Not Found",description:`Urgent purchase with ID ${e} not found.`}))}catch(f){o("Failed to load purchase details."),t({variant:"destructive",title:"Error",description:f.message||"Could not load urgent purchase details."})}finally{i(!1)}})()},[e,t]);const c=u=>{switch(u){case"Auto-Confirmed":case"Manually Confirmed":return"default";case"Pending Review":return"secondary";case"Rejected":case"ProcessingError":return"destructive";default:return"outline"}};return a?l("div",{className:"flex justify-center items-center py-10",children:l(Un,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s?x("div",{className:"container mx-auto p-4 text-center text-destructive",children:[l("p",{children:s}),l(Fe,{variant:"link",asChild:!0,className:"mt-4",children:x(Yi,{to:"/purchases/urgent",children:[" ",l(x5,{className:"mr-2 h-4 w-4"})," Back to Log"]})})]}):r?x("div",{className:"container mx-auto p-4 space-y-6",children:[l(Fa,{heading:"Urgent Purchase Details",text:r.requested_at?`Details for entry created on ${Mt(new Date(r.requested_at),"PPp")}`:"Details for entry",children:l(Fe,{variant:"outline",asChild:!0,children:x(Yi,{to:"/purchases/urgent",children:[" ",l(x5,{className:"mr-2 h-4 w-4"})," Back to Log"]})})}),x(or,{children:[l(xr,{children:l(br,{children:"Summary"})}),x(hr,{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[x("div",{children:[l("strong",{children:"ID:"})," ",r.id]}),x("div",{children:[l("strong",{children:"Status:"})," ",l(vc,{variant:c(r.status),children:r.status})]}),x("div",{children:[l("strong",{children:"Invoice/Delivery Date:"})," ",r.invoice_delivery_date?Mt(new Date(r.invoice_delivery_date),"PP"):"N/A"]}),x("div",{children:[l("strong",{children:"Slip Filename:"})," ",r.slip_filename||"N/A"]}),x("div",{children:[l("strong",{children:"OCR Confidence:"}),r.confidence_score!==null&&r.confidence_score!==void 0?` ${(r.confidence_score*100).toFixed(0)}%`:" N/A"]}),x("div",{children:[l("strong",{children:"Requested By:"})," ",r.requested_by_user_id||"Unknown"]}),x("div",{className:"md:col-span-3",children:[l("strong",{children:"Notes:"})," ",r.notes||"N/A"]})]})]}),x(or,{children:[l(xr,{children:l(br,{children:"Items Received"})}),l(hr,{children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Matched Item"}),l(Kt,{children:"Slip Text"}),l(Kt,{children:"Quantity"}),l(Kt,{children:"Batch No."}),l(Kt,{children:"Expiry Date"})]})}),l(zo,{children:r.items.length===0?l(Dn,{children:l(Wt,{colSpan:5,className:"text-center text-muted-foreground py-10",children:"No items found for this entry."})}):r.items.map(u=>x(Dn,{children:[l(Wt,{children:u.matched_item_name}),l(Wt,{children:u.slip_text||"N/A"}),l(Wt,{children:u.quantity}),l(Wt,{children:u.batch_number||"N/A"}),l(Wt,{children:u.expiry_date?Mt(new Date(u.expiry_date),"PP"):"N/A"})]},u.id))})]})})]})]}):l("div",{className:"container mx-auto p-4 text-center",children:"Urgent purchase not found."})},DH=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},KJe=()=>{const{user:e}=ui(),{toast:t}=_n(),r=Ss(),[n,a]=S.useState([]),[i,s]=S.useState(!0),o=S.useCallback(async()=>{s(!0);try{const d=await h3();a(d)}catch(d){console.error("Error fetching urgent purchase history:",d),t({variant:"destructive",title:"Error",description:"Could not load urgent purchase history."})}finally{s(!1)}},[t]);S.useEffect(()=>{o()},[o]);const c=d=>{r(`/purchases/urgent/${d}`)},u=d=>d?d.substring(0,8)+"...":"N/A";return x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"Urgent Purchase Modification History",text:"View the history and status of all urgent purchase entries.",children:l(Fe,{variant:"outline",asChild:!0,children:x(Yi,{to:"/purchases/urgent",children:[l(x5,{className:"mr-2 h-4 w-4"})," Back to Urgent Purchases"]})})}),l("div",{className:"mt-6",children:i?l("p",{children:"Loading history..."}):n.length===0?x(or,{children:[l(xr,{children:l(br,{children:"No Urgent Purchase History Found"})}),l(hr,{children:l("p",{children:"There are no urgent purchase entries in the system yet."})})]}):x(or,{children:[x(xr,{children:[l(br,{children:"Urgent Purchase History"}),x(_c,{children:[n.length," record(s) found."]})]}),l(hr,{children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Request ID / Slip"}),l(Kt,{children:"Status"}),l(Kt,{children:"Requested By"}),l(Kt,{children:"Requested At"}),l(Kt,{children:"Reviewed By"}),l(Kt,{children:"Reviewed At"}),l(Kt,{children:"Reviewer Notes"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:n.map(d=>x(Dn,{children:[l(Wt,{children:d.slip_filename||d.id.substring(0,8)+"..."}),l(Wt,{children:l(vc,{variant:d.status==="approved"?"default":d.status==="rejected"?"destructive":d.status==="pending_approval"?"outline":(d.status==="draft","secondary"),className:d.status==="approved"?"bg-green-100 text-green-700 border-green-300":d.status==="rejected"?"bg-red-100 text-red-700 border-red-300":d.status==="pending_approval"?"bg-yellow-100 text-yellow-700 border-yellow-300":"",children:d.status?d.status.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()):"N/A"})}),l(Wt,{children:u(d.requested_by_user_id)}),l(Wt,{children:DH(d.requested_at)?Mt(new Date(d.requested_at),"PPp"):"N/A"}),l(Wt,{children:u(d.reviewed_by_user_id)}),l(Wt,{children:DH(d.reviewed_at)?Mt(new Date(d.reviewed_at),"PPp"):"N/A"}),l(Wt,{className:"max-w-xs truncate",title:d.reviewer_notes||void 0,children:d.reviewer_notes||"N/A"}),l(Wt,{className:"text-right",children:x(Fe,{variant:"outline",size:"sm",onClick:()=>c(d.id),children:[l(Fw,{className:"mr-1 h-4 w-4"})," View"]})})]},d.id))})]})})]})})]})},IH=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},XJe=()=>{const{user:e}=ui(),{toast:t}=_n(),r=Ss(),[n,a]=S.useState([]),[i,s]=S.useState(!0),o=S.useCallback(async()=>{if(!(e!=null&&e.id)){s(!1),t({variant:"destructive",title:"Error",description:"User not found. Please log in."});return}s(!0);try{const u=await h3({requested_by_user_id:e.id});a(u)}catch(u){console.error("Error fetching your urgent purchase requests:",u),t({variant:"destructive",title:"Error",description:"Could not load your urgent purchase requests."})}finally{s(!1)}},[t,e]);S.useEffect(()=>{o()},[o]);const c=u=>{r(`/purchases/urgent/${u}`)};return x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"My Urgent Purchase Requests",text:"View your urgent purchase requests and their status.",children:l(Fe,{variant:"outline",asChild:!0,children:x(Yi,{to:"/purchases/urgent",children:[l(x5,{className:"mr-2 h-4 w-4"})," Back to Urgent Purchases"]})})}),l("div",{className:"mt-6",children:i?l("p",{children:"Loading your requests..."}):n.length===0?x(or,{children:[l(xr,{children:l(br,{children:"No Urgent Purchase Requests Found"})}),l(hr,{children:l("p",{children:"You have not made any urgent purchase requests yet."})})]}):x(or,{children:[x(xr,{children:[l(br,{children:"Your Urgent Purchase Requests"}),x(_c,{children:[n.length," request(s) found."]})]}),l(hr,{children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Request ID / Slip"}),l(Kt,{children:"Status"}),l(Kt,{children:"Requested At"}),l(Kt,{children:"Last Updated"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:n.map(u=>x(Dn,{children:[l(Wt,{children:u.slip_filename||u.id.substring(0,8)+"..."}),l(Wt,{children:l("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.status==="approved"?"bg-green-100 text-green-700":u.status==="rejected"?"bg-red-100 text-red-700":u.status==="pending_approval"?"bg-yellow-100 text-yellow-700":u.status==="draft"?"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"}`,children:u.status?u.status.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()):"N/A"})}),l(Wt,{children:IH(u.requested_at)?Mt(new Date(u.requested_at),"PPpp"):"N/A"}),l(Wt,{children:IH(u.updated_at)?Mt(new Date(u.updated_at),"PPpp"):"N/A"}),l(Wt,{className:"text-right",children:x(Fe,{variant:"outline",size:"sm",onClick:()=>c(u.id),children:[l(Fw,{className:"mr-1 h-4 w-4"})," View"]})})]},u.id))})]})})]})})]})},JJe=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],YO=new Date().getFullYear(),ZJe=Array.from({length:5},(e,t)=>YO-t),QJe=()=>{const{toast:e}=_n(),[t,r]=S.useState([]),[n,a]=S.useState([]),[i,s]=S.useState(!0),[o,c]=S.useState({}),[u,d]=S.useState(YO.toString()),[f,h]=S.useState(void 0),m=S.useCallback(async()=>{var b,_;s(!0);try{const N=await pLe({startDate:(b=o.dateRange)==null?void 0:b.from,endDate:(_=o.dateRange)==null?void 0:_.to,searchTerm:o.searchTerm});r(N||[]),a(N||[])}catch(N){console.error("Failed to fetch inventory logs:",N),e({variant:"destructive",title:"Error",description:"Failed to load inventory log history."}),r([]),a([])}finally{s(!1)}},[e,o.dateRange,o.searchTerm]);S.useEffect(()=>{m()},[m]),S.useEffect(()=>{let b=[...t];if(f&&u){const _=`${u}-${f}`;b=b.filter(N=>N.created_at.startsWith(_))}if(o.searchTerm){const _=o.searchTerm.toLowerCase();b=b.filter(N=>{var L,W,T,R,j,Y;const E=(W=(L=N.inventory_items)==null?void 0:L.item_name)==null?void 0:W.toLowerCase().includes(_),C=(R=(T=N.inventory_items)==null?void 0:T.item_code)==null?void 0:R.toLowerCase().includes(_),D=N.change_type.toLowerCase().includes(_),P=(j=N.user_id)==null?void 0:j.toLowerCase().includes(_),F=(Y=N.notes)==null?void 0:Y.toLowerCase().includes(_);return E||C||D||P||F})}a(b)},[t,f,u,o.searchTerm]);const w=(b,_)=>{c(N=>({...N,[b]:_}))},g=()=>{if(u&&f&&!o.dateRange){const b=new Date(parseInt(u),parseInt(f)-1,1),_=new Date(parseInt(u),parseInt(f),0);w("dateRange",{from:b,to:_})}else!f&&!o.dateRange&&w("dateRange",void 0)};S.useEffect(()=>{g()},[f,u]);const y=()=>{c({}),h(void 0),d(YO.toString())};return x("div",{className:"space-y-4",children:[x("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-md bg-muted/40",children:[x("div",{children:[l("label",{className:"text-sm font-medium mb-1 block",children:"Date Range"}),l(I7,{date:o.dateRange,onDateChange:b=>{w("dateRange",b),h(void 0)},className:"w-full"})]}),x("div",{children:[l("label",{className:"text-sm font-medium mb-1 block",children:"Year"}),x(Ur,{value:u,onValueChange:d,children:[l(jr,{children:l(qr,{placeholder:"Select Year"})}),l($r,{children:ZJe.map(b=>l(wt,{value:b.toString(),children:b},b))})]})]}),x("div",{children:[l("label",{className:"text-sm font-medium mb-1 block",children:"Month"}),x(Ur,{value:f,onValueChange:h,children:[l(jr,{children:l(qr,{placeholder:"Select Month (All)"})}),x($r,{children:[l(wt,{value:"ALL_MONTHS",children:"All Months"})," ",JJe.map(b=>l(wt,{value:b.value,children:b.label},b.value))]})]})]}),x("div",{children:[l("label",{className:"text-sm font-medium mb-1 block",children:"Search Logs"}),l(ht,{placeholder:"Search by item, user, notes...",value:o.searchTerm||"",onChange:b=>w("searchTerm",b.target.value),className:"w-full"})]}),l("div",{className:"lg:col-span-4 flex justify-end",children:l(Fe,{variant:"ghost",onClick:y,children:"Clear Filters"})})]}),l(nd,{className:"h-[400px] md:h-[500px] border rounded-md",children:x(qo,{children:[l(Wo,{className:"sticky top-0 bg-card z-10",children:x(Dn,{children:[l(Kt,{children:"Date"}),l(Kt,{children:"Item Name"}),l(Kt,{children:"SKU"}),l(Kt,{className:"text-right",children:"Change"}),l(Kt,{children:"Type"}),l(Kt,{children:"User"}),l(Kt,{children:"Notes"})]})}),l(zo,{children:i?l(Dn,{children:l(Wt,{colSpan:7,className:"text-center h-32",children:"Loading log history..."})}):n.length===0?l(Dn,{children:l(Wt,{colSpan:7,className:"text-center h-32",children:"No log entries match your filters."})}):n.map(b=>{var _,N;return x(Dn,{children:[l(Wt,{children:Mt(new Date(b.created_at),"MMM d, yyyy HH:mm")}),l(Wt,{className:"font-medium",children:((_=b.inventory_items)==null?void 0:_.item_name)||"N/A"}),l(Wt,{children:((N=b.inventory_items)==null?void 0:N.item_code)||"N/A"}),l(Wt,{className:`text-right font-semibold ${b.quantity_change>0?"text-green-600":"text-red-600"}`,children:b.quantity_change>0?`+${b.quantity_change}`:b.quantity_change}),l(Wt,{children:b.change_type.replace(/_/g," ").replace(/\b\w/g,E=>E.toUpperCase())}),l(Wt,{children:b.user_id?`User: ${b.user_id.substring(0,8)}...`:"System"}),l(Wt,{className:"text-xs max-w-xs truncate",title:b.notes||"",children:b.notes||"N/A"})]},b.id)})})]})})]})},v5=["Expired","Damaged","Lost","Stock Count Correction","Used","Other"],eZe=Ie.enum(v5),Kse=["image/png","image/jpeg","image/jpg"],Xse=2*1024*1024,tZe=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"],rZe=Ie.object({quantity_to_decrease:Ie.number().int().positive({message:"Quantity must be a positive number."}).optional(),reason:eZe.optional(),notes:Ie.string().min(1,{message:"Notes are required for adjustment requests."}),approver_role_target:Ie.enum(["admin","doctor","owner"],{message:"Please select an approver role."}).optional(),photo_file:Ie.custom(e=>e instanceof File,"Photo proof is required.").refine(e=>!e||e.size<=Xse,"Photo size should be less than 2MB.").refine(e=>Kse.includes((e==null?void 0:e.type)||""),"Only .png, .jpg, .jpeg files are accepted."),customApproverEmails:Ie.string().optional()}),nZe=()=>{var se;const{toast:e}=_n(),{user:t}=ui(),r=Ss(),[n,a]=S.useState([]),[i,s]=S.useState([]),[o,c]=S.useState(""),[u,d]=S.useState(null),[f,h]=S.useState(!0),[m,w]=S.useState(!1),[g,y]=S.useState(null),[b,_]=S.useState(null),[N,E]=S.useState([]),[C,D]=S.useState(!1),[P,F]=S.useState(!1),[L,W]=S.useState(null),[T,R]=S.useState(!1),[j,Y]=S.useState(null),[Z,re]=S.useState(!1),[z,q]=S.useState([]),[B,G]=S.useState(!1),Q=()=>{const fe=t==null?void 0:t.role,te=[{value:"admin",label:"Admin"},{value:"doctor",label:"Doctor"},{value:"owner",label:"Owner"}];if(!fe)return te;switch(fe){case"admin":return te.filter(ke=>ke.value==="doctor"||ke.value==="owner");case"owner":return te.filter(ke=>ke.value==="admin"||ke.value==="doctor");case"doctor":return te.filter(ke=>ke.value==="admin"||ke.value==="owner");default:return te}},O=fd({resolver:hd(rZe),defaultValues:{notes:"",photo_file:null,customApproverEmails:"",approver_role_target:void 0}}),J=Qe.useCallback(async()=>{h(!0);try{const fe=await $R();a(fe||[]),s(fe||[])}catch(fe){console.error("Failed to fetch inventory items:",fe),e({variant:"destructive",title:"Error",description:"Failed to load items for selection."})}finally{h(!1)}},[e]);S.useEffect(()=>{J()},[J]),S.useEffect(()=>{const fe=o.toLowerCase(),te=n.filter(ke=>ke.item_name.toLowerCase().includes(fe)||ke.item_code&&ke.item_code.toLowerCase().includes(fe)||ke.category&&ke.category.toLowerCase().includes(fe));s(te)},[o,n]);const X=fe=>{d(fe),D(!1),y(null),E([]),_(null),O.reset({quantity_to_decrease:void 0,reason:"Other",notes:O.getValues("notes")||"",photo_file:O.getValues("photo_file")||null,customApproverEmails:O.getValues("customApproverEmails")||""})},ne=S.useCallback(async()=>{if(!g){_("No file selected."),E([]);return}_(null),E([]),h(!0);try{const fe=new FileReader;fe.onload=async te=>{var ke;try{const Re=(ke=te.target)==null?void 0:ke.result;if(!Re){_("Failed to read file data."),h(!1);return}const Ce=jO(Re,{type:"array"}),ve=Ce.SheetNames[0],Ge=Ce.Sheets[ve],pt=of.sheet_to_json(Ge);if(pt.length===0){_("File is empty or has no data in the first sheet."),h(!1);return}let it=n;if(it.length===0){if(await J(),n.length===0){_("Inventory items not loaded. Please try again."),h(!1);return}it=n}const Le=[],ut=[];pt.forEach((he,Ee)=>{const Me=he.SKU||he["Item Name"]||he.sku||he.item_name,at=parseInt(he["Quantity to Decrease"]||he.quantity_to_decrease,10),ct=he.Reason||he.reason;if(!Me){ut.push(`Row ${Ee+2}: Missing SKU or Item Name.`);return}if(isNaN(at)||at<=0){ut.push(`Row ${Ee+2}: Invalid or missing 'Quantity to Decrease' for ${Me}. Must be a positive number.`);return}if(!ct||!v5.includes(ct)){ut.push(`Row ${Ee+2}: Invalid or missing 'Reason' for ${Me}. Valid reasons: ${v5.join(", ")}.`);return}const dt=it.find(Xe=>Xe.item_code&&Xe.item_code.toLowerCase()===String(Me).toLowerCase()||Xe.item_name.toLowerCase()===String(Me).toLowerCase());if(!dt){ut.push(`Row ${Ee+2}: Item '${Me}' not found in inventory.`);return}if(at>dt.quantity){ut.push(`Row ${Ee+2}: Quantity to decrease (${at}) for '${Me}' exceeds current stock (${dt.quantity}).`);return}Le.push({inventory_item_id:dt.id,item_name:dt.item_name,current_stock:dt.quantity,quantity_to_decrease:at,reason:ct})}),ut.length>0?(_(`Validation errors found in the file:
- ${ut.join(`
- `)}`),E([])):(E(Le),e({title:"File Processed",description:`${Le.length} items ready for adjustment.`}))}catch(Re){console.error("Error parsing file content:",Re),_(`Error parsing file: ${Re.message}`)}finally{h(!1)}},fe.onerror=te=>{console.error("FileReader error:",te),_("Failed to read the file."),h(!1)},fe.readAsArrayBuffer(g)}catch(fe){console.error("Error initiating file read:",fe),_(`Error reading file: ${fe.message}`),h(!1)}},[g,n,e,J]),ie=async()=>{if(t!=null&&t.id){G(!0);try{const fe=["pending","approved","rejected"],te=await vLe(t.id,fe,20);q(te)}catch(fe){console.error("Error fetching user's adjustment requests:",fe),e({variant:"destructive",title:"Error",description:"Could not load your adjustment requests."})}finally{G(!1)}}},oe=()=>{ie(),re(!0)},de=async(fe,te,ke)=>{var Re;R(!0),Y(null);try{const Ce=await gLe(fe);if(Ce){if(W(Ce),Ce.photo_url){const ve=await JS(Ce.photo_url);Y(ve)}e({title:"Request Submitted Successfully",description:te?`${ke} adjustment requests initiated. Displaying details for the first item.`:`Adjustment request for ${((Re=Ce.inventory_items)==null?void 0:Re.item_name)||"item"} submitted.`})}else e({variant:"destructive",title:"Error",description:"Could not fetch details of the submitted request."})}catch(Ce){console.error("Failed to fetch submitted request details:",Ce),e({variant:"destructive",title:"Error",description:"Failed to load request details after submission."})}finally{O.reset({notes:"",photo_file:null,customApproverEmails:"",quantity_to_decrease:void 0,reason:void 0}),d(null),D(!1),y(null),E([]),_(null),J(),R(!1)}},V=async fe=>{var te,ke;w(!0);try{if(!(t!=null&&t.id)){e({variant:"destructive",title:"Error",description:"User not authenticated."});return}if(!fe.photo_file){O.setError("photo_file",{type:"manual",message:"Photo proof is required."});return}if(C&&N.length>0){if(b){e({variant:"destructive",title:"Error",description:"Cannot submit, please fix errors in the uploaded file."});return}try{const Re=Mw();e({title:"Uploading Photo...",description:"Please wait."});const Ce=await Cz(fe.photo_file,Re);e({title:"Submitting Bulk Request...",description:`Processing ${N.length} items from file.`});const ve=((te=fe.customApproverEmails)==null?void 0:te.split(",").map(pt=>pt.trim()).filter(pt=>pt.length>0))||null;let Ge=null;for(const pt of N){const it=await Ez({inventory_item_id:pt.inventory_item_id,quantity_to_decrease:pt.quantity_to_decrease,reason:pt.reason,notes:fe.notes,photo_url:Ce,requested_by_user_id:t.id,custom_approver_emails:ve});Ge||(Ge=it.id)}Ge?await de(Ge,!0,N.length):(e({title:"Success",description:`Bulk adjustment process completed for ${N.length} items. No specific request to display.`}),O.reset({notes:"",photo_file:null,customApproverEmails:""}),D(!1),y(null),E([]),_(null),J())}catch(Re){console.error("Failed to submit file-based bulk adjustment request:",Re),e({variant:"destructive",title:"Bulk Adjustment Failed",description:(Re==null?void 0:Re.message)||"An unexpected error occurred during bulk submission."})}}else if(u&&fe.quantity_to_decrease!==void 0&&fe.reason!==void 0){if(u.quantity-fe.quantity_to_decrease<0){O.setError("quantity_to_decrease",{type:"manual",message:`Decrease quantity (${fe.quantity_to_decrease}) exceeds current stock (${u.quantity}) for ${u.item_name}.`});return}try{const Re=Mw();e({title:"Uploading Photo...",description:"Please wait."});const Ce=await Cz(fe.photo_file,Re);e({title:"Submitting Request...",description:"Saving adjustment request details."});const ve=((ke=fe.customApproverEmails)==null?void 0:ke.split(",").map(pt=>pt.trim()).filter(pt=>pt.length>0))||null,Ge=await Ez({inventory_item_id:u.id,quantity_to_decrease:fe.quantity_to_decrease,reason:fe.reason,notes:fe.notes,photo_url:Ce,requested_by_user_id:t.id,custom_approver_emails:ve});await de(Ge.id,!1)}catch(Re){console.error("Failed to submit single adjustment request:",Re),e({variant:"destructive",title:"Adjustment Failed",description:(Re==null?void 0:Re.message)||"An unexpected error occurred during single item submission."})}}else{e({variant:"destructive",title:"Error",description:"Form data is incomplete or invalid."});return}}catch(Re){console.error("Overall submission process error:",Re),e({variant:"destructive",title:"Submission Process Error",description:(Re==null?void 0:Re.message)||"An unexpected error occurred."})}finally{w(!1)}};return x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:L?"Adjustment Request Submitted":"Create Stock Adjustment Request",text:L?`Details for request ID: ${L.id}`:C?"Adjust stock via file upload.":u?`Adjusting: ${u.item_name} (Current Stock: ${u.quantity})`:"Select an item or upload a file to adjust stock."}),T?l("div",{className:"flex justify-center items-center h-64",children:l("p",{children:"Loading request details..."})}):L?x(or,{className:"max-w-2xl mx-auto mt-6",children:[x(xr,{children:[x(br,{className:"flex items-center",children:["Request Details",L.status==="approved"&&l(XH,{className:"ml-2 h-6 w-6 text-green-500"}),L.status==="pending"&&l(Ll,{className:"ml-2 h-6 w-6 text-yellow-500"}),L.status==="rejected"&&l(Ll,{className:"ml-2 h-6 w-6 text-red-500"})]}),x(_c,{children:["Item: ",((se=L.inventory_items)==null?void 0:se.item_name)||"N/A"]})]}),x(hr,{className:"space-y-4",children:[x("div",{children:[l("strong",{children:"Request ID:"})," ",L.id]}),x("div",{children:[l("strong",{children:"Quantity Decreased:"})," ",L.quantity_to_decrease]}),x("div",{children:[l("strong",{children:"Reason:"})," ",L.reason]}),x("div",{children:[l("strong",{children:"Notes:"})," ",L.notes]}),x("div",{children:[l("strong",{children:"Status:"}),l("span",{className:`ml-1 font-semibold ${L.status==="approved"?"text-green-600":L.status==="rejected"?"text-red-600":"text-yellow-600"}`,children:L.status.toUpperCase()})]}),x("div",{children:[l("strong",{children:"Requested At:"})," ",new Date(L.requested_at).toLocaleString()]}),x("div",{children:[l("strong",{children:"Requested By:"})," ",L.requester_profile&&`${L.requester_profile.first_name||""} ${L.requester_profile.last_name||""}`.trim()||"N/A"]}),L.reviewed_by_user_id&&x(_r,{children:[x("div",{children:[l("strong",{children:"Reviewed At:"})," ",L.reviewed_at?new Date(L.reviewed_at).toLocaleString():"N/A"]}),x("div",{children:[l("strong",{children:"Reviewer Notes:"})," ",L.reviewer_notes||"N/A"]})]}),j?x("div",{className:"mt-4",children:[l("strong",{children:"Proof Photo:"}),l("img",{src:j,alt:"Adjustment Proof",className:"rounded-md border max-w-xs max-h-64 mt-2"})]}):L.photo_url?x("div",{className:"mt-4",children:[l("strong",{children:"Proof Photo:"}),x("div",{className:"flex items-center text-muted-foreground",children:[l(j2,{className:"mr-2 h-5 w-5"}),l("span",{children:"Loading photo or photo not available..."})]})]}):null,x("div",{className:"flex justify-end space-x-3 pt-4",children:[x(Fe,{variant:"outline",onClick:()=>{W(null),Y(null)},children:[l(Ch,{className:"mr-2 h-4 w-4"})," Make Another Adjustment"]}),x(Fe,{onClick:()=>r("/inventory"),children:[l(Pce,{className:"mr-2 h-4 w-4"})," Go to Inventory"]})]})]})]}):!u&&!C?x(_r,{children:[x("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center my-4 space-y-2 sm:space-y-0",children:[l(ht,{placeholder:"Search items by name, SKU, or category...",value:o,onChange:fe=>c(fe.target.value),className:"max-w-full sm:max-w-sm"}),x("div",{className:"flex space-x-2",children:[" ",x(Fe,{onClick:()=>{D(!0),d(null),E([]),_(null);const fe={notes:O.getValues("notes"),photo_file:O.getValues("photo_file"),customApproverEmails:O.getValues("customApproverEmails")};O.reset({...fe})},children:[l(Z0,{className:"mr-2 h-4 w-4"})," Adjust via Bulk Upload"]}),l(Fe,{variant:"outline",onClick:()=>F(!0),children:"View Modification History"}),x(Fe,{variant:"outline",onClick:oe,children:[l(rG,{className:"mr-2 h-4 w-4"})," View My Requests"]})]})]}),l(nd,{className:"h-[calc(100vh-420px)] border rounded-md",children:x(qo,{children:[l(Wo,{className:"sticky top-0 bg-card z-10",children:x(Dn,{children:[l(Kt,{children:"Item Name"}),l(Kt,{children:"SKU"}),l(Kt,{children:"Category"}),l(Kt,{className:"text-right",children:"Current Stock"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:f?l(Dn,{children:l(Wt,{colSpan:5,className:"text-center",children:"Loading items..."})}):i.length===0?l(Dn,{children:l(Wt,{colSpan:5,className:"text-center",children:"No items match your search or no items available."})}):i.map(fe=>x(Dn,{children:[l(Wt,{className:"font-medium",children:fe.item_name}),l(Wt,{children:fe.item_code||"N/A"}),l(Wt,{children:fe.category||"N/A"}),l(Wt,{className:"text-right",children:fe.quantity}),l(Wt,{className:"text-right",children:l(Fe,{variant:"outline",size:"sm",onClick:()=>X(fe),disabled:m,children:"Adjust"})})]},fe.id))})]})})]}):x("div",{className:"max-w-2xl mx-auto mt-6",children:[C?x("div",{className:"space-y-6 p-6 border rounded-lg shadow-sm bg-card mb-6",children:[" ",x("div",{className:"flex justify-between items-center",children:[l("h3",{className:"text-lg font-semibold",children:"Bulk Adjust via File Upload"}),l(Fe,{variant:"ghost",size:"sm",onClick:()=>{D(!1),y(null),E([]),_(null);const fe={notes:O.getValues("notes"),photo_file:O.getValues("photo_file"),customApproverEmails:O.getValues("customApproverEmails")};O.reset({...fe})},children:"Cancel File Upload"})]}),x("div",{children:[l("label",{htmlFor:"adjustment-file-upload",className:"block text-sm font-medium text-foreground mb-1",children:"Upload Adjustment File (.xlsx, .csv)"}),l("div",{className:"flex items-center justify-center w-full",children:x("label",{htmlFor:"adjustment-file-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted/50",children:[x("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[l(Z0,{className:"w-8 h-8 mb-4 text-muted-foreground"}),x("p",{className:"mb-2 text-sm text-muted-foreground",children:[l("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),l("p",{className:"text-xs text-muted-foreground",children:"XLSX, CSV (MAX. 5MB)"})]}),l(ht,{id:"adjustment-file-upload",type:"file",className:"hidden",accept:tZe.join(","),onChange:fe=>{y(fe.target.files?fe.target.files[0]:null),E([]),_(null)}})]})}),g&&x("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:["Selected: ",g.name]}),b&&l("p",{className:"text-sm font-medium text-destructive mt-1",children:b}),l("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:"Expected columns: 'SKU' (or 'Item Name'), 'Quantity to Decrease', 'Reason'."})]}),l(Fe,{onClick:ne,disabled:!g||f||m,children:f?"Processing File...":"Process Uploaded File"}),N.length>0&&!b&&x("div",{className:"mt-4 p-3 bg-green-100 border border-green-300 rounded-md",children:[x("p",{className:"text-green-700 font-semibold",children:[N.length," items parsed successfully and ready for adjustment."]}),l("p",{className:"text-xs text-green-600",children:"Review common fields below and submit."})]})]}):null,l(Mh,{...O,children:x("form",{onSubmit:O.handleSubmit(V),className:"space-y-8 p-6 border rounded-lg shadow-sm bg-card",children:[!C&&u&&x("h3",{className:"text-lg font-semibold",children:["Adjusting Single Item: ",u.item_name," (Current: ",u.quantity,")"]}),!C&&u&&x(_r,{children:[l(He,{control:O.control,name:"quantity_to_decrease",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Quantity to Decrease"}),l(je,{children:l(ht,{type:"number",min:"1",placeholder:"Enter positive quantity",...fe,onChange:te=>fe.onChange(parseInt(te.target.value,10)||0),disabled:m})}),l(Ze,{})]})}),l(He,{control:O.control,name:"reason",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Reason for Adjustment"}),x(Ur,{onValueChange:fe.onChange,defaultValue:fe.value,disabled:m,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select reason"})})}),l($r,{children:v5.map(te=>l(wt,{value:te,children:te.replace(/_/g," ").replace(/\b\w/g,ke=>ke.toUpperCase())},te))})]}),l(Ze,{})]})})]}),(u||C&&N.length>0&&!b)&&x(_r,{children:[l(He,{control:O.control,name:"photo_file",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Photo Proof (Required)"}),l(je,{children:l(am,{value:fe.value,onFileChange:te=>fe.onChange(te),accept:Kse.join(","),maxSize:Xse,disabled:m})}),l(Ze,{})]})}),l(He,{control:O.control,name:"notes",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Notes (Required)"}),l(je,{children:l(on,{placeholder:"Explain the reason for adjustment...",...fe,disabled:m})}),l(Ze,{})]})}),l(He,{control:O.control,name:"approver_role_target",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Assign Approver To"}),x(Ur,{onValueChange:te=>{fe.onChange(te);const ke=Q();ke.length===1&&ke[0].value},value:fe.value,disabled:m,children:[l(je,{children:l(jr,{children:l(qr,{placeholder:"Select role to approve this request"})})}),l($r,{children:Q().map(te=>l(wt,{value:te.value,children:te.label},te.value))})]}),l(Ze,{}),l("p",{className:"text-xs text-muted-foreground",children:"Select the role that should approve this request."})]})}),l(He,{control:O.control,name:"customApproverEmails",render:({field:fe})=>x(De,{children:[l(Oe,{children:"Custom Approver Emails (Optional)"}),l(je,{children:l(ht,{placeholder:"e.g., approver1@example.com, approver2@example.com",...fe,disabled:m})}),l(Ze,{}),l("p",{className:"text-xs text-muted-foreground",children:"Enter comma-separated email addresses if you want to notify specific people instead of the default role-based approvers."})]})}),x("div",{className:"flex justify-end space-x-3 pt-4",children:[l(Fe,{type:"button",variant:"outline",onClick:()=>{d(null),D(!1),y(null),E([]),_(null),O.reset({notes:"",photo_file:null,customApproverEmails:"",approver_role_target:void 0,quantity_to_decrease:void 0,reason:void 0})},disabled:m,children:"Cancel"}),l(Fe,{type:"submit",disabled:m||!u&&!C||C&&N.length===0,children:m?"Submitting...":"Submit Adjustment Request(s)"})]})]})]})})]}),P&&l(Vn,{open:P,onOpenChange:F,children:x(Bn,{className:"sm:max-w-xl md:max-w-2xl lg:max-w-4xl xl:max-w-5xl",children:[" ",l(Jn,{children:l(Zn,{children:"Inventory Modification Log"})}),x("div",{className:"py-1 max-h-[70vh] overflow-y-auto",children:[" ",l(QJe,{})]}),x(fs,{className:"sm:justify-start",children:[" ",l(Fe,{variant:"outline",onClick:()=>F(!1),className:"mt-2 sm:mt-0",children:"Close"})]})]})}),Z&&l(Vn,{open:Z,onOpenChange:re,children:x(Bn,{className:"sm:max-w-2xl md:max-w-3xl lg:max-w-4xl",children:[x(Jn,{children:[l(Zn,{children:"My Adjustment Requests"}),l(us,{children:"Showing your most recent adjustment requests. Click a request to view its full details."})]}),l("div",{className:"py-4 max-h-[70vh] overflow-y-auto",children:B?l("p",{children:"Loading your requests..."}):z.length===0?l("p",{children:"You have no adjustment requests."}):x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Item"}),l(Kt,{children:"Quantity"}),l(Kt,{children:"Reason"}),l(Kt,{children:"Date"}),l(Kt,{children:"Status"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:z.map(fe=>{var te;return x(Dn,{children:[l(Wt,{children:((te=fe.inventory_items)==null?void 0:te.item_name)||"N/A"}),l(Wt,{children:fe.quantity_to_decrease}),l(Wt,{children:fe.reason}),l(Wt,{children:new Date(fe.requested_at).toLocaleDateString()}),l(Wt,{children:l("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${fe.status==="approved"?"bg-green-100 text-green-700":fe.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:fe.status.toUpperCase()})}),l(Wt,{className:"text-right",children:l(Fe,{variant:"outline",size:"sm",onClick:()=>{W(fe),fe.photo_url?JS(fe.photo_url).then(Y):Y(null),re(!1)},children:"View Details"})})]},fe.id)})})]})}),l(fs,{children:l(Fe,{variant:"outline",onClick:()=>re(!1),children:"Close"})})]})})]})},aZe=()=>{const{toast:e}=_n(),{user:t}=ui(),r=Ss(),[n,a]=S.useState([]),[i,s]=S.useState(!0),[o,c]=S.useState(!1),[u,d]=S.useState({}),[f,h]=S.useState(""),m=S.useCallback(async()=>{s(!0);try{const y=await $R();a(y||[]);const b={};(y||[]).forEach(_=>{b[_.id]={physicalCount:void 0,notes:""}}),d(b)}catch(y){console.error("Failed to fetch inventory items:",y),e({variant:"destructive",title:"Error",description:"Failed to load items for stock take."})}finally{s(!1)}},[e]);S.useEffect(()=>{m()},[m]);const w=(y,b,_)=>{d(N=>({...N,[y]:{...N[y],[b]:b==="physicalCount"?_===""?void 0:parseInt(String(_),10):String(_)}}))},g=async()=>{if(!(t!=null&&t.id)){e({variant:"destructive",title:"Error",description:"User not authenticated."});return}c(!0);const y=[];let b=0;if(n.forEach(_=>{const N=u[_.id];if(N&&N.physicalCount!==void 0&&N.physicalCount>=0){b++;const E={inventory_item_id:_.id,system_quantity_at_count:_.quantity,physical_counted_quantity:N.physicalCount,counted_by_user_id:t.id,notes:N.notes||f||null};y.push(xLe(E))}}),b===0){e({variant:"default",title:"No Data",description:"No physical counts entered to submit."}),c(!1);return}try{await Promise.all(y),e({title:"Success",description:`${b} stock take entries recorded successfully.`}),r("/inventory"),m(),h("")}catch(_){console.error("Failed to record one or more stock takes:",_),e({variant:"destructive",title:"Stock Take Submission Failed",description:"An error occurred while saving some entries. Please check and try again."})}finally{c(!1)}};return i?l("div",{className:"p-4",children:"Loading inventory items..."}):x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"Perform Stock Take",text:"Enter the physical count for each item. Only items with a physical count will be submitted."}),x("div",{className:"mt-6",children:[l("div",{className:"mb-4",children:l(on,{placeholder:"Global notes for this stock take session (optional)",value:f,onChange:y=>h(y.target.value),className:"max-w-xl",disabled:o})}),x(nd,{className:"h-[calc(100vh-300px)] border rounded-md",children:[" ",x(qo,{children:[l(Wo,{className:"sticky top-0 bg-background z-10",children:x(Dn,{children:[l(Kt,{className:"w-[300px]",children:"Item Name"}),l(Kt,{className:"text-right",children:"System Qty"}),l(Kt,{className:"w-[150px] text-right",children:"Physical Count"}),l(Kt,{className:"w-[250px]",children:"Item Notes (Optional)"})]})}),l(zo,{children:n.length===0&&!i?l(Dn,{children:l(Wt,{colSpan:4,className:"text-center",children:"No inventory items found."})}):n.map(y=>{var b,_;return x(Dn,{children:[l(Wt,{className:"font-medium",children:y.item_name}),l(Wt,{className:"text-right",children:y.quantity}),l(Wt,{className:"text-right",children:l(ht,{type:"number",min:"0",placeholder:"Count",value:((b=u[y.id])==null?void 0:b.physicalCount)??"",onChange:N=>w(y.id,"physicalCount",N.target.value),className:"text-right",disabled:o})}),l(Wt,{children:l(ht,{type:"text",placeholder:"Notes for this item",value:((_=u[y.id])==null?void 0:_.notes)??"",onChange:N=>w(y.id,"notes",N.target.value),disabled:o})})]},y.id)})})]})]}),x("div",{className:"mt-6 flex justify-end space-x-3",children:[l(Fe,{type:"button",variant:"outline",onClick:()=>r("/inventory"),disabled:o,children:"Cancel"}),l(Fe,{onClick:g,disabled:o||i,children:o?"Submitting Stock Take...":"Submit Stock Take"})]})]})]})},iZe=({allowedRoles:e,children:t,fallback:r})=>{const{user:n,loading:a}=ui();if(a)return l("div",{className:"flex justify-center items-center h-screen",children:"Loading authentication status..."});if(!n)return l(_r,{children:r||l("div",{className:"flex justify-center items-center h-screen",children:"Access Denied: Not Logged In."})});const i=n.role;return!i||!e.includes(i)?l(_r,{children:r||l("div",{className:"flex justify-center items-center h-screen",children:"Access Denied: You do not have the required permissions."})}):l(_r,{children:t})},QT=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},sZe=()=>{var q,B,G,Q;const{user:e}=ui(),{toast:t}=_n(),[r,n]=S.useState([]),[a,i]=S.useState(!0),[s,o]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState([]),[h,m]=S.useState(!0),[w,g]=S.useState(null),[y,b]=S.useState(!1),[_,N]=S.useState(null),[E,C]=S.useState(""),[D,P]=S.useState(!1),[F,L]=S.useState(null),W=S.useCallback(async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.role)){i(!1),e!=null&&e.id&&!(e!=null&&e.role)&&t({variant:"destructive",title:"Error",description:"User role not found for adjustments."});return}i(!0);try{const O=await mLe(e.id,e.role);n(O)}catch(O){console.error("Error fetching pending adjustment requests:",O),t({variant:"destructive",title:"Error",description:"Could not load pending adjustment requests."})}finally{i(!1)}},[t,e]),T=S.useCallback(async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.role)){m(!1),e!=null&&e.id&&!(e!=null&&e.role)&&t({variant:"destructive",title:"Error",description:"User role not found for urgent purchases."});return}m(!0);try{const J=(await h3({status:"pending_approval"})).filter(X=>X.requested_by_user_id!==e.id);f(J)}catch(O){console.error("Error fetching pending urgent purchases:",O),t({variant:"destructive",title:"Error",description:"Could not load pending urgent purchases."})}finally{m(!1)}},[t,e]);S.useEffect(()=>{e&&(W(),T())},[W,T,e]);const R=async(O,J)=>{if(o(O),L("adjustment"),N(J),b(!0),C(""),u(null),O.photo_url)try{const X=await JS(O.photo_url);u(X)}catch(X){console.error("Error fetching photo preview for adjustment:",X),t({variant:"destructive",title:"Error",description:"Could not load adjustment proof photo."})}},j=async(O,J)=>{g(O),L("urgent_purchase"),N(J),b(!0),C("")},Y=async()=>{if(!(!_||!(e!=null&&e.id))&&!(F==="adjustment"&&!s)&&!(F==="urgent_purchase"&&!w)){P(!0);try{if(F==="adjustment"){const O=s;_==="approve"?(await cae(O.id,e.id,E),t({title:"Success",description:`Adjustment Request ${O.id.substring(0,8)} approved.`})):(await uae(O.id,e.id,E),t({title:"Success",description:`Adjustment Request ${O.id.substring(0,8)} rejected.`})),W()}else if(F==="urgent_purchase"){const O=w;if(_==="approve")await jJe(O.id,e.id,E),t({title:"Success",description:`Urgent Purchase ${O.id.substring(0,8)} approved.`});else{if(!E.trim()&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")){t({variant:"destructive",title:"Validation Error",description:"Reviewer notes are required to reject."}),P(!1);return}await $Je(O.id,e.id,E),t({title:"Success",description:`Urgent Purchase ${O.id.substring(0,8)} rejected.`})}T()}b(!1),o(null),g(null),L(null)}catch(O){console.error(`Error ${_}ing request:`,O),t({variant:"destructive",title:"Error",description:O.message||`Failed to ${_} request.`})}finally{P(!1)}}},Z=["admin","owner","doctor"],re=()=>l(_r,{children:a?l("p",{children:"Loading adjustment requests..."}):r.length===0?x(or,{children:[l(xr,{children:l(br,{children:"No Pending Adjustment Requests"})}),l(hr,{children:l("p",{children:"There are currently no inventory adjustment requests awaiting approval."})})]}):x(or,{children:[x(xr,{children:[l(br,{children:"Pending Adjustment Requests"}),x(_c,{children:[r.length," request(s) awaiting review."]})]}),l(hr,{children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Item Name"}),l(Kt,{children:"Quantity"}),l(Kt,{children:"Reason"}),l(Kt,{children:"Requested By"}),l(Kt,{children:"Date"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:r.map(O=>{var J,X,ne;return x(Dn,{children:[l(Wt,{children:((J=O.inventory_items)==null?void 0:J.item_name)||"N/A"}),l(Wt,{children:O.quantity_to_decrease}),l(Wt,{children:O.reason}),x(Wt,{children:[((X=O.requester_profile)==null?void 0:X.first_name)||""," ",((ne=O.requester_profile)==null?void 0:ne.last_name)||""]}),l(Wt,{children:new Date(O.requested_at).toLocaleDateString()}),x(Wt,{className:"text-right space-x-2",children:[x(Fe,{variant:"outline",size:"sm",onClick:()=>R(O,"approve"),children:[l(cF,{className:"mr-1 h-4 w-4"})," Approve"]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&x(Fe,{variant:"outline",size:"sm",onClick:()=>R(O,"reject"),children:[l(lF,{className:"mr-1 h-4 w-4"})," Reject"]})]})]},O.id)})})]})})]})}),z=()=>l(_r,{children:h?l("p",{children:"Loading urgent purchase requests..."}):d.length===0?x(or,{children:[l(xr,{children:l(br,{children:"No Pending Urgent Purchases"})}),l(hr,{children:l("p",{children:"There are currently no urgent purchase requests awaiting approval."})})]}):x(or,{children:[x(xr,{children:[l(br,{children:"Pending Urgent Purchase Requests"}),x(_c,{children:[d.length," request(s) awaiting review."]})]}),l(hr,{children:x(qo,{children:[l(Wo,{children:x(Dn,{children:[l(Kt,{children:"Slip/Notes"}),l(Kt,{children:"Items"}),l(Kt,{children:"Requested By (ID)"})," ",l(Kt,{children:"Targeted Role"}),l(Kt,{children:"Date"}),l(Kt,{className:"text-right",children:"Actions"})]})}),l(zo,{children:d.map(O=>{var J;return x(Dn,{children:[x(Wt,{children:[O.slip_filename||((J=O.notes)==null?void 0:J.substring(0,30))||"N/A",O.notes&&O.notes.length>30?"...":""]}),x(Wt,{children:[O.items.length," item(s)"]}),x(Wt,{className:"font-mono text-xs",children:[O.requested_by_user_id.substring(0,8),"..."]}),l(Wt,{children:O.target_approval_role?O.target_approval_role.charAt(0).toUpperCase()+O.target_approval_role.slice(1):"N/A"}),l(Wt,{children:QT(O.requested_at)?Mt(new Date(O.requested_at),"PP"):"N/A"}),x(Wt,{className:"text-right space-x-2",children:[x(Fe,{variant:"outline",size:"sm",onClick:()=>j(O,"approve"),children:[l(cF,{className:"mr-1 h-4 w-4"})," Approve"]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&x(Fe,{variant:"outline",size:"sm",onClick:()=>j(O,"reject"),children:[l(lF,{className:"mr-1 h-4 w-4"})," Reject"]})]})]},O.id)})})]})})]})});return x(iZe,{allowedRoles:Z,children:[x("div",{className:"container mx-auto p-4 md:p-6",children:[l(Fa,{heading:"Approval Requests",text:"Review and process pending requests."}),x(Lm,{defaultValue:"adjustments",className:"w-full mt-4",children:[x(Rh,{className:"grid w-full grid-cols-2",children:[l(Oa,{value:"adjustments",children:"Inventory Adjustments"}),l(Oa,{value:"urgent_purchases",children:"Urgent Purchases"})]}),l(_a,{value:"adjustments",className:"mt-4",children:re()}),l(_a,{value:"urgent_purchases",className:"mt-4",children:z()})]})]}),y&&l(Vn,{open:y,onOpenChange:O=>{b(O),O||(o(null),g(null),L(null))},children:x(Bn,{className:"sm:max-w-lg",children:[x(Jn,{children:[x(Zn,{children:[_==="approve"?"Approve":"Reject"," ",F==="adjustment"?"Adjustment":"Urgent Purchase"," Request"]}),F==="adjustment"&&s&&x(us,{children:["Review details for request ID: ",s.id.substring(0,8),"... for item: ",((q=s.inventory_items)==null?void 0:q.item_name)||"N/A"]}),F==="urgent_purchase"&&w&&x(us,{children:["Review details for urgent purchase ID: ",w.id.substring(0,8),"...",w.slip_filename?` (Slip: ${w.slip_filename})`:""]})]}),x("div",{className:"py-4 space-y-3 max-h-[60vh] overflow-y-auto",children:[F==="adjustment"&&s&&x(_r,{children:[x("p",{children:[l("strong",{children:"Item:"})," ",(B=s.inventory_items)==null?void 0:B.item_name]}),x("p",{children:[l("strong",{children:"Quantity to Decrease:"})," ",s.quantity_to_decrease]}),x("p",{children:[l("strong",{children:"Reason:"})," ",s.reason]}),x("p",{children:[l("strong",{children:"Notes by Requester:"})," ",s.notes]}),x("p",{children:[l("strong",{children:"Requested By:"})," ",((G=s.requester_profile)==null?void 0:G.first_name)||""," ",((Q=s.requester_profile)==null?void 0:Q.last_name)||""]}),x("p",{children:[l("strong",{children:"Requested At:"})," ",new Date(s.requested_at).toLocaleString()]}),s.photo_url&&x("div",{children:[l("strong",{children:"Proof Photo:"}),c?l("img",{src:c,alt:"Adjustment Proof",className:"rounded-md border max-w-xs max-h-64 mt-1"}):l("p",{className:"text-sm text-muted-foreground",children:"Loading photo..."})]})]}),F==="urgent_purchase"&&w&&x(_r,{children:[x("p",{children:[l("strong",{children:"Requested By (ID):"})," ",w.requested_by_user_id]})," ",x("p",{children:[l("strong",{children:"Requested At:"})," ",QT(w.requested_at)?Mt(new Date(w.requested_at),"PPpp"):"N/A"]}),x("p",{children:[l("strong",{children:"Targeted For Role:"})," ",w.target_approval_role?w.target_approval_role.charAt(0).toUpperCase()+w.target_approval_role.slice(1):"N/A"]}),w.slip_filename&&x("p",{children:[l("strong",{children:"Slip Filename:"})," ",w.slip_filename]}),w.invoice_delivery_date&&x("p",{children:[l("strong",{children:"Invoice/Delivery Date:"})," ",QT(w.invoice_delivery_date)?Mt(new Date(w.invoice_delivery_date),"PP"):"N/A"]}),x("p",{children:[l("strong",{children:"Notes:"})," ",w.notes||"N/A"]}),l("p",{children:l("strong",{children:"Items:"})}),l("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:w.items.map(O=>x("li",{children:[O.matched_item_name," (Qty: ",O.quantity,")",O.batch_number&&` - Batch: ${O.batch_number}`,O.expiry_date&&` - Expires: ${new Date(O.expiry_date).toLocaleDateString()}`]},O.id||O.inventory_item_id))})]}),x("div",{children:[x("label",{htmlFor:"reviewerNotes",className:"block text-sm font-medium",children:["Reviewer Notes ",_==="approve"?"(Optional)":"(Required for Reject)",":"]}),l(on,{id:"reviewerNotes",value:E,onChange:O=>C(O.target.value),placeholder:"Add any notes for this decision...",className:"mt-1",rows:3})]})]}),x(fs,{children:[l(Fe,{variant:"outline",onClick:()=>b(!1),disabled:D,children:"Cancel"}),l(Fe,{onClick:Y,disabled:D||_==="reject"&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&!E.trim(),variant:_==="reject"&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")?"destructive":"default",children:D?"Submitting...":`Confirm ${_==="approve"?"Approve":"Reject"}`})]})]})})]})},oZe=()=>{const{requestId:e,approvalToken:t}=fy(),r=Ss(),{user:n}=ui(),{toast:a}=_n(),[i,s]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(!0),[f,h]=S.useState(!1),[m,w]=S.useState(""),[g,y]=S.useState(null),b=S.useCallback(async()=>{if(!e||!t){y("Request ID or approval token is missing."),d(!1);return}d(!0);try{const E=await yLe(e,t);E?(s(E),E.photo_url&&JS(E.photo_url).then(C=>c(C)).catch(C=>console.error("Failed to load photo for approval page",C))):y("Invalid or expired approval link, or request not found/pending.")}catch(E){console.error("Error fetching request for approval:",E),y(E.message||"Could not load request details.")}finally{d(!1)}},[e,t]);S.useEffect(()=>{b()},[b]);const _=async()=>{if(!(!(n!=null&&n.id)||!i)){if(n.id===i.requested_by_user_id){a({variant:"destructive",title:"Action Denied",description:"You cannot approve your own request."});return}h(!0);try{await cae(i.id,n.id,m),a({title:"Success",description:"Request approved and stock updated."}),r("/inventory/adjustment-requests")}catch(E){a({variant:"destructive",title:"Approval Failed",description:E.message})}finally{h(!1)}}},N=async()=>{if(!(!(n!=null&&n.id)||!i)){if(n.id===i.requested_by_user_id){a({variant:"destructive",title:"Action Denied",description:"You cannot reject your own request."});return}if(!m.trim()){a({variant:"destructive",title:"Validation Error",description:"Reviewer notes are required for rejection."});return}h(!0);try{await uae(i.id,n.id,m),a({title:"Success",description:"Request rejected."}),r("/inventory/adjustment-requests")}catch(E){a({variant:"destructive",title:"Rejection Failed",description:E.message})}finally{h(!1)}}};return u?l("div",{className:"container mx-auto p-6 flex justify-center items-center min-h-[calc(100vh-200px)]",children:l(Un,{className:"h-12 w-12 animate-spin text-primary"})}):g?x("div",{className:"container mx-auto p-6 text-center",children:[l(Ll,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),l("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied or Error"}),l("p",{className:"text-red-500 mt-2",children:g}),l(Fe,{onClick:()=>r("/"),className:"mt-6",children:"Go to Dashboard"})]}):i?x("div",{className:"container mx-auto p-4 md:p-6 max-w-2xl",children:[l(Fa,{heading:"Approve Inventory Adjustment",text:`Review and process adjustment request ID: ...${i.id.slice(-8)}`}),x(or,{className:"mt-6",children:[x(xr,{children:[x(br,{children:["Item: ",i.item_name||"N/A"]}),x(_c,{children:["Requested by: ",i.requester_name||i.requested_by_user_id," on ",new Date(i.requested_at).toLocaleDateString()]})]}),x(hr,{className:"space-y-4",children:[x("p",{children:[l("strong",{children:"Quantity to Decrease:"})," ",i.quantity_to_decrease]}),x("p",{children:[l("strong",{children:"Reason:"})," ",i.reason]}),x("p",{children:[l("strong",{children:"Requester Notes:"})," ",i.notes]}),i.photo_url&&x("div",{children:[l("strong",{children:"Photo Proof:"}),l("br",{}),o?l("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:l("img",{src:o,alt:"Adjustment Proof",className:"max-w-full md:max-w-md border rounded mt-1"})}):l("p",{children:"Loading photo..."})]}),x("div",{className:"space-y-1",children:[l("label",{htmlFor:"reviewerNotes",className:"text-sm font-medium",children:"Your Reviewer Notes:"}),l(on,{id:"reviewerNotes",value:m,onChange:E=>w(E.target.value),placeholder:"Add notes for approval or rejection (required for rejection)",rows:3,disabled:f||i.status!=="pending"})]})]}),i.status==="pending"&&x(eg,{className:"flex justify-end space-x-2",children:[x(Fe,{variant:"outline",onClick:N,disabled:f||(n==null?void 0:n.id)===i.requested_by_user_id,className:"text-red-600 border-red-600 hover:bg-red-50 disabled:opacity-50",title:(n==null?void 0:n.id)===i.requested_by_user_id?"Cannot reject your own request":"",children:[l(Kce,{className:"mr-2 h-4 w-4"})," Reject"]}),x(Fe,{onClick:_,disabled:f||(n==null?void 0:n.id)===i.requested_by_user_id,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",title:(n==null?void 0:n.id)===i.requested_by_user_id?"Cannot approve your own request":"",children:[l(dx,{className:"mr-2 h-4 w-4"})," Approve"]})]}),i.status!=="pending"&&l(eg,{children:x("p",{className:"text-sm text-muted-foreground",children:["This request has already been processed (Status: ",i.status,")."]})})]})]}):l("div",{className:"container mx-auto p-6 text-center",children:"Request not found."})};function lZe(){const[e]=HH(),t=e.get("q"),[r,n]=S.useState([]),[a,i]=S.useState(!1),[s,o]=S.useState(null);return S.useEffect(()=>{t?(console.log(`Fetching patient search results for: ${t}`),i(!0),o(null),Rt.patients.search(t).then(c=>{n(c||[]),i(!1)}).catch(c=>{console.error("Patient search failed:",c),o(c.message||"Failed to fetch patient search results."),n([]),i(!1)})):(n([]),o(null))},[t]),x("div",{className:"space-y-6",children:[l(Fa,{heading:`Search Results for "${t||""}"`,text:a?"Searching patients...":s?"Error fetching results":`Found ${r.length} patient results.`}),a?l("div",{className:"flex justify-center items-center py-10",children:l(Un,{className:"w-8 h-8 animate-spin text-primary"})}):s?l("div",{className:"text-center text-red-600 py-10",children:x("p",{children:["Error: ",s]})}):x("div",{className:"space-y-4",children:[r.length>0?r.map(c=>x("div",{className:"border p-4 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[x("h3",{className:"text-lg font-semibold",children:[c.first_name," ",c.last_name]}),c.email&&x("p",{className:"text-sm text-muted-foreground",children:["Email: ",c.email]}),c.phone&&x("p",{className:"text-sm text-muted-foreground",children:["Phone: ",c.phone]}),l(Yi,{to:`/patients/${c.id}`,className:"text-blue-600 hover:underline text-sm mt-1 inline-block",children:"View Details"})]},c.id)):!a&&t&&x("p",{className:"text-center text-muted-foreground",children:['No patient results found for "',t,'".']}),!t&&l("p",{className:"text-center text-muted-foreground",children:"Please enter a search term in the header."})]})]})}const cZe=({children:e})=>{const{user:t,loading:r}=ui();return r?x("div",{className:"p-4",children:[l($l,{className:"h-8 w-1/4 mb-4"}),l($l,{className:"h-4 w-full mb-2"}),l($l,{className:"h-4 w-3/4"})]}):!t||t.role!=="admin"&&t.role!=="owner"?(console.warn(`Access denied: User role '${t==null?void 0:t.role}' is not 'admin' or 'owner'.`),l(r6,{to:"/",replace:!0})):e?l(_r,{children:e}):l(VH,{})};var j7="ToastProvider",[$7,uZe,dZe]=jw("Toast"),[Jse,sQe]=es("Toast",[dZe]),[fZe,p3]=Jse(j7),Zse=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:s}=e,[o,c]=S.useState(null),[u,d]=S.useState(0),f=S.useRef(!1),h=S.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${j7}\`. Expected non-empty \`string\`.`),l($7.Provider,{scope:t,children:l(fZe,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:c,onToastAdd:S.useCallback(()=>d(m=>m+1),[]),onToastRemove:S.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:s})})};Zse.displayName=j7;var Qse="ToastViewport",hZe=["F8"],KO="toast.viewportPause",XO="toast.viewportResume",eoe=S.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=hZe,label:a="Notifications ({hotkey})",...i}=e,s=p3(Qse,r),o=uZe(r),c=S.useRef(null),u=S.useRef(null),d=S.useRef(null),f=S.useRef(null),h=Kr(t,f,s.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=s.toastCount>0;S.useEffect(()=>{const y=b=>{var N;n.length!==0&&n.every(E=>b[E]||b.code===E)&&((N=f.current)==null||N.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),S.useEffect(()=>{const y=c.current,b=f.current;if(w&&y&&b){const _=()=>{if(!s.isClosePausedRef.current){const D=new CustomEvent(KO);b.dispatchEvent(D),s.isClosePausedRef.current=!0}},N=()=>{if(s.isClosePausedRef.current){const D=new CustomEvent(XO);b.dispatchEvent(D),s.isClosePausedRef.current=!1}},E=D=>{!y.contains(D.relatedTarget)&&N()},C=()=>{y.contains(document.activeElement)||N()};return y.addEventListener("focusin",_),y.addEventListener("focusout",E),y.addEventListener("pointermove",_),y.addEventListener("pointerleave",C),window.addEventListener("blur",_),window.addEventListener("focus",N),()=>{y.removeEventListener("focusin",_),y.removeEventListener("focusout",E),y.removeEventListener("pointermove",_),y.removeEventListener("pointerleave",C),window.removeEventListener("blur",_),window.removeEventListener("focus",N)}}},[w,s.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:y})=>{const _=o().map(N=>{const E=N.ref.current,C=[E,...kZe(E)];return y==="forwards"?C:C.reverse()});return(y==="forwards"?_.reverse():_).flat()},[o]);return S.useEffect(()=>{const y=f.current;if(y){const b=_=>{var C,D,P;const N=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!N){const F=document.activeElement,L=_.shiftKey;if(_.target===y&&L){(C=u.current)==null||C.focus();return}const R=g({tabbingDirection:L?"backwards":"forwards"}),j=R.findIndex(Y=>Y===F);e6(R.slice(j+1))?_.preventDefault():L?(D=u.current)==null||D.focus():(P=d.current)==null||P.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[o,g]),x(Xue,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&l(JO,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});e6(y)}}),l($7.Slot,{scope:r,children:l(vr.ol,{tabIndex:-1,...i,ref:h})}),w&&l(JO,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});e6(y)}})]})});eoe.displayName=Qse;var toe="ToastFocusProxy",JO=S.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=p3(toe,r);return l(G4,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:s=>{var u;const o=s.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&n()}})});JO.displayName=toe;var xb="Toast",pZe="toast.swipeStart",mZe="toast.swipeMove",gZe="toast.swipeCancel",vZe="toast.swipeEnd",roe=S.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...s}=e,[o,c]=hl({prop:n,defaultProp:a??!0,onChange:i,caller:xb});return l(uo,{present:r||o,children:l(wZe,{open:o,...s,ref:t,onClose:()=>c(!1),onPause:Di(e.onPause),onResume:Di(e.onResume),onSwipeStart:Ht(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ht(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Ht(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ht(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});roe.displayName=xb;var[yZe,xZe]=Jse(xb,{onClose(){}}),wZe=S.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:s,onEscapeKeyDown:o,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...w}=e,g=p3(xb,r),[y,b]=S.useState(null),_=Kr(t,Y=>b(Y)),N=S.useRef(null),E=S.useRef(null),C=a||g.duration,D=S.useRef(0),P=S.useRef(C),F=S.useRef(0),{onToastAdd:L,onToastRemove:W}=g,T=Di(()=>{var Z;(y==null?void 0:y.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),s()}),R=S.useCallback(Y=>{!Y||Y===1/0||(window.clearTimeout(F.current),D.current=new Date().getTime(),F.current=window.setTimeout(T,Y))},[T]);S.useEffect(()=>{const Y=g.viewport;if(Y){const Z=()=>{R(P.current),u==null||u()},re=()=>{const z=new Date().getTime()-D.current;P.current=P.current-z,window.clearTimeout(F.current),c==null||c()};return Y.addEventListener(KO,re),Y.addEventListener(XO,Z),()=>{Y.removeEventListener(KO,re),Y.removeEventListener(XO,Z)}}},[g.viewport,C,c,u,R]),S.useEffect(()=>{i&&!g.isClosePausedRef.current&&R(C)},[i,C,g.isClosePausedRef,R]),S.useEffect(()=>(L(),()=>W()),[L,W]);const j=S.useMemo(()=>y?coe(y):null,[y]);return g.viewport?x(_r,{children:[j&&l(bZe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),l(yZe,{scope:r,onClose:T,children:uy.createPortal(l($7.ItemSlot,{scope:r,children:l(Kue,{asChild:!0,onEscapeKeyDown:Ht(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:l(vr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ht(e.onKeyDown,Y=>{Y.key==="Escape"&&(o==null||o(Y.nativeEvent),Y.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Ht(e.onPointerDown,Y=>{Y.button===0&&(N.current={x:Y.clientX,y:Y.clientY})}),onPointerMove:Ht(e.onPointerMove,Y=>{if(!N.current)return;const Z=Y.clientX-N.current.x,re=Y.clientY-N.current.y,z=!!E.current,q=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,G=q?B(0,Z):0,Q=q?0:B(0,re),O=Y.pointerType==="touch"?10:2,J={x:G,y:Q},X={originalEvent:Y,delta:J};z?(E.current=J,J_(mZe,f,X,{discrete:!1})):RH(J,g.swipeDirection,O)?(E.current=J,J_(pZe,d,X,{discrete:!1}),Y.target.setPointerCapture(Y.pointerId)):(Math.abs(Z)>O||Math.abs(re)>O)&&(N.current=null)}),onPointerUp:Ht(e.onPointerUp,Y=>{const Z=E.current,re=Y.target;if(re.hasPointerCapture(Y.pointerId)&&re.releasePointerCapture(Y.pointerId),E.current=null,N.current=null,Z){const z=Y.currentTarget,q={originalEvent:Y,delta:Z};RH(Z,g.swipeDirection,g.swipeThreshold)?J_(vZe,m,q,{discrete:!0}):J_(gZe,h,q,{discrete:!0}),z.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),bZe=e=>{const{__scopeToast:t,children:r,...n}=e,a=p3(xb,t),[i,s]=S.useState(!1),[o,c]=S.useState(!1);return NZe(()=>s(!0)),S.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:l(gy,{asChild:!0,children:l(G4,{...n,children:i&&x(_r,{children:[a.label," ",r]})})})},_Ze="ToastTitle",noe=S.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return l(vr.div,{...n,ref:t})});noe.displayName=_Ze;var SZe="ToastDescription",aoe=S.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return l(vr.div,{...n,ref:t})});aoe.displayName=SZe;var ioe="ToastAction",soe=S.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?l(loe,{altText:r,asChild:!0,children:l(B7,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ioe}\`. Expected non-empty \`string\`.`),null)});soe.displayName=ioe;var ooe="ToastClose",B7=S.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=xZe(ooe,r);return l(loe,{asChild:!0,children:l(vr.button,{type:"button",...n,ref:t,onClick:Ht(e.onClick,a.onClose)})})});B7.displayName=ooe;var loe=S.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return l(vr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function coe(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),AZe(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const s=n.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...coe(n))}}),t}function J_(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?lD(a,i):a.dispatchEvent(i)}var RH=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function NZe(e=()=>{}){const t=Di(e);ci(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function AZe(e){return e.nodeType===e.ELEMENT_NODE}function kZe(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function e6(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var EZe=Zse,uoe=eoe,doe=roe,foe=noe,hoe=aoe,poe=soe,moe=B7;const CZe=EZe,goe=S.forwardRef(({className:e,...t},r)=>l(uoe,{ref:r,className:Lt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));goe.displayName=uoe.displayName;const PZe=Lw("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",warning:"warning group border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-700/50 dark:bg-yellow-900/30 dark:text-yellow-300"}},defaultVariants:{variant:"default"}}),voe=S.forwardRef(({className:e,variant:t,...r},n)=>l(doe,{ref:n,className:Lt(PZe({variant:t}),e),...r}));voe.displayName=doe.displayName;const TZe=S.forwardRef(({className:e,...t},r)=>l(poe,{ref:r,className:Lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));TZe.displayName=poe.displayName;const yoe=S.forwardRef(({className:e,...t},r)=>l(moe,{ref:r,className:Lt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:l(Qu,{className:"h-4 w-4"})}));yoe.displayName=moe.displayName;const xoe=S.forwardRef(({className:e,...t},r)=>l(foe,{ref:r,className:Lt("text-sm font-semibold",e),...t}));xoe.displayName=foe.displayName;const woe=S.forwardRef(({className:e,...t},r)=>l(hoe,{ref:r,className:Lt("text-sm opacity-90",e),...t}));woe.displayName=hoe.displayName;function OZe(){const{toasts:e}=_n();return x(CZe,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return x(voe,{...i,children:[x("div",{className:"grid gap-1",children:[r&&l(xoe,{children:r}),n&&l(woe,{children:n})]}),a,l(yoe,{})]},t)}),l(goe,{})]})}const DZe="https://i.postimg.cc/cL6vs7qQ/login-1.png",IZe=()=>{const{signIn:e}=ui(),[t,r]=S.useState(""),[n,a]=S.useState(""),[i,s]=S.useState(!1),[o,c]=S.useState(null);return l("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-bl from-brand-dark via-brand-medium to-brand-light p-4",children:x("div",{className:"w-full max-w-4xl bg-white/95 rounded-2xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 border border-white/10 backdrop-blur-sm",children:[x("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[l("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-2 tracking-tight",children:"LOGIN"}),l("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Access your AI-powered dashboard."}),x("form",{onSubmit:async h=>{h.preventDefault(),c(null),s(!0);try{await e(t,n),"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission().then(m=>{m==="granted"&&console.log("Notification permission granted.")})}catch(m){console.error("Login failed:",m),c(m.message||"Failed to log in. Please check your credentials.")}finally{s(!1)}},className:"space-y-5",children:[x("div",{className:"relative group",children:[l(tr,{htmlFor:"email",className:"sr-only",children:"Email / Username"}),l(vi,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),l(ht,{id:"email",type:"email",placeholder:"Email or Username",value:t,onChange:h=>r(h.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-gray-50 text-sm shadow-inner transition-colors duration-200"})]}),x("div",{className:"relative group",children:[l(tr,{htmlFor:"password",className:"sr-only",children:"Password"}),l(nG,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),l(ht,{id:"password",type:"password",placeholder:"Password",value:n,onChange:h=>a(h.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-gray-50 text-sm shadow-inner transition-colors duration-200"})]}),o&&l("p",{className:"text-sm text-red-600 text-center",children:o}),l(Fe,{type:"submit",className:"w-full bg-gradient-to-r from-brand-medium to-brand-dark hover:from-brand-medium/90 hover:to-brand-dark/90 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out disabled:opacity-70",disabled:i,children:i?"Authenticating...":"Login Now"})]}),x("div",{className:"mt-8 text-center",children:[l("p",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4",children:"Or login with"}),x("div",{className:"flex justify-center gap-4",children:[x(Fe,{variant:"outline",onClick:()=>console.log("Google login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-gray-100 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[l(JH,{className:"h-4 w-4"})," Google"]}),x(Fe,{variant:"outline",onClick:()=>console.log("Facebook login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-gray-100 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[l(eG,{className:"h-4 w-4"})," Facebook"]})]})]}),x("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Need an account?"," ",l(Yi,{to:"/signup",className:"font-semibold text-brand-medium hover:text-brand-dark hover:underline",children:"Sign up Free"})]})]}),x("div",{className:"hidden md:flex items-center justify-center p-8 bg-gradient-to-br from-brand-light via-brand-medium to-brand-dark relative overflow-hidden rounded-r-2xl",children:[x("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-white/10 backdrop-blur-xl rounded-xl shadow-xl border border-white/20 p-4 flex items-center justify-center",children:[l("img",{src:DZe,alt:"AI Tech Feature",className:"max-w-full max-h-full object-contain rounded-lg opacity-95"}),l(KH,{className:"absolute top-4 right-4 h-8 w-8 text-white/60 opacity-70"})]}),l("div",{className:"absolute -bottom-1/4 -left-1/4 w-2/3 h-2/3 bg-brand-very-light/5 rounded-full blur-3xl opacity-50 animate-pulse"}),l("div",{className:"absolute -top-1/4 -right-1/3 w-1/2 h-1/2 bg-white/5 rounded-full blur-3xl opacity-40 animate-pulse animation-delay-2000"})]})]})})},RZe="https://i.postimg.cc/cL6vs7qQ/login-1.png",MZe=()=>{const{toast:e}=_n(),[t,r]=S.useState(""),[n,a]=S.useState(""),[i,s]=S.useState(""),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(null);return l("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-bl from-brand-dark via-brand-medium to-brand-light p-4",children:x("div",{className:"w-full max-w-4xl bg-white/90 rounded-2xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 border border-white/10 backdrop-blur-sm",children:[x("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[l("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-2 tracking-tight",children:"SIGN UP"}),l("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Create your account to unlock AI features."}),x("form",{onSubmit:async y=>{var b,_;if(y.preventDefault(),h(null),!o){h("You must agree to the Terms & Privacy policy.");return}d(!0);try{const{data:N,error:E}=await $e.auth.signUp({email:n,password:i,options:{data:{full_name:t}}});if(E)throw E;e({title:"Account Created!",description:((_=(b=N.user)==null?void 0:b.identities)==null?void 0:_.length)===0?"Please check your email to confirm your account.":"You can now log in.",variant:"default"}),r(""),a(""),s(""),c(!1)}catch(N){console.error("Sign up failed:",N),h(N.message||"Failed to create account. Please try again."),e({title:"Sign Up Error",description:N.message||"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}},className:"space-y-5",children:[x("div",{className:"relative group",children:[l(tr,{htmlFor:"name",className:"sr-only",children:"Full Name"}),l(vi,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),l(ht,{id:"name",type:"text",placeholder:"Full Name",value:t,onChange:y=>r(y.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),x("div",{className:"relative group",children:[l(tr,{htmlFor:"email",className:"sr-only",children:"Email"}),l(x4,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),l(ht,{id:"email",type:"email",placeholder:"Email Address",value:n,onChange:y=>a(y.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),x("div",{className:"relative group",children:[l(tr,{htmlFor:"password",className:"sr-only",children:"Password"}),l(nG,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),l(ht,{id:"password",type:"password",placeholder:"Password (min 8 characters)",value:i,onChange:y=>s(y.target.value),required:!0,minLength:8,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),x("div",{className:"flex items-center space-x-2 pt-1",children:[l(Fo,{id:"terms",checked:o,onCheckedChange:y=>c(y),className:"border-gray-300 data-[state=checked]:bg-brand-dark data-[state=checked]:border-brand-dark data-[state=checked]:text-white focus:ring-brand-light focus:ring-offset-white"}),x("label",{htmlFor:"terms",className:"text-xs font-medium text-gray-600 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I agree to the ",l("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-brand-medium hover:text-brand-dark hover:underline",children:"Terms"})," & ",l("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-brand-medium hover:text-brand-dark hover:underline",children:"Privacy Policy"})]})]}),f&&l("p",{className:"text-sm text-red-600 text-center pt-1",children:f}),l(Fe,{type:"submit",className:"w-full bg-gradient-to-r from-brand-medium to-brand-dark hover:shadow-lg hover:opacity-95 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition-all duration-300 ease-in-out disabled:opacity-70",disabled:u||!o,children:u?"Creating Account...":"Sign Up Now"})]}),x("div",{className:"mt-8 text-center",children:[l("p",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4",children:"Or sign up with"}),x("div",{className:"flex justify-center gap-4",children:[x(Fe,{variant:"outline",onClick:()=>console.log("Google login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-brand-very-light/20 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[l(JH,{className:"h-4 w-4"})," Google"]}),x(Fe,{variant:"outline",onClick:()=>console.log("Facebook login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-brand-very-light/20 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[l(eG,{className:"h-4 w-4"})," Facebook"]})]})]}),x("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Already have an account?"," ",l(Yi,{to:"/login",className:"font-semibold text-brand-medium hover:text-brand-dark hover:underline",children:"Log In"})]})]}),x("div",{className:"hidden md:flex items-center justify-center p-8 bg-gradient-to-br from-brand-light via-brand-medium to-brand-dark relative overflow-hidden rounded-r-2xl",children:[x("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-white/10 backdrop-blur-xl rounded-xl shadow-xl border border-white/20 p-4 flex items-center justify-center",children:[l("img",{src:RZe,alt:"AI Tech Feature",className:"max-w-full max-h-full object-contain rounded-lg opacity-95"}),l(KH,{className:"absolute top-4 right-4 h-8 w-8 text-white/60 opacity-70"})]}),l("div",{className:"absolute -bottom-1/4 -left-1/4 w-2/3 h-2/3 bg-brand-very-light/5 rounded-full blur-3xl opacity-50 animate-pulse"}),l("div",{className:"absolute -top-1/4 -right-1/3 w-1/2 h-1/2 bg-white/5 rounded-full blur-3xl opacity-40 animate-pulse animation-delay-2000"})]})]})})};function FZe(){const[e,t]=S.useState([]),[r,n]=S.useState(!0),a=S.useCallback(async()=>{try{n(!0);const[i,s,o,c]=await Promise.all([Rt.patients.getAll(),Rt.patients.getTreatmentPlans(null),Rt.patients.getMedicalRecords(null),Rt.appointments.getAll()]),u=w=>{if(!w)return"Unknown Patient";const g=i.find(y=>y.id===w);return g?`${g.first_name} ${g.last_name}`:"Unknown Patient"},d=c.filter(w=>w.status==="completed"&&w.start_time).map(w=>({id:w.id,type:"appointment",title:`Appointment ${w.type||""} Completed`,patientName:w.patients?`${w.patients.first_name} ${w.patients.last_name}`:"Unknown Patient",itemName:w.type||"Appointment",staffName:w.staff?`${w.staff.first_name} ${w.staff.last_name}`:void 0,timestamp:Wr(w.start_time),icon:vi,details:`Notes: ${w.notes||"N/A"}`})),f=s.flatMap(w=>{const g=u(w.patient_id);return(w.treatments||[]).filter(y=>y.status==="completed"&&y.updated_at).map(y=>({id:y.id,type:"treatment",title:"Treatment Completed",patientName:g,itemName:y.type||"Treatment",timestamp:Wr(y.updated_at),icon:U0,details:`Notes: ${y.notes||"N/A"}`}))}),h=o.filter(w=>w.created_at).map(w=>({id:w.id,type:"record",title:"Medical Record Added",patientName:u(w.patient_id),itemName:w.record_type||"Medical Record",timestamp:Wr(w.created_at),icon:Us,details:`Summary: ${w.summary||"N/A"}`})),m=[...d,...f,...h].sort((w,g)=>g.timestamp.getTime()-w.timestamp.getTime());t(m)}catch(i){console.error("Error fetching activity log data:",i)}finally{n(!1)}},[]);return S.useEffect(()=>{a()},[a]),x("div",{className:"container mx-auto py-8",children:[l(Fa,{heading:"Full Activity Log",text:"Browse all recent activities in the system."}),x(nd,{className:"h-[calc(100vh-200px)] mt-6",children:[" ",x("div",{className:"space-y-4 pr-4",children:[" ",r?l("p",{className:"text-center text-muted-foreground py-10",children:"Loading activities..."}):e.length>0?e.map(i=>{const s=i.icon||U0;return x(or,{className:"shadow-sm bg-card",children:[l(xr,{className:"pb-3 pt-4",children:x(br,{className:"text-base flex items-center font-medium",children:[l("div",{className:`flex h-8 w-8 items-center justify-center rounded-full mr-3 flex-shrink-0 ${i.type==="appointment"?"bg-emerald-100":i.type==="treatment"?"bg-blue-100":"bg-purple-100"}`,children:l(s,{className:`h-5 w-5 ${i.type==="appointment"?"text-emerald-600":i.type==="treatment"?"text-blue-600":"text-purple-600"}`})}),i.title]})}),x(hr,{className:"space-y-1 text-sm pl-14 pr-6 pb-4",children:[i.patientName&&x("p",{children:[l("span",{className:"font-medium text-muted-foreground",children:"Patient:"})," ",i.patientName]}),i.itemName&&x("p",{children:[l("span",{className:"font-medium text-muted-foreground",children:"Item:"})," ",i.itemName]}),i.staffName&&x("p",{children:[l("span",{className:"font-medium text-muted-foreground",children:"Staff:"})," ",i.staffName]}),i.details&&x("p",{className:"text-xs italic text-muted-foreground",children:[l("span",{className:"font-medium not-italic",children:"Details:"})," ",i.details]}),l("p",{className:"text-xs text-muted-foreground pt-1",children:Mt(i.timestamp,"EEEE, MMM d, yyyy 'at' h:mm a")})]})]},i.id)}):l("p",{className:"text-center text-muted-foreground py-10",children:"No activities found."})]})]})]})}function LZe(){const{user:e,loading:t}=ui();return t?l("div",{className:"flex items-center justify-center min-h-screen",children:l(Un,{className:"w-8 h-8 animate-spin text-primary"})}):x(rce,{children:[e?x($n,{path:"/",element:l(K1e,{}),children:[l($n,{index:!0,element:l(z8e,{})})," ",l($n,{path:"appointments",element:l(_Ie,{})}),l($n,{path:"patients",element:l(_z,{})}),l($n,{path:"patients/:id",element:l(_z,{})})," ",l($n,{path:"treatment-plans",element:l(YFe,{})}),l($n,{path:"profile",element:l(aLe,{})}),l($n,{path:"settings",element:l(eLe,{})}),l($n,{path:"payments-subscription",element:l(sLe,{})}),l($n,{path:"patient-medical-records",element:l(oLe,{})}),l($n,{path:"activity-log",element:l(FZe,{})})," ",x($n,{element:l(cZe,{}),children:[l($n,{path:"inventory",element:l(IYe,{})}),l($n,{path:"inventory/create-adjustment",element:l(nZe,{})})," ",l($n,{path:"inventory/stock-take",element:l(aZe,{})})," ",l($n,{path:"inventory/invoices",element:l(MYe,{})})," ",l($n,{path:"purchases",element:l(wXe,{})})," ",l($n,{path:"purchases/create",element:l(uJe,{})})," "," ",l($n,{path:"purchases/urgent",element:l(GJe,{})})," ",l($n,{path:"purchases/urgent/history",element:l(KJe,{})})," ",l($n,{path:"purchases/urgent/my-requests",element:l(XJe,{})})," ",l($n,{path:"purchases/urgent/:id",element:l(YJe,{})})," ",l($n,{path:"purchases/:id",element:l(FJe,{})})," ",l($n,{path:"assets",element:l(VKe,{})}),l($n,{path:"assets/:assetId",element:l(HKe,{})})," ",l($n,{path:"reports",element:l(aXe,{})}),l($n,{path:"reminders",element:l(lXe,{})})]}),l($n,{path:"inventory-approvals",element:l(sZe,{})}),l($n,{path:"search",element:l(lZe,{})}),l($n,{path:"*",element:l(r6,{to:"/",replace:!0})})]}):x(_r,{children:[l($n,{path:"/login",element:l(IZe,{})}),l($n,{path:"/signup",element:l(MZe,{})}),l($n,{path:"*",element:l(r6,{to:"/login",replace:!0})})]}),l($n,{path:"/approve-adjustment/:requestId/:approvalToken",element:l(oZe,{})})]})}function jZe(){return l(j0e,{children:x(uce,{children:[l(LZe,{})," ",l(OZe,{})]})})}lle.createRoot(document.getElementById("root")).render(l(S.StrictMode,{children:l(jZe,{})}));export{Ca as _,e_ as c,pa as g};
