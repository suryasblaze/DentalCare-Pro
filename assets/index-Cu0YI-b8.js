var Use=Object.defineProperty;var qse=(e,t,r)=>t in e?Use(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var hr=(e,t,r)=>qse(e,typeof t!="symbol"?t+"":t,r);function zse(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wse(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var BA={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R7;function Vse(){if(R7)return An;R7=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(J){return J===null||typeof J!="object"?null:(J=f&&J[f]||J["@@iterator"],typeof J=="function"?J:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,g={};function y(J,D,K){this.props=J,this.context=D,this.refs=g,this.updater=K||m}y.prototype.isReactComponent={},y.prototype.setState=function(J,D){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,D,"setState")},y.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function _(){}_.prototype=y.prototype;function b(J,D,K){this.props=J,this.context=D,this.refs=g,this.updater=K||m}var S=b.prototype=new _;S.constructor=b,x(S,y.prototype),S.isPureReactComponent=!0;var C=Array.isArray,E=Object.prototype.hasOwnProperty,O={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function M(J,D,K){var Q,ae={},se=null,fe=null;if(D!=null)for(Q in D.ref!==void 0&&(fe=D.ref),D.key!==void 0&&(se=""+D.key),D)E.call(D,Q)&&!T.hasOwnProperty(Q)&&(ae[Q]=D[Q]);var ie=arguments.length-2;if(ie===1)ae.children=K;else if(1<ie){for(var X=Array(ie),ue=0;ue<ie;ue++)X[ue]=arguments[ue+2];ae.children=X}if(J&&J.defaultProps)for(Q in ie=J.defaultProps,ie)ae[Q]===void 0&&(ae[Q]=ie[Q]);return{$$typeof:e,type:J,key:se,ref:fe,props:ae,_owner:O.current}}function L(J,D){return{$$typeof:e,type:J.type,key:D,ref:J.ref,props:J.props,_owner:J._owner}}function z(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function P(J){var D={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(K){return D[K]})}var R=/\/+/g;function j(J,D){return typeof J=="object"&&J!==null&&J.key!=null?P(""+J.key):D.toString(36)}function V(J,D,K,Q,ae){var se=typeof J;(se==="undefined"||se==="boolean")&&(J=null);var fe=!1;if(J===null)fe=!0;else switch(se){case"string":case"number":fe=!0;break;case"object":switch(J.$$typeof){case e:case t:fe=!0}}if(fe)return fe=J,ae=ae(fe),J=Q===""?"."+j(fe,0):Q,C(ae)?(K="",J!=null&&(K=J.replace(R,"$&/")+"/"),V(ae,D,K,"",function(ue){return ue})):ae!=null&&(z(ae)&&(ae=L(ae,K+(!ae.key||fe&&fe.key===ae.key?"":(""+ae.key).replace(R,"$&/")+"/")+J)),D.push(ae)),1;if(fe=0,Q=Q===""?".":Q+":",C(J))for(var ie=0;ie<J.length;ie++){se=J[ie];var X=Q+j(se,ie);fe+=V(se,D,K,X,ae)}else if(X=h(J),typeof X=="function")for(J=X.call(J),ie=0;!(se=J.next()).done;)se=se.value,X=Q+j(se,ie++),fe+=V(se,D,K,X,ae);else if(se==="object")throw D=String(J),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return fe}function Z(J,D,K){if(J==null)return J;var Q=[],ae=0;return V(J,Q,"","",function(se){return D.call(K,se,ae++)}),Q}function te(J){if(J._status===-1){var D=J._result;D=D(),D.then(function(K){(J._status===0||J._status===-1)&&(J._status=1,J._result=K)},function(K){(J._status===0||J._status===-1)&&(J._status=2,J._result=K)}),J._status===-1&&(J._status=0,J._result=D)}if(J._status===1)return J._result.default;throw J._result}var q={current:null},Y={transition:null},U={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function G(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:Z,forEach:function(J,D,K){Z(J,function(){D.apply(this,arguments)},K)},count:function(J){var D=0;return Z(J,function(){D++}),D},toArray:function(J){return Z(J,function(D){return D})||[]},only:function(J){if(!z(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},An.Component=y,An.Fragment=r,An.Profiler=a,An.PureComponent=b,An.StrictMode=n,An.Suspense=l,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,An.act=G,An.cloneElement=function(J,D,K){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var Q=x({},J.props),ae=J.key,se=J.ref,fe=J._owner;if(D!=null){if(D.ref!==void 0&&(se=D.ref,fe=O.current),D.key!==void 0&&(ae=""+D.key),J.type&&J.type.defaultProps)var ie=J.type.defaultProps;for(X in D)E.call(D,X)&&!T.hasOwnProperty(X)&&(Q[X]=D[X]===void 0&&ie!==void 0?ie[X]:D[X])}var X=arguments.length-2;if(X===1)Q.children=K;else if(1<X){ie=Array(X);for(var ue=0;ue<X;ue++)ie[ue]=arguments[ue+2];Q.children=ie}return{$$typeof:e,type:J.type,key:ae,ref:se,props:Q,_owner:fe}},An.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:i,_context:J},J.Consumer=J},An.createElement=M,An.createFactory=function(J){var D=M.bind(null,J);return D.type=J,D},An.createRef=function(){return{current:null}},An.forwardRef=function(J){return{$$typeof:s,render:J}},An.isValidElement=z,An.lazy=function(J){return{$$typeof:d,_payload:{_status:-1,_result:J},_init:te}},An.memo=function(J,D){return{$$typeof:u,type:J,compare:D===void 0?null:D}},An.startTransition=function(J){var D=Y.transition;Y.transition={};try{J()}finally{Y.transition=D}},An.unstable_act=G,An.useCallback=function(J,D){return q.current.useCallback(J,D)},An.useContext=function(J){return q.current.useContext(J)},An.useDebugValue=function(){},An.useDeferredValue=function(J){return q.current.useDeferredValue(J)},An.useEffect=function(J,D){return q.current.useEffect(J,D)},An.useId=function(){return q.current.useId()},An.useImperativeHandle=function(J,D,K){return q.current.useImperativeHandle(J,D,K)},An.useInsertionEffect=function(J,D){return q.current.useInsertionEffect(J,D)},An.useLayoutEffect=function(J,D){return q.current.useLayoutEffect(J,D)},An.useMemo=function(J,D){return q.current.useMemo(J,D)},An.useReducer=function(J,D,K){return q.current.useReducer(J,D,K)},An.useRef=function(J){return q.current.useRef(J)},An.useState=function(J){return q.current.useState(J)},An.useSyncExternalStore=function(J,D,K){return q.current.useSyncExternalStore(J,D,K)},An.useTransition=function(){return q.current.useTransition()},An.version="18.3.1",An}var M7;function r4(){return M7||(M7=1,BA.exports=Vse()),BA.exports}var A=r4();const tt=ia(A),ex=zse({__proto__:null,default:tt},[A]);var V_={},UA={exports:{}},Pl={},qA={exports:{}},zA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F7;function Hse(){return F7||(F7=1,function(e){function t(Y,U){var G=Y.length;Y.push(U);e:for(;0<G;){var J=G-1>>>1,D=Y[J];if(0<a(D,U))Y[J]=U,Y[G]=D,G=J;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var U=Y[0],G=Y.pop();if(G!==U){Y[0]=G;e:for(var J=0,D=Y.length,K=D>>>1;J<K;){var Q=2*(J+1)-1,ae=Y[Q],se=Q+1,fe=Y[se];if(0>a(ae,G))se<D&&0>a(fe,ae)?(Y[J]=fe,Y[se]=G,J=se):(Y[J]=ae,Y[Q]=G,J=Q);else if(se<D&&0>a(fe,G))Y[J]=fe,Y[se]=G,J=se;else break e}}return U}function a(Y,U){var G=Y.sortIndex-U.sortIndex;return G!==0?G:Y.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],d=1,f=null,h=3,m=!1,x=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=Y)n(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=r(u)}}function C(Y){if(g=!1,S(Y),!x)if(r(l)!==null)x=!0,te(E);else{var U=r(u);U!==null&&q(C,U.startTime-Y)}}function E(Y,U){x=!1,g&&(g=!1,_(M),M=-1),m=!0;var G=h;try{for(S(U),f=r(l);f!==null&&(!(f.expirationTime>U)||Y&&!P());){var J=f.callback;if(typeof J=="function"){f.callback=null,h=f.priorityLevel;var D=J(f.expirationTime<=U);U=e.unstable_now(),typeof D=="function"?f.callback=D:f===r(l)&&n(l),S(U)}else n(l);f=r(l)}if(f!==null)var K=!0;else{var Q=r(u);Q!==null&&q(C,Q.startTime-U),K=!1}return K}finally{f=null,h=G,m=!1}}var O=!1,T=null,M=-1,L=5,z=-1;function P(){return!(e.unstable_now()-z<L)}function R(){if(T!==null){var Y=e.unstable_now();z=Y;var U=!0;try{U=T(!0,Y)}finally{U?j():(O=!1,T=null)}}else O=!1}var j;if(typeof b=="function")j=function(){b(R)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Z=V.port2;V.port1.onmessage=R,j=function(){Z.postMessage(null)}}else j=function(){y(R,0)};function te(Y){T=Y,O||(O=!0,j())}function q(Y,U){M=y(function(){Y(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,te(E))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var G=h;h=U;try{return Y()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,U){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var G=h;h=Y;try{return U()}finally{h=G}},e.unstable_scheduleCallback=function(Y,U,G){var J=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?J+G:J):G=J,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=G+D,Y={id:d++,callback:U,priorityLevel:Y,startTime:G,expirationTime:D,sortIndex:-1},G>J?(Y.sortIndex=G,t(u,Y),r(l)===null&&Y===r(u)&&(g?(_(M),M=-1):g=!0,q(C,G-J))):(Y.sortIndex=D,t(l,Y),x||m||(x=!0,te(E))),Y},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Y){var U=h;return function(){var G=h;h=U;try{return Y.apply(this,arguments)}finally{h=G}}}}(zA)),zA}var L7;function Gse(){return L7||(L7=1,qA.exports=Hse()),qA.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j7;function Kse(){if(j7)return Pl;j7=1;var e=r4(),t=Gse();function r(p){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+p,N=1;N<arguments.length;N++)v+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(p,v){o(p,v),o(p+"Capture",v)}function o(p,v){for(a[p]=v,p=0;p<v.length;p++)n.add(v[p])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(p){return l.call(f,p)?!0:l.call(d,p)?!1:u.test(p)?f[p]=!0:(d[p]=!0,!1)}function m(p,v,N,I){if(N!==null&&N.type===0)return!1;switch(typeof v){case"function":case"symbol":return!0;case"boolean":return I?!1:N!==null?!N.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function x(p,v,N,I){if(v===null||typeof v>"u"||m(p,v,N,I))return!0;if(I)return!1;if(N!==null)switch(N.type){case 3:return!v;case 4:return v===!1;case 5:return isNaN(v);case 6:return isNaN(v)||1>v}return!1}function g(p,v,N,I,W,ee,pe){this.acceptsBooleans=v===2||v===3||v===4,this.attributeName=I,this.attributeNamespace=W,this.mustUseProperty=N,this.propertyName=p,this.type=v,this.sanitizeURL=ee,this.removeEmptyString=pe}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new g(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var v=p[0];y[v]=new g(v,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new g(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new g(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new g(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new g(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new g(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new g(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new g(p,5,!1,p.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function b(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var v=p.replace(_,b);y[v]=new g(v,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var v=p.replace(_,b);y[v]=new g(v,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var v=p.replace(_,b);y[v]=new g(v,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new g(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new g(p,1,!1,p.toLowerCase(),null,!0,!0)});function S(p,v,N,I){var W=y.hasOwnProperty(v)?y[v]:null;(W!==null?W.type!==0:I||!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(x(v,N,W,I)&&(N=null),I||W===null?h(v)&&(N===null?p.removeAttribute(v):p.setAttribute(v,""+N)):W.mustUseProperty?p[W.propertyName]=N===null?W.type===3?!1:"":N:(v=W.attributeName,I=W.attributeNamespace,N===null?p.removeAttribute(v):(W=W.type,N=W===3||W===4&&N===!0?"":""+N,I?p.setAttributeNS(I,v,N):p.setAttribute(v,N))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),O=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),P=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),Y=Symbol.iterator;function U(p){return p===null||typeof p!="object"?null:(p=Y&&p[Y]||p["@@iterator"],typeof p=="function"?p:null)}var G=Object.assign,J;function D(p){if(J===void 0)try{throw Error()}catch(N){var v=N.stack.trim().match(/\n( *(at )?)/);J=v&&v[1]||""}return`
`+J+p}var K=!1;function Q(p,v){if(!p||K)return"";K=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(gt){var I=gt}Reflect.construct(p,[],v)}else{try{v.call()}catch(gt){I=gt}p.call(v.prototype)}else{try{throw Error()}catch(gt){I=gt}p()}}catch(gt){if(gt&&I&&typeof gt.stack=="string"){for(var W=gt.stack.split(`
`),ee=I.stack.split(`
`),pe=W.length-1,Ce=ee.length-1;1<=pe&&0<=Ce&&W[pe]!==ee[Ce];)Ce--;for(;1<=pe&&0<=Ce;pe--,Ce--)if(W[pe]!==ee[Ce]){if(pe!==1||Ce!==1)do if(pe--,Ce--,0>Ce||W[pe]!==ee[Ce]){var Ue=`
`+W[pe].replace(" at new "," at ");return p.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",p.displayName)),Ue}while(1<=pe&&0<=Ce);break}}}finally{K=!1,Error.prepareStackTrace=N}return(p=p?p.displayName||p.name:"")?D(p):""}function ae(p){switch(p.tag){case 5:return D(p.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return p=Q(p.type,!1),p;case 11:return p=Q(p.type.render,!1),p;case 1:return p=Q(p.type,!0),p;default:return""}}function se(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case T:return"Fragment";case O:return"Portal";case L:return"Profiler";case M:return"StrictMode";case j:return"Suspense";case V:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case P:return(p.displayName||"Context")+".Consumer";case z:return(p._context.displayName||"Context")+".Provider";case R:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Z:return v=p.displayName||null,v!==null?v:se(p.type)||"Memo";case te:v=p._payload,p=p._init;try{return se(p(v))}catch{}}return null}function fe(p){var v=p.type;switch(p.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=v.render,p=p.displayName||p.name||"",v.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(v);case 8:return v===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function ie(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function X(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function ue(p){var v=X(p)?"checked":"value",N=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),I=""+p[v];if(!p.hasOwnProperty(v)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var W=N.get,ee=N.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return W.call(this)},set:function(pe){I=""+pe,ee.call(this,pe)}}),Object.defineProperty(p,v,{enumerable:N.enumerable}),{getValue:function(){return I},setValue:function(pe){I=""+pe},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function de(p){p._valueTracker||(p._valueTracker=ue(p))}function re(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var N=v.getValue(),I="";return p&&(I=X(p)?p.checked?"true":"false":p.value),p=I,p!==N?(v.setValue(p),!0):!1}function ke(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Re(p,v){var N=v.checked;return G({},v,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??p._wrapperState.initialChecked})}function Pe(p,v){var N=v.defaultValue==null?"":v.defaultValue,I=v.checked!=null?v.checked:v.defaultChecked;N=ie(v.value!=null?v.value:N),p._wrapperState={initialChecked:I,initialValue:N,controlled:v.type==="checkbox"||v.type==="radio"?v.checked!=null:v.value!=null}}function ge(p,v){v=v.checked,v!=null&&S(p,"checked",v,!1)}function Ye(p,v){ge(p,v);var N=ie(v.value),I=v.type;if(N!=null)I==="number"?(N===0&&p.value===""||p.value!=N)&&(p.value=""+N):p.value!==""+N&&(p.value=""+N);else if(I==="submit"||I==="reset"){p.removeAttribute("value");return}v.hasOwnProperty("value")?st(p,v.type,N):v.hasOwnProperty("defaultValue")&&st(p,v.type,ie(v.defaultValue)),v.checked==null&&v.defaultChecked!=null&&(p.defaultChecked=!!v.defaultChecked)}function Qe(p,v,N){if(v.hasOwnProperty("value")||v.hasOwnProperty("defaultValue")){var I=v.type;if(!(I!=="submit"&&I!=="reset"||v.value!==void 0&&v.value!==null))return;v=""+p._wrapperState.initialValue,N||v===p.value||(p.value=v),p.defaultValue=v}N=p.name,N!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,N!==""&&(p.name=N)}function st(p,v,N){(v!=="number"||ke(p.ownerDocument)!==p)&&(N==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+N&&(p.defaultValue=""+N))}var Pt=Array.isArray;function ft(p,v,N,I){if(p=p.options,v){v={};for(var W=0;W<N.length;W++)v["$"+N[W]]=!0;for(N=0;N<p.length;N++)W=v.hasOwnProperty("$"+p[N].value),p[N].selected!==W&&(p[N].selected=W),W&&I&&(p[N].defaultSelected=!0)}else{for(N=""+ie(N),v=null,W=0;W<p.length;W++){if(p[W].value===N){p[W].selected=!0,I&&(p[W].defaultSelected=!0);return}v!==null||p[W].disabled||(v=p[W])}v!==null&&(v.selected=!0)}}function _e(p,v){if(v.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},v,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Te(p,v){var N=v.value;if(N==null){if(N=v.children,v=v.defaultValue,N!=null){if(v!=null)throw Error(r(92));if(Pt(N)){if(1<N.length)throw Error(r(93));N=N[0]}v=N}v==null&&(v=""),N=v}p._wrapperState={initialValue:ie(N)}}function qe(p,v){var N=ie(v.value),I=ie(v.defaultValue);N!=null&&(N=""+N,N!==p.value&&(p.value=N),v.defaultValue==null&&p.defaultValue!==N&&(p.defaultValue=N)),I!=null&&(p.defaultValue=""+I)}function yt(p){var v=p.textContent;v===p._wrapperState.initialValue&&v!==""&&v!==null&&(p.value=v)}function vt(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(p,v){return p==null||p==="http://www.w3.org/1999/xhtml"?vt(v):p==="http://www.w3.org/2000/svg"&&v==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Ie,Ze=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(v,N,I,W){MSApp.execUnsafeLocalFunction(function(){return p(v,N,I,W)})}:p}(function(p,v){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=v;else{for(Ie=Ie||document.createElement("div"),Ie.innerHTML="<svg>"+v.valueOf().toString()+"</svg>",v=Ie.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;v.firstChild;)p.appendChild(v.firstChild)}});function _t(p,v){if(v){var N=p.firstChild;if(N&&N===p.lastChild&&N.nodeType===3){N.nodeValue=v;return}}p.textContent=v}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pr=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(p){Pr.forEach(function(v){v=v+p.charAt(0).toUpperCase()+p.substring(1),pt[v]=pt[p]})});function Bt(p,v,N){return v==null||typeof v=="boolean"||v===""?"":N||typeof v!="number"||v===0||pt.hasOwnProperty(p)&&pt[p]?(""+v).trim():v+"px"}function dr(p,v){p=p.style;for(var N in v)if(v.hasOwnProperty(N)){var I=N.indexOf("--")===0,W=Bt(N,v[N],I);N==="float"&&(N="cssFloat"),I?p.setProperty(N,W):p[N]=W}}var Ir=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tr(p,v){if(v){if(Ir[p]&&(v.children!=null||v.dangerouslySetInnerHTML!=null))throw Error(r(137,p));if(v.dangerouslySetInnerHTML!=null){if(v.children!=null)throw Error(r(60));if(typeof v.dangerouslySetInnerHTML!="object"||!("__html"in v.dangerouslySetInnerHTML))throw Error(r(61))}if(v.style!=null&&typeof v.style!="object")throw Error(r(62))}}function ha(p,v){if(p.indexOf("-")===-1)return typeof v.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=null;function Na(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var En=null,pa=null,si=null;function Cn(p){if(p=fp(p)){if(typeof En!="function")throw Error(r(280));var v=p.stateNode;v&&(v=o0(v),En(p.stateNode,p.type,v))}}function kr(p){pa?si?si.push(p):si=[p]:pa=p}function pn(){if(pa){var p=pa,v=si;if(si=pa=null,Cn(p),v)for(p=0;p<v.length;p++)Cn(v[p])}}function fo(p,v){return p(v)}function Jn(){}var li=!1;function lt(p,v,N){if(li)return p(v,N);li=!0;try{return fo(p,v,N)}finally{li=!1,(pa!==null||si!==null)&&(Jn(),pn())}}function xt(p,v){var N=p.stateNode;if(N===null)return null;var I=o0(N);if(I===null)return null;N=I[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(p=p.type,I=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!I;break e;default:p=!1}if(p)return null;if(N&&typeof N!="function")throw Error(r(231,v,typeof N));return N}var Fr=!1;if(s)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Fr=!1}function bt(p,v,N,I,W,ee,pe,Ce,Ue){var gt=Array.prototype.slice.call(arguments,3);try{v.apply(N,gt)}catch(Lt){this.onError(Lt)}}var mt=!1,Jt=null,le=!1,xe=null,ye={onError:function(p){mt=!0,Jt=p}};function be(p,v,N,I,W,ee,pe,Ce,Ue){mt=!1,Jt=null,bt.apply(ye,arguments)}function Ae(p,v,N,I,W,ee,pe,Ce,Ue){if(be.apply(this,arguments),mt){if(mt){var gt=Jt;mt=!1,Jt=null}else throw Error(r(198));le||(le=!0,xe=gt)}}function Se(p){var v=p,N=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(N=v.return),p=v.return;while(p)}return v.tag===3?N:null}function Ve(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function ut(p){if(Se(p)!==p)throw Error(r(188))}function et(p){var v=p.alternate;if(!v){if(v=Se(p),v===null)throw Error(r(188));return v!==p?null:p}for(var N=p,I=v;;){var W=N.return;if(W===null)break;var ee=W.alternate;if(ee===null){if(I=W.return,I!==null){N=I;continue}break}if(W.child===ee.child){for(ee=W.child;ee;){if(ee===N)return ut(W),p;if(ee===I)return ut(W),v;ee=ee.sibling}throw Error(r(188))}if(N.return!==I.return)N=W,I=ee;else{for(var pe=!1,Ce=W.child;Ce;){if(Ce===N){pe=!0,N=W,I=ee;break}if(Ce===I){pe=!0,I=W,N=ee;break}Ce=Ce.sibling}if(!pe){for(Ce=ee.child;Ce;){if(Ce===N){pe=!0,N=ee,I=W;break}if(Ce===I){pe=!0,I=ee,N=W;break}Ce=Ce.sibling}if(!pe)throw Error(r(189))}}if(N.alternate!==I)throw Error(r(190))}if(N.tag!==3)throw Error(r(188));return N.stateNode.current===N?p:v}function it(p){return p=et(p),p!==null?Je(p):null}function Je(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var v=Je(p);if(v!==null)return v;p=p.sibling}return null}var Dt=t.unstable_scheduleCallback,Yt=t.unstable_cancelCallback,or=t.unstable_shouldYield,qt=t.unstable_requestPaint,jt=t.unstable_now,Zr=t.unstable_getCurrentPriorityLevel,Fn=t.unstable_ImmediatePriority,Qn=t.unstable_UserBlockingPriority,Ba=t.unstable_NormalPriority,Wl=t.unstable_LowPriority,Sc=t.unstable_IdlePriority,Vs=null,xi=null;function Ac(p){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(Vs,p,void 0,(p.current.flags&128)===128)}catch{}}var Ua=Math.clz32?Math.clz32:Bg,ci=Math.log,$g=Math.LN2;function Bg(p){return p>>>=0,p===0?32:31-(ci(p)/$g|0)|0}var wf=64,md=4194304;function _f(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function us(p,v){var N=p.pendingLanes;if(N===0)return 0;var I=0,W=p.suspendedLanes,ee=p.pingedLanes,pe=N&268435455;if(pe!==0){var Ce=pe&~W;Ce!==0?I=_f(Ce):(ee&=pe,ee!==0&&(I=_f(ee)))}else pe=N&~W,pe!==0?I=_f(pe):ee!==0&&(I=_f(ee));if(I===0)return 0;if(v!==0&&v!==I&&(v&W)===0&&(W=I&-I,ee=v&-v,W>=ee||W===16&&(ee&4194240)!==0))return v;if((I&4)!==0&&(I|=N&16),v=p.entangledLanes,v!==0)for(p=p.entanglements,v&=I;0<v;)N=31-Ua(v),W=1<<N,I|=p[N],v&=~W;return I}function $h(p,v){switch(p){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ds(p,v){for(var N=p.suspendedLanes,I=p.pingedLanes,W=p.expirationTimes,ee=p.pendingLanes;0<ee;){var pe=31-Ua(ee),Ce=1<<pe,Ue=W[pe];Ue===-1?((Ce&N)===0||(Ce&I)!==0)&&(W[pe]=$h(Ce,v)):Ue<=v&&(p.expiredLanes|=Ce),ee&=~Ce}}function bf(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Um(){var p=wf;return wf<<=1,(wf&4194240)===0&&(wf=64),p}function qm(p){for(var v=[],N=0;31>N;N++)v.push(p);return v}function gd(p,v,N){p.pendingLanes|=v,v!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,v=31-Ua(v),p[v]=N}function Ey(p,v){var N=p.pendingLanes&~v;p.pendingLanes=v,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=v,p.mutableReadLanes&=v,p.entangledLanes&=v,v=p.entanglements;var I=p.eventTimes;for(p=p.expirationTimes;0<N;){var W=31-Ua(N),ee=1<<W;v[W]=0,I[W]=-1,p[W]=-1,N&=~ee}}function Bh(p,v){var N=p.entangledLanes|=v;for(p=p.entanglements;N;){var I=31-Ua(N),W=1<<I;W&v|p[I]&v&&(p[I]|=v),N&=~W}}var Un=0;function Uh(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var Ug,zm,qg,Nc,Sf,vd=!1,Af=[],qa=null,kc=null,Vl=null,qr=new Map,Nf=new Map,Ec=[],Cc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wm(p,v){switch(p){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":qr.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(v.pointerId)}}function yd(p,v,N,I,W,ee){return p===null||p.nativeEvent!==ee?(p={blockedOn:v,domEventName:N,eventSystemFlags:I,nativeEvent:ee,targetContainers:[W]},v!==null&&(v=fp(v),v!==null&&zm(v)),p):(p.eventSystemFlags|=I,v=p.targetContainers,W!==null&&v.indexOf(W)===-1&&v.push(W),p)}function qh(p,v,N,I,W){switch(v){case"focusin":return qa=yd(qa,p,v,N,I,W),!0;case"dragenter":return kc=yd(kc,p,v,N,I,W),!0;case"mouseover":return Vl=yd(Vl,p,v,N,I,W),!0;case"pointerover":var ee=W.pointerId;return qr.set(ee,yd(qr.get(ee)||null,p,v,N,I,W)),!0;case"gotpointercapture":return ee=W.pointerId,Nf.set(ee,yd(Nf.get(ee)||null,p,v,N,I,W)),!0}return!1}function zh(p){var v=Pd(p.target);if(v!==null){var N=Se(v);if(N!==null){if(v=N.tag,v===13){if(v=Ve(N),v!==null){p.blockedOn=v,Sf(p.priority,function(){qg(N)});return}}else if(v===3&&N.stateNode.current.memoizedState.isDehydrated){p.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Wh(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var N=Hh(p.domEventName,p.eventSystemFlags,v[0],p.nativeEvent);if(N===null){N=p.nativeEvent;var I=new N.constructor(N.type,N);Xr=I,N.target.dispatchEvent(I),Xr=null}else return v=fp(N),v!==null&&zm(v),p.blockedOn=N,!1;v.shift()}return!0}function zg(p,v,N){Wh(p)&&N.delete(v)}function Cy(){vd=!1,qa!==null&&Wh(qa)&&(qa=null),kc!==null&&Wh(kc)&&(kc=null),Vl!==null&&Wh(Vl)&&(Vl=null),qr.forEach(zg),Nf.forEach(zg)}function cu(p,v){p.blockedOn===v&&(p.blockedOn=null,vd||(vd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Cy)))}function Hl(p){function v(W){return cu(W,p)}if(0<Af.length){cu(Af[0],p);for(var N=1;N<Af.length;N++){var I=Af[N];I.blockedOn===p&&(I.blockedOn=null)}}for(qa!==null&&cu(qa,p),kc!==null&&cu(kc,p),Vl!==null&&cu(Vl,p),qr.forEach(v),Nf.forEach(v),N=0;N<Ec.length;N++)I=Ec[N],I.blockedOn===p&&(I.blockedOn=null);for(;0<Ec.length&&(N=Ec[0],N.blockedOn===null);)zh(N),N.blockedOn===null&&Ec.shift()}var Hs=C.ReactCurrentBatchConfig,Vh=!0;function kf(p,v,N,I){var W=Un,ee=Hs.transition;Hs.transition=null;try{Un=1,xd(p,v,N,I)}finally{Un=W,Hs.transition=ee}}function Vm(p,v,N,I){var W=Un,ee=Hs.transition;Hs.transition=null;try{Un=4,xd(p,v,N,I)}finally{Un=W,Hs.transition=ee}}function xd(p,v,N,I){if(Vh){var W=Hh(p,v,N,I);if(W===null)n0(p,v,I,Ef,N),Wm(p,I);else if(qh(W,p,v,N,I))I.stopPropagation();else if(Wm(p,I),v&4&&-1<Cc.indexOf(p)){for(;W!==null;){var ee=fp(W);if(ee!==null&&Ug(ee),ee=Hh(p,v,N,I),ee===null&&n0(p,v,I,Ef,N),ee===W)break;W=ee}W!==null&&I.stopPropagation()}else n0(p,v,I,null,N)}}var Ef=null;function Hh(p,v,N,I){if(Ef=null,p=Na(I),p=Pd(p),p!==null)if(v=Se(p),v===null)p=null;else if(N=v.tag,N===13){if(p=Ve(v),p!==null)return p;p=null}else if(N===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null);return Ef=p,null}function Hm(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zr()){case Fn:return 1;case Qn:return 4;case Ba:case Wl:return 16;case Sc:return 536870912;default:return 16}default:return 16}}var Gl=null,vl=null,yl=null;function Wg(){if(yl)return yl;var p,v=vl,N=v.length,I,W="value"in Gl?Gl.value:Gl.textContent,ee=W.length;for(p=0;p<N&&v[p]===W[p];p++);var pe=N-p;for(I=1;I<=pe&&v[N-I]===W[ee-I];I++);return yl=W.slice(p,1<I?1-I:void 0)}function Kl(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function fs(){return!0}function Gh(){return!1}function Ii(p){function v(N,I,W,ee,pe){this._reactName=N,this._targetInst=W,this.type=I,this.nativeEvent=ee,this.target=pe,this.currentTarget=null;for(var Ce in p)p.hasOwnProperty(Ce)&&(N=p[Ce],this[Ce]=N?N(ee):ee[Ce]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?fs:Gh,this.isPropagationStopped=Gh,this}return G(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),v}var wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=Ii(wd),Cf=G({},wd,{view:0,detail:0}),Gm=Ii(Cf),Pf,Kh,Pc,bd=G({},Cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Pc&&(Pc&&p.type==="mousemove"?(Pf=p.screenX-Pc.screenX,Kh=p.screenY-Pc.screenY):Kh=Pf=0,Pc=p),Pf)},movementY:function(p){return"movementY"in p?p.movementY:Kh}}),Yh=Ii(bd),Vg=G({},bd,{dataTransfer:0}),Py=Ii(Vg),Xh=G({},Cf,{relatedTarget:0}),uu=Ii(Xh),Km=G({},wd,{animationName:0,elapsedTime:0,pseudoElement:0}),Sd=Ii(Km),Ym=G({},wd,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),B=Ii(Ym),ce=G({},wd,{data:0}),Ee=Ii(ce),$e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mt(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=At[p])?!!v[p]:!1}function lr(){return Mt}var Dr=G({},Cf,{key:function(p){if(p.key){var v=$e[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=Kl(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?rt[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(p){return p.type==="keypress"?Kl(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Kl(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),un=Ii(Dr),cn=G({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pn=Ii(cn),za=G({},Cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),ti=Ii(za),wi=G({},wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ao=Ii(wi),ro=G({},bd,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Yl=Ii(ro),Gs=[9,13,27,32],xl=s&&"CompositionEvent"in window,Ad=null;s&&"documentMode"in document&&(Ad=document.documentMode);var Xm=s&&"TextEvent"in window&&!Ad,Zh=s&&(!xl||Ad&&8<Ad&&11>=Ad),Tf=" ",Jh=!1;function Qh(p,v){switch(p){case"keyup":return Gs.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Of(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var ri=!1;function ep(p,v){switch(p){case"compositionend":return Of(v);case"keypress":return v.which!==32?null:(Jh=!0,Tf);case"textInput":return p=v.data,p===Tf&&Jh?null:p;default:return null}}function tp(p,v){if(ri)return p==="compositionend"||!xl&&Qh(p,v)?(p=Wg(),yl=vl=Gl=null,ri=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Zh&&v.locale!=="ko"?null:v.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!rp[p.type]:v==="textarea"}function zo(p,v,N,I){kr(I),v=Yg(v,"onChange"),0<v.length&&(N=new _d("onChange","change",null,N,I),p.push({event:N,listeners:v}))}var Df=null,du=null;function Hg(p){t0(p,0)}function Wo(p){var v=Uf(p);if(re(v))return p}function ap(p,v){if(p==="change")return v}var Zm=!1;if(s){var ip;if(s){var Tc="oninput"in document;if(!Tc){var Nd=document.createElement("div");Nd.setAttribute("oninput","return;"),Tc=typeof Nd.oninput=="function"}ip=Tc}else ip=!1;Zm=ip&&(!document.documentMode||9<document.documentMode)}function Vo(){Df&&(Df.detachEvent("onpropertychange",No),du=Df=null)}function No(p){if(p.propertyName==="value"&&Wo(du)){var v=[];zo(v,du,p,Na(p)),lt(Hg,v)}}function kd(p,v,N){p==="focusin"?(Vo(),Df=v,du=N,Df.attachEvent("onpropertychange",No)):p==="focusout"&&Vo()}function fu(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Wo(du)}function hu(p,v){if(p==="click")return Wo(v)}function op(p,v){if(p==="input"||p==="change")return Wo(v)}function pu(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var qn=typeof Object.is=="function"?Object.is:pu;function mu(p,v){if(qn(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var N=Object.keys(p),I=Object.keys(v);if(N.length!==I.length)return!1;for(I=0;I<N.length;I++){var W=N[I];if(!l.call(v,W)||!qn(p[W],v[W]))return!1}return!0}function ko(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Ks(p,v){var N=ko(p);p=0;for(var I;N;){if(N.nodeType===3){if(I=p+N.textContent.length,p<=v&&I>=v)return{node:N,offset:v-p};p=I}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=ko(N)}}function If(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?If(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function Jm(){for(var p=window,v=ke();v instanceof p.HTMLIFrameElement;){try{var N=typeof v.contentWindow.location.href=="string"}catch{N=!1}if(N)p=v.contentWindow;else break;v=ke(p.document)}return v}function Rf(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}function Mf(p){var v=Jm(),N=p.focusedElem,I=p.selectionRange;if(v!==N&&N&&N.ownerDocument&&If(N.ownerDocument.documentElement,N)){if(I!==null&&Rf(N)){if(v=I.start,p=I.end,p===void 0&&(p=v),"selectionStart"in N)N.selectionStart=v,N.selectionEnd=Math.min(p,N.value.length);else if(p=(v=N.ownerDocument||document)&&v.defaultView||window,p.getSelection){p=p.getSelection();var W=N.textContent.length,ee=Math.min(I.start,W);I=I.end===void 0?ee:Math.min(I.end,W),!p.extend&&ee>I&&(W=I,I=ee,ee=W),W=Ks(N,ee);var pe=Ks(N,I);W&&pe&&(p.rangeCount!==1||p.anchorNode!==W.node||p.anchorOffset!==W.offset||p.focusNode!==pe.node||p.focusOffset!==pe.offset)&&(v=v.createRange(),v.setStart(W.node,W.offset),p.removeAllRanges(),ee>I?(p.addRange(v),p.extend(pe.node,pe.offset)):(v.setEnd(pe.node,pe.offset),p.addRange(v)))}}for(v=[],p=N;p=p.parentNode;)p.nodeType===1&&v.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<v.length;N++)p=v[N],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Ff=s&&"documentMode"in document&&11>=document.documentMode,Ys=null,gu=null,Oc=null,vu=!1;function yu(p,v,N){var I=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;vu||Ys==null||Ys!==ke(I)||(I=Ys,"selectionStart"in I&&Rf(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Oc&&mu(Oc,I)||(Oc=I,I=Yg(gu,"onSelect"),0<I.length&&(v=new _d("onSelect","select",null,v,N),p.push({event:v,listeners:I}),v.target=Ys)))}function Ed(p,v){var N={};return N[p.toLowerCase()]=v.toLowerCase(),N["Webkit"+p]="webkit"+v,N["Moz"+p]="moz"+v,N}var ho={animationend:Ed("Animation","AnimationEnd"),animationiteration:Ed("Animation","AnimationIteration"),animationstart:Ed("Animation","AnimationStart"),transitionend:Ed("Transition","TransitionEnd")},hs={},ga={};s&&(ga=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function ea(p){if(hs[p])return hs[p];if(!ho[p])return p;var v=ho[p],N;for(N in v)if(v.hasOwnProperty(N)&&N in ga)return hs[p]=v[N];return p}var ni=ea("animationend"),_i=ea("animationiteration"),Dc=ea("animationstart"),sp=ea("transitionend"),Lf=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(p,v){Lf.set(p,v),i(v,[p])}for(var lp=0;lp<Qm.length;lp++){var Ho=Qm[lp],wl=Ho.toLowerCase(),Gg=Ho[0].toUpperCase()+Ho.slice(1);Ic(wl,"on"+Gg)}Ic(ni,"onAnimationEnd"),Ic(_i,"onAnimationIteration"),Ic(Dc,"onAnimationStart"),Ic("dblclick","onDoubleClick"),Ic("focusin","onFocus"),Ic("focusout","onBlur"),Ic(sp,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cd));function e0(p,v,N){var I=p.type||"unknown-event";p.currentTarget=N,Ae(I,v,void 0,p),p.currentTarget=null}function t0(p,v){v=(v&4)!==0;for(var N=0;N<p.length;N++){var I=p[N],W=I.event;I=I.listeners;e:{var ee=void 0;if(v)for(var pe=I.length-1;0<=pe;pe--){var Ce=I[pe],Ue=Ce.instance,gt=Ce.currentTarget;if(Ce=Ce.listener,Ue!==ee&&W.isPropagationStopped())break e;e0(W,Ce,gt),ee=Ue}else for(pe=0;pe<I.length;pe++){if(Ce=I[pe],Ue=Ce.instance,gt=Ce.currentTarget,Ce=Ce.listener,Ue!==ee&&W.isPropagationStopped())break e;e0(W,Ce,gt),ee=Ue}}}if(le)throw p=xe,le=!1,xe=null,p}function va(p,v){var N=v[ms];N===void 0&&(N=v[ms]=new Set);var I=p+"__bubble";N.has(I)||(r0(v,p,2,!1),N.add(I))}function Kg(p,v,N){var I=0;v&&(I|=4),r0(N,p,I,v)}var cp="_reactListening"+Math.random().toString(36).slice(2);function jf(p){if(!p[cp]){p[cp]=!0,n.forEach(function(N){N!=="selectionchange"&&(u_.has(N)||Kg(N,!1,p),Kg(N,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[cp]||(v[cp]=!0,Kg("selectionchange",!1,v))}}function r0(p,v,N,I){switch(Hm(v)){case 1:var W=kf;break;case 4:W=Vm;break;default:W=xd}N=W.bind(null,v,N,p),W=void 0,!Fr||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(W=!0),I?W!==void 0?p.addEventListener(v,N,{capture:!0,passive:W}):p.addEventListener(v,N,!0):W!==void 0?p.addEventListener(v,N,{passive:W}):p.addEventListener(v,N,!1)}function n0(p,v,N,I,W){var ee=I;if((v&1)===0&&(v&2)===0&&I!==null)e:for(;;){if(I===null)return;var pe=I.tag;if(pe===3||pe===4){var Ce=I.stateNode.containerInfo;if(Ce===W||Ce.nodeType===8&&Ce.parentNode===W)break;if(pe===4)for(pe=I.return;pe!==null;){var Ue=pe.tag;if((Ue===3||Ue===4)&&(Ue=pe.stateNode.containerInfo,Ue===W||Ue.nodeType===8&&Ue.parentNode===W))return;pe=pe.return}for(;Ce!==null;){if(pe=Pd(Ce),pe===null)return;if(Ue=pe.tag,Ue===5||Ue===6){I=ee=pe;continue e}Ce=Ce.parentNode}}I=I.return}lt(function(){var gt=ee,Lt=Na(N),zt=[];e:{var Ft=Lf.get(p);if(Ft!==void 0){var gr=_d,Sr=p;switch(p){case"keypress":if(Kl(N)===0)break e;case"keydown":case"keyup":gr=un;break;case"focusin":Sr="focus",gr=uu;break;case"focusout":Sr="blur",gr=uu;break;case"beforeblur":case"afterblur":gr=uu;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gr=Yh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gr=Py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gr=ti;break;case ni:case _i:case Dc:gr=Sd;break;case sp:gr=Ao;break;case"scroll":gr=Gm;break;case"wheel":gr=Yl;break;case"copy":case"cut":case"paste":gr=B;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gr=Pn}var Nr=(v&4)!==0,Li=!Nr&&p==="scroll",ot=Nr?Ft!==null?Ft+"Capture":null:Ft;Nr=[];for(var Ge=gt,dt;Ge!==null;){dt=Ge;var Zt=dt.stateNode;if(dt.tag===5&&Zt!==null&&(dt=Zt,ot!==null&&(Zt=xt(Ge,ot),Zt!=null&&Nr.push(a0(Ge,Zt,dt)))),Li)break;Ge=Ge.return}0<Nr.length&&(Ft=new gr(Ft,Sr,null,N,Lt),zt.push({event:Ft,listeners:Nr}))}}if((v&7)===0){e:{if(Ft=p==="mouseover"||p==="pointerover",gr=p==="mouseout"||p==="pointerout",Ft&&N!==Xr&&(Sr=N.relatedTarget||N.fromElement)&&(Pd(Sr)||Sr[Eo]))break e;if((gr||Ft)&&(Ft=Lt.window===Lt?Lt:(Ft=Lt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,gr?(Sr=N.relatedTarget||N.toElement,gr=gt,Sr=Sr?Pd(Sr):null,Sr!==null&&(Li=Se(Sr),Sr!==Li||Sr.tag!==5&&Sr.tag!==6)&&(Sr=null)):(gr=null,Sr=gt),gr!==Sr)){if(Nr=Yh,Zt="onMouseLeave",ot="onMouseEnter",Ge="mouse",(p==="pointerout"||p==="pointerover")&&(Nr=Pn,Zt="onPointerLeave",ot="onPointerEnter",Ge="pointer"),Li=gr==null?Ft:Uf(gr),dt=Sr==null?Ft:Uf(Sr),Ft=new Nr(Zt,Ge+"leave",gr,N,Lt),Ft.target=Li,Ft.relatedTarget=dt,Zt=null,Pd(Lt)===gt&&(Nr=new Nr(ot,Ge+"enter",Sr,N,Lt),Nr.target=dt,Nr.relatedTarget=Li,Zt=Nr),Li=Zt,gr&&Sr)t:{for(Nr=gr,ot=Sr,Ge=0,dt=Nr;dt;dt=$f(dt))Ge++;for(dt=0,Zt=ot;Zt;Zt=$f(Zt))dt++;for(;0<Ge-dt;)Nr=$f(Nr),Ge--;for(;0<dt-Ge;)ot=$f(ot),dt--;for(;Ge--;){if(Nr===ot||ot!==null&&Nr===ot.alternate)break t;Nr=$f(Nr),ot=$f(ot)}Nr=null}else Nr=null;gr!==null&&d_(zt,Ft,gr,Nr,!1),Sr!==null&&Li!==null&&d_(zt,Li,Sr,Nr,!0)}}e:{if(Ft=gt?Uf(gt):window,gr=Ft.nodeName&&Ft.nodeName.toLowerCase(),gr==="select"||gr==="input"&&Ft.type==="file")var Er=ap;else if(np(Ft))if(Zm)Er=op;else{Er=fu;var Lr=kd}else(gr=Ft.nodeName)&&gr.toLowerCase()==="input"&&(Ft.type==="checkbox"||Ft.type==="radio")&&(Er=hu);if(Er&&(Er=Er(p,gt))){zo(zt,Er,N,Lt);break e}Lr&&Lr(p,Ft,gt),p==="focusout"&&(Lr=Ft._wrapperState)&&Lr.controlled&&Ft.type==="number"&&st(Ft,"number",Ft.value)}switch(Lr=gt?Uf(gt):window,p){case"focusin":(np(Lr)||Lr.contentEditable==="true")&&(Ys=Lr,gu=gt,Oc=null);break;case"focusout":Oc=gu=Ys=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,yu(zt,N,Lt);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":yu(zt,N,Lt)}var jr;if(xl)e:{switch(p){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else ri?Qh(p,N)&&(ln="onCompositionEnd"):p==="keydown"&&N.keyCode===229&&(ln="onCompositionStart");ln&&(Zh&&N.locale!=="ko"&&(ri||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&ri&&(jr=Wg()):(Gl=Lt,vl="value"in Gl?Gl.value:Gl.textContent,ri=!0)),Lr=Yg(gt,ln),0<Lr.length&&(ln=new Ee(ln,p,null,N,Lt),zt.push({event:ln,listeners:Lr}),jr?ln.data=jr:(jr=Of(N),jr!==null&&(ln.data=jr)))),(jr=Xm?ep(p,N):tp(p,N))&&(gt=Yg(gt,"onBeforeInput"),0<gt.length&&(Lt=new Ee("onBeforeInput","beforeinput",null,N,Lt),zt.push({event:Lt,listeners:gt}),Lt.data=jr))}t0(zt,v)})}function a0(p,v,N){return{instance:p,listener:v,currentTarget:N}}function Yg(p,v){for(var N=v+"Capture",I=[];p!==null;){var W=p,ee=W.stateNode;W.tag===5&&ee!==null&&(W=ee,ee=xt(p,N),ee!=null&&I.unshift(a0(p,ee,W)),ee=xt(p,v),ee!=null&&I.push(a0(p,ee,W))),p=p.return}return I}function $f(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function d_(p,v,N,I,W){for(var ee=v._reactName,pe=[];N!==null&&N!==I;){var Ce=N,Ue=Ce.alternate,gt=Ce.stateNode;if(Ue!==null&&Ue===I)break;Ce.tag===5&&gt!==null&&(Ce=gt,W?(Ue=xt(N,ee),Ue!=null&&pe.unshift(a0(N,Ue,Ce))):W||(Ue=xt(N,ee),Ue!=null&&pe.push(a0(N,Ue,Ce)))),N=N.return}pe.length!==0&&p.push({event:v,listeners:pe})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function f_(p){return(typeof p=="string"?p:""+p).replace(eA,`
`).replace(tA,"")}function Xg(p,v,N){if(v=f_(v),f_(p)!==v&&N)throw Error(r(425))}function up(){}var i0=null,Bf=null;function Ty(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var Oy=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(p){return p_.resolve(null).then(p).catch(nA)}:Oy;function nA(p){setTimeout(function(){throw p})}function Dy(p,v){var N=v,I=0;do{var W=N.nextSibling;if(p.removeChild(N),W&&W.nodeType===8)if(N=W.data,N==="/$"){if(I===0){p.removeChild(W),Hl(v);return}I--}else N!=="$"&&N!=="$?"&&N!=="$!"||I++;N=W}while(N);Hl(v)}function Go(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?")break;if(v==="/$")return null}}return p}function _l(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var N=p.data;if(N==="$"||N==="$!"||N==="$?"){if(v===0)return p;v--}else N==="/$"&&v++}p=p.previousSibling}return null}var ps=Math.random().toString(36).slice(2),Rc="__reactFiber$"+ps,dp="__reactProps$"+ps,Eo="__reactContainer$"+ps,ms="__reactEvents$"+ps,aA="__reactListeners$"+ps,iA="__reactHandles$"+ps;function Pd(p){var v=p[Rc];if(v)return v;for(var N=p.parentNode;N;){if(v=N[Eo]||N[Rc]){if(N=v.alternate,v.child!==null||N!==null&&N.child!==null)for(p=_l(p);p!==null;){if(N=p[Rc])return N;p=_l(p)}return v}p=N,N=p.parentNode}return null}function fp(p){return p=p[Rc]||p[Eo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Uf(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(r(33))}function o0(p){return p[dp]||null}var Iy=[],xu=-1;function Xl(p){return{current:p}}function ta(p){0>xu||(p.current=Iy[xu],Iy[xu]=null,xu--)}function sa(p,v){xu++,Iy[xu]=p.current,p.current=v}var Td={},po=Xl(Td),gs=Xl(!1),qf=Td;function hp(p,v){var N=p.type.contextTypes;if(!N)return Td;var I=p.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===v)return I.__reactInternalMemoizedMaskedChildContext;var W={},ee;for(ee in N)W[ee]=v[ee];return I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=v,p.__reactInternalMemoizedMaskedChildContext=W),W}function vs(p){return p=p.childContextTypes,p!=null}function Zg(){ta(gs),ta(po)}function m_(p,v,N){if(po.current!==Td)throw Error(r(168));sa(po,v),sa(gs,N)}function Ry(p,v,N){var I=p.stateNode;if(v=v.childContextTypes,typeof I.getChildContext!="function")return N;I=I.getChildContext();for(var W in I)if(!(W in v))throw Error(r(108,fe(p)||"Unknown",W));return G({},N,I)}function zf(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Td,qf=po.current,sa(po,p),sa(gs,gs.current),!0}function g_(p,v,N){var I=p.stateNode;if(!I)throw Error(r(169));N?(p=Ry(p,v,qf),I.__reactInternalMemoizedMergedChildContext=p,ta(gs),ta(po),sa(po,p)):ta(gs),sa(gs,N)}var wu=null,s0=!1,k=!1;function F(p){wu===null?wu=[p]:wu.push(p)}function H(p){s0=!0,F(p)}function ne(){if(!k&&wu!==null){k=!0;var p=0,v=Un;try{var N=wu;for(Un=1;p<N.length;p++){var I=N[p];do I=I(!0);while(I!==null)}wu=null,s0=!1}catch(W){throw wu!==null&&(wu=wu.slice(p+1)),Dt(Fn,ne),W}finally{Un=v,k=!1}}return null}var oe=[],he=0,me=null,ve=0,we=[],Ne=0,Be=null,nt=1,at="";function Ke(p,v){oe[he++]=ve,oe[he++]=me,me=p,ve=v}function Ot(p,v,N){we[Ne++]=nt,we[Ne++]=at,we[Ne++]=Be,Be=p;var I=nt;p=at;var W=32-Ua(I)-1;I&=~(1<<W),N+=1;var ee=32-Ua(v)+W;if(30<ee){var pe=W-W%5;ee=(I&(1<<pe)-1).toString(32),I>>=pe,W-=pe,nt=1<<32-Ua(v)+W|N<<W|I,at=ee+p}else nt=1<<ee|N<<W|I,at=p}function St(p){p.return!==null&&(Ke(p,1),Ot(p,1,0))}function ze(p){for(;p===me;)me=oe[--he],oe[he]=null,ve=oe[--he],oe[he]=null;for(;p===Be;)Be=we[--Ne],we[Ne]=null,at=we[--Ne],we[Ne]=null,nt=we[--Ne],we[Ne]=null}var We=null,kt=null,Nt=!1,Ct=null;function fr(p,v){var N=Bc(5,null,null,0);N.elementType="DELETED",N.stateNode=v,N.return=p,v=p.deletions,v===null?(p.deletions=[N],p.flags|=16):v.push(N)}function ar(p,v){switch(p.tag){case 5:var N=p.type;return v=v.nodeType!==1||N.toLowerCase()!==v.nodeName.toLowerCase()?null:v,v!==null?(p.stateNode=v,We=p,kt=Go(v.firstChild),!0):!1;case 6:return v=p.pendingProps===""||v.nodeType!==3?null:v,v!==null?(p.stateNode=v,We=p,kt=null,!0):!1;case 13:return v=v.nodeType!==8?null:v,v!==null?(N=Be!==null?{id:nt,overflow:at}:null,p.memoizedState={dehydrated:v,treeContext:N,retryLane:1073741824},N=Bc(18,null,null,0),N.stateNode=v,N.return=p,p.child=N,We=p,kt=null,!0):!1;default:return!1}}function Rr(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ir(p){if(Nt){var v=kt;if(v){var N=v;if(!ar(p,v)){if(Rr(p))throw Error(r(418));v=Go(N.nextSibling);var I=We;v&&ar(p,v)?fr(I,N):(p.flags=p.flags&-4097|2,Nt=!1,We=p)}}else{if(Rr(p))throw Error(r(418));p.flags=p.flags&-4097|2,Nt=!1,We=p}}}function Ln(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;We=p}function jn(p){if(p!==We)return!1;if(!Nt)return Ln(p),Nt=!0,!1;var v;if((v=p.tag!==3)&&!(v=p.tag!==5)&&(v=p.type,v=v!=="head"&&v!=="body"&&!Ty(p.type,p.memoizedProps)),v&&(v=kt)){if(Rr(p))throw In(),Error(r(418));for(;v;)fr(p,v),v=Go(v.nextSibling)}if(Ln(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8){var N=p.data;if(N==="/$"){if(v===0){kt=Go(p.nextSibling);break e}v--}else N!=="$"&&N!=="$!"&&N!=="$?"||v++}p=p.nextSibling}kt=null}}else kt=We?Go(p.stateNode.nextSibling):null;return!0}function In(){for(var p=kt;p;)p=Go(p.nextSibling)}function mn(){kt=We=null,Nt=!1}function ra(p){Ct===null?Ct=[p]:Ct.push(p)}var la=C.ReactCurrentBatchConfig;function rn(p,v,N){if(p=N.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(r(309));var I=N.stateNode}if(!I)throw Error(r(147,p));var W=I,ee=""+p;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===ee?v.ref:(v=function(pe){var Ce=W.refs;pe===null?delete Ce[ee]:Ce[ee]=pe},v._stringRef=ee,v)}if(typeof p!="string")throw Error(r(284));if(!N._owner)throw Error(r(290,p))}return p}function Wa(p,v){throw p=Object.prototype.toString.call(v),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p))}function Ko(p){var v=p._init;return v(p._payload)}function ui(p){function v(ot,Ge){if(p){var dt=ot.deletions;dt===null?(ot.deletions=[Ge],ot.flags|=16):dt.push(Ge)}}function N(ot,Ge){if(!p)return null;for(;Ge!==null;)v(ot,Ge),Ge=Ge.sibling;return null}function I(ot,Ge){for(ot=new Map;Ge!==null;)Ge.key!==null?ot.set(Ge.key,Ge):ot.set(Ge.index,Ge),Ge=Ge.sibling;return ot}function W(ot,Ge){return ot=Np(ot,Ge),ot.index=0,ot.sibling=null,ot}function ee(ot,Ge,dt){return ot.index=dt,p?(dt=ot.alternate,dt!==null?(dt=dt.index,dt<Ge?(ot.flags|=2,Ge):dt):(ot.flags|=2,Ge)):(ot.flags|=1048576,Ge)}function pe(ot){return p&&ot.alternate===null&&(ot.flags|=2),ot}function Ce(ot,Ge,dt,Zt){return Ge===null||Ge.tag!==6?(Ge=RA(dt,ot.mode,Zt),Ge.return=ot,Ge):(Ge=W(Ge,dt),Ge.return=ot,Ge)}function Ue(ot,Ge,dt,Zt){var Er=dt.type;return Er===T?Lt(ot,Ge,dt.props.children,Zt,dt.key):Ge!==null&&(Ge.elementType===Er||typeof Er=="object"&&Er!==null&&Er.$$typeof===te&&Ko(Er)===Ge.type)?(Zt=W(Ge,dt.props),Zt.ref=rn(ot,Ge,dt),Zt.return=ot,Zt):(Zt=F_(dt.type,dt.key,dt.props,null,ot.mode,Zt),Zt.ref=rn(ot,Ge,dt),Zt.return=ot,Zt)}function gt(ot,Ge,dt,Zt){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==dt.containerInfo||Ge.stateNode.implementation!==dt.implementation?(Ge=MA(dt,ot.mode,Zt),Ge.return=ot,Ge):(Ge=W(Ge,dt.children||[]),Ge.return=ot,Ge)}function Lt(ot,Ge,dt,Zt,Er){return Ge===null||Ge.tag!==7?(Ge=m0(dt,ot.mode,Zt,Er),Ge.return=ot,Ge):(Ge=W(Ge,dt),Ge.return=ot,Ge)}function zt(ot,Ge,dt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return Ge=RA(""+Ge,ot.mode,dt),Ge.return=ot,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case E:return dt=F_(Ge.type,Ge.key,Ge.props,null,ot.mode,dt),dt.ref=rn(ot,null,Ge),dt.return=ot,dt;case O:return Ge=MA(Ge,ot.mode,dt),Ge.return=ot,Ge;case te:var Zt=Ge._init;return zt(ot,Zt(Ge._payload),dt)}if(Pt(Ge)||U(Ge))return Ge=m0(Ge,ot.mode,dt,null),Ge.return=ot,Ge;Wa(ot,Ge)}return null}function Ft(ot,Ge,dt,Zt){var Er=Ge!==null?Ge.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Er!==null?null:Ce(ot,Ge,""+dt,Zt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case E:return dt.key===Er?Ue(ot,Ge,dt,Zt):null;case O:return dt.key===Er?gt(ot,Ge,dt,Zt):null;case te:return Er=dt._init,Ft(ot,Ge,Er(dt._payload),Zt)}if(Pt(dt)||U(dt))return Er!==null?null:Lt(ot,Ge,dt,Zt,null);Wa(ot,dt)}return null}function gr(ot,Ge,dt,Zt,Er){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return ot=ot.get(dt)||null,Ce(Ge,ot,""+Zt,Er);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case E:return ot=ot.get(Zt.key===null?dt:Zt.key)||null,Ue(Ge,ot,Zt,Er);case O:return ot=ot.get(Zt.key===null?dt:Zt.key)||null,gt(Ge,ot,Zt,Er);case te:var Lr=Zt._init;return gr(ot,Ge,dt,Lr(Zt._payload),Er)}if(Pt(Zt)||U(Zt))return ot=ot.get(dt)||null,Lt(Ge,ot,Zt,Er,null);Wa(Ge,Zt)}return null}function Sr(ot,Ge,dt,Zt){for(var Er=null,Lr=null,jr=Ge,ln=Ge=0,Oo=null;jr!==null&&ln<dt.length;ln++){jr.index>ln?(Oo=jr,jr=null):Oo=jr.sibling;var Kn=Ft(ot,jr,dt[ln],Zt);if(Kn===null){jr===null&&(jr=Oo);break}p&&jr&&Kn.alternate===null&&v(ot,jr),Ge=ee(Kn,Ge,ln),Lr===null?Er=Kn:Lr.sibling=Kn,Lr=Kn,jr=Oo}if(ln===dt.length)return N(ot,jr),Nt&&Ke(ot,ln),Er;if(jr===null){for(;ln<dt.length;ln++)jr=zt(ot,dt[ln],Zt),jr!==null&&(Ge=ee(jr,Ge,ln),Lr===null?Er=jr:Lr.sibling=jr,Lr=jr);return Nt&&Ke(ot,ln),Er}for(jr=I(ot,jr);ln<dt.length;ln++)Oo=gr(jr,ot,ln,dt[ln],Zt),Oo!==null&&(p&&Oo.alternate!==null&&jr.delete(Oo.key===null?ln:Oo.key),Ge=ee(Oo,Ge,ln),Lr===null?Er=Oo:Lr.sibling=Oo,Lr=Oo);return p&&jr.forEach(function(kp){return v(ot,kp)}),Nt&&Ke(ot,ln),Er}function Nr(ot,Ge,dt,Zt){var Er=U(dt);if(typeof Er!="function")throw Error(r(150));if(dt=Er.call(dt),dt==null)throw Error(r(151));for(var Lr=Er=null,jr=Ge,ln=Ge=0,Oo=null,Kn=dt.next();jr!==null&&!Kn.done;ln++,Kn=dt.next()){jr.index>ln?(Oo=jr,jr=null):Oo=jr.sibling;var kp=Ft(ot,jr,Kn.value,Zt);if(kp===null){jr===null&&(jr=Oo);break}p&&jr&&kp.alternate===null&&v(ot,jr),Ge=ee(kp,Ge,ln),Lr===null?Er=kp:Lr.sibling=kp,Lr=kp,jr=Oo}if(Kn.done)return N(ot,jr),Nt&&Ke(ot,ln),Er;if(jr===null){for(;!Kn.done;ln++,Kn=dt.next())Kn=zt(ot,Kn.value,Zt),Kn!==null&&(Ge=ee(Kn,Ge,ln),Lr===null?Er=Kn:Lr.sibling=Kn,Lr=Kn);return Nt&&Ke(ot,ln),Er}for(jr=I(ot,jr);!Kn.done;ln++,Kn=dt.next())Kn=gr(jr,ot,ln,Kn.value,Zt),Kn!==null&&(p&&Kn.alternate!==null&&jr.delete(Kn.key===null?ln:Kn.key),Ge=ee(Kn,Ge,ln),Lr===null?Er=Kn:Lr.sibling=Kn,Lr=Kn);return p&&jr.forEach(function(Bse){return v(ot,Bse)}),Nt&&Ke(ot,ln),Er}function Li(ot,Ge,dt,Zt){if(typeof dt=="object"&&dt!==null&&dt.type===T&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case E:e:{for(var Er=dt.key,Lr=Ge;Lr!==null;){if(Lr.key===Er){if(Er=dt.type,Er===T){if(Lr.tag===7){N(ot,Lr.sibling),Ge=W(Lr,dt.props.children),Ge.return=ot,ot=Ge;break e}}else if(Lr.elementType===Er||typeof Er=="object"&&Er!==null&&Er.$$typeof===te&&Ko(Er)===Lr.type){N(ot,Lr.sibling),Ge=W(Lr,dt.props),Ge.ref=rn(ot,Lr,dt),Ge.return=ot,ot=Ge;break e}N(ot,Lr);break}else v(ot,Lr);Lr=Lr.sibling}dt.type===T?(Ge=m0(dt.props.children,ot.mode,Zt,dt.key),Ge.return=ot,ot=Ge):(Zt=F_(dt.type,dt.key,dt.props,null,ot.mode,Zt),Zt.ref=rn(ot,Ge,dt),Zt.return=ot,ot=Zt)}return pe(ot);case O:e:{for(Lr=dt.key;Ge!==null;){if(Ge.key===Lr)if(Ge.tag===4&&Ge.stateNode.containerInfo===dt.containerInfo&&Ge.stateNode.implementation===dt.implementation){N(ot,Ge.sibling),Ge=W(Ge,dt.children||[]),Ge.return=ot,ot=Ge;break e}else{N(ot,Ge);break}else v(ot,Ge);Ge=Ge.sibling}Ge=MA(dt,ot.mode,Zt),Ge.return=ot,ot=Ge}return pe(ot);case te:return Lr=dt._init,Li(ot,Ge,Lr(dt._payload),Zt)}if(Pt(dt))return Sr(ot,Ge,dt,Zt);if(U(dt))return Nr(ot,Ge,dt,Zt);Wa(ot,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,Ge!==null&&Ge.tag===6?(N(ot,Ge.sibling),Ge=W(Ge,dt),Ge.return=ot,ot=Ge):(N(ot,Ge),Ge=RA(dt,ot.mode,Zt),Ge.return=ot,ot=Ge),pe(ot)):N(ot,Ge)}return Li}var Ri=ui(!0),Hn=ui(!1),Co=Xl(null),Po=null,Va=null,Mi=null;function mo(){Mi=Va=Po=null}function ys(p){var v=Co.current;ta(Co),p._currentValue=v}function bl(p,v,N){for(;p!==null;){var I=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,I!==null&&(I.childLanes|=v)):I!==null&&(I.childLanes&v)!==v&&(I.childLanes|=v),p===N)break;p=p.return}}function Ha(p,v){Po=p,Mi=Va=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&v)!==0&&(kl=!0),p.firstContext=null)}function bi(p){var v=p._currentValue;if(Mi!==p)if(p={context:p,memoizedValue:v,next:null},Va===null){if(Po===null)throw Error(r(308));Va=p,Po.dependencies={lanes:0,firstContext:p}}else Va=Va.next=p;return v}var Xs=null;function Od(p){Xs===null?Xs=[p]:Xs.push(p)}function _u(p,v,N,I){var W=v.interleaved;return W===null?(N.next=N,Od(v)):(N.next=W.next,W.next=N),v.interleaved=N,Gn(p,I)}function Gn(p,v){p.lanes|=v;var N=p.alternate;for(N!==null&&(N.lanes|=v),N=p,p=p.return;p!==null;)p.childLanes|=v,N=p.alternate,N!==null&&(N.childLanes|=v),N=p,p=p.return;return N.tag===3?N.stateNode:null}var Mc=!1;function Jg(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function My(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Sl(p,v){return{eventTime:p,lane:v,tag:0,payload:null,callback:null,next:null}}function Al(p,v,N){var I=p.updateQueue;if(I===null)return null;if(I=I.shared,(zn&2)!==0){var W=I.pending;return W===null?v.next=v:(v.next=W.next,W.next=v),I.pending=v,Gn(p,N)}return W=I.interleaved,W===null?(v.next=v,Od(I)):(v.next=W.next,W.next=v),I.interleaved=v,Gn(p,N)}function Wf(p,v,N){if(v=v.updateQueue,v!==null&&(v=v.shared,(N&4194240)!==0)){var I=v.lanes;I&=p.pendingLanes,N|=I,v.lanes=N,Bh(p,N)}}function Nl(p,v){var N=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,N===I)){var W=null,ee=null;if(N=N.firstBaseUpdate,N!==null){do{var pe={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};ee===null?W=ee=pe:ee=ee.next=pe,N=N.next}while(N!==null);ee===null?W=ee=v:ee=ee.next=v}else W=ee=v;N={baseState:I.baseState,firstBaseUpdate:W,lastBaseUpdate:ee,shared:I.shared,effects:I.effects},p.updateQueue=N;return}p=N.lastBaseUpdate,p===null?N.firstBaseUpdate=v:p.next=v,N.lastBaseUpdate=v}function bu(p,v,N,I){var W=p.updateQueue;Mc=!1;var ee=W.firstBaseUpdate,pe=W.lastBaseUpdate,Ce=W.shared.pending;if(Ce!==null){W.shared.pending=null;var Ue=Ce,gt=Ue.next;Ue.next=null,pe===null?ee=gt:pe.next=gt,pe=Ue;var Lt=p.alternate;Lt!==null&&(Lt=Lt.updateQueue,Ce=Lt.lastBaseUpdate,Ce!==pe&&(Ce===null?Lt.firstBaseUpdate=gt:Ce.next=gt,Lt.lastBaseUpdate=Ue))}if(ee!==null){var zt=W.baseState;pe=0,Lt=gt=Ue=null,Ce=ee;do{var Ft=Ce.lane,gr=Ce.eventTime;if((I&Ft)===Ft){Lt!==null&&(Lt=Lt.next={eventTime:gr,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var Sr=p,Nr=Ce;switch(Ft=v,gr=N,Nr.tag){case 1:if(Sr=Nr.payload,typeof Sr=="function"){zt=Sr.call(gr,zt,Ft);break e}zt=Sr;break e;case 3:Sr.flags=Sr.flags&-65537|128;case 0:if(Sr=Nr.payload,Ft=typeof Sr=="function"?Sr.call(gr,zt,Ft):Sr,Ft==null)break e;zt=G({},zt,Ft);break e;case 2:Mc=!0}}Ce.callback!==null&&Ce.lane!==0&&(p.flags|=64,Ft=W.effects,Ft===null?W.effects=[Ce]:Ft.push(Ce))}else gr={eventTime:gr,lane:Ft,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Lt===null?(gt=Lt=gr,Ue=zt):Lt=Lt.next=gr,pe|=Ft;if(Ce=Ce.next,Ce===null){if(Ce=W.shared.pending,Ce===null)break;Ft=Ce,Ce=Ft.next,Ft.next=null,W.lastBaseUpdate=Ft,W.shared.pending=null}}while(!0);if(Lt===null&&(Ue=zt),W.baseState=Ue,W.firstBaseUpdate=gt,W.lastBaseUpdate=Lt,v=W.shared.interleaved,v!==null){W=v;do pe|=W.lane,W=W.next;while(W!==v)}else ee===null&&(W.shared.lanes=0);d0|=pe,p.lanes=pe,p.memoizedState=zt}}function Vf(p,v,N){if(p=v.effects,v.effects=null,p!==null)for(v=0;v<p.length;v++){var I=p[v],W=I.callback;if(W!==null){if(I.callback=null,I=N,typeof W!="function")throw Error(r(191,W));W.call(I)}}}var pp={},Zs=Xl(pp),mp=Xl(pp),Dd=Xl(pp);function Su(p){if(p===pp)throw Error(r(174));return p}function gp(p,v){switch(sa(Dd,v),sa(mp,p),sa(Zs,pp),p=v.nodeType,p){case 9:case 11:v=(v=v.documentElement)?v.namespaceURI:ht(null,"");break;default:p=p===8?v.parentNode:v,v=p.namespaceURI||null,p=p.tagName,v=ht(v,p)}ta(Zs),sa(Zs,v)}function Fc(){ta(Zs),ta(mp),ta(Dd)}function v_(p){Su(Dd.current);var v=Su(Zs.current),N=ht(v,p.type);v!==N&&(sa(mp,p),sa(Zs,N))}function Fy(p){mp.current===p&&(ta(Zs),ta(mp))}var ka=Xl(0);function Zl(p){for(var v=p;v!==null;){if(v.tag===13){var N=v.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Ly=[];function jy(){for(var p=0;p<Ly.length;p++)Ly[p]._workInProgressVersionPrimary=null;Ly.length=0}var Qg=C.ReactCurrentDispatcher,ev=C.ReactCurrentBatchConfig,Lc=0,Da=null,Si=null,di=null,vp=!1,Au=!1,yp=0,oA=0;function Fi(){throw Error(r(321))}function tv(p,v){if(v===null)return!1;for(var N=0;N<v.length&&N<p.length;N++)if(!qn(p[N],v[N]))return!1;return!0}function l0(p,v,N,I,W,ee){if(Lc=ee,Da=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,Qg.current=p===null||p.memoizedState===null?fse:hse,p=N(I,W),Au){ee=0;do{if(Au=!1,yp=0,25<=ee)throw Error(r(301));ee+=1,di=Si=null,v.updateQueue=null,Qg.current=pse,p=N(I,W)}while(Au)}if(Qg.current=b_,v=Si!==null&&Si.next!==null,Lc=0,di=Si=Da=null,vp=!1,v)throw Error(r(300));return p}function jc(){var p=yp!==0;return yp=0,p}function Jl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Da.memoizedState=di=p:di=di.next=p,di}function Js(){if(Si===null){var p=Da.alternate;p=p!==null?p.memoizedState:null}else p=Si.next;var v=di===null?Da.memoizedState:di.next;if(v!==null)di=v,Si=p;else{if(p===null)throw Error(r(310));Si=p,p={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},di===null?Da.memoizedState=di=p:di=di.next=p}return di}function c0(p,v){return typeof v=="function"?v(p):v}function rv(p){var v=Js(),N=v.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=p;var I=Si,W=I.baseQueue,ee=N.pending;if(ee!==null){if(W!==null){var pe=W.next;W.next=ee.next,ee.next=pe}I.baseQueue=W=ee,N.pending=null}if(W!==null){ee=W.next,I=I.baseState;var Ce=pe=null,Ue=null,gt=ee;do{var Lt=gt.lane;if((Lc&Lt)===Lt)Ue!==null&&(Ue=Ue.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),I=gt.hasEagerState?gt.eagerState:p(I,gt.action);else{var zt={lane:Lt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};Ue===null?(Ce=Ue=zt,pe=I):Ue=Ue.next=zt,Da.lanes|=Lt,d0|=Lt}gt=gt.next}while(gt!==null&&gt!==ee);Ue===null?pe=I:Ue.next=Ce,qn(I,v.memoizedState)||(kl=!0),v.memoizedState=I,v.baseState=pe,v.baseQueue=Ue,N.lastRenderedState=I}if(p=N.interleaved,p!==null){W=p;do ee=W.lane,Da.lanes|=ee,d0|=ee,W=W.next;while(W!==p)}else W===null&&(N.lanes=0);return[v.memoizedState,N.dispatch]}function Id(p){var v=Js(),N=v.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=p;var I=N.dispatch,W=N.pending,ee=v.memoizedState;if(W!==null){N.pending=null;var pe=W=W.next;do ee=p(ee,pe.action),pe=pe.next;while(pe!==W);qn(ee,v.memoizedState)||(kl=!0),v.memoizedState=ee,v.baseQueue===null&&(v.baseState=ee),N.lastRenderedState=ee}return[ee,I]}function y_(){}function $y(p,v){var N=Da,I=Js(),W=v(),ee=!qn(I.memoizedState,W);if(ee&&(I.memoizedState=W,kl=!0),I=I.queue,iv(w_.bind(null,N,I,p),[p]),I.getSnapshot!==v||ee||di!==null&&di.memoizedState.tag&1){if(N.flags|=2048,Qs(9,By.bind(null,N,I,W,v),void 0,null),To===null)throw Error(r(349));(Lc&30)!==0||x_(N,v,W)}return W}function x_(p,v,N){p.flags|=16384,p={getSnapshot:v,value:N},v=Da.updateQueue,v===null?(v={lastEffect:null,stores:null},Da.updateQueue=v,v.stores=[p]):(N=v.stores,N===null?v.stores=[p]:N.push(p))}function By(p,v,N,I){v.value=N,v.getSnapshot=I,xp(v)&&nv(p)}function w_(p,v,N){return N(function(){xp(v)&&nv(p)})}function xp(p){var v=p.getSnapshot;p=p.value;try{var N=v();return!qn(p,N)}catch{return!0}}function nv(p){var v=Gn(p,1);v!==null&&Pu(v,p,1,-1)}function u0(p){var v=Jl();return typeof p=="function"&&(p=p()),v.memoizedState=v.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:p},v.queue=p,p=p.dispatch=dse.bind(null,Da,p),[v.memoizedState,p]}function Qs(p,v,N,I){return p={tag:p,create:v,destroy:N,deps:I,next:null},v=Da.updateQueue,v===null?(v={lastEffect:null,stores:null},Da.updateQueue=v,v.lastEffect=p.next=p):(N=v.lastEffect,N===null?v.lastEffect=p.next=p:(I=N.next,N.next=p,p.next=I,v.lastEffect=p)),p}function Nu(){return Js().memoizedState}function Ql(p,v,N,I){var W=Jl();Da.flags|=p,W.memoizedState=Qs(1|v,N,void 0,I===void 0?null:I)}function Hf(p,v,N,I){var W=Js();I=I===void 0?null:I;var ee=void 0;if(Si!==null){var pe=Si.memoizedState;if(ee=pe.destroy,I!==null&&tv(I,pe.deps)){W.memoizedState=Qs(v,N,ee,I);return}}Da.flags|=p,W.memoizedState=Qs(1|v,N,ee,I)}function av(p,v){return Ql(8390656,8,p,v)}function iv(p,v){return Hf(2048,8,p,v)}function __(p,v){return Hf(4,2,p,v)}function ov(p,v){return Hf(4,4,p,v)}function sv(p,v){if(typeof v=="function")return p=p(),v(p),function(){v(null)};if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function DM(p,v,N){return N=N!=null?N.concat([p]):null,Hf(4,4,sv.bind(null,v,p),N)}function sA(){}function IM(p,v){var N=Js();v=v===void 0?null:v;var I=N.memoizedState;return I!==null&&v!==null&&tv(v,I[1])?I[0]:(N.memoizedState=[p,v],p)}function RM(p,v){var N=Js();v=v===void 0?null:v;var I=N.memoizedState;return I!==null&&v!==null&&tv(v,I[1])?I[0]:(p=p(),N.memoizedState=[p,v],p)}function MM(p,v,N){return(Lc&21)===0?(p.baseState&&(p.baseState=!1,kl=!0),p.memoizedState=N):(qn(N,v)||(N=Um(),Da.lanes|=N,d0|=N,p.baseState=!0),v)}function cse(p,v){var N=Un;Un=N!==0&&4>N?N:4,p(!0);var I=ev.transition;ev.transition={};try{p(!1),v()}finally{Un=N,ev.transition=I}}function FM(){return Js().memoizedState}function use(p,v,N){var I=Sp(p);if(N={lane:I,action:N,hasEagerState:!1,eagerState:null,next:null},LM(p))jM(v,N);else if(N=_u(p,v,N,I),N!==null){var W=tl();Pu(N,p,I,W),$M(N,v,I)}}function dse(p,v,N){var I=Sp(p),W={lane:I,action:N,hasEagerState:!1,eagerState:null,next:null};if(LM(p))jM(v,W);else{var ee=p.alternate;if(p.lanes===0&&(ee===null||ee.lanes===0)&&(ee=v.lastRenderedReducer,ee!==null))try{var pe=v.lastRenderedState,Ce=ee(pe,N);if(W.hasEagerState=!0,W.eagerState=Ce,qn(Ce,pe)){var Ue=v.interleaved;Ue===null?(W.next=W,Od(v)):(W.next=Ue.next,Ue.next=W),v.interleaved=W;return}}catch{}finally{}N=_u(p,v,W,I),N!==null&&(W=tl(),Pu(N,p,I,W),$M(N,v,I))}}function LM(p){var v=p.alternate;return p===Da||v!==null&&v===Da}function jM(p,v){Au=vp=!0;var N=p.pending;N===null?v.next=v:(v.next=N.next,N.next=v),p.pending=v}function $M(p,v,N){if((N&4194240)!==0){var I=v.lanes;I&=p.pendingLanes,N|=I,v.lanes=N,Bh(p,N)}}var b_={readContext:bi,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useInsertionEffect:Fi,useLayoutEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useMutableSource:Fi,useSyncExternalStore:Fi,useId:Fi,unstable_isNewReconciler:!1},fse={readContext:bi,useCallback:function(p,v){return Jl().memoizedState=[p,v===void 0?null:v],p},useContext:bi,useEffect:av,useImperativeHandle:function(p,v,N){return N=N!=null?N.concat([p]):null,Ql(4194308,4,sv.bind(null,v,p),N)},useLayoutEffect:function(p,v){return Ql(4194308,4,p,v)},useInsertionEffect:function(p,v){return Ql(4,2,p,v)},useMemo:function(p,v){var N=Jl();return v=v===void 0?null:v,p=p(),N.memoizedState=[p,v],p},useReducer:function(p,v,N){var I=Jl();return v=N!==void 0?N(v):v,I.memoizedState=I.baseState=v,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:v},I.queue=p,p=p.dispatch=use.bind(null,Da,p),[I.memoizedState,p]},useRef:function(p){var v=Jl();return p={current:p},v.memoizedState=p},useState:u0,useDebugValue:sA,useDeferredValue:function(p){return Jl().memoizedState=p},useTransition:function(){var p=u0(!1),v=p[0];return p=cse.bind(null,p[1]),Jl().memoizedState=p,[v,p]},useMutableSource:function(){},useSyncExternalStore:function(p,v,N){var I=Da,W=Jl();if(Nt){if(N===void 0)throw Error(r(407));N=N()}else{if(N=v(),To===null)throw Error(r(349));(Lc&30)!==0||x_(I,v,N)}W.memoizedState=N;var ee={value:N,getSnapshot:v};return W.queue=ee,av(w_.bind(null,I,ee,p),[p]),I.flags|=2048,Qs(9,By.bind(null,I,ee,N,v),void 0,null),N},useId:function(){var p=Jl(),v=To.identifierPrefix;if(Nt){var N=at,I=nt;N=(I&~(1<<32-Ua(I)-1)).toString(32)+N,v=":"+v+"R"+N,N=yp++,0<N&&(v+="H"+N.toString(32)),v+=":"}else N=oA++,v=":"+v+"r"+N.toString(32)+":";return p.memoizedState=v},unstable_isNewReconciler:!1},hse={readContext:bi,useCallback:IM,useContext:bi,useEffect:iv,useImperativeHandle:DM,useInsertionEffect:__,useLayoutEffect:ov,useMemo:RM,useReducer:rv,useRef:Nu,useState:function(){return rv(c0)},useDebugValue:sA,useDeferredValue:function(p){var v=Js();return MM(v,Si.memoizedState,p)},useTransition:function(){var p=rv(c0)[0],v=Js().memoizedState;return[p,v]},useMutableSource:y_,useSyncExternalStore:$y,useId:FM,unstable_isNewReconciler:!1},pse={readContext:bi,useCallback:IM,useContext:bi,useEffect:iv,useImperativeHandle:DM,useInsertionEffect:__,useLayoutEffect:ov,useMemo:RM,useReducer:Id,useRef:Nu,useState:function(){return Id(c0)},useDebugValue:sA,useDeferredValue:function(p){var v=Js();return Si===null?v.memoizedState=p:MM(v,Si.memoizedState,p)},useTransition:function(){var p=Id(c0)[0],v=Js().memoizedState;return[p,v]},useMutableSource:y_,useSyncExternalStore:$y,useId:FM,unstable_isNewReconciler:!1};function ku(p,v){if(p&&p.defaultProps){v=G({},v),p=p.defaultProps;for(var N in p)v[N]===void 0&&(v[N]=p[N]);return v}return v}function lA(p,v,N,I){v=p.memoizedState,N=N(I,v),N=N==null?v:G({},v,N),p.memoizedState=N,p.lanes===0&&(p.updateQueue.baseState=N)}var S_={isMounted:function(p){return(p=p._reactInternals)?Se(p)===p:!1},enqueueSetState:function(p,v,N){p=p._reactInternals;var I=tl(),W=Sp(p),ee=Sl(I,W);ee.payload=v,N!=null&&(ee.callback=N),v=Al(p,ee,W),v!==null&&(Pu(v,p,W,I),Wf(v,p,W))},enqueueReplaceState:function(p,v,N){p=p._reactInternals;var I=tl(),W=Sp(p),ee=Sl(I,W);ee.tag=1,ee.payload=v,N!=null&&(ee.callback=N),v=Al(p,ee,W),v!==null&&(Pu(v,p,W,I),Wf(v,p,W))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var N=tl(),I=Sp(p),W=Sl(N,I);W.tag=2,v!=null&&(W.callback=v),v=Al(p,W,I),v!==null&&(Pu(v,p,I,N),Wf(v,p,I))}};function BM(p,v,N,I,W,ee,pe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,ee,pe):v.prototype&&v.prototype.isPureReactComponent?!mu(N,I)||!mu(W,ee):!0}function UM(p,v,N){var I=!1,W=Td,ee=v.contextType;return typeof ee=="object"&&ee!==null?ee=bi(ee):(W=vs(v)?qf:po.current,I=v.contextTypes,ee=(I=I!=null)?hp(p,W):Td),v=new v(N,ee),p.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=S_,p.stateNode=v,v._reactInternals=p,I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=W,p.__reactInternalMemoizedMaskedChildContext=ee),v}function qM(p,v,N,I){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(N,I),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(N,I),v.state!==p&&S_.enqueueReplaceState(v,v.state,null)}function cA(p,v,N,I){var W=p.stateNode;W.props=N,W.state=p.memoizedState,W.refs={},Jg(p);var ee=v.contextType;typeof ee=="object"&&ee!==null?W.context=bi(ee):(ee=vs(v)?qf:po.current,W.context=hp(p,ee)),W.state=p.memoizedState,ee=v.getDerivedStateFromProps,typeof ee=="function"&&(lA(p,v,ee,N),W.state=p.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(v=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),v!==W.state&&S_.enqueueReplaceState(W,W.state,null),bu(p,N,W,I),W.state=p.memoizedState),typeof W.componentDidMount=="function"&&(p.flags|=4194308)}function lv(p,v){try{var N="",I=v;do N+=ae(I),I=I.return;while(I);var W=N}catch(ee){W=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:p,source:v,stack:W,digest:null}}function uA(p,v,N){return{value:p,source:null,stack:N??null,digest:v??null}}function dA(p,v){try{console.error(v.value)}catch(N){setTimeout(function(){throw N})}}var mse=typeof WeakMap=="function"?WeakMap:Map;function zM(p,v,N){N=Sl(-1,N),N.tag=3,N.payload={element:null};var I=v.value;return N.callback=function(){T_||(T_=!0,kA=I),dA(p,v)},N}function WM(p,v,N){N=Sl(-1,N),N.tag=3;var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var W=v.value;N.payload=function(){return I(W)},N.callback=function(){dA(p,v)}}var ee=p.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(N.callback=function(){dA(p,v),typeof I!="function"&&(_p===null?_p=new Set([this]):_p.add(this));var pe=v.stack;this.componentDidCatch(v.value,{componentStack:pe!==null?pe:""})}),N}function VM(p,v,N){var I=p.pingCache;if(I===null){I=p.pingCache=new mse;var W=new Set;I.set(v,W)}else W=I.get(v),W===void 0&&(W=new Set,I.set(v,W));W.has(N)||(W.add(N),p=Pse.bind(null,p,v,N),v.then(p,p))}function HM(p){do{var v;if((v=p.tag===13)&&(v=p.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return p;p=p.return}while(p!==null);return null}function GM(p,v,N,I,W){return(p.mode&1)===0?(p===v?p.flags|=65536:(p.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(v=Sl(-1,1),v.tag=2,Al(N,v,1))),N.lanes|=1),p):(p.flags|=65536,p.lanes=W,p)}var gse=C.ReactCurrentOwner,kl=!1;function el(p,v,N,I){v.child=p===null?Hn(v,null,N,I):Ri(v,p.child,N,I)}function KM(p,v,N,I,W){N=N.render;var ee=v.ref;return Ha(v,W),I=l0(p,v,N,I,ee,W),N=jc(),p!==null&&!kl?(v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~W,Gf(p,v,W)):(Nt&&N&&St(v),v.flags|=1,el(p,v,I,W),v.child)}function YM(p,v,N,I,W){if(p===null){var ee=N.type;return typeof ee=="function"&&!IA(ee)&&ee.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(v.tag=15,v.type=ee,XM(p,v,ee,I,W)):(p=F_(N.type,null,I,v,v.mode,W),p.ref=v.ref,p.return=v,v.child=p)}if(ee=p.child,(p.lanes&W)===0){var pe=ee.memoizedProps;if(N=N.compare,N=N!==null?N:mu,N(pe,I)&&p.ref===v.ref)return Gf(p,v,W)}return v.flags|=1,p=Np(ee,I),p.ref=v.ref,p.return=v,v.child=p}function XM(p,v,N,I,W){if(p!==null){var ee=p.memoizedProps;if(mu(ee,I)&&p.ref===v.ref)if(kl=!1,v.pendingProps=I=ee,(p.lanes&W)!==0)(p.flags&131072)!==0&&(kl=!0);else return v.lanes=p.lanes,Gf(p,v,W)}return fA(p,v,N,I,W)}function ZM(p,v,N){var I=v.pendingProps,W=I.children,ee=p!==null?p.memoizedState:null;if(I.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null,transitions:null},sa(uv,ec),ec|=N;else{if((N&1073741824)===0)return p=ee!==null?ee.baseLanes|N:N,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:p,cachePool:null,transitions:null},v.updateQueue=null,sa(uv,ec),ec|=p,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=ee!==null?ee.baseLanes:N,sa(uv,ec),ec|=I}else ee!==null?(I=ee.baseLanes|N,v.memoizedState=null):I=N,sa(uv,ec),ec|=I;return el(p,v,W,N),v.child}function JM(p,v){var N=v.ref;(p===null&&N!==null||p!==null&&p.ref!==N)&&(v.flags|=512,v.flags|=2097152)}function fA(p,v,N,I,W){var ee=vs(N)?qf:po.current;return ee=hp(v,ee),Ha(v,W),N=l0(p,v,N,I,ee,W),I=jc(),p!==null&&!kl?(v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~W,Gf(p,v,W)):(Nt&&I&&St(v),v.flags|=1,el(p,v,N,W),v.child)}function QM(p,v,N,I,W){if(vs(N)){var ee=!0;zf(v)}else ee=!1;if(Ha(v,W),v.stateNode===null)N_(p,v),UM(v,N,I),cA(v,N,I,W),I=!0;else if(p===null){var pe=v.stateNode,Ce=v.memoizedProps;pe.props=Ce;var Ue=pe.context,gt=N.contextType;typeof gt=="object"&&gt!==null?gt=bi(gt):(gt=vs(N)?qf:po.current,gt=hp(v,gt));var Lt=N.getDerivedStateFromProps,zt=typeof Lt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";zt||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Ce!==I||Ue!==gt)&&qM(v,pe,I,gt),Mc=!1;var Ft=v.memoizedState;pe.state=Ft,bu(v,I,pe,W),Ue=v.memoizedState,Ce!==I||Ft!==Ue||gs.current||Mc?(typeof Lt=="function"&&(lA(v,N,Lt,I),Ue=v.memoizedState),(Ce=Mc||BM(v,N,Ce,I,Ft,Ue,gt))?(zt||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(v.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=I,v.memoizedState=Ue),pe.props=I,pe.state=Ue,pe.context=gt,I=Ce):(typeof pe.componentDidMount=="function"&&(v.flags|=4194308),I=!1)}else{pe=v.stateNode,My(p,v),Ce=v.memoizedProps,gt=v.type===v.elementType?Ce:ku(v.type,Ce),pe.props=gt,zt=v.pendingProps,Ft=pe.context,Ue=N.contextType,typeof Ue=="object"&&Ue!==null?Ue=bi(Ue):(Ue=vs(N)?qf:po.current,Ue=hp(v,Ue));var gr=N.getDerivedStateFromProps;(Lt=typeof gr=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Ce!==zt||Ft!==Ue)&&qM(v,pe,I,Ue),Mc=!1,Ft=v.memoizedState,pe.state=Ft,bu(v,I,pe,W);var Sr=v.memoizedState;Ce!==zt||Ft!==Sr||gs.current||Mc?(typeof gr=="function"&&(lA(v,N,gr,I),Sr=v.memoizedState),(gt=Mc||BM(v,N,gt,I,Ft,Sr,Ue)||!1)?(Lt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(I,Sr,Ue),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(I,Sr,Ue)),typeof pe.componentDidUpdate=="function"&&(v.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Ce===p.memoizedProps&&Ft===p.memoizedState||(v.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Ce===p.memoizedProps&&Ft===p.memoizedState||(v.flags|=1024),v.memoizedProps=I,v.memoizedState=Sr),pe.props=I,pe.state=Sr,pe.context=Ue,I=gt):(typeof pe.componentDidUpdate!="function"||Ce===p.memoizedProps&&Ft===p.memoizedState||(v.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Ce===p.memoizedProps&&Ft===p.memoizedState||(v.flags|=1024),I=!1)}return hA(p,v,N,I,ee,W)}function hA(p,v,N,I,W,ee){JM(p,v);var pe=(v.flags&128)!==0;if(!I&&!pe)return W&&g_(v,N,!1),Gf(p,v,ee);I=v.stateNode,gse.current=v;var Ce=pe&&typeof N.getDerivedStateFromError!="function"?null:I.render();return v.flags|=1,p!==null&&pe?(v.child=Ri(v,p.child,null,ee),v.child=Ri(v,null,Ce,ee)):el(p,v,Ce,ee),v.memoizedState=I.state,W&&g_(v,N,!0),v.child}function e7(p){var v=p.stateNode;v.pendingContext?m_(p,v.pendingContext,v.pendingContext!==v.context):v.context&&m_(p,v.context,!1),gp(p,v.containerInfo)}function t7(p,v,N,I,W){return mn(),ra(W),v.flags|=256,el(p,v,N,I),v.child}var pA={dehydrated:null,treeContext:null,retryLane:0};function mA(p){return{baseLanes:p,cachePool:null,transitions:null}}function r7(p,v,N){var I=v.pendingProps,W=ka.current,ee=!1,pe=(v.flags&128)!==0,Ce;if((Ce=pe)||(Ce=p!==null&&p.memoizedState===null?!1:(W&2)!==0),Ce?(ee=!0,v.flags&=-129):(p===null||p.memoizedState!==null)&&(W|=1),sa(ka,W&1),p===null)return ir(v),p=v.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((v.mode&1)===0?v.lanes=1:p.data==="$!"?v.lanes=8:v.lanes=1073741824,null):(pe=I.children,p=I.fallback,ee?(I=v.mode,ee=v.child,pe={mode:"hidden",children:pe},(I&1)===0&&ee!==null?(ee.childLanes=0,ee.pendingProps=pe):ee=L_(pe,I,0,null),p=m0(p,I,N,null),ee.return=v,p.return=v,ee.sibling=p,v.child=ee,v.child.memoizedState=mA(N),v.memoizedState=pA,p):gA(v,pe));if(W=p.memoizedState,W!==null&&(Ce=W.dehydrated,Ce!==null))return vse(p,v,pe,I,Ce,W,N);if(ee){ee=I.fallback,pe=v.mode,W=p.child,Ce=W.sibling;var Ue={mode:"hidden",children:I.children};return(pe&1)===0&&v.child!==W?(I=v.child,I.childLanes=0,I.pendingProps=Ue,v.deletions=null):(I=Np(W,Ue),I.subtreeFlags=W.subtreeFlags&14680064),Ce!==null?ee=Np(Ce,ee):(ee=m0(ee,pe,N,null),ee.flags|=2),ee.return=v,I.return=v,I.sibling=ee,v.child=I,I=ee,ee=v.child,pe=p.child.memoizedState,pe=pe===null?mA(N):{baseLanes:pe.baseLanes|N,cachePool:null,transitions:pe.transitions},ee.memoizedState=pe,ee.childLanes=p.childLanes&~N,v.memoizedState=pA,I}return ee=p.child,p=ee.sibling,I=Np(ee,{mode:"visible",children:I.children}),(v.mode&1)===0&&(I.lanes=N),I.return=v,I.sibling=null,p!==null&&(N=v.deletions,N===null?(v.deletions=[p],v.flags|=16):N.push(p)),v.child=I,v.memoizedState=null,I}function gA(p,v){return v=L_({mode:"visible",children:v},p.mode,0,null),v.return=p,p.child=v}function A_(p,v,N,I){return I!==null&&ra(I),Ri(v,p.child,null,N),p=gA(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function vse(p,v,N,I,W,ee,pe){if(N)return v.flags&256?(v.flags&=-257,I=uA(Error(r(422))),A_(p,v,pe,I)):v.memoizedState!==null?(v.child=p.child,v.flags|=128,null):(ee=I.fallback,W=v.mode,I=L_({mode:"visible",children:I.children},W,0,null),ee=m0(ee,W,pe,null),ee.flags|=2,I.return=v,ee.return=v,I.sibling=ee,v.child=I,(v.mode&1)!==0&&Ri(v,p.child,null,pe),v.child.memoizedState=mA(pe),v.memoizedState=pA,ee);if((v.mode&1)===0)return A_(p,v,pe,null);if(W.data==="$!"){if(I=W.nextSibling&&W.nextSibling.dataset,I)var Ce=I.dgst;return I=Ce,ee=Error(r(419)),I=uA(ee,I,void 0),A_(p,v,pe,I)}if(Ce=(pe&p.childLanes)!==0,kl||Ce){if(I=To,I!==null){switch(pe&-pe){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}W=(W&(I.suspendedLanes|pe))!==0?0:W,W!==0&&W!==ee.retryLane&&(ee.retryLane=W,Gn(p,W),Pu(I,p,W,-1))}return DA(),I=uA(Error(r(421))),A_(p,v,pe,I)}return W.data==="$?"?(v.flags|=128,v.child=p.child,v=Tse.bind(null,p),W._reactRetry=v,null):(p=ee.treeContext,kt=Go(W.nextSibling),We=v,Nt=!0,Ct=null,p!==null&&(we[Ne++]=nt,we[Ne++]=at,we[Ne++]=Be,nt=p.id,at=p.overflow,Be=v),v=gA(v,I.children),v.flags|=4096,v)}function n7(p,v,N){p.lanes|=v;var I=p.alternate;I!==null&&(I.lanes|=v),bl(p.return,v,N)}function vA(p,v,N,I,W){var ee=p.memoizedState;ee===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:I,tail:N,tailMode:W}:(ee.isBackwards=v,ee.rendering=null,ee.renderingStartTime=0,ee.last=I,ee.tail=N,ee.tailMode=W)}function a7(p,v,N){var I=v.pendingProps,W=I.revealOrder,ee=I.tail;if(el(p,v,I.children,N),I=ka.current,(I&2)!==0)I=I&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&n7(p,N,v);else if(p.tag===19)n7(p,N,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}I&=1}if(sa(ka,I),(v.mode&1)===0)v.memoizedState=null;else switch(W){case"forwards":for(N=v.child,W=null;N!==null;)p=N.alternate,p!==null&&Zl(p)===null&&(W=N),N=N.sibling;N=W,N===null?(W=v.child,v.child=null):(W=N.sibling,N.sibling=null),vA(v,!1,W,N,ee);break;case"backwards":for(N=null,W=v.child,v.child=null;W!==null;){if(p=W.alternate,p!==null&&Zl(p)===null){v.child=W;break}p=W.sibling,W.sibling=N,N=W,W=p}vA(v,!0,N,null,ee);break;case"together":vA(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function N_(p,v){(v.mode&1)===0&&p!==null&&(p.alternate=null,v.alternate=null,v.flags|=2)}function Gf(p,v,N){if(p!==null&&(v.dependencies=p.dependencies),d0|=v.lanes,(N&v.childLanes)===0)return null;if(p!==null&&v.child!==p.child)throw Error(r(153));if(v.child!==null){for(p=v.child,N=Np(p,p.pendingProps),v.child=N,N.return=v;p.sibling!==null;)p=p.sibling,N=N.sibling=Np(p,p.pendingProps),N.return=v;N.sibling=null}return v.child}function yse(p,v,N){switch(v.tag){case 3:e7(v),mn();break;case 5:v_(v);break;case 1:vs(v.type)&&zf(v);break;case 4:gp(v,v.stateNode.containerInfo);break;case 10:var I=v.type._context,W=v.memoizedProps.value;sa(Co,I._currentValue),I._currentValue=W;break;case 13:if(I=v.memoizedState,I!==null)return I.dehydrated!==null?(sa(ka,ka.current&1),v.flags|=128,null):(N&v.child.childLanes)!==0?r7(p,v,N):(sa(ka,ka.current&1),p=Gf(p,v,N),p!==null?p.sibling:null);sa(ka,ka.current&1);break;case 19:if(I=(N&v.childLanes)!==0,(p.flags&128)!==0){if(I)return a7(p,v,N);v.flags|=128}if(W=v.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),sa(ka,ka.current),I)break;return null;case 22:case 23:return v.lanes=0,ZM(p,v,N)}return Gf(p,v,N)}var i7,yA,o7,s7;i7=function(p,v){for(var N=v.child;N!==null;){if(N.tag===5||N.tag===6)p.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===v)break;for(;N.sibling===null;){if(N.return===null||N.return===v)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},yA=function(){},o7=function(p,v,N,I){var W=p.memoizedProps;if(W!==I){p=v.stateNode,Su(Zs.current);var ee=null;switch(N){case"input":W=Re(p,W),I=Re(p,I),ee=[];break;case"select":W=G({},W,{value:void 0}),I=G({},I,{value:void 0}),ee=[];break;case"textarea":W=_e(p,W),I=_e(p,I),ee=[];break;default:typeof W.onClick!="function"&&typeof I.onClick=="function"&&(p.onclick=up)}Tr(N,I);var pe;N=null;for(gt in W)if(!I.hasOwnProperty(gt)&&W.hasOwnProperty(gt)&&W[gt]!=null)if(gt==="style"){var Ce=W[gt];for(pe in Ce)Ce.hasOwnProperty(pe)&&(N||(N={}),N[pe]="")}else gt!=="dangerouslySetInnerHTML"&&gt!=="children"&&gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(a.hasOwnProperty(gt)?ee||(ee=[]):(ee=ee||[]).push(gt,null));for(gt in I){var Ue=I[gt];if(Ce=W!=null?W[gt]:void 0,I.hasOwnProperty(gt)&&Ue!==Ce&&(Ue!=null||Ce!=null))if(gt==="style")if(Ce){for(pe in Ce)!Ce.hasOwnProperty(pe)||Ue&&Ue.hasOwnProperty(pe)||(N||(N={}),N[pe]="");for(pe in Ue)Ue.hasOwnProperty(pe)&&Ce[pe]!==Ue[pe]&&(N||(N={}),N[pe]=Ue[pe])}else N||(ee||(ee=[]),ee.push(gt,N)),N=Ue;else gt==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ce=Ce?Ce.__html:void 0,Ue!=null&&Ce!==Ue&&(ee=ee||[]).push(gt,Ue)):gt==="children"?typeof Ue!="string"&&typeof Ue!="number"||(ee=ee||[]).push(gt,""+Ue):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&(a.hasOwnProperty(gt)?(Ue!=null&&gt==="onScroll"&&va("scroll",p),ee||Ce===Ue||(ee=[])):(ee=ee||[]).push(gt,Ue))}N&&(ee=ee||[]).push("style",N);var gt=ee;(v.updateQueue=gt)&&(v.flags|=4)}},s7=function(p,v,N,I){N!==I&&(v.flags|=4)};function Uy(p,v){if(!Nt)switch(p.tailMode){case"hidden":v=p.tail;for(var N=null;v!==null;)v.alternate!==null&&(N=v),v=v.sibling;N===null?p.tail=null:N.sibling=null;break;case"collapsed":N=p.tail;for(var I=null;N!==null;)N.alternate!==null&&(I=N),N=N.sibling;I===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function xs(p){var v=p.alternate!==null&&p.alternate.child===p.child,N=0,I=0;if(v)for(var W=p.child;W!==null;)N|=W.lanes|W.childLanes,I|=W.subtreeFlags&14680064,I|=W.flags&14680064,W.return=p,W=W.sibling;else for(W=p.child;W!==null;)N|=W.lanes|W.childLanes,I|=W.subtreeFlags,I|=W.flags,W.return=p,W=W.sibling;return p.subtreeFlags|=I,p.childLanes=N,v}function xse(p,v,N){var I=v.pendingProps;switch(ze(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(v),null;case 1:return vs(v.type)&&Zg(),xs(v),null;case 3:return I=v.stateNode,Fc(),ta(gs),ta(po),jy(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(p===null||p.child===null)&&(jn(v)?v.flags|=4:p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,Ct!==null&&(PA(Ct),Ct=null))),yA(p,v),xs(v),null;case 5:Fy(v);var W=Su(Dd.current);if(N=v.type,p!==null&&v.stateNode!=null)o7(p,v,N,I,W),p.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!I){if(v.stateNode===null)throw Error(r(166));return xs(v),null}if(p=Su(Zs.current),jn(v)){I=v.stateNode,N=v.type;var ee=v.memoizedProps;switch(I[Rc]=v,I[dp]=ee,p=(v.mode&1)!==0,N){case"dialog":va("cancel",I),va("close",I);break;case"iframe":case"object":case"embed":va("load",I);break;case"video":case"audio":for(W=0;W<Cd.length;W++)va(Cd[W],I);break;case"source":va("error",I);break;case"img":case"image":case"link":va("error",I),va("load",I);break;case"details":va("toggle",I);break;case"input":Pe(I,ee),va("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!ee.multiple},va("invalid",I);break;case"textarea":Te(I,ee),va("invalid",I)}Tr(N,ee),W=null;for(var pe in ee)if(ee.hasOwnProperty(pe)){var Ce=ee[pe];pe==="children"?typeof Ce=="string"?I.textContent!==Ce&&(ee.suppressHydrationWarning!==!0&&Xg(I.textContent,Ce,p),W=["children",Ce]):typeof Ce=="number"&&I.textContent!==""+Ce&&(ee.suppressHydrationWarning!==!0&&Xg(I.textContent,Ce,p),W=["children",""+Ce]):a.hasOwnProperty(pe)&&Ce!=null&&pe==="onScroll"&&va("scroll",I)}switch(N){case"input":de(I),Qe(I,ee,!0);break;case"textarea":de(I),yt(I);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(I.onclick=up)}I=W,v.updateQueue=I,I!==null&&(v.flags|=4)}else{pe=W.nodeType===9?W:W.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=vt(N)),p==="http://www.w3.org/1999/xhtml"?N==="script"?(p=pe.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof I.is=="string"?p=pe.createElement(N,{is:I.is}):(p=pe.createElement(N),N==="select"&&(pe=p,I.multiple?pe.multiple=!0:I.size&&(pe.size=I.size))):p=pe.createElementNS(p,N),p[Rc]=v,p[dp]=I,i7(p,v,!1,!1),v.stateNode=p;e:{switch(pe=ha(N,I),N){case"dialog":va("cancel",p),va("close",p),W=I;break;case"iframe":case"object":case"embed":va("load",p),W=I;break;case"video":case"audio":for(W=0;W<Cd.length;W++)va(Cd[W],p);W=I;break;case"source":va("error",p),W=I;break;case"img":case"image":case"link":va("error",p),va("load",p),W=I;break;case"details":va("toggle",p),W=I;break;case"input":Pe(p,I),W=Re(p,I),va("invalid",p);break;case"option":W=I;break;case"select":p._wrapperState={wasMultiple:!!I.multiple},W=G({},I,{value:void 0}),va("invalid",p);break;case"textarea":Te(p,I),W=_e(p,I),va("invalid",p);break;default:W=I}Tr(N,W),Ce=W;for(ee in Ce)if(Ce.hasOwnProperty(ee)){var Ue=Ce[ee];ee==="style"?dr(p,Ue):ee==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ue!=null&&Ze(p,Ue)):ee==="children"?typeof Ue=="string"?(N!=="textarea"||Ue!=="")&&_t(p,Ue):typeof Ue=="number"&&_t(p,""+Ue):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?Ue!=null&&ee==="onScroll"&&va("scroll",p):Ue!=null&&S(p,ee,Ue,pe))}switch(N){case"input":de(p),Qe(p,I,!1);break;case"textarea":de(p),yt(p);break;case"option":I.value!=null&&p.setAttribute("value",""+ie(I.value));break;case"select":p.multiple=!!I.multiple,ee=I.value,ee!=null?ft(p,!!I.multiple,ee,!1):I.defaultValue!=null&&ft(p,!!I.multiple,I.defaultValue,!0);break;default:typeof W.onClick=="function"&&(p.onclick=up)}switch(N){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(v.flags|=4)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return xs(v),null;case 6:if(p&&v.stateNode!=null)s7(p,v,p.memoizedProps,I);else{if(typeof I!="string"&&v.stateNode===null)throw Error(r(166));if(N=Su(Dd.current),Su(Zs.current),jn(v)){if(I=v.stateNode,N=v.memoizedProps,I[Rc]=v,(ee=I.nodeValue!==N)&&(p=We,p!==null))switch(p.tag){case 3:Xg(I.nodeValue,N,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Xg(I.nodeValue,N,(p.mode&1)!==0)}ee&&(v.flags|=4)}else I=(N.nodeType===9?N:N.ownerDocument).createTextNode(I),I[Rc]=v,v.stateNode=I}return xs(v),null;case 13:if(ta(ka),I=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Nt&&kt!==null&&(v.mode&1)!==0&&(v.flags&128)===0)In(),mn(),v.flags|=98560,ee=!1;else if(ee=jn(v),I!==null&&I.dehydrated!==null){if(p===null){if(!ee)throw Error(r(318));if(ee=v.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(r(317));ee[Rc]=v}else mn(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;xs(v),ee=!1}else Ct!==null&&(PA(Ct),Ct=null),ee=!0;if(!ee)return v.flags&65536?v:null}return(v.flags&128)!==0?(v.lanes=N,v):(I=I!==null,I!==(p!==null&&p.memoizedState!==null)&&I&&(v.child.flags|=8192,(v.mode&1)!==0&&(p===null||(ka.current&1)!==0?go===0&&(go=3):DA())),v.updateQueue!==null&&(v.flags|=4),xs(v),null);case 4:return Fc(),yA(p,v),p===null&&jf(v.stateNode.containerInfo),xs(v),null;case 10:return ys(v.type._context),xs(v),null;case 17:return vs(v.type)&&Zg(),xs(v),null;case 19:if(ta(ka),ee=v.memoizedState,ee===null)return xs(v),null;if(I=(v.flags&128)!==0,pe=ee.rendering,pe===null)if(I)Uy(ee,!1);else{if(go!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(pe=Zl(p),pe!==null){for(v.flags|=128,Uy(ee,!1),I=pe.updateQueue,I!==null&&(v.updateQueue=I,v.flags|=4),v.subtreeFlags=0,I=N,N=v.child;N!==null;)ee=N,p=I,ee.flags&=14680066,pe=ee.alternate,pe===null?(ee.childLanes=0,ee.lanes=p,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=pe.childLanes,ee.lanes=pe.lanes,ee.child=pe.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=pe.memoizedProps,ee.memoizedState=pe.memoizedState,ee.updateQueue=pe.updateQueue,ee.type=pe.type,p=pe.dependencies,ee.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),N=N.sibling;return sa(ka,ka.current&1|2),v.child}p=p.sibling}ee.tail!==null&&jt()>dv&&(v.flags|=128,I=!0,Uy(ee,!1),v.lanes=4194304)}else{if(!I)if(p=Zl(pe),p!==null){if(v.flags|=128,I=!0,N=p.updateQueue,N!==null&&(v.updateQueue=N,v.flags|=4),Uy(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!pe.alternate&&!Nt)return xs(v),null}else 2*jt()-ee.renderingStartTime>dv&&N!==1073741824&&(v.flags|=128,I=!0,Uy(ee,!1),v.lanes=4194304);ee.isBackwards?(pe.sibling=v.child,v.child=pe):(N=ee.last,N!==null?N.sibling=pe:v.child=pe,ee.last=pe)}return ee.tail!==null?(v=ee.tail,ee.rendering=v,ee.tail=v.sibling,ee.renderingStartTime=jt(),v.sibling=null,N=ka.current,sa(ka,I?N&1|2:N&1),v):(xs(v),null);case 22:case 23:return OA(),I=v.memoizedState!==null,p!==null&&p.memoizedState!==null!==I&&(v.flags|=8192),I&&(v.mode&1)!==0?(ec&1073741824)!==0&&(xs(v),v.subtreeFlags&6&&(v.flags|=8192)):xs(v),null;case 24:return null;case 25:return null}throw Error(r(156,v.tag))}function wse(p,v){switch(ze(v),v.tag){case 1:return vs(v.type)&&Zg(),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Fc(),ta(gs),ta(po),jy(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 5:return Fy(v),null;case 13:if(ta(ka),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(r(340));mn()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return ta(ka),null;case 4:return Fc(),null;case 10:return ys(v.type._context),null;case 22:case 23:return OA(),null;case 24:return null;default:return null}}var k_=!1,ws=!1,_se=typeof WeakSet=="function"?WeakSet:Set,wr=null;function cv(p,v){var N=p.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(I){Ai(p,v,I)}else N.current=null}function xA(p,v,N){try{N()}catch(I){Ai(p,v,I)}}var l7=!1;function bse(p,v){if(i0=Vh,p=Jm(),Rf(p)){if("selectionStart"in p)var N={start:p.selectionStart,end:p.selectionEnd};else e:{N=(N=p.ownerDocument)&&N.defaultView||window;var I=N.getSelection&&N.getSelection();if(I&&I.rangeCount!==0){N=I.anchorNode;var W=I.anchorOffset,ee=I.focusNode;I=I.focusOffset;try{N.nodeType,ee.nodeType}catch{N=null;break e}var pe=0,Ce=-1,Ue=-1,gt=0,Lt=0,zt=p,Ft=null;t:for(;;){for(var gr;zt!==N||W!==0&&zt.nodeType!==3||(Ce=pe+W),zt!==ee||I!==0&&zt.nodeType!==3||(Ue=pe+I),zt.nodeType===3&&(pe+=zt.nodeValue.length),(gr=zt.firstChild)!==null;)Ft=zt,zt=gr;for(;;){if(zt===p)break t;if(Ft===N&&++gt===W&&(Ce=pe),Ft===ee&&++Lt===I&&(Ue=pe),(gr=zt.nextSibling)!==null)break;zt=Ft,Ft=zt.parentNode}zt=gr}N=Ce===-1||Ue===-1?null:{start:Ce,end:Ue}}else N=null}N=N||{start:0,end:0}}else N=null;for(Bf={focusedElem:p,selectionRange:N},Vh=!1,wr=v;wr!==null;)if(v=wr,p=v.child,(v.subtreeFlags&1028)!==0&&p!==null)p.return=v,wr=p;else for(;wr!==null;){v=wr;try{var Sr=v.alternate;if((v.flags&1024)!==0)switch(v.tag){case 0:case 11:case 15:break;case 1:if(Sr!==null){var Nr=Sr.memoizedProps,Li=Sr.memoizedState,ot=v.stateNode,Ge=ot.getSnapshotBeforeUpdate(v.elementType===v.type?Nr:ku(v.type,Nr),Li);ot.__reactInternalSnapshotBeforeUpdate=Ge}break;case 3:var dt=v.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Zt){Ai(v,v.return,Zt)}if(p=v.sibling,p!==null){p.return=v.return,wr=p;break}wr=v.return}return Sr=l7,l7=!1,Sr}function qy(p,v,N){var I=v.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var W=I=I.next;do{if((W.tag&p)===p){var ee=W.destroy;W.destroy=void 0,ee!==void 0&&xA(v,N,ee)}W=W.next}while(W!==I)}}function E_(p,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var N=v=v.next;do{if((N.tag&p)===p){var I=N.create;N.destroy=I()}N=N.next}while(N!==v)}}function wA(p){var v=p.ref;if(v!==null){var N=p.stateNode;switch(p.tag){case 5:p=N;break;default:p=N}typeof v=="function"?v(p):v.current=p}}function c7(p){var v=p.alternate;v!==null&&(p.alternate=null,c7(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&(delete v[Rc],delete v[dp],delete v[ms],delete v[aA],delete v[iA])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function u7(p){return p.tag===5||p.tag===3||p.tag===4}function d7(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||u7(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function _A(p,v,N){var I=p.tag;if(I===5||I===6)p=p.stateNode,v?N.nodeType===8?N.parentNode.insertBefore(p,v):N.insertBefore(p,v):(N.nodeType===8?(v=N.parentNode,v.insertBefore(p,N)):(v=N,v.appendChild(p)),N=N._reactRootContainer,N!=null||v.onclick!==null||(v.onclick=up));else if(I!==4&&(p=p.child,p!==null))for(_A(p,v,N),p=p.sibling;p!==null;)_A(p,v,N),p=p.sibling}function bA(p,v,N){var I=p.tag;if(I===5||I===6)p=p.stateNode,v?N.insertBefore(p,v):N.appendChild(p);else if(I!==4&&(p=p.child,p!==null))for(bA(p,v,N),p=p.sibling;p!==null;)bA(p,v,N),p=p.sibling}var Yo=null,Eu=!1;function wp(p,v,N){for(N=N.child;N!==null;)f7(p,v,N),N=N.sibling}function f7(p,v,N){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(Vs,N)}catch{}switch(N.tag){case 5:ws||cv(N,v);case 6:var I=Yo,W=Eu;Yo=null,wp(p,v,N),Yo=I,Eu=W,Yo!==null&&(Eu?(p=Yo,N=N.stateNode,p.nodeType===8?p.parentNode.removeChild(N):p.removeChild(N)):Yo.removeChild(N.stateNode));break;case 18:Yo!==null&&(Eu?(p=Yo,N=N.stateNode,p.nodeType===8?Dy(p.parentNode,N):p.nodeType===1&&Dy(p,N),Hl(p)):Dy(Yo,N.stateNode));break;case 4:I=Yo,W=Eu,Yo=N.stateNode.containerInfo,Eu=!0,wp(p,v,N),Yo=I,Eu=W;break;case 0:case 11:case 14:case 15:if(!ws&&(I=N.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){W=I=I.next;do{var ee=W,pe=ee.destroy;ee=ee.tag,pe!==void 0&&((ee&2)!==0||(ee&4)!==0)&&xA(N,v,pe),W=W.next}while(W!==I)}wp(p,v,N);break;case 1:if(!ws&&(cv(N,v),I=N.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=N.memoizedProps,I.state=N.memoizedState,I.componentWillUnmount()}catch(Ce){Ai(N,v,Ce)}wp(p,v,N);break;case 21:wp(p,v,N);break;case 22:N.mode&1?(ws=(I=ws)||N.memoizedState!==null,wp(p,v,N),ws=I):wp(p,v,N);break;default:wp(p,v,N)}}function h7(p){var v=p.updateQueue;if(v!==null){p.updateQueue=null;var N=p.stateNode;N===null&&(N=p.stateNode=new _se),v.forEach(function(I){var W=Ose.bind(null,p,I);N.has(I)||(N.add(I),I.then(W,W))})}}function Cu(p,v){var N=v.deletions;if(N!==null)for(var I=0;I<N.length;I++){var W=N[I];try{var ee=p,pe=v,Ce=pe;e:for(;Ce!==null;){switch(Ce.tag){case 5:Yo=Ce.stateNode,Eu=!1;break e;case 3:Yo=Ce.stateNode.containerInfo,Eu=!0;break e;case 4:Yo=Ce.stateNode.containerInfo,Eu=!0;break e}Ce=Ce.return}if(Yo===null)throw Error(r(160));f7(ee,pe,W),Yo=null,Eu=!1;var Ue=W.alternate;Ue!==null&&(Ue.return=null),W.return=null}catch(gt){Ai(W,v,gt)}}if(v.subtreeFlags&12854)for(v=v.child;v!==null;)p7(v,p),v=v.sibling}function p7(p,v){var N=p.alternate,I=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Cu(v,p),Rd(p),I&4){try{qy(3,p,p.return),E_(3,p)}catch(Nr){Ai(p,p.return,Nr)}try{qy(5,p,p.return)}catch(Nr){Ai(p,p.return,Nr)}}break;case 1:Cu(v,p),Rd(p),I&512&&N!==null&&cv(N,N.return);break;case 5:if(Cu(v,p),Rd(p),I&512&&N!==null&&cv(N,N.return),p.flags&32){var W=p.stateNode;try{_t(W,"")}catch(Nr){Ai(p,p.return,Nr)}}if(I&4&&(W=p.stateNode,W!=null)){var ee=p.memoizedProps,pe=N!==null?N.memoizedProps:ee,Ce=p.type,Ue=p.updateQueue;if(p.updateQueue=null,Ue!==null)try{Ce==="input"&&ee.type==="radio"&&ee.name!=null&&ge(W,ee),ha(Ce,pe);var gt=ha(Ce,ee);for(pe=0;pe<Ue.length;pe+=2){var Lt=Ue[pe],zt=Ue[pe+1];Lt==="style"?dr(W,zt):Lt==="dangerouslySetInnerHTML"?Ze(W,zt):Lt==="children"?_t(W,zt):S(W,Lt,zt,gt)}switch(Ce){case"input":Ye(W,ee);break;case"textarea":qe(W,ee);break;case"select":var Ft=W._wrapperState.wasMultiple;W._wrapperState.wasMultiple=!!ee.multiple;var gr=ee.value;gr!=null?ft(W,!!ee.multiple,gr,!1):Ft!==!!ee.multiple&&(ee.defaultValue!=null?ft(W,!!ee.multiple,ee.defaultValue,!0):ft(W,!!ee.multiple,ee.multiple?[]:"",!1))}W[dp]=ee}catch(Nr){Ai(p,p.return,Nr)}}break;case 6:if(Cu(v,p),Rd(p),I&4){if(p.stateNode===null)throw Error(r(162));W=p.stateNode,ee=p.memoizedProps;try{W.nodeValue=ee}catch(Nr){Ai(p,p.return,Nr)}}break;case 3:if(Cu(v,p),Rd(p),I&4&&N!==null&&N.memoizedState.isDehydrated)try{Hl(v.containerInfo)}catch(Nr){Ai(p,p.return,Nr)}break;case 4:Cu(v,p),Rd(p);break;case 13:Cu(v,p),Rd(p),W=p.child,W.flags&8192&&(ee=W.memoizedState!==null,W.stateNode.isHidden=ee,!ee||W.alternate!==null&&W.alternate.memoizedState!==null||(NA=jt())),I&4&&h7(p);break;case 22:if(Lt=N!==null&&N.memoizedState!==null,p.mode&1?(ws=(gt=ws)||Lt,Cu(v,p),ws=gt):Cu(v,p),Rd(p),I&8192){if(gt=p.memoizedState!==null,(p.stateNode.isHidden=gt)&&!Lt&&(p.mode&1)!==0)for(wr=p,Lt=p.child;Lt!==null;){for(zt=wr=Lt;wr!==null;){switch(Ft=wr,gr=Ft.child,Ft.tag){case 0:case 11:case 14:case 15:qy(4,Ft,Ft.return);break;case 1:cv(Ft,Ft.return);var Sr=Ft.stateNode;if(typeof Sr.componentWillUnmount=="function"){I=Ft,N=Ft.return;try{v=I,Sr.props=v.memoizedProps,Sr.state=v.memoizedState,Sr.componentWillUnmount()}catch(Nr){Ai(I,N,Nr)}}break;case 5:cv(Ft,Ft.return);break;case 22:if(Ft.memoizedState!==null){v7(zt);continue}}gr!==null?(gr.return=Ft,wr=gr):v7(zt)}Lt=Lt.sibling}e:for(Lt=null,zt=p;;){if(zt.tag===5){if(Lt===null){Lt=zt;try{W=zt.stateNode,gt?(ee=W.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(Ce=zt.stateNode,Ue=zt.memoizedProps.style,pe=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null,Ce.style.display=Bt("display",pe))}catch(Nr){Ai(p,p.return,Nr)}}}else if(zt.tag===6){if(Lt===null)try{zt.stateNode.nodeValue=gt?"":zt.memoizedProps}catch(Nr){Ai(p,p.return,Nr)}}else if((zt.tag!==22&&zt.tag!==23||zt.memoizedState===null||zt===p)&&zt.child!==null){zt.child.return=zt,zt=zt.child;continue}if(zt===p)break e;for(;zt.sibling===null;){if(zt.return===null||zt.return===p)break e;Lt===zt&&(Lt=null),zt=zt.return}Lt===zt&&(Lt=null),zt.sibling.return=zt.return,zt=zt.sibling}}break;case 19:Cu(v,p),Rd(p),I&4&&h7(p);break;case 21:break;default:Cu(v,p),Rd(p)}}function Rd(p){var v=p.flags;if(v&2){try{e:{for(var N=p.return;N!==null;){if(u7(N)){var I=N;break e}N=N.return}throw Error(r(160))}switch(I.tag){case 5:var W=I.stateNode;I.flags&32&&(_t(W,""),I.flags&=-33);var ee=d7(p);bA(p,ee,W);break;case 3:case 4:var pe=I.stateNode.containerInfo,Ce=d7(p);_A(p,Ce,pe);break;default:throw Error(r(161))}}catch(Ue){Ai(p,p.return,Ue)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function Sse(p,v,N){wr=p,m7(p)}function m7(p,v,N){for(var I=(p.mode&1)!==0;wr!==null;){var W=wr,ee=W.child;if(W.tag===22&&I){var pe=W.memoizedState!==null||k_;if(!pe){var Ce=W.alternate,Ue=Ce!==null&&Ce.memoizedState!==null||ws;Ce=k_;var gt=ws;if(k_=pe,(ws=Ue)&&!gt)for(wr=W;wr!==null;)pe=wr,Ue=pe.child,pe.tag===22&&pe.memoizedState!==null?y7(W):Ue!==null?(Ue.return=pe,wr=Ue):y7(W);for(;ee!==null;)wr=ee,m7(ee),ee=ee.sibling;wr=W,k_=Ce,ws=gt}g7(p)}else(W.subtreeFlags&8772)!==0&&ee!==null?(ee.return=W,wr=ee):g7(p)}}function g7(p){for(;wr!==null;){var v=wr;if((v.flags&8772)!==0){var N=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:ws||E_(5,v);break;case 1:var I=v.stateNode;if(v.flags&4&&!ws)if(N===null)I.componentDidMount();else{var W=v.elementType===v.type?N.memoizedProps:ku(v.type,N.memoizedProps);I.componentDidUpdate(W,N.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var ee=v.updateQueue;ee!==null&&Vf(v,ee,I);break;case 3:var pe=v.updateQueue;if(pe!==null){if(N=null,v.child!==null)switch(v.child.tag){case 5:N=v.child.stateNode;break;case 1:N=v.child.stateNode}Vf(v,pe,N)}break;case 5:var Ce=v.stateNode;if(N===null&&v.flags&4){N=Ce;var Ue=v.memoizedProps;switch(v.type){case"button":case"input":case"select":case"textarea":Ue.autoFocus&&N.focus();break;case"img":Ue.src&&(N.src=Ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(v.memoizedState===null){var gt=v.alternate;if(gt!==null){var Lt=gt.memoizedState;if(Lt!==null){var zt=Lt.dehydrated;zt!==null&&Hl(zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ws||v.flags&512&&wA(v)}catch(Ft){Ai(v,v.return,Ft)}}if(v===p){wr=null;break}if(N=v.sibling,N!==null){N.return=v.return,wr=N;break}wr=v.return}}function v7(p){for(;wr!==null;){var v=wr;if(v===p){wr=null;break}var N=v.sibling;if(N!==null){N.return=v.return,wr=N;break}wr=v.return}}function y7(p){for(;wr!==null;){var v=wr;try{switch(v.tag){case 0:case 11:case 15:var N=v.return;try{E_(4,v)}catch(Ue){Ai(v,N,Ue)}break;case 1:var I=v.stateNode;if(typeof I.componentDidMount=="function"){var W=v.return;try{I.componentDidMount()}catch(Ue){Ai(v,W,Ue)}}var ee=v.return;try{wA(v)}catch(Ue){Ai(v,ee,Ue)}break;case 5:var pe=v.return;try{wA(v)}catch(Ue){Ai(v,pe,Ue)}}}catch(Ue){Ai(v,v.return,Ue)}if(v===p){wr=null;break}var Ce=v.sibling;if(Ce!==null){Ce.return=v.return,wr=Ce;break}wr=v.return}}var Ase=Math.ceil,C_=C.ReactCurrentDispatcher,SA=C.ReactCurrentOwner,$c=C.ReactCurrentBatchConfig,zn=0,To=null,no=null,Xo=0,ec=0,uv=Xl(0),go=0,zy=null,d0=0,P_=0,AA=0,Wy=null,El=null,NA=0,dv=1/0,Kf=null,T_=!1,kA=null,_p=null,O_=!1,bp=null,D_=0,Vy=0,EA=null,I_=-1,R_=0;function tl(){return(zn&6)!==0?jt():I_!==-1?I_:I_=jt()}function Sp(p){return(p.mode&1)===0?1:(zn&2)!==0&&Xo!==0?Xo&-Xo:la.transition!==null?(R_===0&&(R_=Um()),R_):(p=Un,p!==0||(p=window.event,p=p===void 0?16:Hm(p.type)),p)}function Pu(p,v,N,I){if(50<Vy)throw Vy=0,EA=null,Error(r(185));gd(p,N,I),((zn&2)===0||p!==To)&&(p===To&&((zn&2)===0&&(P_|=N),go===4&&Ap(p,Xo)),Cl(p,I),N===1&&zn===0&&(v.mode&1)===0&&(dv=jt()+500,s0&&ne()))}function Cl(p,v){var N=p.callbackNode;ds(p,v);var I=us(p,p===To?Xo:0);if(I===0)N!==null&&Yt(N),p.callbackNode=null,p.callbackPriority=0;else if(v=I&-I,p.callbackPriority!==v){if(N!=null&&Yt(N),v===1)p.tag===0?H(w7.bind(null,p)):F(w7.bind(null,p)),rA(function(){(zn&6)===0&&ne()}),N=null;else{switch(Uh(I)){case 1:N=Fn;break;case 4:N=Qn;break;case 16:N=Ba;break;case 536870912:N=Sc;break;default:N=Ba}N=C7(N,x7.bind(null,p))}p.callbackPriority=v,p.callbackNode=N}}function x7(p,v){if(I_=-1,R_=0,(zn&6)!==0)throw Error(r(327));var N=p.callbackNode;if(fv()&&p.callbackNode!==N)return null;var I=us(p,p===To?Xo:0);if(I===0)return null;if((I&30)!==0||(I&p.expiredLanes)!==0||v)v=M_(p,I);else{v=I;var W=zn;zn|=2;var ee=b7();(To!==p||Xo!==v)&&(Kf=null,dv=jt()+500,h0(p,v));do try{Ese();break}catch(Ce){_7(p,Ce)}while(!0);mo(),C_.current=ee,zn=W,no!==null?v=0:(To=null,Xo=0,v=go)}if(v!==0){if(v===2&&(W=bf(p),W!==0&&(I=W,v=CA(p,W))),v===1)throw N=zy,h0(p,0),Ap(p,I),Cl(p,jt()),N;if(v===6)Ap(p,I);else{if(W=p.current.alternate,(I&30)===0&&!Nse(W)&&(v=M_(p,I),v===2&&(ee=bf(p),ee!==0&&(I=ee,v=CA(p,ee))),v===1))throw N=zy,h0(p,0),Ap(p,I),Cl(p,jt()),N;switch(p.finishedWork=W,p.finishedLanes=I,v){case 0:case 1:throw Error(r(345));case 2:p0(p,El,Kf);break;case 3:if(Ap(p,I),(I&130023424)===I&&(v=NA+500-jt(),10<v)){if(us(p,0)!==0)break;if(W=p.suspendedLanes,(W&I)!==I){tl(),p.pingedLanes|=p.suspendedLanes&W;break}p.timeoutHandle=Oy(p0.bind(null,p,El,Kf),v);break}p0(p,El,Kf);break;case 4:if(Ap(p,I),(I&4194240)===I)break;for(v=p.eventTimes,W=-1;0<I;){var pe=31-Ua(I);ee=1<<pe,pe=v[pe],pe>W&&(W=pe),I&=~ee}if(I=W,I=jt()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*Ase(I/1960))-I,10<I){p.timeoutHandle=Oy(p0.bind(null,p,El,Kf),I);break}p0(p,El,Kf);break;case 5:p0(p,El,Kf);break;default:throw Error(r(329))}}}return Cl(p,jt()),p.callbackNode===N?x7.bind(null,p):null}function CA(p,v){var N=Wy;return p.current.memoizedState.isDehydrated&&(h0(p,v).flags|=256),p=M_(p,v),p!==2&&(v=El,El=N,v!==null&&PA(v)),p}function PA(p){El===null?El=p:El.push.apply(El,p)}function Nse(p){for(var v=p;;){if(v.flags&16384){var N=v.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var I=0;I<N.length;I++){var W=N[I],ee=W.getSnapshot;W=W.value;try{if(!qn(ee(),W))return!1}catch{return!1}}}if(N=v.child,v.subtreeFlags&16384&&N!==null)N.return=v,v=N;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ap(p,v){for(v&=~AA,v&=~P_,p.suspendedLanes|=v,p.pingedLanes&=~v,p=p.expirationTimes;0<v;){var N=31-Ua(v),I=1<<N;p[N]=-1,v&=~I}}function w7(p){if((zn&6)!==0)throw Error(r(327));fv();var v=us(p,0);if((v&1)===0)return Cl(p,jt()),null;var N=M_(p,v);if(p.tag!==0&&N===2){var I=bf(p);I!==0&&(v=I,N=CA(p,I))}if(N===1)throw N=zy,h0(p,0),Ap(p,v),Cl(p,jt()),N;if(N===6)throw Error(r(345));return p.finishedWork=p.current.alternate,p.finishedLanes=v,p0(p,El,Kf),Cl(p,jt()),null}function TA(p,v){var N=zn;zn|=1;try{return p(v)}finally{zn=N,zn===0&&(dv=jt()+500,s0&&ne())}}function f0(p){bp!==null&&bp.tag===0&&(zn&6)===0&&fv();var v=zn;zn|=1;var N=$c.transition,I=Un;try{if($c.transition=null,Un=1,p)return p()}finally{Un=I,$c.transition=N,zn=v,(zn&6)===0&&ne()}}function OA(){ec=uv.current,ta(uv)}function h0(p,v){p.finishedWork=null,p.finishedLanes=0;var N=p.timeoutHandle;if(N!==-1&&(p.timeoutHandle=-1,h_(N)),no!==null)for(N=no.return;N!==null;){var I=N;switch(ze(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Zg();break;case 3:Fc(),ta(gs),ta(po),jy();break;case 5:Fy(I);break;case 4:Fc();break;case 13:ta(ka);break;case 19:ta(ka);break;case 10:ys(I.type._context);break;case 22:case 23:OA()}N=N.return}if(To=p,no=p=Np(p.current,null),Xo=ec=v,go=0,zy=null,AA=P_=d0=0,El=Wy=null,Xs!==null){for(v=0;v<Xs.length;v++)if(N=Xs[v],I=N.interleaved,I!==null){N.interleaved=null;var W=I.next,ee=N.pending;if(ee!==null){var pe=ee.next;ee.next=W,I.next=pe}N.pending=I}Xs=null}return p}function _7(p,v){do{var N=no;try{if(mo(),Qg.current=b_,vp){for(var I=Da.memoizedState;I!==null;){var W=I.queue;W!==null&&(W.pending=null),I=I.next}vp=!1}if(Lc=0,di=Si=Da=null,Au=!1,yp=0,SA.current=null,N===null||N.return===null){go=1,zy=v,no=null;break}e:{var ee=p,pe=N.return,Ce=N,Ue=v;if(v=Xo,Ce.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var gt=Ue,Lt=Ce,zt=Lt.tag;if((Lt.mode&1)===0&&(zt===0||zt===11||zt===15)){var Ft=Lt.alternate;Ft?(Lt.updateQueue=Ft.updateQueue,Lt.memoizedState=Ft.memoizedState,Lt.lanes=Ft.lanes):(Lt.updateQueue=null,Lt.memoizedState=null)}var gr=HM(pe);if(gr!==null){gr.flags&=-257,GM(gr,pe,Ce,ee,v),gr.mode&1&&VM(ee,gt,v),v=gr,Ue=gt;var Sr=v.updateQueue;if(Sr===null){var Nr=new Set;Nr.add(Ue),v.updateQueue=Nr}else Sr.add(Ue);break e}else{if((v&1)===0){VM(ee,gt,v),DA();break e}Ue=Error(r(426))}}else if(Nt&&Ce.mode&1){var Li=HM(pe);if(Li!==null){(Li.flags&65536)===0&&(Li.flags|=256),GM(Li,pe,Ce,ee,v),ra(lv(Ue,Ce));break e}}ee=Ue=lv(Ue,Ce),go!==4&&(go=2),Wy===null?Wy=[ee]:Wy.push(ee),ee=pe;do{switch(ee.tag){case 3:ee.flags|=65536,v&=-v,ee.lanes|=v;var ot=zM(ee,Ue,v);Nl(ee,ot);break e;case 1:Ce=Ue;var Ge=ee.type,dt=ee.stateNode;if((ee.flags&128)===0&&(typeof Ge.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(_p===null||!_p.has(dt)))){ee.flags|=65536,v&=-v,ee.lanes|=v;var Zt=WM(ee,Ce,v);Nl(ee,Zt);break e}}ee=ee.return}while(ee!==null)}A7(N)}catch(Er){v=Er,no===N&&N!==null&&(no=N=N.return);continue}break}while(!0)}function b7(){var p=C_.current;return C_.current=b_,p===null?b_:p}function DA(){(go===0||go===3||go===2)&&(go=4),To===null||(d0&268435455)===0&&(P_&268435455)===0||Ap(To,Xo)}function M_(p,v){var N=zn;zn|=2;var I=b7();(To!==p||Xo!==v)&&(Kf=null,h0(p,v));do try{kse();break}catch(W){_7(p,W)}while(!0);if(mo(),zn=N,C_.current=I,no!==null)throw Error(r(261));return To=null,Xo=0,go}function kse(){for(;no!==null;)S7(no)}function Ese(){for(;no!==null&&!or();)S7(no)}function S7(p){var v=E7(p.alternate,p,ec);p.memoizedProps=p.pendingProps,v===null?A7(p):no=v,SA.current=null}function A7(p){var v=p;do{var N=v.alternate;if(p=v.return,(v.flags&32768)===0){if(N=xse(N,v,ec),N!==null){no=N;return}}else{if(N=wse(N,v),N!==null){N.flags&=32767,no=N;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{go=6,no=null;return}}if(v=v.sibling,v!==null){no=v;return}no=v=p}while(v!==null);go===0&&(go=5)}function p0(p,v,N){var I=Un,W=$c.transition;try{$c.transition=null,Un=1,Cse(p,v,N,I)}finally{$c.transition=W,Un=I}return null}function Cse(p,v,N,I){do fv();while(bp!==null);if((zn&6)!==0)throw Error(r(327));N=p.finishedWork;var W=p.finishedLanes;if(N===null)return null;if(p.finishedWork=null,p.finishedLanes=0,N===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0;var ee=N.lanes|N.childLanes;if(Ey(p,ee),p===To&&(no=To=null,Xo=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||O_||(O_=!0,C7(Ba,function(){return fv(),null})),ee=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||ee){ee=$c.transition,$c.transition=null;var pe=Un;Un=1;var Ce=zn;zn|=4,SA.current=null,bse(p,N),p7(N,p),Mf(Bf),Vh=!!i0,Bf=i0=null,p.current=N,Sse(N),qt(),zn=Ce,Un=pe,$c.transition=ee}else p.current=N;if(O_&&(O_=!1,bp=p,D_=W),ee=p.pendingLanes,ee===0&&(_p=null),Ac(N.stateNode),Cl(p,jt()),v!==null)for(I=p.onRecoverableError,N=0;N<v.length;N++)W=v[N],I(W.value,{componentStack:W.stack,digest:W.digest});if(T_)throw T_=!1,p=kA,kA=null,p;return(D_&1)!==0&&p.tag!==0&&fv(),ee=p.pendingLanes,(ee&1)!==0?p===EA?Vy++:(Vy=0,EA=p):Vy=0,ne(),null}function fv(){if(bp!==null){var p=Uh(D_),v=$c.transition,N=Un;try{if($c.transition=null,Un=16>p?16:p,bp===null)var I=!1;else{if(p=bp,bp=null,D_=0,(zn&6)!==0)throw Error(r(331));var W=zn;for(zn|=4,wr=p.current;wr!==null;){var ee=wr,pe=ee.child;if((wr.flags&16)!==0){var Ce=ee.deletions;if(Ce!==null){for(var Ue=0;Ue<Ce.length;Ue++){var gt=Ce[Ue];for(wr=gt;wr!==null;){var Lt=wr;switch(Lt.tag){case 0:case 11:case 15:qy(8,Lt,ee)}var zt=Lt.child;if(zt!==null)zt.return=Lt,wr=zt;else for(;wr!==null;){Lt=wr;var Ft=Lt.sibling,gr=Lt.return;if(c7(Lt),Lt===gt){wr=null;break}if(Ft!==null){Ft.return=gr,wr=Ft;break}wr=gr}}}var Sr=ee.alternate;if(Sr!==null){var Nr=Sr.child;if(Nr!==null){Sr.child=null;do{var Li=Nr.sibling;Nr.sibling=null,Nr=Li}while(Nr!==null)}}wr=ee}}if((ee.subtreeFlags&2064)!==0&&pe!==null)pe.return=ee,wr=pe;else e:for(;wr!==null;){if(ee=wr,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:qy(9,ee,ee.return)}var ot=ee.sibling;if(ot!==null){ot.return=ee.return,wr=ot;break e}wr=ee.return}}var Ge=p.current;for(wr=Ge;wr!==null;){pe=wr;var dt=pe.child;if((pe.subtreeFlags&2064)!==0&&dt!==null)dt.return=pe,wr=dt;else e:for(pe=Ge;wr!==null;){if(Ce=wr,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:E_(9,Ce)}}catch(Er){Ai(Ce,Ce.return,Er)}if(Ce===pe){wr=null;break e}var Zt=Ce.sibling;if(Zt!==null){Zt.return=Ce.return,wr=Zt;break e}wr=Ce.return}}if(zn=W,ne(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(Vs,p)}catch{}I=!0}return I}finally{Un=N,$c.transition=v}}return!1}function N7(p,v,N){v=lv(N,v),v=zM(p,v,1),p=Al(p,v,1),v=tl(),p!==null&&(gd(p,1,v),Cl(p,v))}function Ai(p,v,N){if(p.tag===3)N7(p,p,N);else for(;v!==null;){if(v.tag===3){N7(v,p,N);break}else if(v.tag===1){var I=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(_p===null||!_p.has(I))){p=lv(N,p),p=WM(v,p,1),v=Al(v,p,1),p=tl(),v!==null&&(gd(v,1,p),Cl(v,p));break}}v=v.return}}function Pse(p,v,N){var I=p.pingCache;I!==null&&I.delete(v),v=tl(),p.pingedLanes|=p.suspendedLanes&N,To===p&&(Xo&N)===N&&(go===4||go===3&&(Xo&130023424)===Xo&&500>jt()-NA?h0(p,0):AA|=N),Cl(p,v)}function k7(p,v){v===0&&((p.mode&1)===0?v=1:(v=md,md<<=1,(md&130023424)===0&&(md=4194304)));var N=tl();p=Gn(p,v),p!==null&&(gd(p,v,N),Cl(p,N))}function Tse(p){var v=p.memoizedState,N=0;v!==null&&(N=v.retryLane),k7(p,N)}function Ose(p,v){var N=0;switch(p.tag){case 13:var I=p.stateNode,W=p.memoizedState;W!==null&&(N=W.retryLane);break;case 19:I=p.stateNode;break;default:throw Error(r(314))}I!==null&&I.delete(v),k7(p,N)}var E7;E7=function(p,v,N){if(p!==null)if(p.memoizedProps!==v.pendingProps||gs.current)kl=!0;else{if((p.lanes&N)===0&&(v.flags&128)===0)return kl=!1,yse(p,v,N);kl=(p.flags&131072)!==0}else kl=!1,Nt&&(v.flags&1048576)!==0&&Ot(v,ve,v.index);switch(v.lanes=0,v.tag){case 2:var I=v.type;N_(p,v),p=v.pendingProps;var W=hp(v,po.current);Ha(v,N),W=l0(null,v,I,p,W,N);var ee=jc();return v.flags|=1,typeof W=="object"&&W!==null&&typeof W.render=="function"&&W.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,vs(I)?(ee=!0,zf(v)):ee=!1,v.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,Jg(v),W.updater=S_,v.stateNode=W,W._reactInternals=v,cA(v,I,p,N),v=hA(null,v,I,!0,ee,N)):(v.tag=0,Nt&&ee&&St(v),el(null,v,W,N),v=v.child),v;case 16:I=v.elementType;e:{switch(N_(p,v),p=v.pendingProps,W=I._init,I=W(I._payload),v.type=I,W=v.tag=Ise(I),p=ku(I,p),W){case 0:v=fA(null,v,I,p,N);break e;case 1:v=QM(null,v,I,p,N);break e;case 11:v=KM(null,v,I,p,N);break e;case 14:v=YM(null,v,I,ku(I.type,p),N);break e}throw Error(r(306,I,""))}return v;case 0:return I=v.type,W=v.pendingProps,W=v.elementType===I?W:ku(I,W),fA(p,v,I,W,N);case 1:return I=v.type,W=v.pendingProps,W=v.elementType===I?W:ku(I,W),QM(p,v,I,W,N);case 3:e:{if(e7(v),p===null)throw Error(r(387));I=v.pendingProps,ee=v.memoizedState,W=ee.element,My(p,v),bu(v,I,null,N);var pe=v.memoizedState;if(I=pe.element,ee.isDehydrated)if(ee={element:I,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},v.updateQueue.baseState=ee,v.memoizedState=ee,v.flags&256){W=lv(Error(r(423)),v),v=t7(p,v,I,N,W);break e}else if(I!==W){W=lv(Error(r(424)),v),v=t7(p,v,I,N,W);break e}else for(kt=Go(v.stateNode.containerInfo.firstChild),We=v,Nt=!0,Ct=null,N=Hn(v,null,I,N),v.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(mn(),I===W){v=Gf(p,v,N);break e}el(p,v,I,N)}v=v.child}return v;case 5:return v_(v),p===null&&ir(v),I=v.type,W=v.pendingProps,ee=p!==null?p.memoizedProps:null,pe=W.children,Ty(I,W)?pe=null:ee!==null&&Ty(I,ee)&&(v.flags|=32),JM(p,v),el(p,v,pe,N),v.child;case 6:return p===null&&ir(v),null;case 13:return r7(p,v,N);case 4:return gp(v,v.stateNode.containerInfo),I=v.pendingProps,p===null?v.child=Ri(v,null,I,N):el(p,v,I,N),v.child;case 11:return I=v.type,W=v.pendingProps,W=v.elementType===I?W:ku(I,W),KM(p,v,I,W,N);case 7:return el(p,v,v.pendingProps,N),v.child;case 8:return el(p,v,v.pendingProps.children,N),v.child;case 12:return el(p,v,v.pendingProps.children,N),v.child;case 10:e:{if(I=v.type._context,W=v.pendingProps,ee=v.memoizedProps,pe=W.value,sa(Co,I._currentValue),I._currentValue=pe,ee!==null)if(qn(ee.value,pe)){if(ee.children===W.children&&!gs.current){v=Gf(p,v,N);break e}}else for(ee=v.child,ee!==null&&(ee.return=v);ee!==null;){var Ce=ee.dependencies;if(Ce!==null){pe=ee.child;for(var Ue=Ce.firstContext;Ue!==null;){if(Ue.context===I){if(ee.tag===1){Ue=Sl(-1,N&-N),Ue.tag=2;var gt=ee.updateQueue;if(gt!==null){gt=gt.shared;var Lt=gt.pending;Lt===null?Ue.next=Ue:(Ue.next=Lt.next,Lt.next=Ue),gt.pending=Ue}}ee.lanes|=N,Ue=ee.alternate,Ue!==null&&(Ue.lanes|=N),bl(ee.return,N,v),Ce.lanes|=N;break}Ue=Ue.next}}else if(ee.tag===10)pe=ee.type===v.type?null:ee.child;else if(ee.tag===18){if(pe=ee.return,pe===null)throw Error(r(341));pe.lanes|=N,Ce=pe.alternate,Ce!==null&&(Ce.lanes|=N),bl(pe,N,v),pe=ee.sibling}else pe=ee.child;if(pe!==null)pe.return=ee;else for(pe=ee;pe!==null;){if(pe===v){pe=null;break}if(ee=pe.sibling,ee!==null){ee.return=pe.return,pe=ee;break}pe=pe.return}ee=pe}el(p,v,W.children,N),v=v.child}return v;case 9:return W=v.type,I=v.pendingProps.children,Ha(v,N),W=bi(W),I=I(W),v.flags|=1,el(p,v,I,N),v.child;case 14:return I=v.type,W=ku(I,v.pendingProps),W=ku(I.type,W),YM(p,v,I,W,N);case 15:return XM(p,v,v.type,v.pendingProps,N);case 17:return I=v.type,W=v.pendingProps,W=v.elementType===I?W:ku(I,W),N_(p,v),v.tag=1,vs(I)?(p=!0,zf(v)):p=!1,Ha(v,N),UM(v,I,W),cA(v,I,W,N),hA(null,v,I,!0,p,N);case 19:return a7(p,v,N);case 22:return ZM(p,v,N)}throw Error(r(156,v.tag))};function C7(p,v){return Dt(p,v)}function Dse(p,v,N,I){this.tag=p,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(p,v,N,I){return new Dse(p,v,N,I)}function IA(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Ise(p){if(typeof p=="function")return IA(p)?1:0;if(p!=null){if(p=p.$$typeof,p===R)return 11;if(p===Z)return 14}return 2}function Np(p,v){var N=p.alternate;return N===null?(N=Bc(p.tag,v,p.key,p.mode),N.elementType=p.elementType,N.type=p.type,N.stateNode=p.stateNode,N.alternate=p,p.alternate=N):(N.pendingProps=v,N.type=p.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=p.flags&14680064,N.childLanes=p.childLanes,N.lanes=p.lanes,N.child=p.child,N.memoizedProps=p.memoizedProps,N.memoizedState=p.memoizedState,N.updateQueue=p.updateQueue,v=p.dependencies,N.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},N.sibling=p.sibling,N.index=p.index,N.ref=p.ref,N}function F_(p,v,N,I,W,ee){var pe=2;if(I=p,typeof p=="function")IA(p)&&(pe=1);else if(typeof p=="string")pe=5;else e:switch(p){case T:return m0(N.children,W,ee,v);case M:pe=8,W|=8;break;case L:return p=Bc(12,N,v,W|2),p.elementType=L,p.lanes=ee,p;case j:return p=Bc(13,N,v,W),p.elementType=j,p.lanes=ee,p;case V:return p=Bc(19,N,v,W),p.elementType=V,p.lanes=ee,p;case q:return L_(N,W,ee,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case z:pe=10;break e;case P:pe=9;break e;case R:pe=11;break e;case Z:pe=14;break e;case te:pe=16,I=null;break e}throw Error(r(130,p==null?p:typeof p,""))}return v=Bc(pe,N,v,W),v.elementType=p,v.type=I,v.lanes=ee,v}function m0(p,v,N,I){return p=Bc(7,p,I,v),p.lanes=N,p}function L_(p,v,N,I){return p=Bc(22,p,I,v),p.elementType=q,p.lanes=N,p.stateNode={isHidden:!1},p}function RA(p,v,N){return p=Bc(6,p,null,v),p.lanes=N,p}function MA(p,v,N){return v=Bc(4,p.children!==null?p.children:[],p.key,v),v.lanes=N,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function Rse(p,v,N,I,W){this.tag=v,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qm(0),this.expirationTimes=qm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qm(0),this.identifierPrefix=I,this.onRecoverableError=W,this.mutableSourceEagerHydrationData=null}function FA(p,v,N,I,W,ee,pe,Ce,Ue){return p=new Rse(p,v,N,Ce,Ue),v===1?(v=1,ee===!0&&(v|=8)):v=0,ee=Bc(3,null,null,v),p.current=ee,ee.stateNode=p,ee.memoizedState={element:I,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jg(ee),p}function Mse(p,v,N){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:I==null?null:""+I,children:p,containerInfo:v,implementation:N}}function P7(p){if(!p)return Td;p=p._reactInternals;e:{if(Se(p)!==p||p.tag!==1)throw Error(r(170));var v=p;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(vs(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(r(171))}if(p.tag===1){var N=p.type;if(vs(N))return Ry(p,N,v)}return v}function T7(p,v,N,I,W,ee,pe,Ce,Ue){return p=FA(N,I,!0,p,W,ee,pe,Ce,Ue),p.context=P7(null),N=p.current,I=tl(),W=Sp(N),ee=Sl(I,W),ee.callback=v??null,Al(N,ee,W),p.current.lanes=W,gd(p,W,I),Cl(p,I),p}function j_(p,v,N,I){var W=v.current,ee=tl(),pe=Sp(W);return N=P7(N),v.context===null?v.context=N:v.pendingContext=N,v=Sl(ee,pe),v.payload={element:p},I=I===void 0?null:I,I!==null&&(v.callback=I),p=Al(W,v,pe),p!==null&&(Pu(p,W,pe,ee),Wf(p,W,pe)),pe}function $_(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function O7(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var N=p.retryLane;p.retryLane=N!==0&&N<v?N:v}}function LA(p,v){O7(p,v),(p=p.alternate)&&O7(p,v)}function Fse(){return null}var D7=typeof reportError=="function"?reportError:function(p){console.error(p)};function jA(p){this._internalRoot=p}B_.prototype.render=jA.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(r(409));j_(p,v,null,null)},B_.prototype.unmount=jA.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;f0(function(){j_(null,p,null,null)}),v[Eo]=null}};function B_(p){this._internalRoot=p}B_.prototype.unstable_scheduleHydration=function(p){if(p){var v=Nc();p={blockedOn:null,target:p,priority:v};for(var N=0;N<Ec.length&&v!==0&&v<Ec[N].priority;N++);Ec.splice(N,0,p),N===0&&zh(p)}};function $A(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function U_(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function I7(){}function Lse(p,v,N,I,W){if(W){if(typeof I=="function"){var ee=I;I=function(){var gt=$_(pe);ee.call(gt)}}var pe=T7(v,I,p,0,null,!1,!1,"",I7);return p._reactRootContainer=pe,p[Eo]=pe.current,jf(p.nodeType===8?p.parentNode:p),f0(),pe}for(;W=p.lastChild;)p.removeChild(W);if(typeof I=="function"){var Ce=I;I=function(){var gt=$_(Ue);Ce.call(gt)}}var Ue=FA(p,0,!1,null,null,!1,!1,"",I7);return p._reactRootContainer=Ue,p[Eo]=Ue.current,jf(p.nodeType===8?p.parentNode:p),f0(function(){j_(v,Ue,N,I)}),Ue}function q_(p,v,N,I,W){var ee=N._reactRootContainer;if(ee){var pe=ee;if(typeof W=="function"){var Ce=W;W=function(){var Ue=$_(pe);Ce.call(Ue)}}j_(v,pe,p,W)}else pe=Lse(N,v,p,W,I);return $_(pe)}Ug=function(p){switch(p.tag){case 3:var v=p.stateNode;if(v.current.memoizedState.isDehydrated){var N=_f(v.pendingLanes);N!==0&&(Bh(v,N|1),Cl(v,jt()),(zn&6)===0&&(dv=jt()+500,ne()))}break;case 13:f0(function(){var I=Gn(p,1);if(I!==null){var W=tl();Pu(I,p,1,W)}}),LA(p,1)}},zm=function(p){if(p.tag===13){var v=Gn(p,134217728);if(v!==null){var N=tl();Pu(v,p,134217728,N)}LA(p,134217728)}},qg=function(p){if(p.tag===13){var v=Sp(p),N=Gn(p,v);if(N!==null){var I=tl();Pu(N,p,v,I)}LA(p,v)}},Nc=function(){return Un},Sf=function(p,v){var N=Un;try{return Un=p,v()}finally{Un=N}},En=function(p,v,N){switch(v){case"input":if(Ye(p,N),v=N.name,N.type==="radio"&&v!=null){for(N=p;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+v)+'][type="radio"]'),v=0;v<N.length;v++){var I=N[v];if(I!==p&&I.form===p.form){var W=o0(I);if(!W)throw Error(r(90));re(I),Ye(I,W)}}}break;case"textarea":qe(p,N);break;case"select":v=N.value,v!=null&&ft(p,!!N.multiple,v,!1)}},fo=TA,Jn=f0;var jse={usingClientEntryPoint:!1,Events:[fp,Uf,o0,kr,pn,TA]},Hy={findFiberByHostInstance:Pd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$se={bundleType:Hy.bundleType,version:Hy.version,rendererPackageName:Hy.rendererPackageName,rendererConfig:Hy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=it(p),p===null?null:p.stateNode},findFiberByHostInstance:Hy.findFiberByHostInstance||Fse,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var z_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!z_.isDisabled&&z_.supportsFiber)try{Vs=z_.inject($se),xi=z_}catch{}}return Pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jse,Pl.createPortal=function(p,v){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$A(v))throw Error(r(200));return Mse(p,v,null,N)},Pl.createRoot=function(p,v){if(!$A(p))throw Error(r(299));var N=!1,I="",W=D7;return v!=null&&(v.unstable_strictMode===!0&&(N=!0),v.identifierPrefix!==void 0&&(I=v.identifierPrefix),v.onRecoverableError!==void 0&&(W=v.onRecoverableError)),v=FA(p,1,!1,null,null,N,!1,I,W),p[Eo]=v.current,jf(p.nodeType===8?p.parentNode:p),new jA(v)},Pl.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=it(v),p=p===null?null:p.stateNode,p},Pl.flushSync=function(p){return f0(p)},Pl.hydrate=function(p,v,N){if(!U_(v))throw Error(r(200));return q_(null,p,v,!0,N)},Pl.hydrateRoot=function(p,v,N){if(!$A(p))throw Error(r(405));var I=N!=null&&N.hydratedSources||null,W=!1,ee="",pe=D7;if(N!=null&&(N.unstable_strictMode===!0&&(W=!0),N.identifierPrefix!==void 0&&(ee=N.identifierPrefix),N.onRecoverableError!==void 0&&(pe=N.onRecoverableError)),v=T7(v,null,p,1,N??null,W,!1,ee,pe),p[Eo]=v.current,jf(p),I)for(p=0;p<I.length;p++)N=I[p],W=N._getVersion,W=W(N._source),v.mutableSourceEagerHydrationData==null?v.mutableSourceEagerHydrationData=[N,W]:v.mutableSourceEagerHydrationData.push(N,W);return new B_(v)},Pl.render=function(p,v,N){if(!U_(v))throw Error(r(200));return q_(null,p,v,!1,N)},Pl.unmountComponentAtNode=function(p){if(!U_(p))throw Error(r(40));return p._reactRootContainer?(f0(function(){q_(null,null,p,!1,function(){p._reactRootContainer=null,p[Eo]=null})}),!0):!1},Pl.unstable_batchedUpdates=TA,Pl.unstable_renderSubtreeIntoContainer=function(p,v,N,I){if(!U_(N))throw Error(r(200));if(p==null||p._reactInternals===void 0)throw Error(r(38));return q_(p,v,N,!1,I)},Pl.version="18.3.1-next-f1338f8080-20240426",Pl}var $7;function PH(){if($7)return UA.exports;$7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),UA.exports=Kse(),UA.exports}var B7;function Yse(){if(B7)return V_;B7=1;var e=PH();return V_.createRoot=e.createRoot,V_.hydrateRoot=e.hydrateRoot,V_}var Xse=Yse(),ny=PH();const Zse=ia(ny);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tx.apply(this,arguments)}var Gp;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gp||(Gp={}));const U7="popstate";function Jse(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:s="",hash:l=""}=xg(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$T("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=a.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof i=="string"?i:l5(i))}function n(a,i){U8(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return ele(t,r,n,e)}function Xi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function U8(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qse(){return Math.random().toString(36).substr(2,8)}function q7(e,t){return{usr:e.state,key:e.key,idx:t}}function $T(e,t,r,n){return r===void 0&&(r=null),tx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xg(t):t,{state:r,key:t&&t.key||n||Qse()})}function l5(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ele(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s=Gp.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(tx({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){s=Gp.Pop;let y=d(),_=y==null?null:y-u;u=y,l&&l({action:s,location:g.location,delta:_})}function h(y,_){s=Gp.Push;let b=$T(g.location,y,_);r&&r(b,y),u=d()+1;let S=q7(b,u),C=g.createHref(b);try{o.pushState(S,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(C)}i&&l&&l({action:s,location:g.location,delta:1})}function m(y,_){s=Gp.Replace;let b=$T(g.location,y,_);r&&r(b,y),u=d();let S=q7(b,u),C=g.createHref(b);o.replaceState(S,"",C),i&&l&&l({action:s,location:g.location,delta:0})}function x(y){let _=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:l5(y);return b=b.replace(/ $/,"%20"),Xi(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let g={get action(){return s},get location(){return e(a,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(U7,f),l=y,()=>{a.removeEventListener(U7,f),l=null}},createHref(y){return t(a,y)},createURL:x,encodeLocation(y){let _=x(y);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:m,go(y){return o.go(y)}};return g}var z7;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(z7||(z7={}));function tle(e,t,r){return r===void 0&&(r="/"),rle(e,t,r)}function rle(e,t,r,n){let a=typeof t=="string"?xg(t):t,i=q8(a.pathname||"/",r);if(i==null)return null;let o=TH(e);nle(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=mle(i);s=fle(o[l],u)}return s}function TH(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Xi(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=em([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(Xi(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),TH(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:ule(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))a(i,o);else for(let l of OH(i.path))a(i,o,l)}),t}function OH(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=OH(n.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function nle(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:dle(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ale=/^:[\w-]+$/,ile=3,ole=2,sle=1,lle=10,cle=-2,W7=e=>e==="*";function ule(e,t){let r=e.split("/"),n=r.length;return r.some(W7)&&(n+=cle),t&&(n+=ole),r.filter(a=>!W7(a)).reduce((a,i)=>a+(ale.test(i)?ile:i===""?sle:lle),n)}function dle(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function fle(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=hle({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:em([i,f.pathname]),pathnameBase:xle(em([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=em([i,f.pathnameBase]))}return o}function hle(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ple(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=s[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=s[f];return m&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function ple(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),U8(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function mle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return U8(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function q8(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function gle(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?xg(e):e;return{pathname:r?r.startsWith("/")?r:vle(r,t):t,search:wle(n),hash:_le(a)}}function vle(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function WA(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yle(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function z8(e,t){let r=yle(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function W8(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=xg(e):(a=tx({},e),Xi(!a.pathname||!a.pathname.includes("?"),WA("?","pathname","search",a)),Xi(!a.pathname||!a.pathname.includes("#"),WA("#","pathname","hash",a)),Xi(!a.search||!a.search.includes("#"),WA("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}s=f>=0?t[f]:"/"}let l=gle(a,s),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const em=e=>e.join("/").replace(/\/\/+/g,"/"),xle=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wle=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_le=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ble(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DH=["post","put","patch","delete"];new Set(DH);const Sle=["get",...DH];new Set(Sle);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(this,arguments)}const V8=A.createContext(null),Ale=A.createContext(null),Nm=A.createContext(null),n4=A.createContext(null),ff=A.createContext({outlet:null,matches:[],isDataRoute:!1}),IH=A.createContext(null);function Nle(e,t){let{relative:r}=t===void 0?{}:t;ay()||Xi(!1);let{basename:n,navigator:a}=A.useContext(Nm),{hash:i,pathname:o,search:s}=MH(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:em([n,o])),a.createHref({pathname:l,search:s,hash:i})}function ay(){return A.useContext(n4)!=null}function km(){return ay()||Xi(!1),A.useContext(n4).location}function RH(e){A.useContext(Nm).static||A.useLayoutEffect(e)}function bo(){let{isDataRoute:e}=A.useContext(ff);return e?Ble():kle()}function kle(){ay()||Xi(!1);let e=A.useContext(V8),{basename:t,future:r,navigator:n}=A.useContext(Nm),{matches:a}=A.useContext(ff),{pathname:i}=km(),o=JSON.stringify(z8(a,r.v7_relativeSplatPath)),s=A.useRef(!1);return RH(()=>{s.current=!0}),A.useCallback(function(u,d){if(d===void 0&&(d={}),!s.current)return;if(typeof u=="number"){n.go(u);return}let f=W8(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:em([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}const Ele=A.createContext(null);function Cle(e){let t=A.useContext(ff).outlet;return t&&A.createElement(Ele.Provider,{value:e},t)}function iy(){let{matches:e}=A.useContext(ff),t=e[e.length-1];return t?t.params:{}}function MH(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=A.useContext(Nm),{matches:a}=A.useContext(ff),{pathname:i}=km(),o=JSON.stringify(z8(a,n.v7_relativeSplatPath));return A.useMemo(()=>W8(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Ple(e,t){return Tle(e,t)}function Tle(e,t,r,n){ay()||Xi(!1);let{navigator:a,static:i}=A.useContext(Nm),{matches:o}=A.useContext(ff),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=km(),f;if(t){var h;let _=typeof t=="string"?xg(t):t;u==="/"||(h=_.pathname)!=null&&h.startsWith(u)||Xi(!1),f=_}else f=d;let m=f.pathname||"/",x=m;if(u!=="/"){let _=u.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=tle(e,{pathname:x}),y=Mle(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:em([u,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:em([u,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,r,n);return t&&y?A.createElement(n4.Provider,{value:{location:rx({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Gp.Pop}},y):y}function Ole(){let e=$le(),t=ble(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:a},r):null,null)}const Dle=A.createElement(Ole,null);class Ile extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(ff.Provider,{value:this.props.routeContext},A.createElement(IH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rle(e){let{routeContext:t,match:r,children:n}=e,a=A.useContext(V8);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(ff.Provider,{value:t},n)}function Mle(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,s=(a=r)==null?void 0:a.errors;if(s!=null){let d=o.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);d>=0||Xi(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,x=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,x=!1,g=null,y=null;r&&(m=s&&f.route.id?s[f.route.id]:void 0,g=f.route.errorElement||Dle,l&&(u<0&&h===0?(Ule("route-fallback"),x=!0,y=null):u===h&&(x=!0,y=f.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,h+1)),b=()=>{let S;return m?S=g:x?S=y:f.route.Component?S=A.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,A.createElement(Rle,{match:f,routeContext:{outlet:d,matches:_,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?A.createElement(Ile,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var FH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(FH||{}),LH=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(LH||{});function Fle(e){let t=A.useContext(V8);return t||Xi(!1),t}function Lle(e){let t=A.useContext(Ale);return t||Xi(!1),t}function jle(e){let t=A.useContext(ff);return t||Xi(!1),t}function jH(e){let t=jle(),r=t.matches[t.matches.length-1];return r.route.id||Xi(!1),r.route.id}function $le(){var e;let t=A.useContext(IH),r=Lle(),n=jH();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Ble(){let{router:e}=Fle(FH.UseNavigateStable),t=jH(LH.UseNavigateStable),r=A.useRef(!1);return RH(()=>{r.current=!0}),A.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,rx({fromRouteId:t},i)))},[e,t])}const V7={};function Ule(e,t,r){V7[e]||(V7[e]=!0)}function qle(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function BT(e){let{to:t,replace:r,state:n,relative:a}=e;ay()||Xi(!1);let{future:i,static:o}=A.useContext(Nm),{matches:s}=A.useContext(ff),{pathname:l}=km(),u=bo(),d=W8(t,z8(s,i.v7_relativeSplatPath),l,a==="path"),f=JSON.stringify(d);return A.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function $H(e){return Cle(e.context)}function Mn(e){Xi(!1)}function zle(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Gp.Pop,navigator:i,static:o=!1,future:s}=e;ay()&&Xi(!1);let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:i,static:o,future:rx({v7_relativeSplatPath:!1},s)}),[l,s,i,o]);typeof n=="string"&&(n=xg(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:x="default"}=n,g=A.useMemo(()=>{let y=q8(d,l);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:x},navigationType:a}},[l,d,f,h,m,x,a]);return g==null?null:A.createElement(Nm.Provider,{value:u},A.createElement(n4.Provider,{children:r,value:g}))}function Wle(e){let{children:t,location:r}=e;return Ple(UT(t),r)}new Promise(()=>{});function UT(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(n,a)=>{if(!A.isValidElement(n))return;let i=[...t,a];if(n.type===A.Fragment){r.push.apply(r,UT(n.props.children,i));return}n.type!==Mn&&Xi(!1),!n.props.index||!n.props.children||Xi(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=UT(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qT(){return qT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qT.apply(this,arguments)}function Vle(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Hle(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gle(e,t){return e.button===0&&(!t||t==="_self")&&!Hle(e)}function zT(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Kle(e,t){let r=zT(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const Yle=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xle="6";try{window.__reactRouterVersion=Xle}catch{}const Zle="startTransition",H7=ex[Zle];function Jle(e){let{basename:t,children:r,future:n,window:a}=e,i=A.useRef();i.current==null&&(i.current=Jse({window:a,v5Compat:!0}));let o=i.current,[s,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=A.useCallback(f=>{u&&H7?H7(()=>l(f)):l(f)},[l,u]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>qle(n),[n]),A.createElement(zle,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:o,future:n})}const Qle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ece=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vi=A.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:s,target:l,to:u,preventScrollReset:d,viewTransition:f}=t,h=Vle(t,Yle),{basename:m}=A.useContext(Nm),x,g=!1;if(typeof u=="string"&&ece.test(u)&&(x=u,Qle))try{let S=new URL(window.location.href),C=u.startsWith("//")?new URL(S.protocol+u):new URL(u),E=q8(C.pathname,m);C.origin===S.origin&&E!=null?u=E+C.search+C.hash:g=!0}catch{}let y=Nle(u,{relative:a}),_=tce(u,{replace:o,state:s,target:l,preventScrollReset:d,relative:a,viewTransition:f});function b(S){n&&n(S),S.defaultPrevented||_(S)}return A.createElement("a",qT({},h,{href:x||y,onClick:g||i?n:b,ref:r,target:l}))});var G7;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(G7||(G7={}));var K7;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(K7||(K7={}));function tce(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:s}=t===void 0?{}:t,l=bo(),u=km(),d=MH(e,{relative:o});return A.useCallback(f=>{if(Gle(f,r)){f.preventDefault();let h=n!==void 0?n:l5(u)===l5(d);l(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:s})}},[u,l,d,n,a,r,e,i,o,s])}function BH(e){let t=A.useRef(zT(e)),r=A.useRef(!1),n=km(),a=A.useMemo(()=>Kle(n.search,r.current?null:t.current),[n.search]),i=bo(),o=A.useCallback((s,l)=>{const u=zT(typeof s=="function"?s(a):s);r.current=!0,i("?"+u,l)},[i,a]);return[a,o]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nce=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xt=(e,t)=>{const r=A.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:s="",children:l,...u},d)=>A.createElement("svg",{ref:d,...rce,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${nce(e)}`,s].join(" "),...u},[...t.map(([f,h])=>A.createElement(f,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=Xt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=Xt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=Xt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=Xt("Armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z",key:"1e01m0"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Xt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Xt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=Xt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ice=Xt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Xt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=Xt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oce=Xt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sce=Xt("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=Xt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=Xt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=Xt("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Xt("BrainCog",[["path",{d:"M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3.2 3.2 0 0 0 .164-.546c.028-.13.306-.13.335 0a3.2 3.2 0 0 0 .163.546 4 4 0 0 0 7.636-2.106 4 4 0 0 0 .556-6.588 4 4 0 0 0-2.526-5.77A3 3 0 1 0 12 5",key:"1kgmhc"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m15.7 10.4-.9.4",key:"ayzo6p"}],["path",{d:"m9.2 13.2-.9.4",key:"1uzb3g"}],["path",{d:"m13.6 15.7-.4-.9",key:"11ifqf"}],["path",{d:"m10.8 9.2-.4-.9",key:"1pmk2v"}],["path",{d:"m15.7 13.5-.9-.4",key:"7ng02m"}],["path",{d:"m9.2 10.9-.9-.4",key:"1x66zd"}],["path",{d:"m10.5 15.7.4-.9",key:"3js94g"}],["path",{d:"m13.1 9.2.4-.9",key:"18n7mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lce=Xt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cce=Xt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uce=Xt("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Xt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Xt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dce=Xt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fce=Xt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Xt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Xt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=Xt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Xt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hce=Xt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=Xt("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=Xt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=Xt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=Xt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=Xt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=Xt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=Xt("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=Xt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=Xt("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=Xt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=Xt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=Xt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=Xt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=Xt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=Xt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=Xt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=Xt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=Xt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=Xt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Xt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=Xt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=Xt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=Xt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=Xt("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=Xt("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=Xt("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=Xt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=Xt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=Xt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=Xt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Xt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Xt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=Xt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=Xt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=Xt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=Xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=Xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=Xt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=Xt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=Xt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Xt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=Xt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=Xt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=Xt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=Xt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=Xt("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=Xt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Xt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Xt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=Xt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Xt("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=Xt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=Xt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=Xt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=Xt("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=Xt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=Xt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function tF(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function c4(...e){return t=>{let r=!1;const n=e.map(a=>{const i=tF(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():tF(e[a],null)}}}}function Hr(...e){return A.useCallback(c4(...e),e)}var YA={exports:{}},Gy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rF;function Uce(){if(rF)return Gy;rF=1;var e=r4(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(s,l,u){var d,f={},h=null,m=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(m=l.ref);for(d in l)n.call(l,d)&&!i.hasOwnProperty(d)&&(f[d]=l[d]);if(s&&s.defaultProps)for(d in l=s.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:t,type:s,key:h,ref:m,props:f,_owner:a.current}}return Gy.Fragment=r,Gy.jsx=o,Gy.jsxs=o,Gy}var nF;function qce(){return nF||(nF=1,YA.exports=Uce()),YA.exports}var Y8=qce();const c=Y8.jsx,w=Y8.jsxs,_r=Y8.Fragment;function sm(e){const t=zce(e),r=A.forwardRef((n,a)=>{const{children:i,...o}=n,s=A.Children.toArray(i),l=s.find(Wce);if(l){const u=l.props.children,d=s.map(f=>f===l?A.Children.count(u)>1?A.Children.only(null):A.isValidElement(u)?u.props.children:null:f);return c(t,{...o,ref:a,children:A.isValidElement(u)?A.cloneElement(u,void 0,d):null})}return c(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var eG=sm("Slot");function zce(e){const t=A.forwardRef((r,n)=>{const{children:a,...i}=r;if(A.isValidElement(a)){const o=Hce(a),s=Vce(i,a.props);return a.type!==A.Fragment&&(s.ref=n?c4(n,o):o),A.cloneElement(a,s)}return A.Children.count(a)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tG=Symbol("radix.slottable");function rG(e){const t=({children:r})=>c(_r,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=tG,t}function Wce(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tG}function Vce(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...s)=>{i(...s),a(...s)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Hce(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function nG(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=nG(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=nG(e))&&(n&&(n+=" "),n+=t);return n}const aF=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,iF=fn,Ew=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return iF(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=aF(d)||aF(f);return a[u][h]}),s=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...i,...s}[g]):{...i,...s}[g]===y})?[...u,f,h]:u},[]);return iF(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)},X8="-",Gce=e=>{const t=Yce(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const s=o.split(X8);return s[0]===""&&s.length!==1&&s.shift(),aG(s,t)||Kce(o)},getConflictingClassGroupIds:(o,s)=>{const l=r[o]||[];return s&&n[o]?[...l,...n[o]]:l}}},aG=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?aG(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(X8);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},oF=/^\[(.+)\]$/,Kce=e=>{if(oF.test(e)){const t=oF.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Yce=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Zce(Object.entries(e.classGroups),r).forEach(([i,o])=>{VT(o,n,i,t)}),n},VT=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:sF(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Xce(a)){VT(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{VT(o,sF(t,i),r,n)})})},sF=(e,t)=>{let r=e;return t.split(X8).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Xce=e=>e.isThemeGetter,Zce=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,s])=>[t+o,s])):i);return[r,a]}):e,Jce=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},iG="!",Qce=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=s=>{const l=[];let u=0,d=0,f;for(let y=0;y<s.length;y++){let _=s[y];if(u===0){if(_===a&&(n||s.slice(y,y+i)===t)){l.push(s.slice(d,y)),d=y+i;continue}if(_==="/"){f=y;continue}}_==="["?u++:_==="]"&&u--}const h=l.length===0?s:s.substring(d),m=h.startsWith(iG),x=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}};return r?s=>r({className:s,parseClassName:o}):o},eue=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},tue=e=>({cache:Jce(e.cacheSize),parseClassName:Qce(e),...Gce(e)}),rue=/\s+/,nue=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(rue);let s="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let x=!!m,g=n(x?h.substring(0,m):h);if(!g){if(!x){s=u+(s.length>0?" "+s:s);continue}if(g=n(h),!g){s=u+(s.length>0?" "+s:s);continue}x=!1}const y=eue(d).join(":"),_=f?y+iG:y,b=_+g;if(i.includes(b))continue;i.push(b);const S=a(g,x);for(let C=0;C<S.length;++C){const E=S[C];i.push(_+E)}s=u+(s.length>0?" "+s:s)}return s};function aue(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=oG(t))&&(n&&(n+=" "),n+=r);return n}const oG=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=oG(e[n]))&&(r&&(r+=" "),r+=t);return r};function iue(e,...t){let r,n,a,i=o;function o(l){const u=t.reduce((d,f)=>f(d),e());return r=tue(u),n=r.cache.get,a=r.cache.set,i=s,s(l)}function s(l){const u=n(l);if(u)return u;const d=nue(l,r);return a(l,d),d}return function(){return i(aue.apply(null,arguments))}}const Ga=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},sG=/^\[(?:([a-z-]+):)?(.+)\]$/i,oue=/^\d+\/\d+$/,sue=new Set(["px","full","screen"]),lue=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cue=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uue=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,due=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yf=e=>Yv(e)||sue.has(e)||oue.test(e),Ep=e=>oy(e,"length",wue),Yv=e=>!!e&&!Number.isNaN(Number(e)),XA=e=>oy(e,"number",Yv),Ky=e=>!!e&&Number.isInteger(Number(e)),hue=e=>e.endsWith("%")&&Yv(e.slice(0,-1)),xn=e=>sG.test(e),Cp=e=>lue.test(e),pue=new Set(["length","size","percentage"]),mue=e=>oy(e,pue,lG),gue=e=>oy(e,"position",lG),vue=new Set(["image","url"]),yue=e=>oy(e,vue,bue),xue=e=>oy(e,"",_ue),Yy=()=>!0,oy=(e,t,r)=>{const n=sG.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},wue=e=>cue.test(e)&&!uue.test(e),lG=()=>!1,_ue=e=>due.test(e),bue=e=>fue.test(e),Sue=()=>{const e=Ga("colors"),t=Ga("spacing"),r=Ga("blur"),n=Ga("brightness"),a=Ga("borderColor"),i=Ga("borderRadius"),o=Ga("borderSpacing"),s=Ga("borderWidth"),l=Ga("contrast"),u=Ga("grayscale"),d=Ga("hueRotate"),f=Ga("invert"),h=Ga("gap"),m=Ga("gradientColorStops"),x=Ga("gradientColorStopPositions"),g=Ga("inset"),y=Ga("margin"),_=Ga("opacity"),b=Ga("padding"),S=Ga("saturate"),C=Ga("scale"),E=Ga("sepia"),O=Ga("skew"),T=Ga("space"),M=Ga("translate"),L=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",xn,t],R=()=>[xn,t],j=()=>["",Yf,Ep],V=()=>["auto",Yv,xn],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",xn],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Yv,xn];return{cacheSize:500,separator:":",theme:{colors:[Yy],spacing:[Yf,Ep],blur:["none","",Cp,xn],brightness:J(),borderColor:[e],borderRadius:["none","","full",Cp,xn],borderSpacing:R(),borderWidth:j(),contrast:J(),grayscale:U(),hueRotate:J(),invert:U(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[hue,Ep],inset:P(),margin:P(),opacity:J(),padding:R(),saturate:J(),scale:J(),sepia:U(),skew:J(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",xn]}],container:["container"],columns:[{columns:[Cp]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),xn]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ky,xn]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xn]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Ky,xn]}],"grid-cols":[{"grid-cols":[Yy]}],"col-start-end":[{col:["auto",{span:["full",Ky,xn]},xn]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Yy]}],"row-start-end":[{row:["auto",{span:[Ky,xn]},xn]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xn,t]}],"min-w":[{"min-w":[xn,t,"min","max","fit"]}],"max-w":[{"max-w":[xn,t,"none","full","min","max","fit","prose",{screen:[Cp]},Cp]}],h:[{h:[xn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Cp,Ep]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",XA]}],"font-family":[{font:[Yy]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xn]}],"line-clamp":[{"line-clamp":["none",Yv,XA]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Yf,xn]}],"list-image":[{"list-image":["none",xn]}],"list-style-type":[{list:["none","disc","decimal",xn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Yf,Ep]}],"underline-offset":[{"underline-offset":["auto",Yf,xn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),gue]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mue]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yue]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:te()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Yf,xn]}],"outline-w":[{outline:[Yf,Ep]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Yf,Ep]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cp,xue]}],"shadow-color":[{shadow:[Yy]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Cp,xn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xn]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",xn]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",xn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Ky,xn]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Yf,Ep,XA]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Aue=iue(Sue);function Rt(...e){return Aue(fn(e))}const ax=Ew("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Fe=A.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>c(n?eG:"button",{className:Rt(ax({variant:t,size:r,className:e})),ref:i,...a}));Fe.displayName="Button";function Wt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Nue(e,t){const r=A.createContext(t),n=i=>{const{children:o,...s}=i,l=A.useMemo(()=>s,Object.values(s));return c(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function a(i){const o=A.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function eo(e,t=[]){let r=[];function n(i,o){const s=A.createContext(o),l=r.length;r=[...r,o];const u=f=>{var _;const{scope:h,children:m,...x}=f,g=((_=h==null?void 0:h[e])==null?void 0:_[l])||s,y=A.useMemo(()=>x,Object.values(x));return c(g.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(f,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[l])||s,x=A.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>A.createContext(o));return function(s){const l=(s==null?void 0:s[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return a.scopeName=e,[n,kue(a,...t)]}function kue(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((s,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...s,...f}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var ii=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},Eue=ex[" useInsertionEffect ".trim().toString()]||ii;function hl({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=Cue({defaultProp:t,onChange:r}),s=e!==void 0,l=s?e:a;{const d=A.useRef(e!==void 0);A.useEffect(()=>{const f=d.current;f!==s&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=s},[s,n])}const u=A.useCallback(d=>{var f;if(s){const h=Pue(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[s,e,i,o]);return[l,u]}function Cue({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),a=A.useRef(r),i=A.useRef(t);return Eue(()=>{i.current=t},[t]),A.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function Pue(e){return typeof e=="function"}var Tue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pr=Tue.reduce((e,t)=>{const r=sm(`Primitive.${t}`),n=A.forwardRef((a,i)=>{const{asChild:o,...s}=a,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c(l,{...s,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Z8(e,t){e&&ny.flushSync(()=>e.dispatchEvent(t))}function Cw(e){const t=e+"CollectionProvider",[r,n]=eo(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:_}=g,b=tt.useRef(null),S=tt.useRef(new Map).current;return c(a,{scope:y,itemMap:S,collectionRef:b,children:_})};o.displayName=t;const s=e+"CollectionSlot",l=sm(s),u=tt.forwardRef((g,y)=>{const{scope:_,children:b}=g,S=i(s,_),C=Hr(y,S.collectionRef);return c(l,{ref:C,children:b})});u.displayName=s;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=sm(d),m=tt.forwardRef((g,y)=>{const{scope:_,children:b,...S}=g,C=tt.useRef(null),E=Hr(y,C),O=i(d,_);return tt.useEffect(()=>(O.itemMap.set(C,{ref:C,...S}),()=>void O.itemMap.delete(C))),c(h,{[f]:"",ref:E,children:b})});m.displayName=d;function x(g){const y=i(e+"CollectionConsumer",g);return tt.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((O,T)=>S.indexOf(O.ref.current)-S.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},x,n]}var Oue=A.createContext(void 0);function wg(e){const t=A.useContext(Oue);return e||t||"ltr"}function Pi(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Due(e,t=globalThis==null?void 0:globalThis.document){const r=Pi(e);A.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Iue="DismissableLayer",HT="dismissableLayer.update",Rue="dismissableLayer.pointerDownOutside",Mue="dismissableLayer.focusOutside",lF,cG=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_g=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...l}=e,u=A.useContext(cG),[d,f]=A.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),x=Hr(t,T=>f(T)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(y),b=d?g.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,C=b>=_,E=Lue(T=>{const M=T.target,L=[...u.branches].some(z=>z.contains(M));!C||L||(a==null||a(T),o==null||o(T),T.defaultPrevented||s==null||s())},h),O=jue(T=>{const M=T.target;[...u.branches].some(z=>z.contains(M))||(i==null||i(T),o==null||o(T),T.defaultPrevented||s==null||s())},h);return Due(T=>{b===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&s&&(T.preventDefault(),s()))},h),A.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lF=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),cF(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=lF)}},[d,h,r,u]),A.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),cF())},[d,u]),A.useEffect(()=>{const T=()=>m({});return document.addEventListener(HT,T),()=>document.removeEventListener(HT,T)},[]),c(pr.div,{...l,ref:x,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:Wt(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Wt(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Wt(e.onPointerDownCapture,E.onPointerDownCapture)})});_g.displayName=Iue;var Fue="DismissableLayerBranch",uG=A.forwardRef((e,t)=>{const r=A.useContext(cG),n=A.useRef(null),a=Hr(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),c(pr.div,{...e,ref:a})});uG.displayName=Fue;function Lue(e,t=globalThis==null?void 0:globalThis.document){const r=Pi(e),n=A.useRef(!1),a=A.useRef(()=>{});return A.useEffect(()=>{const i=s=>{if(s.target&&!n.current){let l=function(){dG(Rue,r,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function jue(e,t=globalThis==null?void 0:globalThis.document){const r=Pi(e),n=A.useRef(!1);return A.useEffect(()=>{const a=i=>{i.target&&!n.current&&dG(Mue,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function cF(){const e=new CustomEvent(HT);document.dispatchEvent(e)}function dG(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Z8(a,i):a.dispatchEvent(i)}var $ue=_g,Bue=uG,ZA=0;function u4(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??uF()),document.body.insertAdjacentElement("beforeend",e[1]??uF()),ZA++,()=>{ZA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ZA--}},[])}function uF(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var JA="focusScope.autoFocusOnMount",QA="focusScope.autoFocusOnUnmount",dF={bubbles:!1,cancelable:!0},Uue="FocusScope",Pw=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,l]=A.useState(null),u=Pi(a),d=Pi(i),f=A.useRef(null),h=Hr(t,g=>l(g)),m=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let g=function(S){if(m.paused||!s)return;const C=S.target;s.contains(C)?f.current=C:Fp(f.current,{select:!0})},y=function(S){if(m.paused||!s)return;const C=S.relatedTarget;C!==null&&(s.contains(C)||Fp(f.current,{select:!0}))},_=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&Fp(s)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const b=new MutationObserver(_);return s&&b.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),b.disconnect()}}},[n,s,m.paused]),A.useEffect(()=>{if(s){hF.add(m);const g=document.activeElement;if(!s.contains(g)){const _=new CustomEvent(JA,dF);s.addEventListener(JA,u),s.dispatchEvent(_),_.defaultPrevented||(que(Gue(fG(s)),{select:!0}),document.activeElement===g&&Fp(s))}return()=>{s.removeEventListener(JA,u),setTimeout(()=>{const _=new CustomEvent(QA,dF);s.addEventListener(QA,d),s.dispatchEvent(_),_.defaultPrevented||Fp(g??document.body,{select:!0}),s.removeEventListener(QA,d),hF.remove(m)},0)}}},[s,u,d,m]);const x=A.useCallback(g=>{if(!r&&!n||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,_=document.activeElement;if(y&&_){const b=g.currentTarget,[S,C]=zue(b);S&&C?!g.shiftKey&&_===C?(g.preventDefault(),r&&Fp(S,{select:!0})):g.shiftKey&&_===S&&(g.preventDefault(),r&&Fp(C,{select:!0})):_===b&&g.preventDefault()}},[r,n,m.paused]);return c(pr.div,{tabIndex:-1,...o,ref:h,onKeyDown:x})});Pw.displayName=Uue;function que(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Fp(n,{select:t}),document.activeElement!==r)return}function zue(e){const t=fG(e),r=fF(t,e),n=fF(t.reverse(),e);return[r,n]}function fG(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fF(e,t){for(const r of e)if(!Wue(r,{upTo:t}))return r}function Wue(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Vue(e){return e instanceof HTMLInputElement&&"select"in e}function Fp(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Vue(e)&&t&&e.select()}}var hF=Hue();function Hue(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=pF(e,t),e.unshift(t)},remove(t){var r;e=pF(e,t),(r=e[0])==null||r.resume()}}}function pF(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Gue(e){return e.filter(t=>t.tagName!=="A")}var Kue=ex[" useId ".trim().toString()]||(()=>{}),Yue=0;function Ll(e){const[t,r]=A.useState(Kue());return ii(()=>{r(n=>n??String(Yue++))},[e]),t?`radix-${t}`:""}const Xue=["top","right","bottom","left"],lm=Math.min,sc=Math.max,f5=Math.round,K_=Math.floor,Jd=e=>({x:e,y:e}),Zue={left:"right",right:"left",bottom:"top",top:"bottom"},Jue={start:"end",end:"start"};function GT(e,t,r){return sc(e,lm(t,r))}function vh(e,t){return typeof e=="function"?e(t):e}function yh(e){return e.split("-")[0]}function sy(e){return e.split("-")[1]}function J8(e){return e==="x"?"y":"x"}function Q8(e){return e==="y"?"height":"width"}function cm(e){return["top","bottom"].includes(yh(e))?"y":"x"}function eD(e){return J8(cm(e))}function Que(e,t,r){r===void 0&&(r=!1);const n=sy(e),a=eD(e),i=Q8(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=h5(o)),[o,h5(o)]}function ede(e){const t=h5(e);return[KT(e),t,KT(t)]}function KT(e){return e.replace(/start|end/g,t=>Jue[t])}function tde(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function rde(e,t,r,n){const a=sy(e);let i=tde(yh(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(KT)))),i}function h5(e){return e.replace(/left|right|bottom|top/g,t=>Zue[t])}function nde(e){return{top:0,right:0,bottom:0,left:0,...e}}function hG(e){return typeof e!="number"?nde(e):{top:e,right:e,bottom:e,left:e}}function p5(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function mF(e,t,r){let{reference:n,floating:a}=e;const i=cm(t),o=eD(t),s=Q8(o),l=yh(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[s]/2-a[s]/2;let m;switch(l){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(sy(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const ade=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,s=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=mF(u,n,l),h=n,m={},x=0;for(let g=0;g<s.length;g++){const{name:y,fn:_}=s[g],{x:b,y:S,data:C,reset:E}=await _({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=S??f,m={...m,[y]:{...m[y],...C}},E&&x<=50&&(x++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):E.rects),{x:d,y:f}=mF(u,h,l)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function ix(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=vh(t,e),x=hG(m),y=s[h?f==="floating"?"reference":"floating":f],_=p5(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),b=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},E=p5(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:S,strategy:l}):b);return{top:(_.top-E.top+x.top)/C.y,bottom:(E.bottom-_.bottom+x.bottom)/C.y,left:(_.left-E.left+x.left)/C.x,right:(E.right-_.right+x.right)/C.x}}const ide=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=vh(e,t)||{};if(u==null)return{};const f=hG(d),h={x:r,y:n},m=eD(a),x=Q8(m),g=await o.getDimensions(u),y=m==="y",_=y?"top":"left",b=y?"bottom":"right",S=y?"clientHeight":"clientWidth",C=i.reference[x]+i.reference[m]-h[m]-i.floating[x],E=h[m]-i.reference[m],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=O?O[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(O)))&&(T=s.floating[S]||i.floating[x]);const M=C/2-E/2,L=T/2-g[x]/2-1,z=lm(f[_],L),P=lm(f[b],L),R=z,j=T-g[x]-P,V=T/2-g[x]/2+M,Z=GT(R,V,j),te=!l.arrow&&sy(a)!=null&&V!==Z&&i.reference[x]/2-(V<R?z:P)-g[x]/2<0,q=te?V<R?V-R:V-j:0;return{[m]:h[m]+q,data:{[m]:Z,centerOffset:V-Z-q,...te&&{alignmentOffset:q}},reset:te}}}),ode=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...y}=vh(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const _=yh(a),b=cm(s),S=yh(s)===s,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=h||(S||!g?[h5(s)]:ede(s)),O=x!=="none";!h&&O&&E.push(...rde(s,g,x,C));const T=[s,...E],M=await ix(t,y),L=[];let z=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&L.push(M[_]),f){const V=Que(a,o,C);L.push(M[V[0]],M[V[1]])}if(z=[...z,{placement:a,overflows:L}],!L.every(V=>V<=0)){var P,R;const V=(((P=i.flip)==null?void 0:P.index)||0)+1,Z=T[V];if(Z)return{data:{index:V,overflows:z},reset:{placement:Z}};let te=(R=z.filter(q=>q.overflows[0]<=0).sort((q,Y)=>q.overflows[1]-Y.overflows[1])[0])==null?void 0:R.placement;if(!te)switch(m){case"bestFit":{var j;const q=(j=z.filter(Y=>{if(O){const U=cm(Y.placement);return U===b||U==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(U=>U>0).reduce((U,G)=>U+G,0)]).sort((Y,U)=>Y[1]-U[1])[0])==null?void 0:j[0];q&&(te=q);break}case"initialPlacement":te=s;break}if(a!==te)return{reset:{placement:te}}}return{}}}};function gF(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vF(e){return Xue.some(t=>e[t]>=0)}const sde=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=vh(e,t);switch(n){case"referenceHidden":{const i=await ix(t,{...a,elementContext:"reference"}),o=gF(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vF(o)}}}case"escaped":{const i=await ix(t,{...a,altBoundary:!0}),o=gF(i,r.floating);return{data:{escapedOffsets:o,escaped:vF(o)}}}default:return{}}}}};async function lde(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=yh(r),s=sy(r),l=cm(r)==="y",u=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=vh(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof x=="number"&&(m=s==="end"?x*-1:x),l?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const cde=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:s}=t,l=await lde(t,e);return o===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:o}}}}},ude=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:y=>{let{x:_,y:b}=y;return{x:_,y:b}}},...l}=vh(e,t),u={x:r,y:n},d=await ix(t,l),f=cm(yh(a)),h=J8(f);let m=u[h],x=u[f];if(i){const y=h==="y"?"top":"left",_=h==="y"?"bottom":"right",b=m+d[y],S=m-d[_];m=GT(b,m,S)}if(o){const y=f==="y"?"top":"left",_=f==="y"?"bottom":"right",b=x+d[y],S=x-d[_];x=GT(b,x,S)}const g=s.fn({...t,[h]:m,[f]:x});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:o}}}}}},dde=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=vh(e,t),d={x:r,y:n},f=cm(a),h=J8(f);let m=d[h],x=d[f];const g=vh(s,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const S=h==="y"?"height":"width",C=i.reference[h]-i.floating[S]+y.mainAxis,E=i.reference[h]+i.reference[S]-y.mainAxis;m<C?m=C:m>E&&(m=E)}if(u){var _,b;const S=h==="y"?"width":"height",C=["top","left"].includes(yh(a)),E=i.reference[f]-i.floating[S]+(C&&((_=o.offset)==null?void 0:_[f])||0)+(C?0:y.crossAxis),O=i.reference[f]+i.reference[S]+(C?0:((b=o.offset)==null?void 0:b[f])||0)-(C?y.crossAxis:0);x<E?x=E:x>O&&(x=O)}return{[h]:m,[f]:x}}}},fde=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:l=()=>{},...u}=vh(e,t),d=await ix(t,u),f=yh(a),h=sy(a),m=cm(a)==="y",{width:x,height:g}=i.floating;let y,_;f==="top"||f==="bottom"?(y=f,_=h===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(_=f,y=h==="end"?"top":"bottom");const b=g-d.top-d.bottom,S=x-d.left-d.right,C=lm(g-d[y],b),E=lm(x-d[_],S),O=!t.middlewareData.shift;let T=C,M=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=S),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=b),O&&!h){const z=sc(d.left,0),P=sc(d.right,0),R=sc(d.top,0),j=sc(d.bottom,0);m?M=x-2*(z!==0||P!==0?z+P:sc(d.left,d.right)):T=g-2*(R!==0||j!==0?R+j:sc(d.top,d.bottom))}await l({...t,availableWidth:M,availableHeight:T});const L=await o.getDimensions(s.floating);return x!==L.width||g!==L.height?{reset:{rects:!0}}:{}}}};function d4(){return typeof window<"u"}function ly(e){return pG(e)?(e.nodeName||"").toLowerCase():"#document"}function gc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function hf(e){var t;return(t=(pG(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pG(e){return d4()?e instanceof Node||e instanceof gc(e).Node:!1}function Ju(e){return d4()?e instanceof Element||e instanceof gc(e).Element:!1}function sf(e){return d4()?e instanceof HTMLElement||e instanceof gc(e).HTMLElement:!1}function yF(e){return!d4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gc(e).ShadowRoot}function Tw(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Qu(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function hde(e){return["table","td","th"].includes(ly(e))}function f4(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tD(e){const t=rD(),r=Ju(e)?Qu(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function pde(e){let t=um(e);for(;sf(t)&&!v1(t);){if(tD(t))return t;if(f4(t))return null;t=um(t)}return null}function rD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function v1(e){return["html","body","#document"].includes(ly(e))}function Qu(e){return gc(e).getComputedStyle(e)}function h4(e){return Ju(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function um(e){if(ly(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yF(e)&&e.host||hf(e);return yF(t)?t.host:t}function mG(e){const t=um(e);return v1(t)?e.ownerDocument?e.ownerDocument.body:e.body:sf(t)&&Tw(t)?t:mG(t)}function ox(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=mG(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=gc(a);if(i){const s=YT(o);return t.concat(o,o.visualViewport||[],Tw(a)?a:[],s&&r?ox(s):[])}return t.concat(a,ox(a,[],r))}function YT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gG(e){const t=Qu(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=sf(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,s=f5(r)!==i||f5(n)!==o;return s&&(r=i,n=o),{width:r,height:n,$:s}}function nD(e){return Ju(e)?e:e.contextElement}function Xv(e){const t=nD(e);if(!sf(t))return Jd(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=gG(t);let o=(i?f5(r.width):r.width)/n,s=(i?f5(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const mde=Jd(0);function vG(e){const t=gc(e);return!rD()||!t.visualViewport?mde:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gde(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==gc(e)?!1:t}function X0(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=nD(e);let o=Jd(1);t&&(n?Ju(n)&&(o=Xv(n)):o=Xv(e));const s=gde(i,r,n)?vG(i):Jd(0);let l=(a.left+s.x)/o.x,u=(a.top+s.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=gc(i),m=n&&Ju(n)?gc(n):n;let x=h,g=YT(x);for(;g&&n&&m!==x;){const y=Xv(g),_=g.getBoundingClientRect(),b=Qu(g),S=_.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,C=_.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,f*=y.y,l+=S,u+=C,x=gc(g),g=YT(x)}}return p5({width:d,height:f,x:l,y:u})}function aD(e,t){const r=h4(e).scrollLeft;return t?t.left+r:X0(hf(e)).left+r}function yG(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:aD(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function vde(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=hf(n),s=t?f4(t.floating):!1;if(n===o||s&&i)return r;let l={scrollLeft:0,scrollTop:0},u=Jd(1);const d=Jd(0),f=sf(n);if((f||!f&&!i)&&((ly(n)!=="body"||Tw(o))&&(l=h4(n)),sf(n))){const m=X0(n);u=Xv(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?yG(o,l,!0):Jd(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-l.scrollTop*u.y+d.y+h.y}}function yde(e){return Array.from(e.getClientRects())}function xde(e){const t=hf(e),r=h4(e),n=e.ownerDocument.body,a=sc(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=sc(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+aD(e);const s=-r.scrollTop;return Qu(n).direction==="rtl"&&(o+=sc(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:s}}function wde(e,t){const r=gc(e),n=hf(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;const u=rD();(!u||u&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:s,y:l}}function _de(e,t){const r=X0(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=sf(e)?Xv(e):Jd(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,l=a*i.x,u=n*i.y;return{width:o,height:s,x:l,y:u}}function xF(e,t,r){let n;if(t==="viewport")n=wde(e,r);else if(t==="document")n=xde(hf(e));else if(Ju(t))n=_de(t,r);else{const a=vG(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return p5(n)}function xG(e,t){const r=um(e);return r===t||!Ju(r)||v1(r)?!1:Qu(r).position==="fixed"||xG(r,t)}function bde(e,t){const r=t.get(e);if(r)return r;let n=ox(e,[],!1).filter(s=>Ju(s)&&ly(s)!=="body"),a=null;const i=Qu(e).position==="fixed";let o=i?um(e):e;for(;Ju(o)&&!v1(o);){const s=Qu(o),l=tD(o);!l&&s.position==="fixed"&&(a=null),(i?!l&&!a:!l&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Tw(o)&&!l&&xG(e,o))?n=n.filter(d=>d!==o):a=s,o=um(o)}return t.set(e,n),n}function Sde(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?f4(t)?[]:bde(t,this._c):[].concat(r),n],s=o[0],l=o.reduce((u,d)=>{const f=xF(t,d,a);return u.top=sc(f.top,u.top),u.right=lm(f.right,u.right),u.bottom=lm(f.bottom,u.bottom),u.left=sc(f.left,u.left),u},xF(t,s,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ade(e){const{width:t,height:r}=gG(e);return{width:t,height:r}}function Nde(e,t,r){const n=sf(t),a=hf(t),i=r==="fixed",o=X0(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Jd(0);if(n||!n&&!i)if((ly(t)!=="body"||Tw(a))&&(s=h4(t)),n){const h=X0(t,!0,i,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else a&&(l.x=aD(a));const u=a&&!n&&!i?yG(a,s):Jd(0),d=o.left+s.scrollLeft-l.x-u.x,f=o.top+s.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function eN(e){return Qu(e).position==="static"}function wF(e,t){if(!sf(e)||Qu(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return hf(e)===r&&(r=r.ownerDocument.body),r}function wG(e,t){const r=gc(e);if(f4(e))return r;if(!sf(e)){let a=um(e);for(;a&&!v1(a);){if(Ju(a)&&!eN(a))return a;a=um(a)}return r}let n=wF(e,t);for(;n&&hde(n)&&eN(n);)n=wF(n,t);return n&&v1(n)&&eN(n)&&!tD(n)?r:n||pde(e)||r}const kde=async function(e){const t=this.getOffsetParent||wG,r=this.getDimensions,n=await r(e.floating);return{reference:Nde(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Ede(e){return Qu(e).direction==="rtl"}const Cde={convertOffsetParentRelativeRectToViewportRelativeRect:vde,getDocumentElement:hf,getClippingRect:Sde,getOffsetParent:wG,getElementRects:kde,getClientRects:yde,getDimensions:Ade,getScale:Xv,isElement:Ju,isRTL:Ede};function _G(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Pde(e,t){let r=null,n;const a=hf(e);function i(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(s||t(),!h||!m)return;const x=K_(f),g=K_(a.clientWidth-(d+h)),y=K_(a.clientHeight-(f+m)),_=K_(d),S={rootMargin:-x+"px "+-g+"px "+-y+"px "+-_+"px",threshold:sc(0,lm(1,l))||1};let C=!0;function E(O){const T=O[0].intersectionRatio;if(T!==l){if(!C)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!_G(u,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(E,{...S,root:a.ownerDocument})}catch{r=new IntersectionObserver(E,S)}r.observe(e)}return o(!0),i}function Tde(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=nD(e),d=a||i?[...u?ox(u):[],...ox(t)]:[];d.forEach(_=>{a&&_.addEventListener("scroll",r,{passive:!0}),i&&_.addEventListener("resize",r)});const f=u&&s?Pde(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(_=>{let[b]=_;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(t)})),r()}),u&&!l&&m.observe(u),m.observe(t));let x,g=l?X0(e):null;l&&y();function y(){const _=X0(e);g&&!_G(g,_)&&r(),g=_,x=requestAnimationFrame(y)}return r(),()=>{var _;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f==null||f(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(x)}}const Ode=cde,Dde=ude,Ide=ode,Rde=fde,Mde=sde,_F=ide,Fde=dde,Lde=(e,t,r)=>{const n=new Map,a={platform:Cde,...r},i={...a.platform,_c:n};return ade(e,t,{...a,platform:i})};var qb=typeof document<"u"?A.useLayoutEffect:A.useEffect;function m5(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!m5(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!m5(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function bG(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function bF(e,t){const r=bG(e);return Math.round(t*r)/r}function tN(e){const t=A.useRef(e);return qb(()=>{t.current=e}),t}function jde(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[d,f]=A.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=A.useState(n);m5(h,n)||m(n);const[x,g]=A.useState(null),[y,_]=A.useState(null),b=A.useCallback(Y=>{Y!==O.current&&(O.current=Y,g(Y))},[]),S=A.useCallback(Y=>{Y!==T.current&&(T.current=Y,_(Y))},[]),C=i||x,E=o||y,O=A.useRef(null),T=A.useRef(null),M=A.useRef(d),L=l!=null,z=tN(l),P=tN(a),R=tN(u),j=A.useCallback(()=>{if(!O.current||!T.current)return;const Y={placement:t,strategy:r,middleware:h};P.current&&(Y.platform=P.current),Lde(O.current,T.current,Y).then(U=>{const G={...U,isPositioned:R.current!==!1};V.current&&!m5(M.current,G)&&(M.current=G,ny.flushSync(()=>{f(G)}))})},[h,t,r,P,R]);qb(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(Y=>({...Y,isPositioned:!1})))},[u]);const V=A.useRef(!1);qb(()=>(V.current=!0,()=>{V.current=!1}),[]),qb(()=>{if(C&&(O.current=C),E&&(T.current=E),C&&E){if(z.current)return z.current(C,E,j);j()}},[C,E,j,z,L]);const Z=A.useMemo(()=>({reference:O,floating:T,setReference:b,setFloating:S}),[b,S]),te=A.useMemo(()=>({reference:C,floating:E}),[C,E]),q=A.useMemo(()=>{const Y={position:r,left:0,top:0};if(!te.floating)return Y;const U=bF(te.floating,d.x),G=bF(te.floating,d.y);return s?{...Y,transform:"translate("+U+"px, "+G+"px)",...bG(te.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:G}},[r,s,te.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:j,refs:Z,elements:te,floatingStyles:q}),[d,j,Z,te,q])}const $de=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?_F({element:n.current,padding:a}).fn(r):{}:n?_F({element:n,padding:a}).fn(r):{}}}},Bde=(e,t)=>({...Ode(e),options:[e,t]}),Ude=(e,t)=>({...Dde(e),options:[e,t]}),qde=(e,t)=>({...Fde(e),options:[e,t]}),zde=(e,t)=>({...Ide(e),options:[e,t]}),Wde=(e,t)=>({...Rde(e),options:[e,t]}),Vde=(e,t)=>({...Mde(e),options:[e,t]}),Hde=(e,t)=>({...$de(e),options:[e,t]});var Gde="Arrow",SG=A.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return c(pr.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:c("polygon",{points:"0,0 30,0 15,10"})})});SG.displayName=Gde;var Kde=SG;function p4(e){const[t,r]=A.useState(void 0);return ii(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=e.offsetWidth,s=e.offsetHeight;r({width:o,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var iD="Popper",[AG,Em]=eo(iD),[Yde,NG]=AG(iD),kG=e=>{const{__scopePopper:t,children:r}=e,[n,a]=A.useState(null);return c(Yde,{scope:t,anchor:n,onAnchorChange:a,children:r})};kG.displayName=iD;var EG="PopperAnchor",CG=A.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=NG(EG,r),o=A.useRef(null),s=Hr(t,o);return A.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:c(pr.div,{...a,ref:s})});CG.displayName=EG;var oD="PopperContent",[Xde,Zde]=AG(oD),PG=A.forwardRef((e,t)=>{var fe,ie,X,ue,de,re;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:x,...g}=e,y=NG(oD,r),[_,b]=A.useState(null),S=Hr(t,ke=>b(ke)),[C,E]=A.useState(null),O=p4(C),T=(O==null?void 0:O.width)??0,M=(O==null?void 0:O.height)??0,L=n+(i!=="center"?"-"+i:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],R=P.length>0,j={padding:z,boundary:P.filter(Qde),altBoundary:R},{refs:V,floatingStyles:Z,placement:te,isPositioned:q,middlewareData:Y}=jde({strategy:"fixed",placement:L,whileElementsMounted:(...ke)=>Tde(...ke,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Bde({mainAxis:a+M,alignmentAxis:o}),l&&Ude({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qde():void 0,...j}),l&&zde({...j}),Wde({...j,apply:({elements:ke,rects:Re,availableWidth:Pe,availableHeight:ge})=>{const{width:Ye,height:Qe}=Re.reference,st=ke.floating.style;st.setProperty("--radix-popper-available-width",`${Pe}px`),st.setProperty("--radix-popper-available-height",`${ge}px`),st.setProperty("--radix-popper-anchor-width",`${Ye}px`),st.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),C&&Hde({element:C,padding:s}),efe({arrowWidth:T,arrowHeight:M}),h&&Vde({strategy:"referenceHidden",...j})]}),[U,G]=DG(te),J=Pi(x);ii(()=>{q&&(J==null||J())},[q,J]);const D=(fe=Y.arrow)==null?void 0:fe.x,K=(ie=Y.arrow)==null?void 0:ie.y,Q=((X=Y.arrow)==null?void 0:X.centerOffset)!==0,[ae,se]=A.useState();return ii(()=>{_&&se(window.getComputedStyle(_).zIndex)},[_]),c("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:q?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(ue=Y.transformOrigin)==null?void 0:ue.x,(de=Y.transformOrigin)==null?void 0:de.y].join(" "),...((re=Y.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c(Xde,{scope:r,placedSide:U,onArrowChange:E,arrowX:D,arrowY:K,shouldHideArrow:Q,children:c(pr.div,{"data-side":U,"data-align":G,...g,ref:S,style:{...g.style,animation:q?void 0:"none"}})})})});PG.displayName=oD;var TG="PopperArrow",Jde={top:"bottom",right:"left",bottom:"top",left:"right"},OG=A.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=Zde(TG,n),o=Jde[i.placedSide];return c("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c(Kde,{...a,ref:r,style:{...a.style,display:"block"}})})});OG.displayName=TG;function Qde(e){return e!==null}var efe=e=>({name:"transformOrigin",options:e,fn(t){var y,_,b;const{placement:r,rects:n,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,s=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[u,d]=DG(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((_=a.arrow)==null?void 0:_.x)??0)+s/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+l/2;let x="",g="";return u==="bottom"?(x=o?f:`${h}px`,g=`${-l}px`):u==="top"?(x=o?f:`${h}px`,g=`${n.floating.height+l}px`):u==="right"?(x=`${-l}px`,g=o?f:`${m}px`):u==="left"&&(x=`${n.floating.width+l}px`,g=o?f:`${m}px`),{data:{x,y:g}}}});function DG(e){const[t,r="center"]=e.split("-");return[t,r]}var m4=kG,Ow=CG,g4=PG,v4=OG,tfe="Portal",cy=A.forwardRef((e,t)=>{var s;const{container:r,...n}=e,[a,i]=A.useState(!1);ii(()=>i(!0),[]);const o=r||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?Zse.createPortal(c(pr.div,{...n,ref:t}),o):null});cy.displayName=tfe;function rfe(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var cs=e=>{const{present:t,children:r}=e,n=nfe(t),a=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=Hr(n.ref,afe(a));return typeof r=="function"||n.isPresent?A.cloneElement(a,{ref:i}):null};cs.displayName="Presence";function nfe(e){const[t,r]=A.useState(),n=A.useRef({}),a=A.useRef(e),i=A.useRef("none"),o=e?"mounted":"unmounted",[s,l]=rfe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const u=Y_(n.current);i.current=s==="mounted"?u:"none"},[s]),ii(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Y_(u);e?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),ii(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=Y_(n.current).includes(m.animationName);if(m.target===t&&g&&(l("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=Y_(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:A.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Y_(e){return(e==null?void 0:e.animationName)||"none"}function afe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var rN="rovingFocusGroup.onEntryFocus",ife={bubbles:!1,cancelable:!0},Dw="RovingFocusGroup",[XT,IG,ofe]=Cw(Dw),[sfe,uy]=eo(Dw,[ofe]),[lfe,cfe]=sfe(Dw),RG=A.forwardRef((e,t)=>c(XT.Provider,{scope:e.__scopeRovingFocusGroup,children:c(XT.Slot,{scope:e.__scopeRovingFocusGroup,children:c(ufe,{...e,ref:t})})}));RG.displayName=Dw;var ufe=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=A.useRef(null),m=Hr(t,h),x=wg(i),[g,y]=hl({prop:o,defaultProp:s??null,onChange:l,caller:Dw}),[_,b]=A.useState(!1),S=Pi(u),C=IG(r),E=A.useRef(!1),[O,T]=A.useState(0);return A.useEffect(()=>{const M=h.current;if(M)return M.addEventListener(rN,S),()=>M.removeEventListener(rN,S)},[S]),c(lfe,{scope:r,orientation:n,dir:x,loop:a,currentTabStopId:g,onItemFocus:A.useCallback(M=>y(M),[y]),onItemShiftTab:A.useCallback(()=>b(!0),[]),onFocusableItemAdd:A.useCallback(()=>T(M=>M+1),[]),onFocusableItemRemove:A.useCallback(()=>T(M=>M-1),[]),children:c(pr.div,{tabIndex:_||O===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Wt(e.onMouseDown,()=>{E.current=!0}),onFocus:Wt(e.onFocus,M=>{const L=!E.current;if(M.target===M.currentTarget&&L&&!_){const z=new CustomEvent(rN,ife);if(M.currentTarget.dispatchEvent(z),!z.defaultPrevented){const P=C().filter(te=>te.focusable),R=P.find(te=>te.active),j=P.find(te=>te.id===g),Z=[R,j,...P].filter(Boolean).map(te=>te.ref.current);LG(Z,d)}}E.current=!1}),onBlur:Wt(e.onBlur,()=>b(!1))})})}),MG="RovingFocusGroupItem",FG=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...s}=e,l=Ll(),u=i||l,d=cfe(MG,r),f=d.currentTabStopId===u,h=IG(r),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:g}=d;return A.useEffect(()=>{if(n)return m(),()=>x()},[n,m,x]),c(XT.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:c(pr.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...s,ref:t,onMouseDown:Wt(e.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:Wt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Wt(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const _=hfe(y,d.orientation,d.dir);if(_!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let S=h().filter(C=>C.focusable).map(C=>C.ref.current);if(_==="last")S.reverse();else if(_==="prev"||_==="next"){_==="prev"&&S.reverse();const C=S.indexOf(y.currentTarget);S=d.loop?pfe(S,C+1):S.slice(C+1)}setTimeout(()=>LG(S))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});FG.displayName=MG;var dfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ffe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function hfe(e,t,r){const n=ffe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return dfe[n]}function LG(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function pfe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var sD=RG,lD=FG,mfe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hv=new WeakMap,X_=new WeakMap,Z_={},nN=0,jG=function(e){return e&&(e.host||jG(e.parentNode))},gfe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=jG(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},vfe=function(e,t,r,n){var a=gfe(t,Array.isArray(e)?e:[e]);Z_[r]||(Z_[r]=new WeakMap);var i=Z_[r],o=[],s=new Set,l=new Set(a),u=function(f){!f||s.has(f)||(s.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(s.has(h))d(h);else try{var m=h.getAttribute(n),x=m!==null&&m!=="false",g=(hv.get(h)||0)+1,y=(i.get(h)||0)+1;hv.set(h,g),i.set(h,y),o.push(h),g===1&&x&&X_.set(h,!0),y===1&&h.setAttribute(r,"true"),x||h.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return d(t),s.clear(),nN++,function(){o.forEach(function(f){var h=hv.get(f)-1,m=i.get(f)-1;hv.set(f,h),i.set(f,m),h||(X_.has(f)||f.removeAttribute(n),X_.delete(f)),m||f.removeAttribute(r)}),nN--,nN||(hv=new WeakMap,hv=new WeakMap,X_=new WeakMap,Z_={})}},y4=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=mfe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),vfe(n,a,r,"aria-hidden")):function(){return null}},zd=function(){return zd=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},zd.apply(this,arguments)};function $G(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function yfe(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var zb="right-scroll-bar-position",Wb="width-before-scroll-bar",xfe="with-scroll-bars-hidden",wfe="--removed-body-scroll-bar-size";function aN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function _fe(e,t){var r=A.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var bfe=typeof window<"u"?A.useLayoutEffect:A.useEffect,SF=new WeakMap;function Sfe(e,t){var r=_fe(null,function(n){return e.forEach(function(a){return aN(a,n)})});return bfe(function(){var n=SF.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(s){i.has(s)||aN(s,null)}),i.forEach(function(s){a.has(s)||aN(s,o)})}SF.set(r,e)},[e]),r}function Afe(e){return e}function Nfe(e,t){t===void 0&&(t=Afe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(s){return i(s)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var s=r;r=[],s.forEach(i),o=r}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function kfe(e){e===void 0&&(e={});var t=Nfe(null);return t.options=zd({async:!0,ssr:!1},e),t}var BG=function(e){var t=e.sideCar,r=$G(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return A.createElement(n,zd({},r))};BG.isSideCarExport=!0;function Efe(e,t){return e.useMedium(t),BG}var UG=kfe(),iN=function(){},x4=A.forwardRef(function(e,t){var r=A.useRef(null),n=A.useState({onScrollCapture:iN,onWheelCapture:iN,onTouchMoveCapture:iN}),a=n[0],i=n[1],o=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,x=e.inert,g=e.allowPinchZoom,y=e.as,_=y===void 0?"div":y,b=e.gapMode,S=$G(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,E=Sfe([r,t]),O=zd(zd({},S),a);return A.createElement(A.Fragment,null,d&&A.createElement(C,{sideCar:UG,removeScrollBar:u,shards:f,noIsolation:m,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:b}),o?A.cloneElement(A.Children.only(s),zd(zd({},O),{ref:E})):A.createElement(_,zd({},O,{className:l,ref:E}),s))});x4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};x4.classNames={fullWidth:Wb,zeroRight:zb};var Cfe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Pfe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Cfe();return t&&e.setAttribute("nonce",t),e}function Tfe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ofe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Dfe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Pfe())&&(Tfe(t,r),Ofe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ife=function(){var e=Dfe();return function(t,r){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},qG=function(){var e=Ife(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Rfe={left:0,top:0,right:0,gap:0},oN=function(e){return parseInt(e||"",10)||0},Mfe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[oN(r),oN(n),oN(a)]},Ffe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rfe;var t=Mfe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Lfe=qG(),Zv="data-scroll-locked",jfe=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,s=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(xfe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(Zv,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zb,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Wb,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(zb," .").concat(zb,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Wb," .").concat(Wb,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Zv,`] {
    `).concat(wfe,": ").concat(s,`px;
  }
`)},AF=function(){var e=parseInt(document.body.getAttribute(Zv)||"0",10);return isFinite(e)?e:0},$fe=function(){A.useEffect(function(){return document.body.setAttribute(Zv,(AF()+1).toString()),function(){var e=AF()-1;e<=0?document.body.removeAttribute(Zv):document.body.setAttribute(Zv,e.toString())}},[])},Bfe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;$fe();var i=A.useMemo(function(){return Ffe(a)},[a]);return A.createElement(Lfe,{styles:jfe(i,!t,a,r?"":"!important")})},ZT=!1;if(typeof window<"u")try{var J_=Object.defineProperty({},"passive",{get:function(){return ZT=!0,!0}});window.addEventListener("test",J_,J_),window.removeEventListener("test",J_,J_)}catch{ZT=!1}var pv=ZT?{passive:!1}:!1,Ufe=function(e){return e.tagName==="TEXTAREA"},zG=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Ufe(e)&&r[t]==="visible")},qfe=function(e){return zG(e,"overflowY")},zfe=function(e){return zG(e,"overflowX")},NF=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=WG(e,n);if(a){var i=VG(e,n),o=i[1],s=i[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Wfe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Vfe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},WG=function(e,t){return e==="v"?qfe(t):zfe(t)},VG=function(e,t){return e==="v"?Wfe(t):Vfe(t)},Hfe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Gfe=function(e,t,r,n,a){var i=Hfe(e,window.getComputedStyle(t).direction),o=i*n,s=r.target,l=t.contains(s),u=!1,d=o>0,f=0,h=0;do{var m=VG(e,s),x=m[0],g=m[1],y=m[2],_=g-y-i*x;(x||_)&&WG(e,s)&&(f+=_,h+=x),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Q_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kF=function(e){return[e.deltaX,e.deltaY]},EF=function(e){return e&&"current"in e?e.current:e},Kfe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Yfe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Xfe=0,mv=[];function Zfe(e){var t=A.useRef([]),r=A.useRef([0,0]),n=A.useRef(),a=A.useState(Xfe++)[0],i=A.useState(qG)[0],o=A.useRef(e);A.useEffect(function(){o.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=yfe([e.lockRef.current],(e.shards||[]).map(EF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=A.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var _=Q_(g),b=r.current,S="deltaX"in g?g.deltaX:b[0]-_[0],C="deltaY"in g?g.deltaY:b[1]-_[1],E,O=g.target,T=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in g&&T==="h"&&O.type==="range")return!1;var M=NF(T,O);if(!M)return!0;if(M?E=T:(E=T==="v"?"h":"v",M=NF(T,O)),!M)return!1;if(!n.current&&"changedTouches"in g&&(S||C)&&(n.current=E),!E)return!0;var L=n.current||E;return Gfe(L,y,g,L==="h"?S:C)},[]),l=A.useCallback(function(g){var y=g;if(!(!mv.length||mv[mv.length-1]!==i)){var _="deltaY"in y?kF(y):Q_(y),b=t.current.filter(function(E){return E.name===y.type&&(E.target===y.target||y.target===E.shadowParent)&&Kfe(E.delta,_)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var S=(o.current.shards||[]).map(EF).filter(Boolean).filter(function(E){return E.contains(y.target)}),C=S.length>0?s(y,S[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),u=A.useCallback(function(g,y,_,b){var S={name:g,delta:y,target:_,should:b,shadowParent:Jfe(_)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(C){return C!==S})},1)},[]),d=A.useCallback(function(g){r.current=Q_(g),n.current=void 0},[]),f=A.useCallback(function(g){u(g.type,kF(g),g.target,s(g,e.lockRef.current))},[]),h=A.useCallback(function(g){u(g.type,Q_(g),g.target,s(g,e.lockRef.current))},[]);A.useEffect(function(){return mv.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,pv),document.addEventListener("touchmove",l,pv),document.addEventListener("touchstart",d,pv),function(){mv=mv.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,pv),document.removeEventListener("touchmove",l,pv),document.removeEventListener("touchstart",d,pv)}},[]);var m=e.removeScrollBar,x=e.inert;return A.createElement(A.Fragment,null,x?A.createElement(i,{styles:Yfe(a)}):null,m?A.createElement(Bfe,{gapMode:e.gapMode}):null)}function Jfe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Qfe=Efe(UG,Zfe);var Iw=A.forwardRef(function(e,t){return A.createElement(x4,zd({},e,{ref:t,sideCar:Qfe}))});Iw.classNames=x4.classNames;var JT=["Enter"," "],ehe=["ArrowDown","PageUp","Home"],HG=["ArrowUp","PageDown","End"],the=[...ehe,...HG],rhe={ltr:[...JT,"ArrowRight"],rtl:[...JT,"ArrowLeft"]},nhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rw="Menu",[sx,ahe,ihe]=Cw(Rw),[bg,GG]=eo(Rw,[ihe,Em,uy]),w4=Em(),KG=uy(),[ohe,Sg]=bg(Rw),[she,Mw]=bg(Rw),YG=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,s=w4(t),[l,u]=A.useState(null),d=A.useRef(!1),f=Pi(i),h=wg(a);return A.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),c(m4,{...s,children:c(ohe,{scope:t,open:r,onOpenChange:f,content:l,onContentChange:u,children:c(she,{scope:t,onClose:A.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};YG.displayName=Rw;var lhe="MenuAnchor",cD=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=w4(r);return c(Ow,{...a,...n,ref:t})});cD.displayName=lhe;var uD="MenuPortal",[che,XG]=bg(uD,{forceMount:void 0}),ZG=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Sg(uD,t);return c(che,{scope:t,forceMount:r,children:c(cs,{present:r||i.open,children:c(cy,{asChild:!0,container:a,children:n})})})};ZG.displayName=uD;var eu="MenuContent",[uhe,dD]=bg(eu),JG=A.forwardRef((e,t)=>{const r=XG(eu,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Sg(eu,e.__scopeMenu),o=Mw(eu,e.__scopeMenu);return c(sx.Provider,{scope:e.__scopeMenu,children:c(cs,{present:n||i.open,children:c(sx.Slot,{scope:e.__scopeMenu,children:o.modal?c(dhe,{...a,ref:t}):c(fhe,{...a,ref:t})})})})}),dhe=A.forwardRef((e,t)=>{const r=Sg(eu,e.__scopeMenu),n=A.useRef(null),a=Hr(t,n);return A.useEffect(()=>{const i=n.current;if(i)return y4(i)},[]),c(fD,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),fhe=A.forwardRef((e,t)=>{const r=Sg(eu,e.__scopeMenu);return c(fD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),hhe=sm("MenuContent.ScrollLock"),fD=A.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:x,...g}=e,y=Sg(eu,r),_=Mw(eu,r),b=w4(r),S=KG(r),C=ahe(r),[E,O]=A.useState(null),T=A.useRef(null),M=Hr(t,T,y.onContentChange),L=A.useRef(0),z=A.useRef(""),P=A.useRef(0),R=A.useRef(null),j=A.useRef("right"),V=A.useRef(0),Z=x?Iw:A.Fragment,te=x?{as:hhe,allowPinchZoom:!0}:void 0,q=U=>{var fe,ie;const G=z.current+U,J=C().filter(X=>!X.disabled),D=document.activeElement,K=(fe=J.find(X=>X.ref.current===D))==null?void 0:fe.textValue,Q=J.map(X=>X.textValue),ae=Nhe(Q,G,K),se=(ie=J.find(X=>X.textValue===ae))==null?void 0:ie.ref.current;(function X(ue){z.current=ue,window.clearTimeout(L.current),ue!==""&&(L.current=window.setTimeout(()=>X(""),1e3))})(G),se&&setTimeout(()=>se.focus())};A.useEffect(()=>()=>window.clearTimeout(L.current),[]),u4();const Y=A.useCallback(U=>{var J,D;return j.current===((J=R.current)==null?void 0:J.side)&&Ehe(U,(D=R.current)==null?void 0:D.area)},[]);return c(uhe,{scope:r,searchRef:z,onItemEnter:A.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),onItemLeave:A.useCallback(U=>{var G;Y(U)||((G=T.current)==null||G.focus(),O(null))},[Y]),onTriggerLeave:A.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),pointerGraceTimerRef:P,onPointerGraceIntentChange:A.useCallback(U=>{R.current=U},[]),children:c(Z,{...te,children:c(Pw,{asChild:!0,trapped:a,onMountAutoFocus:Wt(i,U=>{var G;U.preventDefault(),(G=T.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c(_g,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:c(sD,{asChild:!0,...S,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:E,onCurrentTabStopIdChange:O,onEntryFocus:Wt(l,U=>{_.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:c(g4,{role:"menu","aria-orientation":"vertical","data-state":pK(y.open),"data-radix-menu-content":"",dir:_.dir,...b,...g,ref:M,style:{outline:"none",...g.style},onKeyDown:Wt(g.onKeyDown,U=>{const J=U.target.closest("[data-radix-menu-content]")===U.currentTarget,D=U.ctrlKey||U.altKey||U.metaKey,K=U.key.length===1;J&&(U.key==="Tab"&&U.preventDefault(),!D&&K&&q(U.key));const Q=T.current;if(U.target!==Q||!the.includes(U.key))return;U.preventDefault();const se=C().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);HG.includes(U.key)&&se.reverse(),She(se)}),onBlur:Wt(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(L.current),z.current="")}),onPointerMove:Wt(e.onPointerMove,lx(U=>{const G=U.target,J=V.current!==U.clientX;if(U.currentTarget.contains(G)&&J){const D=U.clientX>V.current?"right":"left";j.current=D,V.current=U.clientX}}))})})})})})})});JG.displayName=eu;var phe="MenuGroup",hD=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return c(pr.div,{role:"group",...n,ref:t})});hD.displayName=phe;var mhe="MenuLabel",QG=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return c(pr.div,{...n,ref:t})});QG.displayName=mhe;var g5="MenuItem",CF="menu.itemSelect",_4=A.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=A.useRef(null),o=Mw(g5,e.__scopeMenu),s=dD(g5,e.__scopeMenu),l=Hr(t,i),u=A.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(CF,{bubbles:!0,cancelable:!0});f.addEventListener(CF,m=>n==null?void 0:n(m),{once:!0}),Z8(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return c(eK,{...a,ref:l,disabled:r,onClick:Wt(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:Wt(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Wt(e.onKeyDown,f=>{const h=s.searchRef.current!=="";r||h&&f.key===" "||JT.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});_4.displayName=g5;var eK=A.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=dD(g5,r),s=KG(r),l=A.useRef(null),u=Hr(t,l),[d,f]=A.useState(!1),[h,m]=A.useState("");return A.useEffect(()=>{const x=l.current;x&&m((x.textContent??"").trim())},[i.children]),c(sx.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:c(lD,{asChild:!0,...s,focusable:!n,children:c(pr.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Wt(e.onPointerMove,lx(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Wt(e.onPointerLeave,lx(x=>o.onItemLeave(x))),onFocus:Wt(e.onFocus,()=>f(!0)),onBlur:Wt(e.onBlur,()=>f(!1))})})})}),ghe="MenuCheckboxItem",tK=A.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return c(oK,{scope:e.__scopeMenu,checked:r,children:c(_4,{role:"menuitemcheckbox","aria-checked":v5(r)?"mixed":r,...a,ref:t,"data-state":mD(r),onSelect:Wt(a.onSelect,()=>n==null?void 0:n(v5(r)?!0:!r),{checkForDefaultPrevented:!1})})})});tK.displayName=ghe;var rK="MenuRadioGroup",[vhe,yhe]=bg(rK,{value:void 0,onValueChange:()=>{}}),nK=A.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Pi(n);return c(vhe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:c(hD,{...a,ref:t})})});nK.displayName=rK;var aK="MenuRadioItem",iK=A.forwardRef((e,t)=>{const{value:r,...n}=e,a=yhe(aK,e.__scopeMenu),i=r===a.value;return c(oK,{scope:e.__scopeMenu,checked:i,children:c(_4,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":mD(i),onSelect:Wt(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});iK.displayName=aK;var pD="MenuItemIndicator",[oK,xhe]=bg(pD,{checked:!1}),sK=A.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=xhe(pD,r);return c(cs,{present:n||v5(i.checked)||i.checked===!0,children:c(pr.span,{...a,ref:t,"data-state":mD(i.checked)})})});sK.displayName=pD;var whe="MenuSeparator",lK=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return c(pr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});lK.displayName=whe;var _he="MenuArrow",cK=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=w4(r);return c(v4,{...a,...n,ref:t})});cK.displayName=_he;var bhe="MenuSub",[NJe,uK]=bg(bhe),y2="MenuSubTrigger",dK=A.forwardRef((e,t)=>{const r=Sg(y2,e.__scopeMenu),n=Mw(y2,e.__scopeMenu),a=uK(y2,e.__scopeMenu),i=dD(y2,e.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>d,[d]),A.useEffect(()=>{const f=s.current;return()=>{window.clearTimeout(f),l(null)}},[s,l]),c(cD,{asChild:!0,...u,children:c(eK,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":pK(r.open),...e,ref:c4(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Wt(e.onPointerMove,lx(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Wt(e.onPointerLeave,lx(f=>{var m,x;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const g=(x=r.content)==null?void 0:x.dataset.side,y=g==="right",_=y?-5:5,b=h[y?"left":"right"],S=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:b,y:h.top},{x:S,y:h.top},{x:S,y:h.bottom},{x:b,y:h.bottom}],side:g}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Wt(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||rhe[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});dK.displayName=y2;var fK="MenuSubContent",hK=A.forwardRef((e,t)=>{const r=XG(eu,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Sg(eu,e.__scopeMenu),o=Mw(eu,e.__scopeMenu),s=uK(fK,e.__scopeMenu),l=A.useRef(null),u=Hr(t,l);return c(sx.Provider,{scope:e.__scopeMenu,children:c(cs,{present:n||i.open,children:c(sx.Slot,{scope:e.__scopeMenu,children:c(fD,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Wt(e.onFocusOutside,d=>{d.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Wt(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Wt(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=nhe[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=s.trigger)==null||m.focus(),d.preventDefault())})})})})})});hK.displayName=fK;function pK(e){return e?"open":"closed"}function v5(e){return e==="indeterminate"}function mD(e){return v5(e)?"indeterminate":e?"checked":"unchecked"}function She(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Ahe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Nhe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Ahe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==r?l:void 0}function khe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,f=l.x,h=l.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function Ehe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return khe(r,t)}function lx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Che=YG,Phe=cD,The=ZG,Ohe=JG,Dhe=hD,Ihe=QG,Rhe=_4,Mhe=tK,Fhe=nK,Lhe=iK,jhe=sK,$he=lK,Bhe=cK,Uhe=dK,qhe=hK,b4="DropdownMenu",[zhe,kJe]=eo(b4,[GG]),gl=GG(),[Whe,mK]=zhe(b4),gK=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,l=gl(t),u=A.useRef(null),[d,f]=hl({prop:a,defaultProp:i??!1,onChange:o,caller:b4});return c(Whe,{scope:t,triggerId:Ll(),triggerRef:u,contentId:Ll(),open:d,onOpenChange:f,onOpenToggle:A.useCallback(()=>f(h=>!h),[f]),modal:s,children:c(Che,{...l,open:d,onOpenChange:f,dir:n,modal:s,children:r})})};gK.displayName=b4;var vK="DropdownMenuTrigger",yK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=mK(vK,r),o=gl(r);return c(Phe,{asChild:!0,...o,children:c(pr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:c4(t,i.triggerRef),onPointerDown:Wt(e.onPointerDown,s=>{!n&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:Wt(e.onKeyDown,s=>{n||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});yK.displayName=vK;var Vhe="DropdownMenuPortal",xK=e=>{const{__scopeDropdownMenu:t,...r}=e,n=gl(t);return c(The,{...n,...r})};xK.displayName=Vhe;var wK="DropdownMenuContent",_K=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=mK(wK,r),i=gl(r),o=A.useRef(!1);return c(Ohe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Wt(e.onCloseAutoFocus,s=>{var l;o.current||(l=a.triggerRef.current)==null||l.focus(),o.current=!1,s.preventDefault()}),onInteractOutside:Wt(e.onInteractOutside,s=>{const l=s.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_K.displayName=wK;var Hhe="DropdownMenuGroup",Ghe=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Dhe,{...a,...n,ref:t})});Ghe.displayName=Hhe;var Khe="DropdownMenuLabel",bK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Ihe,{...a,...n,ref:t})});bK.displayName=Khe;var Yhe="DropdownMenuItem",SK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Rhe,{...a,...n,ref:t})});SK.displayName=Yhe;var Xhe="DropdownMenuCheckboxItem",AK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Mhe,{...a,...n,ref:t})});AK.displayName=Xhe;var Zhe="DropdownMenuRadioGroup",Jhe=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Fhe,{...a,...n,ref:t})});Jhe.displayName=Zhe;var Qhe="DropdownMenuRadioItem",NK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Lhe,{...a,...n,ref:t})});NK.displayName=Qhe;var epe="DropdownMenuItemIndicator",kK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(jhe,{...a,...n,ref:t})});kK.displayName=epe;var tpe="DropdownMenuSeparator",EK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c($he,{...a,...n,ref:t})});EK.displayName=tpe;var rpe="DropdownMenuArrow",npe=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Bhe,{...a,...n,ref:t})});npe.displayName=rpe;var ape="DropdownMenuSubTrigger",CK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(Uhe,{...a,...n,ref:t})});CK.displayName=ape;var ipe="DropdownMenuSubContent",PK=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=gl(r);return c(qhe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});PK.displayName=ipe;var ope=gK,spe=yK,lpe=xK,TK=_K,OK=bK,DK=SK,IK=AK,RK=NK,MK=kK,FK=EK,LK=CK,jK=PK;const cpe=ope,upe=spe,dpe=A.forwardRef(({className:e,inset:t,children:r,...n},a)=>w(LK,{ref:a,className:Rt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,c(im,{className:"ml-auto h-4 w-4"})]}));dpe.displayName=LK.displayName;const fpe=A.forwardRef(({className:e,...t},r)=>c(jK,{ref:r,className:Rt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));fpe.displayName=jK.displayName;const $K=A.forwardRef(({className:e,sideOffset:t=4,...r},n)=>c(lpe,{children:c(TK,{ref:n,sideOffset:t,className:Rt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));$K.displayName=TK.displayName;const x2=A.forwardRef(({className:e,inset:t,...r},n)=>c(DK,{ref:n,className:Rt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));x2.displayName=DK.displayName;const hpe=A.forwardRef(({className:e,children:t,checked:r,...n},a)=>w(IK,{ref:a,className:Rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[c("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c(MK,{children:c(g1,{className:"h-4 w-4"})})}),t]}));hpe.displayName=IK.displayName;const ppe=A.forwardRef(({className:e,children:t,...r},n)=>w(RK,{ref:n,className:Rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[c("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c(MK,{children:c(VH,{className:"h-2 w-2 fill-current"})})}),t]}));ppe.displayName=RK.displayName;const BK=A.forwardRef(({className:e,inset:t,...r},n)=>c(OK,{ref:n,className:Rt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));BK.displayName=OK.displayName;const QT=A.forwardRef(({className:e,...t},r)=>c(FK,{ref:r,className:Rt("-mx-1 my-1 h-px bg-muted",e),...t}));QT.displayName=FK.displayName;const ct=A.forwardRef(({className:e,type:t,...r},n)=>c("input",{type:t,className:Rt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ct.displayName="Input";var sN={exports:{}},lN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PF;function mpe(){if(PF)return lN;PF=1;var e=r4();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function s(f,h){var m=h(),x=n({inst:{value:m,getSnapshot:h}}),g=x[0].inst,y=x[1];return i(function(){g.value=m,g.getSnapshot=h,l(g)&&y({inst:g})},[f,m,h]),a(function(){return l(g)&&y({inst:g}),f(function(){l(g)&&y({inst:g})})},[f]),o(m),m}function l(f){var h=f.getSnapshot;f=f.value;try{var m=h();return!r(f,m)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:s;return lN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,lN}var TF;function gpe(){return TF||(TF=1,sN.exports=mpe()),sN.exports}var vpe=gpe();function ype(){return vpe.useSyncExternalStore(xpe,()=>!0,()=>!1)}function xpe(){return()=>{}}var gD="Avatar",[wpe,EJe]=eo(gD),[_pe,UK]=wpe(gD),qK=A.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=A.useState("idle");return c(_pe,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:c(pr.span,{...n,ref:t})})});qK.displayName=gD;var zK="AvatarImage",WK=A.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=UK(zK,r),s=bpe(n,i),l=Pi(u=>{a(u),o.onImageLoadingStatusChange(u)});return ii(()=>{s!=="idle"&&l(s)},[s,l]),s==="loaded"?c(pr.img,{...i,ref:t,src:n}):null});WK.displayName=zK;var VK="AvatarFallback",HK=A.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=UK(VK,r),[o,s]=A.useState(n===void 0);return A.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>s(!0),n);return()=>window.clearTimeout(l)}},[n]),o&&i.imageLoadingStatus!=="loaded"?c(pr.span,{...a,ref:t}):null});HK.displayName=VK;function OF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bpe(e,{referrerPolicy:t,crossOrigin:r}){const n=ype(),a=A.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,s]=A.useState(()=>OF(i,e));return ii(()=>{s(OF(i,e))},[i,e]),ii(()=>{const l=f=>()=>{s(f)};if(!i)return;const u=l("loaded"),d=l("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var GK=qK,KK=WK,YK=HK;const vD=A.forwardRef(({className:e,...t},r)=>c(GK,{ref:r,className:Rt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));vD.displayName=GK.displayName;const yD=A.forwardRef(({className:e,...t},r)=>c(KK,{ref:r,className:Rt("aspect-square h-full w-full",e),...t}));yD.displayName=KK.displayName;const xD=A.forwardRef(({className:e,...t},r)=>c(YK,{ref:r,className:Rt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));xD.displayName=YK.displayName;const Spe="modulepreload",Ape=function(e){return"/DentalCare-Pro/"+e},DF={},xh=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=o(r.map(u=>{if(u=Ape(u),u in DF)return;DF[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Spe,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return a.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})},Npe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>dy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class wD extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class kpe extends wD{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Epe extends wD{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Cpe extends wD{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var e6;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(e6||(e6={}));var Ppe=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};class Tpe{constructor(t,{headers:r={},customFetch:n,region:a=e6.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Npe(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Ppe(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let s={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(s["x-region"]=l);let u;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(s["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(s["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),a),body:u}).catch(x=>{throw new kpe(x)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Epe(d);if(!d.ok)throw new Cpe(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Do={},gv={},vv={},yv={},xv={},wv={},Ope=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},y1=Ope();const Dpe=y1.fetch,XK=y1.fetch.bind(y1),ZK=y1.Headers,Ipe=y1.Request,Rpe=y1.Response,dy=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZK,Request:Ipe,Response:Rpe,default:XK,fetch:Dpe},Symbol.toStringTag,{value:"Module"})),Mpe=Wse(dy);var eb={},IF;function JK(){if(IF)return eb;IF=1,Object.defineProperty(eb,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return eb.default=e,eb}var RF;function QK(){if(RF)return wv;RF=1;var e=wv&&wv.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wv,"__esModule",{value:!0});const t=e(Mpe),r=e(JK());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h;let m=null,x=null,g=null,y=u.status,_=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=E:x=JSON.parse(E))}const S=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),C=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");S&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(m={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,g=null,y=406,_="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const S=await u.text();try{m=JSON.parse(S),Array.isArray(m)&&u.status===404&&(x=[],m=null,y=200,_="OK")}catch{u.status===404&&S===""?(y=204,_="No Content"):m={message:S}}if(m&&this.isMaybeSingle&&(!((h=m==null?void 0:m.details)===null||h===void 0)&&h.includes("0 rows"))&&(m=null,y=200,_="OK"),m&&this.shouldThrowOnError)throw new r.default(m)}return{error:m,data:x,count:g,status:y,statusText:_}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return wv.default=n,wv}var MF;function eY(){if(MF)return xv;MF=1;var e=xv&&xv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xv,"__esModule",{value:!0});const t=e(QK());class r extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(s=>/\s/.test(s)&&!i?"":(s==='"'&&(i=!i),s)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.Accept)!==null&&d!==void 0?d:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`,u==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return xv.default=r,xv}var FF;function _D(){if(FF)return yv;FF=1;var e=yv&&yv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yv,"__esModule",{value:!0});const t=e(eY());class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${l}fts${u}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const s=o?`${o}.or`:"or";return this.url.searchParams.append(s,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return yv.default=r,yv}var LF;function tY(){if(LF)return vv;LF=1;var e=vv&&vv.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vv,"__esModule",{value:!0});const t=e(_D());class r{constructor(a,{headers:i={},schema:o,fetch:s}){this.url=a,this.headers=i,this.schema=o,this.fetch=s}select(a,{head:i=!1,count:o}={}){const s=i?"HEAD":"GET";let l=!1;const u=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:i,defaultToNull:o=!0}={}){const s="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){const u="POST",d=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&d.push(this.headers.Prefer),s&&d.push(`count=${s}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:i}={}){const o="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),i&&s.push(`count=${i}`),this.headers.Prefer=s.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const i="DELETE",o=[];return a&&o.push(`count=${a}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return vv.default=r,vv}var Xy={},Zy={},jF;function Fpe(){return jF||(jF=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.version=void 0,Zy.version="0.0.0-automated"),Zy}var $F;function Lpe(){if($F)return Xy;$F=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.DEFAULT_HEADERS=void 0;const e=Fpe();return Xy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Xy}var BF;function jpe(){if(BF)return gv;BF=1;var e=gv&&gv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gv,"__esModule",{value:!0});const t=e(tY()),r=e(_D()),n=Lpe();class a{constructor(o,{headers:s={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),s),this.schemaName=l,this.fetch=u}from(o){const s=new URL(`${this.url}/${o}`);return new t.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new a(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,s={},{head:l=!1,get:u=!1,count:d}={}){let f;const h=new URL(`${this.url}/rpc/${o}`);let m;l||u?(f=l?"HEAD":"GET",Object.entries(s).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{h.searchParams.append(g,y)})):(f="POST",m=s);const x=Object.assign({},this.headers);return d&&(x.Prefer=`count=${d}`),new r.default({method:f,url:h,headers:x,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return gv.default=a,gv}var UF;function $pe(){if(UF)return Do;UF=1;var e=Do&&Do.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Do,"__esModule",{value:!0}),Do.PostgrestError=Do.PostgrestBuilder=Do.PostgrestTransformBuilder=Do.PostgrestFilterBuilder=Do.PostgrestQueryBuilder=Do.PostgrestClient=void 0;const t=e(jpe());Do.PostgrestClient=t.default;const r=e(tY());Do.PostgrestQueryBuilder=r.default;const n=e(_D());Do.PostgrestFilterBuilder=n.default;const a=e(eY());Do.PostgrestTransformBuilder=a.default;const i=e(QK());Do.PostgrestBuilder=i.default;const o=e(JK());return Do.PostgrestError=o.default,Do.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},Do}var Bpe=$pe();const Upe=ia(Bpe),{PostgrestClient:qpe,PostgrestQueryBuilder:CJe,PostgrestFilterBuilder:PJe,PostgrestTransformBuilder:TJe,PostgrestBuilder:OJe,PostgrestError:DJe}=Upe,zpe="2.11.2",Wpe={"X-Client-Info":`realtime-js/${zpe}`},Vpe="1.0.0",rY=1e4,Hpe=1e3;var Jv;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jv||(Jv={}));var rc;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(rc||(rc={}));var Lu;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Lu||(Lu={}));var t6;(function(e){e.websocket="websocket"})(t6||(t6={}));var E0;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(E0||(E0={}));class Gpe{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const s=n.decode(t.slice(o,o+a));o=o+a;const l=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:s,event:l,payload:u}}}class nY{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ia;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ia||(Ia={}));const qF=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Kpe(o,e,t,a),i),{})},Kpe=(e,t,r,n)=>{const a=t.find(s=>s.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?aY(i,o):r6(o)},aY=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Jpe(t,r)}switch(e){case Ia.bool:return Ype(t);case Ia.float4:case Ia.float8:case Ia.int2:case Ia.int4:case Ia.int8:case Ia.numeric:case Ia.oid:return Xpe(t);case Ia.json:case Ia.jsonb:return Zpe(t);case Ia.timestamp:return Qpe(t);case Ia.abstime:case Ia.date:case Ia.daterange:case Ia.int4range:case Ia.int8range:case Ia.money:case Ia.reltime:case Ia.text:case Ia.time:case Ia.timestamptz:case Ia.timetz:case Ia.tsrange:case Ia.tstzrange:return r6(t);default:return r6(t)}},r6=e=>e,Ype=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Xpe=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Zpe=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Jpe=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(s=>aY(t,s))}return e},Qpe=e=>typeof e=="string"?e.replace(" ","T"):e,iY=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class cN{constructor(t,r,n={},a=rY){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zF;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zF||(zF={}));class O2{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=O2.syncState(this.state,a,i,o),this.pendingDiffs.forEach(l=>{this.state=O2.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=O2.syncDiff(this.state,a,i,o),s())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),s={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),x=d.filter(y=>m.indexOf(y.presence_ref)<0),g=f.filter(y=>h.indexOf(y.presence_ref)<0);x.length>0&&(s[u]=x),g.length>0&&(l[u]=g)}else s[u]=d}),this.syncDiff(i,{joins:s,leaves:l},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(s,l)=>{var u;const d=(u=t[s])!==null&&u!==void 0?u:[];if(t[s]=this.cloneDeep(l),d.length>0){const f=t[s].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[s].unshift(...h)}n(s,d,l)}),this.map(o,(s,l)=>{let u=t[s];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[s]=u,a(s,u,l),u.length===0&&delete t[s]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var WF;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(WF||(WF={}));var VF;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(VF||(VF={}));var ic;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ic||(ic={}));class bD{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=rc.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cN(this,Lu.join,this.params,this.timeout),this.rejoinTimer=new nY(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rc.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rc.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=rc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rc.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lu.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new O2(this),this.broadcastEndpointURL=iY(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:s}}=this.params;this._onError(d=>t==null?void 0:t(ic.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ic.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&a!==void 0?a:[],private:s};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(ic.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,x=[];for(let g=0;g<m;g++){const y=h[g],{filter:{event:_,schema:b,table:S,filter:C}}=y,E=d&&d[g];if(E&&E.event===_&&E.schema===b&&E.table===S&&E.filter===C)x.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),t==null||t(ic.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ic.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(ic.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ic.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,s,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=rc.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lu.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new cN(this,Lu.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cN(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:s,error:l,leave:u,join:d}=Lu;if(n&&[s,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var x,g,y;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,g,y,_,b,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,E=(x=m.filter)===null||x===void 0?void 0:x.event;return C&&((g=r.ids)===null||g===void 0?void 0:g.includes(C))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const C=(b=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:g,table:y,commit_timestamp:_,type:b,errors:S}=x;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:_,eventType:b,new:{},old:{},errors:S}),this._getPayloadRecords(x))}m.callback(h,n)})}_isClosed(){return this.state===rc.closed}_isJoined(){return this.state===rc.joined}_isJoining(){return this.state===rc.joining}_isLeaving(){return this.state===rc.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&bD.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Lu.close,{},t)}_onError(t){this._on(Lu.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rc.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=qF(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=qF(t.columns,t.old_record)),r}}const eme=()=>{},tme=typeof WebSocket<"u",rme=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nme{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Wpe,this.params={},this.timeout=rY,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=eme,this.conn=null,this.sendBuffer=[],this.serializer=new Gpe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...s)=>xh(async()=>{const{default:l}=await Promise.resolve().then(()=>dy);return{default:l}},void 0).then(({default:l})=>l(...s)):o=fetch,(...s)=>o(...s)},this.endPoint=`${t}/${t6.websocket}`,this.httpEndpoint=iY(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nY(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(tme){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new ame(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),xh(async()=>{const{default:t}=await import("./browser-2XsJ8PQI.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Vpe}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jv.connecting:return E0.Connecting;case Jv.open:return E0.Open;case Jv.closing:return E0.Closing;default:return E0.Closed}}isConnected(){return this.connectionState()===E0.Open}channel(t,r={config:{}}){const n=new bD(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(Lu.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Hpe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),this.channels.filter(s=>s._isMember(n)).forEach(s=>s._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(s=>s(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Lu.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([rme],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class ame{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Jv.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class SD extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Io(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ime extends SD{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class n6 extends SD{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var ome=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};const oY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>dy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},sme=()=>ome(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xh(()=>Promise.resolve().then(()=>dy),void 0)).Response:Response}),a6=e=>{if(Array.isArray(e))return e.map(r=>a6(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=a6(n)}),t};var Ag=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};const uN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lme=(e,t,r)=>Ag(void 0,void 0,void 0,function*(){const n=yield sme();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new ime(uN(a),e.status||500))}).catch(a=>{t(new n6(uN(a),a))}):t(new n6(uN(e),e))}),cme=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Fw(e,t,r,n,a,i){return Ag(this,void 0,void 0,function*(){return new Promise((o,s)=>{e(r,cme(t,n,a,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>lme(l,s,n))})})}function y5(e,t,r,n){return Ag(this,void 0,void 0,function*(){return Fw(e,"GET",t,r,n)})}function Up(e,t,r,n,a){return Ag(this,void 0,void 0,function*(){return Fw(e,"POST",t,n,a,r)})}function ume(e,t,r,n,a){return Ag(this,void 0,void 0,function*(){return Fw(e,"PUT",t,n,a,r)})}function dme(e,t,r,n){return Ag(this,void 0,void 0,function*(){return Fw(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function sY(e,t,r,n,a){return Ag(this,void 0,void 0,function*(){return Fw(e,"DELETE",t,n,a,r)})}var Tl=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};const fme={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},HF={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hme{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=oY(a)}uploadOrUpdate(t,r,n,a){return Tl(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},HF),a);let s=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),a!=null&&a.headers&&(s=Object.assign(Object.assign({},s),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Io(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Tl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Tl(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:HF.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(s.toString(),{method:"PUT",body:l,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Io(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return Tl(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Up(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),s=o.searchParams.get("token");if(!s)throw new SD("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:s},error:null}}catch(n){if(Io(n))return{data:null,error:n};throw n}})}update(t,r,n){return Tl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Tl(this,void 0,void 0,function*(){try{return{data:yield Up(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Io(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Tl(this,void 0,void 0,function*(){try{return{data:{path:(yield Up(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Io(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Tl(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Up(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(Io(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Tl(this,void 0,void 0,function*(){try{const a=yield Up(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(Io(a))return{data:null,error:a};throw a}})}download(t,r){return Tl(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const s=this._getFinalPath(t);return{data:yield(yield y5(this.fetch,`${this.url}/${a}/${s}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(Io(s))return{data:null,error:s};throw s}})}info(t){return Tl(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield y5(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:a6(n),error:null}}catch(n){if(Io(n))return{data:null,error:n};throw n}})}exists(t){return Tl(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield dme(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Io(n)&&n instanceof n6){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&a.push(l);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${u}`)}}}remove(t){return Tl(this,void 0,void 0,function*(){try{return{data:yield sY(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Io(r))return{data:null,error:r};throw r}})}list(t,r,n){return Tl(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},fme),r),{prefix:t||""});return{data:yield Up(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Io(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const pme="2.7.1",mme={"X-Client-Info":`storage-js/${pme}`};var _v=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};class gme{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},mme),r),this.fetch=oY(n)}listBuckets(){return _v(this,void 0,void 0,function*(){try{return{data:yield y5(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Io(t))return{data:null,error:t};throw t}})}getBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield y5(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Io(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return _v(this,void 0,void 0,function*(){try{return{data:yield Up(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Io(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return _v(this,void 0,void 0,function*(){try{return{data:yield ume(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Io(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield Up(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Io(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _v(this,void 0,void 0,function*(){try{return{data:yield sY(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Io(r))return{data:null,error:r};throw r}})}}class vme extends gme{constructor(t,r={},n){super(t,r,n)}from(t){return new hme(this.url,this.headers,t,this.fetch)}}const yme="2.49.4";let w2="";typeof Deno<"u"?w2="deno":typeof document<"u"?w2="web":typeof navigator<"u"&&navigator.product==="ReactNative"?w2="react-native":w2="node";const xme={"X-Client-Info":`supabase-js-${w2}/${yme}`},wme={headers:xme},_me={schema:"public"},bme={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sme={};var Ame=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};const Nme=e=>{let t;return e?t=e:typeof fetch>"u"?t=XK:t=fetch,(...r)=>t(...r)},kme=()=>typeof Headers>"u"?ZK:Headers,Eme=(e,t,r)=>{const n=Nme(r),a=kme();return(i,o)=>Ame(void 0,void 0,void 0,function*(){var s;const l=(s=yield t())!==null&&s!==void 0?s:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Cme=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};function Pme(e){return e.replace(/\/$/,"")}function Tme(e,t){const{db:r,auth:n,realtime:a,global:i}=e,{db:o,auth:s,realtime:l,global:u}=t,d={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},s),n),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign({},u),i),accessToken:()=>Cme(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const lY="2.69.1",Fv=30*1e3,i6=3,dN=i6*Fv,Ome="http://localhost:9999",Dme="supabase.auth.token",Ime={"X-Client-Info":`gotrue-js/${lY}`},o6="X-Supabase-Api-Version",cY={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rme=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Mme=6e5;class AD extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function wn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Fme extends AD{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Lme(e){return wn(e)&&e.name==="AuthApiError"}class uY extends AD{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Cm extends AD{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Lp extends Cm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jme(e){return wn(e)&&e.name==="AuthSessionMissingError"}class fN extends Cm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tb extends Cm{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class rb extends Cm{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $me(e){return wn(e)&&e.name==="AuthImplicitGrantRedirectError"}class GF extends Cm{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s6 extends Cm{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function hN(e){return wn(e)&&e.name==="AuthRetryableFetchError"}class KF extends Cm{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class D2 extends Cm{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const YF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),XF=` 	
\r=`.split(""),Bme=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<XF.length;t+=1)e[XF[t].charCodeAt(0)]=-2;for(let t=0;t<YF.length;t+=1)e[YF[t].charCodeAt(0)]=t;return e})();function dY(e,t,r){const n=Bme[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ZF(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{zme(o,n,r)};for(let o=0;o<e.length;o+=1)dY(e.charCodeAt(o),a,i);return t.join("")}function Ume(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function qme(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Ume(n,t)}}function zme(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wme(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)dY(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Vme(e){const t=[];return qme(e,r=>t.push(r)),new Uint8Array(t)}function Hme(e){return Math.round(Date.now()/1e3)+e}function Gme(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ld=()=>typeof window<"u"&&typeof document<"u",g0={tested:!1,writable:!1},I2=()=>{if(!Ld())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(g0.tested)return g0.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),g0.tested=!0,g0.writable=!0}catch{g0.tested=!0,g0.writable=!1}return g0.writable};function Kme(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const fY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xh(async()=>{const{default:n}=await Promise.resolve().then(()=>dy);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Yme=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hY=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},nb=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ab=async(e,t)=>{await e.removeItem(t)};class S4{constructor(){this.promise=new S4.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}S4.promiseConstructor=Promise;function pN(e){const t=e.split(".");if(t.length!==3)throw new D2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Rme.test(t[n]))throw new D2("JWT not in base64url format");return{header:JSON.parse(ZF(t[0])),payload:JSON.parse(ZF(t[1])),signature:Wme(t[2]),raw:{header:t[0],payload:t[1]}}}async function Xme(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zme(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Jme(e){return("0"+e.toString(16)).substr(-2)}function Qme(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Jme).join("")}async function e0e(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function t0e(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await e0e(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bv(e,t,r=!1){const n=Qme();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await hY(e,`${t}-code-verifier`,a);const i=await t0e(n);return[i,n===i?"plain":"s256"]}const r0e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n0e(e){const t=e.headers.get(o6);if(!t||!t.match(r0e))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function a0e(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function i0e(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var o0e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const b0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),s0e=[502,503,504];async function JF(e){var t;if(!Yme(e))throw new s6(b0(e),0);if(s0e.includes(e.status))throw new s6(b0(e),e.status);let r;try{r=await e.json()}catch(i){throw new uY(b0(i),i)}let n;const a=n0e(e);if(a&&a.getTime()>=cY["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new KF(b0(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Lp}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new KF(b0(r),e.status,r.weak_password.reasons);throw new Fme(b0(r),e.status||500,n)}const l0e=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Rn(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[o6]||(i[o6]=cY["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await c0e(e,t,r+s,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function c0e(e,t,r,n,a,i){const o=l0e(t,n,a,i);let s;try{s=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new s6(b0(l),0)}if(s.ok||await JF(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(l){await JF(l)}}function jp(e){var t;let r=null;h0e(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Hme(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function QF(e){const t=jp(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Vp(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function u0e(e){return{data:e,error:null}}function d0e(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=o0e(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function f0e(e){return e}function h0e(e){return e.access_token&&e.refresh_token&&e.expires_in}var p0e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class m0e{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=fY(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Rn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Rn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vp})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=p0e(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Rn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:d0e,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(wn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Rn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Vp})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,s,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Rn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:f0e});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(wn(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await Rn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Vp})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Rn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Vp})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await Rn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vp})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await Rn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(wn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Rn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}}const g0e={getItem:e=>I2()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{I2()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{I2()&&globalThis.localStorage.removeItem(e)}};function eL(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function v0e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sv={debug:!!(globalThis&&I2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pY extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class y0e extends pY{}async function x0e(e,t,r){Sv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Sv.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Sv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Sv.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Sv.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new y0e(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sv.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}v0e();const w0e={url:Ome,storageKey:Dme,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ime,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tL(e,t,r){return await r()}class cx{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cx.nextInstanceID,cx.nextInstanceID+=1,this.instanceID>0&&Ld()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},w0e),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new m0e({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=fY(a.fetch),this.lock=a.lock||tL,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ld()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=x0e:this.lock=tL,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:I2()?this.storage=g0e:(this.memoryStorage={},this.storage=eL(this.memoryStorage)):(this.memoryStorage={},this.storage=eL(this.memoryStorage)),Ld()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lY}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Kme(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ld()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$me(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:s}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return wn(r)?{error:r}:{error:new uY("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:jp}),{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(wn(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await bv(this.storage,this.storageKey)),i=await Rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:jp})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:jp})}else throw new tb("You must provide either an email or phone number and a password");const{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(wn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:s}=t;r=await Rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:QF})}else if("phone"in t){const{phone:i,password:o,options:s}=t;r=await Rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:QF})}else throw new tb("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fN}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(wn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await nb(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Rn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:jp});if(await ab(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fN}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(wn(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,s=await Rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:jp}),{data:l,error:u}=s;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new fN}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(wn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:s,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await bv(this.storage,this.storageKey));const{error:f}=await Rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:s,options:l}=t,{data:u,error:d}=await Rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new tb("You must provide either an email or phone number.")}catch(s){if(wn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:s}=await Rn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:jp});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(wn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await bv(this.storage,this.storageKey)),await Rn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:u0e})}catch(i){if(wn(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Lp;const{error:a}=await Rn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(wn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Rn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:s}=await Rn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s}}throw new tb("You must provide either an email or phone number and a type")}catch(r){if(wn(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await nb(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<dN:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Vp}):await this._useSession(async r=>{var n,a,i;const{data:o,error:s}=r;if(s)throw s;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lp}:await Rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Vp})})}catch(r){if(wn(r))return jme(r)&&(await this._removeSession(),await ab(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Lp;const o=a.session;let s=null,l=null;this.flowType==="pkce"&&t.email!=null&&([s,l]=await bv(this.storage,this.storageKey));const{data:u,error:d}=await Rn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Vp});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lp;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=pN(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:s,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};i=s}else{const{data:s,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(wn(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:s}=r;if(s)throw s;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Lp;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(wn(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ld())throw new rb("No browser detected.");if(t.error||t.error_description||t.error_code)throw new rb(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new GF("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rb("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new GF("No code detected.");const{data:b,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:s,expires_at:l,token_type:u}=t;if(!i||!s||!o||!u)throw new rb("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(s);let h=d+f;l&&(h=parseInt(l));const m=h-d;m*1e3<=Fv&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const x=h-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const _={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(wn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await nb(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:s}=await this.admin.signOut(o,t);if(s&&!(Lme(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return t!=="others"&&(await this._removeSession(),await ab(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Gme(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await bv(this.storage,this.storageKey,!0));try{return await Rn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(wn(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,s,l,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Rn(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Ld()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(wn(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Rn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(wn(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Zme(async a=>(a>0&&await Xme(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Rn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:jp})),(a,i)=>{const o=200*Math.pow(2,a);return i&&hN(i)&&Date.now()+o-n<Fv})}catch(n){if(this._debug(r,"error",n),wn(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ld()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await nb(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<dN;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${dN}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),hN(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Lp;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new S4;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Lp;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const s={session:i.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(a,"error",i),wn(i)){const o={session:null,error:i};return hN(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let s=0;s<i.length;s+=1)console.error(i[s]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await hY(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ab(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ld()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fv);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Fv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Fv}ms, refresh threshold is ${i6} ticks`),a<=i6&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof pY)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ld()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await bv(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(s.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Rn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(wn(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await Rn(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(wn(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:s}=await Rn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(r){if(wn(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Rn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(wn(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pN(a.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Mme>Date.now()))return n;const{data:a,error:i}=await Rn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new D2("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===t),!n)throw new D2("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:s,payload:l}}=pN(n);if(a0e(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const u=i0e(a.alg),d=await this.fetchJwk(a.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,Vme(`${s}.${l}`)))throw new D2("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}}cx.nextInstanceID=0;const _0e=cx;class b0e extends _0e{constructor(t){super(t)}}var S0e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(s,l)}u((n=n.apply(e,t||[])).next())})};class A0e{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const s=Pme(t);this.realtimeUrl=`${s}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${s}/auth/v1`,this.storageUrl=`${s}/storage/v1`,this.functionsUrl=`${s}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:_me,realtime:Sme,auth:Object.assign(Object.assign({},bme),{storageKey:l}),global:wme},d=Tme(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Eme(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new qpe(`${s}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Tpe(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vme(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return S0e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:s,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b0e({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:s,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new nme(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N0e=(e,t,r)=>new A0e(e,t,r),k0e="https://syevxwuraxjpvkcclmjj.supabase.co",E0e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5ZXZ4d3VyYXhqcHZrY2NsbWpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwOTM0MjksImV4cCI6MjA1ODY2OTQyOX0.Uog7kEtPXYQJDZ3TqKanmteMRK0c_qEIBnmCxFgQTv0",Le=N0e(k0e,E0e,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),mY=A.createContext(void 0);function C0e({children:e}){const[t,r]=A.useState(null),[n,a]=A.useState(!0),i=A.useCallback(async(l,u)=>{let d=null,f=null;try{const h=await Le.from("profiles").select("*").eq("id",l).single();if(d=h.data,f=h.error,f)console.error("[fetchUserProfile] Error during profile fetch:",f.message),r(null);else if(d){const m=d,x=m.role??"doctor",g={...m,role:x,email:u};r(g)}else console.warn(`[fetchUserProfile] Profile query succeeded but returned no data for user: ${l}`),r(null)}catch(h){console.error("[fetchUserProfile] UNEXPECTED EXCEPTION caught:",h.message),r(null)}},[]),o=A.useRef(!1);A.useEffect(()=>{o.current=!1;let l=!0;const u=async(f,h)=>{l&&(f==="TOKEN_REFRESHED"?console.log("[AuthContext] Token refreshed successfully."):f==="SIGNED_OUT"?(console.log("[AuthContext] SIGNED_OUT event received. Setting user to null."),r(null)):h!=null&&h.user?(!t||t.id!==h.user.id)&&await i(h.user.id,h.user.email):f==="INITIAL_SESSION"&&!o.current&&r(null),o.current||(a(!1),o.current=!0))},{data:{subscription:d}}=Le.auth.onAuthStateChange((f,h)=>{u(f,h).catch(m=>{console.error(`[AuthContext] Error in handleAuthStateChange for Event: ${f}`,m),l&&(r(null),o.current||(a(!1),o.current=!0))})});return()=>{l=!1,d.unsubscribe()}},[i]);const s={user:t,loading:n,signIn:async(l,u)=>{const{error:d}=await Le.auth.signInWithPassword({email:l,password:u});if(d)throw d},signOut:async()=>{const{error:l}=await Le.auth.signOut();if(r(null),l)throw console.error("Error signing out:",l),l}};return c(mY.Provider,{value:s,children:e})}function oi(){const e=A.useContext(mY);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const P0e=1,T0e=1e6;let mN=0;function O0e(){return mN=(mN+1)%Number.MAX_VALUE,mN.toString()}const gN=new Map,rL=e=>{if(gN.has(e))return;const t=setTimeout(()=>{gN.delete(e),R2({type:"REMOVE_TOAST",toastId:e})},T0e);gN.set(e,t)},D0e=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,P0e)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?rL(r):e.toasts.forEach(n=>{rL(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Vb=[];let Hb={toasts:[]};function R2(e){Hb=D0e(Hb,e),Vb.forEach(t=>{t(Hb)})}function Bi({...e}){const t=O0e(),r=a=>R2({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>R2({type:"DISMISS_TOAST",toastId:t});return R2({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function yn(){const[e,t]=A.useState(Hb);return A.useEffect(()=>(Vb.push(t),()=>{const r=Vb.indexOf(t);r>-1&&Vb.splice(r,1)}),[e]),{...e,toast:Bi,dismiss:r=>R2({type:"DISMISS_TOAST",toastId:r})}}const I0e=()=>{const{user:e}=oi(),[t,r]=A.useState([]),n=A.useRef(null);return A.useEffect(()=>{if(!e){r([]);return}if((async()=>{const{data:l,error:u}=await Le.from("notifications").select("*").eq("user_id",e.id).eq("is_read",!1).order("created_at",{ascending:!1});u?(console.error("Error fetching notifications from `notifications` table:",u),Bi({title:"Error",description:"Could not fetch notifications.",variant:"destructive"})):(console.log("Fetched notifications:",l),r(l||[]))})(),!n.current&&e){const l=`notifications-channel-${e.id}`;console.log(`Attempting to subscribe to channel: ${l}`),n.current=Le.channel(l),n.current.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.id}`},u=>{if(console.log("[useNotifications] Realtime event received:",u),u.eventType==="INSERT"&&u.new){const d=u.new;console.log("[useNotifications] Realtime INSERT detected:",d),r(f=>{if(console.log("[useNotifications] Attempting state update via realtime. Prev length:",f.length),f.some(m=>m.id===d.id))return console.log(`[useNotifications] Duplicate notification ID ${d.id} detected in realtime update, skipping state update.`),f;const h=[d,...f];return console.log("[useNotifications] State update successful via realtime. New length:",h.length),h})}else console.log("[useNotifications] Received non-insert or unexpected payload via realtime:",u)}).subscribe((u,d)=>{console.log(`Channel ${l} subscription status: ${u}`),u===ic.SUBSCRIBED?console.log(`Successfully subscribed to notifications channel: ${l}`):u===ic.CHANNEL_ERROR?(console.error(`Notifications subscription error on channel ${l}:`,d),Bi({title:"Realtime Error",description:`Connection error for notifications: ${(d==null?void 0:d.message)||"Unknown error"}`,variant:"destructive"})):u===ic.TIMED_OUT?(console.warn(`Notifications subscription timed out on channel ${l}.`),Bi({title:"Realtime Warning",description:"Notification connection timed out.",variant:"default"})):u===ic.CLOSED&&console.log(`Notifications channel closed: ${l}.`)})}return()=>{if(n.current){const l=n.current,u=l.topic;console.log(`Attempting to unsubscribe from channel: ${u}`),Le.removeChannel(l).then(d=>{console.log(`Unsubscribed from notifications channel ${u}:`,d)}).catch(d=>{console.error(`Error removing notifications channel ${u}:`,d)}).finally(()=>{n.current===l&&(n.current=null)})}}},[e]),{notifications:t,markAsRead:async s=>{const{error:l}=await Le.from("notifications").update({is_read:!0}).eq("id",s);l?console.error("Error marking notification as read:",l):r(u=>u.map(d=>d.id===s?{...d,is_read:!0}:d))},createNotification:async(s,l,u)=>{try{const d=new Date;d.setHours(d.getHours()-2);const f=d.toISOString(),{count:h,error:m}=await Le.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",s).eq("message",l).gte("created_at",f);if(m&&console.error("Error checking for existing notifications:",m),h&&h>0){console.log(`Skipping notification creation: Identical notification found within the last 2 hours for message: "${l}"`);return}const x={user_id:s,message:l,link_url:u,is_read:!1},{data:g,error:y}=await Le.from("notifications").insert([x]).select();y?(console.error("Error creating notification:",y),Bi({title:"Error",description:`Could not create notification: ${y.message}`,variant:"destructive"})):(console.log("Notification created:",g),"Notification"in window&&Notification.permission==="granted"?new Notification("New Notification",{body:l,icon:"/dentalcarelogo.png"}):"Notification"in window&&Notification.permission!=="denied"&&Notification.requestPermission().then(_=>{_==="granted"&&new Notification("New Notification",{body:l,icon:"/dentalcarelogo.png"})}))}catch(d){console.error("Error creating notification:",d)}},clearNotification:async s=>{r(u=>u.map(d=>d.id===s?{...d,is_read:!0}:d).filter(d=>!(d.id===s&&d.is_read)));const{error:l}=await Le.from("notifications").update({is_read:!0}).eq("id",s).eq("user_id",e==null?void 0:e.id);l?(console.error("Error marking notification as read (clearing):",l),Bi({title:"Error",description:"Could not clear notification. It may reappear.",variant:"destructive"})):r(u=>u.filter(d=>d.id!==s))}}},sr=A.forwardRef(({className:e,...t},r)=>c("div",{ref:r,className:Rt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));sr.displayName="Card";const yr=A.forwardRef(({className:e,...t},r)=>c("div",{ref:r,className:Rt("flex flex-col space-y-1.5 p-6",e),...t}));yr.displayName="CardHeader";const xr=A.forwardRef(({className:e,...t},r)=>c("h3",{ref:r,className:Rt("text-2xl font-semibold leading-none tracking-tight",e),...t}));xr.displayName="CardTitle";const _c=A.forwardRef(({className:e,...t},r)=>c("p",{ref:r,className:Rt("text-sm text-muted-foreground",e),...t}));_c.displayName="CardDescription";const mr=A.forwardRef(({className:e,...t},r)=>c("div",{ref:r,className:Rt("p-6 pt-0",e),...t}));mr.displayName="CardContent";const Z0=A.forwardRef(({className:e,...t},r)=>c("div",{ref:r,className:Rt("flex items-center p-6 pt-0",e),...t}));Z0.displayName="CardFooter";function ur(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Fa(e,t){const r=ur(e);return isNaN(t)?fa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function pl(e,t){const r=ur(e);if(isNaN(t))return fa(e,NaN);if(!t)return r;const n=r.getDate(),a=fa(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function R0e(e,t){const{years:r=0,months:n=0,weeks:a=0,days:i=0,hours:o=0,minutes:s=0,seconds:l=0}=t,u=ur(e),d=n||r?pl(u,n+r*12):u,f=i||a?Fa(d,i+a*7):d,h=s+o*60,x=(l+h*60)*1e3;return fa(e,f.getTime()+x)}function M0e(e,t){const r=+ur(e);return fa(e,r+t)}const ND=6048e5,F0e=864e5,ux=6e4,A4=36e5,L0e=1e3,nL=525600,Uv=43200,x5=1440;function gY(e,t){return M0e(e,t*A4)}let j0e={};function Ph(){return j0e}function ss(e,t){var s,l,u,d;const r=Ph(),n=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ur(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function wh(e){return ss(e,{weekStartsOn:1})}function vY(e){const t=ur(e),r=t.getFullYear(),n=fa(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=wh(n),i=fa(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=wh(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Dl(e){const t=ur(e);return t.setHours(0,0,0,0),t}function lf(e){const t=ur(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function zu(e,t){const r=Dl(e),n=Dl(t),a=+r-lf(r),i=+n-lf(n);return Math.round((a-i)/F0e)}function $0e(e){const t=vY(e),r=fa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),wh(r)}function x1(e,t){const r=t*7;return Fa(e,r)}function B0e(e,t){return pl(e,t*12)}function U0e(e){let t;return e.forEach(function(r){const n=ur(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function q0e(e){let t;return e.forEach(r=>{const n=ur(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function M2(e,t){const r=ur(e),n=ur(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function yY(e){return fa(e,Date.now())}function sl(e,t){const r=Dl(e),n=Dl(t);return+r==+n}function kD(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $p(e){if(!kD(e)&&typeof e!="number")return!1;const t=ur(e);return!isNaN(Number(t))}function w1(e,t){const r=ur(e),n=ur(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function z0e(e,t,r){const n=ss(e,r),a=ss(t,r),i=+n-lf(n),o=+a-lf(a);return Math.round((i-o)/ND)}function W0e(e,t){const r=ur(e),n=ur(t),a=aL(r,n),i=Math.abs(zu(r,n));r.setDate(r.getDate()-a*i);const o=+(aL(r,n)===-a),s=a*(i-o);return s===0?0:s}function aL(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function xY(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Gb(e,t){return+ur(e)-+ur(t)}function Qv(e){const t=ur(e);return t.setHours(23,59,59,999),t}function dm(e){const t=ur(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function V0e(e){const t=ur(e);return+Qv(t)==+dm(t)}function H0e(e,t){const r=ur(e),n=ur(t),a=M2(r,n),i=Math.abs(w1(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let s=M2(r,n)===-a;V0e(ur(e))&&i===1&&M2(e,n)===1&&(s=!1),o=a*(i-Number(s))}return o===0?0:o}function wY(e,t,r){const n=Gb(e,t)/1e3;return xY(r==null?void 0:r.roundingMethod)(n)}function F2(e,t){const r=ur(e.start),n=ur(e.end);let a=+r>+n;const i=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let s=1;const l=[];for(;+o<=i;)l.push(ur(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return a?l.reverse():l}function G0e(e,t){const r=ur(e.start),n=ur(e.end);let a=+r>+n;const i=a?+r:+n;let o=a?n:r;o.setMinutes(0,0,0);let s=1;const l=[];for(;+o<=i;)l.push(ur(o)),o=gY(o,s);return a?l.reverse():l}function Uo(e){const t=ur(e);return t.setDate(1),t.setHours(0,0,0,0),t}function _Y(e){const t=ur(e),r=fa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function D0(e,t){var s,l,u,d;const r=Ph(),n=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ur(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function bY(e){return D0(e,{weekStartsOn:1})}const K0e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Y0e=(e,t,r)=>{let n;const a=K0e[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function vN(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const X0e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Z0e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},J0e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q0e={date:vN({formats:X0e,defaultWidth:"full"}),time:vN({formats:Z0e,defaultWidth:"full"}),dateTime:vN({formats:J0e,defaultWidth:"full"})},ege={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tge=(e,t,r,n)=>ege[e];function Jy(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=r!=null&&r.width?String(r.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const rge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},age={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ige={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lge=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},cge={ordinalNumber:lge,era:Jy({values:rge,defaultWidth:"wide"}),quarter:Jy({values:nge,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Jy({values:age,defaultWidth:"wide"}),day:Jy({values:ige,defaultWidth:"wide"}),dayPeriod:Jy({values:oge,defaultWidth:"wide",formattingValues:sge,defaultFormattingWidth:"wide"})};function Qy(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?dge(s,f=>f.test(o)):uge(s,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function uge(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function dge(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function fge(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const hge=/^(\d+)(th|st|nd|rd)?/i,pge=/\d+/i,mge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gge={any:[/^b/i,/^(a|c)/i]},vge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yge={any:[/1/i,/2/i,/3/i,/4/i]},xge={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_ge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Sge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Age={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nge={ordinalNumber:fge({matchPattern:hge,parsePattern:pge,valueCallback:e=>parseInt(e,10)}),era:Qy({matchPatterns:mge,defaultMatchWidth:"wide",parsePatterns:gge,defaultParseWidth:"any"}),quarter:Qy({matchPatterns:vge,defaultMatchWidth:"wide",parsePatterns:yge,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qy({matchPatterns:xge,defaultMatchWidth:"wide",parsePatterns:wge,defaultParseWidth:"any"}),day:Qy({matchPatterns:_ge,defaultMatchWidth:"wide",parsePatterns:bge,defaultParseWidth:"any"}),dayPeriod:Qy({matchPatterns:Sge,defaultMatchWidth:"any",parsePatterns:Age,defaultParseWidth:"any"})},Lw={code:"en-US",formatDistance:Y0e,formatLong:Q0e,formatRelative:tge,localize:cge,match:Nge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kge(e){const t=ur(e);return zu(t,_Y(t))+1}function ED(e){const t=ur(e),r=+wh(t)-+$0e(t);return Math.round(r/ND)+1}function CD(e,t){var d,f,h,m;const r=ur(e),n=r.getFullYear(),a=Ph(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=fa(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const s=ss(o,t),l=fa(e,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const u=ss(l,t);return r.getTime()>=s.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Ege(e,t){var s,l,u,d;const r=Ph(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=CD(e,t),i=fa(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),ss(i,t)}function PD(e,t){const r=ur(e),n=+ss(r,t)-+Ege(r,t);return Math.round(n/ND)+1}function Tn(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Pp={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Tn(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Tn(r+1,2)},d(e,t){return Tn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Tn(e.getHours()%12||12,t.length)},H(e,t){return Tn(e.getHours(),t.length)},m(e,t){return Tn(e.getMinutes(),t.length)},s(e,t){return Tn(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Tn(a,t.length)}},Av={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iL={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Pp.y(e,t)},Y:function(e,t,r,n){const a=CD(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Tn(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Tn(i,t.length)},R:function(e,t){const r=vY(e);return Tn(r,t.length)},u:function(e,t){const r=e.getFullYear();return Tn(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Tn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Tn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Pp.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Tn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=PD(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Tn(a,t.length)},I:function(e,t,r){const n=ED(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Tn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Pp.d(e,t)},D:function(e,t,r){const n=kge(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Tn(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Tn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Tn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Tn(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Av.noon:n===0?a=Av.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Av.evening:n>=12?a=Av.afternoon:n>=4?a=Av.morning:a=Av.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Pp.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Pp.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Tn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Tn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Pp.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Pp.s(e,t)},S:function(e,t){return Pp.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return sL(n);case"XXXX":case"XX":return S0(n);case"XXXXX":case"XXX":default:return S0(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return sL(n);case"xxxx":case"xx":return S0(n);case"xxxxx":case"xxx":default:return S0(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oL(n,":");case"OOOO":default:return"GMT"+S0(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oL(n,":");case"zzzz":default:return"GMT"+S0(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Tn(n,t.length)},T:function(e,t,r){const n=e.getTime();return Tn(n,t.length)}};function oL(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Tn(i,2)}function sL(e,t){return e%60===0?(e>0?"-":"+")+Tn(Math.abs(e)/60,2):S0(e,t)}function S0(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Tn(Math.trunc(n/60),2),i=Tn(n%60,2);return r+a+t+i}const lL=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},SY=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Cge=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return lL(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",lL(n,t)).replace("{{time}}",SY(a,t))},l6={p:SY,P:Cge},Pge=/^D+$/,Tge=/^Y+$/,Oge=["D","DD","YY","YYYY"];function AY(e){return Pge.test(e)}function NY(e){return Tge.test(e)}function c6(e,t,r){const n=Dge(e,t,r);if(console.warn(n),Oge.includes(e))throw new RangeError(n)}function Dge(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ige=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mge=/^'([^]*?)'?$/,Fge=/''/g,Lge=/[a-zA-Z]/;function Ut(e,t,r){var d,f,h,m,x,g,y,_;const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Lw,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((_=(y=n.locale)==null?void 0:y.options)==null?void 0:_.weekStartsOn)??0,s=ur(e);if(!$p(s))throw new RangeError("Invalid time value");let l=t.match(Rge).map(b=>{const S=b[0];if(S==="p"||S==="P"){const C=l6[S];return C(b,a.formatLong)}return b}).join("").match(Ige).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const S=b[0];if(S==="'")return{isToken:!1,value:jge(b)};if(iL[S])return{isToken:!0,value:b};if(S.match(Lge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(l=a.localize.preprocessor(s,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return l.map(b=>{if(!b.isToken)return b.value;const S=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&NY(S)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&AY(S))&&c6(S,t,String(e));const C=iL[S[0]];return C(s,S,a.localize,u)}).join("")}function jge(e){const t=e.match(Mge);return t?t[1].replace(Fge,"'"):e}function $ge(e,t,r){const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Lw,i=2520,o=M2(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=ur(t),u=ur(e)):(l=ur(e),u=ur(t));const d=wY(u,l),f=(lf(u)-lf(l))/1e3,h=Math.round((d-f)/60);let m;if(h<2)return r!=null&&r.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,s):d<10?a.formatDistance("lessThanXSeconds",10,s):d<20?a.formatDistance("lessThanXSeconds",20,s):d<40?a.formatDistance("halfAMinute",0,s):d<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):h===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",h,s);if(h<45)return a.formatDistance("xMinutes",h,s);if(h<90)return a.formatDistance("aboutXHours",1,s);if(h<x5){const x=Math.round(h/60);return a.formatDistance("aboutXHours",x,s)}else{if(h<i)return a.formatDistance("xDays",1,s);if(h<Uv){const x=Math.round(h/x5);return a.formatDistance("xDays",x,s)}else if(h<Uv*2)return m=Math.round(h/Uv),a.formatDistance("aboutXMonths",m,s)}if(m=H0e(u,l),m<12){const x=Math.round(h/Uv);return a.formatDistance("xMonths",x,s)}else{const x=m%12,g=Math.trunc(m/12);return x<3?a.formatDistance("aboutXYears",g,s):x<9?a.formatDistance("overXYears",g,s):a.formatDistance("almostXYears",g+1,s)}}function kY(e,t,r){const n=Ph(),a=(r==null?void 0:r.locale)??n.locale??Lw,i=M2(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:i});let s,l;i>0?(s=ur(t),l=ur(e)):(s=ur(e),l=ur(t));const u=xY((r==null?void 0:r.roundingMethod)??"round"),d=l.getTime()-s.getTime(),f=d/ux,h=lf(l)-lf(s),m=(d-h)/ux,x=r==null?void 0:r.unit;let g;if(x?g=x:f<1?g="second":f<60?g="minute":f<x5?g="hour":m<Uv?g="day":m<nL?g="month":g="year",g==="second"){const y=u(d/1e3);return a.formatDistance("xSeconds",y,o)}else if(g==="minute"){const y=u(f);return a.formatDistance("xMinutes",y,o)}else if(g==="hour"){const y=u(f/60);return a.formatDistance("xHours",y,o)}else if(g==="day"){const y=u(m/x5);return a.formatDistance("xDays",y,o)}else if(g==="month"){const y=u(m/Uv);return y===12&&x!=="month"?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",y,o)}else{const y=u(m/nL);return a.formatDistance("xYears",y,o)}}function Bge(e,t){return $ge(e,yY(e),t)}function cL(e,t){const r=ur(e);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");let n="",a="";const i="-",o=":";{const s=Tn(r.getDate(),2),l=Tn(r.getMonth()+1,2);n=`${Tn(r.getFullYear(),4)}${i}${l}${i}${s}`}{const s=r.getTimezoneOffset();if(s!==0){const m=Math.abs(s),x=Tn(Math.trunc(m/60),2),g=Tn(m%60,2);a=`${s<0?"+":"-"}${x}:${g}`}else a="Z";const l=Tn(r.getHours(),2),u=Tn(r.getMinutes(),2),d=Tn(r.getSeconds(),2),f=n===""?"":"T",h=[l,u,d].join(o);n=`${n}${f}${h}${a}`}return n}function Uge(e){const t=ur(e),r=t.getFullYear(),n=t.getMonth(),a=fa(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function qge(){return Object.assign({},Ph())}function zge(e){let r=ur(e).getDay();return r===0&&(r=7),r}function Wge(e){return Math.trunc(+ur(e)/1e3)}function Vge(e){const t=ur(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Hge(e,t){return z0e(Vge(e),Uo(e),t)+1}function u6(e,t){const r=ur(e),n=ur(t);return r.getTime()>n.getTime()}function th(e,t){const r=ur(e),n=ur(t);return+r<+n}function Gge(e,t){const r=t instanceof Date?fa(t,0):new t(0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}const Kge=10;class EY{constructor(){hr(this,"subPriority",0)}validate(t,r){return!0}}class Yge extends EY{constructor(t,r,n,a,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=a,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class Xge extends EY{constructor(){super(...arguments);hr(this,"priority",Kge);hr(this,"subPriority",-1)}set(r,n){return n.timestampIsSet?r:fa(r,Gge(r,Date))}}class oa{run(t,r,n,a){const i=this.parse(t,r,n,a);return i?{setter:new Yge(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class Zge extends oa{constructor(){super(...arguments);hr(this,"priority",140);hr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const Gi={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wd={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ki(e,t){return e&&{value:t(e.value),rest:e.rest}}function gi(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Vd(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*A4+i*ux+o*L0e),rest:t.slice(r[0].length)}}function CY(e){return gi(Gi.anyDigitsSigned,e)}function Oi(e,t){switch(e){case 1:return gi(Gi.singleDigit,t);case 2:return gi(Gi.twoDigits,t);case 3:return gi(Gi.threeDigits,t);case 4:return gi(Gi.fourDigits,t);default:return gi(new RegExp("^\\d{1,"+e+"}"),t)}}function w5(e,t){switch(e){case 1:return gi(Gi.singleDigitSigned,t);case 2:return gi(Gi.twoDigitsSigned,t);case 3:return gi(Gi.threeDigitsSigned,t);case 4:return gi(Gi.fourDigitsSigned,t);default:return gi(new RegExp("^-?\\d{1,"+e+"}"),t)}}function TD(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function PY(e,t){const r=t>0,n=r?t:1-t;let a;if(n<=50)a=e||100;else{const i=n+50,o=Math.trunc(i/100)*100,s=e>=i%100;a=e+o-(s?100:0)}return r?a:1-a}function TY(e){return e%400===0||e%4===0&&e%100!==0}class Jge extends oa{constructor(){super(...arguments);hr(this,"priority",130);hr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const i=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ki(Oi(4,r),i);case"yo":return Ki(a.ordinalNumber(r,{unit:"year"}),i);default:return Ki(Oi(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const i=r.getFullYear();if(a.isTwoDigitYear){const s=PY(a.year,i);return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class Qge extends oa{constructor(){super(...arguments);hr(this,"priority",130);hr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const i=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ki(Oi(4,r),i);case"Yo":return Ki(a.ordinalNumber(r,{unit:"year"}),i);default:return Ki(Oi(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,i){const o=CD(r,i);if(a.isTwoDigitYear){const l=PY(a.year,o);return r.setFullYear(l,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),ss(r,i)}const s=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(s,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),ss(r,i)}}class eve extends oa{constructor(){super(...arguments);hr(this,"priority",130);hr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return w5(n==="R"?4:n.length,r)}set(r,n,a){const i=fa(r,0);return i.setFullYear(a,0,4),i.setHours(0,0,0,0),wh(i)}}class tve extends oa{constructor(){super(...arguments);hr(this,"priority",130);hr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return w5(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class rve extends oa{constructor(){super(...arguments);hr(this,"priority",120);hr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return Oi(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class nve extends oa{constructor(){super(...arguments);hr(this,"priority",120);hr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return Oi(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class ave extends oa{constructor(){super(...arguments);hr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);hr(this,"priority",110)}parse(r,n,a){const i=o=>o-1;switch(n){case"M":return Ki(gi(Gi.month,r),i);case"MM":return Ki(Oi(2,r),i);case"Mo":return Ki(a.ordinalNumber(r,{unit:"month"}),i);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class ive extends oa{constructor(){super(...arguments);hr(this,"priority",110);hr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const i=o=>o-1;switch(n){case"L":return Ki(gi(Gi.month,r),i);case"LL":return Ki(Oi(2,r),i);case"Lo":return Ki(a.ordinalNumber(r,{unit:"month"}),i);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function ove(e,t,r){const n=ur(e),a=PD(n,r)-t;return n.setDate(n.getDate()-a*7),n}class sve extends oa{constructor(){super(...arguments);hr(this,"priority",100);hr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return gi(Gi.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return Oi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,i){return ss(ove(r,a,i),i)}}function lve(e,t){const r=ur(e),n=ED(r)-t;return r.setDate(r.getDate()-n*7),r}class cve extends oa{constructor(){super(...arguments);hr(this,"priority",100);hr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return gi(Gi.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return Oi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return wh(lve(r,a))}}const uve=[31,28,31,30,31,30,31,31,30,31,30,31],dve=[31,29,31,30,31,30,31,31,30,31,30,31];class fve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"subPriority",1);hr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return gi(Gi.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return Oi(n.length,r)}}validate(r,n){const a=r.getFullYear(),i=TY(a),o=r.getMonth();return i?n>=1&&n<=dve[o]:n>=1&&n<=uve[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class hve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"subpriority",1);hr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return gi(Gi.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return Oi(n.length,r)}}validate(r,n){const a=r.getFullYear();return TY(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function OD(e,t,r){var f,h,m,x;const n=Ph(),a=(r==null?void 0:r.weekStartsOn)??((h=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((x=(m=n.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,i=ur(e),o=i.getDay(),l=(t%7+7)%7,u=7-a,d=t<0||t>6?t-(o+u)%7:(l+u)%7-(o+u)%7;return Fa(i,d)}class pve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=OD(r,a,i),r.setHours(0,0,0,0),r}}class mve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,i){const o=s=>{const l=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return Ki(Oi(n.length,r),o);case"eo":return Ki(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=OD(r,a,i),r.setHours(0,0,0,0),r}}class gve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,i){const o=s=>{const l=Math.floor((s-1)/7)*7;return(s+i.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return Ki(Oi(n.length,r),o);case"co":return Ki(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,i){return r=OD(r,a,i),r.setHours(0,0,0,0),r}}function vve(e,t){const r=ur(e),n=zge(r),a=t-n;return Fa(r,a)}class yve extends oa{constructor(){super(...arguments);hr(this,"priority",90);hr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const i=o=>o===0?7:o;switch(n){case"i":case"ii":return Oi(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Ki(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return Ki(a.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Ki(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Ki(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=vve(r,a),r.setHours(0,0,0,0),r}}class xve extends oa{constructor(){super(...arguments);hr(this,"priority",80);hr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(TD(a),0,0,0),r}}class wve extends oa{constructor(){super(...arguments);hr(this,"priority",80);hr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(TD(a),0,0,0),r}}class _ve extends oa{constructor(){super(...arguments);hr(this,"priority",80);hr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(TD(a),0,0,0),r}}class bve extends oa{constructor(){super(...arguments);hr(this,"priority",70);hr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return gi(Gi.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return Oi(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const i=r.getHours()>=12;return i&&a<12?r.setHours(a+12,0,0,0):!i&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class Sve extends oa{constructor(){super(...arguments);hr(this,"priority",70);hr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return gi(Gi.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return Oi(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class Ave extends oa{constructor(){super(...arguments);hr(this,"priority",70);hr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return gi(Gi.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return Oi(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class Nve extends oa{constructor(){super(...arguments);hr(this,"priority",70);hr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return gi(Gi.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return Oi(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const i=a<=24?a%24:a;return r.setHours(i,0,0,0),r}}class kve extends oa{constructor(){super(...arguments);hr(this,"priority",60);hr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return gi(Gi.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return Oi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class Eve extends oa{constructor(){super(...arguments);hr(this,"priority",50);hr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return gi(Gi.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return Oi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class Cve extends oa{constructor(){super(...arguments);hr(this,"priority",30);hr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=i=>Math.trunc(i*Math.pow(10,-n.length+3));return Ki(Oi(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class Pve extends oa{constructor(){super(...arguments);hr(this,"priority",10);hr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Vd(Wd.basicOptionalMinutes,r);case"XX":return Vd(Wd.basic,r);case"XXXX":return Vd(Wd.basicOptionalSeconds,r);case"XXXXX":return Vd(Wd.extendedOptionalSeconds,r);case"XXX":default:return Vd(Wd.extended,r)}}set(r,n,a){return n.timestampIsSet?r:fa(r,r.getTime()-lf(r)-a)}}class Tve extends oa{constructor(){super(...arguments);hr(this,"priority",10);hr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Vd(Wd.basicOptionalMinutes,r);case"xx":return Vd(Wd.basic,r);case"xxxx":return Vd(Wd.basicOptionalSeconds,r);case"xxxxx":return Vd(Wd.extendedOptionalSeconds,r);case"xxx":default:return Vd(Wd.extended,r)}}set(r,n,a){return n.timestampIsSet?r:fa(r,r.getTime()-lf(r)-a)}}class Ove extends oa{constructor(){super(...arguments);hr(this,"priority",40);hr(this,"incompatibleTokens","*")}parse(r){return CY(r)}set(r,n,a){return[fa(r,a*1e3),{timestampIsSet:!0}]}}class Dve extends oa{constructor(){super(...arguments);hr(this,"priority",20);hr(this,"incompatibleTokens","*")}parse(r){return CY(r)}set(r,n,a){return[fa(r,a),{timestampIsSet:!0}]}}const Ive={G:new Zge,y:new Jge,Y:new Qge,R:new eve,u:new tve,Q:new rve,q:new nve,M:new ave,L:new ive,w:new sve,I:new cve,d:new fve,D:new hve,E:new pve,e:new mve,c:new gve,i:new yve,a:new xve,b:new wve,B:new _ve,h:new bve,H:new Sve,K:new Ave,k:new Nve,m:new kve,s:new Eve,S:new Cve,X:new Pve,x:new Tve,t:new Ove,T:new Dve},Rve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fve=/^'([^]*?)'?$/,Lve=/''/g,jve=/\S/,$ve=/[a-zA-Z]/;function uL(e,t,r,n){var g,y,_,b;const a=qge(),i=a.locale??Lw,o=a.firstWeekContainsDate??((y=(g=a.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=a.weekStartsOn??((b=(_=a.locale)==null?void 0:_.options)==null?void 0:b.weekStartsOn)??0;if(t==="")return e===""?ur(r):fa(r,NaN);const l={firstWeekContainsDate:o,weekStartsOn:s,locale:i},u=[new Xge],d=t.match(Mve).map(S=>{const C=S[0];if(C in l6){const E=l6[C];return E(S,i.formatLong)}return S}).join("").match(Rve),f=[];for(let S of d){NY(S)&&c6(S,t,e),AY(S)&&c6(S,t,e);const C=S[0],E=Ive[C];if(E){const{incompatibleTokens:O}=E;if(Array.isArray(O)){const M=f.find(L=>O.includes(L.token)||L.token===C);if(M)throw new RangeError(`The format string mustn't contain \`${M.fullToken}\` and \`${S}\` at the same time`)}else if(E.incompatibleTokens==="*"&&f.length>0)throw new RangeError(`The format string mustn't contain \`${S}\` and any other token at the same time`);f.push({token:C,fullToken:S});const T=E.run(e,S,i.match,l);if(!T)return fa(r,NaN);u.push(T.setter),e=T.rest}else{if(C.match($ve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if(S==="''"?S="'":C==="'"&&(S=Bve(S)),e.indexOf(S)===0)e=e.slice(S.length);else return fa(r,NaN)}}if(e.length>0&&jve.test(e))return fa(r,NaN);const h=u.map(S=>S.priority).sort((S,C)=>C-S).filter((S,C,E)=>E.indexOf(S)===C).map(S=>u.filter(C=>C.priority===S).sort((C,E)=>E.subPriority-C.subPriority)).map(S=>S[0]);let m=ur(r);if(isNaN(m.getTime()))return fa(r,NaN);const x={};for(const S of h){if(!S.validate(m,l))return fa(r,NaN);const C=S.set(m,x,l);Array.isArray(C)?(m=C[0],Object.assign(x,C[1])):m=C}return fa(r,m)}function Bve(e){return e.match(Fve)[1].replace(Lve,"'")}function Uve(e){return+ur(e)<Date.now()}function N4(e,t){const r=ur(e),n=ur(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function qve(e,t){const r=ur(e),n=ur(t);return r.getFullYear()===n.getFullYear()}function Tp(e){return sl(e,yY(e))}function v0(e,t){const r=+ur(e),[n,a]=[+ur(t.start),+ur(t.end)].sort((i,o)=>i-o);return r>=n&&r<=a}function yN(e,t){return Fa(e,-t)}function zr(e,t){const n=Hve(e);let a;if(n.date){const l=Gve(n.date,2);a=Kve(l.restDateString,l.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,s;if(n.time&&(o=Yve(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(s=Xve(n.timezone),isNaN(s))return new Date(NaN)}else{const l=new Date(i+o),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(i+o+s)}const ib={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wve=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Vve=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Hve(e){const t={},r=e.split(ib.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ib.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ib.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=ib.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Gve(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Kve(e,t){if(t===null)return new Date(NaN);const r=e.match(zve);if(!r)return new Date(NaN);const n=!!r[4],a=e2(r[1]),i=e2(r[2])-1,o=e2(r[3]),s=e2(r[4]),l=e2(r[5])-1;if(n)return t1e(t,s,l)?Zve(t,s,l):new Date(NaN);{const u=new Date(0);return!Qve(t,i,o)||!e1e(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function e2(e){return e?parseInt(e):1}function Yve(e){const t=e.match(Wve);if(!t)return NaN;const r=xN(t[1]),n=xN(t[2]),a=xN(t[3]);return r1e(r,n,a)?r*A4+n*ux+a*1e3:NaN}function xN(e){return e&&parseFloat(e.replace(",","."))||0}function Xve(e){if(e==="Z")return 0;const t=e.match(Vve);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return n1e(n,a)?r*(n*A4+a*ux):NaN}function Zve(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Jve=[31,null,31,30,31,30,31,31,30,31,30,31];function OY(e){return e%400===0||e%4===0&&e%100!==0}function Qve(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Jve[t]||(OY(e)?29:28))}function e1e(e,t){return t>=1&&t<=(OY(e)?366:365)}function t1e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function r1e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function n1e(e,t){return t>=0&&t<=59}function wN(e,t){const r=ur(e),n=r.getFullYear(),a=r.getDate(),i=fa(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=Uge(i);return r.setMonth(t,Math.min(a,o)),r}function a1e(e,t){const r=ur(e);return r.setHours(t),r}function i1e(e,t){const r=ur(e);return r.setMinutes(t),r}function dL(e,t){const r=ur(e);return isNaN(+r)?fa(e,NaN):(r.setFullYear(t),r)}function d6(e,t){return pl(e,-t)}function dx(e,t){return gY(e,-t)}function o1e(e,t){return x1(e,-1)}function s1e({notifications:e,onClose:t,onMarkAsRead:r,onClearNotification:n}){const a=i=>{i.is_read||r(i.id)};return w(sr,{className:"fixed top-16 right-4 z-50 w-96 shadow-lg border bg-card text-card-foreground",children:[" ",w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-lg font-medium",children:"Notifications"}),c(Fe,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Close notifications",children:c(gh,{className:"h-4 w-4"})})]}),c(mr,{className:"p-0",children:w("div",{className:"max-h-[calc(100vh-10rem)] overflow-y-auto",children:[" ",e.length===0?c("p",{className:"text-sm text-muted-foreground text-center p-4",children:"No new notifications."}):e.map(i=>w("div",{className:Rt("flex flex-col border-b p-3 hover:bg-muted/50 cursor-pointer",i.is_read===!0?"opacity-70":"font-medium"),onClick:()=>a(i),role:"button",tabIndex:0,onKeyDown:o=>o.key==="Enter"&&a(i),children:[w("div",{className:"flex justify-between items-center w-full",children:[" ",c("span",{className:"text-sm flex-grow mr-2",children:i.message})," ",c(Fe,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:o=>{o.stopPropagation(),n(i.id)},"aria-label":"Clear notification",children:c(gh,{className:"h-3 w-3"})})]}),w("div",{className:"flex justify-between items-center mt-1",children:[c("span",{className:"text-xs text-muted-foreground",children:i.created_at?Bge(new Date(i.created_at),{addSuffix:!0}):"Just now"}),i.is_read!==!0&&c("span",{title:"Mark as read",className:"text-primary"})]})]},i.id))]})})]})}const l1e=Ew("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ed({className:e,variant:t,...r}){return c("div",{className:Rt(l1e({variant:t}),e),...r})}const c1e=(e,t)=>{if(e){const r=e.split(" ");if(r.length>1)return`${r[0][0]}${r[r.length-1][0]}`.toUpperCase();if(r.length===1&&r[0].length>0)return r[0].substring(0,2).toUpperCase()}return t?t.substring(0,2).toUpperCase():"U"};function u1e({user:e}){const{toast:t}=yn(),r=bo(),{user:n,signOut:a}=oi(),[i,o]=A.useState(""),[s,l]=A.useState(!1),{notifications:u,markAsRead:d,clearNotification:f}=I0e(),h=A.useMemo(()=>u.filter(T=>T.is_read!==!0).length,[u]),m=T=>{o(T.target.value)},x=T=>{if(T.key==="Enter"&&i.trim()){const M=i.trim();r(`/search?q=${encodeURIComponent(M)}`),o("")}},g=async()=>{try{await a(),t({title:"Logged out successfully"}),r("/login")}catch(T){console.error("Logout failed:",T),t({title:"Logout Failed",description:T.message||"An unexpected error occurred.",variant:"destructive"})}},y=()=>{l(T=>!T)},_=()=>{l(!1)};A.useEffect(()=>{const T=M=>{const L=document.getElementById("notification-panel"),z=document.getElementById("notification-trigger");L&&!L.contains(M.target)&&z&&!z.contains(M.target)&&_()};return s?document.addEventListener("mousedown",T):document.removeEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[s]);const b=e==null?void 0:e.display_name,S=e==null?void 0:e.avatar_url,C=e==null?void 0:e.email,[E,O]=A.useState("https://i.postimg.cc/j2qGSXwJ/facetslogo.png");return A.useEffect(()=>{const T=()=>{const L=localStorage.getItem("customClinicLogo");O(L||"https://i.postimg.cc/j2qGSXwJ/facetslogo.png")};T();const M=L=>{L.key==="customClinicLogo"&&T()};return window.addEventListener("storage",M),()=>{window.removeEventListener("storage",M)}},[]),w(_r,{children:[c("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:w("div",{className:"container flex h-14 items-center",children:[c("div",{className:"mr-4 hidden md:flex",children:c("div",{className:"flex items-center",children:c(Vi,{to:"/dashboard",className:"flex items-center space-x-2",children:c("img",{src:E,alt:"Facets Dental Logo",className:"h-10"})})})}),w("div",{className:"flex flex-1 items-center justify-between space-x-2 md:justify-end",children:[c("div",{className:"w-full flex-1 md:w-auto md:flex-none",children:w("div",{className:"relative",children:[c(s4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),c(ct,{placeholder:"Search...",className:"pl-8 md:w-[300px] lg:w-[400px]",value:i,onChange:m,onKeyDown:x})]})}),w("div",{className:"flex items-center gap-2",children:[w(Fe,{id:"notification-trigger",variant:"ghost",size:"icon",className:"relative","aria-label":"Notifications",onClick:y,children:[c(a4,{className:"h-4 w-4"}),h>0&&c(ed,{variant:"destructive",className:"absolute -top-1 -right-1 h-4 w-4 justify-center rounded-full p-0 text-xs",children:h>9?"9+":h})]}),w(cpe,{children:[c(upe,{asChild:!0,children:c(Fe,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:w(vD,{className:"h-8 w-8",children:[c(yD,{src:S||"https://syevxwuraxjpvkcclmjj.supabase.co/storage/v1/object/public/avatars/68f6a588-b802-4e33-8c6b-3de2d070d3bf-1744191950747.jpg",alt:b||C||"User"}),c(xD,{children:c1e(b,C)})]})})}),w($K,{className:"w-56",align:"end",forceMount:!0,children:[c(BK,{className:"font-normal",children:w("div",{className:"flex flex-col space-y-1",children:[c("p",{className:"text-sm font-medium leading-none",children:b||"User Name"}),c("p",{className:"text-xs leading-none text-muted-foreground",children:C||"user@example.com"})]})}),c(QT,{}),c(x2,{asChild:!0,children:c(Vi,{to:"/profile",children:"Profile"})}),c(x2,{asChild:!0,children:c(Vi,{to:"/settings",children:"Settings"})}),c(x2,{asChild:!0,children:c(Vi,{to:"/payments-subscription",children:"Payments & Subscription"})}),c(QT,{}),c(x2,{onClick:g,className:"cursor-pointer",children:"Log out"})]})]})]})]})]})}),s&&c("div",{id:"notification-panel",className:"absolute top-0 right-0 z-50 mt-14 mr-4",children:c(s1e,{notifications:u,onClose:_,onMarkAsRead:d,onClearNotification:f})})]})}var k4="Collapsible",[d1e,DY]=eo(k4),[f1e,DD]=d1e(k4),IY=A.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...s}=e,[l,u]=hl({prop:n,defaultProp:a??!1,onChange:o,caller:k4});return c(f1e,{scope:r,disabled:i,contentId:Ll(),open:l,onOpenToggle:A.useCallback(()=>u(d=>!d),[u]),children:c(pr.div,{"data-state":RD(l),"data-disabled":i?"":void 0,...s,ref:t})})});IY.displayName=k4;var RY="CollapsibleTrigger",MY=A.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=DD(RY,r);return c(pr.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":RD(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:Wt(e.onClick,a.onOpenToggle)})});MY.displayName=RY;var ID="CollapsibleContent",FY=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=DD(ID,e.__scopeCollapsible);return c(cs,{present:r||a.open,children:({present:i})=>c(h1e,{...n,ref:t,present:i})})});FY.displayName=ID;var h1e=A.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=e,o=DD(ID,r),[s,l]=A.useState(n),u=A.useRef(null),d=Hr(t,u),f=A.useRef(0),h=f.current,m=A.useRef(0),x=m.current,g=o.open||s,y=A.useRef(g),_=A.useRef(void 0);return A.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),ii(()=>{const b=u.current;if(b){_.current=_.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const S=b.getBoundingClientRect();f.current=S.height,m.current=S.width,y.current||(b.style.transitionDuration=_.current.transitionDuration,b.style.animationName=_.current.animationName),l(n)}},[o.open,n]),c(pr.div,{"data-state":RD(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:g&&a})});function RD(e){return e?"open":"closed"}var p1e=IY,m1e=MY,g1e=FY,ld="Accordion",v1e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[MD,y1e,x1e]=Cw(ld),[E4,IJe]=eo(ld,[x1e,DY]),FD=DY(),LY=tt.forwardRef((e,t)=>{const{type:r,...n}=e,a=n,i=n;return c(MD.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?c(S1e,{...i,ref:t}):c(b1e,{...a,ref:t})})});LY.displayName=ld;var[jY,w1e]=E4(ld),[$Y,_1e]=E4(ld,{collapsible:!1}),b1e=tt.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[s,l]=hl({prop:r,defaultProp:n??"",onChange:a,caller:ld});return c(jY,{scope:e.__scopeAccordion,value:tt.useMemo(()=>s?[s]:[],[s]),onItemOpen:l,onItemClose:tt.useCallback(()=>i&&l(""),[i,l]),children:c($Y,{scope:e.__scopeAccordion,collapsible:i,children:c(BY,{...o,ref:t})})})}),S1e=tt.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,s]=hl({prop:r,defaultProp:n??[],onChange:a,caller:ld}),l=tt.useCallback(d=>s((f=[])=>[...f,d]),[s]),u=tt.useCallback(d=>s((f=[])=>f.filter(h=>h!==d)),[s]);return c(jY,{scope:e.__scopeAccordion,value:o,onItemOpen:l,onItemClose:u,children:c($Y,{scope:e.__scopeAccordion,collapsible:!0,children:c(BY,{...i,ref:t})})})}),[A1e,C4]=E4(ld),BY=tt.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=e,s=tt.useRef(null),l=Hr(s,t),u=y1e(r),f=wg(a)==="ltr",h=Wt(e.onKeyDown,m=>{var M;if(!v1e.includes(m.key))return;const x=m.target,g=u().filter(L=>{var z;return!((z=L.ref.current)!=null&&z.disabled)}),y=g.findIndex(L=>L.ref.current===x),_=g.length;if(y===-1)return;m.preventDefault();let b=y;const S=0,C=_-1,E=()=>{b=y+1,b>C&&(b=S)},O=()=>{b=y-1,b<S&&(b=C)};switch(m.key){case"Home":b=S;break;case"End":b=C;break;case"ArrowRight":i==="horizontal"&&(f?E():O());break;case"ArrowDown":i==="vertical"&&E();break;case"ArrowLeft":i==="horizontal"&&(f?O():E());break;case"ArrowUp":i==="vertical"&&O();break}const T=b%_;(M=g[T].ref.current)==null||M.focus()});return c(A1e,{scope:r,disabled:n,direction:a,orientation:i,children:c(MD.Slot,{scope:r,children:c(pr.div,{...o,"data-orientation":i,ref:l,onKeyDown:n?void 0:h})})})}),_5="AccordionItem",[N1e,LD]=E4(_5),UY=tt.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...a}=e,i=C4(_5,r),o=w1e(_5,r),s=FD(r),l=Ll(),u=n&&o.value.includes(n)||!1,d=i.disabled||e.disabled;return c(N1e,{scope:r,open:u,disabled:d,triggerId:l,children:c(p1e,{"data-orientation":i.orientation,"data-state":GY(u),...s,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});UY.displayName=_5;var qY="AccordionHeader",zY=tt.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=C4(ld,r),i=LD(qY,r);return c(pr.h3,{"data-orientation":a.orientation,"data-state":GY(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});zY.displayName=qY;var f6="AccordionTrigger",WY=tt.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=C4(ld,r),i=LD(f6,r),o=_1e(f6,r),s=FD(r);return c(MD.ItemSlot,{scope:r,children:c(m1e,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...s,...n,ref:t})})});WY.displayName=f6;var VY="AccordionContent",HY=tt.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=C4(ld,r),i=LD(VY,r),o=FD(r);return c(g1e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});HY.displayName=VY;function GY(e){return e?"open":"closed"}var k1e=LY,E1e=UY,C1e=zY,KY=WY,YY=HY;const P4=k1e,ts=A.forwardRef(({className:e,...t},r)=>c(E1e,{ref:r,className:Rt("border-b",e),...t}));ts.displayName="AccordionItem";const rs=A.forwardRef(({className:e,children:t,...r},n)=>c(C1e,{className:"flex",children:w(KY,{ref:n,className:Rt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,c(G8,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));rs.displayName=KY.displayName;const ns=A.forwardRef(({className:e,children:t,...r},n)=>c(YY,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:c("div",{className:Rt("pb-4 pt-0",e),children:t})}));ns.displayName=YY.displayName;const P1e=[{name:"Dashboard",href:"/",icon:wce},{name:"Appointments",href:"/appointments",icon:Hi},{name:"Patients",href:"/patients",icon:l4},{name:"Treatment Plans",href:"/treatment-plans",icon:QH},{name:"Patient Medical Record",href:"/patient-medical-records",icon:mce},{name:"Inventory",href:"/inventory",icon:JH,children:[{name:"Purchases",href:"/purchases"},{name:"Urgent Purchase Entry",href:"/purchases/urgent"},{name:"Invoices",href:"/inventory/invoices"},{name:"Create Adjustment",href:"/inventory/create-adjustment"},{name:"Stock Take",href:"/inventory/stock-take"}]},{name:"Assets",href:"/assets",icon:UH},{name:"Reports",href:"/reports",icon:oce},{name:"Reminders",href:"/reminders",icon:a4},{name:"Settings",href:"/settings",icon:Dce},{name:"Inv. Approvals",href:"/inventory-approvals",icon:XH,roles:["admin","owner","doctor"]}],T1e=["Inventory","Assets","Reports","Reminders"];function O1e(){const e=km(),{user:t}=oi(),r=P1e.filter(n=>!t||!t.role?!1:n.roles&&Array.isArray(n.roles)?n.roles.includes(t.role):t.role==="admin"||t.role==="owner"?!0:t.role==="doctor"?!T1e.includes(n.name):!1);return!t||r.length===0?null:c("div",{className:"hidden border-r bg-background md:block md:w-64",children:w("div",{className:"flex h-full flex-col gap-2",children:[c("div",{className:"flex h-14 items-center border-b px-4",children:w(Vi,{to:"/",className:"flex items-center gap-2 font-semibold",children:[c("img",{src:"https://i.postimg.cc/bwDhkb5H/dentalcare.png",alt:"Dental Care Logo",className:"h-12"})," "]})}),c("div",{className:"flex-1 overflow-auto py-2",children:c("nav",{className:"grid items-start px-2 text-sm font-medium",children:r.map(n=>{const a=n.icon,i=n.children&&n.children.some(o=>e.pathname.startsWith(o.href))||e.pathname.startsWith(n.href);if(n.children){const o=i?n.name:"";return c(P4,{type:"single",collapsible:!0,defaultValue:o,className:"w-full",children:w(ts,{value:n.name,className:"border-b-0",children:[c(rs,{className:Rt("w-full justify-start gap-2 rounded-md px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground [&[data-state=open]>svg]:rotate-180",e.pathname===n.href?"bg-secondary text-secondary-foreground":"hover:bg-muted"),children:w(Vi,{to:n.href,className:"flex items-center flex-grow gap-2",onClick:s=>s.stopPropagation(),children:[" ",c(a,{className:"h-4 w-4"}),c("span",{children:n.name})]})}),w(ns,{className:"pt-1 pb-0 pl-7",children:[" ",c("nav",{className:"grid gap-1",children:n.children.map(s=>{const l=e.pathname===s.href;return c(Vi,{to:s.href,children:c(Fe,{variant:l?"secondary":"ghost",size:"sm",className:Rt("w-full justify-start gap-2 pl-2",{"bg-secondary text-secondary-foreground":l}),children:s.name})},s.href)})})]})]})},n.name)}return c(Vi,{to:n.href,children:w(Fe,{variant:i?"secondary":"ghost",className:Rt("w-full justify-start gap-2 rounded-md px-3 py-2 text-sm font-medium",{"bg-secondary text-secondary-foreground":i}),children:[c(a,{className:"h-4 w-4"}),n.name]})},n.href)})})})]})})}const XY=async()=>{const{data:e,error:t}=await Le.from("reminders").select("*").order("reminder_datetime",{ascending:!0});if(t)throw console.error("Error fetching reminders:",t),new Error("Failed to fetch reminders.");return e.map(r=>({...r,recurrence_config:typeof r.recurrence_config=="string"?JSON.parse(r.recurrence_config):r.recurrence_config||{type:"none"}}))},D1e=async e=>{const{data:t,error:r}=await Le.from("reminders").insert(e).select().single();if(r)throw console.error("Error creating reminder:",r),new Error("Failed to create reminder.");return t},ZY=async(e,t)=>{const{data:r,error:n}=await Le.from("reminders").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating reminder:",n),new Error("Failed to update reminder.");return r},I1e=async e=>{const{error:t}=await Le.from("reminders").delete().eq("id",e);if(t)throw console.error("Error deleting reminder:",t),new Error("Failed to delete reminder.")},ob=60*1e3;function JY(){const{user:e}=oi(),{toast:t}=yn(),[r,n]=A.useState("Notification"in window?Notification.permission:"default"),a=A.useRef(new Map),[i,o]=A.useState(new Set),s=A.useRef(null);return A.useEffect(()=>{if(!("Notification"in window))return;const l=Notification.permission;n(l),l!=="granted"&&l!=="denied"&&Notification.requestPermission().then(u=>{n(u)})},[]),A.useEffect(()=>{if(!e)return;const l=setInterval(async()=>{try{const u=await XY(),d=new Date;u.forEach(f=>{var x;if(!f.is_active)return;let h=[];const m=new Date(f.reminder_datetime);if(((x=f.recurrence_config)==null?void 0:x.type)==="daily"){const g=R1e(f,d);g&&(h=M1e(f,g))}else(!f.recurrence_config||f.recurrence_config.type==="none")&&(m>=d&&Gb(d,m)<ob?h=[m]:Uve(m)&&Gb(d,m)<ob&&(h=[m]));h.forEach(g=>{const y=Gb(d,g),_=`${f.id}-${g.toISOString()}`,b=a.current.has(_);if(y>=0&&y<ob&&!b){"Notification"in window&&Notification.permission==="granted"&&new Notification("Dental Care Reminder",{body:f.message,icon:"/ransferent.svg",tag:_}),t({title:"Reminder Due",description:f.message,duration:1e4}),a.current.set(_,d.getTime()),o(C=>new Set(C).add(f.id)),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{o(new Set),s.current=null},6e4);const S=d.getTime()-24*60*60*1e3;for(const[C,E]of a.current.entries())E<S&&a.current.delete(C)}})})}catch(u){console.error("Error checking reminders for notifications:",u)}},ob);return()=>{clearInterval(l)}},[e,r,t]),A.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),{permission:r,activeReminderIds:i}}function R1e(e,t){if(!e.recurrence_config||e.recurrence_config.type!=="daily")return null;const r=new Date(e.reminder_datetime),n=e.recurrence_config.interval||1,a=new Date(r);if(a.setHours(0,0,0,0),a>t)return null;let i=a;for(;;){const o=Fa(i,n);if(o>t)break;i=o}return i}function M1e(e,t){var s;const r=new Date(e.reminder_datetime),n=((s=e.recurrence_config)==null?void 0:s.times_per_day)||1;if(n<=0)return[];const a=[],i=new Date(t);i.setHours(0,0,0,0);let o=new Date(i);if(o.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),o<r&&o.toDateString()===r.toDateString()&&(o=r),n===1)o>=r&&o.toDateString()===t.toDateString()&&a.push(o);else{const l=864e5/n;for(let u=0;u<n;u++){const d=new Date(o.getTime()+u*l);d.getDate()===t.getDate()&&d>=r&&a.push(d)}}return a}const fL=e=>new Promise(t=>setTimeout(t,e)),hL=e=>{const t=new Date;if(t.setHours(0,0,0,0),e.expiry_date){const r=new Date(e.expiry_date);if(r.setHours(0,0,0,0),r<t)return"Expired"}return(e.quantity??0)<=(e.low_stock_threshold??0)?"Low Stock":"In Stock"},F1e=30;function L1e(){const{toast:e}=yn(),{user:t}=oi(),r=A.useRef(new Set),n=A.useRef(new Set),a=A.useRef(null),i=A.useCallback((s,l)=>{if(!("Notification"in window)){console.warn("This browser does not support desktop notification");return}const u=()=>{Notification.requestPermission().then(d=>{d==="granted"?new Notification(s,l):console.warn("Desktop notification permission denied.")})};Notification.permission==="granted"?new Notification(s,l):Notification.permission!=="denied"&&u()},[]),o=A.useCallback(async s=>{if(!t)return;const l=new Date;l.setHours(0,0,0,0);const u=new Date(l);u.setDate(l.getDate()+F1e),console.log(`[InventoryAlerts] Check running. Today (normalized): ${l.toISOString()}, Threshold Date: ${u.toISOString()}`);const d=new Set,f=new Set,h=[];for(const m of s){const x=hL(m),g=m.id;if(x==="Low Stock"){const y="low_stock",_=dx(new Date,12),{count:b,error:S}=await Le.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",g).eq("item_type","inventory").eq("notification_type",y).gte("created_at",_.toISOString());if(S&&console.error("Error checking recent low stock notifications:",S),!S&&b===0){console.log(`[InventoryAlerts] PASSED low stock check for item "${m.item_name}". Queueing notification.`),d.add(g);const C=`Item "${m.item_name}" is low on stock (${m.quantity??0} remaining).`,E=`/inventory?highlight=${g}`,O=`low-stock-${g}`;h.push({title:"Low Stock Alert",description:C,variant:"warning",tag:O}),i("Low Stock Alert",{body:C,tag:O});try{const{error:T}=await Le.from("notifications").insert({user_id:t.id,message:C,link_url:E,item_id:g,item_type:"inventory",notification_type:y});if(T)throw T}catch(T){console.error("Error inserting low stock notification:",T)}}else!S&&b&&b>0&&console.log(`[InventoryAlerts] Skipped low stock notification for item "${m.item_name}" (sent recently).`)}if(m.expiry_date){const y=new Date(m.expiry_date),_=new Date(y.getFullYear(),y.getMonth(),y.getDate());if(console.log(`[InventoryAlerts] Checking expiry for item "${m.item_name}" (ID: ${g}). Expiry Date (normalized): ${_.toISOString()}`),_>=l&&_<=u){const b="expiry_soon",S=dx(new Date,12),{count:C,error:E}=await Le.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",g).eq("item_type","inventory").eq("notification_type",b).gte("created_at",S.toISOString());if(E&&console.error("Error checking recent expiry notifications:",E),!E&&C===0){console.log(`[InventoryAlerts] PASSED expiry check for item "${m.item_name}". Queueing notification.`),f.add(g);const O=`Item "${m.item_name}" is expiring on ${_.toLocaleDateString()}.`,T=`/inventory?highlight=${g}`,M=`expiry-soon-${g}`;h.push({title:"Expiry Soon Alert",description:O,variant:"default",tag:M}),i("Expiry Soon Alert",{body:O,tag:M});try{const{error:L}=await Le.from("notifications").insert({user_id:t.id,message:O,link_url:T,item_id:g,item_type:"inventory",notification_type:b});if(L)throw L}catch(L){console.error("Error inserting expiry soon notification:",L)}}else!E&&C&&C>0&&console.log(`[InventoryAlerts] Skipped expiry soon notification for item "${m.item_name}" (sent recently).`)}}}if(d.size>0&&(r.current=new Set([...r.current,...d])),f.size>0&&(n.current=new Set([...n.current,...f])),h.length>0){console.log(`[InventoryAlerts] Processing ${h.length} queued toasts...`),await fL(2e3);for(const m of h)console.log(`[InventoryAlerts] >>> Showing toast: ${m.title} - ${m.description}`),e({title:m.title,description:m.description,variant:m.variant,duration:1/0}),console.log(`[InventoryAlerts] <<< Shown toast: ${m.title}`),await fL(2e3);console.log("[InventoryAlerts] Finished processing queued toasts.")}},[e,t,i]);return A.useEffect(()=>{t&&(async()=>{try{const{data:l,error:u}=await Le.from("inventory_items").select("*");if(u)throw u;l&&o(l)}catch(l){console.error("Error fetching initial inventory for alerts:",l)}})()},[o,t]),A.useEffect(()=>{if(!Le)return;const s=l=>{const u=l.new;u&&(o([u]),hL(u)==="In Stock"&&r.current.has(u.id)&&r.current.delete(u.id))};return a.current=Le.channel("inventory_items_alerts").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},s).subscribe((l,u)=>{l==="SUBSCRIBED"||(l==="CHANNEL_ERROR"||l==="TIMED_OUT"||l==="CLOSED"?console.error(`Inventory Alert Realtime subscription ${l}:`,u):l==="CHANNEL_ERROR"?console.error("Realtime channel error, attempting to resubscribe...",u):(l==="TIMED_OUT"||l==="CLOSED")&&console.warn(`Inventory Alert Realtime subscription ${l}.`,u))}),()=>{const l=a.current;l&&(Le.removeChannel(l).catch(u=>console.error("Error removing inventory alert channel:",u)),a.current=null)}},[Le,o,t]),null}const pL=e=>new Promise(t=>setTimeout(t,e)),j1e=30;function $1e(){console.log("[AssetAlerts] Hook initializing...");const{toast:e}=yn(),{user:t}=oi(),r=A.useRef(new Set),n=A.useRef(new Set),a=A.useRef(null),i=A.useCallback((s,l)=>{if(!("Notification"in window)){console.warn("This browser does not support desktop notification");return}const u=()=>{Notification.requestPermission().then(d=>{d==="granted"?new Notification(s,l):console.warn("Desktop notification permission denied.")})};Notification.permission==="granted"?new Notification(s,l):Notification.permission!=="denied"&&u()},[]),o=A.useCallback(async s=>{if(console.log("[AssetAlerts] checkAndNotifyAssets called with:",s),!t){console.log("[AssetAlerts] checkAndNotifyAssets skipped (no user).");return}const l=new Date;l.setHours(0,0,0,0);const u=new Date(l);u.setDate(l.getDate()+j1e),console.log(`[AssetAlerts] Check running. Today (normalized): ${l.toISOString()}, Threshold Date: ${u.toISOString()}`);const d=new Set,f=new Set,h=[];for(const m of s){const x=m.id;if(m.next_maintenance_due_date){const g=new Date(m.next_maintenance_due_date),y=new Date(g.getFullYear(),g.getMonth(),g.getDate());if(console.log(`[AssetAlerts] Checking maintenance for asset "${m.asset_name}" (ID: ${x}). Due Date (normalized): ${y.toISOString()}`),y>=l&&y<=u){const _="maintenance_due",b=dx(new Date,12),{count:S,error:C}=await Le.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",x).eq("item_type","asset").eq("notification_type",_).gte("created_at",b.toISOString());if(C?console.error("Error checking recent maintenance notifications:",C):console.log(`[AssetAlerts] Maintenance Throttling Check Result for ${m.asset_name}: Count=${S}`),!C&&S===0){console.log(`[AssetAlerts] PASSED maintenance check for asset "${m.asset_name}". Triggering notification.`),d.add(x);const E=`Asset "${m.asset_name}" requires maintenance by ${y.toLocaleDateString()}.`,O=`/assets?highlight=${x}`,T=`maintenance-due-${x}`;h.push({title:"Maintenance Due Soon",description:E,variant:"default",tag:T}),i("Maintenance Due Soon",{body:E,tag:T});try{const{error:M}=await Le.from("notifications").insert({user_id:t.id,message:E,link_url:O,item_id:x,item_type:"asset",notification_type:_});if(M)throw M}catch(M){console.error("Error inserting maintenance notification:",M)}}else!C&&S&&S>0&&console.log(`[AssetAlerts] Skipped maintenance notification for asset "${m.asset_name}" (sent recently).`)}}if(m.warranty_expiry_date){const g=new Date(m.warranty_expiry_date),y=new Date(g.getFullYear(),g.getMonth(),g.getDate());if(console.log(`[AssetAlerts] Checking warranty for asset "${m.asset_name}" (ID: ${x}). Expiry Date (normalized): ${y.toISOString()}`),y>=l&&y<=u){const _="warranty_expiry",b=dx(new Date,12),{count:S,error:C}=await Le.from("notifications").select("id",{count:"exact",head:!0}).eq("user_id",t.id).eq("item_id",x).eq("item_type","asset").eq("notification_type",_).gte("created_at",b.toISOString());if(C?console.error("Error checking recent warranty notifications:",C):console.log(`[AssetAlerts] Warranty Throttling Check Result for ${m.asset_name}: Count=${S}`),!C&&S===0){console.log(`[AssetAlerts] PASSED warranty check for asset "${m.asset_name}". Triggering notification.`),f.add(x);const E=`Warranty for asset "${m.asset_name}" expires on ${y.toLocaleDateString()}.`,O=`/assets?highlight=${x}`,T=`warranty-expiry-${x}`;h.push({title:"Warranty Expiring Soon",description:E,variant:"default",tag:T}),i("Warranty Expiring Soon",{body:E,tag:T});try{const{error:M}=await Le.from("notifications").insert({user_id:t.id,message:E,link_url:O,item_id:x,item_type:"asset",notification_type:_});if(M)throw M}catch(M){console.error("Error inserting warranty notification:",M)}}else!C&&S&&S>0&&console.log(`[AssetAlerts] Skipped warranty notification for asset "${m.asset_name}" (sent recently).`)}}}if(d.size>0&&(r.current=new Set([...r.current,...d])),f.size>0&&(n.current=new Set([...n.current,...f])),h.length>0){console.log(`[AssetAlerts] Processing ${h.length} queued toasts...`),await pL(2e3);for(const m of h)console.log(`[AssetAlerts] >>> Showing toast: ${m.title} - ${m.description}`),e({title:m.title,description:m.description,variant:m.variant,duration:1/0}),console.log(`[AssetAlerts] <<< Shown toast: ${m.title}`),await pL(2e3);console.log("[AssetAlerts] Finished processing queued toasts.")}},[e,t,i]);return A.useEffect(()=>{const s=async()=>{console.log("[AssetAlerts] Starting initial fetch...");try{const{data:l,error:u}=await Le.from("assets").select("*");if(u)throw console.error("Error fetching initial assets for alerts:",u),u;l?(console.log("[AssetAlerts] Initial fetch successful, data:",l),o(l)):console.log("[AssetAlerts] Initial fetch returned no data.")}catch{}};t&&(console.log("[AssetAlerts] User found, calling fetchInitialData."),s())},[o,t]),A.useEffect(()=>{if(!Le||!t)return;const s=u=>{console.log("[AssetAlerts] Asset change detected:",u);const d=u.new;d&&o([d])},l=`asset-alerts-channel-${t.id}`;return console.log(`[AssetAlerts] Attempting to subscribe to channel: ${l}`),a.current=Le.channel(l).on("postgres_changes",{event:"*",schema:"public",table:"assets"},s).subscribe((u,d)=>{console.log(`[AssetAlerts] Channel ${l} subscription status: ${u}`),u==="SUBSCRIBED"||(u==="CHANNEL_ERROR"||u==="TIMED_OUT"||u==="CLOSED")&&console.error(`[AssetAlerts] Asset Alert Realtime subscription ${u} on ${l}:`,d)}),()=>{const u=a.current;if(u){const d=u.topic;console.log(`[AssetAlerts] Attempting to unsubscribe from channel: ${d}`),Le.removeChannel(u).catch(f=>console.error(`[AssetAlerts] Error removing asset alert channel ${d}:`,f)).finally(()=>{a.current===u&&(a.current=null)})}}},[Le,o,t]),null}function B1e(){return JY(),L1e(),$1e(),w("div",{className:"min-h-screen bg-background",children:[" ",w("div",{className:"flex h-screen",children:[c(O1e,{}),w("div",{className:"flex flex-col flex-1 overflow-hidden",children:[c(u1e,{}),c("main",{className:"flex-1 overflow-y-auto",children:c("div",{className:"container py-6",children:c($H,{})})})]})]})]})}class _N extends Error{constructor(r,n,a){super(`Transaction failed during ${r}: ${n.message}`);hr(this,"operation");hr(this,"partialData");hr(this,"originalError");this.name="TransactionError",this.operation=r,this.originalError=n,this.partialData=a}}async function mL(e,t){const r=[];let n=!0,a;try{await Le.rpc("begin_transaction");for(let i=0;i<e.length;i++)try{const o=await e[i]();r.push(o)}catch(o){throw n=!1,a=new _N(`Operation ${i}`,o,r),t&&i>0,a}return await Le.rpc("commit_transaction"),{success:!0,data:r.length===1?r[0]:r}}catch(i){try{await Le.rpc("rollback_transaction")}catch(o){console.error("Transaction rollback failed:",o)}return{success:!1,error:i instanceof _N?i:new _N("Unknown",i)}}}class U1e{constructor(t=5*60*1e3){hr(this,"cache");hr(this,"defaultTTL");this.cache=new Map,this.defaultTTL=t}set(t,r,n){this.cache.set(t,{data:r,timestamp:Date.now()+(n??this.defaultTTL)})}get(t){const r=this.cache.get(t);if(r){if(r.timestamp<Date.now()){this.invalidate(t);return}return r.data}}invalidate(t){this.cache.delete(t)}invalidatePattern(t){this.cache.forEach((r,n)=>{t.test(n)&&this.invalidate(n)})}clear(){this.cache.clear()}}const Qt=new U1e;function jD(e,t){return Le.channel(`public:${e}`).on("postgres_changes",{event:"*",schema:"public",table:e},r=>{Qt.invalidatePattern(new RegExp(`^${e}`)),t(r)}).subscribe()}const Vt={storage:{async uploadFile(e,t){try{const r=e.name.split(".").pop(),n=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${r}`,{data:a,error:i}=await Le.storage.from("medical-records").upload(n,e,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:o}}=Le.storage.from("medical-records").getPublicUrl(a.path);return{path:a.path,url:o,name:e.name,size:e.size,type:e.type}}catch(r){throw console.error("Error uploading file:",r),r}},async deleteFile(e,t){try{const{error:r}=await Le.storage.from(t).remove([e]);if(r)throw r;return!0}catch(r){throw console.error(`Error deleting file from bucket ${t}:`,r),r}},async uploadInventoryPhoto(e,t){const r="inventory-photos";try{const n=e.name.split(".").pop(),a=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${n}`,{data:i,error:o}=await Le.storage.from(r).upload(a,e,{cacheControl:"3600",upsert:!1});if(o)throw o;const{data:{publicUrl:s}}=Le.storage.from(r).getPublicUrl(i.path);return{path:i.path,url:s,name:e.name,size:e.size,type:e.type}}catch(n){throw console.error(`Error uploading to ${r}:`,n),n}},async uploadAssetPhoto(e,t){const r="asset-photos";try{const n=e.name.split(".").pop(),a=`${t}/${Date.now()}-${Math.random().toString(36).substring(2,15)}.${n}`,{data:i,error:o}=await Le.storage.from(r).upload(a,e,{cacheControl:"3600",upsert:!1});if(o)throw o;const{data:{publicUrl:s}}=Le.storage.from(r).getPublicUrl(i.path);return{path:i.path,url:s,name:e.name,size:e.size,type:e.type}}catch(n){throw console.error(`Error uploading to ${r}:`,n),n}}},staff:{async getAll(){const e=Qt.get("staff:all");if(e)return e;const{data:t,error:r}=await Le.from("staff").select("*").order("created_at",{ascending:!1});if(r)throw r;return Qt.set("staff:all",t),t||[]},async getDoctors(){const e=Qt.get("staff:doctors");if(e)return e;const{data:t,error:r}=await Le.from("staff").select("*").eq("role","doctor").order("created_at",{ascending:!1});if(r)throw r;return Qt.set("staff:doctors",t),t||[]},async getAvailableDoctors(e,t){try{const r=new Date(e),n=new Date(t),a=r.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),i=`${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`,o=`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`,s=await Vt.staff.getDoctors(),{data:l,error:u}=await Le.from("absences").select("staff_id").lt("start_time",t).gt("end_time",e);u&&console.error("Error fetching overlapping absences:",u);const d=new Set((l==null?void 0:l.map(h=>h.staff_id))||[]);return s.filter(h=>{if(d.has(h.id))return!1;try{let m=[];if(typeof h.working_hours=="string")m=JSON.parse(h.working_hours);else if(Array.isArray(h.working_hours))m=h.working_hours;else return!1;const x=m.find(y=>y.day.toLowerCase()===a);return!(!x||x.is_open===!1||!(i>=x.start&&o<=x.end))}catch(m){return console.error(`Error processing working hours for doctor ${h.id}:`,h.working_hours,m),!1}})}catch(r){return console.error("Error getting available doctors:",r),[]}},async create(e){typeof e.working_hours=="object"&&e.working_hours!==null&&(e.working_hours=JSON.stringify(e.working_hours));const{data:t,error:r}=await Le.from("staff").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^staff/),t},async update(e,t){const{data:r,error:n}=await Le.from("staff").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidatePattern(/^staff/),r}},absences:{async getAll(){const e="absences:all",t=Qt.get(e);if(t)return t;try{const{data:r,error:n}=await Le.from("absences").select("*").order("start_time",{ascending:!1});if(n)throw n;if(!r)return[];const a=await Vt.staff.getAll(),i=new Map(a.map(s=>[s.id,s])),o=r.map(s=>{const l=s.staff_id?i.get(s.staff_id):null;return{...s,staff:l?{id:l.id,first_name:l.first_name,last_name:l.last_name}:null}});return Qt.set(e,o),o}catch(r){throw console.error("Error in api.absences.getAll:",r),r}},async create(e){if(!e.staff_id||!e.start_time||!e.end_time)throw new Error("Missing required fields for absence creation.");if(new Date(e.end_time)<=new Date(e.start_time))throw new Error("End time must be after start time.");const{data:t,error:r}=await Le.from("absences").insert(e).select().single();if(r)throw r;if(!t)throw new Error("Absence creation returned no data");return Qt.invalidate("absences:all"),t},async delete(e){const{error:t}=await Le.from("absences").delete().eq("id",e);if(t)throw t;Qt.invalidate("absences:all")}},patients:{async schedulePatientCommunication(e){const{data:t,error:r}=await Le.from("patient_communications").insert(e).select().single();if(r)throw r;return Qt.invalidate(`patient_communications:${e.patient_id}`),t},async getPatientCommunications(e){const t=`patient_communications:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("patient_communications").select("*").eq("patient_id",e).order("created_at",{ascending:!1});if(a)throw a;return Qt.set(t,n),n||[]},async generateTreatmentPlan(e,t){var r,n;try{const[a,i]=await Promise.all([Vt.patients.getMedicalRecords(e),Vt.patients.getTreatmentPlans(e)]),o=[],s=[],l=await Le.auth.getSession(),u=(n=(r=l==null?void 0:l.data)==null?void 0:r.session)==null?void 0:n.access_token;if(!u)throw new Error("User not authenticated");const d=await fetch("/functions/v1/treatment-ai",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({patientId:e,currentIssue:t,medicalHistory:a,previousTreatments:i,assessments:o,diagnosticImages:s})});if(!d.ok)throw new Error("Failed to generate treatment plan");return await d.json()}catch(a){throw console.error("Error generating treatment plan:",a),a}},async getAll(){const e="patients:all",t=Qt.get("patients:all");if(t)return t;const{data:r,error:n}=await Le.from("patients").select("*").order("created_at",{ascending:!1});if(n)throw n;return Qt.set(e,r),r},async getById(e){const t=`patients:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("patients").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&Qt.set(t,n),n},async search(e){const{data:t,error:r}=await Le.from("patients").select().or(`first_name.ilike.%${e}%,last_name.ilike.%${e}%,phone.ilike.%${e}%,registration_number.ilike.%${e}%`).order("created_at",{ascending:!1});if(r)throw r;return t},async create(e){const{data:t,error:r}=await Le.from("patients").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^patients/),t},async update(e,t){const{data:r,error:n}=await Le.from("patients").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidate(`patients:${e}`),Qt.invalidate("patients:all"),r},async getMedicalRecords(e){const t=e?`medical_records:${e}`:"medical_records:all",r=Qt.get(t);if(r)return r;let n=Le.from("medical_records").select(`
          *,
          staff:created_by ( first_name, last_name ),
          medical_record_teeth (
            teeth ( id, description )
          )
        `).order("record_date",{ascending:!1});e&&(n=n.eq("patient_id",e));const{data:a,error:i}=await n;if(i)throw i;Qt.set(t,a);const o=(a==null?void 0:a.map(s=>{const l=Array.isArray(s.medical_record_teeth)?s.medical_record_teeth.map(d=>d.teeth).filter(d=>d!==null):[],u={...s};return delete u.medical_record_teeth,u.teeth=l,u}))||[];return console.log("API getMedicalRecords processedData:",o),o},async getTreatmentPlans(e=null){let t=Le.from("treatment_plans").select(`
          *,
          treatments (*),
          metadata:treatment_plan_metadata(*),
          visits:treatment_visits(*),
          teeth:treatment_plan_teeth(
            tooth_id
          ),
          patient:patients!treatment_plans_patient_id_fkey (
            id,
            first_name,
            last_name,
            gender,
            age,
            registration_number
          )
        `).order("created_at",{ascending:!1});e&&(t=t.eq("patient_id",e));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching treatment plans:",n),n;return r==null?void 0:r.map(i=>({...i,patient:i.patient?{full_name:`${i.patient.first_name} ${i.patient.last_name}`,age:i.patient.age,gender:i.patient.gender,registration_number:i.patient.registration_number}:void 0}))},async createMedicalRecord(e,t){const n={...e,record_type:(s=>{switch(s){case"consultation":return"examination";case"diagnosis":return"examination";case"treatment":return"procedure";case"prescription":return"prescription";case"lab_result":return"lab_result";case"other":return"note";default:return"note"}})(e.record_type)};console.log("API inserting mapped record:",n);const{data:a,error:i}=await Le.from("medical_records").insert(n).select().single();if(i)throw console.error("Error creating medical record:",i),i;if(!a)throw new Error("Failed to create medical record: No data returned.");const o=a.id;if(t&&t.length>0){const s=t.map(u=>({medical_record_id:o,tooth_id:u})),{error:l}=await Le.from("medical_record_teeth").insert(s);if(l)throw console.error("Error linking teeth to medical record:",l),l}return e.patient_id&&Qt.invalidate(`medical_records:${e.patient_id}`),Qt.invalidate("medical_records:all"),a},async updateMedicalRecord(e,t){const{data:r,error:n}=await Le.from("medical_records").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidate(`medical_records:${t.patient_id}`),Qt.invalidate("medical_records:all"),r},async deleteMedicalRecord(e){const{data:t}=await Le.from("medical_records").select("patient_id").eq("id",e).single(),{error:r}=await Le.from("medical_records").delete().eq("id",e);if(r)throw r;t&&Qt.invalidate(`medical_records:${t.patient_id}`),Qt.invalidate("medical_records:all")},async getPatientDentalHistoryTeeth(e){if(!e)return console.warn("getPatientDentalHistoryTeeth called without patientId"),[];const t=`patient_dental_history_teeth:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("patient_dental_history_teeth").select("tooth_id, conditions").eq("patient_id",e);if(a)throw console.error(`Error fetching dental history teeth for patient ${e}:`,a),a;const i=(n||[]).map(o=>({tooth_id:o.tooth_id,conditions:Array.isArray(o.conditions)?o.conditions.filter(s=>typeof s=="string"):[]}));return Qt.set(t,i,60*1e3),console.log(`Fetched dental history teeth list for patient ${e}:`,JSON.stringify(i)),i},async savePatientDentalHistoryTeethWithConditions(e,t){if(!e)throw new Error("Patient ID is required to save dental history teeth with conditions.");console.log(`Saving dental history teeth map (with conditions) for patient ${e}:`,JSON.stringify(t));const r=Object.keys(t).map(Number),n=Le.from("patient_dental_history_teeth").delete().eq("patient_id",e);r.length>0&&n.not("tooth_id","in",`(${r.join(",")})`);const{error:a}=await n;if(a)throw console.error(`Error deleting old dental history teeth (with conditions) for patient ${e}:`,a),a;if(console.log(`Deleted stale dental history teeth (with conditions) for patient ${e}.`),r.length>0){const i=r.map(s=>{var l;return{patient_id:e,tooth_id:s,conditions:(l=t[s])!=null&&l.conditions&&Array.isArray(t[s].conditions)?t[s].conditions:["healthy"]}}),{error:o}=await Le.from("patient_dental_history_teeth").upsert(i,{onConflict:"patient_id, tooth_id"});if(o)throw console.error(`Error upserting dental history teeth (with conditions) for patient ${e}:`,o),o;console.log(`Upserted dental history teeth (with conditions) for patient ${e}.`)}else console.log(`No dental history teeth in map for patient ${e}, only performed delete (with conditions).`);return Qt.invalidate(`patient_dental_history_teeth:${e}`),{success:!0}},async getPatientDentalHistoryTeethMap(e){if(!e)return console.warn("getPatientDentalHistoryTeethMap called without patientId"),{};const{data:t,error:r}=await Le.from("patient_dental_history_teeth").select("tooth_id, conditions").eq("patient_id",e);if(r)throw console.error(`Error fetching dental history teeth map for patient ${e}:`,r),r;const n={};return t&&t.forEach(a=>{const i=Array.isArray(a.conditions)&&a.conditions.length>0?a.conditions:["healthy"];n[a.tooth_id]={conditions:i}}),console.log(`Fetched and formatted dental history teeth map for patient ${e}:`,JSON.stringify(n)),n},async getPatientToothConditions(e){if(!e)return console.warn("getPatientToothConditions called without patientId"),[];const t=`patient_tooth_conditions:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("patient_tooth_conditions").select("*").eq("patient_id",e);if(a)throw console.error(`Error fetching tooth conditions for patient ${e}:`,a),a;const i=n||[];return Qt.set(t,i,60*1e3),i},async savePatientToothConditionsDetailed(e,t){if(!e)throw new Error("Patient ID is required for savePatientToothConditionsDetailed.");if(!Array.isArray(t))throw new Error("Invalid conditions input: must be an array.");console.log(`Executing savePatientToothConditionsDetailed for patient ${e} with conditions:`,t);const n=await mL([async()=>{console.log(`Transaction Step 1: Deleting existing conditions for patient ${e}`);const{error:a}=await Le.from("patient_tooth_conditions").delete().eq("patient_id",e);if(a)throw console.error(`Transaction Step 1 FAILED: Error deleting conditions for patient ${e}:`,a),a;return console.log(`Transaction Step 1 SUCCESS: Deleted existing conditions for patient ${e}`),!0},async()=>{if(t.length===0)return console.log(`Transaction Step 2: No new conditions to insert for patient ${e}. Skipping insert.`),[];const a=t.map(s=>({...s,patient_id:e}));console.log(`Transaction Step 2: Inserting ${a.length} new conditions for patient ${e}:`,a);const{data:i,error:o}=await Le.from("patient_tooth_conditions").insert(a).select();if(o)throw console.error(`Transaction Step 2 FAILED: Error inserting conditions for patient ${e}:`,o),o;return console.log(`Transaction Step 2 SUCCESS: Inserted conditions for patient ${e}. Result:`,i),i||[]}]);if(n.success)return console.log(`Transaction successful for patient ${e}.`),Qt.invalidate(`patient_tooth_conditions:${e}`),{success:!0,data:n.data?n.data[1]:[]};throw console.error(`Transaction failed for patient ${e}:`,n.error),n.error||new Error("Unknown transaction error saving tooth conditions.")},async createTreatmentPlan(e,t){const{data:r,error:n}=await Le.from("treatment_plans").insert(e).select().single();if(n)return console.error("Error creating treatment plan:",n),{error:n};if(!r)return{error:new Error("Failed to create treatment plan: No data returned.")};if(t&&t.length>0){const a=t.map(o=>({treatment_plan_id:r.id,tooth_id:o})),{error:i}=await Le.from("treatment_plan_teeth").insert(a);if(i)return console.error("Error linking teeth to treatment plan:",i),{error:i}}return{data:r,error:null}},async getVisitsByPlanId(e){if(!e)return console.warn("[api.patients.getVisitsByPlanId] planId is required, exiting."),[];console.log(`[api.patients.getVisitsByPlanId] Attempting for planId: ${e} (Querying 'treatments' table)`);const t=`treatments_as_visits:plan:${e}`,r=Qt.get(t);if(r)return console.log(`[api.patients.getVisitsByPlanId] Cache hit for planId: ${e}`,r),r;console.log(`[api.patients.getVisitsByPlanId] Cache miss for planId: ${e}`),console.log(`[api.patients.getVisitsByPlanId] PRE-SUPABASE call for planId: ${e} (Targeting 'treatments')`);let n,a;try{const o=await Le.from("treatments").select("id").eq("plan_id",e);n=o.data,a=o.error,console.log(`[api.patients.getVisitsByPlanId] POST-SUPABASE call for planId: ${e}. Response data from 'treatments':`,n,"Response error:",a)}catch(o){throw console.error(`[api.patients.getVisitsByPlanId] NATIVE ERROR during Supabase call for planId ${e} (Targeting 'treatments'):`,o),o}if(a)throw console.error(`[api.patients.getVisitsByPlanId] Supabase returned error for plan ${e} (Targeting 'treatments'):`,a),a;const i=n||[];return console.log(`[api.patients.getVisitsByPlanId] Result for planId ${e} from 'treatments' before caching and returning:`,i),Qt.set(t,i),i},async createTreatmentPlanMetadata(e){const{data:t,error:r}=await Le.from("treatment_plan_metadata").insert(e).select().single();return{data:t,error:r}},async createTreatmentVisit(e){const t={...e,scheduled_date:e.scheduled_date?e.scheduled_date.toISOString().split("T")[0]:null},{data:r,error:n}=await Le.from("treatment_visits").insert([t]).select().single();if(n)throw n;return r},async createTreatmentVisitsBatch(e){const{data:t,error:r}=await Le.from("treatment_visits").insert(e).select();return r?(console.error("Error in createTreatmentVisitsBatch:",r),{data:null,error:r}):{data:t,error:null}},async getTreatmentPlanDetails(e){const{data:t,error:r}=await Le.from("treatment_plans").select(`
          *,
          metadata:treatment_plan_metadata(*),
          visits:treatment_visits(*),
          teeth:treatment_plan_teeth(
            tooth_id
          )
        `).eq("id",e).single();return r?(console.error("Error fetching treatment plan details:",r),{error:r}):{data:t,error:null}},async updateTreatmentPlan(e,t){const{data:r,error:n}=await Le.from("treatment_plans").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidatePattern(/^treatment_plans/),r},async deleteTreatmentPlan(e){const{data:t}=await Le.from("treatment_plans").select("patient_id").eq("id",e).single(),{error:r}=await Le.from("treatment_plans").delete().eq("id",e);if(r)throw r;t&&Qt.invalidate(`treatment_plans:${t.patient_id}`),Qt.invalidate("treatment_plans:all")},async createTreatmentPlanWithTreatments(e,t){const r=[async()=>{const{data:a,error:i}=await Le.from("treatment_plans").insert(e).select().single();if(i)throw i;if(!a)throw new Error("Treatment plan creation returned no data");return a},async a=>{if(!a||!a.id)throw new Error("Failed to get ID from created treatment plan");const i=t.map(l=>({...l,plan_id:a.id}));if(i.length===0)return[];const{data:o,error:s}=await Le.from("treatments").insert(i).select();if(s)throw s;if(!o)throw new Error("Treatment creation returned no data");return o}],n=await mL([()=>r[0](),()=>r[1]({})]);if(n.success&&n.data){const a=n.data[0];a&&a.patient_id&&(Qt.invalidate(`treatment_plans:${a.patient_id}`),Qt.invalidate("treatment_plans:all"))}return n},async createTreatment(e){const{data:t,error:r}=await Le.from("treatments").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^treatment_plans/),t},async updateTreatment(e,t){const{data:r,error:n}=await Le.from("treatments").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidatePattern(/^treatment_plans/),r},async deleteTreatment(e){const{error:t}=await Le.from("treatments").delete().eq("id",e);if(t)throw t;Qt.invalidatePattern(/^treatment_plans/)},async uploadProfilePhoto(e,t){try{const r=await Vt.storage.uploadFile(e,t);return await Vt.patients.update(t,{profile_photo_url:r.url}),r}catch(r){throw console.error("Error uploading profile photo:",r),r}},async uploadSignature(e,t){try{const r=await Vt.storage.uploadFile(e,t);return await Vt.patients.update(t,{signature_url:r.url}),r}catch(r){throw console.error("Error uploading signature:",r),r}},async addDocument(e,t,r,n=""){try{const a=await Vt.storage.uploadFile(e,t),i=await Vt.patients.getById(t);if(!i)throw new Error("Patient not found");const o=Array.isArray(i.documents)?i.documents:[];return o.push({...a,docType:r,notes:n,dateAdded:new Date().toISOString()}),await Vt.patients.update(t,{documents:o}),a}catch(a){throw console.error("Error adding document:",a),a}},async removeDocument(e,t){try{const r=await Vt.patients.getById(e);if(!r)throw new Error("Patient not found");const n=(Array.isArray(r.documents)?r.documents:[]).filter(a=>a.path!==t);return await Vt.patients.update(e,{documents:n}),await Vt.storage.deleteFile(t,"medical-records"),!0}catch(r){throw console.error("Error removing document:",r),r}},async getTreatmentVisitById(e){const t=`treatment_visit:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("treatment_visits").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw console.error("Error fetching treatment visit by ID:",a),a;return n&&Qt.set(t,n),n},async savePatientDentalHistoryTeethWithConditions(e,t){if(!e)throw new Error("Patient ID is required to save dental history teeth with conditions.");console.log(`Saving dental history teeth map (with conditions) for patient ${e}:`,JSON.stringify(t));const r=Object.keys(t).map(Number),n=Le.from("patient_dental_history_teeth").delete().eq("patient_id",e);r.length>0&&n.not("tooth_id","in",`(${r.join(",")})`);const{error:a}=await n;if(a)throw console.error(`Error deleting old dental history teeth (with conditions) for patient ${e}:`,a),a;if(console.log(`Deleted stale dental history teeth (with conditions) for patient ${e}.`),r.length>0){const i=r.map(s=>{var l;return{patient_id:e,tooth_id:s,conditions:(l=t[s])!=null&&l.conditions&&Array.isArray(t[s].conditions)?t[s].conditions:["healthy"]}}),{error:o}=await Le.from("patient_dental_history_teeth").upsert(i,{onConflict:"patient_id, tooth_id"});if(o)throw console.error(`Error upserting dental history teeth (with conditions) for patient ${e}:`,o),o;console.log(`Upserted dental history teeth (with conditions) for patient ${e}.`)}else console.log(`No dental history teeth in map for patient ${e}, only performed delete (with conditions).`);return Qt.invalidate(`patient_dental_history_teeth:${e}`),{success:!0}}},inventory:{async getAll(){const e="inventory:all",t=Qt.get(e);if(t)return t;const{data:r,error:n}=await Le.from("inventory_items").select("*").order("created_at",{ascending:!1});if(n)throw n;return Qt.set(e,r||[]),r||[]},async getById(e){const t=`inventory:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("inventory_items").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&Qt.set(t,n),n},async create(e){const{data:t,error:r}=await Le.from("inventory_items").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^inventory/),t},async update(e,t){const{data:r,error:n}=await Le.from("inventory_items").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidate(`inventory:${e}`),Qt.invalidate("inventory:all"),r},async delete(e){const t=await Vt.inventory.getById(e);if(t!=null&&t.photo_url)try{const a=new URL(t.photo_url).pathname.split("/inventory-photos/")[1];a&&await Vt.storage.deleteFile(a,"inventory-photos")}catch(n){console.error("Error parsing/deleting inventory photo URL:",n)}const{error:r}=await Le.from("inventory_items").delete().eq("id",e);if(r)throw r;Qt.invalidate(`inventory:${e}`),Qt.invalidate("inventory:all")},async uploadPhoto(e,t){const r=await Vt.storage.uploadInventoryPhoto(e,t);return await Vt.inventory.update(t,{photo_url:r.url}),r}},assets:{async getAll(){const e="assets:all",t=Qt.get(e);if(t)return t;const{data:r,error:n}=await Le.from("assets").select("*").order("created_at",{ascending:!1});if(n)throw n;return Qt.set(e,r||[]),r||[]},async getById(e){const t=`assets:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("assets").select("*").eq("id",e).single();if(a&&a.code!=="PGRST116")throw a;return n&&Qt.set(t,n),n},async create(e){const{data:t,error:r}=await Le.from("assets").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^assets/),t},async update(e,t){const{data:r,error:n}=await Le.from("assets").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidate(`assets:${e}`),Qt.invalidate("assets:all"),r},async delete(e){const t=await Vt.assets.getById(e);if(t!=null&&t.photo_url)try{const a=new URL(t.photo_url).pathname.split("/asset-photos/")[1];a&&await Vt.storage.deleteFile(a,"asset-photos")}catch(n){console.error("Error parsing/deleting asset photo URL:",n)}const{error:r}=await Le.from("assets").delete().eq("id",e);if(r)throw r;Qt.invalidate(`assets:${e}`),Qt.invalidate("assets:all")},async uploadPhoto(e,t){const r=await Vt.storage.uploadAssetPhoto(e,t);return await Vt.assets.update(t,{photo_url:r.url}),r}},communications:{async schedule(e){var t,r;try{const n=await Le.auth.getSession(),a=(r=(t=n==null?void 0:n.data)==null?void 0:t.session)==null?void 0:r.access_token;a||console.warn("No access token found for scheduling communication.");const i=await fetch("/functions/v1/patient-communication",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify(e)});if(!i.ok){const s=await i.json();throw new Error(s.error||`Failed to schedule communication: ${i.statusText}`)}const o=await i.json();return console.log("Communication scheduled successfully:",o),o}catch(n){throw console.error("Error scheduling communication:",n),n}},async cancelByAppointment(e){var t,r;try{const n=await Le.auth.getSession(),a=(r=(t=n==null?void 0:n.data)==null?void 0:t.session)==null?void 0:r.access_token;a||console.warn("No access token found for cancelling communication.");const i=await fetch("/functions/v1/patient-communication/cancel-by-appointment",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}},body:JSON.stringify({appointmentId:e})});if(!i.ok){const s=await i.json();throw new Error(s.error||`Failed to cancel communications: ${i.statusText}`)}const o=await i.json();return console.log(`Communications cancellation requested for appointment ${e}:`,o),o}catch(n){throw console.error(`Error cancelling communications for appointment ${e}:`,n),n}}},appointments:{async getAll(){const e="appointments:all",t=Qt.get("appointments:all");if(t)return t;const{data:r,error:n}=await Le.from("appointments").select(`
          *,
          patients (id, first_name, last_name, email, phone),
          staff (id, first_name, last_name, role) 
        `).order("start_time",{ascending:!0});if(n)throw n;return Qt.set(e,r),r||[]},async getByDateRange(e,t){const r=`appointments:range:${e}:${t}`,n=Qt.get("appointments:range");if(n)return n;const{data:a,error:i}=await Le.from("appointments").select(`
         *,
         patients (id, first_name, last_name, email, phone),
         staff (id, first_name, last_name, role, specialization)
       `).gte("start_time",e).lte("start_time",t).order("start_time",{ascending:!0});if(i)throw i;return Qt.set(r,a,60*1e3),a||[]},async getByPatientId(e){const t=`appointments:patient:${e}`,r=Qt.get(t);if(r)return r;const{data:n,error:a}=await Le.from("appointments").select(`
          *,
          patients (id, first_name, last_name),
          staff (id, first_name, last_name)
        `).eq("patient_id",e).order("start_time",{ascending:!1});if(a)throw a;return Qt.set(t,n||[],60*1e3),n||[]},async create(e){const{data:t,error:r}=await Le.from("appointments").insert(e).select().single();if(r)throw r;return Qt.invalidatePattern(/^appointments/),t},async update(e,t){const{data:r,error:n}=await Le.from("appointments").update(t).eq("id",e).select().single();if(n)throw n;return Qt.invalidatePattern(/^appointments/),r},async cancel(e){const{data:t,error:r}=await Le.from("appointments").update({status:"cancelled"}).eq("id",e).select().single();if(r)throw r;return Qt.invalidatePattern(/^appointments/),t},async getAppointmentsByTreatmentIds(e){if(!e||e.length===0)return[];const{data:t,error:r}=await Le.from("appointments").select(`
          *,
          staff:staff_id (
            id,
            first_name,
            last_name,
            role,
            specialization
          )
        `).in("treatment_id",e);if(r)throw console.error("Error fetching appointments by treatment IDs:",r),r;return t||[]}},settings:{async get(){const e="clinic_settings",t=Qt.get(e);if(t)return t;const{data:r,error:n}=await Le.from("clinic_settings").select().order("created_at",{ascending:!1}).limit(1);if(n&&n.code!=="PGRST116")throw n;const a=(r==null?void 0:r[0])||{id:"",name:"DentalCare Pro",address:"123 Healthcare Avenue",phone:"+1234567890",email:"info@dentalcarepro.com",website:"https://dentalcarepro.com",working_hours:[{day:"monday",start:"09:00",end:"17:00",is_open:!0},{day:"tuesday",start:"09:00",end:"17:00",is_open:!0},{day:"wednesday",start:"09:00",end:"17:00",is_open:!0},{day:"thursday",start:"09:00",end:"17:00",is_open:!0},{day:"friday",start:"09:00",end:"17:00",is_open:!0},{day:"saturday",start:"10:00",end:"14:00",is_open:!1},{day:"sunday",start:"10:00",end:"14:00",is_open:!1}],notification_preferences:{reminder_time:"24h",system_updates:!0,sms_notifications:!0,email_notifications:!0,appointment_reminders:!0},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Qt.set(e,a),a},async update(e){if(!e.id){const i={...e,name:e.name||"Default Clinic Name"},{data:o,error:s}=await Le.from("clinic_settings").insert(i).select().single();if(s)throw s;return Qt.invalidate("clinic_settings"),o}const{id:t,...r}=e,{data:n,error:a}=await Le.from("clinic_settings").update(r).eq("id",t).select().single();if(a)throw a;return Qt.invalidate("clinic_settings"),n}},async getTreatmentMatrixOptions(){const e="treatmentMatrixOptionsPairs",t=Qt.get(e);if(t)return t;try{const{data:r,error:n}=await Le.from("ai_treatment_planning_matrix").select("domain, condition").not("domain","is",null).not("condition","is",null);if(n)throw n;const a=r?Array.from(new Map(r.map(o=>[`${o.domain}-${o.condition}`,o])).values()):[];a.sort((o,s)=>o.domain<s.domain?-1:o.domain>s.domain?1:o.condition<s.condition?-1:o.condition>s.condition?1:0);const i=a;return Qt.set(e,i,60*60*1e3),i}catch(r){return console.error("Error fetching treatment matrix options pairs:",r),[]}},async getMatrixDetails(e,t){const r=`matrixDetails:${e}:${t}`,n=Qt.get(r);if(n!==void 0)return n;try{const{data:a,error:i}=await Le.from("ai_treatment_planning_matrix").select("*").eq("domain",e).eq("condition",t).limit(1).maybeSingle();if(i&&i.code!=="PGRST116")throw i;return Qt.set(r,a,5*60*1e3),a}catch(a){return console.error(`Error fetching matrix details for ${e}/${t}:`,a),null}},async getVisitsByPlanId(e){if(!e)return[];const{data:t,error:r}=await Le.from("treatment_visits").select("id").eq("treatment_plan_id",e);if(r)throw console.error(`Error fetching visits for plan ${e}:`,r),r;return t||[]},async uploadProfilePhoto(e,t){try{const r=await Vt.storage.uploadFile(e,t);return await Vt.patients.update(t,{profile_photo_url:r.url}),r}catch(r){throw console.error("Error uploading profile photo:",r),r}},async uploadSignature(e,t){try{const r=await Vt.storage.uploadFile(e,t);return await Vt.patients.update(t,{signature_url:r.url}),r}catch(r){throw console.error("Error uploading signature:",r),r}},async addDocument(e,t,r,n=""){try{const a=await Vt.storage.uploadFile(e,t),i=await Vt.patients.getById(t);if(!i)throw new Error("Patient not found");const o=Array.isArray(i.documents)?i.documents:[];return o.push({...a,docType:r,notes:n,dateAdded:new Date().toISOString()}),await Vt.patients.update(t,{documents:o}),a}catch(a){throw console.error("Error adding document:",a),a}},async removeDocument(e,t){try{const r=await Vt.patients.getById(e);if(!r)throw new Error("Patient not found");const n=(Array.isArray(r.documents)?r.documents:[]).filter(a=>a.path!==t);return await Vt.patients.update(e,{documents:n}),await Vt.storage.deleteFile(t,"medical-records"),!0}catch(r){throw console.error("Error removing document:",r),r}}};function Aa({heading:e,text:t,children:r,className:n}){return w("div",{className:Rt("grid gap-1",n),children:[c("h1",{className:"text-2xl font-semibold tracking-tight",children:e}),t&&c("p",{className:"text-muted-foreground",children:t}),r]})}function h6(e,[t,r]){return Math.min(r,Math.max(t,e))}function T4(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var QY=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q1e="VisuallyHidden",O4=A.forwardRef((e,t)=>c(pr.span,{...e,ref:t,style:{...QY,...e.style}}));O4.displayName=q1e;var z1e=O4,W1e=[" ","Enter","ArrowUp","ArrowDown"],V1e=[" ","Enter"],J0="Select",[D4,I4,H1e]=Cw(J0),[fy,RJe]=eo(J0,[H1e,Em]),R4=Em(),[G1e,Pm]=fy(J0),[K1e,Y1e]=fy(J0),eX=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:x}=e,g=R4(t),[y,_]=A.useState(null),[b,S]=A.useState(null),[C,E]=A.useState(!1),O=wg(u),[T,M]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:J0}),[L,z]=hl({prop:o,defaultProp:s,onChange:l,caller:J0}),P=A.useRef(null),R=y?x||!!y.closest("form"):!0,[j,V]=A.useState(new Set),Z=Array.from(j).map(te=>te.props.value).join(";");return c(m4,{...g,children:w(G1e,{required:m,scope:t,trigger:y,onTriggerChange:_,valueNode:b,onValueNodeChange:S,valueNodeHasChildren:C,onValueNodeHasChildrenChange:E,contentId:Ll(),value:L,onValueChange:z,open:T,onOpenChange:M,dir:O,triggerPointerDownPosRef:P,disabled:h,children:[c(D4.Provider,{scope:t,children:c(K1e,{scope:e.__scopeSelect,onNativeOptionAdd:A.useCallback(te=>{V(q=>new Set(q).add(te))},[]),onNativeOptionRemove:A.useCallback(te=>{V(q=>{const Y=new Set(q);return Y.delete(te),Y})},[]),children:r})}),R?w(AX,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:L,onChange:te=>z(te.target.value),disabled:h,form:x,children:[L===void 0?c("option",{value:""}):null,Array.from(j)]},Z):null]})})};eX.displayName=J0;var tX="SelectTrigger",rX=A.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=R4(r),o=Pm(tX,r),s=o.disabled||n,l=Hr(t,o.onTriggerChange),u=I4(r),d=A.useRef("touch"),[f,h,m]=kX(g=>{const y=u().filter(S=>!S.disabled),_=y.find(S=>S.value===o.value),b=EX(y,g,_);b!==void 0&&o.onValueChange(b.value)}),x=g=>{s||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return c(Ow,{asChild:!0,...i,children:c(pr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":NX(o.value)?"":void 0,...a,ref:l,onClick:Wt(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:Wt(a.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:Wt(a.onKeyDown,g=>{const y=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(y&&g.key===" ")&&W1e.includes(g.key)&&(x(),g.preventDefault())})})})});rX.displayName=tX;var nX="SelectValue",aX=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...s}=e,l=Pm(nX,r),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,f=Hr(t,l.onValueNodeChange);return ii(()=>{u(d)},[u,d]),c(pr.span,{...s,ref:f,style:{pointerEvents:"none"},children:NX(l.value)?c(_r,{children:o}):i})});aX.displayName=nX;var X1e="SelectIcon",iX=A.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return c(pr.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});iX.displayName=X1e;var Z1e="SelectPortal",oX=e=>c(cy,{asChild:!0,...e});oX.displayName=Z1e;var Q0="SelectContent",sX=A.forwardRef((e,t)=>{const r=Pm(Q0,e.__scopeSelect),[n,a]=A.useState();if(ii(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?ny.createPortal(c(lX,{scope:e.__scopeSelect,children:c(D4.Slot,{scope:e.__scopeSelect,children:c("div",{children:e.children})})}),i):null}return c(cX,{...e,ref:t})});sX.displayName=Q0;var Mu=10,[lX,Tm]=fy(Q0),J1e="SelectContentImpl",Q1e=sm("SelectContent.RemoveScroll"),cX=A.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:y,..._}=e,b=Pm(Q0,r),[S,C]=A.useState(null),[E,O]=A.useState(null),T=Hr(t,fe=>C(fe)),[M,L]=A.useState(null),[z,P]=A.useState(null),R=I4(r),[j,V]=A.useState(!1),Z=A.useRef(!1);A.useEffect(()=>{if(S)return y4(S)},[S]),u4();const te=A.useCallback(fe=>{const[ie,...X]=R().map(re=>re.ref.current),[ue]=X.slice(-1),de=document.activeElement;for(const re of fe)if(re===de||(re==null||re.scrollIntoView({block:"nearest"}),re===ie&&E&&(E.scrollTop=0),re===ue&&E&&(E.scrollTop=E.scrollHeight),re==null||re.focus(),document.activeElement!==de))return},[R,E]),q=A.useCallback(()=>te([M,S]),[te,M,S]);A.useEffect(()=>{j&&q()},[j,q]);const{onOpenChange:Y,triggerPointerDownPosRef:U}=b;A.useEffect(()=>{if(S){let fe={x:0,y:0};const ie=ue=>{var de,re;fe={x:Math.abs(Math.round(ue.pageX)-(((de=U.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((re=U.current)==null?void 0:re.y)??0))}},X=ue=>{fe.x<=10&&fe.y<=10?ue.preventDefault():S.contains(ue.target)||Y(!1),document.removeEventListener("pointermove",ie),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",X,{capture:!0})}}},[S,Y,U]),A.useEffect(()=>{const fe=()=>Y(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[Y]);const[G,J]=kX(fe=>{const ie=R().filter(de=>!de.disabled),X=ie.find(de=>de.ref.current===document.activeElement),ue=EX(ie,fe,X);ue&&setTimeout(()=>ue.ref.current.focus())}),D=A.useCallback((fe,ie,X)=>{const ue=!Z.current&&!X;(b.value!==void 0&&b.value===ie||ue)&&(L(fe),ue&&(Z.current=!0))},[b.value]),K=A.useCallback(()=>S==null?void 0:S.focus(),[S]),Q=A.useCallback((fe,ie,X)=>{const ue=!Z.current&&!X;(b.value!==void 0&&b.value===ie||ue)&&P(fe)},[b.value]),ae=n==="popper"?p6:uX,se=ae===p6?{side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:y}:{};return c(lX,{scope:r,content:S,viewport:E,onViewportChange:O,itemRefCallback:D,selectedItem:M,onItemLeave:K,itemTextRefCallback:Q,focusSelectedItem:q,selectedItemText:z,position:n,isPositioned:j,searchRef:G,children:c(Iw,{as:Q1e,allowPinchZoom:!0,children:c(Pw,{asChild:!0,trapped:b.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:Wt(a,fe=>{var ie;(ie=b.trigger)==null||ie.focus({preventScroll:!0}),fe.preventDefault()}),children:c(_g,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:c(ae,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:fe=>fe.preventDefault(),..._,...se,onPlaced:()=>V(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Wt(_.onKeyDown,fe=>{const ie=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!ie&&fe.key.length===1&&J(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let ue=R().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const de=fe.target,re=ue.indexOf(de);ue=ue.slice(re+1)}setTimeout(()=>te(ue)),fe.preventDefault()}})})})})})})});cX.displayName=J1e;var eye="SelectItemAlignedPosition",uX=A.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Pm(Q0,r),o=Tm(Q0,r),[s,l]=A.useState(null),[u,d]=A.useState(null),f=Hr(t,T=>d(T)),h=I4(r),m=A.useRef(!1),x=A.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:_,focusSelectedItem:b}=o,S=A.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&u&&g&&y&&_){const T=i.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),z=_.getBoundingClientRect();if(i.dir!=="rtl"){const de=z.left-M.left,re=L.left-de,ke=T.left-re,Re=T.width+ke,Pe=Math.max(Re,M.width),ge=window.innerWidth-Mu,Ye=h6(re,[Mu,Math.max(Mu,ge-Pe)]);s.style.minWidth=Re+"px",s.style.left=Ye+"px"}else{const de=M.right-z.right,re=window.innerWidth-L.right-de,ke=window.innerWidth-T.right-re,Re=T.width+ke,Pe=Math.max(Re,M.width),ge=window.innerWidth-Mu,Ye=h6(re,[Mu,Math.max(Mu,ge-Pe)]);s.style.minWidth=Re+"px",s.style.right=Ye+"px"}const P=h(),R=window.innerHeight-Mu*2,j=g.scrollHeight,V=window.getComputedStyle(u),Z=parseInt(V.borderTopWidth,10),te=parseInt(V.paddingTop,10),q=parseInt(V.borderBottomWidth,10),Y=parseInt(V.paddingBottom,10),U=Z+te+j+Y+q,G=Math.min(y.offsetHeight*5,U),J=window.getComputedStyle(g),D=parseInt(J.paddingTop,10),K=parseInt(J.paddingBottom,10),Q=T.top+T.height/2-Mu,ae=R-Q,se=y.offsetHeight/2,fe=y.offsetTop+se,ie=Z+te+fe,X=U-ie;if(ie<=Q){const de=P.length>0&&y===P[P.length-1].ref.current;s.style.bottom="0px";const re=u.clientHeight-g.offsetTop-g.offsetHeight,ke=Math.max(ae,se+(de?K:0)+re+q),Re=ie+ke;s.style.height=Re+"px"}else{const de=P.length>0&&y===P[0].ref.current;s.style.top="0px";const ke=Math.max(Q,Z+g.offsetTop+(de?D:0)+se)+X;s.style.height=ke+"px",g.scrollTop=ie-Q+g.offsetTop}s.style.margin=`${Mu}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,s,u,g,y,_,i.dir,n]);ii(()=>S(),[S]);const[C,E]=A.useState();ii(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const O=A.useCallback(T=>{T&&x.current===!0&&(S(),b==null||b(),x.current=!1)},[S,b]);return c(rye,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:m,onScrollButtonChange:O,children:c("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:c(pr.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});uX.displayName=eye;var tye="SelectPopperPosition",p6=A.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Mu,...i}=e,o=R4(r);return c(g4,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});p6.displayName=tye;var[rye,$D]=fy(Q0,{}),m6="SelectViewport",dX=A.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Tm(m6,r),o=$D(m6,r),s=Hr(t,i.onViewportChange),l=A.useRef(0);return w(_r,{children:[c("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),c(D4.Slot,{scope:r,children:c(pr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Wt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(l.current-d.scrollTop);if(m>0){const x=window.innerHeight-Mu*2,g=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),_=Math.max(g,y);if(_<x){const b=_+m,S=Math.min(x,b),C=b-S;f.style.height=S+"px",f.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});dX.displayName=m6;var fX="SelectGroup",[nye,aye]=fy(fX),iye=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ll();return c(nye,{scope:r,id:a,children:c(pr.div,{role:"group","aria-labelledby":a,...n,ref:t})})});iye.displayName=fX;var hX="SelectLabel",pX=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=aye(hX,r);return c(pr.div,{id:a.id,...n,ref:t})});pX.displayName=hX;var b5="SelectItem",[oye,mX]=fy(b5),gX=A.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,s=Pm(b5,r),l=Tm(b5,r),u=s.value===n,[d,f]=A.useState(i??""),[h,m]=A.useState(!1),x=Hr(t,b=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,b,n,a)}),g=Ll(),y=A.useRef("touch"),_=()=>{a||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c(oye,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:A.useCallback(b=>{f(S=>S||((b==null?void 0:b.textContent)??"").trim())},[]),children:c(D4.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:c(pr.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:Wt(o.onFocus,()=>m(!0)),onBlur:Wt(o.onBlur,()=>m(!1)),onClick:Wt(o.onClick,()=>{y.current!=="mouse"&&_()}),onPointerUp:Wt(o.onPointerUp,()=>{y.current==="mouse"&&_()}),onPointerDown:Wt(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:Wt(o.onPointerMove,b=>{var S;y.current=b.pointerType,a?(S=l.onItemLeave)==null||S.call(l):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Wt(o.onPointerLeave,b=>{var S;b.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Wt(o.onKeyDown,b=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&b.key===" "||(V1e.includes(b.key)&&_(),b.key===" "&&b.preventDefault())})})})})});gX.displayName=b5;var _2="SelectItemText",vX=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Pm(_2,r),s=Tm(_2,r),l=mX(_2,r),u=Y1e(_2,r),[d,f]=A.useState(null),h=Hr(t,_=>f(_),l.onItemTextChange,_=>{var b;return(b=s.itemTextRefCallback)==null?void 0:b.call(s,_,l.value,l.disabled)}),m=d==null?void 0:d.textContent,x=A.useMemo(()=>c("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return ii(()=>(g(x),()=>y(x)),[g,y,x]),w(_r,{children:[c(pr.span,{id:l.textId,...i,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ny.createPortal(i.children,o.valueNode):null]})});vX.displayName=_2;var yX="SelectItemIndicator",xX=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return mX(yX,r).isSelected?c(pr.span,{"aria-hidden":!0,...n,ref:t}):null});xX.displayName=yX;var g6="SelectScrollUpButton",wX=A.forwardRef((e,t)=>{const r=Tm(g6,e.__scopeSelect),n=$D(g6,e.__scopeSelect),[a,i]=A.useState(!1),o=Hr(t,n.onScrollButtonChange);return ii(()=>{if(r.viewport&&r.isPositioned){let s=function(){const u=l.scrollTop>0;i(u)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),a?c(bX,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});wX.displayName=g6;var v6="SelectScrollDownButton",_X=A.forwardRef((e,t)=>{const r=Tm(v6,e.__scopeSelect),n=$D(v6,e.__scopeSelect),[a,i]=A.useState(!1),o=Hr(t,n.onScrollButtonChange);return ii(()=>{if(r.viewport&&r.isPositioned){let s=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),a?c(bX,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});_X.displayName=v6;var bX=A.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Tm("SelectScrollButton",r),o=A.useRef(null),s=I4(r),l=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),ii(()=>{var d;const u=s().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),c(pr.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Wt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Wt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Wt(a.onPointerLeave,()=>{l()})})}),sye="SelectSeparator",SX=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return c(pr.div,{"aria-hidden":!0,...n,ref:t})});SX.displayName=sye;var y6="SelectArrow",lye=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=R4(r),i=Pm(y6,r),o=Tm(y6,r);return i.open&&o.position==="popper"?c(v4,{...a,...n,ref:t}):null});lye.displayName=y6;var cye="SelectBubbleInput",AX=A.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=A.useRef(null),i=Hr(n,a),o=T4(t);return A.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(s,t),s.dispatchEvent(f)}},[o,t]),c(pr.select,{...r,style:{...QY,...r.style},ref:i,defaultValue:t})});AX.displayName=cye;function NX(e){return e===""||e===void 0}function kX(e){const t=Pi(e),r=A.useRef(""),n=A.useRef(0),a=A.useCallback(o=>{const s=r.current+o;t(s),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=A.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function EX(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=uye(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==r?l:void 0}function uye(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var dye=eX,CX=rX,fye=aX,hye=iX,pye=oX,PX=sX,mye=dX,TX=pX,OX=gX,gye=vX,vye=xX,DX=wX,IX=_X,RX=SX;const Wr=dye,Vr=fye,Br=A.forwardRef(({className:e,children:t,...r},n)=>w(CX,{ref:n,className:Rt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,c(hye,{asChild:!0,children:c(G8,{className:"h-4 w-4 opacity-50"})})]}));Br.displayName=CX.displayName;const MX=A.forwardRef(({className:e,...t},r)=>c(DX,{ref:r,className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:c(hce,{className:"h-4 w-4"})}));MX.displayName=DX.displayName;const FX=A.forwardRef(({className:e,...t},r)=>c(IX,{ref:r,className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:c(G8,{className:"h-4 w-4"})}));FX.displayName=IX.displayName;const Ur=A.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>c(pye,{children:w(PX,{ref:a,className:Rt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[c(MX,{}),c(mye,{className:Rt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),c(FX,{})]})}));Ur.displayName=PX.displayName;const yye=A.forwardRef(({className:e,...t},r)=>c(TX,{ref:r,className:Rt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));yye.displayName=TX.displayName;const wt=A.forwardRef(({className:e,children:t,...r},n)=>w(OX,{ref:n,className:Rt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[c("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c(vye,{children:c(g1,{className:"h-4 w-4"})})}),c(gye,{children:t})]}));wt.displayName=OX.displayName;const xye=A.forwardRef(({className:e,...t},r)=>c(RX,{ref:r,className:Rt("-mx-1 my-1 h-px bg-muted",e),...t}));xye.displayName=RX.displayName;var bN,gL;function ql(){if(gL)return bN;gL=1;var e=Array.isArray;return bN=e,bN}var SN,vL;function LX(){if(vL)return SN;vL=1;var e=typeof W_=="object"&&W_&&W_.Object===Object&&W_;return SN=e,SN}var AN,yL;function pf(){if(yL)return AN;yL=1;var e=LX(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return AN=r,AN}var NN,xL;function jw(){if(xL)return NN;xL=1;var e=pf(),t=e.Symbol;return NN=t,NN}var kN,wL;function wye(){if(wL)return kN;wL=1;var e=jw(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,a=e?e.toStringTag:void 0;function i(o){var s=r.call(o,a),l=o[a];try{o[a]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(s?o[a]=l:delete o[a]),d}return kN=i,kN}var EN,_L;function _ye(){if(_L)return EN;_L=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return EN=r,EN}var CN,bL;function Th(){if(bL)return CN;bL=1;var e=jw(),t=wye(),r=_ye(),n="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function o(s){return s==null?s===void 0?a:n:i&&i in Object(s)?t(s):r(s)}return CN=o,CN}var PN,SL;function Oh(){if(SL)return PN;SL=1;function e(t){return t!=null&&typeof t=="object"}return PN=e,PN}var TN,AL;function hy(){if(AL)return TN;AL=1;var e=Th(),t=Oh(),r="[object Symbol]";function n(a){return typeof a=="symbol"||t(a)&&e(a)==r}return TN=n,TN}var ON,NL;function BD(){if(NL)return ON;NL=1;var e=ql(),t=hy(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(e(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return ON=a,ON}var DN,kL;function Om(){if(kL)return DN;kL=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return DN=e,DN}var IN,EL;function UD(){if(EL)return IN;EL=1;var e=Th(),t=Om(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(s){if(!t(s))return!1;var l=e(s);return l==n||l==a||l==r||l==i}return IN=o,IN}var RN,CL;function bye(){if(CL)return RN;CL=1;var e=pf(),t=e["__core-js_shared__"];return RN=t,RN}var MN,PL;function Sye(){if(PL)return MN;PL=1;var e=bye(),t=function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!t&&t in n}return MN=r,MN}var FN,TL;function jX(){if(TL)return FN;TL=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return FN=r,FN}var LN,OL;function Aye(){if(OL)return LN;OL=1;var e=UD(),t=Sye(),r=Om(),n=jX(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,d=RegExp("^"+l.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||t(h))return!1;var m=e(h)?d:i;return m.test(n(h))}return LN=f,LN}var jN,DL;function Nye(){if(DL)return jN;DL=1;function e(t,r){return t==null?void 0:t[r]}return jN=e,jN}var $N,IL;function Ng(){if(IL)return $N;IL=1;var e=Aye(),t=Nye();function r(n,a){var i=t(n,a);return e(i)?i:void 0}return $N=r,$N}var BN,RL;function M4(){if(RL)return BN;RL=1;var e=Ng(),t=e(Object,"create");return BN=t,BN}var UN,ML;function kye(){if(ML)return UN;ML=1;var e=M4();function t(){this.__data__=e?e(null):{},this.size=0}return UN=t,UN}var qN,FL;function Eye(){if(FL)return qN;FL=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return qN=e,qN}var zN,LL;function Cye(){if(LL)return zN;LL=1;var e=M4(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(e){var s=o[i];return s===t?void 0:s}return n.call(o,i)?o[i]:void 0}return zN=a,zN}var WN,jL;function Pye(){if(jL)return WN;jL=1;var e=M4(),t=Object.prototype,r=t.hasOwnProperty;function n(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return WN=n,WN}var VN,$L;function Tye(){if($L)return VN;$L=1;var e=M4(),t="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&a===void 0?t:a,this}return VN=r,VN}var HN,BL;function Oye(){if(BL)return HN;BL=1;var e=kye(),t=Eye(),r=Cye(),n=Pye(),a=Tye();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,HN=i,HN}var GN,UL;function Dye(){if(UL)return GN;UL=1;function e(){this.__data__=[],this.size=0}return GN=e,GN}var KN,qL;function qD(){if(qL)return KN;qL=1;function e(t,r){return t===r||t!==t&&r!==r}return KN=e,KN}var YN,zL;function F4(){if(zL)return YN;zL=1;var e=qD();function t(r,n){for(var a=r.length;a--;)if(e(r[a][0],n))return a;return-1}return YN=t,YN}var XN,WL;function Iye(){if(WL)return XN;WL=1;var e=F4(),t=Array.prototype,r=t.splice;function n(a){var i=this.__data__,o=e(i,a);if(o<0)return!1;var s=i.length-1;return o==s?i.pop():r.call(i,o,1),--this.size,!0}return XN=n,XN}var ZN,VL;function Rye(){if(VL)return ZN;VL=1;var e=F4();function t(r){var n=this.__data__,a=e(n,r);return a<0?void 0:n[a][1]}return ZN=t,ZN}var JN,HL;function Mye(){if(HL)return JN;HL=1;var e=F4();function t(r){return e(this.__data__,r)>-1}return JN=t,JN}var QN,GL;function Fye(){if(GL)return QN;GL=1;var e=F4();function t(r,n){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return QN=t,QN}var ek,KL;function L4(){if(KL)return ek;KL=1;var e=Dye(),t=Iye(),r=Rye(),n=Mye(),a=Fye();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ek=i,ek}var tk,YL;function zD(){if(YL)return tk;YL=1;var e=Ng(),t=pf(),r=e(t,"Map");return tk=r,tk}var rk,XL;function Lye(){if(XL)return rk;XL=1;var e=Oye(),t=L4(),r=zD();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return rk=n,rk}var nk,ZL;function jye(){if(ZL)return nk;ZL=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return nk=e,nk}var ak,JL;function j4(){if(JL)return ak;JL=1;var e=jye();function t(r,n){var a=r.__data__;return e(n)?a[typeof n=="string"?"string":"hash"]:a.map}return ak=t,ak}var ik,QL;function $ye(){if(QL)return ik;QL=1;var e=j4();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return ik=t,ik}var ok,e9;function Bye(){if(e9)return ok;e9=1;var e=j4();function t(r){return e(this,r).get(r)}return ok=t,ok}var sk,t9;function Uye(){if(t9)return sk;t9=1;var e=j4();function t(r){return e(this,r).has(r)}return sk=t,sk}var lk,r9;function qye(){if(r9)return lk;r9=1;var e=j4();function t(r,n){var a=e(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return lk=t,lk}var ck,n9;function WD(){if(n9)return ck;n9=1;var e=Lye(),t=$ye(),r=Bye(),n=Uye(),a=qye();function i(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ck=i,ck}var uk,a9;function $X(){if(a9)return uk;a9=1;var e=WD(),t="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(t);var i=function(){var o=arguments,s=a?a.apply(this,o):o[0],l=i.cache;if(l.has(s))return l.get(s);var u=n.apply(this,o);return i.cache=l.set(s,u)||l,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,uk=r,uk}var dk,i9;function zye(){if(i9)return dk;i9=1;var e=$X(),t=500;function r(n){var a=e(n,function(o){return i.size===t&&i.clear(),o}),i=a.cache;return a}return dk=r,dk}var fk,o9;function Wye(){if(o9)return fk;o9=1;var e=zye(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(t,function(o,s,l,u){i.push(l?u.replace(r,"$1"):s||o)}),i});return fk=n,fk}var hk,s9;function VD(){if(s9)return hk;s9=1;function e(t,r){for(var n=-1,a=t==null?0:t.length,i=Array(a);++n<a;)i[n]=r(t[n],n,t);return i}return hk=e,hk}var pk,l9;function Vye(){if(l9)return pk;l9=1;var e=jw(),t=VD(),r=ql(),n=hy(),a=e?e.prototype:void 0,i=a?a.toString:void 0;function o(s){if(typeof s=="string")return s;if(r(s))return t(s,o)+"";if(n(s))return i?i.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return pk=o,pk}var mk,c9;function BX(){if(c9)return mk;c9=1;var e=Vye();function t(r){return r==null?"":e(r)}return mk=t,mk}var gk,u9;function UX(){if(u9)return gk;u9=1;var e=ql(),t=BD(),r=Wye(),n=BX();function a(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return gk=a,gk}var vk,d9;function $4(){if(d9)return vk;d9=1;var e=hy();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return vk=t,vk}var yk,f9;function HD(){if(f9)return yk;f9=1;var e=UX(),t=$4();function r(n,a){a=e(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[t(a[i++])];return i&&i==o?n:void 0}return yk=r,yk}var xk,h9;function qX(){if(h9)return xk;h9=1;var e=HD();function t(r,n,a){var i=r==null?void 0:e(r,n);return i===void 0?a:i}return xk=t,xk}var Hye=qX();const vc=ia(Hye);var wk,p9;function Gye(){if(p9)return wk;p9=1;function e(t){return t==null}return wk=e,wk}var Kye=Gye();const dn=ia(Kye);var _k,m9;function Yye(){if(m9)return _k;m9=1;var e=Th(),t=ql(),r=Oh(),n="[object String]";function a(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return _k=a,_k}var Xye=Yye();const eg=ia(Xye);var Zye=UD();const Yr=ia(Zye);var Jye=Om();const py=ia(Jye);var bk={exports:{}},ca={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g9;function Qye(){if(g9)return ca;g9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function g(y){if(typeof y=="object"&&y!==null){var _=y.$$typeof;switch(_){case e:switch(y=y.type,y){case r:case a:case n:case u:case d:return y;default:switch(y=y&&y.$$typeof,y){case s:case o:case l:case h:case f:case i:return y;default:return _}}case t:return _}}}return ca.ContextConsumer=o,ca.ContextProvider=i,ca.Element=e,ca.ForwardRef=l,ca.Fragment=r,ca.Lazy=h,ca.Memo=f,ca.Portal=t,ca.Profiler=a,ca.StrictMode=n,ca.Suspense=u,ca.SuspenseList=d,ca.isAsyncMode=function(){return!1},ca.isConcurrentMode=function(){return!1},ca.isContextConsumer=function(y){return g(y)===o},ca.isContextProvider=function(y){return g(y)===i},ca.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},ca.isForwardRef=function(y){return g(y)===l},ca.isFragment=function(y){return g(y)===r},ca.isLazy=function(y){return g(y)===h},ca.isMemo=function(y){return g(y)===f},ca.isPortal=function(y){return g(y)===t},ca.isProfiler=function(y){return g(y)===a},ca.isStrictMode=function(y){return g(y)===n},ca.isSuspense=function(y){return g(y)===u},ca.isSuspenseList=function(y){return g(y)===d},ca.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===a||y===n||y===u||y===d||y===m||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===f||y.$$typeof===i||y.$$typeof===o||y.$$typeof===l||y.$$typeof===x||y.getModuleId!==void 0)},ca.typeOf=g,ca}var v9;function e2e(){return v9||(v9=1,bk.exports=Qye()),bk.exports}var t2e=e2e(),Sk,y9;function zX(){if(y9)return Sk;y9=1;var e=Th(),t=Oh(),r="[object Number]";function n(a){return typeof a=="number"||t(a)&&e(a)==r}return Sk=n,Sk}var Ak,x9;function r2e(){if(x9)return Ak;x9=1;var e=zX();function t(r){return e(r)&&r!=+r}return Ak=t,Ak}var n2e=r2e();const my=ia(n2e);var a2e=zX();const i2e=ia(a2e);var ll=function(t){return t===0?0:t>0?1:-1},I0=function(t){return eg(t)&&t.indexOf("%")===t.length-1},Kt=function(t){return i2e(t)&&!my(t)},wo=function(t){return Kt(t)||eg(t)},o2e=0,kg=function(t){var r=++o2e;return"".concat(t||"").concat(r)},cl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Kt(t)&&!eg(t))return n;var i;if(I0(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return my(i)&&(i=n),a&&i>r&&(i=r),i},Hp=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},s2e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},yo=function(t,r){return Kt(t)&&Kt(r)?function(n){return t+n*(r-t)}:function(){return r}};function S5(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):vc(n,t))===r})}var l2e=function(t,r){return Kt(t)&&Kt(r)?t-r:eg(t)&&eg(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function e1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function x6(e){"@babel/helpers - typeof";return x6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x6(e)}var c2e=["viewBox","children"],u2e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],w9=["points","pathLength"],Nk={svg:c2e,polygon:w9,polyline:w9},GD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],A5=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),!py(n))return null;var a={};return Object.keys(n).forEach(function(i){GD.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},d2e=function(t,r,n){return function(a){return t(r,n,a),null}},tg=function(t,r,n){if(!py(t)||x6(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];GD.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=d2e(o,r,n))}),a},f2e=["children"],h2e=["children"];function _9(e,t){if(e==null)return{};var r=p2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function w6(e){"@babel/helpers - typeof";return w6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w6(e)}var b9={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},dh=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},S9=null,kk=null,KD=function e(t){if(t===S9&&Array.isArray(kk))return kk;var r=[];return A.Children.forEach(t,function(n){dn(n)||(t2e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),kk=r,S9=t,r};function yc(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return dh(a)}):n=[dh(t)],KD(e).forEach(function(a){var i=vc(a,"type.displayName")||vc(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ac(e,t){var r=yc(e,t);return r&&r[0]}var A9=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Kt(n)||n<=0||!Kt(a)||a<=0)},m2e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],g2e=function(t){return t&&t.type&&eg(t.type)&&m2e.indexOf(t.type)>=0},WX=function(t){return t&&w6(t)==="object"&&"clipDot"in t},v2e=function(t,r,n,a){var i,o=(i=Nk==null?void 0:Nk[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Yr(t)&&(a&&o.includes(r)||u2e.includes(r))||n&&GD.includes(r)},Or=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(A.isValidElement(t)&&(a=t.props),!py(a))return null;var i={};return Object.keys(a).forEach(function(o){var s;v2e((s=a)===null||s===void 0?void 0:s[o],o,r,n)&&(i[o]=a[o])}),i},_6=function e(t,r){if(t===r)return!0;var n=A.Children.count(t);if(n!==A.Children.count(r))return!1;if(n===0)return!0;if(n===1)return N9(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!N9(i,o))return!1}return!0},N9=function(t,r){if(dn(t)&&dn(r))return!0;if(!dn(t)&&!dn(r)){var n=t.props||{},a=n.children,i=_9(n,f2e),o=r.props||{},s=o.children,l=_9(o,h2e);return a&&s?e1(i,l)&&_6(a,s):!a&&!s?e1(i,l):!1}return!1},k9=function(t,r){var n=[],a={};return KD(t).forEach(function(i,o){if(g2e(i))n.push(i);else if(i){var s=dh(i.type),l=r[s]||{},u=l.handler,d=l.once;if(u&&(!d||!a[s])){var f=u(i,s,o);n.push(f),a[s]=!0}}}),n},y2e=function(t){var r=t&&t.type;return r&&b9[r]?b9[r]:null},x2e=function(t,r){return KD(r).indexOf(t)},w2e=["children","width","height","viewBox","className","style","title","desc"];function b6(){return b6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b6.apply(this,arguments)}function _2e(e,t){if(e==null)return{};var r=b2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function b2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function S6(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,s=e.title,l=e.desc,u=_2e(e,w2e),d=a||{width:r,height:n,x:0,y:0},f=fn("recharts-surface",i);return tt.createElement("svg",b6({},Or(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),tt.createElement("title",null,s),tt.createElement("desc",null,l),t)}var S2e=["children","className"];function A6(){return A6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A6.apply(this,arguments)}function A2e(e,t){if(e==null)return{};var r=N2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function N2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Dn=tt.forwardRef(function(e,t){var r=e.children,n=e.className,a=A2e(e,S2e),i=fn("recharts-layer",n);return tt.createElement("g",A6({className:i},Or(a,!0),{ref:t}),r)}),Gu=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},Ek,E9;function k2e(){if(E9)return Ek;E9=1;function e(t,r,n){var a=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=t[a+r];return o}return Ek=e,Ek}var Ck,C9;function E2e(){if(C9)return Ck;C9=1;var e=k2e();function t(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:e(r,n,a)}return Ck=t,Ck}var Pk,P9;function VX(){if(P9)return Pk;P9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+e+a+i+"]");function l(u){return s.test(u)}return Pk=l,Pk}var Tk,T9;function C2e(){if(T9)return Tk;T9=1;function e(t){return t.split("")}return Tk=e,Tk}var Ok,O9;function P2e(){if(O9)return Ok;O9=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",s="["+a+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",x=u+"?",g="["+i+"]?",y="(?:"+m+"(?:"+[d,f,h].join("|")+")"+g+x+")*",_=g+x+y,b="(?:"+[d+s+"?",s,f,h,o].join("|")+")",S=RegExp(l+"(?="+l+")|"+b+_,"g");function C(E){return E.match(S)||[]}return Ok=C,Ok}var Dk,D9;function T2e(){if(D9)return Dk;D9=1;var e=C2e(),t=VX(),r=P2e();function n(a){return t(a)?r(a):e(a)}return Dk=n,Dk}var Ik,I9;function O2e(){if(I9)return Ik;I9=1;var e=E2e(),t=VX(),r=T2e(),n=BX();function a(i){return function(o){o=n(o);var s=t(o)?r(o):void 0,l=s?s[0]:o.charAt(0),u=s?e(s,1).join(""):o.slice(1);return l[i]()+u}}return Ik=a,Ik}var Rk,R9;function D2e(){if(R9)return Rk;R9=1;var e=O2e(),t=e("toUpperCase");return Rk=t,Rk}var I2e=D2e();const B4=ia(I2e);function Ma(e){return function(){return e}}const HX=Math.cos,N5=Math.sin,cd=Math.sqrt,k5=Math.PI,U4=2*k5,N6=Math.PI,k6=2*N6,A0=1e-6,R2e=k6-A0;function GX(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function M2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return GX;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class F2e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?GX:M2e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=n-t,u=a-r,d=o-t,f=s-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>A0)if(!(Math.abs(f*l-u*d)>A0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,x=a-s,g=l*l+u*u,y=m*m+x*x,_=Math.sqrt(g),b=Math.sqrt(h),S=i*Math.tan((N6-Math.acos((g+h-y)/(2*_*b)))/2),C=S/b,E=S/_;Math.abs(C-1)>A0&&this._append`L${t+C*d},${r+C*f}`,this._append`A${i},${i},0,0,${+(f*m>d*x)},${this._x1=t+E*l},${this._y1=r+E*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=t+s,d=r+l,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>A0||Math.abs(this._y1-d)>A0)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%k6+k6),h>R2e?this._append`A${n},${n},0,1,${f},${t-s},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>A0&&this._append`A${n},${n},0,${+(h>=N6)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function YD(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new F2e(t)}function XD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KX(e){this._context=e}KX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function q4(e){return new KX(e)}function YX(e){return e[0]}function XX(e){return e[1]}function ZX(e,t){var r=Ma(!0),n=null,a=q4,i=null,o=YD(s);e=typeof e=="function"?e:e===void 0?YX:Ma(e),t=typeof t=="function"?t:t===void 0?XX:Ma(t);function s(l){var u,d=(l=XD(l)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,l),+t(f,u,l));if(m)return i=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Ma(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Ma(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ma(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(i=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=i=null:i=a(n=l),s):n},s}function sb(e,t,r){var n=null,a=Ma(!0),i=null,o=q4,s=null,l=YD(u);e=typeof e=="function"?e:e===void 0?YX:Ma(+e),t=typeof t=="function"?t:Ma(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?XX:Ma(+r);function u(f){var h,m,x,g=(f=XD(f)).length,y,_=!1,b,S=new Array(g),C=new Array(g);for(i==null&&(s=o(b=l())),h=0;h<=g;++h){if(!(h<g&&a(y=f[h],h,f))===_)if(_=!_)m=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=h-1;x>=m;--x)s.point(S[x],C[x]);s.lineEnd(),s.areaEnd()}_&&(S[h]=+e(y,h,f),C[h]=+t(y,h,f),s.point(n?+n(y,h,f):S[h],r?+r(y,h,f):C[h]))}if(b)return s=null,b+""||null}function d(){return ZX().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ma(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ma(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ma(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ma(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ma(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ma(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ma(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(s=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=s=null:s=o(i=f),u):i},u}class JX{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function L2e(e){return new JX(e,!0)}function j2e(e){return new JX(e,!1)}const ZD={draw(e,t){const r=cd(t/k5);e.moveTo(r,0),e.arc(0,0,r,0,U4)}},$2e={draw(e,t){const r=cd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},QX=cd(1/3),B2e=QX*2,U2e={draw(e,t){const r=cd(t/B2e),n=r*QX;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},q2e={draw(e,t){const r=cd(t),n=-r/2;e.rect(n,n,r,r)}},z2e=.8908130915292852,eZ=N5(k5/10)/N5(7*k5/10),W2e=N5(U4/10)*eZ,V2e=-HX(U4/10)*eZ,H2e={draw(e,t){const r=cd(t*z2e),n=W2e*r,a=V2e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=U4*i/5,s=HX(o),l=N5(o);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*a,l*n+s*a)}e.closePath()}},Mk=cd(3),G2e={draw(e,t){const r=-cd(t/(Mk*3));e.moveTo(0,r*2),e.lineTo(-Mk*r,-r),e.lineTo(Mk*r,-r),e.closePath()}},Uc=-.5,qc=cd(3)/2,E6=1/cd(12),K2e=(E6/2+1)*3,Y2e={draw(e,t){const r=cd(t/K2e),n=r/2,a=r*E6,i=n,o=r*E6+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(Uc*n-qc*a,qc*n+Uc*a),e.lineTo(Uc*i-qc*o,qc*i+Uc*o),e.lineTo(Uc*s-qc*l,qc*s+Uc*l),e.lineTo(Uc*n+qc*a,Uc*a-qc*n),e.lineTo(Uc*i+qc*o,Uc*o-qc*i),e.lineTo(Uc*s+qc*l,Uc*l-qc*s),e.closePath()}};function X2e(e,t){let r=null,n=YD(a);e=typeof e=="function"?e:Ma(e||ZD),t=typeof t=="function"?t:Ma(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ma(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ma(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function E5(){}function C5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function tZ(e){this._context=e}tZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Z2e(e){return new tZ(e)}function rZ(e){this._context=e}rZ.prototype={areaStart:E5,areaEnd:E5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J2e(e){return new rZ(e)}function nZ(e){this._context=e}nZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q2e(e){return new nZ(e)}function aZ(e){this._context=e}aZ.prototype={areaStart:E5,areaEnd:E5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function exe(e){return new aZ(e)}function M9(e){return e<0?-1:1}function F9(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(M9(i)+M9(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function L9(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Fk(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function P5(e){this._context=e}P5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fk(this,this._t0,L9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fk(this,L9(this,r=F9(this,e,t)),r);break;default:Fk(this,this._t0,r=F9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iZ(e){this._context=new oZ(e)}(iZ.prototype=Object.create(P5.prototype)).point=function(e,t){P5.prototype.point.call(this,t,e)};function oZ(e){this._context=e}oZ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function txe(e){return new P5(e)}function rxe(e){return new iZ(e)}function sZ(e){this._context=e}sZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=j9(e),a=j9(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j9(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function nxe(e){return new sZ(e)}function z4(e,t){this._context=e,this._t=t}z4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function axe(e){return new z4(e,.5)}function ixe(e){return new z4(e,0)}function oxe(e){return new z4(e,1)}function _1(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,s=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function C6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function sxe(e,t){return e[t]}function lxe(e){const t=[];return t.key=e,t}function cxe(){var e=Ma([]),t=C6,r=_1,n=sxe;function a(i){var o=Array.from(e.apply(this,arguments),lxe),s,l=o.length,u=-1,d;for(const f of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(f,o[s].key,u,i)]).data=f;for(s=0,d=XD(t(o));s<l;++s)o[d[s]].index=s;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ma(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ma(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?C6:typeof i=="function"?i:Ma(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??_1,a):r},a}function uxe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}_1(e,t)}}function dxe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,s=0;o<a;++o)s+=e[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}_1(e,t)}}function fxe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var s=0,l=0,u=0;s<o;++s){for(var d=e[t[s]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,x=0;x<s;++x){var g=e[t[x]],y=g[n][1]||0,_=g[n-1][1]||0;m+=y-_}l+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,l&&(r-=u/l)}a[n-1][1]+=a[n-1][0]=r,_1(e,t)}}function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}var hxe=["type","size","sizeType"];function P6(){return P6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P6.apply(this,arguments)}function $9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$9(Object(r),!0).forEach(function(n){pxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pxe(e,t,r){return t=mxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mxe(e){var t=gxe(e,"string");return fx(t)=="symbol"?t:t+""}function gxe(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vxe(e,t){if(e==null)return{};var r=yxe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lZ={symbolCircle:ZD,symbolCross:$2e,symbolDiamond:U2e,symbolSquare:q2e,symbolStar:H2e,symbolTriangle:G2e,symbolWye:Y2e},xxe=Math.PI/180,wxe=function(t){var r="symbol".concat(B4(t));return lZ[r]||ZD},_xe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*xxe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},bxe=function(t,r){lZ["symbol".concat(B4(t))]=r},JD=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,s=o===void 0?"area":o,l=vxe(t,hxe),u=B9(B9({},l),{},{type:n,size:i,sizeType:s}),d=function(){var y=wxe(n),_=X2e().type(y).size(_xe(i,s,n));return _()},f=u.className,h=u.cx,m=u.cy,x=Or(u,!0);return h===+h&&m===+m&&i===+i?tt.createElement("path",P6({},x,{className:fn("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};JD.registerSymbol=bxe;function b1(e){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b1(e)}function U9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sxe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U9(Object(r),!0).forEach(function(n){hx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Axe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uZ(n.key),n)}}function kxe(e,t,r){return t&&Nxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Exe(e,t,r){return t=T5(t),Cxe(e,cZ()?Reflect.construct(t,r||[],T5(e).constructor):t.apply(e,r))}function Cxe(e,t){if(t&&(b1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pxe(e)}function Pxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cZ=function(){return!!e})()}function T5(e){return T5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T5(e)}function Txe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T6(e,t)}function T6(e,t){return T6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T6(e,t)}function hx(e,t,r){return t=uZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZ(e){var t=Oxe(e,"string");return b1(t)=="symbol"?t:t+""}function Oxe(e,t){if(b1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(b1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tu=32,QD=function(e){function t(){return Axe(this,t),Exe(this,t,arguments)}return Txe(t,e),kxe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Tu/2,o=Tu/6,s=Tu/3,l=n.inactive?a:n.color;if(n.type==="plainline")return c("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Tu,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return c("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Tu,"M").concat(2*s,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return c("path",{stroke:"none",fill:l,d:"M0,".concat(Tu/8,"h").concat(Tu,"v").concat(Tu*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(tt.isValidElement(n.legendIcon)){var u=Sxe({},n);return delete u.legendIcon,tt.cloneElement(n.legendIcon,u)}return c(JD,{fill:l,cx:i,cy:i,size:Tu,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,s=a.layout,l=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Tu,height:Tu},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,x){var g=m.formatter||l,y=fn(hx(hx({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",m.inactive));if(m.type==="none")return null;var _=Yr(m.value)?null:m.value;Gu(!Yr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return w("li",{className:y,style:f,...tg(n.props,m,x),children:[c(S6,{width:o,height:o,viewBox:d,style:h,children:n.renderIcon(m)}),c("span",{className:"recharts-legend-item-text",style:{color:b},children:g?g(_,m,x):_})]},"legend-item-".concat(x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return c("ul",{className:"recharts-default-legend",style:s,children:this.renderItems()})}}])}(A.PureComponent);hx(QD,"displayName","Legend");hx(QD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Lk,q9;function Dxe(){if(q9)return Lk;q9=1;var e=L4();function t(){this.__data__=new e,this.size=0}return Lk=t,Lk}var jk,z9;function Ixe(){if(z9)return jk;z9=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return jk=e,jk}var $k,W9;function Rxe(){if(W9)return $k;W9=1;function e(t){return this.__data__.get(t)}return $k=e,$k}var Bk,V9;function Mxe(){if(V9)return Bk;V9=1;function e(t){return this.__data__.has(t)}return Bk=e,Bk}var Uk,H9;function Fxe(){if(H9)return Uk;H9=1;var e=L4(),t=zD(),r=WD(),n=200;function a(i,o){var s=this.__data__;if(s instanceof e){var l=s.__data__;if(!t||l.length<n-1)return l.push([i,o]),this.size=++s.size,this;s=this.__data__=new r(l)}return s.set(i,o),this.size=s.size,this}return Uk=a,Uk}var qk,G9;function dZ(){if(G9)return qk;G9=1;var e=L4(),t=Dxe(),r=Ixe(),n=Rxe(),a=Mxe(),i=Fxe();function o(s){var l=this.__data__=new e(s);this.size=l.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,qk=o,qk}var zk,K9;function Lxe(){if(K9)return zk;K9=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return zk=t,zk}var Wk,Y9;function jxe(){if(Y9)return Wk;Y9=1;function e(t){return this.__data__.has(t)}return Wk=e,Wk}var Vk,X9;function fZ(){if(X9)return Vk;X9=1;var e=WD(),t=Lxe(),r=jxe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new e;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Vk=n,Vk}var Hk,Z9;function hZ(){if(Z9)return Hk;Z9=1;function e(t,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(t[n],n,t))return!0;return!1}return Hk=e,Hk}var Gk,J9;function pZ(){if(J9)return Gk;J9=1;function e(t,r){return t.has(r)}return Gk=e,Gk}var Kk,Q9;function mZ(){if(Q9)return Kk;Q9=1;var e=fZ(),t=hZ(),r=pZ(),n=1,a=2;function i(o,s,l,u,d,f){var h=l&n,m=o.length,x=s.length;if(m!=x&&!(h&&x>m))return!1;var g=f.get(o),y=f.get(s);if(g&&y)return g==s&&y==o;var _=-1,b=!0,S=l&a?new e:void 0;for(f.set(o,s),f.set(s,o);++_<m;){var C=o[_],E=s[_];if(u)var O=h?u(E,C,_,s,o,f):u(C,E,_,o,s,f);if(O!==void 0){if(O)continue;b=!1;break}if(S){if(!t(s,function(T,M){if(!r(S,M)&&(C===T||d(C,T,l,u,f)))return S.push(M)})){b=!1;break}}else if(!(C===E||d(C,E,l,u,f))){b=!1;break}}return f.delete(o),f.delete(s),b}return Kk=i,Kk}var Yk,ej;function $xe(){if(ej)return Yk;ej=1;var e=pf(),t=e.Uint8Array;return Yk=t,Yk}var Xk,tj;function Bxe(){if(tj)return Xk;tj=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(a,i){n[++r]=[i,a]}),n}return Xk=e,Xk}var Zk,rj;function eI(){if(rj)return Zk;rj=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(a){n[++r]=a}),n}return Zk=e,Zk}var Jk,nj;function Uxe(){if(nj)return Jk;nj=1;var e=jw(),t=$xe(),r=qD(),n=mZ(),a=Bxe(),i=eI(),o=1,s=2,l="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",m="[object RegExp]",x="[object Set]",g="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",b="[object DataView]",S=e?e.prototype:void 0,C=S?S.valueOf:void 0;function E(O,T,M,L,z,P,R){switch(M){case b:if(O.byteLength!=T.byteLength||O.byteOffset!=T.byteOffset)return!1;O=O.buffer,T=T.buffer;case _:return!(O.byteLength!=T.byteLength||!P(new t(O),new t(T)));case l:case u:case h:return r(+O,+T);case d:return O.name==T.name&&O.message==T.message;case m:case g:return O==T+"";case f:var j=a;case x:var V=L&o;if(j||(j=i),O.size!=T.size&&!V)return!1;var Z=R.get(O);if(Z)return Z==T;L|=s,R.set(O,T);var te=n(j(O),j(T),L,z,P,R);return R.delete(O),te;case y:if(C)return C.call(O)==C.call(T)}return!1}return Jk=E,Jk}var Qk,aj;function gZ(){if(aj)return Qk;aj=1;function e(t,r){for(var n=-1,a=r.length,i=t.length;++n<a;)t[i+n]=r[n];return t}return Qk=e,Qk}var eE,ij;function qxe(){if(ij)return eE;ij=1;var e=gZ(),t=ql();function r(n,a,i){var o=a(n);return t(n)?o:e(o,i(n))}return eE=r,eE}var tE,oj;function zxe(){if(oj)return tE;oj=1;function e(t,r){for(var n=-1,a=t==null?0:t.length,i=0,o=[];++n<a;){var s=t[n];r(s,n,t)&&(o[i++]=s)}return o}return tE=e,tE}var rE,sj;function Wxe(){if(sj)return rE;sj=1;function e(){return[]}return rE=e,rE}var nE,lj;function Vxe(){if(lj)return nE;lj=1;var e=zxe(),t=Wxe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(s){return n.call(o,s)}))}:t;return nE=i,nE}var aE,cj;function Hxe(){if(cj)return aE;cj=1;function e(t,r){for(var n=-1,a=Array(t);++n<t;)a[n]=r(n);return a}return aE=e,aE}var iE,uj;function Gxe(){if(uj)return iE;uj=1;var e=Th(),t=Oh(),r="[object Arguments]";function n(a){return t(a)&&e(a)==r}return iE=n,iE}var oE,dj;function tI(){if(dj)return oE;dj=1;var e=Gxe(),t=Oh(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(o){return t(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return oE=i,oE}var b2={exports:{}},sE,fj;function Kxe(){if(fj)return sE;fj=1;function e(){return!1}return sE=e,sE}b2.exports;var hj;function vZ(){return hj||(hj=1,function(e,t){var r=pf(),n=Kxe(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u}(b2,b2.exports)),b2.exports}var lE,pj;function rI(){if(pj)return lE;pj=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<a}return lE=r,lE}var cE,mj;function nI(){if(mj)return cE;mj=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return cE=t,cE}var uE,gj;function Yxe(){if(gj)return uE;gj=1;var e=Th(),t=nI(),r=Oh(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",m="[object Set]",x="[object String]",g="[object WeakMap]",y="[object ArrayBuffer]",_="[object DataView]",b="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",z="[object Uint32Array]",P={};P[b]=P[S]=P[C]=P[E]=P[O]=P[T]=P[M]=P[L]=P[z]=!0,P[n]=P[a]=P[y]=P[i]=P[_]=P[o]=P[s]=P[l]=P[u]=P[d]=P[f]=P[h]=P[m]=P[x]=P[g]=!1;function R(j){return r(j)&&t(j.length)&&!!P[e(j)]}return uE=R,uE}var dE,vj;function yZ(){if(vj)return dE;vj=1;function e(t){return function(r){return t(r)}}return dE=e,dE}var S2={exports:{}};S2.exports;var yj;function Xxe(){return yj||(yj=1,function(e,t){var r=LX(),n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s}(S2,S2.exports)),S2.exports}var fE,xj;function xZ(){if(xj)return fE;xj=1;var e=Yxe(),t=yZ(),r=Xxe(),n=r&&r.isTypedArray,a=n?t(n):e;return fE=a,fE}var hE,wj;function Zxe(){if(wj)return hE;wj=1;var e=Hxe(),t=tI(),r=ql(),n=vZ(),a=rI(),i=xZ(),o=Object.prototype,s=o.hasOwnProperty;function l(u,d){var f=r(u),h=!f&&t(u),m=!f&&!h&&n(u),x=!f&&!h&&!m&&i(u),g=f||h||m||x,y=g?e(u.length,String):[],_=y.length;for(var b in u)(d||s.call(u,b))&&!(g&&(b=="length"||m&&(b=="offset"||b=="parent")||x&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||a(b,_)))&&y.push(b);return y}return hE=l,hE}var pE,_j;function Jxe(){if(_j)return pE;_j=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||e;return r===a}return pE=t,pE}var mE,bj;function wZ(){if(bj)return mE;bj=1;function e(t,r){return function(n){return t(r(n))}}return mE=e,mE}var gE,Sj;function Qxe(){if(Sj)return gE;Sj=1;var e=wZ(),t=e(Object.keys,Object);return gE=t,gE}var vE,Aj;function ewe(){if(Aj)return vE;Aj=1;var e=Jxe(),t=Qxe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var o=[];for(var s in Object(i))n.call(i,s)&&s!="constructor"&&o.push(s);return o}return vE=a,vE}var yE,Nj;function $w(){if(Nj)return yE;Nj=1;var e=UD(),t=nI();function r(n){return n!=null&&t(n.length)&&!e(n)}return yE=r,yE}var xE,kj;function W4(){if(kj)return xE;kj=1;var e=Zxe(),t=ewe(),r=$w();function n(a){return r(a)?e(a):t(a)}return xE=n,xE}var wE,Ej;function twe(){if(Ej)return wE;Ej=1;var e=qxe(),t=Vxe(),r=W4();function n(a){return e(a,r,t)}return wE=n,wE}var _E,Cj;function rwe(){if(Cj)return _E;Cj=1;var e=twe(),t=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,s,l,u,d){var f=s&t,h=e(i),m=h.length,x=e(o),g=x.length;if(m!=g&&!f)return!1;for(var y=m;y--;){var _=h[y];if(!(f?_ in o:n.call(o,_)))return!1}var b=d.get(i),S=d.get(o);if(b&&S)return b==o&&S==i;var C=!0;d.set(i,o),d.set(o,i);for(var E=f;++y<m;){_=h[y];var O=i[_],T=o[_];if(l)var M=f?l(T,O,_,o,i,d):l(O,T,_,i,o,d);if(!(M===void 0?O===T||u(O,T,s,l,d):M)){C=!1;break}E||(E=_=="constructor")}if(C&&!E){var L=i.constructor,z=o.constructor;L!=z&&"constructor"in i&&"constructor"in o&&!(typeof L=="function"&&L instanceof L&&typeof z=="function"&&z instanceof z)&&(C=!1)}return d.delete(i),d.delete(o),C}return _E=a,_E}var bE,Pj;function nwe(){if(Pj)return bE;Pj=1;var e=Ng(),t=pf(),r=e(t,"DataView");return bE=r,bE}var SE,Tj;function awe(){if(Tj)return SE;Tj=1;var e=Ng(),t=pf(),r=e(t,"Promise");return SE=r,SE}var AE,Oj;function _Z(){if(Oj)return AE;Oj=1;var e=Ng(),t=pf(),r=e(t,"Set");return AE=r,AE}var NE,Dj;function iwe(){if(Dj)return NE;Dj=1;var e=Ng(),t=pf(),r=e(t,"WeakMap");return NE=r,NE}var kE,Ij;function owe(){if(Ij)return kE;Ij=1;var e=nwe(),t=zD(),r=awe(),n=_Z(),a=iwe(),i=Th(),o=jX(),s="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",m=o(e),x=o(t),g=o(r),y=o(n),_=o(a),b=i;return(e&&b(new e(new ArrayBuffer(1)))!=h||t&&b(new t)!=s||r&&b(r.resolve())!=u||n&&b(new n)!=d||a&&b(new a)!=f)&&(b=function(S){var C=i(S),E=C==l?S.constructor:void 0,O=E?o(E):"";if(O)switch(O){case m:return h;case x:return s;case g:return u;case y:return d;case _:return f}return C}),kE=b,kE}var EE,Rj;function swe(){if(Rj)return EE;Rj=1;var e=dZ(),t=mZ(),r=Uxe(),n=rwe(),a=owe(),i=ql(),o=vZ(),s=xZ(),l=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function x(g,y,_,b,S,C){var E=i(g),O=i(y),T=E?d:a(g),M=O?d:a(y);T=T==u?f:T,M=M==u?f:M;var L=T==f,z=M==f,P=T==M;if(P&&o(g)){if(!o(y))return!1;E=!0,L=!1}if(P&&!L)return C||(C=new e),E||s(g)?t(g,y,_,b,S,C):r(g,y,T,_,b,S,C);if(!(_&l)){var R=L&&m.call(g,"__wrapped__"),j=z&&m.call(y,"__wrapped__");if(R||j){var V=R?g.value():g,Z=j?y.value():y;return C||(C=new e),S(V,Z,_,b,C)}}return P?(C||(C=new e),n(g,y,_,b,S,C)):!1}return EE=x,EE}var CE,Mj;function aI(){if(Mj)return CE;Mj=1;var e=swe(),t=Oh();function r(n,a,i,o,s){return n===a?!0:n==null||a==null||!t(n)&&!t(a)?n!==n&&a!==a:e(n,a,i,o,r,s)}return CE=r,CE}var PE,Fj;function lwe(){if(Fj)return PE;Fj=1;var e=dZ(),t=aI(),r=1,n=2;function a(i,o,s,l){var u=s.length,d=u,f=!l;if(i==null)return!d;for(i=Object(i);u--;){var h=s[u];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<d;){h=s[u];var m=h[0],x=i[m],g=h[1];if(f&&h[2]){if(x===void 0&&!(m in i))return!1}else{var y=new e;if(l)var _=l(x,g,m,i,o,y);if(!(_===void 0?t(g,x,r|n,l,y):_))return!1}}return!0}return PE=a,PE}var TE,Lj;function bZ(){if(Lj)return TE;Lj=1;var e=Om();function t(r){return r===r&&!e(r)}return TE=t,TE}var OE,jj;function cwe(){if(jj)return OE;jj=1;var e=bZ(),t=W4();function r(n){for(var a=t(n),i=a.length;i--;){var o=a[i],s=n[o];a[i]=[o,s,e(s)]}return a}return OE=r,OE}var DE,$j;function SZ(){if($j)return DE;$j=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return DE=e,DE}var IE,Bj;function uwe(){if(Bj)return IE;Bj=1;var e=lwe(),t=cwe(),r=SZ();function n(a){var i=t(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||e(o,a,i)}}return IE=n,IE}var RE,Uj;function dwe(){if(Uj)return RE;Uj=1;function e(t,r){return t!=null&&r in Object(t)}return RE=e,RE}var ME,qj;function fwe(){if(qj)return ME;qj=1;var e=UX(),t=tI(),r=ql(),n=rI(),a=nI(),i=$4();function o(s,l,u){l=e(l,s);for(var d=-1,f=l.length,h=!1;++d<f;){var m=i(l[d]);if(!(h=s!=null&&u(s,m)))break;s=s[m]}return h||++d!=f?h:(f=s==null?0:s.length,!!f&&a(f)&&n(m,f)&&(r(s)||t(s)))}return ME=o,ME}var FE,zj;function hwe(){if(zj)return FE;zj=1;var e=dwe(),t=fwe();function r(n,a){return n!=null&&t(n,a,e)}return FE=r,FE}var LE,Wj;function pwe(){if(Wj)return LE;Wj=1;var e=aI(),t=qX(),r=hwe(),n=BD(),a=bZ(),i=SZ(),o=$4(),s=1,l=2;function u(d,f){return n(d)&&a(f)?i(o(d),f):function(h){var m=t(h,d);return m===void 0&&m===f?r(h,d):e(f,m,s|l)}}return LE=u,LE}var jE,Vj;function gy(){if(Vj)return jE;Vj=1;function e(t){return t}return jE=e,jE}var $E,Hj;function mwe(){if(Hj)return $E;Hj=1;function e(t){return function(r){return r==null?void 0:r[t]}}return $E=e,$E}var BE,Gj;function gwe(){if(Gj)return BE;Gj=1;var e=HD();function t(r){return function(n){return e(n,r)}}return BE=t,BE}var UE,Kj;function vwe(){if(Kj)return UE;Kj=1;var e=mwe(),t=gwe(),r=BD(),n=$4();function a(i){return r(i)?e(n(i)):t(i)}return UE=a,UE}var qE,Yj;function mf(){if(Yj)return qE;Yj=1;var e=uwe(),t=pwe(),r=gy(),n=ql(),a=vwe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):a(o)}return qE=i,qE}var zE,Xj;function AZ(){if(Xj)return zE;Xj=1;function e(t,r,n,a){for(var i=t.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return zE=e,zE}var WE,Zj;function ywe(){if(Zj)return WE;Zj=1;function e(t){return t!==t}return WE=e,WE}var VE,Jj;function xwe(){if(Jj)return VE;Jj=1;function e(t,r,n){for(var a=n-1,i=t.length;++a<i;)if(t[a]===r)return a;return-1}return VE=e,VE}var HE,Qj;function wwe(){if(Qj)return HE;Qj=1;var e=AZ(),t=ywe(),r=xwe();function n(a,i,o){return i===i?r(a,i,o):e(a,t,o)}return HE=n,HE}var GE,e$;function _we(){if(e$)return GE;e$=1;var e=wwe();function t(r,n){var a=r==null?0:r.length;return!!a&&e(r,n,0)>-1}return GE=t,GE}var KE,t$;function bwe(){if(t$)return KE;t$=1;function e(t,r,n){for(var a=-1,i=t==null?0:t.length;++a<i;)if(n(r,t[a]))return!0;return!1}return KE=e,KE}var YE,r$;function Swe(){if(r$)return YE;r$=1;function e(){}return YE=e,YE}var XE,n$;function Awe(){if(n$)return XE;n$=1;var e=_Z(),t=Swe(),r=eI(),n=1/0,a=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return XE=a,XE}var ZE,a$;function Nwe(){if(a$)return ZE;a$=1;var e=fZ(),t=_we(),r=bwe(),n=pZ(),a=Awe(),i=eI(),o=200;function s(l,u,d){var f=-1,h=t,m=l.length,x=!0,g=[],y=g;if(d)x=!1,h=r;else if(m>=o){var _=u?null:a(l);if(_)return i(_);x=!1,h=n,y=new e}else y=u?[]:g;e:for(;++f<m;){var b=l[f],S=u?u(b):b;if(b=d||b!==0?b:0,x&&S===S){for(var C=y.length;C--;)if(y[C]===S)continue e;u&&y.push(S),g.push(b)}else h(y,S,d)||(y!==g&&y.push(S),g.push(b))}return g}return ZE=s,ZE}var JE,i$;function kwe(){if(i$)return JE;i$=1;var e=mf(),t=Nwe();function r(n,a){return n&&n.length?t(n,e(a,2)):[]}return JE=r,JE}var Ewe=kwe();const o$=ia(Ewe);function NZ(e,t,r){return t===!0?o$(e,r):Yr(t)?o$(e,t):e}function S1(e){"@babel/helpers - typeof";return S1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S1(e)}var Cwe=["ref"];function s$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s$(Object(r),!0).forEach(function(n){V4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EZ(n.key),n)}}function Twe(e,t,r){return t&&l$(e.prototype,t),r&&l$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Owe(e,t,r){return t=O5(t),Dwe(e,kZ()?Reflect.construct(t,r||[],O5(e).constructor):t.apply(e,r))}function Dwe(e,t){if(t&&(S1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iwe(e)}function Iwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kZ=function(){return!!e})()}function O5(e){return O5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O5(e)}function Rwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O6(e,t)}function O6(e,t){return O6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},O6(e,t)}function V4(e,t,r){return t=EZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EZ(e){var t=Mwe(e,"string");return S1(t)=="symbol"?t:t+""}function Mwe(e,t){if(S1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(S1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Fwe(e,t){if(e==null)return{};var r=Lwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jwe(e){return e.value}function $we(e,t){if(tt.isValidElement(e))return tt.cloneElement(e,t);if(typeof e=="function")return tt.createElement(e,t);t.ref;var r=Fwe(t,Cwe);return c(QD,{...r})}var c$=1,Ku=function(e){function t(){var r;Pwe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Owe(this,t,[].concat(a)),V4(r,"lastBoundingBox",{width:-1,height:-1}),r}return Rwe(t,e),Twe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>c$||Math.abs(a.height-this.lastBoundingBox.height)>c$)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,s=a.verticalAlign,l=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var x=this.getBBoxSnapshot();h={top:((d||0)-x.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Xf(Xf({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,s=a.height,l=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Xf(Xf({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return c("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m},children:$we(i,Xf(Xf({},this.props),{},{payload:NZ(d,u,jwe)}))})}}],[{key:"getWithHeight",value:function(n,a){var i=Xf(Xf({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Kt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(A.PureComponent);V4(Ku,"displayName","Legend");V4(Ku,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var QE,u$;function Bwe(){if(u$)return QE;u$=1;var e=jw(),t=tI(),r=ql(),n=e?e.isConcatSpreadable:void 0;function a(i){return r(i)||t(i)||!!(n&&i&&i[n])}return QE=a,QE}var eC,d$;function CZ(){if(d$)return eC;d$=1;var e=gZ(),t=Bwe();function r(n,a,i,o,s){var l=-1,u=n.length;for(i||(i=t),s||(s=[]);++l<u;){var d=n[l];a>0&&i(d)?a>1?r(d,a-1,i,o,s):e(s,d):o||(s[s.length]=d)}return s}return eC=r,eC}var tC,f$;function Uwe(){if(f$)return tC;f$=1;function e(t){return function(r,n,a){for(var i=-1,o=Object(r),s=a(r),l=s.length;l--;){var u=s[t?l:++i];if(n(o[u],u,o)===!1)break}return r}}return tC=e,tC}var rC,h$;function qwe(){if(h$)return rC;h$=1;var e=Uwe(),t=e();return rC=t,rC}var nC,p$;function PZ(){if(p$)return nC;p$=1;var e=qwe(),t=W4();function r(n,a){return n&&e(n,a,t)}return nC=r,nC}var aC,m$;function zwe(){if(m$)return aC;m$=1;var e=$w();function t(r,n){return function(a,i){if(a==null)return a;if(!e(a))return r(a,i);for(var o=a.length,s=n?o:-1,l=Object(a);(n?s--:++s<o)&&i(l[s],s,l)!==!1;);return a}}return aC=t,aC}var iC,g$;function iI(){if(g$)return iC;g$=1;var e=PZ(),t=zwe(),r=t(e);return iC=r,iC}var oC,v$;function TZ(){if(v$)return oC;v$=1;var e=iI(),t=$w();function r(n,a){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(s,l,u){o[++i]=a(s,l,u)}),o}return oC=r,oC}var sC,y$;function Wwe(){if(y$)return sC;y$=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return sC=e,sC}var lC,x$;function Vwe(){if(x$)return lC;x$=1;var e=hy();function t(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,s=e(r),l=n!==void 0,u=n===null,d=n===n,f=e(n);if(!u&&!f&&!s&&r>n||s&&l&&d&&!u&&!f||i&&l&&d||!a&&d||!o)return 1;if(!i&&!s&&!f&&r<n||f&&a&&o&&!i&&!s||u&&a&&o||!l&&o||!d)return-1}return 0}return lC=t,lC}var cC,w$;function Hwe(){if(w$)return cC;w$=1;var e=Vwe();function t(r,n,a){for(var i=-1,o=r.criteria,s=n.criteria,l=o.length,u=a.length;++i<l;){var d=e(o[i],s[i]);if(d){if(i>=u)return d;var f=a[i];return d*(f=="desc"?-1:1)}}return r.index-n.index}return cC=t,cC}var uC,_$;function Gwe(){if(_$)return uC;_$=1;var e=VD(),t=HD(),r=mf(),n=TZ(),a=Wwe(),i=yZ(),o=Hwe(),s=gy(),l=ql();function u(d,f,h){f.length?f=e(f,function(g){return l(g)?function(y){return t(y,g.length===1?g[0]:g)}:g}):f=[s];var m=-1;f=e(f,i(r));var x=n(d,function(g,y,_){var b=e(f,function(S){return S(g)});return{criteria:b,index:++m,value:g}});return a(x,function(g,y){return o(g,y,h)})}return uC=u,uC}var dC,b$;function Kwe(){if(b$)return dC;b$=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return dC=e,dC}var fC,S$;function Ywe(){if(S$)return fC;S$=1;var e=Kwe(),t=Math.max;function r(n,a,i){return a=t(a===void 0?n.length-1:a,0),function(){for(var o=arguments,s=-1,l=t(o.length-a,0),u=Array(l);++s<l;)u[s]=o[a+s];s=-1;for(var d=Array(a+1);++s<a;)d[s]=o[s];return d[a]=i(u),e(n,this,d)}}return fC=r,fC}var hC,A$;function Xwe(){if(A$)return hC;A$=1;function e(t){return function(){return t}}return hC=e,hC}var pC,N$;function OZ(){if(N$)return pC;N$=1;var e=Ng(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return pC=t,pC}var mC,k$;function Zwe(){if(k$)return mC;k$=1;var e=Xwe(),t=OZ(),r=gy(),n=t?function(a,i){return t(a,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return mC=n,mC}var gC,E$;function Jwe(){if(E$)return gC;E$=1;var e=800,t=16,r=Date.now;function n(a){var i=0,o=0;return function(){var s=r(),l=t-(s-o);if(o=s,l>0){if(++i>=e)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return gC=n,gC}var vC,C$;function Qwe(){if(C$)return vC;C$=1;var e=Zwe(),t=Jwe(),r=t(e);return vC=r,vC}var yC,P$;function e_e(){if(P$)return yC;P$=1;var e=gy(),t=Ywe(),r=Qwe();function n(a,i){return r(t(a,i,e),a+"")}return yC=n,yC}var xC,T$;function H4(){if(T$)return xC;T$=1;var e=qD(),t=$w(),r=rI(),n=Om();function a(i,o,s){if(!n(s))return!1;var l=typeof o;return(l=="number"?t(s)&&r(o,s.length):l=="string"&&o in s)?e(s[o],i):!1}return xC=a,xC}var wC,O$;function t_e(){if(O$)return wC;O$=1;var e=CZ(),t=Gwe(),r=e_e(),n=H4(),a=r(function(i,o){if(i==null)return[];var s=o.length;return s>1&&n(i,o[0],o[1])?o=[]:s>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return wC=a,wC}var r_e=t_e();const oI=ia(r_e);function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function D6(){return D6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D6.apply(this,arguments)}function n_e(e,t){return s_e(e)||o_e(e,t)||i_e(e,t)||a_e()}function a_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i_e(e,t){if(e){if(typeof e=="string")return D$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D$(e,t)}}function D$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function s_e(e){if(Array.isArray(e))return e}function I$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I$(Object(r),!0).forEach(function(n){l_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l_e(e,t,r){return t=c_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c_e(e){var t=u_e(e,"string");return px(t)=="symbol"?t:t+""}function u_e(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d_e(e){return Array.isArray(e)&&wo(e[0])&&wo(e[1])?e.join(" ~ "):e}var f_e=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,s=o===void 0?{}:o,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,x=t.labelClassName,g=t.label,y=t.labelFormatter,_=t.accessibilityLayer,b=_===void 0?!1:_,S=function(){if(d&&d.length){var R={padding:0,margin:0},j=(h?oI(d,h):d).map(function(V,Z){if(V.type==="none")return null;var te=_C({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},s),q=V.formatter||f||d_e,Y=V.value,U=V.name,G=Y,J=U;if(q&&G!=null&&J!=null){var D=q(Y,U,V,Z,d);if(Array.isArray(D)){var K=n_e(D,2);G=K[0],J=K[1]}else G=D}return tt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:te},wo(J)?tt.createElement("span",{className:"recharts-tooltip-item-name"},J):null,wo(J)?tt.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,tt.createElement("span",{className:"recharts-tooltip-item-value"},G),tt.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return tt.createElement("ul",{className:"recharts-tooltip-item-list",style:R},j)}return null},C=_C({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),E=_C({margin:0},u),O=!dn(g),T=O?g:"",M=fn("recharts-default-tooltip",m),L=fn("recharts-tooltip-label",x);O&&y&&d!==void 0&&d!==null&&(T=y(g,d));var z=b?{role:"status","aria-live":"assertive"}:{};return tt.createElement("div",D6({className:M,style:C},z),tt.createElement("p",{className:L,style:E},tt.isValidElement(T)?T:"".concat(T)),S())};function mx(e){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mx(e)}function lb(e,t,r){return t=h_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h_e(e){var t=p_e(e,"string");return mx(t)=="symbol"?t:t+""}function p_e(e,t){if(mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t2="recharts-tooltip-wrapper",m_e={visibility:"hidden"};function g_e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return fn(t2,lb(lb(lb(lb({},"".concat(t2,"-right"),Kt(r)&&t&&Kt(t.x)&&r>=t.x),"".concat(t2,"-left"),Kt(r)&&t&&Kt(t.x)&&r<t.x),"".concat(t2,"-bottom"),Kt(n)&&t&&Kt(t.y)&&n>=t.y),"".concat(t2,"-top"),Kt(n)&&t&&Kt(t.y)&&n<t.y))}function R$(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(i&&Kt(i[n]))return i[n];var d=r[n]-s-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=l[n];return h<m?Math.max(f,l[n]):Math.max(d,l[n])}var x=f+s,g=l[n]+u;return x>g?Math.max(d,l[n]):Math.max(f,l[n])}function v_e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function y_e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=R$({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=R$({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=v_e({translateX:d,translateY:f,useTranslate3d:s})):u=m_e,{cssProperties:u,cssClasses:g_e({translateX:d,translateY:f,coordinate:r})}}function A1(e){"@babel/helpers - typeof";return A1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A1(e)}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){R6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IZ(n.key),n)}}function __e(e,t,r){return t&&w_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b_e(e,t,r){return t=D5(t),S_e(e,DZ()?Reflect.construct(t,r||[],D5(e).constructor):t.apply(e,r))}function S_e(e,t){if(t&&(A1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A_e(e)}function A_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DZ=function(){return!!e})()}function D5(e){return D5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},D5(e)}function N_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I6(e,t)}function I6(e,t){return I6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I6(e,t)}function R6(e,t,r){return t=IZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZ(e){var t=k_e(e,"string");return A1(t)=="symbol"?t:t+""}function k_e(e,t){if(A1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(A1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var L$=1,E_e=function(e){function t(){var r;x_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=b_e(this,t,[].concat(a)),R6(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),R6(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return N_e(t,e),__e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>L$||Math.abs(n.height-this.state.lastBoundingBox.height)>L$)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,x=a.position,g=a.reverseDirection,y=a.useTranslate3d,_=a.viewBox,b=a.wrapperStyle,S=y_e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:x,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:_}),C=S.cssClasses,E=S.cssProperties,O=F$(F$({transition:h&&i?"transform ".concat(s,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return c("div",{tabIndex:-1,className:C,style:O,ref:function(M){n.wrapperNode=M},children:u})}}])}(A.PureComponent),C_e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Dm={isSsr:C_e()};function N1(e){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N1(e)}function j$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j$(Object(r),!0).forEach(function(n){sI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MZ(n.key),n)}}function O_e(e,t,r){return t&&T_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D_e(e,t,r){return t=I5(t),I_e(e,RZ()?Reflect.construct(t,r||[],I5(e).constructor):t.apply(e,r))}function I_e(e,t){if(t&&(N1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R_e(e)}function R_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RZ=function(){return!!e})()}function I5(e){return I5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},I5(e)}function M_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M6(e,t)}function M6(e,t){return M6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M6(e,t)}function sI(e,t,r){return t=MZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MZ(e){var t=F_e(e,"string");return N1(t)=="symbol"?t:t+""}function F_e(e,t){if(N1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(N1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function L_e(e){return e.dataKey}function j_e(e,t){return tt.isValidElement(e)?tt.cloneElement(e,t):typeof e=="function"?tt.createElement(e,t):c(f_e,{...t})}var Za=function(e){function t(){return P_e(this,t),D_e(this,t,arguments)}return M_e(t,e),O_e(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,s=a.animationDuration,l=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,x=a.payload,g=a.payloadUniqBy,y=a.position,_=a.reverseDirection,b=a.useTranslate3d,S=a.viewBox,C=a.wrapperStyle,E=x??[];f&&E.length&&(E=NZ(x.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),g,L_e));var O=E.length>0;return c(E_e,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:i,coordinate:d,hasPayload:O,offset:m,position:y,reverseDirection:_,useTranslate3d:b,viewBox:S,wrapperStyle:C,children:j_e(u,$$($$({},this.props),{},{payload:E}))})}}])}(A.PureComponent);sI(Za,"displayName","Tooltip");sI(Za,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Dm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var bC,B$;function $_e(){if(B$)return bC;B$=1;var e=pf(),t=function(){return e.Date.now()};return bC=t,bC}var SC,U$;function B_e(){if(U$)return SC;U$=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return SC=t,SC}var AC,q$;function U_e(){if(q$)return AC;q$=1;var e=B_e(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return AC=r,AC}var NC,z$;function FZ(){if(z$)return NC;z$=1;var e=U_e(),t=Om(),r=hy(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):a.test(u)?n:+u}return NC=l,NC}var kC,W$;function q_e(){if(W$)return kC;W$=1;var e=Om(),t=$_e(),r=FZ(),n="Expected a function",a=Math.max,i=Math.min;function o(s,l,u){var d,f,h,m,x,g,y=0,_=!1,b=!1,S=!0;if(typeof s!="function")throw new TypeError(n);l=r(l)||0,e(u)&&(_=!!u.leading,b="maxWait"in u,h=b?a(r(u.maxWait)||0,l):h,S="trailing"in u?!!u.trailing:S);function C(j){var V=d,Z=f;return d=f=void 0,y=j,m=s.apply(Z,V),m}function E(j){return y=j,x=setTimeout(M,l),_?C(j):m}function O(j){var V=j-g,Z=j-y,te=l-V;return b?i(te,h-Z):te}function T(j){var V=j-g,Z=j-y;return g===void 0||V>=l||V<0||b&&Z>=h}function M(){var j=t();if(T(j))return L(j);x=setTimeout(M,O(j))}function L(j){return x=void 0,S&&d?C(j):(d=f=void 0,m)}function z(){x!==void 0&&clearTimeout(x),y=0,d=g=f=x=void 0}function P(){return x===void 0?m:L(t())}function R(){var j=t(),V=T(j);if(d=arguments,f=this,g=j,V){if(x===void 0)return E(g);if(b)return clearTimeout(x),x=setTimeout(M,l),C(g)}return x===void 0&&(x=setTimeout(M,l)),m}return R.cancel=z,R.flush=P,R}return kC=o,kC}var EC,V$;function z_e(){if(V$)return EC;V$=1;var e=q_e(),t=Om(),r="Expected a function";function n(a,i,o){var s=!0,l=!0;if(typeof a!="function")throw new TypeError(r);return t(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),e(a,i,{leading:s,maxWait:i,trailing:l})}return EC=n,EC}var W_e=z_e();const LZ=ia(W_e);function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}function H$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(r),!0).forEach(function(n){V_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V_e(e,t,r){return t=H_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H_e(e){var t=G_e(e,"string");return gx(t)=="symbol"?t:t+""}function G_e(e,t){if(gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K_e(e,t){return J_e(e)||Z_e(e,t)||X_e(e,t)||Y_e()}function Y_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(e,t){if(e){if(typeof e=="string")return G$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G$(e,t)}}function G$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function J_e(e){if(Array.isArray(e))return e}var Ps=A.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,x=e.debounce,g=x===void 0?0:x,y=e.id,_=e.className,b=e.onResize,S=e.style,C=S===void 0?{}:S,E=A.useRef(null),O=A.useRef();O.current=b,A.useImperativeHandle(t,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var T=A.useState({containerWidth:a.width,containerHeight:a.height}),M=K_e(T,2),L=M[0],z=M[1],P=A.useCallback(function(j,V){z(function(Z){var te=Math.round(j),q=Math.round(V);return Z.containerWidth===te&&Z.containerHeight===q?Z:{containerWidth:te,containerHeight:q}})},[]);A.useEffect(function(){var j=function(U){var G,J=U[0].contentRect,D=J.width,K=J.height;P(D,K),(G=O.current)===null||G===void 0||G.call(O,D,K)};g>0&&(j=LZ(j,g,{trailing:!0,leading:!1}));var V=new ResizeObserver(j),Z=E.current.getBoundingClientRect(),te=Z.width,q=Z.height;return P(te,q),V.observe(E.current),function(){V.disconnect()}},[P,g]);var R=A.useMemo(function(){var j=L.containerWidth,V=L.containerHeight;if(j<0||V<0)return null;Gu(I0(o)||I0(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),Gu(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=I0(o)?j:o,te=I0(l)?V:l;r&&r>0&&(Z?te=Z/r:te&&(Z=te*r),h&&te>h&&(te=h)),Gu(Z>0||te>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,te,o,l,d,f,r);var q=!Array.isArray(m)&&dh(m.type).endsWith("Chart");return tt.Children.map(m,function(Y){return tt.isValidElement(Y)?A.cloneElement(Y,cb({width:Z,height:te},q?{style:cb({height:"100%",width:"100%",maxHeight:te,maxWidth:Z},Y.props.style)}:{})):Y})},[r,m,l,h,f,d,L,o]);return c("div",{id:y?"".concat(y):void 0,className:fn("recharts-responsive-container",_),style:cb(cb({},C),{},{width:o,height:l,minWidth:d,minHeight:f,maxHeight:h}),ref:E,children:R})}),Yc=function(t){return null};Yc.displayName="Cell";function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){Q_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q_e(e,t,r){return t=ebe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ebe(e){var t=tbe(e,"string");return vx(t)=="symbol"?t:t+""}function tbe(e,t){if(vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nv={widthCache:{},cacheCount:0},rbe=2e3,nbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Y$="recharts_measurement_span";function abe(e){var t=F6({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var L2=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Dm.isSsr)return{width:0,height:0};var n=abe(r),a=JSON.stringify({text:t,copyStyle:n});if(Nv.widthCache[a])return Nv.widthCache[a];try{var i=document.getElementById(Y$);i||(i=document.createElement("span"),i.setAttribute("id",Y$),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=F6(F6({},nbe),n);Object.assign(i.style,o),i.textContent="".concat(t);var s=i.getBoundingClientRect(),l={width:s.width,height:s.height};return Nv.widthCache[a]=l,++Nv.cacheCount>rbe&&(Nv.cacheCount=0,Nv.widthCache={}),l}catch{return{width:0,height:0}}},ibe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function R5(e,t){return cbe(e)||lbe(e,t)||sbe(e,t)||obe()}function obe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sbe(e,t){if(e){if(typeof e=="string")return X$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X$(e,t)}}function X$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function cbe(e){if(Array.isArray(e))return e}function ube(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fbe(n.key),n)}}function dbe(e,t,r){return t&&Z$(e.prototype,t),r&&Z$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fbe(e){var t=hbe(e,"string");return yx(t)=="symbol"?t:t+""}function hbe(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Q$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pbe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gbe=Object.keys(jZ),qv="NaN";function vbe(e,t){return e*jZ[t]}var ub=function(){function e(t,r){ube(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!pbe.test(r)&&(this.num=NaN,this.unit=""),gbe.includes(r)&&(this.num=vbe(t,r),this.unit="px")}return dbe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=mbe.exec(r))!==null&&n!==void 0?n:[],i=R5(a,3),o=i[1],s=i[2];return new e(parseFloat(o),s??"")}}])}();function $Z(e){if(e.includes(qv))return qv;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=J$.exec(t))!==null&&r!==void 0?r:[],a=R5(n,4),i=a[1],o=a[2],s=a[3],l=ub.parse(i??""),u=ub.parse(s??""),d=o==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return qv;t=t.replace(J$,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=Q$.exec(t))!==null&&f!==void 0?f:[],m=R5(h,4),x=m[1],g=m[2],y=m[3],_=ub.parse(x??""),b=ub.parse(y??""),S=g==="+"?_.add(b):_.subtract(b);if(S.isNaN())return qv;t=t.replace(Q$,S.toString())}return t}var eB=/\(([^()]*)\)/;function ybe(e){for(var t=e;t.includes("(");){var r=eB.exec(t),n=R5(r,2),a=n[1];t=t.replace(eB,$Z(a))}return t}function xbe(e){var t=e.replace(/\s+/g,"");return t=ybe(t),t=$Z(t),t}function wbe(e){try{return xbe(e)}catch{return qv}}function CC(e){var t=wbe(e.slice(5,-1));return t===qv?"":t}var _be=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bbe=["dx","dy","angle","className","breakAll"];function tB(e,t){if(e==null)return{};var r=Sbe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Sbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rB(e,t){return Ebe(e)||kbe(e,t)||Nbe(e,t)||Abe()}function Abe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nbe(e,t){if(e){if(typeof e=="string")return nB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nB(e,t)}}function nB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Ebe(e){if(Array.isArray(e))return e}var BZ=/[ \f\n\r\t\v\u2028\u2029]+/,UZ=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];dn(r)||(n?i=r.toString().split(""):i=r.toString().split(BZ));var o=i.map(function(l){return{word:l,width:L2(l,a).width}}),s=n?0:L2("",a).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Cbe=function(t,r,n,a,i){var o=t.maxLines,s=t.children,l=t.style,u=t.breakAll,d=Kt(o),f=s,h=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(te,q){var Y=q.word,U=q.width,G=te[te.length-1];if(G&&(a==null||i||G.width+U+n<Number(a)))G.words.push(Y),G.width+=U+n;else{var J={words:[Y],width:U};te.push(J)}return te},[])},m=h(r),x=function(Z){return Z.reduce(function(te,q){return te.width>q.width?te:q})};if(!d)return m;for(var g="",y=function(Z){var te=f.slice(0,Z),q=UZ({breakAll:u,style:l,children:te+g}).wordsWithComputedWidth,Y=h(q),U=Y.length>o||x(Y).width>Number(a);return[U,Y]},_=0,b=f.length-1,S=0,C;_<=b&&S<=f.length-1;){var E=Math.floor((_+b)/2),O=E-1,T=y(O),M=rB(T,2),L=M[0],z=M[1],P=y(E),R=rB(P,1),j=R[0];if(!L&&!j&&(_=E+1),L&&j&&(b=E-1),!L&&j){C=z;break}S++}return C||m},aB=function(t){var r=dn(t)?[]:t.toString().split(BZ);return[{words:r}]},Pbe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,s=t.maxLines;if((r||n)&&!Dm.isSsr){var l,u,d=UZ({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;l=f,u=h}else return aB(a);return Cbe({breakAll:o,children:a,maxLines:s,style:i},l,u,r,n)}return aB(a)},iB="#808080",rg=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,s=o===void 0?"1em":o,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,x=t.verticalAnchor,g=x===void 0?"end":x,y=t.fill,_=y===void 0?iB:y,b=tB(t,_be),S=A.useMemo(function(){return Pbe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),C=b.dx,E=b.dy,O=b.angle,T=b.className,M=b.breakAll,L=tB(b,bbe);if(!wo(n)||!wo(i))return null;var z=n+(Kt(C)?C:0),P=i+(Kt(E)?E:0),R;switch(g){case"start":R=CC("calc(".concat(u,")"));break;case"middle":R=CC("calc(".concat((S.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:R=CC("calc(".concat(S.length-1," * -").concat(s,")"));break}var j=[];if(f){var V=S[0].width,Z=b.width;j.push("scale(".concat((Kt(Z)?Z/V:1)/V,")"))}return O&&j.push("rotate(".concat(O,", ").concat(z,", ").concat(P,")")),j.length&&(L.transform=j.join(" ")),c("text",{...Or(L,!0),x:z,y:P,className:fn("recharts-text",T),textAnchor:m,fill:_.includes("url")?iB:_,children:S.map(function(te,q){var Y=te.words.join(M?"":" ");return c("tspan",{x:z,dy:q===0?R:s,children:Y},"".concat(Y,"-").concat(q))})})};function tm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Tbe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lI(e){let t,r,n;e.length!==2?(t=tm,r=(s,l)=>tm(e(s),l),n=(s,l)=>e(s)-l):(t=e===tm||e===Tbe?e:Obe,r=e,n=e);function a(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<0?u=f+1:d=f}while(u<d)}return u}function i(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function o(s,l,u=0,d=s.length){const f=a(s,l,u,d-1);return f>u&&n(s[f-1],l)>-n(s[f],l)?f-1:f}return{left:a,center:o,right:i}}function Obe(){return 0}function qZ(e){return e===null?NaN:+e}function*Dbe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Ibe=lI(tm),Bw=Ibe.right;lI(qZ).center;class oB extends Map{constructor(t,r=Fbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(sB(this,t))}has(t){return super.has(sB(this,t))}set(t,r){return super.set(Rbe(this,t),r)}delete(t){return super.delete(Mbe(this,t))}}function sB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Rbe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Mbe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Fbe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Lbe(e=tm){if(e===tm)return zZ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function zZ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const jbe=Math.sqrt(50),$be=Math.sqrt(10),Bbe=Math.sqrt(2);function M5(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=jbe?10:i>=$be?5:i>=Bbe?2:1;let s,l,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,a)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?M5(e,t,r*2):[s,l,u]}function L6(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?M5(t,e,r):M5(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(i-u)/-o;else for(let u=0;u<s;++u)l[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(a+u)/-o;else for(let u=0;u<s;++u)l[u]=(a+u)*o;return l}function j6(e,t,r){return t=+t,e=+e,r=+r,M5(e,t,r)[2]}function $6(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?j6(t,e,r):j6(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function lB(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function cB(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function WZ(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?zZ:Lbe(a);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/l+h)),x=Math.min(n,Math.floor(t+(l-u)*f/l+h));WZ(e,t,m,x,a)}const i=e[t];let o=r,s=n;for(r2(e,r,t),a(e[n],i)>0&&r2(e,r,n);o<s;){for(r2(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}a(e[r],i)===0?r2(e,r,s):(++s,r2(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function r2(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Ube(e,t,r){if(e=Float64Array.from(Dbe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return cB(e);if(t>=1)return lB(e);var n,a=(n-1)*t,i=Math.floor(a),o=lB(WZ(e,i).subarray(0,i+1)),s=cB(e.subarray(i+1));return o+(s-o)*(a-i)}}function qbe(e,t,r=qZ){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),s=+r(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function zbe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function iu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Dh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const B6=Symbol("implicit");function cI(){var e=new oB,t=[],r=[],n=B6;function a(i){let o=e.get(i);if(o===void 0){if(n!==B6)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new oB;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return cI(t,r).unknown(n)},iu.apply(a,arguments),a}function xx(){var e=cI().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,s=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,x=m?a:n,g=m?n:a;i=(g-x)/Math.max(1,h-l+u*2),s&&(i=Math.floor(i)),x+=(g-x-i*(h-l))*d,o=i*(1-l),s&&(x=Math.round(x),o=Math.round(o));var y=zbe(h).map(function(_){return x+i*_});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return xx(t(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(d)},iu.apply(f(),arguments)}function VZ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return VZ(t())},e}function j2(){return VZ(xx.apply(null,arguments).paddingInner(1))}function uI(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function HZ(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Uw(){}var wx=.7,F5=1/wx,t1="\\s*([+-]?\\d+)\\s*",_x="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wbe=/^#([0-9a-f]{3,8})$/,Vbe=new RegExp(`^rgb\\(${t1},${t1},${t1}\\)$`),Hbe=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),Gbe=new RegExp(`^rgba\\(${t1},${t1},${t1},${_x}\\)$`),Kbe=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${_x}\\)$`),Ybe=new RegExp(`^hsl\\(${_x},${Qd},${Qd}\\)$`),Xbe=new RegExp(`^hsla\\(${_x},${Qd},${Qd},${_x}\\)$`),uB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uI(Uw,bx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dB,formatHex:dB,formatHex8:Zbe,formatHsl:Jbe,formatRgb:fB,toString:fB});function dB(){return this.rgb().formatHex()}function Zbe(){return this.rgb().formatHex8()}function Jbe(){return GZ(this).formatHsl()}function fB(){return this.rgb().formatRgb()}function bx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Wbe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?hB(t):r===3?new Il(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?db(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?db(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vbe.exec(e))?new Il(t[1],t[2],t[3],1):(t=Hbe.exec(e))?new Il(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gbe.exec(e))?db(t[1],t[2],t[3],t[4]):(t=Kbe.exec(e))?db(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ybe.exec(e))?gB(t[1],t[2]/100,t[3]/100,1):(t=Xbe.exec(e))?gB(t[1],t[2]/100,t[3]/100,t[4]):uB.hasOwnProperty(e)?hB(uB[e]):e==="transparent"?new Il(NaN,NaN,NaN,0):null}function hB(e){return new Il(e>>16&255,e>>8&255,e&255,1)}function db(e,t,r,n){return n<=0&&(e=t=r=NaN),new Il(e,t,r,n)}function Qbe(e){return e instanceof Uw||(e=bx(e)),e?(e=e.rgb(),new Il(e.r,e.g,e.b,e.opacity)):new Il}function U6(e,t,r,n){return arguments.length===1?Qbe(e):new Il(e,t,r,n??1)}function Il(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}uI(Il,U6,HZ(Uw,{brighter(e){return e=e==null?F5:Math.pow(F5,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wx:Math.pow(wx,e),new Il(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Il(B0(this.r),B0(this.g),B0(this.b),L5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pB,formatHex:pB,formatHex8:e5e,formatRgb:mB,toString:mB}));function pB(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}`}function e5e(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}${R0((isNaN(this.opacity)?1:this.opacity)*255)}`}function mB(){const e=L5(this.opacity);return`${e===1?"rgb(":"rgba("}${B0(this.r)}, ${B0(this.g)}, ${B0(this.b)}${e===1?")":`, ${e})`}`}function L5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function B0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R0(e){return e=B0(e),(e<16?"0":"")+e.toString(16)}function gB(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Uu(e,t,r,n)}function GZ(e){if(e instanceof Uu)return new Uu(e.h,e.s,e.l,e.opacity);if(e instanceof Uw||(e=bx(e)),!e)return new Uu;if(e instanceof Uu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Uu(o,s,l,e.opacity)}function t5e(e,t,r,n){return arguments.length===1?GZ(e):new Uu(e,t,r,n??1)}function Uu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}uI(Uu,t5e,HZ(Uw,{brighter(e){return e=e==null?F5:Math.pow(F5,e),new Uu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wx:Math.pow(wx,e),new Uu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Il(PC(e>=240?e-240:e+120,a,n),PC(e,a,n),PC(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Uu(vB(this.h),fb(this.s),fb(this.l),L5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L5(this.opacity);return`${e===1?"hsl(":"hsla("}${vB(this.h)}, ${fb(this.s)*100}%, ${fb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vB(e){return e=(e||0)%360,e<0?e+360:e}function fb(e){return Math.max(0,Math.min(1,e||0))}function PC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const dI=e=>()=>e;function r5e(e,t){return function(r){return e+r*t}}function n5e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function a5e(e){return(e=+e)==1?KZ:function(t,r){return r-t?n5e(t,r,e):dI(isNaN(t)?r:t)}}function KZ(e,t){var r=t-e;return r?r5e(e,r):dI(isNaN(e)?t:e)}const yB=function e(t){var r=a5e(t);function n(a,i){var o=r((a=U6(a)).r,(i=U6(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),u=KZ(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=s(d),a.b=l(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function i5e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function o5e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function s5e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=vy(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(s){for(o=0;o<n;++o)i[o]=a[o](s);return i}}function l5e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function j5(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function c5e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=vy(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var q6=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,TC=new RegExp(q6.source,"g");function u5e(e){return function(){return e}}function d5e(e){return function(t){return e(t)+""}}function f5e(e,t){var r=q6.lastIndex=TC.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=q6.exec(e))&&(a=TC.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:j5(n,a)})),r=TC.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?d5e(l[0].x):u5e(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)s[(f=l[d]).i]=f.x(u);return s.join("")})}function vy(e,t){var r=typeof t,n;return t==null||r==="boolean"?dI(t):(r==="number"?j5:r==="string"?(n=bx(t))?(t=n,yB):f5e:t instanceof bx?yB:t instanceof Date?l5e:o5e(t)?i5e:Array.isArray(t)?s5e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?c5e:j5)(e,t)}function fI(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function h5e(e,t){t===void 0&&(t=e,e=vy);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[s](o-s)}}function p5e(e){return function(){return e}}function $5(e){return+e}var xB=[0,1];function ul(e){return e}function z6(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:p5e(isNaN(t)?NaN:.5)}function m5e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function g5e(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=z6(a,n),i=r(o,i)):(n=z6(n,a),i=r(i,o)),function(s){return i(n(s))}}function v5e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=z6(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(s){var l=Bw(e,s,1,n)-1;return i[l](a[l](s))}}function qw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function G4(){var e=xB,t=xB,r=vy,n,a,i,o=ul,s,l,u;function d(){var h=Math.min(e.length,t.length);return o!==ul&&(o=m5e(e[0],e[h-1])),s=h>2?v5e:g5e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(l||(l=s(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=s(t,e.map(n),j5)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,$5),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=fI,d()},f.clamp=function(h){return arguments.length?(o=h?!0:ul,d()):o!==ul},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function hI(){return G4()(ul,ul)}function y5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function B5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function k1(e){return e=B5(Math.abs(e)),e?e[1]:NaN}function x5e(e,t){return function(r,n){for(var a=r.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function w5e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sx(e){if(!(t=_5e.exec(e)))throw new Error("invalid format: "+e);var t;return new pI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sx.prototype=pI.prototype;function pI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function b5e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var YZ;function S5e(e,t){var r=B5(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(YZ=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+B5(e,Math.max(0,t+i-1))[0]}function wB(e,t){var r=B5(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const _B={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:y5e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wB(e*100,t),r:wB,s:S5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bB(e){return e}var SB=Array.prototype.map,AB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A5e(e){var t=e.grouping===void 0||e.thousands===void 0?bB:x5e(SB.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?bB:w5e(SB.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Sx(f);var h=f.fill,m=f.align,x=f.sign,g=f.symbol,y=f.zero,_=f.width,b=f.comma,S=f.precision,C=f.trim,E=f.type;E==="n"?(b=!0,E="g"):_B[E]||(S===void 0&&(S=12),C=!0,E="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var O=g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=g==="$"?n:/[%p]/.test(E)?o:"",M=_B[E],L=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function z(P){var R=O,j=T,V,Z,te;if(E==="c")j=M(P)+j,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?l:M(Math.abs(P),S),C&&(P=b5e(P)),q&&+P==0&&x!=="+"&&(q=!1),R=(q?x==="("?x:s:x==="-"||x==="("?"":x)+R,j=(E==="s"?AB[8+YZ/3]:"")+j+(q&&x==="("?")":""),L){for(V=-1,Z=P.length;++V<Z;)if(te=P.charCodeAt(V),48>te||te>57){j=(te===46?a+P.slice(V+1):P.slice(V))+j,P=P.slice(0,V);break}}}b&&!y&&(P=t(P,1/0));var Y=R.length+P.length+j.length,U=Y<_?new Array(_-Y+1).join(h):"";switch(b&&y&&(P=t(U+P,U.length?_-j.length:1/0),U=""),m){case"<":P=R+P+j+U;break;case"=":P=R+U+P+j;break;case"^":P=U.slice(0,Y=U.length>>1)+R+P+j+U.slice(Y);break;default:P=U+R+P+j;break}return i(P)}return z.toString=function(){return f+""},z}function d(f,h){var m=u((f=Sx(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(k1(h)/3)))*3,g=Math.pow(10,-x),y=AB[8+x/3];return function(_){return m(g*_)+y}}return{format:u,formatPrefix:d}}var hb,mI,XZ;N5e({thousands:",",grouping:[3],currency:["$",""]});function N5e(e){return hb=A5e(e),mI=hb.format,XZ=hb.formatPrefix,hb}function k5e(e){return Math.max(0,-k1(Math.abs(e)))}function E5e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k1(t)/3)))*3-k1(Math.abs(e)))}function C5e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,k1(t)-k1(e))+1}function ZZ(e,t,r,n){var a=$6(e,t,r),i;switch(n=Sx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=E5e(a,o))&&(n.precision=i),XZ(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=C5e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=k5e(a))&&(n.precision=i-(n.type==="%")*2);break}}return mI(n)}function Im(e){var t=e.domain;return e.ticks=function(r){var n=t();return L6(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return ZZ(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],s=n[i],l,u,d=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);d-- >0;){if(u=j6(o,s,r),u===l)return n[a]=o,n[i]=s,t(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function U5(){var e=hI();return e.copy=function(){return qw(e,U5())},iu.apply(e,arguments),Im(e)}function JZ(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,$5),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return JZ(e).unknown(t)},e=arguments.length?Array.from(e,$5):[0,1],Im(r)}function QZ(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function NB(e){return Math.log(e)}function kB(e){return Math.exp(e)}function P5e(e){return-Math.log(-e)}function T5e(e){return-Math.exp(-e)}function O5e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function D5e(e){return e===10?O5e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function I5e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function EB(e){return(t,r)=>-e(-t,r)}function gI(e){const t=e(NB,kB),r=t.domain;let n=10,a,i;function o(){return a=I5e(n),i=D5e(n),r()[0]<0?(a=EB(a),i=EB(i),e(P5e,T5e)):e(NB,kB),t}return t.base=function(s){return arguments.length?(n=+s,o()):n},t.domain=function(s){return arguments.length?(r(s),o()):r()},t.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),x,g;const y=s==null?10:+s;let _=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(x=1;x<n;++x)if(g=h<0?x/i(-h):x*i(h),!(g<u)){if(g>d)break;_.push(g)}}else for(;h<=m;++h)for(x=n-1;x>=1;--x)if(g=h>0?x/i(-h):x*i(h),!(g<u)){if(g>d)break;_.push(g)}_.length*2<y&&(_=L6(u,d,y))}else _=L6(h,m,Math.min(m-h,y)).map(i);return f?_.reverse():_},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Sx(l)).precision==null&&(l.trim=!0),l=mI(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(QZ(r(),{floor:s=>i(Math.floor(a(s))),ceil:s=>i(Math.ceil(a(s)))})),t}function eJ(){const e=gI(G4()).domain([1,10]);return e.copy=()=>qw(e,eJ()).base(e.base()),iu.apply(e,arguments),e}function CB(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PB(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vI(e){var t=1,r=e(CB(t),PB(t));return r.constant=function(n){return arguments.length?e(CB(t=+n),PB(t)):t},Im(r)}function tJ(){var e=vI(G4());return e.copy=function(){return qw(e,tJ()).constant(e.constant())},iu.apply(e,arguments)}function TB(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function R5e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function M5e(e){return e<0?-e*e:e*e}function yI(e){var t=e(ul,ul),r=1;function n(){return r===1?e(ul,ul):r===.5?e(R5e,M5e):e(TB(r),TB(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Im(t)}function xI(){var e=yI(G4());return e.copy=function(){return qw(e,xI()).exponent(e.exponent())},iu.apply(e,arguments),e}function F5e(){return xI.apply(null,arguments).exponent(.5)}function OB(e){return Math.sign(e)*e*e}function L5e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function rJ(){var e=hI(),t=[0,1],r=!1,n;function a(i){var o=L5e(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(OB(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,$5)).map(OB)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return rJ(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},iu.apply(a,arguments),Im(a)}function nJ(){var e=[],t=[],r=[],n;function a(){var o=0,s=Math.max(1,t.length);for(r=new Array(s-1);++o<s;)r[o-1]=qbe(e,o/s);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Bw(r,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(tm),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return nJ().domain(e).range(t).unknown(n)},iu.apply(i,arguments)}function aJ(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(l){return l!=null&&l<=l?a[Bw(n,l,0,r)]:i}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(r=(a=Array.from(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return aJ().domain([e,t]).range(a).unknown(i)},iu.apply(Im(o),arguments)}function iJ(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Bw(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return iJ().domain(e).range(t).unknown(r)},iu.apply(a,arguments)}const OC=new Date,DC=new Date;function So(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,s)=>{const l=[];if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;let u;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=i=>So(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(OC.setTime(+i),DC.setTime(+o),e(OC),e(DC),Math.floor(r(OC,DC))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const q5=So(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);q5.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?So(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):q5);q5.range;const ih=1e3,Jc=ih*60,oh=Jc*60,_h=oh*24,wI=_h*7,DB=_h*30,IC=_h*365,M0=So(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ih)},(e,t)=>(t-e)/ih,e=>e.getUTCSeconds());M0.range;const _I=So(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ih)},(e,t)=>{e.setTime(+e+t*Jc)},(e,t)=>(t-e)/Jc,e=>e.getMinutes());_I.range;const bI=So(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jc)},(e,t)=>(t-e)/Jc,e=>e.getUTCMinutes());bI.range;const SI=So(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ih-e.getMinutes()*Jc)},(e,t)=>{e.setTime(+e+t*oh)},(e,t)=>(t-e)/oh,e=>e.getHours());SI.range;const AI=So(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*oh)},(e,t)=>(t-e)/oh,e=>e.getUTCHours());AI.range;const zw=So(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jc)/_h,e=>e.getDate()-1);zw.range;const K4=So(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>e.getUTCDate()-1);K4.range;const oJ=So(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_h,e=>Math.floor(e/_h));oJ.range;function Eg(e){return So(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Jc)/wI)}const Y4=Eg(0),z5=Eg(1),j5e=Eg(2),$5e=Eg(3),E1=Eg(4),B5e=Eg(5),U5e=Eg(6);Y4.range;z5.range;j5e.range;$5e.range;E1.range;B5e.range;U5e.range;function Cg(e){return So(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/wI)}const X4=Cg(0),W5=Cg(1),q5e=Cg(2),z5e=Cg(3),C1=Cg(4),W5e=Cg(5),V5e=Cg(6);X4.range;W5.range;q5e.range;z5e.range;C1.range;W5e.range;V5e.range;const NI=So(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());NI.range;const kI=So(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kI.range;const bh=So(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:So(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});bh.range;const Sh=So(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:So(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Sh.range;function sJ(e,t,r,n,a,i){const o=[[M0,1,ih],[M0,5,5*ih],[M0,15,15*ih],[M0,30,30*ih],[i,1,Jc],[i,5,5*Jc],[i,15,15*Jc],[i,30,30*Jc],[a,1,oh],[a,3,3*oh],[a,6,6*oh],[a,12,12*oh],[n,1,_h],[n,2,2*_h],[r,1,wI],[t,1,DB],[t,3,3*DB],[e,1,IC]];function s(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:l(u,d,f),x=m?m.range(u,+d+1):[];return h?x.reverse():x}function l(u,d,f){const h=Math.abs(d-u)/f,m=lI(([,,y])=>y).right(o,h);if(m===o.length)return e.every($6(u/IC,d/IC,f));if(m===0)return q5.every(Math.max($6(u,d,f),1));const[x,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return x.every(g)}return[s,l]}const[H5e,G5e]=sJ(Sh,kI,X4,oJ,AI,bI),[K5e,Y5e]=sJ(bh,NI,Y4,zw,SI,_I);function RC(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function MC(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function n2(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function X5e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=a2(a),d=i2(a),f=a2(i),h=i2(i),m=a2(o),x=i2(o),g=a2(s),y=i2(s),_=a2(l),b=i2(l),S={a:q,A:Y,b:U,B:G,c:null,d:jB,e:jB,f:xSe,g:PSe,G:OSe,H:gSe,I:vSe,j:ySe,L:lJ,m:wSe,M:_Se,p:J,q:D,Q:UB,s:qB,S:bSe,u:SSe,U:ASe,V:NSe,w:kSe,W:ESe,x:null,X:null,y:CSe,Y:TSe,Z:DSe,"%":BB},C={a:K,A:Q,b:ae,B:se,c:null,d:$B,e:$B,f:FSe,g:HSe,G:KSe,H:ISe,I:RSe,j:MSe,L:uJ,m:LSe,M:jSe,p:fe,q:ie,Q:UB,s:qB,S:$Se,u:BSe,U:USe,V:qSe,w:zSe,W:WSe,x:null,X:null,y:VSe,Y:GSe,Z:YSe,"%":BB},E={a:z,A:P,b:R,B:j,c:V,d:FB,e:FB,f:fSe,g:MB,G:RB,H:LB,I:LB,j:lSe,L:dSe,m:sSe,M:cSe,p:L,q:oSe,Q:pSe,s:mSe,S:uSe,u:tSe,U:rSe,V:nSe,w:eSe,W:aSe,x:Z,X:te,y:MB,Y:RB,Z:iSe,"%":hSe};S.x=O(r,S),S.X=O(n,S),S.c=O(t,S),C.x=O(r,C),C.X=O(n,C),C.c=O(t,C);function O(X,ue){return function(de){var re=[],ke=-1,Re=0,Pe=X.length,ge,Ye,Qe;for(de instanceof Date||(de=new Date(+de));++ke<Pe;)X.charCodeAt(ke)===37&&(re.push(X.slice(Re,ke)),(Ye=IB[ge=X.charAt(++ke)])!=null?ge=X.charAt(++ke):Ye=ge==="e"?" ":"0",(Qe=ue[ge])&&(ge=Qe(de,Ye)),re.push(ge),Re=ke+1);return re.push(X.slice(Re,ke)),re.join("")}}function T(X,ue){return function(de){var re=n2(1900,void 0,1),ke=M(re,X,de+="",0),Re,Pe;if(ke!=de.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ue&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Re=MC(n2(re.y,0,1)),Pe=Re.getUTCDay(),Re=Pe>4||Pe===0?W5.ceil(Re):W5(Re),Re=K4.offset(Re,(re.V-1)*7),re.y=Re.getUTCFullYear(),re.m=Re.getUTCMonth(),re.d=Re.getUTCDate()+(re.w+6)%7):(Re=RC(n2(re.y,0,1)),Pe=Re.getDay(),Re=Pe>4||Pe===0?z5.ceil(Re):z5(Re),Re=zw.offset(Re,(re.V-1)*7),re.y=Re.getFullYear(),re.m=Re.getMonth(),re.d=Re.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Pe="Z"in re?MC(n2(re.y,0,1)).getUTCDay():RC(n2(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Pe+5)%7:re.w+re.U*7-(Pe+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,MC(re)):RC(re)}}function M(X,ue,de,re){for(var ke=0,Re=ue.length,Pe=de.length,ge,Ye;ke<Re;){if(re>=Pe)return-1;if(ge=ue.charCodeAt(ke++),ge===37){if(ge=ue.charAt(ke++),Ye=E[ge in IB?ue.charAt(ke++):ge],!Ye||(re=Ye(X,de,re))<0)return-1}else if(ge!=de.charCodeAt(re++))return-1}return re}function L(X,ue,de){var re=u.exec(ue.slice(de));return re?(X.p=d.get(re[0].toLowerCase()),de+re[0].length):-1}function z(X,ue,de){var re=m.exec(ue.slice(de));return re?(X.w=x.get(re[0].toLowerCase()),de+re[0].length):-1}function P(X,ue,de){var re=f.exec(ue.slice(de));return re?(X.w=h.get(re[0].toLowerCase()),de+re[0].length):-1}function R(X,ue,de){var re=_.exec(ue.slice(de));return re?(X.m=b.get(re[0].toLowerCase()),de+re[0].length):-1}function j(X,ue,de){var re=g.exec(ue.slice(de));return re?(X.m=y.get(re[0].toLowerCase()),de+re[0].length):-1}function V(X,ue,de){return M(X,t,ue,de)}function Z(X,ue,de){return M(X,r,ue,de)}function te(X,ue,de){return M(X,n,ue,de)}function q(X){return o[X.getDay()]}function Y(X){return i[X.getDay()]}function U(X){return l[X.getMonth()]}function G(X){return s[X.getMonth()]}function J(X){return a[+(X.getHours()>=12)]}function D(X){return 1+~~(X.getMonth()/3)}function K(X){return o[X.getUTCDay()]}function Q(X){return i[X.getUTCDay()]}function ae(X){return l[X.getUTCMonth()]}function se(X){return s[X.getUTCMonth()]}function fe(X){return a[+(X.getUTCHours()>=12)]}function ie(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ue=O(X+="",S);return ue.toString=function(){return X},ue},parse:function(X){var ue=T(X+="",!1);return ue.toString=function(){return X},ue},utcFormat:function(X){var ue=O(X+="",C);return ue.toString=function(){return X},ue},utcParse:function(X){var ue=T(X+="",!0);return ue.toString=function(){return X},ue}}}var IB={"-":"",_:" ",0:"0"},qo=/^\s*\d+/,Z5e=/^%/,J5e=/[\\^$*+?|[\]().{}]/g;function Zn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function Q5e(e){return e.replace(J5e,"\\$&")}function a2(e){return new RegExp("^(?:"+e.map(Q5e).join("|")+")","i")}function i2(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function eSe(e,t,r){var n=qo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function tSe(e,t,r){var n=qo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function rSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function nSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function aSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function RB(e,t,r){var n=qo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function MB(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function iSe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oSe(e,t,r){var n=qo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function sSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function FB(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function lSe(e,t,r){var n=qo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function LB(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function cSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function uSe(e,t,r){var n=qo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function dSe(e,t,r){var n=qo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function fSe(e,t,r){var n=qo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function hSe(e,t,r){var n=Z5e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function pSe(e,t,r){var n=qo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function mSe(e,t,r){var n=qo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function jB(e,t){return Zn(e.getDate(),t,2)}function gSe(e,t){return Zn(e.getHours(),t,2)}function vSe(e,t){return Zn(e.getHours()%12||12,t,2)}function ySe(e,t){return Zn(1+zw.count(bh(e),e),t,3)}function lJ(e,t){return Zn(e.getMilliseconds(),t,3)}function xSe(e,t){return lJ(e,t)+"000"}function wSe(e,t){return Zn(e.getMonth()+1,t,2)}function _Se(e,t){return Zn(e.getMinutes(),t,2)}function bSe(e,t){return Zn(e.getSeconds(),t,2)}function SSe(e){var t=e.getDay();return t===0?7:t}function ASe(e,t){return Zn(Y4.count(bh(e)-1,e),t,2)}function cJ(e){var t=e.getDay();return t>=4||t===0?E1(e):E1.ceil(e)}function NSe(e,t){return e=cJ(e),Zn(E1.count(bh(e),e)+(bh(e).getDay()===4),t,2)}function kSe(e){return e.getDay()}function ESe(e,t){return Zn(z5.count(bh(e)-1,e),t,2)}function CSe(e,t){return Zn(e.getFullYear()%100,t,2)}function PSe(e,t){return e=cJ(e),Zn(e.getFullYear()%100,t,2)}function TSe(e,t){return Zn(e.getFullYear()%1e4,t,4)}function OSe(e,t){var r=e.getDay();return e=r>=4||r===0?E1(e):E1.ceil(e),Zn(e.getFullYear()%1e4,t,4)}function DSe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zn(t/60|0,"0",2)+Zn(t%60,"0",2)}function $B(e,t){return Zn(e.getUTCDate(),t,2)}function ISe(e,t){return Zn(e.getUTCHours(),t,2)}function RSe(e,t){return Zn(e.getUTCHours()%12||12,t,2)}function MSe(e,t){return Zn(1+K4.count(Sh(e),e),t,3)}function uJ(e,t){return Zn(e.getUTCMilliseconds(),t,3)}function FSe(e,t){return uJ(e,t)+"000"}function LSe(e,t){return Zn(e.getUTCMonth()+1,t,2)}function jSe(e,t){return Zn(e.getUTCMinutes(),t,2)}function $Se(e,t){return Zn(e.getUTCSeconds(),t,2)}function BSe(e){var t=e.getUTCDay();return t===0?7:t}function USe(e,t){return Zn(X4.count(Sh(e)-1,e),t,2)}function dJ(e){var t=e.getUTCDay();return t>=4||t===0?C1(e):C1.ceil(e)}function qSe(e,t){return e=dJ(e),Zn(C1.count(Sh(e),e)+(Sh(e).getUTCDay()===4),t,2)}function zSe(e){return e.getUTCDay()}function WSe(e,t){return Zn(W5.count(Sh(e)-1,e),t,2)}function VSe(e,t){return Zn(e.getUTCFullYear()%100,t,2)}function HSe(e,t){return e=dJ(e),Zn(e.getUTCFullYear()%100,t,2)}function GSe(e,t){return Zn(e.getUTCFullYear()%1e4,t,4)}function KSe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?C1(e):C1.ceil(e),Zn(e.getUTCFullYear()%1e4,t,4)}function YSe(){return"+0000"}function BB(){return"%"}function UB(e){return+e}function qB(e){return Math.floor(+e/1e3)}var kv,fJ,hJ;XSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XSe(e){return kv=X5e(e),fJ=kv.format,kv.parse,hJ=kv.utcFormat,kv.utcParse,kv}function ZSe(e){return new Date(e)}function JSe(e){return e instanceof Date?+e:+new Date(+e)}function EI(e,t,r,n,a,i,o,s,l,u){var d=hI(),f=d.invert,h=d.domain,m=u(".%L"),x=u(":%S"),g=u("%I:%M"),y=u("%I %p"),_=u("%a %d"),b=u("%b %d"),S=u("%B"),C=u("%Y");function E(O){return(l(O)<O?m:s(O)<O?x:o(O)<O?g:i(O)<O?y:n(O)<O?a(O)<O?_:b:r(O)<O?S:C)(O)}return d.invert=function(O){return new Date(f(O))},d.domain=function(O){return arguments.length?h(Array.from(O,JSe)):h().map(ZSe)},d.ticks=function(O){var T=h();return e(T[0],T[T.length-1],O??10)},d.tickFormat=function(O,T){return T==null?E:u(T)},d.nice=function(O){var T=h();return(!O||typeof O.range!="function")&&(O=t(T[0],T[T.length-1],O??10)),O?h(QZ(T,O)):d},d.copy=function(){return qw(d,EI(e,t,r,n,a,i,o,s,l,u))},d}function QSe(){return iu.apply(EI(K5e,Y5e,bh,NI,Y4,zw,SI,_I,M0,fJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function e4e(){return iu.apply(EI(H5e,G5e,Sh,kI,X4,K4,AI,bI,M0,hJ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Z4(){var e=0,t=1,r,n,a,i,o=ul,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(a===0?.5:(f=(i(f)-r)*a,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,x;return arguments.length?([m,x]=h,o=f(m,x),u):[o(0),o(1)]}}return u.range=d(vy),u.rangeRound=d(fI),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Rm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pJ(){var e=Im(Z4()(ul));return e.copy=function(){return Rm(e,pJ())},Dh.apply(e,arguments)}function mJ(){var e=gI(Z4()).domain([1,10]);return e.copy=function(){return Rm(e,mJ()).base(e.base())},Dh.apply(e,arguments)}function gJ(){var e=vI(Z4());return e.copy=function(){return Rm(e,gJ()).constant(e.constant())},Dh.apply(e,arguments)}function CI(){var e=yI(Z4());return e.copy=function(){return Rm(e,CI()).exponent(e.exponent())},Dh.apply(e,arguments)}function t4e(){return CI.apply(null,arguments).exponent(.5)}function vJ(){var e=[],t=ul;function r(n){if(n!=null&&!isNaN(n=+n))return t((Bw(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(tm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Ube(e,i/n))},r.copy=function(){return vJ(t).domain(e)},Dh.apply(r,arguments)}function J4(){var e=0,t=.5,r=1,n=1,a,i,o,s,l,u=ul,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?s:l),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),o=d(r=+r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function x(g){return function(y){var _,b,S;return arguments.length?([_,b,S]=y,u=h5e(g,[_,b,S]),m):[u(0),u(.5),u(1)]}}return m.range=x(vy),m.rangeRound=x(fI),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,a=g(e),i=g(t),o=g(r),s=a===i?0:.5/(i-a),l=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function yJ(){var e=Im(J4()(ul));return e.copy=function(){return Rm(e,yJ())},Dh.apply(e,arguments)}function xJ(){var e=gI(J4()).domain([.1,1,10]);return e.copy=function(){return Rm(e,xJ()).base(e.base())},Dh.apply(e,arguments)}function wJ(){var e=vI(J4());return e.copy=function(){return Rm(e,wJ()).constant(e.constant())},Dh.apply(e,arguments)}function PI(){var e=yI(J4());return e.copy=function(){return Rm(e,PI()).exponent(e.exponent())},Dh.apply(e,arguments)}function r4e(){return PI.apply(null,arguments).exponent(.5)}const zB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xx,scaleDiverging:yJ,scaleDivergingLog:xJ,scaleDivergingPow:PI,scaleDivergingSqrt:r4e,scaleDivergingSymlog:wJ,scaleIdentity:JZ,scaleImplicit:B6,scaleLinear:U5,scaleLog:eJ,scaleOrdinal:cI,scalePoint:j2,scalePow:xI,scaleQuantile:nJ,scaleQuantize:aJ,scaleRadial:rJ,scaleSequential:pJ,scaleSequentialLog:mJ,scaleSequentialPow:CI,scaleSequentialQuantile:vJ,scaleSequentialSqrt:t4e,scaleSequentialSymlog:gJ,scaleSqrt:F5e,scaleSymlog:tJ,scaleThreshold:iJ,scaleTime:QSe,scaleUtc:e4e,tickFormat:ZZ},Symbol.toStringTag,{value:"Module"}));var FC,WB;function Q4(){if(WB)return FC;WB=1;var e=hy();function t(r,n,a){for(var i=-1,o=r.length;++i<o;){var s=r[i],l=n(s);if(l!=null&&(u===void 0?l===l&&!e(l):a(l,u)))var u=l,d=s}return d}return FC=t,FC}var LC,VB;function _J(){if(VB)return LC;VB=1;function e(t,r){return t>r}return LC=e,LC}var jC,HB;function n4e(){if(HB)return jC;HB=1;var e=Q4(),t=_J(),r=gy();function n(a){return a&&a.length?e(a,r,t):void 0}return jC=n,jC}var a4e=n4e();const Kp=ia(a4e);var $C,GB;function bJ(){if(GB)return $C;GB=1;function e(t,r){return t<r}return $C=e,$C}var BC,KB;function i4e(){if(KB)return BC;KB=1;var e=Q4(),t=bJ(),r=gy();function n(a){return a&&a.length?e(a,r,t):void 0}return BC=n,BC}var o4e=i4e();const e3=ia(o4e);var UC,YB;function s4e(){if(YB)return UC;YB=1;var e=VD(),t=mf(),r=TZ(),n=ql();function a(i,o){var s=n(i)?e:r;return s(i,t(o,3))}return UC=a,UC}var qC,XB;function l4e(){if(XB)return qC;XB=1;var e=CZ(),t=s4e();function r(n,a){return e(t(n,a),1)}return qC=r,qC}var c4e=l4e();const u4e=ia(c4e);var zC,ZB;function d4e(){if(ZB)return zC;ZB=1;var e=aI();function t(r,n){return e(r,n)}return zC=t,zC}var f4e=d4e();const ng=ia(f4e);var yy=1e9,h4e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OI,ai=!0,ru="[DecimalError] ",U0=ru+"Invalid argument: ",TI=ru+"Exponent out of range: ",xy=Math.floor,N0=Math.pow,p4e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,dc,Ro=1e7,Ka=7,SJ=9007199254740991,V5=xy(SJ/Ka),br={};br.absoluteValue=br.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};br.comparedTo=br.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};br.decimalPlaces=br.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ka;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};br.dividedBy=br.div=function(e){return fh(this,new this.constructor(e))};br.dividedToIntegerBy=br.idiv=function(e){var t=this,r=t.constructor;return Ca(fh(t,new r(e),0,1),r.precision)};br.equals=br.eq=function(e){return!this.cmp(e)};br.exponent=function(){return uo(this)};br.greaterThan=br.gt=function(e){return this.cmp(e)>0};br.greaterThanOrEqualTo=br.gte=function(e){return this.cmp(e)>=0};br.isInteger=br.isint=function(){return this.e>this.d.length-2};br.isNegative=br.isneg=function(){return this.s<0};br.isPositive=br.ispos=function(){return this.s>0};br.isZero=function(){return this.s===0};br.lessThan=br.lt=function(e){return this.cmp(e)<0};br.lessThanOrEqualTo=br.lte=function(e){return this.cmp(e)<1};br.logarithm=br.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(dc))throw Error(ru+"NaN");if(r.s<1)throw Error(ru+(r.s?"NaN":"-Infinity"));return r.eq(dc)?new n(0):(ai=!1,t=fh(Ax(r,i),Ax(e,i),i),ai=!0,Ca(t,a))};br.minus=br.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kJ(t,e):AJ(t,(e.s=-e.s,e))};br.modulo=br.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ru+"NaN");return r.s?(ai=!1,t=fh(r,e,0,1).times(e),ai=!0,r.minus(t)):Ca(new n(r),a)};br.naturalExponential=br.exp=function(){return NJ(this)};br.naturalLogarithm=br.ln=function(){return Ax(this)};br.negated=br.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};br.plus=br.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AJ(t,e):kJ(t,(e.s=-e.s,e))};br.precision=br.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(U0+e);if(t=uo(a)+1,n=a.d.length-1,r=n*Ka+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};br.squareRoot=br.sqrt=function(){var e,t,r,n,a,i,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(ru+"NaN")}for(e=uo(s),ai=!1,a=Math.sqrt(+s),a==0||a==1/0?(t=Hd(s.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=xy((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(a.toString()),r=l.precision,a=o=r+3;;)if(i=n,n=i.plus(fh(s,i,o+2)).times(.5),Hd(i.d).slice(0,o)===(t=Hd(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ca(i,r+1,0),i.times(i).eq(s)){n=i;break}}else if(t!="9999")break;o+=4}return ai=!0,Ca(n,r)};br.times=br.mul=function(e){var t,r,n,a,i,o,s,l,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=m.length,l<u&&(i=h,h=m,m=i,o=l,l=u,u=o),i=[],o=l+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=l+n;a>n;)s=i[a]+m[n]*h[a-n-1]+t,i[a--]=s%Ro|0,t=s/Ro|0;i[a]=(i[a]+t)%Ro|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ai?Ca(e,f.precision):e};br.toDecimalPlaces=br.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(cf(e,0,yy),t===void 0?t=n.rounding:cf(t,0,8),Ca(r,e+uo(r)+1,t))};br.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ag(n,!0):(cf(e,0,yy),t===void 0?t=a.rounding:cf(t,0,8),n=Ca(new a(n),e+1,t),r=ag(n,!0,e+1)),r};br.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ag(a):(cf(e,0,yy),t===void 0?t=i.rounding:cf(t,0,8),n=Ca(new i(a),e+uo(a)+1,t),r=ag(n.abs(),!1,e+uo(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};br.toInteger=br.toint=function(){var e=this,t=e.constructor;return Ca(new t(e),uo(e)+1,t.rounding)};br.toNumber=function(){return+this};br.toPower=br.pow=function(e){var t,r,n,a,i,o,s=this,l=s.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(dc);if(s=new l(s),!s.s){if(e.s<1)throw Error(ru+"Infinity");return s}if(s.eq(dc))return s;if(n=l.precision,e.eq(dc))return Ca(s,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=s.s,o){if((r=d<0?-d:d)<=SJ){for(a=new l(dc),t=Math.ceil(n/Ka+4),ai=!1;r%2&&(a=a.times(s),QB(a.d,t)),r=xy(r/2),r!==0;)s=s.times(s),QB(s.d,t);return ai=!0,e.s<0?new l(dc).div(a):Ca(a,n)}}else if(i<0)throw Error(ru+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,ai=!1,a=e.times(Ax(s,n+u)),ai=!0,a=NJ(a),a.s=i,a};br.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=uo(a),n=ag(a,r<=i.toExpNeg||r>=i.toExpPos)):(cf(e,1,yy),t===void 0?t=i.rounding:cf(t,0,8),a=Ca(new i(a),e,t),r=uo(a),n=ag(a,e<=r||r<=i.toExpNeg,e)),n};br.toSignificantDigits=br.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(cf(e,1,yy),t===void 0?t=n.rounding:cf(t,0,8)),Ca(new n(r),e,t)};br.toString=br.valueOf=br.val=br.toJSON=br[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=uo(e),r=e.constructor;return ag(e,t<=r.toExpNeg||t>=r.toExpPos)};function AJ(e,t){var r,n,a,i,o,s,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ai?Ca(t,f):t;if(l=e.d,u=t.d,o=e.e,a=t.e,l=l.slice(),i=o-a,i){for(i<0?(n=l,i=-i,s=u.length):(n=u,a=o,s=l.length),o=Math.ceil(f/Ka),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=u.length,s-i<0&&(i=s,n=u,u=l,l=n),r=0;i;)r=(l[--i]=l[i]+u[i]+r)/Ro|0,l[i]%=Ro;for(r&&(l.unshift(r),++a),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=a,ai?Ca(t,f):t}function cf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(U0+e)}function Hd(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ka-n.length,r&&(i+=qp(r)),i+=n;o=e[t],n=o+"",r=Ka-n.length,r&&(i+=qp(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var fh=function(){function e(n,a){var i,o=0,s=n.length;for(n=n.slice();s--;)i=n[s]*a+o,n[s]=i%Ro|0,o=i/Ro|0;return o&&n.unshift(o),n}function t(n,a,i,o){var s,l;if(i!=o)l=i>o?1:-1;else for(s=l=0;s<i;s++)if(n[s]!=a[s]){l=n[s]>a[s]?1:-1;break}return l}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Ro+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var s,l,u,d,f,h,m,x,g,y,_,b,S,C,E,O,T,M,L=n.constructor,z=n.s==a.s?1:-1,P=n.d,R=a.d;if(!n.s)return new L(n);if(!a.s)throw Error(ru+"Division by zero");for(l=n.e-a.e,T=R.length,E=P.length,m=new L(z),x=m.d=[],u=0;R[u]==(P[u]||0);)++u;if(R[u]>(P[u]||0)&&--l,i==null?b=i=L.precision:o?b=i+(uo(n)-uo(a))+1:b=i,b<0)return new L(0);if(b=b/Ka+2|0,u=0,T==1)for(d=0,R=R[0],b++;(u<E||d)&&b--;u++)S=d*Ro+(P[u]||0),x[u]=S/R|0,d=S%R|0;else{for(d=Ro/(R[0]+1)|0,d>1&&(R=e(R,d),P=e(P,d),T=R.length,E=P.length),C=T,g=P.slice(0,T),y=g.length;y<T;)g[y++]=0;M=R.slice(),M.unshift(0),O=R[0],R[1]>=Ro/2&&++O;do d=0,s=t(R,g,T,y),s<0?(_=g[0],T!=y&&(_=_*Ro+(g[1]||0)),d=_/O|0,d>1?(d>=Ro&&(d=Ro-1),f=e(R,d),h=f.length,y=g.length,s=t(f,g,h,y),s==1&&(d--,r(f,T<h?M:R,h))):(d==0&&(s=d=1),f=R.slice()),h=f.length,h<y&&f.unshift(0),r(g,f,y),s==-1&&(y=g.length,s=t(R,g,T,y),s<1&&(d++,r(g,T<y?M:R,y))),y=g.length):s===0&&(d++,g=[0]),x[u++]=d,s&&g[0]?g[y++]=P[C]||0:(g=[P[C]],y=1);while((C++<E||g[0]!==void 0)&&b--)}return x[0]||x.shift(),m.e=l,Ca(m,o?i+uo(m)+1:i)}}();function NJ(e,t){var r,n,a,i,o,s,l=0,u=0,d=e.constructor,f=d.precision;if(uo(e)>16)throw Error(TI+uo(e));if(!e.s)return new d(dc);for(ai=!1,s=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(N0(2,u))/Math.LN10*2+5|0,s+=n,r=a=i=new d(dc),d.precision=s;;){if(a=Ca(a.times(e),s),r=r.times(++l),o=i.plus(fh(a,r,s)),Hd(o.d).slice(0,s)===Hd(i.d).slice(0,s)){for(;u--;)i=Ca(i.times(i),s);return d.precision=f,t==null?(ai=!0,Ca(i,f)):i}i=o}}function uo(e){for(var t=e.e*Ka,r=e.d[0];r>=10;r/=10)t++;return t}function WC(e,t,r){if(t>e.LN10.sd())throw ai=!0,r&&(e.precision=r),Error(ru+"LN10 precision limit exceeded");return Ca(new e(e.LN10),t)}function qp(e){for(var t="";e--;)t+="0";return t}function Ax(e,t){var r,n,a,i,o,s,l,u,d,f=1,h=10,m=e,x=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(ru+(m.s?"NaN":"-Infinity"));if(m.eq(dc))return new g(0);if(t==null?(ai=!1,u=y):u=t,m.eq(10))return t==null&&(ai=!0),WC(g,u);if(u+=h,g.precision=u,r=Hd(x),n=r.charAt(0),i=uo(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Hd(m.d),n=r.charAt(0),f++;i=uo(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return l=WC(g,u+2,y).times(i+""),m=Ax(new g(n+"."+r.slice(1)),u-h).plus(l),g.precision=y,t==null?(ai=!0,Ca(m,y)):m;for(s=o=m=fh(m.minus(dc),m.plus(dc),u),d=Ca(m.times(m),u),a=3;;){if(o=Ca(o.times(d),u),l=s.plus(fh(o,new g(a),u)),Hd(l.d).slice(0,u)===Hd(s.d).slice(0,u))return s=s.times(2),i!==0&&(s=s.plus(WC(g,u+2,y).times(i+""))),s=fh(s,new g(f),u),g.precision=y,t==null?(ai=!0,Ca(s,y)):s;s=l,a+=2}}function JB(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=xy(r/Ka),e.d=[],n=(r+1)%Ka,r<0&&(n+=Ka),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ka;n<a;)e.d.push(+t.slice(n,n+=Ka));t=t.slice(n),n=Ka-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ai&&(e.e>V5||e.e<-V5))throw Error(TI+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ca(e,t,r){var n,a,i,o,s,l,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ka,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ka),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ka,a=n-Ka+o}if(r!==void 0&&(i=N0(10,o-a-1),s=u/i%10|0,l=t<0||f[d+1]!==void 0||u%i,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?a>0?u/N0(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(i=uo(e),f.length=1,t=t-i-1,f[0]=N0(10,(Ka-t%Ka)%Ka),e.e=xy(-t/Ka)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=N0(10,Ka-n),f[d]=a>0?(u/N0(10,o-a)%N0(10,a)|0)*i:0),l)for(;;)if(d==0){(f[0]+=i)==Ro&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Ro)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(ai&&(e.e>V5||e.e<-V5))throw Error(TI+uo(e));return e}function kJ(e,t){var r,n,a,i,o,s,l,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ai?Ca(t,m):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),o=u-n,o){for(d=o<0,d?(r=l,o=-o,s=f.length):(r=f,n=u,s=l.length),a=Math.max(Math.ceil(m/Ka),s)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=l.length,s=f.length,d=a<s,d&&(s=a),a=0;a<s;a++)if(l[a]!=f[a]){d=l[a]<f[a];break}o=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),s=l.length,a=f.length-s;a>0;--a)l[s++]=0;for(a=f.length;a>o;){if(l[--a]<f[a]){for(i=a;i&&l[--i]===0;)l[i]=Ro-1;--l[i],l[a]+=Ro}l[a]-=f[a]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,ai?Ca(t,m):t):new h(0)}function ag(e,t,r){var n,a=uo(e),i=Hd(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+qp(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+qp(-a-1)+i,r&&(n=r-o)>0&&(i+=qp(n))):a>=o?(i+=qp(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+qp(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=qp(n))),e.s<0?"-"+i:i}function QB(e,t){if(e.length>t)return e.length=t,!0}function EJ(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(U0+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return JB(o,i.toString())}else if(typeof i!="string")throw Error(U0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,p4e.test(i))JB(o,i);else throw Error(U0+i)}if(a.prototype=br,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=EJ,a.config=a.set=m4e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function m4e(e){if(!e||typeof e!="object")throw Error(ru+"Object expected");var t,r,n,a=["precision",1,yy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(xy(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(U0+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(U0+r+": "+n);return this}var OI=EJ(h4e);dc=new OI(1);const ba=OI;function g4e(e){return w4e(e)||x4e(e)||y4e(e)||v4e()}function v4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y4e(e,t){if(e){if(typeof e=="string")return W6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W6(e,t)}}function x4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function w4e(e){if(Array.isArray(e))return W6(e)}function W6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _4e=function(t){return t},CJ={},PJ=function(t){return t===CJ},eU=function(t){return function r(){return arguments.length===0||arguments.length===1&&PJ(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},b4e=function e(t,r){return t===1?r:eU(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(s){return s!==CJ}).length;return o>=t?r.apply(void 0,a):e(t-o,eU(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var d=a.map(function(f){return PJ(f)?l.shift():f});return r.apply(void 0,g4e(d).concat(l))}))})},t3=function(t){return b4e(t.length,t)},V6=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},S4e=t3(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),A4e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return _4e;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(s,l){return l(s)},i.apply(void 0,arguments))}},H6=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},TJ=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(s,l){return s===r[l]})||(r=i,n=t.apply(void 0,i)),n}};function N4e(e){var t;return e===0?t=1:t=Math.floor(new ba(e).abs().log(10).toNumber())+1,t}function k4e(e,t,r){for(var n=new ba(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var E4e=t3(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),C4e=t3(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),P4e=t3(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const r3={rangeStep:k4e,getDigitCount:N4e,interpolateNumber:E4e,uninterpolateNumber:C4e,uninterpolateTruncation:P4e};function G6(e){return D4e(e)||O4e(e)||OJ(e)||T4e()}function T4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function D4e(e){if(Array.isArray(e))return K6(e)}function Nx(e,t){return M4e(e)||R4e(e,t)||OJ(e,t)||I4e()}function I4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){if(e){if(typeof e=="string")return K6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K6(e,t)}}function K6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R4e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function M4e(e){if(Array.isArray(e))return e}function DJ(e){var t=Nx(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function IJ(e,t,r){if(e.lte(0))return new ba(0);var n=r3.getDigitCount(e.toNumber()),a=new ba(10).pow(n),i=e.div(a),o=n!==1?.05:.1,s=new ba(Math.ceil(i.div(o).toNumber())).add(r).mul(o),l=s.mul(a);return t?l:new ba(Math.ceil(l))}function F4e(e,t,r){var n=1,a=new ba(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ba(10).pow(r3.getDigitCount(e)-1),a=new ba(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ba(Math.floor(e)))}else e===0?a=new ba(Math.floor((t-1)/2)):r||(a=new ba(Math.floor(e)));var o=Math.floor((t-1)/2),s=A4e(S4e(function(l){return a.add(new ba(l-o).mul(n)).toNumber()}),V6);return s(0,t)}function RJ(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new ba(0),tickMin:new ba(0),tickMax:new ba(0)};var i=IJ(new ba(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new ba(0):(o=new ba(e).add(t).div(2),o=o.sub(new ba(o).mod(i)));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new ba(t).sub(o).div(i).toNumber()),u=s+l+1;return u>r?RJ(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:i,tickMin:o.sub(new ba(s).mul(i)),tickMax:o.add(new ba(l).mul(i))})}function L4e(e){var t=Nx(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),s=DJ([r,n]),l=Nx(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(G6(V6(0,a-1).map(function(){return 1/0}))):[].concat(G6(V6(0,a-1).map(function(){return-1/0})),[d]);return r>n?H6(f):f}if(u===d)return F4e(u,a,i);var h=RJ(u,d,o,i),m=h.step,x=h.tickMin,g=h.tickMax,y=r3.rangeStep(x,g.add(new ba(.1).mul(m)),m);return r>n?H6(y):y}function j4e(e,t){var r=Nx(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=DJ([n,a]),s=Nx(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,a];if(l===u)return[l];var d=Math.max(t,2),f=IJ(new ba(u).sub(l).div(d-1),i,0),h=[].concat(G6(r3.rangeStep(new ba(l),new ba(u).sub(new ba(.99).mul(f)),f)),[u]);return n>a?H6(h):h}var $4e=TJ(L4e),B4e=TJ(j4e),U4e="Invariant failed";function ig(e,t){throw new Error(U4e)}var q4e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function P1(e){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P1(e)}function H5(){return H5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H5.apply(this,arguments)}function z4e(e,t){return G4e(e)||H4e(e,t)||V4e(e,t)||W4e()}function W4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4e(e,t){if(e){if(typeof e=="string")return tU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tU(e,t)}}function tU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function G4e(e){if(Array.isArray(e))return e}function K4e(e,t){if(e==null)return{};var r=Y4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function X4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LJ(n.key),n)}}function J4e(e,t,r){return t&&Z4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q4e(e,t,r){return t=G5(t),e3e(e,MJ()?Reflect.construct(t,r||[],G5(e).constructor):t.apply(e,r))}function e3e(e,t){if(t&&(P1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t3e(e)}function t3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MJ=function(){return!!e})()}function G5(e){return G5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G5(e)}function r3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y6(e,t)}function Y6(e,t){return Y6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Y6(e,t)}function FJ(e,t,r){return t=LJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=n3e(e,"string");return P1(t)=="symbol"?t:t+""}function n3e(e,t){if(P1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(P1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ww=function(e){function t(){return X4e(this,t),Q4e(this,t,arguments)}return r3e(t,e),J4e(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=K4e(n,q4e),m=Or(h,!1);this.props.direction==="x"&&d.type!=="number"&&ig();var x=l.map(function(g){var y=u(g,s),_=y.x,b=y.y,S=y.value,C=y.errorVal;if(!C)return null;var E=[],O,T;if(Array.isArray(C)){var M=z4e(C,2);O=M[0],T=M[1]}else O=T=C;if(i==="vertical"){var L=d.scale,z=b+a,P=z+o,R=z-o,j=L(S-O),V=L(S+T);E.push({x1:V,y1:P,x2:V,y2:R}),E.push({x1:j,y1:z,x2:V,y2:z}),E.push({x1:j,y1:P,x2:j,y2:R})}else if(i==="horizontal"){var Z=f.scale,te=_+a,q=te-o,Y=te+o,U=Z(S-O),G=Z(S+T);E.push({x1:q,y1:G,x2:Y,y2:G}),E.push({x1:te,y1:U,x2:te,y2:G}),E.push({x1:q,y1:U,x2:Y,y2:U})}return tt.createElement(Dn,H5({className:"recharts-errorBar",key:"bar-".concat(E.map(function(J){return"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))},m),E.map(function(J){return tt.createElement("line",H5({},J,{key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)}))}))});return tt.createElement(Dn,{className:"recharts-errorBars"},x)}}])}(tt.Component);FJ(Ww,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});FJ(Ww,"displayName","ErrorBar");function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function rU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rU(Object(r),!0).forEach(function(n){a3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a3e(e,t,r){return t=i3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i3e(e){var t=o3e(e,"string");return kx(t)=="symbol"?t:t+""}function o3e(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jJ=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ac(r,Ku);if(!o)return null;var s=Ku.defaultProps,l=s!==void 0?y0(y0({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,x=m.sectors||m.data||[];return d.concat(x.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?y0(y0({},h),f.props):{},x=m.dataKey,g=m.name,y=m.legendType,_=m.hide;return{inactive:_,dataKey:x,type:l.iconType||y||"square",color:DI(f),value:g||x,payload:m}}),y0(y0(y0({},l),Ku.getWithHeight(o,a)),{},{payload:u,item:o})};function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}function nU(e){return u3e(e)||c3e(e)||l3e(e)||s3e()}function s3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l3e(e,t){if(e){if(typeof e=="string")return X6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X6(e,t)}}function c3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u3e(e){if(Array.isArray(e))return X6(e)}function X6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aU(Object(r),!0).forEach(function(n){r1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r1(e,t,r){return t=d3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d3e(e){var t=f3e(e,"string");return Ex(t)=="symbol"?t:t+""}function f3e(e,t){if(Ex(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ex(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wi(e,t,r){return dn(e)||dn(t)?r:wo(t)?vc(e,t,r):Yr(t)?t(e):r}function $2(e,t,r,n){var a=u4e(e,function(s){return Wi(s,t)});if(r==="number"){var i=a.filter(function(s){return Kt(s)||parseFloat(s)});return i.length?[e3(i),Kp(i)]:[1/0,-1/0]}var o=n?a.filter(function(s){return!dn(s)}):a;return o.map(function(s){return wo(s)||s instanceof Date?s:""})}var h3e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var l=i.range,u=0;u<s;u++){var d=u>0?a[u-1].coordinate:a[s-1].coordinate,f=a[u].coordinate,h=u>=s-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(ll(f-d)!==ll(h-f)){var x=[];if(ll(h-f)===ll(l[1]-l[0])){m=h;var g=f+l[1]-l[0];x[0]=Math.min(g,(g+d)/2),x[1]=Math.max(g,(g+d)/2)}else{m=d;var y=h+l[1]-l[0];x[0]=Math.min(f,(y+f)/2),x[1]=Math.max(f,(y+f)/2)}var _=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>_[0]&&t<=_[1]||t>=x[0]&&t<=x[1]){o=a[u].index;break}}else{var b=Math.min(d,h),S=Math.max(d,h);if(t>(b+f)/2&&t<=(S+f)/2){o=a[u].index;break}}}else for(var C=0;C<s;C++)if(C===0&&t<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<s-1&&t>(n[C].coordinate+n[C-1].coordinate)/2&&t<=(n[C].coordinate+n[C+1].coordinate)/2||C===s-1&&t>(n[C].coordinate+n[C-1].coordinate)/2){o=n[C].index;break}return o},DI=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ki(ki({},t.type.defaultProps),t.props):t.props,o=i.stroke,s=i.fill,l;switch(a){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},p3e=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},s=Object.keys(i),l=0,u=s.length;l<u;l++)for(var d=i[s[l]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var x=d[f[h]],g=x.items,y=x.cateAxisId,_=g.filter(function(T){return dh(T.type).indexOf("Bar")>=0});if(_&&_.length){var b=_[0].type.defaultProps,S=b!==void 0?ki(ki({},b),_[0].props):_[0].props,C=S.barSize,E=S[y];o[E]||(o[E]=[]);var O=dn(C)?r:C;o[E].push({item:_[0],stackList:_.slice(1),barSize:dn(O)?void 0:cl(O,n,0)})}}return o},m3e=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,s=t.maxBarSize,l=o.length;if(l<1)return null;var u=cl(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/l,x=o.reduce(function(C,E){return C+E.barSize||0},0);x+=(l-1)*u,x>=a&&(x-=(l-1)*u,u=0),x>=a&&m>0&&(h=!0,m*=.9,x=l*m);var g=(a-x)/2>>0,y={offset:g-u,size:0};d=o.reduce(function(C,E){var O={item:E.item,position:{offset:y.offset+y.size+u,size:h?m:E.barSize}},T=[].concat(nU(C),[O]);return y=T[T.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(M){T.push({item:M,position:y})}),T},f)}else{var _=cl(n,a,0,!0);a-2*_-(l-1)*u<=0&&(u=0);var b=(a-2*_-(l-1)*u)/l;b>1&&(b>>=0);var S=s===+s?Math.min(b,s):b;d=o.reduce(function(C,E,O){var T=[].concat(nU(C),[{item:E.item,position:{offset:_+(b+u)*O+(b-S)/2,size:S}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(M){T.push({item:M,position:T[T.length-1].position})}),T},f)}return d},g3e=function(t,r,n,a){var i=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=jJ({children:i,legendWidth:l});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,x=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&x==="middle")&&m!=="center"&&Kt(t[m]))return ki(ki({},t),{},r1({},m,t[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&x!=="middle"&&Kt(t[x]))return ki(ki({},t),{},r1({},x,t[x]+(h||0)))}return t},v3e=function(t,r,n){return dn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},$J=function(t,r,n,a,i){var o=r.props.children,s=yc(o,Ww).filter(function(u){return v3e(a,i,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Wi(d,n);if(dn(f))return u;var h=Array.isArray(f)?[e3(f),Kp(f)]:[f,f],m=l.reduce(function(x,g){var y=Wi(d,g,0),_=h[0]-Math.abs(Array.isArray(y)?y[0]:y),b=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(_,x[0]),Math.max(b,x[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},y3e=function(t,r,n,a,i){var o=r.map(function(s){return $J(t,s,n,i,a)}).filter(function(s){return!dn(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},BJ=function(t,r,n,a,i){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&$J(t,l,u,a)||$2(t,u,n,i)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)s[u[d]]||(s[u[d]]=!0,l.push(u[d]));return l},[])},UJ=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},qJ=function(t,r,n,a){if(a)return t.map(function(l){return l.coordinate});var i,o,s=t.map(function(l){return l.coordinate===r&&(i=!0),l.coordinate===n&&(o=!0),l.coordinate});return i||s.push(r),o||s.push(n),s},sh=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,s=t.range,l=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ll(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!my(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},VC=new WeakMap,pb=function(t,r){if(typeof r!="function")return t;VC.has(t)||VC.set(t,new WeakMap);var n=VC.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},zJ=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,s=t.axisType;if(a==="auto")return o==="radial"&&s==="radiusAxis"?{scale:xx(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:U5(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:j2(),realScaleType:"point"}:i==="category"?{scale:xx(),realScaleType:"band"}:{scale:U5(),realScaleType:"linear"};if(eg(a)){var l="scale".concat(B4(a));return{scale:(zB[l]||j2)(),realScaleType:zB[l]?l:"point"}}return Yr(a)?{scale:a}:{scale:j2(),realScaleType:"point"}},iU=1e-4,WJ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-iU,o=Math.max(a[0],a[1])+iU,s=t(r[0]),l=t(r[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([r[0],r[n-1]])}},x3e=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},w3e=function(t,r){if(!r||r.length!==2||!Kt(r[0])||!Kt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Kt(t[0])||t[0]<n)&&(i[0]=n),(!Kt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},_3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,s=0;s<r;++s){var l=my(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},b3e=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var s=my(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},S3e={sign:_3e,expand:uxe,none:_1,silhouette:dxe,wiggle:fxe,positive:b3e},A3e=function(t,r,n){var a=r.map(function(s){return s.props.dataKey}),i=S3e[n],o=cxe().keys(a).value(function(s,l){return+Wi(s,l,0)}).order(C6).offset(i);return o(t)},N3e=function(t,r,n,a,i,o){if(!t)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(f,h){var m,x=(m=h.type)!==null&&m!==void 0&&m.defaultProps?ki(ki({},h.type.defaultProps),h.props):h.props,g=x.stackId,y=x.hide;if(y)return f;var _=x[n],b=f[_]||{hasStack:!1,stackGroups:{}};if(wo(g)){var S=b.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};S.items.push(h),b.hasStack=!0,b.stackGroups[g]=S}else b.stackGroups[kg("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return ki(ki({},f),{},r1({},_,b))},l),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var x={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,y){var _=m.stackGroups[y];return ki(ki({},g),{},r1({},y,{numericAxisId:n,cateAxisId:a,items:_.items,stackedData:A3e(t,_.items,i)}))},x)}return ki(ki({},f),{},r1({},h,m))},d)},VJ=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=$4e(u,i,s);return t.domain([e3(d),Kp(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=B4e(f,i,s);return{niceTicks:h}}return null};function K5(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!dn(a[t.dataKey])){var s=S5(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var l=Wi(a,dn(o)?t.dataKey:o);return dn(l)?null:t.scale(l)}var oU=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+a:null;var l=Wi(o,r.dataKey,r.domain[s]);return dn(l)?null:r.scale(l)-i/2+a},k3e=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},E3e=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ki(ki({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(wo(i)){var o=r[i];if(o){var s=o.items.indexOf(t);return s>=0?o.stackedData[s]:null}}return null},C3e=function(t){return t.reduce(function(r,n){return[e3(n.concat([r[0]]).filter(Kt)),Kp(n.concat([r[1]]).filter(Kt))]},[1/0,-1/0])},HJ=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],s=o.stackedData,l=s.reduce(function(u,d){var f=C3e(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},sU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z6=function(t,r,n){if(Yr(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Kt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(sU.test(t[0])){var i=+sU.exec(t[0])[1];a[0]=r[0]-i}else Yr(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Kt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(lU.test(t[1])){var o=+lU.exec(t[1])[1];a[1]=r[1]+o}else Yr(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Y5=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=oI(r,function(f){return f.coordinate}),o=1/0,s=1,l=i.length;s<l;s++){var u=i[s],d=i[s-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},cU=function(t,r,n){return!t||!t.length||ng(t,vc(n,"type.defaultProps.domain"))?r:t},GJ=function(t,r){var n=t.type.defaultProps?ki(ki({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return ki(ki({},Or(t,!1)),{},{dataKey:a,unit:o,formatter:s,name:i||a,color:DI(t),value:Wi(r,a),type:l,payload:r,chartType:u,hide:d})};function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function uU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(r),!0).forEach(function(n){KJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KJ(e,t,r){return t=P3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P3e(e){var t=T3e(e,"string");return Cx(t)=="symbol"?t:t+""}function T3e(e,t){if(Cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O3e(e,t){return M3e(e)||R3e(e,t)||I3e(e,t)||D3e()}function D3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I3e(e,t){if(e){if(typeof e=="string")return dU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dU(e,t)}}function dU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R3e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function M3e(e){if(Array.isArray(e))return e}var X5=Math.PI/180,F3e=function(t){return t*180/Math.PI},La=function(t,r,n,a){return{x:t+Math.cos(-X5*a)*n,y:r+Math.sin(-X5*a)*n}},YJ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},L3e=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.startAngle,u=t.endAngle,d=cl(t.cx,o,o/2),f=cl(t.cy,s,s/2),h=YJ(o,s,n),m=cl(t.innerRadius,h,0),x=cl(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(y,_){var b=r[_],S=b.domain,C=b.reversed,E;if(dn(b.range))a==="angleAxis"?E=[l,u]:a==="radiusAxis"&&(E=[m,x]),C&&(E=[E[1],E[0]]);else{E=b.range;var O=E,T=O3e(O,2);l=T[0],u=T[1]}var M=zJ(b,i),L=M.realScaleType,z=M.scale;z.domain(S).range(E),WJ(z);var P=VJ(z,rh(rh({},b),{},{realScaleType:L})),R=rh(rh(rh({},b),P),{},{range:E,radius:x,realScaleType:L,scale:z,cx:d,cy:f,innerRadius:m,outerRadius:x,startAngle:l,endAngle:u});return rh(rh({},y),{},KJ({},_,R))},{})},j3e=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},$3e=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,s=j3e({x:n,y:a},{x:i,y:o});if(s<=0)return{radius:s};var l=(n-i)/s,u=Math.acos(l);return a>o&&(u=2*Math.PI-u),{radius:s,angle:F3e(u),angleInRadian:u}},B3e=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},U3e=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),s=Math.min(i,o);return t+s*360},fU=function(t,r){var n=t.x,a=t.y,i=$3e({x:n,y:a},r),o=i.radius,s=i.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var d=B3e(r),f=d.startAngle,h=d.endAngle,m=s,x;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;x=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;x=m>=h&&m<=f}return x?rh(rh({},r),{},{radius:o,angle:U3e(m,r)}):null},XJ=function(t){return!A.isValidElement(t)&&!Yr(t)&&typeof t!="boolean"?t.className:""};function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}var q3e=["offset"];function z3e(e){return G3e(e)||H3e(e)||V3e(e)||W3e()}function W3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V3e(e,t){if(e){if(typeof e=="string")return J6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J6(e,t)}}function H3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G3e(e){if(Array.isArray(e))return J6(e)}function J6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K3e(e,t){if(e==null)return{};var r=Y3e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hU(Object(r),!0).forEach(function(n){X3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X3e(e,t,r){return t=Z3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z3e(e){var t=J3e(e,"string");return Px(t)=="symbol"?t:t+""}function J3e(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q3e=function(t){var r=t.value,n=t.formatter,a=dn(t.children)?r:t.children;return Yr(n)?n(a):a},eAe=function(t,r){var n=ll(r-t),a=Math.min(Math.abs(r-t),360);return n*a},tAe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,s=t.className,l=i,u=l.cx,d=l.cy,f=l.innerRadius,h=l.outerRadius,m=l.startAngle,x=l.endAngle,g=l.clockWise,y=(f+h)/2,_=eAe(m,x),b=_>=0?1:-1,S,C;a==="insideStart"?(S=m+b*o,C=g):a==="insideEnd"?(S=x-b*o,C=!g):a==="end"&&(S=x+b*o,C=g),C=_<=0?C:!C;var E=La(u,d,y,S),O=La(u,d,y,S+(C?1:-1)*359),T="M".concat(E.x,",").concat(E.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(O.x,",").concat(O.y),M=dn(t.id)?kg("recharts-radial-line-"):t.id;return w("text",{...n,dominantBaseline:"central",className:fn("recharts-radial-bar-label",s),children:[c("defs",{children:c("path",{id:M,d:T})}),c("textPath",{xlinkHref:"#".concat(M),children:r})]})},rAe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,s=i.cy,l=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=La(o,s,u+n,h),x=m.x,g=m.y;return{x,y:g,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+u)/2,_=La(o,s,y,h),b=_.x,S=_.y;return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},nAe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,s=o.x,l=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",x=f>0?"start":"end",g=u>=0?1:-1,y=g*a,_=g>0?"end":"start",b=g>0?"start":"end";if(i==="top"){var S={x:s+u/2,y:l-f*a,textAnchor:"middle",verticalAnchor:m};return vo(vo({},S),n?{height:Math.max(l-n.y,0),width:u}:{})}if(i==="bottom"){var C={x:s+u/2,y:l+d+h,textAnchor:"middle",verticalAnchor:x};return vo(vo({},C),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(i==="left"){var E={x:s-y,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return vo(vo({},E),n?{width:Math.max(E.x-n.x,0),height:d}:{})}if(i==="right"){var O={x:s+u+y,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return vo(vo({},O),n?{width:Math.max(n.x+n.width-O.x,0),height:d}:{})}var T=n?{width:u,height:d}:{};return i==="insideLeft"?vo({x:s+y,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},T):i==="insideRight"?vo({x:s+u-y,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},T):i==="insideTop"?vo({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:x},T):i==="insideBottom"?vo({x:s+u/2,y:l+d-h,textAnchor:"middle",verticalAnchor:m},T):i==="insideTopLeft"?vo({x:s+y,y:l+h,textAnchor:b,verticalAnchor:x},T):i==="insideTopRight"?vo({x:s+u-y,y:l+h,textAnchor:_,verticalAnchor:x},T):i==="insideBottomLeft"?vo({x:s+y,y:l+d-h,textAnchor:b,verticalAnchor:m},T):i==="insideBottomRight"?vo({x:s+u-y,y:l+d-h,textAnchor:_,verticalAnchor:m},T):py(i)&&(Kt(i.x)||I0(i.x))&&(Kt(i.y)||I0(i.y))?vo({x:s+cl(i.x,u),y:l+cl(i.y,d),textAnchor:"end",verticalAnchor:"end"},T):vo({x:s+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},T)},aAe=function(t){return"cx"in t&&Kt(t.cx)};function jo(e){var t=e.offset,r=t===void 0?5:t,n=K3e(e,q3e),a=vo({offset:r},n),i=a.viewBox,o=a.position,s=a.value,l=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||dn(s)&&dn(l)&&!A.isValidElement(u)&&!Yr(u))return null;if(A.isValidElement(u))return A.cloneElement(u,a);var m;if(Yr(u)){if(m=A.createElement(u,a),A.isValidElement(m))return m}else m=Q3e(a);var x=aAe(i),g=Or(a,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return tAe(a,m,g);var y=x?rAe(a):nAe(a);return c(rg,{className:fn("recharts-label",f),...g,...y,breakAll:h,children:m})}jo.displayName="Label";var ZJ=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,x=t.left,g=t.width,y=t.height,_=t.clockWise,b=t.labelViewBox;if(b)return b;if(Kt(g)&&Kt(y)){if(Kt(f)&&Kt(h))return{x:f,y:h,width:g,height:y};if(Kt(m)&&Kt(x))return{x:m,y:x,width:g,height:y}}return Kt(f)&&Kt(h)?{x:f,y:h,width:0,height:0}:Kt(r)&&Kt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||l||s||0,clockWise:_}:t.viewBox?t.viewBox:{}},iAe=function(t,r){return t?t===!0?c(jo,{viewBox:r},"label-implicit"):wo(t)?c(jo,{viewBox:r,value:t},"label-implicit"):A.isValidElement(t)?t.type===jo?A.cloneElement(t,{key:"label-implicit",viewBox:r}):c(jo,{content:t,viewBox:r},"label-implicit"):Yr(t)?c(jo,{content:t,viewBox:r},"label-implicit"):py(t)?A.createElement(jo,{viewBox:r,...t,key:"label-implicit"}):null:null},oAe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=ZJ(t),o=yc(a,jo).map(function(l,u){return A.cloneElement(l,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var s=iAe(t.label,r||i);return[s].concat(z3e(o))};jo.parseViewBox=ZJ;jo.renderCallByParent=oAe;var HC,pU;function sAe(){if(pU)return HC;pU=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return HC=e,HC}var lAe=sAe();const cAe=ia(lAe);function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}var uAe=["valueAccessor"],dAe=["data","dataKey","clockWise","id","textBreakAll"];function fAe(e){return gAe(e)||mAe(e)||pAe(e)||hAe()}function hAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pAe(e,t){if(e){if(typeof e=="string")return Q6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q6(e,t)}}function mAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gAe(e){if(Array.isArray(e))return Q6(e)}function Q6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mU(Object(r),!0).forEach(function(n){vAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vAe(e,t,r){return t=yAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yAe(e){var t=xAe(e,"string");return Tx(t)=="symbol"?t:t+""}function xAe(e,t){if(Tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vU(e,t){if(e==null)return{};var r=wAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _Ae=function(t){return Array.isArray(t.value)?cAe(t.value):t.value};function ef(e){var t=e.valueAccessor,r=t===void 0?_Ae:t,n=vU(e,uAe),a=n.data,i=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=vU(n,dAe);return!a||!a.length?null:c(Dn,{className:"recharts-label-list",children:a.map(function(d,f){var h=dn(i)?r(d,f):Wi(d&&d.payload,i),m=dn(s)?{}:{id:"".concat(s,"-").concat(f)};return A.createElement(jo,{...Or(d,!0),...u,...m,parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:jo.parseViewBox(dn(o)?d:gU(gU({},d),{},{clockWise:o})),key:"label-".concat(f),index:f})})})}ef.displayName="LabelList";function bAe(e,t){return e?e===!0?c(ef,{data:t},"labelList-implicit"):tt.isValidElement(e)||Yr(e)?c(ef,{data:t,content:e},"labelList-implicit"):py(e)?A.createElement(ef,{data:t,...e,key:"labelList-implicit"}):null:null}function SAe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=yc(n,ef).map(function(o,s){return A.cloneElement(o,{data:t,key:"labelList-".concat(s)})});if(!r)return a;var i=bAe(e.label,t);return[i].concat(fAe(a))}ef.renderCallByParent=SAe;function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eO.apply(this,arguments)}function yU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yU(Object(r),!0).forEach(function(n){AAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AAe(e,t,r){return t=NAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NAe(e){var t=kAe(e,"string");return Ox(t)=="symbol"?t:t+""}function kAe(e,t){if(Ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EAe=function(t,r){var n=ll(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},mb=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(s?1:-1)+a,f=Math.asin(l/d)/X5,h=u?i:i+o*f,m=La(r,n,d,h),x=La(r,n,a,h),g=u?i-o*f:i,y=La(r,n,d*Math.cos(f*X5),g);return{center:m,circleTangency:x,lineTangency:y,theta:f}},JJ=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,s=t.endAngle,l=EAe(o,s),u=o+l,d=La(r,n,i,o),f=La(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=La(r,n,a,o),x=La(r,n,a,u);h+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},CAe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=ll(d-u),h=mb({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:l}),m=h.circleTangency,x=h.lineTangency,g=h.theta,y=mb({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:l}),_=y.circleTangency,b=y.lineTangency,S=y.theta,C=l?Math.abs(u-d):Math.abs(u-d)-g-S;if(C<0)return s?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):JJ({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var E="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var O=mb({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),T=O.circleTangency,M=O.lineTangency,L=O.theta,z=mb({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),P=z.circleTangency,R=z.lineTangency,j=z.theta,V=l?Math.abs(u-d):Math.abs(u-d)-L-j;if(V<0&&o===0)return"".concat(E,"L").concat(r,",").concat(n,"Z");E+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(V>180),",").concat(+(f>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(M.x,",").concat(M.y,"Z")}else E+="L".concat(r,",").concat(n,"Z");return E},PAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QJ=function(t){var r=xU(xU({},PAe),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=fn("recharts-sector",h),x=o-i,g=cl(s,x,0,!0),y;return g>0&&Math.abs(d-f)<360?y=CAe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,x/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):y=JJ({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),tt.createElement("path",eO({},Or(r,!0),{className:m,d:y,role:"img"}))};function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tO.apply(this,arguments)}function wU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(r),!0).forEach(function(n){TAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TAe(e,t,r){return t=OAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OAe(e){var t=DAe(e,"string");return Dx(t)=="symbol"?t:t+""}function DAe(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bU={curveBasisClosed:J2e,curveBasisOpen:Q2e,curveBasis:Z2e,curveBumpX:L2e,curveBumpY:j2e,curveLinearClosed:exe,curveLinear:q4,curveMonotoneX:txe,curveMonotoneY:rxe,curveNatural:nxe,curveStep:axe,curveStepAfter:oxe,curveStepBefore:ixe},gb=function(t){return t.x===+t.x&&t.y===+t.y},o2=function(t){return t.x},s2=function(t){return t.y},IAe=function(t,r){if(Yr(t))return t;var n="curve".concat(B4(t));return(n==="curveMonotone"||n==="curveBump")&&r?bU["".concat(n).concat(r==="vertical"?"Y":"X")]:bU[n]||q4},RAe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=IAe(n,s),f=u?i.filter(function(g){return gb(g)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(g){return gb(g)}):o,x=f.map(function(g,y){return _U(_U({},g),{},{base:m[y]})});return s==="vertical"?h=sb().y(s2).x1(o2).x0(function(g){return g.base.x}):h=sb().x(o2).y1(s2).y0(function(g){return g.base.y}),h.defined(gb).curve(d),h(x)}return s==="vertical"&&Kt(o)?h=sb().y(s2).x1(o2).x0(o):Kt(o)?h=sb().x(o2).y1(s2).y0(o):h=ZX().x(o2).y(s2),h.defined(gb).curve(d),h(f)},q0=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?RAe(t):a;return tt.createElement("path",tO({},Or(t,!1),A5(t),{className:fn("recharts-curve",r),d:o,ref:i}))},GC={exports:{}},KC,SU;function MAe(){if(SU)return KC;SU=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return KC=e,KC}var YC,AU;function FAe(){if(AU)return YC;AU=1;var e=MAe();function t(){}function r(){}return r.resetWarningCache=t,YC=function(){function n(o,s,l,u,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},YC}var NU;function LAe(){return NU||(NU=1,GC.exports=FAe()()),GC.exports}var jAe=LAe();const ua=ia(jAe);var $Ae=Object.getOwnPropertyNames,BAe=Object.getOwnPropertySymbols,UAe=Object.prototype.hasOwnProperty;function kU(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function vb(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),s=i.get(n);if(o&&s)return o===n&&s===r;i.set(r,n),i.set(n,r);var l=e(r,n,a);return i.delete(r),i.delete(n),l}}function EU(e){return $Ae(e).concat(BAe(e))}var qAe=Object.hasOwn||function(e,t){return UAe.call(e,t)};function Pg(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var zAe="__v",WAe="__o",VAe="_owner",CU=Object.getOwnPropertyDescriptor,PU=Object.keys;function HAe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function GAe(e,t){return Pg(e.getTime(),t.getTime())}function KAe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function YAe(e,t){return e===t}function TU(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,s,l=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(s=u.next())&&!s.done;){if(a[f]){f++;continue}var h=o.value,m=s.value;if(r.equals(h[0],m[0],l,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;l++}return!0}var XAe=Pg;function ZAe(e,t,r){var n=PU(e),a=n.length;if(PU(t).length!==a)return!1;for(;a-- >0;)if(!eQ(e,t,r,n[a]))return!1;return!0}function l2(e,t,r){var n=EU(e),a=n.length;if(EU(t).length!==a)return!1;for(var i,o,s;a-- >0;)if(i=n[a],!eQ(e,t,r,i)||(o=CU(e,i),s=CU(t,i),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function JAe(e,t){return Pg(e.valueOf(),t.valueOf())}function QAe(e,t){return e.source===t.source&&e.flags===t.flags}function OU(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,s;(o=i.next())&&!o.done;){for(var l=t.values(),u=!1,d=0;(s=l.next())&&!s.done;){if(!a[d]&&r.equals(o.value,s.value,o.value,s.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function eNe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function tNe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function eQ(e,t,r,n){return(n===VAe||n===WAe||n===zAe)&&(e.$$typeof||t.$$typeof)?!0:qAe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var rNe="[object Arguments]",nNe="[object Boolean]",aNe="[object Date]",iNe="[object Error]",oNe="[object Map]",sNe="[object Number]",lNe="[object Object]",cNe="[object RegExp]",uNe="[object Set]",dNe="[object String]",fNe="[object URL]",hNe=Array.isArray,DU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,IU=Object.assign,pNe=Object.prototype.toString.call.bind(Object.prototype.toString);function mNe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(x,g,y){if(x===g)return!0;if(x==null||g==null)return!1;var _=typeof x;if(_!==typeof g)return!1;if(_!=="object")return _==="number"?o(x,g,y):_==="function"?a(x,g,y):!1;var b=x.constructor;if(b!==g.constructor)return!1;if(b===Object)return s(x,g,y);if(hNe(x))return t(x,g,y);if(DU!=null&&DU(x))return f(x,g,y);if(b===Date)return r(x,g,y);if(b===RegExp)return u(x,g,y);if(b===Map)return i(x,g,y);if(b===Set)return d(x,g,y);var S=pNe(x);return S===aNe?r(x,g,y):S===cNe?u(x,g,y):S===oNe?i(x,g,y):S===uNe?d(x,g,y):S===lNe?typeof x.then!="function"&&typeof g.then!="function"&&s(x,g,y):S===fNe?h(x,g,y):S===iNe?n(x,g,y):S===rNe?s(x,g,y):S===nNe||S===sNe||S===dNe?l(x,g,y):!1}}function gNe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?l2:HAe,areDatesEqual:GAe,areErrorsEqual:KAe,areFunctionsEqual:YAe,areMapsEqual:n?kU(TU,l2):TU,areNumbersEqual:XAe,areObjectsEqual:n?l2:ZAe,arePrimitiveWrappersEqual:JAe,areRegExpsEqual:QAe,areSetsEqual:n?kU(OU,l2):OU,areTypedArraysEqual:n?l2:eNe,areUrlsEqual:tNe};if(r&&(a=IU({},a,r(a))),t){var i=vb(a.areArraysEqual),o=vb(a.areMapsEqual),s=vb(a.areObjectsEqual),l=vb(a.areSetsEqual);a=IU({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return a}function vNe(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function yNe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(l,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(l,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(l,u){return r(l,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(l,u){return r(l,u,o)}}var xNe=Mm();Mm({strict:!0});Mm({circular:!0});Mm({circular:!0,strict:!0});Mm({createInternalComparator:function(){return Pg}});Mm({strict:!0,createInternalComparator:function(){return Pg}});Mm({circular:!0,createInternalComparator:function(){return Pg}});Mm({circular:!0,createInternalComparator:function(){return Pg},strict:!0});function Mm(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,s=gNe(e),l=mNe(s),u=n?n(l):vNe(l);return yNe({circular:r,comparator:l,createState:a,equals:u,strict:o})}function wNe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function RU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):wNe(a)};requestAnimationFrame(n)}function rO(e){"@babel/helpers - typeof";return rO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rO(e)}function _Ne(e){return NNe(e)||ANe(e)||SNe(e)||bNe()}function bNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SNe(e,t){if(e){if(typeof e=="string")return MU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MU(e,t)}}function MU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ANe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NNe(e){if(Array.isArray(e))return e}function kNe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,s=_Ne(o),l=s[0],u=s.slice(1);if(typeof l=="number"){RU(a.bind(null,u),l);return}a(l),RU(a.bind(null,u));return}rO(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function FU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(r),!0).forEach(function(n){tQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tQ(e,t,r){return t=ENe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ENe(e){var t=CNe(e,"string");return Ix(t)==="symbol"?t:String(t)}function CNe(e,t){if(Ix(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ix(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PNe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},TNe=function(t){return t},ONe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},B2=function(t,r){return Object.keys(r).reduce(function(n,a){return LU(LU({},n),{},tQ({},a,t(a,r[a])))},{})},jU=function(t,r,n){return t.map(function(a){return"".concat(ONe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function DNe(e,t){return MNe(e)||RNe(e,t)||rQ(e,t)||INe()}function INe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function MNe(e){if(Array.isArray(e))return e}function FNe(e){return $Ne(e)||jNe(e)||rQ(e)||LNe()}function LNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(e,t){if(e){if(typeof e=="string")return nO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nO(e,t)}}function jNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Ne(e){if(Array.isArray(e))return nO(e)}function nO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z5=1e-4,nQ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},aQ=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},$U=function(t,r){return function(n){var a=nQ(t,r);return aQ(a,n)}},BNe=function(t,r){return function(n){var a=nQ(t,r),i=[].concat(FNe(a.map(function(o,s){return o*s}).slice(1)),[0]);return aQ(i,n)}},BU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,s=1;break;case"ease":a=.25,i=.1,o=.25,s=1;break;case"ease-in":a=.42,i=0,o=1,s=1;break;case"ease-out":a=.42,i=0,o=.58,s=1;break;case"ease-in-out":a=0,i=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=DNe(u,4);a=d[0],i=d[1],o=d[2],s=d[3]}}}var f=$U(a,o),h=$U(i,s),m=BNe(a,o),x=function(_){return _>1?1:_<0?0:_},g=function(_){for(var b=_>1?1:_,S=b,C=0;C<8;++C){var E=f(S)-b,O=m(S);if(Math.abs(E-b)<Z5||O<Z5)return h(S);S=x(S-E/O)}return h(S)};return g.isStepper=!1,g},UNe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,s=o===void 0?17:o,l=function(d,f,h){var m=-(d-f)*n,x=h*i,g=h+(m-x)*s/1e3,y=h*s/1e3+d;return Math.abs(y-f)<Z5&&Math.abs(g)<Z5?[f,0]:[y,g]};return l.isStepper=!0,l.dt=s,l},qNe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BU(a);case"spring":return UNe();default:if(a.split("(")[0]==="cubic-bezier")return BU(a)}return typeof a=="function"?a:null};function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function UU(e){return VNe(e)||WNe(e)||iQ(e)||zNe()}function zNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VNe(e){if(Array.isArray(e))return iO(e)}function qU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qU(Object(r),!0).forEach(function(n){aO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aO(e,t,r){return t=HNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HNe(e){var t=GNe(e,"string");return Rx(t)==="symbol"?t:String(t)}function GNe(e,t){if(Rx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KNe(e,t){return ZNe(e)||XNe(e,t)||iQ(e,t)||YNe()}function YNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iQ(e,t){if(e){if(typeof e=="string")return iO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iO(e,t)}}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function ZNe(e){if(Array.isArray(e))return e}var J5=function(t,r,n){return t+(r-t)*n},oO=function(t){var r=t.from,n=t.to;return r!==n},JNe=function e(t,r,n){var a=B2(function(i,o){if(oO(o)){var s=t(o.from,o.to,o.velocity),l=KNe(s,2),u=l[0],d=l[1];return Qo(Qo({},o),{},{from:u,velocity:d})}return o},r);return n<1?B2(function(i,o){return oO(o)?Qo(Qo({},o),{},{velocity:J5(o.velocity,a[i].velocity,n),from:J5(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const QNe=function(e,t,r,n,a){var i=PNe(e,t),o=i.reduce(function(y,_){return Qo(Qo({},y),{},aO({},_,[e[_],t[_]]))},{}),s=i.reduce(function(y,_){return Qo(Qo({},y),{},aO({},_,{from:e[_],velocity:0,to:t[_]}))},{}),l=-1,u,d,f=function(){return null},h=function(){return B2(function(_,b){return b.from},s)},m=function(){return!Object.values(s).filter(oO).length},x=function(_){u||(u=_);var b=_-u,S=b/r.dt;s=JNe(r,s,S),a(Qo(Qo(Qo({},e),t),h())),u=_,m()||(l=requestAnimationFrame(f))},g=function(_){d||(d=_);var b=(_-d)/n,S=B2(function(E,O){return J5.apply(void 0,UU(O).concat([r(b)]))},o);if(a(Qo(Qo(Qo({},e),t),S)),b<1)l=requestAnimationFrame(f);else{var C=B2(function(E,O){return J5.apply(void 0,UU(O).concat([r(1)]))},o);a(Qo(Qo(Qo({},e),t),C))}};return f=r.isStepper?x:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function T1(e){"@babel/helpers - typeof";return T1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T1(e)}var eke=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tke(e,t){if(e==null)return{};var r=rke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rke(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function XC(e){return oke(e)||ike(e)||ake(e)||nke()}function nke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ake(e,t){if(e){if(typeof e=="string")return sO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sO(e,t)}}function ike(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oke(e){if(Array.isArray(e))return sO(e)}function sO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(r),!0).forEach(function(n){A2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A2(e,t,r){return t=oQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ske(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oQ(n.key),n)}}function cke(e,t,r){return t&&lke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oQ(e){var t=uke(e,"string");return T1(t)==="symbol"?t:String(t)}function uke(e,t){if(T1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(T1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}function lO(e,t){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lO(e,t)}function fke(e){var t=hke();return function(){var n=Q5(e),a;if(t){var i=Q5(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return cO(this,a)}}function cO(e,t){if(t&&(T1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uO(e)}function uO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hke(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Q5(e){return Q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q5(e)}var td=function(e){dke(r,e);var t=fke(r);function r(n,a){var i;ske(this,r),i=t.call(this,n,a);var o=i.props,s=o.isActive,l=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(uO(i)),i.changeStyle=i.changeStyle.bind(uO(i)),!s||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),cO(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},cO(i);i.state={style:l?A2({},l,u):u}}else i.state={style:{}};return i}return cke(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,s=i.canBegin,l=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(s){if(!o){var m={style:l?A2({},l,d):d};this.state&&h&&(l&&h[l]!==d||!l&&h!==d)&&this.setState(m);return}if(!(xNe(a.to,d)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=x||u?f:a.to;if(this.state&&h){var y={style:l?A2({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(y)}this.runAnimation(Ou(Ou({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,s=a.to,l=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=QNe(o,s,qNe(u),l,this.changeStyle),x=function(){i.stopJSAnimation=m()};this.manager.start([h,d,x,l,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,s=a.begin,l=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,y,_){if(_===0)return g;var b=y.duration,S=y.easing,C=S===void 0?"ease":S,E=y.style,O=y.properties,T=y.onAnimationEnd,M=_>0?o[_-1]:y,L=O||Object.keys(E);if(typeof C=="function"||C==="spring")return[].concat(XC(g),[i.runJSAnimation.bind(i,{from:M.style,to:E,duration:b,easing:C}),b]);var z=jU(L,b,C),P=Ou(Ou(Ou({},M.style),E),{},{transition:z});return[].concat(XC(g),[P,b,T]).filter(TNe)};return this.manager.start([l].concat(XC(o.reduce(m,[d,Math.max(h,s)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=kNe());var i=a.begin,o=a.duration,s=a.attributeName,l=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=s?A2({},s,l):l,y=jU(Object.keys(g),o,u);x.start([d,i,Ou(Ou({},g),{},{transition:y}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var s=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var l=tke(a,eke),u=A.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!s||u===0||o<=0)return i;var f=function(m){var x=m.props,g=x.style,y=g===void 0?{}:g,_=x.className,b=A.cloneElement(m,Ou(Ou({},l),{},{style:Ou(Ou({},y),d),className:_}));return b};return u===1?f(A.Children.only(i)):c("div",{children:A.Children.map(i,function(h){return f(h)})})}}]),r}(A.PureComponent);td.displayName="Animate";td.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};td.propTypes={from:ua.oneOfType([ua.object,ua.string]),to:ua.oneOfType([ua.object,ua.string]),attributeName:ua.string,duration:ua.number,begin:ua.number,easing:ua.oneOfType([ua.string,ua.func]),steps:ua.arrayOf(ua.shape({duration:ua.number.isRequired,style:ua.object.isRequired,easing:ua.oneOfType([ua.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ua.func]),properties:ua.arrayOf("string"),onAnimationEnd:ua.func})),children:ua.oneOfType([ua.node,ua.func]),isActive:ua.bool,canBegin:ua.bool,onAnimationEnd:ua.func,shouldReAnimate:ua.bool,onAnimationStart:ua.func,onAnimationReStart:ua.func};function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function pke(e,t){return yke(e)||vke(e,t)||gke(e,t)||mke()}function mke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gke(e,t){if(e){if(typeof e=="string")return WU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WU(e,t)}}function WU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function yke(e){if(Array.isArray(e))return e}function VU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(r),!0).forEach(function(n){xke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xke(e,t,r){return t=wke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wke(e){var t=_ke(e,"string");return Mx(t)=="symbol"?t:t+""}function _ke(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GU=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),s=a>=0?1:-1,l=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+s*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+l*f[0],",").concat(r)),d+="L ".concat(t+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*f[1])),d+="L ".concat(t+n,",").concat(r+a-s*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-l*f[2],",").concat(r+a)),d+="L ".concat(t+l*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-s*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);d="M ".concat(t,",").concat(r+s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+l*x,",").concat(r,`
            L `).concat(t+n-l*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*x,`
            L `).concat(t+n,",").concat(r+a-s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n-l*x,",").concat(r+a,`
            L `).concat(t+l*x,",").concat(r+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(r+a-s*x," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},bke=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(i,i+s),d=Math.max(i,i+s),f=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=d&&a>=f&&a<=h}return!1},Ske={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},II=function(t){var r=HU(HU({},Ske),t),n=A.useRef(),a=A.useState(-1),i=pke(a,2),o=i[0],s=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&s(C)}catch{}},[]);var l=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,x=r.animationEasing,g=r.animationDuration,y=r.animationBegin,_=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var S=fn("recharts-rectangle",m);return b?c(td,{canBegin:o>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:g,animationEasing:x,isActive:b,children:function(C){var E=C.width,O=C.height,T=C.x,M=C.y;return c(td,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:_,easing:x,children:c("path",{...Or(r,!0),className:S,d:GU(T,M,E,O,h),ref:n})})}}):c("path",{...Or(r,!0),className:S,d:GU(l,u,d,f,h)})},Ake=["points","className","baseLinePoints","connectNulls"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(this,arguments)}function Nke(e,t){if(e==null)return{};var r=kke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function KU(e){return Tke(e)||Pke(e)||Cke(e)||Eke()}function Eke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cke(e,t){if(e){if(typeof e=="string")return dO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dO(e,t)}}function Pke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tke(e){if(Array.isArray(e))return dO(e)}function dO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var YU=function(t){return t&&t.x===+t.x&&t.y===+t.y},Oke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){YU(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),YU(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},U2=function(t,r){var n=Oke(t);r&&(n=[n.reduce(function(i,o){return[].concat(KU(i),KU(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,s,l){return"".concat(o).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Dke=function(t,r,n){var a=U2(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(U2(r.reverse(),n).slice(1))},Ike=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Nke(t,Ake);if(!r||!r.length)return null;var s=fn("recharts-polygon",n);if(a&&a.length){var l=o.stroke&&o.stroke!=="none",u=Dke(r,a,i);return tt.createElement("g",{className:s},tt.createElement("path",zv({},Or(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?tt.createElement("path",zv({},Or(o,!0),{fill:"none",d:U2(r,i)})):null,l?tt.createElement("path",zv({},Or(o,!0),{fill:"none",d:U2(a,i)})):null)}var d=U2(r,i);return tt.createElement("path",zv({},Or(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:s,d}))};function fO(){return fO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fO.apply(this,arguments)}var Vw=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=fn("recharts-dot",i);return r===+r&&n===+n&&a===+a?tt.createElement("circle",fO({},Or(t,!1),A5(t),{className:o,cx:r,cy:n,r:a})):null};function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}var Rke=["x","y","top","left","width","height","className"];function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(this,arguments)}function XU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XU(Object(r),!0).forEach(function(n){Fke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fke(e,t,r){return t=Lke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lke(e){var t=jke(e,"string");return Fx(t)=="symbol"?t:t+""}function jke(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ke(e,t){if(e==null)return{};var r=Bke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Uke=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},qke=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,s=o===void 0?0:o,l=t.left,u=l===void 0?0:l,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,x=t.className,g=$ke(t,Rke),y=Mke({x:n,y:i,top:s,left:u,width:f,height:m},g);return!Kt(n)||!Kt(i)||!Kt(f)||!Kt(m)||!Kt(s)||!Kt(u)?null:tt.createElement("path",hO({},Or(y,!0),{className:fn("recharts-cross",x),d:Uke(n,i,f,m,s,u)}))},ZC,ZU;function zke(){if(ZU)return ZC;ZU=1;var e=Q4(),t=_J(),r=mf();function n(a,i){return a&&a.length?e(a,r(i,2),t):void 0}return ZC=n,ZC}var Wke=zke();const Vke=ia(Wke);var JC,JU;function Hke(){if(JU)return JC;JU=1;var e=Q4(),t=mf(),r=bJ();function n(a,i){return a&&a.length?e(a,t(i,2),r):void 0}return JC=n,JC}var Gke=Hke();const Kke=ia(Gke);var Yke=["cx","cy","angle","ticks","axisLine"],Xke=["ticks","tick","angle","tickFormatter","stroke"];function O1(e){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O1(e)}function QU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QU(Object(r),!0).forEach(function(n){n3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eq(e,t){if(e==null)return{};var r=Zke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lQ(n.key),n)}}function Qke(e,t,r){return t&&tq(e.prototype,t),r&&tq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eEe(e,t,r){return t=eS(t),tEe(e,sQ()?Reflect.construct(t,r||[],eS(e).constructor):t.apply(e,r))}function tEe(e,t){if(t&&(O1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rEe(e)}function rEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sQ=function(){return!!e})()}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eS(e)}function nEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pO(e,t)}function pO(e,t){return pO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pO(e,t)}function n3(e,t,r){return t=lQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lQ(e){var t=aEe(e,"string");return O1(t)=="symbol"?t:t+""}function aEe(e,t){if(O1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(O1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var a3=function(e){function t(){return Jke(this,t),eEe(this,t,arguments)}return nEe(t,e),Qke(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,s=i.cx,l=i.cy;return La(s,l,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,s=n.ticks,l=Vke(s,function(d){return d.coordinate||0}),u=Kke(s,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,s=n.ticks,l=n.axisLine,u=eq(n,Yke),d=s.reduce(function(x,g){return[Math.min(x[0],g.coordinate),Math.max(x[1],g.coordinate)]},[1/0,-1/0]),f=La(a,i,d[0],o),h=La(a,i,d[1],o),m=x0(x0(x0({},Or(u,!1)),{},{fill:"none"},Or(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return c("line",{className:"recharts-polar-radius-axis-line",...m})}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,s=a.angle,l=a.tickFormatter,u=a.stroke,d=eq(a,Xke),f=this.getTickTextAnchor(),h=Or(d,!1),m=Or(o,!1),x=i.map(function(g,y){var _=n.getTickValueCoord(g),b=x0(x0(x0(x0({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(_.x,", ").concat(_.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:y},_),{},{payload:g});return c(Dn,{className:fn("recharts-polar-radius-axis-tick",XJ(o)),...tg(n.props,g,y),children:t.renderTickItem(o,b,l?l(g.value,y):g.value)},"tick-".concat(g.coordinate))});return c(Dn,{className:"recharts-polar-radius-axis-ticks",children:x})}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:w(Dn,{className:fn("recharts-polar-radius-axis",this.props.className),children:[i&&this.renderAxisLine(),o&&this.renderTicks(),jo.renderCallByParent(this.props,this.getViewBox())]})}}],[{key:"renderTickItem",value:function(n,a,i){var o;return tt.isValidElement(n)?o=tt.cloneElement(n,a):Yr(n)?o=n(a):o=c(rg,{...a,className:"recharts-polar-radius-axis-tick-value",children:i}),o}}])}(A.PureComponent);n3(a3,"displayName","PolarRadiusAxis");n3(a3,"axisType","radiusAxis");n3(a3,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function D1(e){"@babel/helpers - typeof";return D1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D1(e)}function rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rq(Object(r),!0).forEach(function(n){i3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uQ(n.key),n)}}function oEe(e,t,r){return t&&nq(e.prototype,t),r&&nq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sEe(e,t,r){return t=tS(t),lEe(e,cQ()?Reflect.construct(t,r||[],tS(e).constructor):t.apply(e,r))}function lEe(e,t){if(t&&(D1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cEe(e)}function cEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cQ=function(){return!!e})()}function tS(e){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tS(e)}function uEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mO(e,t)}function i3(e,t,r){return t=uQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQ(e){var t=dEe(e,"string");return D1(t)=="symbol"?t:t+""}function dEe(e,t){if(D1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(D1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fEe=Math.PI/180,hEe=1e-5,o3=function(e){function t(){return iEe(this,t),sEe(this,t,arguments)}return uEe(t,e),oEe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,s=a.radius,l=a.orientation,u=a.tickSize,d=u||8,f=La(i,o,s,n.coordinate),h=La(i,o,s+(l==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*fEe),o;return i>hEe?o=a==="outer"?"start":"end":i<-1e-5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,s=n.axisLine,l=n.axisLineType,u=w0(w0({},Or(this.props,!1)),{},{fill:"none"},Or(s,!1));if(l==="circle")return c(Vw,{className:"recharts-polar-angle-axis-line",...u,cx:a,cy:i,r:o});var d=this.props.ticks,f=d.map(function(h){return La(a,i,o,h.coordinate)});return c(Ike,{className:"recharts-polar-angle-axis-line",...u,points:f})}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,s=a.tickLine,l=a.tickFormatter,u=a.stroke,d=Or(this.props,!1),f=Or(o,!1),h=w0(w0({},d),{},{fill:"none"},Or(s,!1)),m=i.map(function(x,g){var y=n.getTickLineCoord(x),_=n.getTickTextAnchor(x),b=w0(w0(w0({textAnchor:_},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:x,x:y.x2,y:y.y2});return w(Dn,{className:fn("recharts-polar-angle-axis-tick",XJ(o)),...tg(n.props,x,g),children:[s&&c("line",{className:"recharts-polar-angle-axis-tick-line",...h,...y}),o&&t.renderTickItem(o,b,l?l(x.value,g):x.value)]},"tick-".concat(x.coordinate))});return c(Dn,{className:"recharts-polar-angle-axis-ticks",children:m})}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:w(Dn,{className:fn("recharts-polar-angle-axis",this.props.className),children:[o&&this.renderAxisLine(),this.renderTicks()]})}}],[{key:"renderTickItem",value:function(n,a,i){var o;return tt.isValidElement(n)?o=tt.cloneElement(n,a):Yr(n)?o=n(a):o=c(rg,{...a,className:"recharts-polar-angle-axis-tick-value",children:i}),o}}])}(A.PureComponent);i3(o3,"displayName","PolarAngleAxis");i3(o3,"axisType","angleAxis");i3(o3,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var QC,aq;function pEe(){if(aq)return QC;aq=1;var e=wZ(),t=e(Object.getPrototypeOf,Object);return QC=t,QC}var eP,iq;function mEe(){if(iq)return eP;iq=1;var e=Th(),t=pEe(),r=Oh(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,s=i.hasOwnProperty,l=o.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var f=t(d);if(f===null)return!0;var h=s.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return eP=u,eP}var gEe=mEe();const vEe=ia(gEe);var tP,oq;function yEe(){if(oq)return tP;oq=1;var e=Th(),t=Oh(),r="[object Boolean]";function n(a){return a===!0||a===!1||t(a)&&e(a)==r}return tP=n,tP}var xEe=yEe();const wEe=ia(xEe);function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function _Ee(e,t){return NEe(e)||AEe(e,t)||SEe(e,t)||bEe()}function bEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SEe(e,t){if(e){if(typeof e=="string")return sq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sq(e,t)}}function sq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function NEe(e){if(Array.isArray(e))return e}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){kEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kEe(e,t,r){return t=EEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EEe(e){var t=CEe(e,"string");return Lx(t)=="symbol"?t:t+""}function CEe(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uq=function(t,r,n,a,i){var o=n-a,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-o/2,",").concat(r+i),s+="L ".concat(t+n-o/2-a,",").concat(r+i),s+="L ".concat(t,",").concat(r," Z"),s},PEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TEe=function(t){var r=cq(cq({},PEe),t),n=A.useRef(),a=A.useState(-1),i=_Ee(a,2),o=i[0],s=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,x=r.animationEasing,g=r.animationDuration,y=r.animationBegin,_=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=fn("recharts-trapezoid",m);return _?c(td,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:l,y:u},duration:g,animationEasing:x,isActive:_,children:function(S){var C=S.upperWidth,E=S.lowerWidth,O=S.height,T=S.x,M=S.y;return c(td,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:x,children:c("path",{...Or(r,!0),className:b,d:uq(T,M,C,E,O),ref:n})})}}):c("g",{children:c("path",{...Or(r,!0),className:b,d:uq(l,u,d,f,h)})})},OEe=["option","shapeType","propTransformer","activeClassName","isActive"];function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function DEe(e,t){if(e==null)return{};var r=IEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dq(Object(r),!0).forEach(function(n){REe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function REe(e,t,r){return t=MEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MEe(e){var t=FEe(e,"string");return jx(t)=="symbol"?t:t+""}function FEe(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LEe(e,t){return rS(rS({},t),e)}function jEe(e,t){return e==="symbols"}function fq(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return c(II,{...r});case"trapezoid":return c(TEe,{...r});case"sector":return c(QJ,{...r});case"symbols":if(jEe(t))return c(JD,{...r});break;default:return null}}function $Ee(e){return A.isValidElement(e)?e.props:e}function dQ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?LEe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,s=e.isActive,l=DEe(e,OEe),u;if(A.isValidElement(t))u=A.cloneElement(t,rS(rS({},l),$Ee(t)));else if(Yr(t))u=t(l);else if(vEe(t)&&!wEe(t)){var d=a(t,l);u=c(fq,{shapeType:r,elementProps:d})}else{var f=l;u=c(fq,{shapeType:r,elementProps:f})}return s?c(Dn,{className:o,children:u}):u}function s3(e,t){return t!=null&&"trapezoids"in e.props}function l3(e,t){return t!=null&&"sectors"in e.props}function $x(e,t){return t!=null&&"points"in e.props}function BEe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function UEe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function qEe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function zEe(e,t){var r;return s3(e,t)?r=BEe:l3(e,t)?r=UEe:$x(e,t)&&(r=qEe),r}function WEe(e,t){var r;return s3(e,t)?r="trapezoids":l3(e,t)?r="sectors":$x(e,t)&&(r="points"),r}function VEe(e,t){if(s3(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(l3(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return $x(e,t)?t.payload:{}}function HEe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=WEe(r,t),i=VEe(r,t),o=n.filter(function(l,u){var d=ng(i,l),f=r.props[a].filter(function(x){var g=zEe(r,t);return g(x,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),s=n.indexOf(o[o.length-1]);return s}var Kb;function I1(e){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I1(e)}function hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hq(Object(r),!0).forEach(function(n){Xc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hQ(n.key),n)}}function KEe(e,t,r){return t&&pq(e.prototype,t),r&&pq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YEe(e,t,r){return t=nS(t),XEe(e,fQ()?Reflect.construct(t,r||[],nS(e).constructor):t.apply(e,r))}function XEe(e,t){if(t&&(I1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZEe(e)}function ZEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fQ=function(){return!!e})()}function nS(e){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nS(e)}function JEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}function gO(e,t){return gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gO(e,t)}function Xc(e,t,r){return t=hQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=QEe(e,"string");return I1(t)=="symbol"?t:t+""}function QEe(e,t){if(I1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(I1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ls=function(e){function t(r){var n;return GEe(this,t),n=YEe(this,t,[r]),Xc(n,"pieRef",null),Xc(n,"sectorRefs",[]),Xc(n,"id",kg("recharts-pie-")),Xc(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Yr(a)&&a()}),Xc(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Yr(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return JEe(t,e),KEe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,s=i.labelLine,l=i.dataKey,u=i.valueKey,d=Or(this.props,!1),f=Or(o,!1),h=Or(s,!1),m=o&&o.offsetRadius||20,x=n.map(function(g,y){var _=(g.startAngle+g.endAngle)/2,b=La(g.cx,g.cy,g.outerRadius+m,_),S=Ra(Ra(Ra(Ra({},d),g),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(b.x,g.cx)},b),C=Ra(Ra(Ra(Ra({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:y,points:[La(g.cx,g.cy,g.outerRadius,_),b]}),E=l;return dn(l)&&dn(u)?E="value":dn(l)&&(E=u),w(Dn,{children:[s&&t.renderLabelLineItem(s,C,"line"),t.renderLabelItem(o,S,Wi(g,E))]},"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y))});return c(Dn,{className:"recharts-pie-labels",children:x})}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,s=i.blendStroke,l=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=l&&a.hasActiveIndex()?l:null,m=f?o:h,x=Ra(Ra({},u),{},{stroke:s?u.fill:u.stroke,tabIndex:-1});return A.createElement(Dn,{ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector",...tg(a.props,u,d),key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)},c(dQ,{option:m,isActive:f,shapeType:"sector",...x}))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return c(td,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd,children:function(x){var g=x.t,y=[],_=i&&i[0],b=_.startAngle;return i.forEach(function(S,C){var E=h&&h[C],O=C>0?vc(S,"paddingAngle",0):0;if(E){var T=yo(E.endAngle-E.startAngle,S.endAngle-S.startAngle),M=Ra(Ra({},S),{},{startAngle:b+O,endAngle:b+T(g)+O});y.push(M),b=M.endAngle}else{var L=S.endAngle,z=S.startAngle,P=yo(0,L-z),R=P(g),j=Ra(Ra({},S),{},{startAngle:b+O,endAngle:b+R+O});y.push(j),b=j.endAngle}}),c(Dn,{children:n.renderSectorsStatically(y)})}},"pie-".concat(d,"-").concat(m))}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var s=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[s].focus(),a.setState({sectorToFocus:s});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!ng(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,s=a.className,l=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,x=this.state.isAnimationFinished;if(i||!o||!o.length||!Kt(u)||!Kt(d)||!Kt(f)||!Kt(h))return null;var g=fn("recharts-pie",s);return w(Dn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(_){n.pieRef=_},children:[this.renderSectors(),l&&this.renderLabels(o),jo.renderCallByParent(this.props,null,!1),(!m||x)&&ef.renderCallByParent(this.props,o,!1)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(tt.isValidElement(n))return tt.cloneElement(n,a);if(Yr(n))return n(a);var o=fn("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return A.createElement(q0,{...a,key:i,type:"linear",className:o})}},{key:"renderLabelItem",value:function(n,a,i){if(tt.isValidElement(n))return tt.cloneElement(n,a);var o=i;if(Yr(n)&&(o=n(a),tt.isValidElement(o)))return o;var s=fn("recharts-pie-label-text",typeof n!="boolean"&&!Yr(n)?n.className:"");return c(rg,{...a,alignmentBaseline:"middle",className:s,children:o})}}])}(A.PureComponent);Kb=Ls;Xc(Ls,"displayName","Pie");Xc(Ls,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Dm.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Xc(Ls,"parseDeltaAngle",function(e,t){var r=ll(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Xc(Ls,"getRealPieData",function(e){var t=e.data,r=e.children,n=Or(e,!1),a=yc(r,Yc);return t&&t.length?t.map(function(i,o){return Ra(Ra(Ra({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Ra(Ra({},n),i.props)}):[]});Xc(Ls,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=YJ(a,i),s=n+cl(e.cx,a,a/2),l=r+cl(e.cy,i,i/2),u=cl(e.innerRadius,o,0),d=cl(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:s,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});Xc(Ls,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Ra(Ra({},t.type.defaultProps),t.props):t.props,a=Kb.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,s=n.endAngle,l=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),x=Kb.parseCoordinateOfPie(n,r),g=Kb.parseDeltaAngle(o,s),y=Math.abs(g),_=u;dn(u)&&dn(f)?(Gu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):dn(u)&&(Gu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=f);var b=a.filter(function(M){return Wi(M,_,0)!==0}).length,S=(y>=360?b:b-1)*l,C=y-b*m-S,E=a.reduce(function(M,L){var z=Wi(L,_,0);return M+(Kt(z)?z:0)},0),O;if(E>0){var T;O=a.map(function(M,L){var z=Wi(M,_,0),P=Wi(M,d,L),R=(Kt(z)?z:0)/E,j;L?j=T.endAngle+ll(g)*l*(z!==0?1:0):j=o;var V=j+ll(g)*((z!==0?m:0)+R*C),Z=(j+V)/2,te=(x.innerRadius+x.outerRadius)/2,q=[{name:P,value:z,payload:M,dataKey:_,type:h}],Y=La(x.cx,x.cy,te,Z);return T=Ra(Ra(Ra({percent:R,cornerRadius:i,name:P,tooltipPayload:q,midAngle:Z,middleRadius:te,tooltipPosition:Y},M),x),{},{value:Wi(M,_),startAngle:j,endAngle:V,payload:M,paddingAngle:ll(g)*l}),T})}return Ra(Ra({},x),{},{sectors:O,data:a})});var rP,mq;function eCe(){if(mq)return rP;mq=1;var e=Math.ceil,t=Math.max;function r(n,a,i,o){for(var s=-1,l=t(e((a-n)/(i||1)),0),u=Array(l);l--;)u[o?l:++s]=n,n+=i;return u}return rP=r,rP}var nP,gq;function pQ(){if(gq)return nP;gq=1;var e=FZ(),t=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=e(a),a===t||a===-1/0){var i=a<0?-1:1;return i*r}return a===a?a:0}return nP=n,nP}var aP,vq;function tCe(){if(vq)return aP;vq=1;var e=eCe(),t=H4(),r=pQ();function n(a){return function(i,o,s){return s&&typeof s!="number"&&t(i,o,s)&&(o=s=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),s=s===void 0?i<o?1:-1:r(s),e(i,o,s,a)}}return aP=n,aP}var iP,yq;function rCe(){if(yq)return iP;yq=1;var e=tCe(),t=e();return iP=t,iP}var nCe=rCe();const aS=ia(nCe);function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xq(Object(r),!0).forEach(function(n){mQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mQ(e,t,r){return t=aCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aCe(e){var t=iCe(e,"string");return Bx(t)=="symbol"?t:t+""}function iCe(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oCe=["Webkit","Moz","O","ms"],sCe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=oCe.reduce(function(i,o){return wq(wq({},i),{},mQ({},o+n,r))},{});return a[t]=r,a};function R1(e){"@babel/helpers - typeof";return R1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R1(e)}function _q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(r),!0).forEach(function(n){nc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vQ(n.key),n)}}function cCe(e,t,r){return t&&bq(e.prototype,t),r&&bq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uCe(e,t,r){return t=iS(t),dCe(e,gQ()?Reflect.construct(t,r||[],iS(e).constructor):t.apply(e,r))}function dCe(e,t){if(t&&(R1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fCe(e)}function fCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gQ=function(){return!!e})()}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iS(e)}function hCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vO(e,t)}function vO(e,t){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vO(e,t)}function nc(e,t,r){return t=vQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vQ(e){var t=pCe(e,"string");return R1(t)=="symbol"?t:t+""}function pCe(e,t){if(R1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(R1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mCe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=j2().domain(aS(0,l)).range([i,i+o-s]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},Sq=function(t){return t.changedTouches&&!!t.changedTouches.length},M1=function(e){function t(r){var n;return lCe(this,t),n=uCe(this,t,[r]),nc(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),nc(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),nc(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,s=a.startIndex;o==null||o({endIndex:i,startIndex:s})}),n.detachDragEndListener()}),nc(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),nc(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),nc(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),nc(n,"handleSlideDragStart",function(a){var i=Sq(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return hCe(t,e),cCe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),x=t.getIndexInRange(o,h);return{startIndex:m-m%l,endIndex:x===d?d:x-x%l}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,s=a.dataKey,l=Wi(i[n],s,n);return Yr(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,s=a.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,h=l.startIndex,m=l.endIndex,x=l.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-s,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-s));var y=this.getIndex({startX:o+g,endX:s+g});(y.startIndex!==h||y.endIndex!==m)&&x&&x(y),this.setState({startX:o+g,endX:s+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Sq(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,s=a.endX,l=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,x=d.onChange,g=d.gap,y=d.data,_={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),_[o]=u+b;var S=this.getIndex(_),C=S.startIndex,E=S.endIndex,O=function(){var M=y.length-1;return o==="startX"&&(s>l?C%g===0:E%g===0)||s<l&&E===M||o==="endX"&&(s>l?E%g===0:C%g===0)||s>l&&E===M};this.setState(nc(nc({},o,u+b),"brushMoveStartX",n.pageX),function(){x&&O()&&x(S)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,d=this.state[a],f=s.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=s.length)){var m=s[h];a==="startX"&&m>=u||a==="endX"&&m<=l||this.setState(nc({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return c("rect",{stroke:u,fill:l,x:a,y:i,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.data,u=n.children,d=n.padding,f=A.Children.only(u);return f?tt.cloneElement(f,{x:a,y:i,width:o,height:s,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,s=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,h=l.traveller,m=l.ariaLabel,x=l.data,g=l.startIndex,y=l.endIndex,_=Math.max(n,this.props.x),b=oP(oP({},Or(this.props,!1)),{},{x:_,y:u,width:d,height:f}),S=m||"Min value: ".concat((i=x[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[y])===null||o===void 0?void 0:o.name);return c(Dn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),s.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,a))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"},children:t.renderTraveller(h,b)})}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,s=i.height,l=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return c("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:o,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,x={pointerEvents:"none",fill:u};return w(Dn,{className:"recharts-brush-texts",children:[c(rg,{textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+s/2,...x,children:this.getTextOfTick(a)}),c(rg,{textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+m,y:o+s/2,...x,children:this.getTextOfTick(i)})]})}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,s=n.x,l=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,x=h.endX,g=h.isTextActive,y=h.isSlideMoving,_=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Kt(s)||!Kt(l)||!Kt(u)||!Kt(d)||u<=0||d<=0)return null;var S=fn("recharts-brush",i),C=tt.Children.count(o)===1,E=sCe("userSelect","none");return w(Dn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E,children:[this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(m,x),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(x,"endX"),(g||y||_||b||f)&&this.renderText()]})}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(i+s/2)-1;return w(_r,{children:[c("rect",{x:a,y:i,width:o,height:s,fill:l,stroke:"none"}),c("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),c("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"})]})}},{key:"renderTraveller",value:function(n,a){var i;return tt.isValidElement(n)?i=tt.cloneElement(n,a):Yr(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return oP({prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},i&&i.length?mCe({data:i,width:o,x:s,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||s!==a.prevX||l!==a.prevTravellerWidth)){a.scale.range([s,s+o-l]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,s=i-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>a?s=l:o=l}return a>=n[s]?s:o}}])}(A.PureComponent);nc(M1,"displayName","Brush");nc(M1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var sP,Aq;function gCe(){if(Aq)return sP;Aq=1;var e=iI();function t(r,n){var a;return e(r,function(i,o,s){return a=n(i,o,s),!a}),!!a}return sP=t,sP}var lP,Nq;function vCe(){if(Nq)return lP;Nq=1;var e=hZ(),t=mf(),r=gCe(),n=ql(),a=H4();function i(o,s,l){var u=n(o)?e:r;return l&&a(o,s,l)&&(s=void 0),u(o,t(s,3))}return lP=i,lP}var yCe=vCe();const xCe=ia(yCe);var tf=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},cP,kq;function wCe(){if(kq)return cP;kq=1;var e=OZ();function t(r,n,a){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return cP=t,cP}var uP,Eq;function _Ce(){if(Eq)return uP;Eq=1;var e=wCe(),t=PZ(),r=mf();function n(a,i){var o={};return i=r(i,3),t(a,function(s,l,u){e(o,l,i(s,l,u))}),o}return uP=n,uP}var bCe=_Ce();const SCe=ia(bCe);var dP,Cq;function ACe(){if(Cq)return dP;Cq=1;function e(t,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(!r(t[n],n,t))return!1;return!0}return dP=e,dP}var fP,Pq;function NCe(){if(Pq)return fP;Pq=1;var e=iI();function t(r,n){var a=!0;return e(r,function(i,o,s){return a=!!n(i,o,s),a}),a}return fP=t,fP}var hP,Tq;function kCe(){if(Tq)return hP;Tq=1;var e=ACe(),t=NCe(),r=mf(),n=ql(),a=H4();function i(o,s,l){var u=n(o)?e:t;return l&&a(o,s,l)&&(s=void 0),u(o,r(s,3))}return hP=i,hP}var ECe=kCe();const yQ=ia(ECe);var CCe=["x","y"];function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yO.apply(this,arguments)}function Oq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oq(Object(r),!0).forEach(function(n){PCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PCe(e,t,r){return t=TCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TCe(e){var t=OCe(e,"string");return Ux(t)=="symbol"?t:t+""}function OCe(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DCe(e,t){if(e==null)return{};var r=ICe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ICe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RCe(e,t){var r=e.x,n=e.y,a=DCe(e,CCe),i="".concat(r),o=parseInt(i,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return c2(c2(c2(c2(c2({},t),a),o?{x:o}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Dq(e){return tt.createElement(dQ,yO({shapeType:"rectangle",propTransformer:RCe,activeClassName:"recharts-active-bar"},e))}var MCe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=typeof n=="number";return i?t(n,a):(i||ig(),r)}},FCe=["value","background"],xQ;function F1(e){"@babel/helpers - typeof";return F1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F1(e)}function LCe(e,t){if(e==null)return{};var r=jCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iq(Object(r),!0).forEach(function(n){Yp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_Q(n.key),n)}}function BCe(e,t,r){return t&&Rq(e.prototype,t),r&&Rq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UCe(e,t,r){return t=oS(t),qCe(e,wQ()?Reflect.construct(t,r||[],oS(e).constructor):t.apply(e,r))}function qCe(e,t){if(t&&(F1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zCe(e)}function zCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wQ=function(){return!!e})()}function oS(e){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oS(e)}function WCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xO(e,t)}function xO(e,t){return xO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xO(e,t)}function Yp(e,t,r){return t=_Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Q(e){var t=VCe(e,"string");return F1(t)=="symbol"?t:t+""}function VCe(e,t){if(F1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(F1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nu=function(e){function t(){var r;$Ce(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=UCe(this,t,[].concat(a)),Yp(r,"state",{isAnimationFinished:!1}),Yp(r,"id",kg("recharts-bar-")),Yp(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Yp(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return WCe(t,e),BCe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,s=i.dataKey,l=i.activeIndex,u=i.activeBar,d=Or(this.props,!1);return n&&n.map(function(f,h){var m=h===l,x=m?u:o,g=oo(oo(oo({},d),f),{},{isActive:m,option:x,index:h,dataKey:s,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return A.createElement(Dn,{className:"recharts-bar-rectangle",...tg(a.props,f,h),key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)},c(Dq,{...g}))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,s=a.isAnimationActive,l=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return c(td,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(m){var x=m.t,g=i.map(function(y,_){var b=h&&h[_];if(b){var S=yo(b.x,y.x),C=yo(b.y,y.y),E=yo(b.width,y.width),O=yo(b.height,y.height);return oo(oo({},y),{},{x:S(x),y:C(x),width:E(x),height:O(x)})}if(o==="horizontal"){var T=yo(0,y.height),M=T(x);return oo(oo({},y),{},{y:y.y+y.height-M,height:M})}var L=yo(0,y.width),z=L(x);return oo(oo({},y),{},{width:z})});return c(Dn,{children:n.renderRectanglesStatically(g)})}},"bar-".concat(f))}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!ng(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,s=a.activeIndex,l=Or(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=LCe(u,FCe);if(!f)return null;var m=oo(oo(oo(oo(oo({},h),{},{fill:"#eee"},f),l),tg(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return c(Dq,{option:n.props.background,isActive:d===s,...m},"background-bar-".concat(d))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,s=i.xAxis,l=i.yAxis,u=i.layout,d=i.children,f=yc(d,Ww);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,_){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:Wi(y,_)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return c(Dn,{...x,children:f.map(function(g){return tt.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:m})})})}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,x=n.background,g=n.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,_=fn("recharts-bar",o),b=s&&s.allowDataOverflow,S=l&&l.allowDataOverflow,C=b||S,E=dn(g)?this.id:g;return w(Dn,{className:_,children:[b||S?c("defs",{children:c("clipPath",{id:"clipPath-".concat(E),children:c("rect",{x:b?u:u-f/2,y:S?d:d-h/2,width:b?f:f*2,height:S?h:h*2})})}):null,w(Dn,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(E,")"):null,children:[x?this.renderBackground():null,this.renderRectangles()]}),this.renderErrorBar(C,E),(!m||y)&&ef.renderCallByParent(this.props,i)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(A.PureComponent);xQ=nu;Yp(nu,"displayName","Bar");Yp(nu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Dm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yp(nu,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=x3e(n,r);if(!m)return null;var x=t.layout,g=r.type.defaultProps,y=g!==void 0?oo(oo({},g),r.props):r.props,_=y.dataKey,b=y.children,S=y.minPointSize,C=x==="horizontal"?o:i,E=u?C.scale.domain():null,O=k3e({numericAxis:C}),T=yc(b,Yc),M=f.map(function(L,z){var P,R,j,V,Z,te;u?P=w3e(u[d+z],E):(P=Wi(L,_),Array.isArray(P)||(P=[O,P]));var q=MCe(S,xQ.defaultProps.minPointSize)(P[1],z);if(x==="horizontal"){var Y,U=[o.scale(P[0]),o.scale(P[1])],G=U[0],J=U[1];R=oU({axis:i,ticks:s,bandSize:a,offset:m.offset,entry:L,index:z}),j=(Y=J??G)!==null&&Y!==void 0?Y:void 0,V=m.size;var D=G-J;if(Z=Number.isNaN(D)?0:D,te={x:R,y:o.y,width:V,height:o.height},Math.abs(q)>0&&Math.abs(Z)<Math.abs(q)){var K=ll(Z||q)*(Math.abs(q)-Math.abs(Z));j-=K,Z+=K}}else{var Q=[i.scale(P[0]),i.scale(P[1])],ae=Q[0],se=Q[1];if(R=ae,j=oU({axis:o,ticks:l,bandSize:a,offset:m.offset,entry:L,index:z}),V=se-ae,Z=m.size,te={x:i.x,y:j,width:i.width,height:Z},Math.abs(q)>0&&Math.abs(V)<Math.abs(q)){var fe=ll(V||q)*(Math.abs(q)-Math.abs(V));V+=fe}}return oo(oo(oo({},L),{},{x:R,y:j,width:V,height:Z,value:u?P:P[1],payload:L,background:te},T&&T[z]&&T[z].props),{},{tooltipPayload:[GJ(r,L)],tooltipPosition:{x:R+V/2,y:j+Z/2}})});return oo({data:M,layout:x},h)});function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function HCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bQ(n.key),n)}}function GCe(e,t,r){return t&&Mq(e.prototype,t),r&&Mq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fq(Object(r),!0).forEach(function(n){c3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c3(e,t,r){return t=bQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bQ(e){var t=KCe(e,"string");return qx(t)=="symbol"?t:t+""}function KCe(e,t){if(qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RI=function(t,r,n,a,i){var o=t.width,s=t.height,l=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!ac(u,nu);return d.reduce(function(m,x){var g=r[x],y=g.orientation,_=g.domain,b=g.padding,S=b===void 0?{}:b,C=g.mirror,E=g.reversed,O="".concat(y).concat(C?"Mirror":""),T,M,L,z,P;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var R=_[1]-_[0],j=1/0,V=g.categoricalDomain.sort(l2e);if(V.forEach(function(Q,ae){ae>0&&(j=Math.min((Q||0)-(V[ae-1]||0),j))}),Number.isFinite(j)){var Z=j/R,te=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(T=Z*te/2),g.padding==="no-gap"){var q=cl(t.barCategoryGap,Z*te),Y=Z*te/2;T=Y-q-(Y-q)/te*q}}}a==="xAxis"?M=[n.left+(S.left||0)+(T||0),n.left+n.width-(S.right||0)-(T||0)]:a==="yAxis"?M=l==="horizontal"?[n.top+n.height-(S.bottom||0),n.top+(S.top||0)]:[n.top+(S.top||0)+(T||0),n.top+n.height-(S.bottom||0)-(T||0)]:M=g.range,E&&(M=[M[1],M[0]]);var U=zJ(g,i,h),G=U.scale,J=U.realScaleType;G.domain(_).range(M),WJ(G);var D=VJ(G,ju(ju({},g),{},{realScaleType:J}));a==="xAxis"?(P=y==="top"&&!C||y==="bottom"&&C,L=n.left,z=f[O]-P*g.height):a==="yAxis"&&(P=y==="left"&&!C||y==="right"&&C,L=f[O]-P*g.width,z=n.top);var K=ju(ju(ju({},g),D),{},{realScaleType:J,x:L,y:z,scale:G,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return K.bandSize=Y5(K,D),!g.hide&&a==="xAxis"?f[O]+=(P?-1:1)*K.height:g.hide||(f[O]+=(P?-1:1)*K.width),ju(ju({},m),{},c3({},x,K))},{})},SQ=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},YCe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return SQ({x:r,y:n},{x:a,y:i})},AQ=function(){function e(t){HCe(this,e),this.scale=t}return GCe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(a){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();c3(AQ,"EPS",1e-4);var MI=function(t){var r=Object.keys(t).reduce(function(n,a){return ju(ju({},n),{},c3({},a,AQ.create(t[a])))},{});return ju(ju({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,s=i.position;return SCe(a,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(a){return yQ(a,function(i,o){return r[o].isInRange(i)})}})};function XCe(e){return(e%180+180)%180}var ZCe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=XCe(a),o=i*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},pP,Lq;function JCe(){if(Lq)return pP;Lq=1;var e=mf(),t=$w(),r=W4();function n(a){return function(i,o,s){var l=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(f){return u(l[f],f,l)}}var d=a(i,o,s);return d>-1?l[u?i[d]:d]:void 0}}return pP=n,pP}var mP,jq;function QCe(){if(jq)return mP;jq=1;var e=pQ();function t(r){var n=e(r),a=n%1;return n===n?a?n-a:n:0}return mP=t,mP}var gP,$q;function ePe(){if($q)return gP;$q=1;var e=AZ(),t=mf(),r=QCe(),n=Math.max;function a(i,o,s){var l=i==null?0:i.length;if(!l)return-1;var u=s==null?0:r(s);return u<0&&(u=n(l+u,0)),e(i,t(o,3),u)}return gP=a,gP}var vP,Bq;function tPe(){if(Bq)return vP;Bq=1;var e=JCe(),t=ePe(),r=e(t);return vP=r,vP}var rPe=tPe();const nPe=ia(rPe);var aPe=$X();const iPe=ia(aPe);var oPe=iPe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),FI=A.createContext(void 0),LI=A.createContext(void 0),NQ=A.createContext(void 0),kQ=A.createContext({}),EQ=A.createContext(void 0),CQ=A.createContext(0),PQ=A.createContext(0),Uq=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,s=t.children,l=t.width,u=t.height,d=oPe(i);return c(FI.Provider,{value:n,children:c(LI.Provider,{value:a,children:c(kQ.Provider,{value:i,children:c(NQ.Provider,{value:d,children:c(EQ.Provider,{value:o,children:c(CQ.Provider,{value:u,children:c(PQ.Provider,{value:l,children:s})})})})})})})},sPe=function(){return A.useContext(EQ)},TQ=function(t){var r=A.useContext(FI);r==null&&ig();var n=r[t];return n==null&&ig(),n},lPe=function(){var t=A.useContext(FI);return Hp(t)},cPe=function(){var t=A.useContext(LI),r=nPe(t,function(n){return yQ(n.domain,Number.isFinite)});return r||Hp(t)},OQ=function(t){var r=A.useContext(LI);r==null&&ig();var n=r[t];return n==null&&ig(),n},uPe=function(){var t=A.useContext(NQ);return t},dPe=function(){return A.useContext(kQ)},jI=function(){return A.useContext(PQ)},$I=function(){return A.useContext(CQ)};function L1(e){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L1(e)}function fPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IQ(n.key),n)}}function pPe(e,t,r){return t&&hPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mPe(e,t,r){return t=sS(t),gPe(e,DQ()?Reflect.construct(t,r||[],sS(e).constructor):t.apply(e,r))}function gPe(e,t){if(t&&(L1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vPe(e)}function vPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!e})()}function sS(e){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sS(e)}function yPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wO(e,t)}function wO(e,t){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wO(e,t)}function qq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qq(Object(r),!0).forEach(function(n){BI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BI(e,t,r){return t=IQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=xPe(e,"string");return L1(t)=="symbol"?t:t+""}function xPe(e,t){if(L1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(L1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wPe(e,t){return APe(e)||SPe(e,t)||bPe(e,t)||_Pe()}function _Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bPe(e,t){if(e){if(typeof e=="string")return Wq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wq(e,t)}}function Wq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function APe(e){if(Array.isArray(e))return e}function _O(){return _O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_O.apply(this,arguments)}var NPe=function(t,r){var n;return tt.isValidElement(t)?n=tt.cloneElement(t,r):Yr(t)?n=t(r):n=tt.createElement("line",_O({},r,{className:"recharts-reference-line-line"})),n},kPe=function(t,r,n,a,i,o,s,l,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var x=u.y,g=t.y.apply(x,{position:o});if(tf(u,"discard")&&!t.y.isInRange(g))return null;var y=[{x:d+h,y:g},{x:d,y:g}];return l==="left"?y.reverse():y}if(r){var _=u.x,b=t.x.apply(_,{position:o});if(tf(u,"discard")&&!t.x.isInRange(b))return null;var S=[{x:b,y:f+m},{x:b,y:f}];return s==="top"?S.reverse():S}if(a){var C=u.segment,E=C.map(function(O){return t.apply(O,{position:o})});return tf(u,"discard")&&xCe(E,function(O){return!t.isInRange(O)})?null:E}return null};function EPe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,s=e.className,l=e.alwaysShow,u=sPe(),d=TQ(a),f=OQ(i),h=uPe();if(!u||!h)return null;Gu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=MI({x:d.scale,y:f.scale}),x=wo(t),g=wo(r),y=n&&n.length===2,_=kPe(m,x,g,y,h,e.position,d.orientation,f.orientation,e);if(!_)return null;var b=wPe(_,2),S=b[0],C=S.x,E=S.y,O=b[1],T=O.x,M=O.y,L=tf(e,"hidden")?"url(#".concat(u,")"):void 0,z=zq(zq({clipPath:L},Or(e,!0)),{},{x1:C,y1:E,x2:T,y2:M});return tt.createElement(Dn,{className:fn("recharts-reference-line",s)},NPe(o,z),jo.renderCallByParent(e,YCe({x1:C,y1:E,x2:T,y2:M})))}var UI=function(e){function t(){return fPe(this,t),mPe(this,t,arguments)}return yPe(t,e),pPe(t,[{key:"render",value:function(){return tt.createElement(EPe,this.props)}}])}(tt.Component);BI(UI,"displayName","ReferenceLine");BI(UI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(this,arguments)}function j1(e){"@babel/helpers - typeof";return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j1(e)}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){u3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MQ(n.key),n)}}function TPe(e,t,r){return t&&PPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OPe(e,t,r){return t=lS(t),DPe(e,RQ()?Reflect.construct(t,r||[],lS(e).constructor):t.apply(e,r))}function DPe(e,t){if(t&&(j1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IPe(e)}function IPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RQ=function(){return!!e})()}function lS(e){return lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lS(e)}function RPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SO(e,t)}function SO(e,t){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},SO(e,t)}function u3(e,t,r){return t=MQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQ(e){var t=MPe(e,"string");return j1(t)=="symbol"?t:t+""}function MPe(e,t){if(j1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(j1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var FPe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=MI({x:a.scale,y:i.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return tf(t,"discard")&&!o.isInRange(s)?null:s},d3=function(e){function t(){return CPe(this,t),OPe(this,t,arguments)}return RPe(t,e),TPe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=wo(a),d=wo(i);if(Gu(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=FPe(this.props);if(!f)return null;var h=f.x,m=f.y,x=this.props,g=x.shape,y=x.className,_=tf(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=Hq(Hq({clipPath:_},Or(this.props,!0)),{},{cx:h,cy:m});return tt.createElement(Dn,{className:fn("recharts-reference-dot",y)},t.renderDot(g,b),jo.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(tt.Component);u3(d3,"displayName","ReferenceDot");u3(d3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});u3(d3,"renderDot",function(e,t){var r;return tt.isValidElement(e)?r=tt.cloneElement(e,t):Yr(e)?r=e(t):r=tt.createElement(Vw,bO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AO.apply(this,arguments)}function $1(e){"@babel/helpers - typeof";return $1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$1(e)}function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(n){f3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LQ(n.key),n)}}function $Pe(e,t,r){return t&&jPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BPe(e,t,r){return t=cS(t),UPe(e,FQ()?Reflect.construct(t,r||[],cS(e).constructor):t.apply(e,r))}function UPe(e,t){if(t&&($1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qPe(e)}function qPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FQ=function(){return!!e})()}function cS(e){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cS(e)}function zPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NO(e,t)}function NO(e,t){return NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NO(e,t)}function f3(e,t,r){return t=LQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LQ(e){var t=WPe(e,"string");return $1(t)=="symbol"?t:t+""}function WPe(e,t){if($1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VPe=function(t,r,n,a,i){var o=i.x1,s=i.x2,l=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=MI({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},x={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return tf(i,"discard")&&(!h.isInRange(m)||!h.isInRange(x))?null:SQ(m,x)},h3=function(e){function t(){return LPe(this,t),BPe(this,t,arguments)}return zPe(t,e),$Pe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;Gu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=wo(a),h=wo(i),m=wo(o),x=wo(s),g=this.props.shape;if(!f&&!h&&!m&&!x&&!g)return null;var y=VPe(f,h,m,x,this.props);if(!y&&!g)return null;var _=tf(this.props,"hidden")?"url(#".concat(d,")"):void 0;return tt.createElement(Dn,{className:fn("recharts-reference-area",l)},t.renderRect(g,Kq(Kq({clipPath:_},Or(this.props,!0)),y)),jo.renderCallByParent(this.props,y))}}])}(tt.Component);f3(h3,"displayName","ReferenceArea");f3(h3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});f3(h3,"renderRect",function(e,t){var r;return tt.isValidElement(e)?r=tt.cloneElement(e,t):Yr(e)?r=e(t):r=tt.createElement(II,AO({},t,{className:"recharts-reference-area-rect"})),r});function jQ(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function HPe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ZCe(n,r)}function GPe(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,s=e.height;return t===1?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}function uS(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function KPe(e,t){return jQ(e,t+1)}function YPe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,s=t.end,l=0,u=1,d=o,f=function(){var x=n==null?void 0:n[l];if(x===void 0)return{v:jQ(n,u)};var g=l,y,_=function(){return y===void 0&&(y=r(x,g)),y},b=x.coordinate,S=l===0||uS(e,b,_,d,s);S||(l=0,d=o,u+=1),S&&(d=b+e*(_()/2+a),l+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function Yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yq(Object(r),!0).forEach(function(n){XPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XPe(e,t,r){return t=ZPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZPe(e){var t=JPe(e,"string");return zx(t)=="symbol"?t:t+""}function JPe(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QPe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,s=t.start,l=t.end,u=function(h){var m=i[h],x,g=function(){return x===void 0&&(x=r(m,h)),x};if(h===o-1){var y=e*(m.coordinate+e*g()/2-l);i[h]=m=Es(Es({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=Es(Es({},m),{},{tickCoord:m.coordinate});var _=uS(e,m.tickCoord,g,s,l);_&&(l=m.tickCoord-e*(g()/2+a),i[h]=Es(Es({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function eTe(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,l=t.start,u=t.end;if(i){var d=n[s-1],f=r(d,s-1),h=e*(d.coordinate+e*f/2-u);o[s-1]=d=Es(Es({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=uS(e,d.tickCoord,function(){return f},l,u);m&&(u=d.tickCoord-e*(f/2+a),o[s-1]=Es(Es({},d),{},{isShow:!0}))}for(var x=i?s-1:s,g=function(b){var S=o[b],C,E=function(){return C===void 0&&(C=r(S,b)),C};if(b===0){var O=e*(S.coordinate-e*E()/2-l);o[b]=S=Es(Es({},S),{},{tickCoord:O<0?S.coordinate-O*e:S.coordinate})}else o[b]=S=Es(Es({},S),{},{tickCoord:S.coordinate});var T=uS(e,S.tickCoord,E,l,u);T&&(l=S.tickCoord+e*(E()/2+a),o[b]=Es(Es({},S),{},{isShow:!0}))},y=0;y<x;y++)g(y);return o}function qI(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Kt(l)||Dm.isSsr)return KPe(a,typeof l=="number"&&Kt(l)?l:0);var h=[],m=s==="top"||s==="bottom"?"width":"height",x=d&&m==="width"?L2(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(S,C){var E=Yr(u)?u(S.value,C):S.value;return m==="width"?HPe(L2(E,{fontSize:t,letterSpacing:r}),x,f):L2(E,{fontSize:t,letterSpacing:r})[m]},y=a.length>=2?ll(a[1].coordinate-a[0].coordinate):1,_=GPe(i,y,m);return l==="equidistantPreserveStart"?YPe(y,_,g,a,o):(l==="preserveStart"||l==="preserveStartEnd"?h=eTe(y,_,g,a,o,l==="preserveStartEnd"):h=QPe(y,_,g,a,o),h.filter(function(b){return b.isShow}))}var tTe=["viewBox"],rTe=["viewBox"],nTe=["ticks"];function B1(e){"@babel/helpers - typeof";return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B1(e)}function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(n){zI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yP(e,t){if(e==null)return{};var r=aTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BQ(n.key),n)}}function oTe(e,t,r){return t&&Zq(e.prototype,t),r&&Zq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sTe(e,t,r){return t=dS(t),lTe(e,$Q()?Reflect.construct(t,r||[],dS(e).constructor):t.apply(e,r))}function lTe(e,t){if(t&&(B1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cTe(e)}function cTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Q=function(){return!!e})()}function dS(e){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dS(e)}function uTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kO(e,t)}function zI(e,t,r){return t=BQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BQ(e){var t=dTe(e,"string");return B1(t)=="symbol"?t:t+""}function dTe(e,t){if(B1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(B1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wy=function(e){function t(r){var n;return iTe(this,t),n=sTe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return uTe(t,e),oTe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=yP(n,tTe),s=this.props,l=s.viewBox,u=yP(s,rTe);return!e1(i,l)||!e1(o,u)||!e1(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,s=a.width,l=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,x,g,y,_,b,S=f?-1:1,C=n.tickSize||d,E=Kt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=x=n.coordinate,y=o+ +!f*l,g=y-S*C,b=g-S*h,_=E;break;case"left":g=y=n.coordinate,x=i+ +!f*s,m=x-S*C,_=m-S*h,b=E;break;case"right":g=y=n.coordinate,x=i+ +f*s,m=x+S*C,_=m+S*h,b=E;break;default:m=x=n.coordinate,y=o+ +f*l,g=y+S*C,b=g+S*h,_=E;break}return{line:{x1:m,y1:g,x2:x,y2:y},tick:{x:_,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,f=rl(rl(rl({},Or(this.props,!1)),Or(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=rl(rl({},f),{},{x1:a,y1:i+h*s,x2:a+o,y2:i+h*s})}else{var m=+(l==="left"&&!u||l==="right"&&u);f=rl(rl({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+s})}return c("line",{...f,className:fn("recharts-cartesian-axis-line",vc(d,"className"))})}},{key:"renderTicks",value:function(n,a,i){var o=this,s=this.props,l=s.tickLine,u=s.stroke,d=s.tick,f=s.tickFormatter,h=s.unit,m=qI(rl(rl({},this.props),{},{ticks:n}),a,i),x=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=Or(this.props,!1),_=Or(d,!1),b=rl(rl({},y),{},{fill:"none"},Or(l,!1)),S=m.map(function(C,E){var O=o.getTickLineCoord(C),T=O.line,M=O.tick,L=rl(rl(rl(rl({textAnchor:x,verticalAnchor:g},y),{},{stroke:"none",fill:u},_),M),{},{index:E,payload:C,visibleTicksCount:m.length,tickFormatter:f});return w(Dn,{className:"recharts-cartesian-axis-tick",...tg(o.props,C,E),children:[l&&c("line",{...b,...T,className:fn("recharts-cartesian-axis-tick-line",vc(l,"className"))}),d&&t.renderTickItem(d,L,"".concat(Yr(f)?f(C.value,E):C.value).concat(h||""))]},"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord))});return c("g",{className:"recharts-cartesian-axis-ticks",children:S})}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,s=a.height,l=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=yP(f,nTe),x=h;return Yr(l)&&(x=h&&h.length>0?l(this.props):l(m)),o<=0||s<=0||!x||!x.length?null:w(Dn,{className:fn("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y},children:[i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),jo.renderCallByParent(this.props)]})}}],[{key:"renderTickItem",value:function(n,a,i){var o;return tt.isValidElement(n)?o=tt.cloneElement(n,a):Yr(n)?o=n(a):o=c(rg,{...a,className:"recharts-cartesian-axis-tick-value",children:i}),o}}])}(A.Component);zI(wy,"displayName","CartesianAxis");zI(wy,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var fTe=["x1","y1","x2","y2","key"],hTe=["offset"];function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function Jq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(r),!0).forEach(function(n){pTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pTe(e,t,r){return t=mTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mTe(e){var t=gTe(e,"string");return og(t)=="symbol"?t:t+""}function gTe(e,t){if(og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function Qq(e,t){if(e==null)return{};var r=vTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var yTe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,s=t.height,l=t.ry;return tt.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function UQ(e,t){var r;if(tt.isValidElement(e))r=tt.cloneElement(e,t);else if(Yr(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,s=t.key,l=Qq(t,fTe),u=Or(l,!1);u.offset;var d=Qq(u,hTe);r=tt.createElement("line",F0({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:s}))}return r}function xTe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=Ds(Ds({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return UQ(a,u)});return tt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function wTe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(s,l){var u=Ds(Ds({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return UQ(a,u)});return tt.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _Te(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=s.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var x=!d[m+1],g=x?a+o-h:d[m+1]-h;if(g<=0)return null;var y=m%t.length;return tt.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return tt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function bTe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var x=!d[m+1],g=x?i+s-h:d[m+1]-h;if(g<=0)return null;var y=m%n.length;return tt.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:l,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return tt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var STe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return qJ(qI(Ds(Ds(Ds({},wy.defaultProps),n),{},{ticks:sh(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},ATe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return qJ(qI(Ds(Ds(Ds({},wy.defaultProps),n),{},{ticks:sh(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Ev={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function WI(e){var t,r,n,a,i,o,s=jI(),l=$I(),u=dPe(),d=Ds(Ds({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ev.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ev.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Ev.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Ev.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Ev.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ev.verticalFill,x:Kt(e.x)?e.x:u.left,y:Kt(e.y)?e.y:u.top,width:Kt(e.width)?e.width:u.width,height:Kt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,x=d.height,g=d.syncWithTicks,y=d.horizontalValues,_=d.verticalValues,b=lPe(),S=cPe();if(!Kt(m)||m<=0||!Kt(x)||x<=0||!Kt(f)||f!==+f||!Kt(h)||h!==+h)return null;var C=d.verticalCoordinatesGenerator||STe,E=d.horizontalCoordinatesGenerator||ATe,O=d.horizontalPoints,T=d.verticalPoints;if((!O||!O.length)&&Yr(E)){var M=y&&y.length,L=E({yAxis:S?Ds(Ds({},S),{},{ticks:M?y:S.ticks}):void 0,width:s,height:l,offset:u},M?!0:g);Gu(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(og(L),"]")),Array.isArray(L)&&(O=L)}if((!T||!T.length)&&Yr(C)){var z=_&&_.length,P=C({xAxis:b?Ds(Ds({},b),{},{ticks:z?_:b.ticks}):void 0,width:s,height:l,offset:u},z?!0:g);Gu(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(og(P),"]")),Array.isArray(P)&&(T=P)}return tt.createElement("g",{className:"recharts-cartesian-grid"},tt.createElement(yTe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),tt.createElement(xTe,F0({},d,{offset:u,horizontalPoints:O,xAxis:b,yAxis:S})),tt.createElement(wTe,F0({},d,{offset:u,verticalPoints:T,xAxis:b,yAxis:S})),tt.createElement(_Te,F0({},d,{horizontalPoints:O})),tt.createElement(bTe,F0({},d,{verticalPoints:T})))}WI.displayName="CartesianGrid";var NTe=["type","layout","connectNulls","ref"],kTe=["key"];function U1(e){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U1(e)}function ez(e,t){if(e==null)return{};var r=ETe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ETe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function tz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tz(Object(r),!0).forEach(function(n){$u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cv(e){return OTe(e)||TTe(e)||PTe(e)||CTe()}function CTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PTe(e,t){if(e){if(typeof e=="string")return EO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EO(e,t)}}function TTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OTe(e){if(Array.isArray(e))return EO(e)}function EO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zQ(n.key),n)}}function ITe(e,t,r){return t&&rz(e.prototype,t),r&&rz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RTe(e,t,r){return t=fS(t),MTe(e,qQ()?Reflect.construct(t,r||[],fS(e).constructor):t.apply(e,r))}function MTe(e,t){if(t&&(U1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FTe(e)}function FTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qQ=function(){return!!e})()}function fS(e){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fS(e)}function LTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CO(e,t)}function CO(e,t){return CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CO(e,t)}function $u(e,t,r){return t=zQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zQ(e){var t=jTe(e,"string");return U1(t)=="symbol"?t:t+""}function jTe(e,t){if(U1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(U1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fm=function(e){function t(){var r;DTe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=RTe(this,t,[].concat(a)),$u(r,"state",{isAnimationFinished:!0,totalLength:0}),$u(r,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),$u(r,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(_,b){return _+b});if(!u)return r.generateSimpleStrokeDasharray(s,o);for(var d=Math.floor(o/u),f=o%u,h=s-o,m=[],x=0,g=0;x<l.length;g+=l[x],++x)if(g+l[x]>f){m=[].concat(Cv(l.slice(0,x)),[f-g]);break}var y=m.length%2===0?[0,h]:[h];return[].concat(Cv(t.repeat(l,d)),Cv(m),y).map(function(_){return"".concat(_,"px")}).join(", ")}),$u(r,"id",kg("recharts-line-")),$u(r,"pathRef",function(o){r.mainCurve=o}),$u(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),$u(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return LTe(t,e),ITe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,l=i.yAxis,u=i.layout,d=i.children,f=yc(d,Ww);if(!f)return null;var h=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:Wi(g.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return c(Dn,{...m,children:f.map(function(x){return tt.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:h})})})}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,d=s.dataKey,f=Or(this.props,!1),h=Or(l,!0),m=u.map(function(g,y){var _=tc(tc(tc({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(l,_)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return c(Dn,{className:"recharts-line-dots",...x,children:m},"dots")}},{key:"renderCurveStatically",value:function(n,a,i,o){var s=this.props,l=s.type,u=s.layout,d=s.connectNulls;s.ref;var f=ez(s,NTe),h=tc(tc(tc({},Or(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:l,layout:u,connectNulls:d});return c(q0,{...h,pathRef:this.pathRef})}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,x=o.animateNewValues,g=o.width,y=o.height,_=this.state,b=_.prevPoints,S=_.totalLength;return c(td,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(C){var E=C.t;if(b){var O=b.length/s.length,T=s.map(function(R,j){var V=Math.floor(j*O);if(b[V]){var Z=b[V],te=yo(Z.x,R.x),q=yo(Z.y,R.y);return tc(tc({},R),{},{x:te(E),y:q(E)})}if(x){var Y=yo(g*2,R.x),U=yo(y/2,R.y);return tc(tc({},R),{},{x:Y(E),y:U(E)})}return tc(tc({},R),{},{x:R.x,y:R.y})});return i.renderCurveStatically(T,n,a)}var M=yo(0,S),L=M(E),z;if(l){var P="".concat(l).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});z=i.getStrokeDasharray(L,S,P)}else z=i.generateSimpleStrokeDasharray(S,L);return i.renderCurveStatically(s,n,a,{strokeDasharray:z})}},"line-".concat(m))}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,s=i.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return s&&o&&o.length&&(!u&&d>0||!ng(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,x=a.height,g=a.isAnimationActive,y=a.id;if(i||!s||!s.length)return null;var _=this.state.isAnimationFinished,b=s.length===1,S=fn("recharts-line",l),C=u&&u.allowDataOverflow,E=d&&d.allowDataOverflow,O=C||E,T=dn(y)?this.id:y,M=(n=Or(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},L=M.r,z=L===void 0?3:L,P=M.strokeWidth,R=P===void 0?2:P,j=WX(o)?o:{},V=j.clipDot,Z=V===void 0?!0:V,te=z*2+R;return w(Dn,{className:S,children:[C||E?w("defs",{children:[c("clipPath",{id:"clipPath-".concat(T),children:c("rect",{x:C?h:h-m/2,y:E?f:f-x/2,width:C?m:m*2,height:E?x:x*2})}),!Z&&c("clipPath",{id:"clipPath-dots-".concat(T),children:c("rect",{x:h-te/2,y:f-te/2,width:m+te,height:x+te})})]}):null,!b&&this.renderCurve(O,T),this.renderErrorBar(O,T),(b||o)&&this.renderDots(O,Z,T),(!g||_)&&ef.renderCallByParent(this.props,s)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Cv(n),[0]):n,o=[],s=0;s<a;++s)o=[].concat(Cv(o),Cv(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(tt.isValidElement(n))i=tt.cloneElement(n,a);else if(Yr(n))i=n(a);else{var o=a.key,s=ez(a,kTe),l=fn("recharts-line-dot",typeof n!="boolean"?n.className:"");i=c(Vw,{...s,className:l},o)}return i}}])}(A.PureComponent);$u(fm,"displayName","Line");$u(fm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$u(fm,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,f=l.map(function(h,m){var x=Wi(h,o);return d==="horizontal"?{x:K5({axis:r,ticks:a,bandSize:s,entry:h,index:m}),y:dn(x)?null:n.scale(x),value:x,payload:h}:{x:dn(x)?null:r.scale(x),y:K5({axis:n,ticks:i,bandSize:s,entry:h,index:m}),value:x,payload:h}});return tc({points:f,layout:d},u)});var $Te=["layout","type","stroke","connectNulls","isRange","ref"],BTe=["key"],WQ;function q1(e){"@babel/helpers - typeof";return q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q1(e)}function VQ(e,t){if(e==null)return{};var r=UTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nz(Object(r),!0).forEach(function(n){Gd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function az(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GQ(n.key),n)}}function zTe(e,t,r){return t&&az(e.prototype,t),r&&az(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WTe(e,t,r){return t=hS(t),VTe(e,HQ()?Reflect.construct(t,r||[],hS(e).constructor):t.apply(e,r))}function VTe(e,t){if(t&&(q1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HTe(e)}function HTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HQ=function(){return!!e})()}function hS(e){return hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hS(e)}function GTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PO(e,t)}function PO(e,t){return PO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PO(e,t)}function Gd(e,t,r){return t=GQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GQ(e){var t=KTe(e,"string");return q1(t)=="symbol"?t:t+""}function KTe(e,t){if(q1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(q1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ih=function(e){function t(){var r;qTe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=WTe(this,t,[].concat(a)),Gd(r,"state",{isAnimationFinished:!0}),Gd(r,"id",kg("recharts-area-")),Gd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Yr(o)&&o()}),Gd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Yr(o)&&o()}),r}return GTe(t,e),zTe(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,h=Or(this.props,!1),m=Or(u,!0),x=d.map(function(y,_){var b=Bp(Bp(Bp({key:"dot-".concat(_),r:3},h),m),{},{index:_,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:d});return t.renderDotItem(u,b)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return c(Dn,{className:"recharts-area-dots",...g,children:x})}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].x,u=o[o.length-1].x,d=n*Math.abs(l-u),f=Kp(o.map(function(h){return h.y||0}));return Kt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Kp(i.map(function(h){return h.y||0})),f)),Kt(f)?c("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,s=a.strokeWidth,l=o[0].y,u=o[o.length-1].y,d=n*Math.abs(l-u),f=Kp(o.map(function(h){return h.x||0}));return Kt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Kp(i.map(function(h){return h.x||0})),f)),Kt(f)?c("rect",{x:0,y:l<u?l:l-d,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var s=this.props,l=s.layout,u=s.type,d=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var m=VQ(s,$Te);return w(Dn,{clipPath:i?"url(#clipPath-".concat(o,")"):null,children:[c(q0,{...Or(m,!0),points:n,connectNulls:f,type:u,baseLine:a,layout:l,stroke:"none",className:"recharts-area-area"}),d!=="none"&&c(q0,{...Or(this.props,!1),className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:n}),d!=="none"&&h&&c(q0,{...Or(this.props,!1),className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:a})]})}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,x=this.state,g=x.prevPoints,y=x.prevBaseLine;return c(td,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(_){var b=_.t;if(g){var S=g.length/s.length,C=s.map(function(M,L){var z=Math.floor(L*S);if(g[z]){var P=g[z],R=yo(P.x,M.x),j=yo(P.y,M.y);return Bp(Bp({},M),{},{x:R(b),y:j(b)})}return M}),E;if(Kt(l)&&typeof l=="number"){var O=yo(y,l);E=O(b)}else if(dn(l)||my(l)){var T=yo(y,0);E=T(b)}else E=l.map(function(M,L){var z=Math.floor(L*S);if(y[z]){var P=y[z],R=yo(P.x,M.x),j=yo(P.y,M.y);return Bp(Bp({},M),{},{x:R(b),y:j(b)})}return M});return i.renderAreaStatically(C,E,n,a)}return w(Dn,{children:[c("defs",{children:c("clipPath",{id:"animationClipPath-".concat(a),children:i.renderClipRect(b)})}),c(Dn,{clipPath:"url(#animationClipPath-".concat(a,")"),children:i.renderAreaStatically(s,l,n,a)})]})}},"area-".concat(m))}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,s=i.baseLine,l=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!d&&h>0||!ng(d,o)||!ng(f,s))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,s,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,s=a.points,l=a.className,u=a.top,d=a.left,f=a.xAxis,h=a.yAxis,m=a.width,x=a.height,g=a.isAnimationActive,y=a.id;if(i||!s||!s.length)return null;var _=this.state.isAnimationFinished,b=s.length===1,S=fn("recharts-area",l),C=f&&f.allowDataOverflow,E=h&&h.allowDataOverflow,O=C||E,T=dn(y)?this.id:y,M=(n=Or(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},L=M.r,z=L===void 0?3:L,P=M.strokeWidth,R=P===void 0?2:P,j=WX(o)?o:{},V=j.clipDot,Z=V===void 0?!0:V,te=z*2+R;return w(Dn,{className:S,children:[C||E?w("defs",{children:[c("clipPath",{id:"clipPath-".concat(T),children:c("rect",{x:C?d:d-m/2,y:E?u:u-x/2,width:C?m:m*2,height:E?x:x*2})}),!Z&&c("clipPath",{id:"clipPath-dots-".concat(T),children:c("rect",{x:d-te/2,y:u-te/2,width:m+te,height:x+te})})]}):null,b?null:this.renderArea(O,T),(o||b)&&this.renderDots(O,Z,T),(!g||_)&&ef.renderCallByParent(this.props,s)]})}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(A.PureComponent);WQ=Ih;Gd(Ih,"displayName","Area");Gd(Ih,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Dm.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Gd(Ih,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,s=o??i;if(Kt(s)&&typeof s=="number")return s;var l=a==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});Gd(Ih,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,s=e.bandSize,l=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=t.layout,x=u&&u.length,g=WQ.getBaseValue(t,r,n,a),y=m==="horizontal",_=!1,b=f.map(function(C,E){var O;x?O=u[d+E]:(O=Wi(C,l),Array.isArray(O)?_=!0:O=[g,O]);var T=O[1]==null||x&&Wi(C,l)==null;return y?{x:K5({axis:n,ticks:i,bandSize:s,entry:C,index:E}),y:T?null:a.scale(O[1]),value:O,payload:C}:{x:T?null:n.scale(O[1]),y:K5({axis:a,ticks:o,bandSize:s,entry:C,index:E}),value:O,payload:C}}),S;return x||_?S=b.map(function(C){var E=Array.isArray(C.value)?C.value[0]:null;return y?{x:C.x,y:E!=null&&C.y!=null?a.scale(E):null}:{x:E!=null?n.scale(E):null,y:C.y}}):S=y?a.scale(g):n.scale(g),Bp({points:b,baseLine:S,layout:m,isRange:_},h)});Gd(Ih,"renderDotItem",function(e,t){var r;if(tt.isValidElement(e))r=tt.cloneElement(e,t);else if(Yr(e))r=e(t);else{var n=fn("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=VQ(t,BTe);r=A.createElement(Vw,{...i,key:a,className:n})}return r});function z1(e){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z1(e)}function YTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XQ(n.key),n)}}function ZTe(e,t,r){return t&&XTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JTe(e,t,r){return t=pS(t),QTe(e,KQ()?Reflect.construct(t,r||[],pS(e).constructor):t.apply(e,r))}function QTe(e,t){if(t&&(z1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e6e(e)}function e6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KQ=function(){return!!e})()}function pS(e){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pS(e)}function t6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TO(e,t)}function TO(e,t){return TO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TO(e,t)}function YQ(e,t,r){return t=XQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQ(e){var t=r6e(e,"string");return z1(t)=="symbol"?t:t+""}function r6e(e,t){if(z1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(z1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OO(){return OO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OO.apply(this,arguments)}function n6e(e){var t=e.xAxisId,r=jI(),n=$I(),a=TQ(t);return a==null?null:tt.createElement(wy,OO({},a,{className:fn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return sh(o,!0)}}))}var Rl=function(e){function t(){return YTe(this,t),JTe(this,t,arguments)}return t6e(t,e),ZTe(t,[{key:"render",value:function(){return tt.createElement(n6e,this.props)}}])}(tt.Component);YQ(Rl,"displayName","XAxis");YQ(Rl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function W1(e){"@babel/helpers - typeof";return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W1(e)}function a6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QQ(n.key),n)}}function o6e(e,t,r){return t&&i6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s6e(e,t,r){return t=mS(t),l6e(e,ZQ()?Reflect.construct(t,r||[],mS(e).constructor):t.apply(e,r))}function l6e(e,t){if(t&&(W1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c6e(e)}function c6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZQ=function(){return!!e})()}function mS(e){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mS(e)}function u6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DO(e,t)}function DO(e,t){return DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},DO(e,t)}function JQ(e,t,r){return t=QQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQ(e){var t=d6e(e,"string");return W1(t)=="symbol"?t:t+""}function d6e(e,t){if(W1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(W1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function IO(){return IO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IO.apply(this,arguments)}var f6e=function(t){var r=t.yAxisId,n=jI(),a=$I(),i=OQ(r);return i==null?null:tt.createElement(wy,IO({},i,{className:fn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(s){return sh(s,!0)}}))},Ml=function(e){function t(){return a6e(this,t),s6e(this,t,arguments)}return u6e(t,e),o6e(t,[{key:"render",value:function(){return tt.createElement(f6e,this.props)}}])}(tt.Component);JQ(Ml,"displayName","YAxis");JQ(Ml,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function iz(e){return g6e(e)||m6e(e)||p6e(e)||h6e()}function h6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p6e(e,t){if(e){if(typeof e=="string")return RO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RO(e,t)}}function m6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g6e(e){if(Array.isArray(e))return RO(e)}function RO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var MO=function(t,r,n,a,i){var o=yc(t,UI),s=yc(t,d3),l=[].concat(iz(o),iz(s)),u=yc(t,h3),d="".concat(a,"Id"),f=a[0],h=r;if(l.length&&(h=l.reduce(function(g,y){if(y.props[d]===n&&tf(y.props,"extendDomain")&&Kt(y.props[f])){var _=y.props[f];return[Math.min(g[0],_),Math.max(g[1],_)]}return g},h)),u.length){var m="".concat(f,"1"),x="".concat(f,"2");h=u.reduce(function(g,y){if(y.props[d]===n&&tf(y.props,"extendDomain")&&Kt(y.props[m])&&Kt(y.props[x])){var _=y.props[m],b=y.props[x];return[Math.min(g[0],_,b),Math.max(g[1],_,b)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,y){return Kt(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},h)),h},xP={exports:{}},oz;function v6e(){return oz||(oz=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||l,h),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,x=new Array(m);h<m;h++)x[h]=f[h].fn;return x},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,h,m,x){var g=r?r+u:u;if(!this._events[g])return!1;var y=this._events[g],_=arguments.length,b,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),_){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,x),!0}for(S=1,b=new Array(_-1);S<_;S++)b[S-1]=arguments[S];y.fn.apply(y.context,b)}else{var C=y.length,E;for(S=0;S<C;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),_){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,d);break;case 3:y[S].fn.call(y[S].context,d,f);break;case 4:y[S].fn.call(y[S].context,d,f,h);break;default:if(!b)for(E=1,b=new Array(_-1);E<_;E++)b[E-1]=arguments[E];y[S].fn.apply(y[S].context,b)}}return!0},s.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===d&&(!h||x.once)&&(!f||x.context===f)&&o(this,m);else{for(var g=0,y=[],_=x.length;g<_;g++)(x[g].fn!==d||h&&!x[g].once||f&&x[g].context!==f)&&y.push(x[g]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(xP)),xP.exports}var y6e=v6e();const x6e=ia(y6e);var wP=new x6e,_P="recharts.syncMouseEvents";function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function w6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eee(n.key),n)}}function b6e(e,t,r){return t&&_6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bP(e,t,r){return t=eee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=S6e(e,"string");return Wx(t)=="symbol"?t:t+""}function S6e(e,t){if(Wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A6e=function(){function e(){w6e(this,e),bP(this,"activeIndex",0),bP(this,"coordinateList",[]),bP(this,"layout","horizontal")}return b6e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,s=a.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+l+u,h=o+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function N6e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Kt(n)&&Kt(a))return!0}return!1}function k6e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function tee(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=La(t,r,n,a),s=La(t,r,n,i);return{points:[o,s],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function E6e(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=La(s,l,u,f),m=La(s,l,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return tee(t);return[{x:n,y:a},{x:i,y:o}]}function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sz(Object(r),!0).forEach(function(n){C6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C6e(e,t,r){return t=P6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P6e(e){var t=T6e(e,"string");return Vx(t)=="symbol"?t:t+""}function T6e(e,t){if(Vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O6e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var x,g=q0;if(h==="ScatterChart")x=o,g=qke;else if(h==="BarChart")x=k6e(f,o,l,d),g=II;else if(f==="radial"){var y=tee(o),_=y.cx,b=y.cy,S=y.radius,C=y.startAngle,E=y.endAngle;x={cx:_,cy:b,startAngle:C,endAngle:E,innerRadius:S,outerRadius:S},g=QJ}else x={points:E6e(f,o,l)},g=q0;var O=yb(yb(yb(yb({stroke:"#ccc",pointerEvents:"none"},l),x),Or(m,!1)),{},{payload:s,payloadIndex:u,className:fn("recharts-tooltip-cursor",m.className)});return A.isValidElement(m)?A.cloneElement(m,O):A.createElement(g,O)}var D6e=["item"],I6e=["children","className","width","height","style","compact","title","desc"];function V1(e){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V1(e)}function lz(e,t){return F6e(e)||M6e(e,t)||nee(e,t)||R6e()}function R6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,s=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,a=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function F6e(e){if(Array.isArray(e))return e}function cz(e,t){if(e==null)return{};var r=L6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function L6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function j6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aee(n.key),n)}}function B6e(e,t,r){return t&&$6e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U6e(e,t,r){return t=gS(t),q6e(e,ree()?Reflect.construct(t,r||[],gS(e).constructor):t.apply(e,r))}function q6e(e,t){if(t&&(V1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z6e(e)}function z6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ree(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ree=function(){return!!e})()}function gS(e){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gS(e)}function W6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FO(e,t)}function FO(e,t){return FO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FO(e,t)}function H1(e){return G6e(e)||H6e(e)||nee(e)||V6e()}function V6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nee(e,t){if(e){if(typeof e=="string")return LO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LO(e,t)}}function H6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G6e(e){if(Array.isArray(e))return LO(e)}function LO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uz(Object(r),!0).forEach(function(n){Gr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gr(e,t,r){return t=aee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aee(e){var t=K6e(e,"string");return V1(t)=="symbol"?t:t+""}function K6e(e,t){if(V1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(V1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y6e={xAxis:["bottom","top"],yAxis:["left","right"]},X6e={width:"100%",height:"100%"},iee={x:0,y:0};function xb(e){return e}var Z6e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},J6e=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,s=a.radius;return Tt(Tt(Tt({},a),La(a.cx,a.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,u=a.angle;return Tt(Tt(Tt({},a),La(a.cx,a.cy,l,u)),{},{angle:u,radius:l})}return iee},p3=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(H1(s),H1(u)):s},[]);return o.length>0?o:t&&t.length&&Kt(a)&&Kt(i)?t.slice(a,i+1):[]};function oee(e){return e==="number"?[0,"auto"]:void 0}var jO=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,s=p3(r,t);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?s:f;h=S5(m,o.dataKey,a)}else h=f&&f[n]||s[n];return h?[].concat(H1(l),[GJ(u,h)]):l},[])},dz=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=Z6e(i,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=h3e(o,s,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,h=jO(t,r,d,f),m=J6e(n,s,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},Q6e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=UJ(d,i);return n.reduce(function(x,g){var y,_=g.type.defaultProps!==void 0?Tt(Tt({},g.type.defaultProps),g.props):g.props,b=_.type,S=_.dataKey,C=_.allowDataOverflow,E=_.allowDuplicatedCategory,O=_.scale,T=_.ticks,M=_.includeHidden,L=_[o];if(x[L])return x;var z=p3(t.data,{graphicalItems:a.filter(function(D){var K,Q=o in D.props?D.props[o]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[o];return Q===L}),dataStartIndex:l,dataEndIndex:u}),P=z.length,R,j,V;N6e(_.domain,C,b)&&(R=Z6(_.domain,null,C),m&&(b==="number"||O!=="auto")&&(V=$2(z,S,"category")));var Z=oee(b);if(!R||R.length===0){var te,q=(te=_.domain)!==null&&te!==void 0?te:Z;if(S){if(R=$2(z,S,b),b==="category"&&m){var Y=s2e(R);E&&Y?(j=R,R=aS(0,P)):E||(R=cU(q,R,g).reduce(function(D,K){return D.indexOf(K)>=0?D:[].concat(H1(D),[K])},[]))}else if(b==="category")E?R=R.filter(function(D){return D!==""&&!dn(D)}):R=cU(q,R,g).reduce(function(D,K){return D.indexOf(K)>=0||K===""||dn(K)?D:[].concat(H1(D),[K])},[]);else if(b==="number"){var U=y3e(z,a.filter(function(D){var K,Q,ae=o in D.props?D.props[o]:(K=D.type.defaultProps)===null||K===void 0?void 0:K[o],se="hide"in D.props?D.props.hide:(Q=D.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return ae===L&&(M||!se)}),S,i,d);U&&(R=U)}m&&(b==="number"||O!=="auto")&&(V=$2(z,S,"category"))}else m?R=aS(0,P):s&&s[L]&&s[L].hasStack&&b==="number"?R=h==="expand"?[0,1]:HJ(s[L].stackGroups,l,u):R=BJ(z,a.filter(function(D){var K=o in D.props?D.props[o]:D.type.defaultProps[o],Q="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return K===L&&(M||!Q)}),b,d,!0);if(b==="number")R=MO(f,R,L,i,T),q&&(R=Z6(q,R,C));else if(b==="category"&&q){var G=q,J=R.every(function(D){return G.indexOf(D)>=0});J&&(R=G)}}return Tt(Tt({},x),{},Gr({},L,Tt(Tt({},_),{},{axisType:i,domain:R,categoricalDomain:V,duplicateDomain:j,originalDomain:(y=_.domain)!==null&&y!==void 0?y:Z,isCategorical:m,layout:d})))},{})},eOe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=p3(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),m=h.length,x=UJ(d,i),g=-1;return n.reduce(function(y,_){var b=_.type.defaultProps!==void 0?Tt(Tt({},_.type.defaultProps),_.props):_.props,S=b[o],C=oee("number");if(!y[S]){g++;var E;return x?E=aS(0,m):s&&s[S]&&s[S].hasStack?(E=HJ(s[S].stackGroups,l,u),E=MO(f,E,S,i)):(E=Z6(C,BJ(h,n.filter(function(O){var T,M,L=o in O.props?O.props[o]:(T=O.type.defaultProps)===null||T===void 0?void 0:T[o],z="hide"in O.props?O.props.hide:(M=O.type.defaultProps)===null||M===void 0?void 0:M.hide;return L===S&&!z}),"number",d),a.defaultProps.allowDataOverflow),E=MO(f,E,S,i)),Tt(Tt({},y),{},Gr({},S,Tt(Tt({axisType:i},a.defaultProps),{},{hide:!0,orientation:vc(Y6e,"".concat(i,".").concat(g%2),null),domain:E,originalDomain:C,isCategorical:x,layout:d})))}return y},{})},tOe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=yc(d,i),m={};return h&&h.length?m=Q6e(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(m=eOe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),m},rOe=function(t){var r=Hp(t),n=sh(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:oI(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Y5(r,n)}},fz=function(t){var r=t.children,n=t.defaultShowTooltip,a=ac(r,M1),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},nOe=function(t){return!t||!t.length?!1:t.some(function(r){var n=dh(r&&r.type);return n&&n.indexOf("Bar")>=0})},hz=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},aOe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=ac(f,M1),x=ac(f,Ku),g=Object.keys(l).reduce(function(E,O){var T=l[O],M=T.orientation;return!T.mirror&&!T.hide?Tt(Tt({},E),{},Gr({},M,E[M]+T.width)):E},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(E,O){var T=o[O],M=T.orientation;return!T.mirror&&!T.hide?Tt(Tt({},E),{},Gr({},M,vc(E,"".concat(M))+T.height)):E},{top:h.top||0,bottom:h.bottom||0}),_=Tt(Tt({},y),g),b=_.bottom;m&&(_.bottom+=m.props.height||M1.defaultProps.height),x&&r&&(_=g3e(_,a,n,r));var S=u-_.left-_.right,C=d-_.top-_.bottom;return Tt(Tt({brushBottom:b},_),{},{width:Math.max(S,0),height:Math.max(C,0)})},iOe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},m3=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(_,b){var S=b.graphicalItems,C=b.stackGroups,E=b.offset,O=b.updateId,T=b.dataStartIndex,M=b.dataEndIndex,L=_.barSize,z=_.layout,P=_.barGap,R=_.barCategoryGap,j=_.maxBarSize,V=hz(z),Z=V.numericAxisName,te=V.cateAxisName,q=nOe(S),Y=[];return S.forEach(function(U,G){var J=p3(_.data,{graphicalItems:[U],dataStartIndex:T,dataEndIndex:M}),D=U.type.defaultProps!==void 0?Tt(Tt({},U.type.defaultProps),U.props):U.props,K=D.dataKey,Q=D.maxBarSize,ae=D["".concat(Z,"Id")],se=D["".concat(te,"Id")],fe={},ie=l.reduce(function(ft,_e){var Te=b["".concat(_e.axisType,"Map")],qe=D["".concat(_e.axisType,"Id")];Te&&Te[qe]||_e.axisType==="zAxis"||ig();var yt=Te[qe];return Tt(Tt({},ft),{},Gr(Gr({},_e.axisType,yt),"".concat(_e.axisType,"Ticks"),sh(yt)))},fe),X=ie[te],ue=ie["".concat(te,"Ticks")],de=C&&C[ae]&&C[ae].hasStack&&E3e(U,C[ae].stackGroups),re=dh(U.type).indexOf("Bar")>=0,ke=Y5(X,ue),Re=[],Pe=q&&p3e({barSize:L,stackGroups:C,totalSize:iOe(ie,te)});if(re){var ge,Ye,Qe=dn(Q)?j:Q,st=(ge=(Ye=Y5(X,ue,!0))!==null&&Ye!==void 0?Ye:Qe)!==null&&ge!==void 0?ge:0;Re=m3e({barGap:P,barCategoryGap:R,bandSize:st!==ke?st:ke,sizeList:Pe[se],maxBarSize:Qe}),st!==ke&&(Re=Re.map(function(ft){return Tt(Tt({},ft),{},{position:Tt(Tt({},ft.position),{},{offset:ft.position.offset-st/2})})}))}var Pt=U&&U.type&&U.type.getComposedData;Pt&&Y.push({props:Tt(Tt({},Pt(Tt(Tt({},ie),{},{displayedData:J,props:_,dataKey:K,item:U,bandSize:ke,barPosition:Re,offset:E,stackedData:de,layout:z,dataStartIndex:T,dataEndIndex:M}))),{},Gr(Gr(Gr({key:U.key||"item-".concat(G)},Z,ie[Z]),te,ie[te]),"animationId",O)),childIndex:x2e(U,_.children),item:U})}),Y},m=function(_,b){var S=_.props,C=_.dataStartIndex,E=_.dataEndIndex,O=_.updateId;if(!A9({props:S}))return null;var T=S.children,M=S.layout,L=S.stackOffset,z=S.data,P=S.reverseStackOrder,R=hz(M),j=R.numericAxisName,V=R.cateAxisName,Z=yc(T,n),te=N3e(z,Z,"".concat(j,"Id"),"".concat(V,"Id"),L,P),q=l.reduce(function(D,K){var Q="".concat(K.axisType,"Map");return Tt(Tt({},D),{},Gr({},Q,tOe(S,Tt(Tt({},K),{},{graphicalItems:Z,stackGroups:K.axisType===j&&te,dataStartIndex:C,dataEndIndex:E}))))},{}),Y=aOe(Tt(Tt({},q),{},{props:S,graphicalItems:Z}),b==null?void 0:b.legendBBox);Object.keys(q).forEach(function(D){q[D]=d(S,q[D],Y,D.replace("Map",""),r)});var U=q["".concat(V,"Map")],G=rOe(U),J=h(S,Tt(Tt({},q),{},{dataStartIndex:C,dataEndIndex:E,updateId:O,graphicalItems:Z,stackGroups:te,offset:Y}));return Tt(Tt({formattedGraphicalItems:J,graphicalItems:Z,offset:Y,stackGroups:te},G),q)},x=function(y){function _(b){var S,C,E;return j6e(this,_),E=U6e(this,_,[b]),Gr(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gr(E,"accessibilityManager",new A6e),Gr(E,"handleLegendBBoxUpdate",function(O){if(O){var T=E.state,M=T.dataStartIndex,L=T.dataEndIndex,z=T.updateId;E.setState(Tt({legendBBox:O},m({props:E.props,dataStartIndex:M,dataEndIndex:L,updateId:z},Tt(Tt({},E.state),{},{legendBBox:O}))))}}),Gr(E,"handleReceiveSyncEvent",function(O,T,M){if(E.props.syncId===O){if(M===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(T)}}),Gr(E,"handleBrushChange",function(O){var T=O.startIndex,M=O.endIndex;if(T!==E.state.dataStartIndex||M!==E.state.dataEndIndex){var L=E.state.updateId;E.setState(function(){return Tt({dataStartIndex:T,dataEndIndex:M},m({props:E.props,dataStartIndex:T,dataEndIndex:M,updateId:L},E.state))}),E.triggerSyncEvent({dataStartIndex:T,dataEndIndex:M})}}),Gr(E,"handleMouseEnter",function(O){var T=E.getMouseInfo(O);if(T){var M=Tt(Tt({},T),{},{isTooltipActive:!0});E.setState(M),E.triggerSyncEvent(M);var L=E.props.onMouseEnter;Yr(L)&&L(M,O)}}),Gr(E,"triggeredAfterMouseMove",function(O){var T=E.getMouseInfo(O),M=T?Tt(Tt({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(M),E.triggerSyncEvent(M);var L=E.props.onMouseMove;Yr(L)&&L(M,O)}),Gr(E,"handleItemMouseEnter",function(O){E.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),Gr(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Gr(E,"handleMouseMove",function(O){O.persist(),E.throttleTriggeredAfterMouseMove(O)}),Gr(E,"handleMouseLeave",function(O){E.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};E.setState(T),E.triggerSyncEvent(T);var M=E.props.onMouseLeave;Yr(M)&&M(T,O)}),Gr(E,"handleOuterEvent",function(O){var T=y2e(O),M=vc(E.props,"".concat(T));if(T&&Yr(M)){var L,z;/.*touch.*/i.test(T)?z=E.getMouseInfo(O.changedTouches[0]):z=E.getMouseInfo(O),M((L=z)!==null&&L!==void 0?L:{},O)}}),Gr(E,"handleClick",function(O){var T=E.getMouseInfo(O);if(T){var M=Tt(Tt({},T),{},{isTooltipActive:!0});E.setState(M),E.triggerSyncEvent(M);var L=E.props.onClick;Yr(L)&&L(M,O)}}),Gr(E,"handleMouseDown",function(O){var T=E.props.onMouseDown;if(Yr(T)){var M=E.getMouseInfo(O);T(M,O)}}),Gr(E,"handleMouseUp",function(O){var T=E.props.onMouseUp;if(Yr(T)){var M=E.getMouseInfo(O);T(M,O)}}),Gr(E,"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),Gr(E,"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&E.handleMouseDown(O.changedTouches[0])}),Gr(E,"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&E.handleMouseUp(O.changedTouches[0])}),Gr(E,"handleDoubleClick",function(O){var T=E.props.onDoubleClick;if(Yr(T)){var M=E.getMouseInfo(O);T(M,O)}}),Gr(E,"handleContextMenu",function(O){var T=E.props.onContextMenu;if(Yr(T)){var M=E.getMouseInfo(O);T(M,O)}}),Gr(E,"triggerSyncEvent",function(O){E.props.syncId!==void 0&&wP.emit(_P,E.props.syncId,O,E.eventEmitterSymbol)}),Gr(E,"applySyncEvent",function(O){var T=E.props,M=T.layout,L=T.syncMethod,z=E.state.updateId,P=O.dataStartIndex,R=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)E.setState(Tt({dataStartIndex:P,dataEndIndex:R},m({props:E.props,dataStartIndex:P,dataEndIndex:R,updateId:z},E.state)));else if(O.activeTooltipIndex!==void 0){var j=O.chartX,V=O.chartY,Z=O.activeTooltipIndex,te=E.state,q=te.offset,Y=te.tooltipTicks;if(!q)return;if(typeof L=="function")Z=L(Y,O);else if(L==="value"){Z=-1;for(var U=0;U<Y.length;U++)if(Y[U].value===O.activeLabel){Z=U;break}}var G=Tt(Tt({},q),{},{x:q.left,y:q.top}),J=Math.min(j,G.x+G.width),D=Math.min(V,G.y+G.height),K=Y[Z]&&Y[Z].value,Q=jO(E.state,E.props.data,Z),ae=Y[Z]?{x:M==="horizontal"?Y[Z].coordinate:J,y:M==="horizontal"?D:Y[Z].coordinate}:iee;E.setState(Tt(Tt({},O),{},{activeLabel:K,activeCoordinate:ae,activePayload:Q,activeTooltipIndex:Z}))}else E.setState(O)}),Gr(E,"renderCursor",function(O){var T,M=E.state,L=M.isTooltipActive,z=M.activeCoordinate,P=M.activePayload,R=M.offset,j=M.activeTooltipIndex,V=M.tooltipAxisBandSize,Z=E.getTooltipEventType(),te=(T=O.props.active)!==null&&T!==void 0?T:L,q=E.props.layout,Y=O.key||"_recharts-cursor";return c(O6e,{activeCoordinate:z,activePayload:P,activeTooltipIndex:j,chartName:r,element:O,isActive:te,layout:q,offset:R,tooltipAxisBandSize:V,tooltipEventType:Z},Y)}),Gr(E,"renderPolarAxis",function(O,T,M){var L=vc(O,"type.axisType"),z=vc(E.state,"".concat(L,"Map")),P=O.type.defaultProps,R=P!==void 0?Tt(Tt({},P),O.props):O.props,j=z&&z[R["".concat(L,"Id")]];return A.cloneElement(O,Tt(Tt({},j),{},{className:fn(L,j.className),key:O.key||"".concat(T,"-").concat(M),ticks:sh(j,!0)}))}),Gr(E,"renderPolarGrid",function(O){var T=O.props,M=T.radialLines,L=T.polarAngles,z=T.polarRadius,P=E.state,R=P.radiusAxisMap,j=P.angleAxisMap,V=Hp(R),Z=Hp(j),te=Z.cx,q=Z.cy,Y=Z.innerRadius,U=Z.outerRadius;return A.cloneElement(O,{polarAngles:Array.isArray(L)?L:sh(Z,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(z)?z:sh(V,!0).map(function(G){return G.coordinate}),cx:te,cy:q,innerRadius:Y,outerRadius:U,key:O.key||"polar-grid",radialLines:M})}),Gr(E,"renderLegend",function(){var O=E.state.formattedGraphicalItems,T=E.props,M=T.children,L=T.width,z=T.height,P=E.props.margin||{},R=L-(P.left||0)-(P.right||0),j=jJ({children:M,formattedGraphicalItems:O,legendWidth:R,legendContent:u});if(!j)return null;var V=j.item,Z=cz(j,D6e);return A.cloneElement(V,Tt(Tt({},Z),{},{chartWidth:L,chartHeight:z,margin:P,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Gr(E,"renderTooltip",function(){var O,T=E.props,M=T.children,L=T.accessibilityLayer,z=ac(M,Za);if(!z)return null;var P=E.state,R=P.isTooltipActive,j=P.activeCoordinate,V=P.activePayload,Z=P.activeLabel,te=P.offset,q=(O=z.props.active)!==null&&O!==void 0?O:R;return A.cloneElement(z,{viewBox:Tt(Tt({},te),{},{x:te.left,y:te.top}),active:q,label:Z,payload:q?V:[],coordinate:j,accessibilityLayer:L})}),Gr(E,"renderBrush",function(O){var T=E.props,M=T.margin,L=T.data,z=E.state,P=z.offset,R=z.dataStartIndex,j=z.dataEndIndex,V=z.updateId;return A.cloneElement(O,{key:O.key||"_recharts-brush",onChange:pb(E.handleBrushChange,O.props.onChange),data:L,x:Kt(O.props.x)?O.props.x:P.left,y:Kt(O.props.y)?O.props.y:P.top+P.height+P.brushBottom-(M.bottom||0),width:Kt(O.props.width)?O.props.width:P.width,startIndex:R,endIndex:j,updateId:"brush-".concat(V)})}),Gr(E,"renderReferenceElement",function(O,T,M){if(!O)return null;var L=E,z=L.clipPathId,P=E.state,R=P.xAxisMap,j=P.yAxisMap,V=P.offset,Z=O.type.defaultProps||{},te=O.props,q=te.xAxisId,Y=q===void 0?Z.xAxisId:q,U=te.yAxisId,G=U===void 0?Z.yAxisId:U;return A.cloneElement(O,{key:O.key||"".concat(T,"-").concat(M),xAxis:R[Y],yAxis:j[G],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:z})}),Gr(E,"renderActivePoints",function(O){var T=O.item,M=O.activePoint,L=O.basePoint,z=O.childIndex,P=O.isRange,R=[],j=T.props.key,V=T.item.type.defaultProps!==void 0?Tt(Tt({},T.item.type.defaultProps),T.item.props):T.item.props,Z=V.activeDot,te=V.dataKey,q=Tt(Tt({index:z,dataKey:te,cx:M.x,cy:M.y,r:4,fill:DI(T.item),strokeWidth:2,stroke:"#fff",payload:M.payload,value:M.value},Or(Z,!1)),A5(Z));return R.push(_.renderActiveDot(Z,q,"".concat(j,"-activePoint-").concat(z))),L?R.push(_.renderActiveDot(Z,Tt(Tt({},q),{},{cx:L.x,cy:L.y}),"".concat(j,"-basePoint-").concat(z))):P&&R.push(null),R}),Gr(E,"renderGraphicChild",function(O,T,M){var L=E.filterFormatItem(O,T,M);if(!L)return null;var z=E.getTooltipEventType(),P=E.state,R=P.isTooltipActive,j=P.tooltipAxis,V=P.activeTooltipIndex,Z=P.activeLabel,te=E.props.children,q=ac(te,Za),Y=L.props,U=Y.points,G=Y.isRange,J=Y.baseLine,D=L.item.type.defaultProps!==void 0?Tt(Tt({},L.item.type.defaultProps),L.item.props):L.item.props,K=D.activeDot,Q=D.hide,ae=D.activeBar,se=D.activeShape,fe=!!(!Q&&R&&q&&(K||ae||se)),ie={};z!=="axis"&&q&&q.props.trigger==="click"?ie={onClick:pb(E.handleItemMouseEnter,O.props.onClick)}:z!=="axis"&&(ie={onMouseLeave:pb(E.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:pb(E.handleItemMouseEnter,O.props.onMouseEnter)});var X=A.cloneElement(O,Tt(Tt({},L.props),ie));function ue(_e){return typeof j.dataKey=="function"?j.dataKey(_e.payload):null}if(fe)if(V>=0){var de,re;if(j.dataKey&&!j.allowDuplicatedCategory){var ke=typeof j.dataKey=="function"?ue:"payload.".concat(j.dataKey.toString());de=S5(U,ke,Z),re=G&&J&&S5(J,ke,Z)}else de=U==null?void 0:U[V],re=G&&J&&J[V];if(se||ae){var Re=O.props.activeIndex!==void 0?O.props.activeIndex:V;return[A.cloneElement(O,Tt(Tt(Tt({},L.props),ie),{},{activeIndex:Re})),null,null]}if(!dn(de))return[X].concat(H1(E.renderActivePoints({item:L,activePoint:de,basePoint:re,childIndex:V,isRange:G})))}else{var Pe,ge=(Pe=E.getItemByXY(E.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:X},Ye=ge.graphicalItem,Qe=Ye.item,st=Qe===void 0?O:Qe,Pt=Ye.childIndex,ft=Tt(Tt(Tt({},L.props),ie),{},{activeIndex:Pt});return[A.cloneElement(st,ft),null,null]}return G?[X,null,null]:[X,null]}),Gr(E,"renderCustomized",function(O,T,M){return A.cloneElement(O,Tt(Tt({key:"recharts-customized-".concat(M)},E.props),E.state))}),Gr(E,"renderMap",{CartesianGrid:{handler:xb,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:xb},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:xb},YAxis:{handler:xb},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((S=b.id)!==null&&S!==void 0?S:kg("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=LZ(E.triggeredAfterMouseMove,(C=b.throttleDelay)!==null&&C!==void 0?C:1e3/60),E.state={},E}return W6e(_,y),B6e(_,[{key:"componentDidMount",value:function(){var S,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,C=S.children,E=S.data,O=S.height,T=S.layout,M=ac(C,Za);if(M){var L=M.props.defaultIndex;if(!(typeof L!="number"||L<0||L>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[L]&&this.state.tooltipTicks[L].value,P=jO(this.state,E,L,z),R=this.state.tooltipTicks[L].coordinate,j=(this.state.offset.top+O)/2,V=T==="horizontal",Z=V?{x:R,y:j}:{y:R,x:j},te=this.state.formattedGraphicalItems.find(function(Y){var U=Y.item;return U.type.name==="Scatter"});te&&(Z=Tt(Tt({},Z),te.props.points[L].tooltipPosition),P=te.props.points[L].tooltipPayload);var q={activeTooltipIndex:L,isTooltipActive:!0,activeLabel:z,activePayload:P,activeCoordinate:Z};this.setState(q),this.renderCursor(M),this.accessibilityManager.setIndex(L)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var E,O;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(S){_6([ac(S.children,Za)],[ac(this.props.children,Za)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=ac(this.props.children,Za);if(S&&typeof S.props.shared=="boolean"){var C=S.props.shared?"axis":"item";return s.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var C=this.container,E=C.getBoundingClientRect(),O=ibe(E),T={chartX:Math.round(S.pageX-O.left),chartY:Math.round(S.pageY-O.top)},M=E.width/C.offsetWidth||1,L=this.inRange(T.chartX,T.chartY,M);if(!L)return null;var z=this.state,P=z.xAxisMap,R=z.yAxisMap,j=this.getTooltipEventType(),V=dz(this.state,this.props.data,this.props.layout,L);if(j!=="axis"&&P&&R){var Z=Hp(P).scale,te=Hp(R).scale,q=Z&&Z.invert?Z.invert(T.chartX):null,Y=te&&te.invert?te.invert(T.chartY):null;return Tt(Tt({},T),{},{xValue:q,yValue:Y},V)}return V?Tt(Tt({},T),V):null}},{key:"inRange",value:function(S,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,T=S/E,M=C/E;if(O==="horizontal"||O==="vertical"){var L=this.state.offset,z=T>=L.left&&T<=L.left+L.width&&M>=L.top&&M<=L.top+L.height;return z?{x:T,y:M}:null}var P=this.state,R=P.angleAxisMap,j=P.radiusAxisMap;if(R&&j){var V=Hp(R);return fU({x:T,y:M},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,C=this.getTooltipEventType(),E=ac(S,Za),O={};E&&C==="axis"&&(E.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=A5(this.props,this.handleOuterEvent);return Tt(Tt({},T),O)}},{key:"addListener",value:function(){wP.on(_P,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){wP.removeListener(_P,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,C,E){for(var O=this.state.formattedGraphicalItems,T=0,M=O.length;T<M;T++){var L=O[T];if(L.item===S||L.props.key===S.key||C===dh(L.item.type)&&E===L.childIndex)return L}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,C=this.state.offset,E=C.left,O=C.top,T=C.height,M=C.width;return c("defs",{children:c("clipPath",{id:S,children:c("rect",{x:E,y:O,height:T,width:M})})})}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(C,E){var O=lz(E,2),T=O[0],M=O[1];return Tt(Tt({},C),{},Gr({},T,M.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(C,E){var O=lz(E,2),T=O[0],M=O[1];return Tt(Tt({},C),{},Gr({},T,M.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[S])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(S){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[S])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(S){var C=this.state,E=C.formattedGraphicalItems,O=C.activeItem;if(E&&E.length)for(var T=0,M=E.length;T<M;T++){var L=E[T],z=L.props,P=L.item,R=P.type.defaultProps!==void 0?Tt(Tt({},P.type.defaultProps),P.props):P.props,j=dh(P.type);if(j==="Bar"){var V=(z.data||[]).find(function(Y){return bke(S,Y)});if(V)return{graphicalItem:L,payload:V}}else if(j==="RadialBar"){var Z=(z.data||[]).find(function(Y){return fU(S,Y)});if(Z)return{graphicalItem:L,payload:Z}}else if(s3(L,O)||l3(L,O)||$x(L,O)){var te=HEe({graphicalItem:L,activeTooltipItem:O,itemData:R.data}),q=R.activeIndex===void 0?te:R.activeIndex;return{graphicalItem:Tt(Tt({},L),{},{childIndex:q}),payload:$x(L,O)?R.data[te]:L.props.data[te]}}}return null}},{key:"render",value:function(){var S=this;if(!A9(this))return null;var C=this.props,E=C.children,O=C.className,T=C.width,M=C.height,L=C.style,z=C.compact,P=C.title,R=C.desc,j=cz(C,I6e),V=Or(j,!1);if(z)return c(Uq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId,children:w(S6,{...V,width:T,height:M,title:P,desc:R,children:[this.renderClipPath(),k9(E,this.renderMap)]})});if(this.props.accessibilityLayer){var Z,te;V.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,V.role=(te=this.props.role)!==null&&te!==void 0?te:"application",V.onKeyDown=function(Y){S.accessibilityManager.keyboardEvent(Y)},V.onFocus=function(){S.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return c(Uq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId,children:w("div",{className:fn("recharts-wrapper",O),style:Tt({position:"relative",cursor:"default",width:T,height:M},L),...q,ref:function(U){S.container=U},children:[w(S6,{...V,width:T,height:M,title:P,desc:R,style:X6e,children:[this.renderClipPath(),k9(E,this.renderMap)]}),this.renderLegend(),this.renderTooltip()]})})}}])}(A.Component);Gr(x,"displayName",r),Gr(x,"defaultProps",Tt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Gr(x,"getDerivedStateFromProps",function(y,_){var b=y.dataKey,S=y.data,C=y.children,E=y.width,O=y.height,T=y.layout,M=y.stackOffset,L=y.margin,z=_.dataStartIndex,P=_.dataEndIndex;if(_.updateId===void 0){var R=fz(y);return Tt(Tt(Tt({},R),{},{updateId:0},m(Tt(Tt({props:y},R),{},{updateId:0}),_)),{},{prevDataKey:b,prevData:S,prevWidth:E,prevHeight:O,prevLayout:T,prevStackOffset:M,prevMargin:L,prevChildren:C})}if(b!==_.prevDataKey||S!==_.prevData||E!==_.prevWidth||O!==_.prevHeight||T!==_.prevLayout||M!==_.prevStackOffset||!e1(L,_.prevMargin)){var j=fz(y),V={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},Z=Tt(Tt({},dz(_,S,T)),{},{updateId:_.updateId+1}),te=Tt(Tt(Tt({},j),V),Z);return Tt(Tt(Tt({},te),m(Tt({props:y},te),_)),{},{prevDataKey:b,prevData:S,prevWidth:E,prevHeight:O,prevLayout:T,prevStackOffset:M,prevMargin:L,prevChildren:C})}if(!_6(C,_.prevChildren)){var q,Y,U,G,J=ac(C,M1),D=J&&(q=(Y=J.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&q!==void 0?q:z,K=J&&(U=(G=J.props)===null||G===void 0?void 0:G.endIndex)!==null&&U!==void 0?U:P,Q=D!==z||K!==P,ae=!dn(S),se=ae&&!Q?_.updateId:_.updateId+1;return Tt(Tt({updateId:se},m(Tt(Tt({props:y},_),{},{updateId:se,dataStartIndex:D,dataEndIndex:K}),_)),{},{prevChildren:C,dataStartIndex:D,dataEndIndex:K})}return null}),Gr(x,"renderActiveDot",function(y,_,b){var S;return A.isValidElement(y)?S=A.cloneElement(y,_):Yr(y)?S=y(_):S=c(Vw,{..._}),c(Dn,{className:"recharts-active-dot",children:S},b)});var g=A.forwardRef(function(_,b){return c(x,{..._,ref:b})});return g.displayName=x.displayName,g},see=m3({chartName:"LineChart",GraphicalChild:fm,axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:RI}),Hx=m3({chartName:"BarChart",GraphicalChild:nu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:RI}),Xp=m3({chartName:"PieChart",GraphicalChild:Ls,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:o3},{axisType:"radiusAxis",AxisComp:a3}],formatAxisMap:L3e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),lee=m3({chartName:"AreaChart",GraphicalChild:Ih,axisComponents:[{axisType:"xAxis",AxisComp:Rl},{axisType:"yAxis",AxisComp:Ml}],formatAxisMap:RI});const Pv=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],oOe=({revenueData:e=[],appointmentTypeData:t=[],dailyAppointmentData:r=[],treatmentStatusData:n=[],profitEstimationData:a={conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:i=0,dailyVisitors:o=0,revenueChangePercentage:s=0,dailyAppointmentsChangePercentage:l=0,overallTreatmentProgress:u=0,patientAgeData:d=[],appointmentStatusData:f=[],treatmentPlanStatusData:h=[],upcomingWeeklyAppointmentTrendData:m=[]})=>{const x=t.reduce((S,C)=>S+C.value,0),g=f.reduce((S,C)=>S+C.value,0),y=h.reduce((S,C)=>S+C.value,0),_=["#FBBF24","#34D399","#F87171","#9CA3AF"],b=["#60A5FA","#34D399","#FBBF24","#F87171"];return w("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:[w(sr,{className:"col-span-1 md:col-span-2 xl:col-span-2",children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[w("div",{children:[w(xr,{className:"text-3xl font-bold",children:["",i?i.toLocaleString():"0"]}),c("p",{className:"text-xs text-muted-foreground",children:"Overall Revenue / Appointments"})]}),w("div",{className:"flex items-center space-x-2",children:[w("span",{className:`text-xs flex items-center ${s>=0?"text-green-500":"text-red-500"}`,children:[c(Mce,{className:"h-3 w-3 mr-1"})," ",s>=0?"+":"",s.toFixed(2),"%"]}),w(Wr,{defaultValue:"monthly",children:[c(Br,{className:"w-[110px] h-8 text-xs",children:c(Vr,{placeholder:"Select"})}),w(Ur,{children:[c(wt,{value:"monthly",children:"Monthly"}),c(wt,{value:"yearly",children:"Yearly"})]})]})]})]}),c(mr,{className:"pl-2 pr-6",children:c(Ps,{width:"100%",height:250,children:w(see,{data:e,children:[c(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),c(Ml,{hide:!0}),c(Za,{contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(S,C)=>[`${S} ${C==="uv"?"Appointments":"Revenue"}`,null]}),c(fm,{type:"monotone",dataKey:"uv",name:"Appointments",stroke:"#60A5FA",strokeWidth:2,dot:{r:4,fill:"#60A5FA",stroke:"#fff",strokeWidth:2},activeDot:{r:6}}),c(fm,{type:"monotone",dataKey:"pv",name:"Revenue",stroke:"#4F46E5",strokeWidth:2,dot:!1})]})})})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Appointment Types"}),w(Wr,{defaultValue:"monthly",children:[c(Br,{className:"w-[110px] h-8 text-xs",children:c(Vr,{placeholder:"Select"})}),w(Ur,{children:[c(wt,{value:"monthly",children:"Monthly"}),c(wt,{value:"yearly",children:"Yearly"})]})]})]}),w(mr,{className:"flex flex-col items-center",children:[c(Ps,{width:"100%",height:180,children:w(Xp,{children:[c(Ls,{data:t,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:t.map((S,C)=>c(Yc,{fill:Pv[C%Pv.length],stroke:Pv[C%Pv.length]},`cell-${C}`))}),c(Za,{formatter:(S,C)=>[`${S} (${(S/x*100).toFixed(1)}%)`,C]})]})}),c("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:t.map((S,C)=>w("div",{className:"flex items-center",children:[c("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:Pv[C%Pv.length]}}),S.name," ",(S.value/x*100).toFixed(1),"%"]},`legend-${C}`))})]})]}),w(sr,{children:[w(yr,{className:"pb-2",children:[c("div",{className:"flex flex-row items-center justify-between space-y-0",children:c(xr,{className:"text-sm font-medium",children:"Appointments Trend"})}),c("p",{className:"text-xs text-muted-foreground",children:"Total scheduled appointments per day over the next 7 days"})]}),c(mr,{className:"pb-4 pl-2 pr-4",children:c(Ps,{width:"100%",height:150,children:w(Hx,{data:m,children:[c(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),c(Ml,{allowDecimals:!1,axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"}}),c(Za,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:S=>[`${S} Appointments`,null]}),c(nu,{dataKey:"value",name:"Appointments",fill:"#22C55E",radius:[4,4,0,0],barSize:12})]})})})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Treatment Plan Status"}),c(Fe,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0",children:c(Sce,{className:"h-4 w-4"})})]}),w(mr,{children:[w("div",{className:"flex items-center justify-between mb-4",children:[w("div",{className:"flex items-center space-x-3",children:[c("div",{className:"p-2 bg-indigo-100 rounded-lg",children:c($0,{className:"h-5 w-5 text-indigo-600"})}),w("div",{children:[c("p",{className:"text-sm font-medium",children:"Overall Progress"}),c("p",{className:"text-xs text-muted-foreground",children:"Across Active Plans"})]})]}),w("div",{className:"text-lg font-semibold",children:[u.toFixed(0),"%"]})]}),c(Ps,{width:"100%",height:100,children:w(lee,{data:n,margin:{top:5,right:0,left:0,bottom:0},children:[c("defs",{children:w("linearGradient",{id:"colorStatus",x1:"0",y1:"0",x2:"0",y2:"1",children:[c("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.1}),c("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),c(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),c(Ml,{hide:!0,domain:[0,100]})," ",c(Za,{formatter:S=>[`${S}% Complete`,null]}),c(Ih,{type:"monotone",dataKey:"value",name:"Completion Rate",stroke:"#4F46E5",fillOpacity:1,fill:"url(#colorStatus)",strokeWidth:2,dot:{r:4,fill:"#4F46E5",stroke:"#fff",strokeWidth:2},activeDot:{r:6}})]})})]})]}),w(sr,{children:[w(yr,{className:"pb-4",children:[c(xr,{className:"text-sm font-medium",children:"Profit Estimation"}),c("p",{className:"text-xs text-muted-foreground",children:"Based on completed treatments"})]}),w(mr,{className:"flex flex-col items-center",children:[c(Ps,{width:"100%",height:120,children:w(Xp,{children:[w(Ls,{data:[{name:"Conversion",value:a.conversionRate},{name:"Remaining",value:100-a.conversionRate}],cx:"50%",cy:"50%",innerRadius:45,outerRadius:60,startAngle:90,endAngle:90+360*(a.conversionRate/100),dataKey:"value",stroke:"none",children:[c(Yc,{fill:"#4F46E5"}),c(Yc,{fill:"#E5E7EB"})]}),c("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fill:"#6B7280",children:"Conversion"}),w("text",{x:"50%",y:"65%",textAnchor:"middle",dominantBaseline:"middle",fontSize:"18",fontWeight:"bold",fill:"#111827",children:[a.conversionRate.toFixed(0),"%"]})]})}),w("div",{className:"flex justify-around w-full mt-4 text-xs border-t pt-4",children:[w("div",{className:"text-center",children:[c("p",{className:"text-muted-foreground",children:"Est. Sales"}),c("p",{className:"font-semibold",children:a.estimatedSales.toLocaleString()})]}),w("div",{className:"text-center",children:[c("p",{className:"text-muted-foreground",children:"Est. Profit"}),w("p",{className:"font-semibold",children:["",a.estimatedProfit.toLocaleString()]})]})]})]})]}),w(sr,{children:[c(yr,{className:"pb-2",children:c(xr,{className:"text-sm font-medium",children:"Patient Age Distribution"})}),c(mr,{className:"pb-4 pl-2 pr-4",children:c(Ps,{width:"100%",height:200,children:w(Hx,{data:d,layout:"vertical",barCategoryGap:"20%",children:[c(Rl,{type:"number",hide:!0}),c(Ml,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,style:{fontSize:"12px"},width:60}),c(Za,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),c(nu,{dataKey:"value",name:"Patients",fill:"#8B5CF6",radius:[0,4,4,0],barSize:10})]})})})]}),w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Appointment Status"})}),w(mr,{className:"flex flex-col items-center",children:[c(Ps,{width:"100%",height:180,children:w(Xp,{children:[c(Ls,{data:f,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:f.map((S,C)=>c(Yc,{fill:_[C%_.length],stroke:_[C%_.length]},`cell-apt-status-${C}`))}),c(Za,{formatter:(S,C)=>[`${S} (${g>0?(S/g*100).toFixed(1):0}%)`,C]})]})}),c("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:f.map((S,C)=>w("div",{className:"flex items-center",children:[c("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:_[C%_.length]}}),S.name," (",g>0?(S.value/g*100).toFixed(1):0,"%)"]},`legend-apt-status-${C}`))})]})]}),w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Treatment Plan Status"})}),w(mr,{className:"flex flex-col items-center",children:[c(Ps,{width:"100%",height:180,children:w(Xp,{children:[c(Ls,{data:h,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:h.map((S,C)=>c(Yc,{fill:b[C%b.length],stroke:b[C%b.length]},`cell-tp-status-${C}`))}),c(Za,{formatter:(S,C)=>[`${S} (${y>0?(S/y*100).toFixed(1):0}%)`,C]})]})}),c("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:h.map((S,C)=>w("div",{className:"flex items-center",children:[c("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:b[C%b.length]}}),S.name," (",y>0?(S.value/y*100).toFixed(1):0,"%)"]},`legend-tp-status-${C}`))})]})]})]})};function sOe(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var g3=e=>{const{present:t,children:r}=e,n=lOe(t),a=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=Hr(n.ref,cOe(a));return typeof r=="function"||n.isPresent?A.cloneElement(a,{ref:i}):null};g3.displayName="Presence";function lOe(e){const[t,r]=A.useState(),n=A.useRef(null),a=A.useRef(e),i=A.useRef("none"),o=e?"mounted":"unmounted",[s,l]=sOe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const u=wb(n.current);i.current=s==="mounted"?u:"none"},[s]),ii(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=wb(u);e?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),ii(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=wb(n.current).includes(m.animationName);if(m.target===t&&g&&(l("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=wb(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:A.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function wb(e){return(e==null?void 0:e.animationName)||"none"}function cOe(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var v3="Dialog",[cee,uee]=eo(v3),[uOe,ud]=cee(v3),dee=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=A.useRef(null),l=A.useRef(null),[u,d]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:v3});return c(uOe,{scope:t,triggerRef:s,contentRef:l,contentId:Ll(),titleId:Ll(),descriptionId:Ll(),open:u,onOpenChange:d,onOpenToggle:A.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};dee.displayName=v3;var fee="DialogTrigger",hee=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=ud(fee,r),i=Hr(t,a.triggerRef);return c(pr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":GI(a.open),...n,ref:i,onClick:Wt(e.onClick,a.onOpenToggle)})});hee.displayName=fee;var VI="DialogPortal",[dOe,pee]=cee(VI,{forceMount:void 0}),mee=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=ud(VI,t);return c(dOe,{scope:t,forceMount:r,children:A.Children.map(n,o=>c(g3,{present:r||i.open,children:c(cy,{asChild:!0,container:a,children:o})}))})};mee.displayName=VI;var vS="DialogOverlay",gee=A.forwardRef((e,t)=>{const r=pee(vS,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=ud(vS,e.__scopeDialog);return i.modal?c(g3,{present:n||i.open,children:c(hOe,{...a,ref:t})}):null});gee.displayName=vS;var fOe=sm("DialogOverlay.RemoveScroll"),hOe=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=ud(vS,r);return c(Iw,{as:fOe,allowPinchZoom:!0,shards:[a.contentRef],children:c(pr.div,{"data-state":GI(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),sg="DialogContent",vee=A.forwardRef((e,t)=>{const r=pee(sg,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=ud(sg,e.__scopeDialog);return c(g3,{present:n||i.open,children:i.modal?c(pOe,{...a,ref:t}):c(mOe,{...a,ref:t})})});vee.displayName=sg;var pOe=A.forwardRef((e,t)=>{const r=ud(sg,e.__scopeDialog),n=A.useRef(null),a=Hr(t,r.contentRef,n);return A.useEffect(()=>{const i=n.current;if(i)return y4(i)},[]),c(yee,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Wt(e.onFocusOutside,i=>i.preventDefault())})}),mOe=A.forwardRef((e,t)=>{const r=ud(sg,e.__scopeDialog),n=A.useRef(!1),a=A.useRef(!1);return c(yee,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(s=r.triggerRef.current)==null||s.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),yee=A.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=ud(sg,r),l=A.useRef(null),u=Hr(t,l);return u4(),w(_r,{children:[c(Pw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:c(_g,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":GI(s.open),...o,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),w(_r,{children:[c(vOe,{titleId:s.titleId}),c(xOe,{contentRef:l,descriptionId:s.descriptionId})]})]})}),HI="DialogTitle",xee=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=ud(HI,r);return c(pr.h2,{id:a.titleId,...n,ref:t})});xee.displayName=HI;var wee="DialogDescription",_ee=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=ud(wee,r);return c(pr.p,{id:a.descriptionId,...n,ref:t})});_ee.displayName=wee;var bee="DialogClose",See=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=ud(bee,r);return c(pr.button,{type:"button",...n,ref:t,onClick:Wt(e.onClick,()=>a.onOpenChange(!1))})});See.displayName=bee;function GI(e){return e?"open":"closed"}var Aee="DialogTitleWarning",[gOe,Nee]=Nue(Aee,{contentName:sg,titleName:HI,docsSlug:"dialog"}),vOe=({titleId:e})=>{const t=Nee(Aee),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return A.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},yOe="DialogDescriptionWarning",xOe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nee(yOe).contentName}}.`;return A.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},kee=dee,Eee=hee,Cee=mee,KI=gee,YI=vee,XI=xee,ZI=_ee,y3=See;const ja=kee,Hw=Eee,wOe=Cee,x3=y3,Pee=A.forwardRef(({className:e,...t},r)=>c(KI,{ref:r,className:Rt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Pee.displayName=KI.displayName;const Pa=A.forwardRef(({className:e,children:t,...r},n)=>w(wOe,{children:[c(Pee,{}),w(YI,{ref:n,className:Rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[c(Yi,{children:r["aria-describedby"]}),t,w(y3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c(gh,{className:"h-4 w-4"}),c("span",{className:"sr-only",children:"Close"})]})]})]}));Pa.displayName=YI.displayName;const Ta=({className:e,...t})=>c("div",{className:Rt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ta.displayName="DialogHeader";const Qi=({className:e,...t})=>c("div",{className:Rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Qi.displayName="DialogFooter";const Oa=A.forwardRef(({className:e,...t},r)=>c(XI,{ref:r,className:Rt("text-lg font-semibold leading-none tracking-tight",e),...t}));Oa.displayName=XI.displayName;const Yi=A.forwardRef(({className:e,...t},r)=>c(ZI,{ref:r,className:Rt("text-sm text-muted-foreground",e),...t}));Yi.displayName=ZI.displayName;function _Oe(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var JI="ScrollArea",[Tee,MJe]=eo(JI),[bOe,ou]=Tee(JI),Oee=A.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,l]=A.useState(null),[u,d]=A.useState(null),[f,h]=A.useState(null),[m,x]=A.useState(null),[g,y]=A.useState(null),[_,b]=A.useState(0),[S,C]=A.useState(0),[E,O]=A.useState(!1),[T,M]=A.useState(!1),L=Hr(t,P=>l(P)),z=wg(a);return c(bOe,{scope:r,type:n,dir:z,scrollHideDelay:i,scrollArea:s,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:E,onScrollbarXEnabledChange:O,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:T,onScrollbarYEnabledChange:M,onCornerWidthChange:b,onCornerHeightChange:C,children:c(pr.div,{dir:z,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});Oee.displayName=JI;var Dee="ScrollAreaViewport",Iee=A.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=ou(Dee,r),s=A.useRef(null),l=Hr(t,s,o.onViewportChange);return w(_r,{children:[c("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),c(pr.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Iee.displayName=Dee;var gf="ScrollAreaScrollbar",QI=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ou(gf,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return A.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?c(SOe,{...n,ref:t,forceMount:r}):a.type==="scroll"?c(AOe,{...n,ref:t,forceMount:r}):a.type==="auto"?c(Ree,{...n,ref:t,forceMount:r}):a.type==="always"?c(eR,{...n,ref:t}):null});QI.displayName=gf;var SOe=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ou(gf,e.__scopeScrollArea),[i,o]=A.useState(!1);return A.useEffect(()=>{const s=a.scrollArea;let l=0;if(s){const u=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),c(cs,{present:r||i,children:c(Ree,{"data-state":i?"visible":"hidden",...n,ref:t})})}),AOe=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ou(gf,e.__scopeScrollArea),i=e.orientation==="horizontal",o=_3(()=>l("SCROLL_END"),100),[s,l]=_Oe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,a.scrollHideDelay,l]),A.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(l("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,l,o]),c(cs,{present:r||s!=="hidden",children:c(eR,{"data-state":s==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Wt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Wt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Ree=A.forwardRef((e,t)=>{const r=ou(gf,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=A.useState(!1),s=e.orientation==="horizontal",l=_3(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(s?u:d)}},10);return G1(r.viewport,l),G1(r.content,l),c(cs,{present:n||i,children:c(eR,{"data-state":i?"visible":"hidden",...a,ref:t})})}),eR=A.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=ou(gf,e.__scopeScrollArea),i=A.useRef(null),o=A.useRef(0),[s,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=$ee(s.viewport,s.content),d={...n,sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return TOe(h,o.current,s,m)}return r==="horizontal"?c(NOe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=pz(h,s,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?c(kOe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=pz(h,s);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),NOe=A.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ou(gf,e.__scopeScrollArea),[o,s]=A.useState(),l=A.useRef(null),u=Hr(t,l,i.onScrollbarXChange);return A.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c(Fee,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":w3(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),Uee(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:xS(o.paddingLeft),paddingEnd:xS(o.paddingRight)}})}})}),kOe=A.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ou(gf,e.__scopeScrollArea),[o,s]=A.useState(),l=A.useRef(null),u=Hr(t,l,i.onScrollbarYChange);return A.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c(Fee,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":w3(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),Uee(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:xS(o.paddingTop),paddingEnd:xS(o.paddingBottom)}})}})}),[EOe,Mee]=Tee(gf),Fee=A.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=ou(gf,r),[x,g]=A.useState(null),y=Hr(t,L=>g(L)),_=A.useRef(null),b=A.useRef(""),S=m.viewport,C=n.content-n.viewport,E=Pi(d),O=Pi(l),T=_3(f,10);function M(L){if(_.current){const z=L.clientX-_.current.left,P=L.clientY-_.current.top;u({x:z,y:P})}}return A.useEffect(()=>{const L=z=>{const P=z.target;(x==null?void 0:x.contains(P))&&E(z,C)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[S,x,C,E]),A.useEffect(O,[n,O]),G1(x,T),G1(m.content,T),c(EOe,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:Pi(i),onThumbPointerUp:Pi(o),onThumbPositionChange:O,onThumbPointerDown:Pi(s),children:c(pr.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:Wt(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),_.current=x.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),M(L))}),onPointerMove:Wt(e.onPointerMove,M),onPointerUp:Wt(e.onPointerUp,L=>{const z=L.target;z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),_.current=null})})})}),yS="ScrollAreaThumb",Lee=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Mee(yS,e.__scopeScrollArea);return c(cs,{present:r||a.hasThumb,children:c(COe,{ref:t,...n})})}),COe=A.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=ou(yS,r),o=Mee(yS,r),{onThumbPositionChange:s}=o,l=Hr(t,f=>o.onThumbChange(f)),u=A.useRef(void 0),d=_3(()=>{u.current&&(u.current(),u.current=void 0)},100);return A.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=OOe(f,s);u.current=m,s()}};return s(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,s]),c(pr.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Wt(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),x=f.clientX-m.left,g=f.clientY-m.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:Wt(e.onPointerUp,o.onThumbPointerUp)})});Lee.displayName=yS;var tR="ScrollAreaCorner",jee=A.forwardRef((e,t)=>{const r=ou(tR,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?c(POe,{...e,ref:t}):null});jee.displayName=tR;var POe=A.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=ou(tR,r),[i,o]=A.useState(0),[s,l]=A.useState(0),u=!!(i&&s);return G1(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),G1(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?c(pr.div,{...n,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function xS(e){return e?parseInt(e,10):0}function $ee(e,t){const r=e/t;return isNaN(r)?0:r}function w3(e){const t=$ee(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function TOe(e,t,r,n="ltr"){const a=w3(r),i=a/2,o=t||i,s=a-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-s,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return Bee([l,u],f)(e)}function pz(e,t,r="ltr"){const n=w3(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-n,l=r==="ltr"?[0,o]:[o*-1,0],u=h6(e,l);return Bee([0,o],[0,s])(u)}function Bee(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Uee(e,t){return e>0&&e<t}var OOe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,s=r.top!==i.top;(o||s)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function _3(e,t){const r=Pi(e),n=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),A.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function G1(e,t){const r=Pi(t);ii(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var qee=Oee,DOe=Iee,IOe=jee;const rd=A.forwardRef(({className:e,children:t,...r},n)=>w(qee,{ref:n,className:Rt("relative overflow-hidden",e),...r,children:[c(DOe,{className:"h-full w-full rounded-[inherit]",children:t}),c(zee,{}),c(IOe,{})]}));rd.displayName=qee.displayName;const zee=A.forwardRef(({className:e,orientation:t="vertical",...r},n)=>c(QI,{ref:n,orientation:t,className:Rt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:c(Lee,{className:"relative flex-1 rounded-full bg-border"})}));zee.displayName=QI.displayName;const ROe=({isOpen:e,onClose:t,appointments:r})=>c(ja,{open:e,onOpenChange:t,children:w(Pa,{className:"sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1000px] max-h-[90vh] flex flex-col p-0",children:[w(Ta,{className:"p-6 pb-4",children:[c(Oa,{className:"text-2xl",children:"All Upcoming Appointments"}),c(Yi,{children:"Browse through all scheduled upcoming appointments."})]}),c(rd,{className:"flex-grow border-t border-b",children:c("div",{className:"space-y-4 p-6",children:r.length>0?r.map(n=>w(sr,{className:"shadow-sm hover:shadow-md transition-shadow bg-card",children:[c(yr,{className:"pb-3 pt-4",children:w(xr,{className:"text-lg flex items-center font-medium",children:[c(mi,{className:"w-5 h-5 mr-3 text-primary flex-shrink-0"}),n.patient]})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-3 text-sm pl-12 pr-6 pb-4",children:[w("div",{children:[c("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Type"}),c("p",{className:"mt-1",children:n.type})]}),w("div",{children:[c("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Date & Time"}),w("p",{className:"flex items-center mt-1",children:[c(H8,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),n.start_time?Ut(zr(n.start_time),"EEEE, MMM d, yyyy"):n.date]}),w("p",{className:"flex items-center mt-1",children:[c(ls,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),n.start_time?Ut(zr(n.start_time),"h:mm a"):n.time]})]}),w("div",{children:[c("p",{className:"text-xs text-muted-foreground font-semibold uppercase tracking-wider",children:"Status"}),c("p",{className:"mt-1 capitalize",children:n.status})]})]})]},n.id)):c("div",{className:"text-center py-12 text-muted-foreground",children:"No upcoming appointments found."})})}),c(Qi,{className:"p-6 pt-4 border-t",children:c(Fe,{variant:"outline",onClick:t,children:"Close"})})]})});function MOe(){const e=bo(),[t,r]=A.useState({todaysAppointmentsCount:0,totalPatients:0,avgWaitTime:0,treatmentSuccessRate:0,appointmentsChange:0,patientsChange:0,waitTimeChange:0,successRateChange:0}),[n,a]=A.useState([]),[i,o]=A.useState([]),[s,l]=A.useState(!1),[u,d]=A.useState([]),[f,h]=A.useState(!0),[m,x]=A.useState({revenueData:[],appointmentTypeData:[],dailyAppointmentData:[],treatmentStatusData:[],profitEstimationData:{conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:0,dailyVisitors:0,patientAgeData:[],appointmentStatusData:[],treatmentPlanStatusData:[],upcomingWeeklyAppointmentTrendData:[]});A.useEffect(()=>{g();const _=["appointments","patients","treatment_plans","treatments","medical_records"].map(b=>jD(b,S=>{console.log(`Dashboard detected change in ${b}:`,S),g()}));return()=>{_.forEach(b=>b.unsubscribe())}},[]);const g=async()=>{try{h(!0);const y=new Date,_=Dl(y),b=Qv(y),S=Uo(d6(y,5)),C=dm(y),E=Dl(Fa(y,-6)),O=Qv(y),T=Qv(Fa(y,6)),[M,L,z,P]=await Promise.all([Vt.patients.getAll(),Vt.patients.getTreatmentPlans(null),Vt.patients.getMedicalRecords(null),Vt.appointments.getAll()]),R=M.length,V=P.filter(lt=>{if(!lt.start_time)return!1;const xt=zr(lt.start_time);return v0(xt,{start:_,end:b})}).length;let Z=0,te=0;L.forEach(lt=>{lt.treatments&&lt.treatments.length>0&&(te+=lt.treatments.length,Z+=lt.treatments.filter(xt=>xt.status==="completed").length)});const q=te>0?Math.round(Z/te*100):0;r({todaysAppointmentsCount:V,totalPatients:R,avgWaitTime:15,treatmentSuccessRate:q,appointmentsChange:0,patientsChange:0,waitTimeChange:0,successRateChange:0});const K=P.filter(lt=>lt.status==="scheduled"&&lt.start_time&&zr(lt.start_time)>=_).sort((lt,xt)=>(lt.start_time?zr(lt.start_time).getTime():0)-(xt.start_time?zr(xt.start_time).getTime():0)).map(lt=>({id:lt.id,patient:lt.patients?`${lt.patients.first_name} ${lt.patients.last_name}`:"Unknown Patient",time:lt.start_time?Ut(zr(lt.start_time),"h:mm a"):"No time",date:lt.start_time?Ut(zr(lt.start_time),"MMM d"):"No date",type:lt.type||"Appointment",status:lt.status,start_time:lt.start_time}));o(K),a(K.slice(0,5));const Q=lt=>{if(!lt)return"Unknown Patient";const xt=M.find(Fr=>Fr.id===lt);return xt?`${xt.first_name} ${xt.last_name}`:"Unknown Patient"},ae=P.filter(lt=>lt.status==="completed"&&lt.start_time).map(lt=>({id:lt.id,type:"appointment",title:`Appointment ${lt.type||""} Completed`,patientName:lt.patients?`${lt.patients.first_name} ${lt.patients.last_name}`:"Unknown Patient",itemName:lt.type||"Appointment",staffName:lt.staff?`${lt.staff.first_name} ${lt.staff.last_name}`:void 0,timestamp:zr(lt.start_time),icon:mi,details:`Notes: ${lt.notes||"N/A"}`})),se=L.flatMap(lt=>{const xt=Q(lt.patient_id);return(lt.treatments||[]).filter(Fr=>Fr.status==="completed"&&Fr.updated_at).map(Fr=>({id:Fr.id,type:"treatment",title:"Treatment Completed",patientName:xt,itemName:Fr.type||"Treatment",timestamp:zr(Fr.updated_at),icon:$0,details:`Notes: ${Fr.notes||"N/A"}`}))}),fe=z.filter(lt=>lt.created_at).map(lt=>({id:lt.id,type:"record",title:"Medical Record Added",patientName:Q(lt.patient_id),itemName:lt.record_type||"Medical Record",timestamp:zr(lt.created_at),icon:ls,details:`Summary: ${lt.summary||"N/A"}`})),ie=[...ae,...se,...fe].sort((lt,xt)=>xt.timestamp.getTime()-lt.timestamp.getTime());d(ie.slice(0,3));const X={},ue=new Intl.DateTimeFormat("en",{month:"short"});for(let lt=0;lt<6;lt++){const xt=d6(y,lt),Fr=Ut(xt,"yyyy-MM");X[Fr]={count:0,revenue:0}}P.forEach(lt=>{if(lt.start_time){const xt=zr(lt.start_time);if(v0(xt,{start:S,end:C})){const Fr=Ut(xt,"yyyy-MM");X[Fr]&&(X[Fr].count+=1)}}});const de=Object.keys(X).map(lt=>({name:ue.format(zr(lt+"-01")),uv:X[lt].count,pv:X[lt].revenue,monthKey:lt})).sort((lt,xt)=>lt.monthKey.localeCompare(xt.monthKey)),re=de.reduce((lt,xt)=>lt+(xt.pv||0),0),ke=0,Re=de.map(({name:lt,uv:xt,pv:Fr})=>({name:lt,uv:xt,pv:Fr})),Pe=Uo(y),ge=dm(y),Ye={};P.forEach(lt=>{var Fr;const xt=((Fr=lt.staff)==null?void 0:Fr.role)||"General";if(lt.start_time){const ma=zr(lt.start_time);v0(ma,{start:Pe,end:ge})&&(Ye[xt]=(Ye[xt]||0)+1)}});const Qe=Object.entries(Ye).map(([lt,xt])=>({name:lt,value:xt})),st=G0e({start:_,end:b}),Pt={};st.forEach(lt=>{Pt[Ut(lt,"HH")]=0}),P.forEach(lt=>{if(lt.start_time){const xt=zr(lt.start_time);if(v0(xt,{start:_,end:b})){const Fr=Ut(xt,"HH");Pt[Fr]=(Pt[Fr]||0)+1}}});const _e=["00","04","08","12","14","16","18"].map(lt=>({name:lt,value:Pt[lt]||0})),Te=Object.values(Pt).reduce((lt,xt)=>lt+xt,0),qe=0,yt=F2({start:E,end:O}),vt={},ht=new Intl.DateTimeFormat("en",{weekday:"short"});yt.forEach(lt=>{vt[Ut(lt,"yyyy-MM-dd")]={completed:0,total:0}}),L.forEach(lt=>{(lt.treatments||[]).forEach(xt=>{if(xt.updated_at){const Fr=zr(xt.updated_at);if(v0(Fr,{start:E,end:O})){const ma=Ut(Fr,"yyyy-MM-dd");vt[ma]&&(vt[ma].total+=1,xt.status==="completed"&&(vt[ma].completed+=1))}}})});const Ie=Object.keys(vt).map(lt=>{const xt=vt[lt],Fr=xt.total>0?Math.round(xt.completed/xt.total*100):0;return{name:ht.format(zr(lt)),value:Fr,dayKey:lt}}).sort((lt,xt)=>lt.dayKey.localeCompare(xt.dayKey)),Ze=Ie.length>0?Math.round(Ie.reduce((lt,xt)=>lt+(xt.value||0),0)/Ie.length):0,_t=Ie.map(({name:lt,value:xt})=>({name:lt,value:xt})),Bt={conversionRate:q,estimatedSales:Z,estimatedProfit:0},dr={"0-18":0,"19-35":0,"36-50":0,"51-65":0,"65+":0,Unknown:0};M.forEach(lt=>{const xt=lt.age;xt==null?dr.Unknown++:xt<=18?dr["0-18"]++:xt<=35?dr["19-35"]++:xt<=50?dr["36-50"]++:xt<=65?dr["51-65"]++:dr["65+"]++});const Ir=Object.entries(dr).map(([lt,xt])=>({name:lt,value:xt})),Tr={};P.forEach(lt=>{const xt=lt.status||"Unknown";Tr[xt]=(Tr[xt]||0)+1});const ha=Object.entries(Tr).map(([lt,xt])=>({name:lt.charAt(0).toUpperCase()+lt.slice(1),value:xt})),Xr=F2({start:E,end:O}),Na={},En=new Intl.DateTimeFormat("en",{weekday:"short"});Xr.forEach(lt=>{Na[Ut(lt,"yyyy-MM-dd")]=0}),P.forEach(lt=>{if(lt.start_time){const xt=zr(lt.start_time);if(v0(xt,{start:E,end:O})){const Fr=Ut(xt,"yyyy-MM-dd");Na.hasOwnProperty(Fr)&&Na[Fr]++}}});const si=Object.keys(Na).map(lt=>({name:En.format(zr(lt)),value:Na[lt],dayKey:lt})).sort((lt,xt)=>lt.dayKey.localeCompare(xt.dayKey)).map(({name:lt,value:xt})=>({name:lt,value:xt})),Cn=F2({start:_,end:T}),kr={};Cn.forEach(lt=>{kr[Ut(lt,"yyyy-MM-dd")]=0}),P.forEach(lt=>{if(lt.start_time&&lt.status==="scheduled"){const xt=zr(lt.start_time);if(v0(xt,{start:_,end:T})){const Fr=Ut(xt,"yyyy-MM-dd");kr.hasOwnProperty(Fr)&&kr[Fr]++}}});const fo=Object.keys(kr).map(lt=>({name:En.format(zr(lt)),value:kr[lt],dayKey:lt})).sort((lt,xt)=>lt.dayKey.localeCompare(xt.dayKey)).map(({name:lt,value:xt})=>({name:lt,value:xt})),Jn={};L.forEach(lt=>{const xt=lt.status||"Unknown";Jn[xt]=(Jn[xt]||0)+1});const li=Object.entries(Jn).map(([lt,xt])=>({name:lt.charAt(0).toUpperCase()+lt.slice(1),value:xt}));x({revenueData:Re,appointmentTypeData:Qe,dailyAppointmentData:_e,treatmentStatusData:_t,profitEstimationData:Bt,totalRevenue:re,dailyVisitors:Te,revenueChangePercentage:ke,dailyAppointmentsChangePercentage:qe,overallTreatmentProgress:Ze,patientAgeData:Ir,appointmentStatusData:ha,treatmentPlanStatusData:li,upcomingWeeklyAppointmentTrendData:fo}),h(!1)}catch(y){console.error("Error fetching dashboard data:",y),h(!1)}};return w("div",{className:"space-y-6",children:[c(Aa,{heading:"Dashboard",text:"Overview of your dental practice"}),w("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Today's Appointments"}),c(Hi,{className:"h-4 w-4 text-muted-foreground"})]}),w(mr,{children:[c("div",{className:"text-2xl font-bold",children:t.todaysAppointmentsCount}),t.appointmentsChange!==0&&w("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.appointmentsChange>0?c(G_,{className:"mr-1 h-4 w-4 text-emerald-500"}):c(H_,{className:"mr-1 h-4 w-4 text-red-500"}),w("span",{className:t.appointmentsChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.appointmentsChange),"%"]}),c("span",{className:"ml-1",children:"from last week"})]})]})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Active Patients"}),c(l4,{className:"h-4 w-4 text-muted-foreground"})]}),w(mr,{children:[c("div",{className:"text-2xl font-bold",children:t.totalPatients}),t.patientsChange!==0&&w("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.patientsChange>0?c(G_,{className:"mr-1 h-4 w-4 text-emerald-500"}):c(H_,{className:"mr-1 h-4 w-4 text-red-500"}),w("span",{className:t.patientsChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.patientsChange),"%"]}),c("span",{className:"ml-1",children:"from last month"})]})]})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Avg. Wait Time"}),c(ls,{className:"h-4 w-4 text-muted-foreground"})]}),w(mr,{children:[w("div",{className:"text-2xl font-bold",children:[t.avgWaitTime,"m"]}),t.waitTimeChange!==0&&w("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.waitTimeChange<0?c(H_,{className:"mr-1 h-4 w-4 text-emerald-500"}):c(G_,{className:"mr-1 h-4 w-4 text-red-500"}),w("span",{className:t.waitTimeChange<0?"text-emerald-500":"text-red-500",children:[Math.abs(t.waitTimeChange),"%"]}),c("span",{className:"ml-1",children:t.waitTimeChange<0?"improved":"worse"})]})]})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Treatment Success"}),c($0,{className:"h-4 w-4 text-muted-foreground"})]}),w(mr,{children:[w("div",{className:"text-2xl font-bold",children:[t.treatmentSuccessRate,"%"]}),t.successRateChange!==0&&w("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.successRateChange>0?c(G_,{className:"mr-1 h-4 w-4 text-emerald-500"}):c(H_,{className:"mr-1 h-4 w-4 text-red-500"}),w("span",{className:t.successRateChange>0?"text-emerald-500":"text-red-500",children:[Math.abs(t.successRateChange),"%"]}),c("span",{className:"ml-1",children:"from last quarter"})]})]})]})]}),w("div",{className:"grid gap-4 md:grid-cols-2",children:[w(sr,{children:[c(yr,{children:w("div",{className:"flex items-center justify-between",children:[c(xr,{children:"Upcoming Appointments"}),w(Fe,{variant:"ghost",size:"sm",className:"text-sm",onClick:()=>l(!0),children:["View all",c(im,{className:"ml-1 h-4 w-4"})]})]})}),c(mr,{children:f?c("div",{className:"py-8 text-center text-muted-foreground",children:"Loading appointments..."}):n.length>0?c("div",{className:"space-y-4",children:n.map(y=>w("div",{className:"flex items-center rounded-lg border p-4",children:[c("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10",children:c(mi,{className:"h-5 w-5 text-primary"})}),w("div",{className:"ml-4 flex-1",children:[c("p",{className:"text-sm font-medium",children:y.patient}),c("p",{className:"text-sm text-muted-foreground",children:y.type})]}),w("div",{className:"text-right",children:[c("p",{className:"text-sm font-medium",children:y.date}),c("p",{className:"text-sm text-muted-foreground",children:y.time})]})]},y.id))}):c("div",{className:"py-8 text-center text-muted-foreground",children:"No upcoming appointments"})})]}),w(sr,{children:[c(yr,{children:w("div",{className:"flex items-center justify-between",children:[c(xr,{children:"Recent Activity"}),w(Fe,{variant:"ghost",size:"sm",className:"text-sm",onClick:()=>e("/activity-log"),children:["View all",c(im,{className:"ml-1 h-4 w-4"})]})]})}),c(mr,{children:f?c("div",{className:"py-8 text-center text-muted-foreground",children:"Loading activity..."}):u.length>0?c("div",{className:"space-y-8",children:u.map((y,_)=>{const b=y.icon||$0;return w("div",{className:"flex items-start",children:[c("div",{className:`flex h-9 w-9 items-center justify-center rounded-full ${y.type==="appointment"?"bg-emerald-100":y.type==="treatment"?"bg-blue-100":"bg-purple-100"}`,children:c(b,{className:`h-5 w-5 ${y.type==="appointment"?"text-emerald-600":y.type==="treatment"?"text-blue-600":"text-purple-600"}`})}),w("div",{className:"ml-4 flex-1",children:[c("p",{className:"text-sm font-medium",children:y.title}),y.patientName&&w("p",{className:"text-xs text-muted-foreground",children:["Patient: ",y.patientName]}),y.itemName&&w("p",{className:"text-xs text-muted-foreground",children:["Item: ",y.itemName]}),y.staffName&&w("p",{className:"text-xs text-muted-foreground",children:["Staff: ",y.staffName]}),y.details&&c("p",{className:"text-xs text-muted-foreground italic",children:y.details}),c("p",{className:"text-xs text-muted-foreground mt-0.5",children:Ut(y.timestamp,"MMM d, h:mm a")})]})]},_)})}):c("div",{className:"py-8 text-center text-muted-foreground",children:"No recent activity"})})]})]}),w("div",{className:"mt-6",children:[" ",c(oOe,{revenueData:m.revenueData||[],appointmentTypeData:m.appointmentTypeData||[],dailyAppointmentData:m.dailyAppointmentData||[],treatmentStatusData:m.treatmentStatusData||[],profitEstimationData:m.profitEstimationData||{conversionRate:0,estimatedSales:0,estimatedProfit:0},totalRevenue:m.totalRevenue,dailyVisitors:m.dailyVisitors,revenueChangePercentage:0,dailyAppointmentsChangePercentage:0,overallTreatmentProgress:m.overallTreatmentProgress,patientAgeData:m.patientAgeData||[],appointmentStatusData:m.appointmentStatusData||[],treatmentPlanStatusData:m.treatmentPlanStatusData||[],upcomingWeeklyAppointmentTrendData:m.upcomingWeeklyAppointmentTrendData||[]})]}),c(ROe,{isOpen:s,onClose:()=>l(!1),appointments:i})]})}var FOe="Label",Wee=A.forwardRef((e,t)=>c(pr.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Wee.displayName=FOe;var Vee=Wee;const LOe=Ew("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),er=A.forwardRef(({className:e,...t},r)=>c(Vee,{ref:r,className:Rt(LOe(),e),...t}));er.displayName=Vee.displayName;const Qr=A.forwardRef(({className:e,...t},r)=>c("textarea",{className:Rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Qr.displayName="Textarea";var b3="Tabs",[jOe,FJe]=eo(b3,[uy]),Hee=uy(),[$Oe,rR]=jOe(b3),Gee=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:l="automatic",...u}=e,d=wg(s),[f,h]=hl({prop:n,onChange:a,defaultProp:i??"",caller:b3});return c($Oe,{scope:r,baseId:Ll(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:l,children:c(pr.div,{dir:d,"data-orientation":o,...u,ref:t})})});Gee.displayName=b3;var Kee="TabsList",Yee=A.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=rR(Kee,r),o=Hee(r);return c(sD,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:c(pr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Yee.displayName=Kee;var Xee="TabsTrigger",Zee=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=rR(Xee,r),s=Hee(r),l=ete(o.baseId,n),u=tte(o.baseId,n),d=n===o.value;return c(lD,{asChild:!0,...s,focusable:!a,active:d,children:c(pr.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:Wt(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Wt(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Wt(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});Zee.displayName=Xee;var Jee="TabsContent",Qee=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,s=rR(Jee,r),l=ete(s.baseId,n),u=tte(s.baseId,n),d=n===s.value,f=A.useRef(d);return A.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),c(cs,{present:a||d,children:({present:h})=>c(pr.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});Qee.displayName=Jee;function ete(e,t){return`${e}-trigger-${t}`}function tte(e,t){return`${e}-content-${t}`}var BOe=Gee,rte=Yee,nte=Zee,ate=Qee;const Tg=BOe,Og=A.forwardRef(({className:e,...t},r)=>c(rte,{ref:r,className:Rt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Og.displayName=rte.displayName;const dl=A.forwardRef(({className:e,...t},r)=>c(nte,{ref:r,className:Rt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));dl.displayName=nte.displayName;const Ci=A.forwardRef(({className:e,...t},r)=>c(ate,{ref:r,className:Rt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ci.displayName=ate.displayName;var[S3,LJe]=eo("Tooltip",[Em]),A3=Em(),ite="TooltipProvider",UOe=700,$O="tooltip.open",[qOe,nR]=S3(ite),ote=e=>{const{__scopeTooltip:t,delayDuration:r=UOe,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=A.useRef(!0),s=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c(qOe,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:A.useCallback(u=>{s.current=u},[]),disableHoverableContent:a,children:i})};ote.displayName=ite;var Gx="Tooltip",[zOe,N3]=S3(Gx),ste=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,l=nR(Gx,e.__scopeTooltip),u=A3(t),[d,f]=A.useState(null),h=Ll(),m=A.useRef(0),x=o??l.disableHoverableContent,g=s??l.delayDuration,y=A.useRef(!1),[_,b]=hl({prop:n,defaultProp:a??!1,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent($O))):l.onClose(),i==null||i(T)},caller:Gx}),S=A.useMemo(()=>_?y.current?"delayed-open":"instant-open":"closed",[_]),C=A.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,b(!0)},[b]),E=A.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),O=A.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,b(!0),m.current=0},g)},[g,b]);return A.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),c(m4,{...u,children:c(zOe,{scope:t,contentId:h,open:_,stateAttribute:S,trigger:d,onTriggerChange:f,onTriggerEnter:A.useCallback(()=>{l.isOpenDelayedRef.current?O():C()},[l.isOpenDelayedRef,O,C]),onTriggerLeave:A.useCallback(()=>{x?E():(window.clearTimeout(m.current),m.current=0)},[E,x]),onOpen:C,onClose:E,disableHoverableContent:x,children:r})})};ste.displayName=Gx;var BO="TooltipTrigger",lte=A.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=N3(BO,r),i=nR(BO,r),o=A3(r),s=A.useRef(null),l=Hr(t,s,a.onTriggerChange),u=A.useRef(!1),d=A.useRef(!1),f=A.useCallback(()=>u.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c(Ow,{asChild:!0,...o,children:c(pr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:l,onPointerMove:Wt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Wt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Wt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Wt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Wt(e.onBlur,a.onClose),onClick:Wt(e.onClick,a.onClose)})})});lte.displayName=BO;var WOe="TooltipPortal",[jJe,VOe]=S3(WOe,{forceMount:void 0}),K1="TooltipContent",cte=A.forwardRef((e,t)=>{const r=VOe(K1,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=N3(K1,e.__scopeTooltip);return c(cs,{present:n||o.open,children:o.disableHoverableContent?c(ute,{side:a,...i,ref:t}):c(HOe,{side:a,...i,ref:t})})}),HOe=A.forwardRef((e,t)=>{const r=N3(K1,e.__scopeTooltip),n=nR(K1,e.__scopeTooltip),a=A.useRef(null),i=Hr(t,a),[o,s]=A.useState(null),{trigger:l,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=A.useCallback(()=>{s(null),f(!1)},[f]),m=A.useCallback((x,g)=>{const y=x.currentTarget,_={x:x.clientX,y:x.clientY},b=ZOe(_,y.getBoundingClientRect()),S=JOe(_,b),C=QOe(g.getBoundingClientRect()),E=t8e([...S,...C]);s(E),f(!0)},[f]);return A.useEffect(()=>()=>h(),[h]),A.useEffect(()=>{if(l&&d){const x=y=>m(y,d),g=y=>m(y,l);return l.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[l,d,m,h]),A.useEffect(()=>{if(o){const x=g=>{const y=g.target,_={x:g.clientX,y:g.clientY},b=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),S=!e8e(_,o);b?h():S&&(h(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,d,o,u,h]),c(ute,{...e,ref:i})}),[GOe,KOe]=S3(Gx,{isInside:!1}),YOe=rG("TooltipContent"),ute=A.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,l=N3(K1,r),u=A3(r),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener($O,d),()=>document.removeEventListener($O,d)),[d]),A.useEffect(()=>{if(l.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),c(_g,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:w(g4,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c(YOe,{children:n}),c(GOe,{scope:r,isInside:!0,children:c(z1e,{id:l.contentId,role:"tooltip",children:a||n})})]})})});cte.displayName=K1;var dte="TooltipArrow",XOe=A.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=A3(r);return KOe(dte,r).isInside?null:c(v4,{...a,...n,ref:t})});XOe.displayName=dte;function ZOe(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function JOe(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function QOe(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function e8e(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,f=l.x,h=l.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function t8e(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),r8e(t)}function r8e(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var n8e=ote,a8e=ste,i8e=lte,fte=cte;const Yb=n8e,Xb=a8e,Zb=i8e,q2=A.forwardRef(({className:e,sideOffset:t=4,...r},n)=>c(fte,{ref:n,sideOffset:t,className:Rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));q2.displayName=fte.displayName;var Gw=e=>e.type==="checkbox",L0=e=>e instanceof Date,al=e=>e==null;const hte=e=>typeof e=="object";var Zi=e=>!al(e)&&!Array.isArray(e)&&hte(e)&&!L0(e),pte=e=>Zi(e)&&e.target?Gw(e.target)?e.target.checked:e.target.value:e,o8e=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,mte=(e,t)=>e.has(o8e(t)),s8e=e=>{const t=e.constructor&&e.constructor.prototype;return Zi(t)&&t.hasOwnProperty("isPrototypeOf")},aR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function fi(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(aR&&(e instanceof Blob||n))&&(r||Zi(e)))if(t=r?[]:{},!r&&!s8e(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=fi(e[a]));else return e;return t}var Kw=e=>Array.isArray(e)?e.filter(Boolean):[],Ya=e=>e===void 0,nr=(e,t,r)=>{if(!t||!Zi(e))return r;const n=Kw(t.split(/[,[\].]+?/)).reduce((a,i)=>al(a)?a:a[i],e);return Ya(n)||n===e?Ya(e[t])?r:e[t]:n},oc=e=>typeof e=="boolean",iR=e=>/^\w*$/.test(e),gte=e=>Kw(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Yn=(e,t,r)=>{let n=-1;const a=iR(t)?[t]:gte(t),i=a.length,o=i-1;for(;++n<i;){const s=a[n];let l=r;if(n!==o){const u=e[s];l=Zi(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;e[s]=l,e=e[s]}};const wS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Zc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vte=tt.createContext(null),su=()=>tt.useContext(vte),yte=e=>{const{children:t,...r}=e;return c(vte.Provider,{value:r,children:t})};var xte=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Zc.all&&(t._proxyFormState[o]=!n||Zc.all),r&&(r[o]=!0),e[o]}});return a},UO=e=>al(e)||!hte(e);function ah(e,t){if(UO(e)||UO(t))return e===t;if(L0(e)&&L0(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(L0(i)&&L0(o)||Zi(i)&&Zi(o)||Array.isArray(i)&&Array.isArray(o)?!ah(i,o):i!==o)return!1}}return!0}const wte=(e,t)=>{const r=A.useRef(t);ah(t,r.current)||(r.current=t),A.useEffect(e,r.current)};function l8e(e){const t=su(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,s]=tt.useState(r._formState),l=tt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return wte(()=>r._subscribe({name:a,formState:l.current,exact:i,callback:u=>{!n&&s({...r._formState,...u})}}),[a,n,i]),tt.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),tt.useMemo(()=>xte(o,r,l.current,!1),[o,r])}var Kd=e=>typeof e=="string",_te=(e,t,r,n,a)=>Kd(e)?(n&&t.watch.add(e),nr(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),nr(r,i))):(n&&(t.watchAll=!0),r);function c8e(e){const t=su(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o}=e||{},[s,l]=tt.useState(r._getWatch(n,a));return wte(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:u=>!i&&l(_te(n,r._names,u.values||r._formValues,!1,a))}),[n,a,i,o]),tt.useEffect(()=>r._removeUnmounted()),s}function u8e(e){const t=su(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=mte(a._names.array,r),s=c8e({control:a,name:r,defaultValue:nr(a._formValues,r,nr(a._defaultValues,r,e.defaultValue)),exact:!0}),l=l8e({control:a,name:r,exact:!0}),u=tt.useRef(e),d=tt.useRef(a.register(r,{...e.rules,value:s,...oc(e.disabled)?{disabled:e.disabled}:{}})),f=tt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!nr(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!nr(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!nr(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!nr(l.validatingFields,r)},error:{enumerable:!0,get:()=>nr(l.errors,r)}}),[l,r]),h=tt.useCallback(y=>d.current.onChange({target:{value:pte(y),name:r},type:wS.CHANGE}),[r]),m=tt.useCallback(()=>d.current.onBlur({target:{value:nr(a._formValues,r),name:r},type:wS.BLUR}),[r,a._formValues]),x=tt.useCallback(y=>{const _=nr(a._fields,r);_&&y&&(_._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:b=>y.setCustomValidity(b),reportValidity:()=>y.reportValidity()})},[a._fields,r]),g=tt.useMemo(()=>({name:r,value:s,...oc(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:h,onBlur:m,ref:x}),[r,n,l.disabled,h,m,x,s]);return tt.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(r,{...u.current.rules,...oc(u.current.disabled)?{disabled:u.current.disabled}:{}});const _=(b,S)=>{const C=nr(a._fields,b);C&&C._f&&(C._f.mount=S)};if(_(r,!0),y){const b=fi(nr(a._options.defaultValues,r));Yn(a._defaultValues,r,b),Ya(nr(a._formValues,r))&&Yn(a._formValues,r,b)}return!o&&a.register(r),()=>{(o?y&&!a._state.action:y)?a.unregister(r):_(r,!1)}},[r,a,o,i]),tt.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),tt.useMemo(()=>({field:g,formState:l,fieldState:f}),[g,l,f])}const zp=e=>e.render(u8e(e));var bte=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Fl=e=>Array.isArray(e)?e:[e],mz=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Cs=e=>Zi(e)&&!Object.keys(e).length,oR=e=>e.type==="file",qu=e=>typeof e=="function",_S=e=>{if(!aR)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ste=e=>e.type==="select-multiple",sR=e=>e.type==="radio",d8e=e=>sR(e)||Gw(e),SP=e=>_S(e)&&e.isConnected;function f8e(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ya(e)?n++:e[t[n++]];return e}function h8e(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ya(e[t]))return!1;return!0}function io(e,t){const r=Array.isArray(t)?t:iR(t)?[t]:gte(t),n=r.length===1?e:f8e(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Zi(n)&&Cs(n)||Array.isArray(n)&&h8e(n))&&io(e,r.slice(0,-1)),e}var Ate=e=>{for(const t in e)if(qu(e[t]))return!0;return!1};function bS(e,t={}){const r=Array.isArray(e);if(Zi(e)||r)for(const n in e)Array.isArray(e[n])||Zi(e[n])&&!Ate(e[n])?(t[n]=Array.isArray(e[n])?[]:{},bS(e[n],t[n])):al(e[n])||(t[n]=!0);return t}function Nte(e,t,r){const n=Array.isArray(e);if(Zi(e)||n)for(const a in e)Array.isArray(e[a])||Zi(e[a])&&!Ate(e[a])?Ya(t)||UO(r[a])?r[a]=Array.isArray(e[a])?bS(e[a],[]):{...bS(e[a])}:Nte(e[a],al(t)?{}:t[a],r[a]):r[a]=!ah(e[a],t[a]);return r}var u2=(e,t)=>Nte(e,t,bS(t));const gz={value:!1,isValid:!1},vz={value:!0,isValid:!0};var kte=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ya(e[0].attributes.value)?Ya(e[0].value)||e[0].value===""?vz:{value:e[0].value,isValid:!0}:vz:gz}return gz},Ete=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ya(e)?e:t?e===""?NaN:e&&+e:r&&Kd(e)?new Date(e):n?n(e):e;const yz={isValid:!1,value:null};var Cte=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,yz):yz;function xz(e){const t=e.ref;return oR(t)?t.files:sR(t)?Cte(e.refs).value:Ste(t)?[...t.selectedOptions].map(({value:r})=>r):Gw(t)?kte(e.refs).value:Ete(Ya(t.value)?e.ref.value:t.value,e)}var p8e=(e,t,r,n)=>{const a={};for(const i of e){const o=nr(t,i);o&&Yn(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},SS=e=>e instanceof RegExp,d2=e=>Ya(e)?e:SS(e)?e.source:Zi(e)?SS(e.value)?e.value.source:e.value:e,Wv=e=>({isOnSubmit:!e||e===Zc.onSubmit,isOnBlur:e===Zc.onBlur,isOnChange:e===Zc.onChange,isOnAll:e===Zc.all,isOnTouch:e===Zc.onTouched});const wz="AsyncFunction";var m8e=e=>!!e&&!!e.validate&&!!(qu(e.validate)&&e.validate.constructor.name===wz||Zi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===wz)),g8e=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),qO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const n1=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=nr(e,a);if(i){const{_f:o,...s}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(n1(s,t))break}else if(Zi(s)&&n1(s,t))break}}};function _z(e,t,r){const n=nr(e,r);if(n||iR(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=nr(t,i),s=nr(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(s&&s.type)return{name:i,error:s};a.pop()}return{name:r}}var v8e=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Cs(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Zc.all))},y8e=(e,t,r)=>!e||!t||e===t||Fl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),x8e=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,w8e=(e,t)=>!Kw(nr(e,t)).length&&io(e,t),Pte=(e,t,r)=>{const n=Fl(nr(e,r));return Yn(n,"root",t[r]),Yn(e,r,n),e},Jb=e=>Kd(e);function bz(e,t,r="validate"){if(Jb(e)||Array.isArray(e)&&e.every(Jb)||oc(e)&&!e)return{type:r,message:Jb(e)?e:"",ref:t}}var Tv=e=>Zi(e)&&!SS(e)?e:{value:e,message:""},zO=async(e,t,r,n,a,i)=>{const{ref:o,refs:s,required:l,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:x,name:g,valueAsNumber:y,mount:_}=e._f,b=nr(r,g);if(!_||t.has(g))return{};const S=s?s[0]:o,C=R=>{a&&S.reportValidity&&(S.setCustomValidity(oc(R)?"":R||""),S.reportValidity())},E={},O=sR(o),T=Gw(o),M=O||T,L=(y||oR(o))&&Ya(o.value)&&Ya(b)||_S(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,z=bte.bind(null,g,n,E),P=(R,j,V,Z=Zf.maxLength,te=Zf.minLength)=>{const q=R?j:V;E[g]={type:R?Z:te,message:q,ref:o,...z(R?Z:te,q)}};if(i?!Array.isArray(b)||!b.length:l&&(!M&&(L||al(b))||oc(b)&&!b||T&&!kte(s).isValid||O&&!Cte(s).isValid)){const{value:R,message:j}=Jb(l)?{value:!!l,message:l}:Tv(l);if(R&&(E[g]={type:Zf.required,message:j,ref:S,...z(Zf.required,j)},!n))return C(j),E}if(!L&&(!al(f)||!al(h))){let R,j;const V=Tv(h),Z=Tv(f);if(!al(b)&&!isNaN(b)){const te=o.valueAsNumber||b&&+b;al(V.value)||(R=te>V.value),al(Z.value)||(j=te<Z.value)}else{const te=o.valueAsDate||new Date(b),q=G=>new Date(new Date().toDateString()+" "+G),Y=o.type=="time",U=o.type=="week";Kd(V.value)&&b&&(R=Y?q(b)>q(V.value):U?b>V.value:te>new Date(V.value)),Kd(Z.value)&&b&&(j=Y?q(b)<q(Z.value):U?b<Z.value:te<new Date(Z.value))}if((R||j)&&(P(!!R,V.message,Z.message,Zf.max,Zf.min),!n))return C(E[g].message),E}if((u||d)&&!L&&(Kd(b)||i&&Array.isArray(b))){const R=Tv(u),j=Tv(d),V=!al(R.value)&&b.length>+R.value,Z=!al(j.value)&&b.length<+j.value;if((V||Z)&&(P(V,R.message,j.message),!n))return C(E[g].message),E}if(m&&!L&&Kd(b)){const{value:R,message:j}=Tv(m);if(SS(R)&&!b.match(R)&&(E[g]={type:Zf.pattern,message:j,ref:o,...z(Zf.pattern,j)},!n))return C(j),E}if(x){if(qu(x)){const R=await x(b,r),j=bz(R,S);if(j&&(E[g]={...j,...z(Zf.validate,j.message)},!n))return C(j.message),E}else if(Zi(x)){let R={};for(const j in x){if(!Cs(R)&&!n)break;const V=bz(await x[j](b,r),S,j);V&&(R={...V,...z(j,V.message)},C(V.message),n&&(E[g]=R))}if(!Cs(R)&&(E[g]={ref:S,...R},!n))return E}}return C(!0),E};const _8e={mode:Zc.onSubmit,reValidateMode:Zc.onChange,shouldFocusError:!0};function b8e(e={}){let t={..._8e,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:qu(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let a=Zi(t.defaultValues)||Zi(t.values)?fi(t.values||t.defaultValues)||{}:{},i=t.shouldUnregister?{}:fi(a),o={action:!1,mount:!1,watch:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:mz(),state:mz()},m=Wv(t.mode),x=Wv(t.reValidateMode),g=t.criteriaMode===Zc.all,y=_e=>Te=>{clearTimeout(u),u=setTimeout(_e,Te)},_=async _e=>{if(!t.disabled&&(d.isValid||f.isValid||_e)){const Te=t.resolver?Cs((await L()).errors):await P(n,!0);Te!==r.isValid&&h.state.next({isValid:Te})}},b=(_e,Te)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((_e||Array.from(s.mount)).forEach(qe=>{qe&&(Te?Yn(r.validatingFields,qe,Te):io(r.validatingFields,qe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Cs(r.validatingFields)}))},S=(_e,Te=[],qe,yt,vt=!0,ht=!0)=>{if(yt&&qe&&!t.disabled){if(o.action=!0,ht&&Array.isArray(nr(n,_e))){const Ie=qe(nr(n,_e),yt.argA,yt.argB);vt&&Yn(n,_e,Ie)}if(ht&&Array.isArray(nr(r.errors,_e))){const Ie=qe(nr(r.errors,_e),yt.argA,yt.argB);vt&&Yn(r.errors,_e,Ie),w8e(r.errors,_e)}if((d.touchedFields||f.touchedFields)&&ht&&Array.isArray(nr(r.touchedFields,_e))){const Ie=qe(nr(r.touchedFields,_e),yt.argA,yt.argB);vt&&Yn(r.touchedFields,_e,Ie)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=u2(a,i)),h.state.next({name:_e,isDirty:j(_e,Te),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Yn(i,_e,Te)},C=(_e,Te)=>{Yn(r.errors,_e,Te),h.state.next({errors:r.errors})},E=_e=>{r.errors=_e,h.state.next({errors:r.errors,isValid:!1})},O=(_e,Te,qe,yt)=>{const vt=nr(n,_e);if(vt){const ht=nr(i,_e,Ya(qe)?nr(a,_e):qe);Ya(ht)||yt&&yt.defaultChecked||Te?Yn(i,_e,Te?ht:xz(vt._f)):te(_e,ht),o.mount&&_()}},T=(_e,Te,qe,yt,vt)=>{let ht=!1,Ie=!1;const Ze={name:_e};if(!t.disabled){if(!qe||yt){(d.isDirty||f.isDirty)&&(Ie=r.isDirty,r.isDirty=Ze.isDirty=j(),ht=Ie!==Ze.isDirty);const _t=ah(nr(a,_e),Te);Ie=!!nr(r.dirtyFields,_e),_t?io(r.dirtyFields,_e):Yn(r.dirtyFields,_e,!0),Ze.dirtyFields=r.dirtyFields,ht=ht||(d.dirtyFields||f.dirtyFields)&&Ie!==!_t}if(qe){const _t=nr(r.touchedFields,_e);_t||(Yn(r.touchedFields,_e,qe),Ze.touchedFields=r.touchedFields,ht=ht||(d.touchedFields||f.touchedFields)&&_t!==qe)}ht&&vt&&h.state.next(Ze)}return ht?Ze:{}},M=(_e,Te,qe,yt)=>{const vt=nr(r.errors,_e),ht=(d.isValid||f.isValid)&&oc(Te)&&r.isValid!==Te;if(t.delayError&&qe?(l=y(()=>C(_e,qe)),l(t.delayError)):(clearTimeout(u),l=null,qe?Yn(r.errors,_e,qe):io(r.errors,_e)),(qe?!ah(vt,qe):vt)||!Cs(yt)||ht){const Ie={...yt,...ht&&oc(Te)?{isValid:Te}:{},errors:r.errors,name:_e};r={...r,...Ie},h.state.next(Ie)}},L=async _e=>{b(_e,!0);const Te=await t.resolver(i,t.context,p8e(_e||s.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(_e),Te},z=async _e=>{const{errors:Te}=await L(_e);if(_e)for(const qe of _e){const yt=nr(Te,qe);yt?Yn(r.errors,qe,yt):io(r.errors,qe)}else r.errors=Te;return Te},P=async(_e,Te,qe={valid:!0})=>{for(const yt in _e){const vt=_e[yt];if(vt){const{_f:ht,...Ie}=vt;if(ht){const Ze=s.array.has(ht.name),_t=vt._f&&m8e(vt._f);_t&&d.validatingFields&&b([yt],!0);const pt=await zO(vt,s.disabled,i,g,t.shouldUseNativeValidation&&!Te,Ze);if(_t&&d.validatingFields&&b([yt]),pt[ht.name]&&(qe.valid=!1,Te))break;!Te&&(nr(pt,ht.name)?Ze?Pte(r.errors,pt,ht.name):Yn(r.errors,ht.name,pt[ht.name]):io(r.errors,ht.name))}!Cs(Ie)&&await P(Ie,Te,qe)}}return qe.valid},R=()=>{for(const _e of s.unMount){const Te=nr(n,_e);Te&&(Te._f.refs?Te._f.refs.every(qe=>!SP(qe)):!SP(Te._f.ref))&&X(_e)}s.unMount=new Set},j=(_e,Te)=>!t.disabled&&(_e&&Te&&Yn(i,_e,Te),!ah(D(),a)),V=(_e,Te,qe)=>_te(_e,s,{...o.mount?i:Ya(Te)?a:Kd(_e)?{[_e]:Te}:Te},qe,Te),Z=_e=>Kw(nr(o.mount?i:a,_e,t.shouldUnregister?nr(a,_e,[]):[])),te=(_e,Te,qe={})=>{const yt=nr(n,_e);let vt=Te;if(yt){const ht=yt._f;ht&&(!ht.disabled&&Yn(i,_e,Ete(Te,ht)),vt=_S(ht.ref)&&al(Te)?"":Te,Ste(ht.ref)?[...ht.ref.options].forEach(Ie=>Ie.selected=vt.includes(Ie.value)):ht.refs?Gw(ht.ref)?ht.refs.length>1?ht.refs.forEach(Ie=>(!Ie.defaultChecked||!Ie.disabled)&&(Ie.checked=Array.isArray(vt)?!!vt.find(Ze=>Ze===Ie.value):vt===Ie.value)):ht.refs[0]&&(ht.refs[0].checked=!!vt):ht.refs.forEach(Ie=>Ie.checked=Ie.value===vt):oR(ht.ref)?ht.ref.value="":(ht.ref.value=vt,ht.ref.type||h.state.next({name:_e,values:fi(i)})))}(qe.shouldDirty||qe.shouldTouch)&&T(_e,vt,qe.shouldTouch,qe.shouldDirty,!0),qe.shouldValidate&&J(_e)},q=(_e,Te,qe)=>{for(const yt in Te){const vt=Te[yt],ht=`${_e}.${yt}`,Ie=nr(n,ht);(s.array.has(_e)||Zi(vt)||Ie&&!Ie._f)&&!L0(vt)?q(ht,vt,qe):te(ht,vt,qe)}},Y=(_e,Te,qe={})=>{const yt=nr(n,_e),vt=s.array.has(_e),ht=fi(Te);Yn(i,_e,ht),vt?(h.array.next({name:_e,values:fi(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&qe.shouldDirty&&h.state.next({name:_e,dirtyFields:u2(a,i),isDirty:j(_e,ht)})):yt&&!yt._f&&!al(ht)?q(_e,ht,qe):te(_e,ht,qe),qO(_e,s)&&h.state.next({...r}),h.state.next({name:o.mount?_e:void 0,values:fi(i)})},U=async _e=>{o.mount=!0;const Te=_e.target;let qe=Te.name,yt=!0;const vt=nr(n,qe),ht=Ie=>{yt=Number.isNaN(Ie)||L0(Ie)&&isNaN(Ie.getTime())||ah(Ie,nr(i,qe,Ie))};if(vt){let Ie,Ze;const _t=Te.type?xz(vt._f):pte(_e),pt=_e.type===wS.BLUR||_e.type===wS.FOCUS_OUT,Pr=!g8e(vt._f)&&!t.resolver&&!nr(r.errors,qe)&&!vt._f.deps||x8e(pt,nr(r.touchedFields,qe),r.isSubmitted,x,m),Bt=qO(qe,s,pt);Yn(i,qe,_t),pt?(vt._f.onBlur&&vt._f.onBlur(_e),l&&l(0)):vt._f.onChange&&vt._f.onChange(_e);const dr=T(qe,_t,pt),Ir=!Cs(dr)||Bt;if(!pt&&h.state.next({name:qe,type:_e.type,values:fi(i)}),Pr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?pt&&_():pt||_()),Ir&&h.state.next({name:qe,...Bt?{}:dr});if(!pt&&Bt&&h.state.next({...r}),t.resolver){const{errors:Tr}=await L([qe]);if(ht(_t),yt){const ha=_z(r.errors,n,qe),Xr=_z(Tr,n,ha.name||qe);Ie=Xr.error,qe=Xr.name,Ze=Cs(Tr)}}else b([qe],!0),Ie=(await zO(vt,s.disabled,i,g,t.shouldUseNativeValidation))[qe],b([qe]),ht(_t),yt&&(Ie?Ze=!1:(d.isValid||f.isValid)&&(Ze=await P(n,!0)));yt&&(vt._f.deps&&J(vt._f.deps),M(qe,Ze,Ie,dr))}},G=(_e,Te)=>{if(nr(r.errors,Te)&&_e.focus)return _e.focus(),1},J=async(_e,Te={})=>{let qe,yt;const vt=Fl(_e);if(t.resolver){const ht=await z(Ya(_e)?_e:vt);qe=Cs(ht),yt=_e?!vt.some(Ie=>nr(ht,Ie)):qe}else _e?(yt=(await Promise.all(vt.map(async ht=>{const Ie=nr(n,ht);return await P(Ie&&Ie._f?{[ht]:Ie}:Ie)}))).every(Boolean),!(!yt&&!r.isValid)&&_()):yt=qe=await P(n);return h.state.next({...!Kd(_e)||(d.isValid||f.isValid)&&qe!==r.isValid?{}:{name:_e},...t.resolver||!_e?{isValid:qe}:{},errors:r.errors}),Te.shouldFocus&&!yt&&n1(n,G,_e?vt:s.mount),yt},D=_e=>{const Te={...o.mount?i:a};return Ya(_e)?Te:Kd(_e)?nr(Te,_e):_e.map(qe=>nr(Te,qe))},K=(_e,Te)=>({invalid:!!nr((Te||r).errors,_e),isDirty:!!nr((Te||r).dirtyFields,_e),error:nr((Te||r).errors,_e),isValidating:!!nr(r.validatingFields,_e),isTouched:!!nr((Te||r).touchedFields,_e)}),Q=_e=>{_e&&Fl(_e).forEach(Te=>io(r.errors,Te)),h.state.next({errors:_e?r.errors:{}})},ae=(_e,Te,qe)=>{const yt=(nr(n,_e,{_f:{}})._f||{}).ref,vt=nr(r.errors,_e)||{},{ref:ht,message:Ie,type:Ze,..._t}=vt;Yn(r.errors,_e,{..._t,...Te,ref:yt}),h.state.next({name:_e,errors:r.errors,isValid:!1}),qe&&qe.shouldFocus&&yt&&yt.focus&&yt.focus()},se=(_e,Te)=>qu(_e)?h.state.subscribe({next:qe=>_e(V(void 0,Te),qe)}):V(_e,Te,!0),fe=_e=>h.state.subscribe({next:Te=>{y8e(_e.name,Te.name,_e.exact)&&v8e(Te,_e.formState||d,st,_e.reRenderRoot)&&_e.callback({values:{...i},...r,...Te})}}).unsubscribe,ie=_e=>(o.mount=!0,f={...f,..._e.formState},fe({..._e,formState:f})),X=(_e,Te={})=>{for(const qe of _e?Fl(_e):s.mount)s.mount.delete(qe),s.array.delete(qe),Te.keepValue||(io(n,qe),io(i,qe)),!Te.keepError&&io(r.errors,qe),!Te.keepDirty&&io(r.dirtyFields,qe),!Te.keepTouched&&io(r.touchedFields,qe),!Te.keepIsValidating&&io(r.validatingFields,qe),!t.shouldUnregister&&!Te.keepDefaultValue&&io(a,qe);h.state.next({values:fi(i)}),h.state.next({...r,...Te.keepDirty?{isDirty:j()}:{}}),!Te.keepIsValid&&_()},ue=({disabled:_e,name:Te})=>{(oc(_e)&&o.mount||_e||s.disabled.has(Te))&&(_e?s.disabled.add(Te):s.disabled.delete(Te))},de=(_e,Te={})=>{let qe=nr(n,_e);const yt=oc(Te.disabled)||oc(t.disabled);return Yn(n,_e,{...qe||{},_f:{...qe&&qe._f?qe._f:{ref:{name:_e}},name:_e,mount:!0,...Te}}),s.mount.add(_e),qe?ue({disabled:oc(Te.disabled)?Te.disabled:t.disabled,name:_e}):O(_e,!0,Te.value),{...yt?{disabled:Te.disabled||t.disabled}:{},...t.progressive?{required:!!Te.required,min:d2(Te.min),max:d2(Te.max),minLength:d2(Te.minLength),maxLength:d2(Te.maxLength),pattern:d2(Te.pattern)}:{},name:_e,onChange:U,onBlur:U,ref:vt=>{if(vt){de(_e,Te),qe=nr(n,_e);const ht=Ya(vt.value)&&vt.querySelectorAll&&vt.querySelectorAll("input,select,textarea")[0]||vt,Ie=d8e(ht),Ze=qe._f.refs||[];if(Ie?Ze.find(_t=>_t===ht):ht===qe._f.ref)return;Yn(n,_e,{_f:{...qe._f,...Ie?{refs:[...Ze.filter(SP),ht,...Array.isArray(nr(a,_e))?[{}]:[]],ref:{type:ht.type,name:_e}}:{ref:ht}}}),O(_e,!1,void 0,ht)}else qe=nr(n,_e,{}),qe._f&&(qe._f.mount=!1),(t.shouldUnregister||Te.shouldUnregister)&&!(mte(s.array,_e)&&o.action)&&s.unMount.add(_e)}}},re=()=>t.shouldFocusError&&n1(n,G,s.mount),ke=_e=>{oc(_e)&&(h.state.next({disabled:_e}),n1(n,(Te,qe)=>{const yt=nr(n,qe);yt&&(Te.disabled=yt._f.disabled||_e,Array.isArray(yt._f.refs)&&yt._f.refs.forEach(vt=>{vt.disabled=yt._f.disabled||_e}))},0,!1))},Re=(_e,Te)=>async qe=>{let yt;qe&&(qe.preventDefault&&qe.preventDefault(),qe.persist&&qe.persist());let vt=fi(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ht,values:Ie}=await L();r.errors=ht,vt=Ie}else await P(n);if(s.disabled.size)for(const ht of s.disabled)Yn(vt,ht,void 0);if(io(r.errors,"root"),Cs(r.errors)){h.state.next({errors:{}});try{await _e(vt,qe)}catch(ht){yt=ht}}else Te&&await Te({...r.errors},qe),re(),setTimeout(re);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cs(r.errors)&&!yt,submitCount:r.submitCount+1,errors:r.errors}),yt)throw yt},Pe=(_e,Te={})=>{nr(n,_e)&&(Ya(Te.defaultValue)?Y(_e,fi(nr(a,_e))):(Y(_e,Te.defaultValue),Yn(a,_e,fi(Te.defaultValue))),Te.keepTouched||io(r.touchedFields,_e),Te.keepDirty||(io(r.dirtyFields,_e),r.isDirty=Te.defaultValue?j(_e,fi(nr(a,_e))):j()),Te.keepError||(io(r.errors,_e),d.isValid&&_()),h.state.next({...r}))},ge=(_e,Te={})=>{const qe=_e?fi(_e):a,yt=fi(qe),vt=Cs(_e),ht=vt?a:yt;if(Te.keepDefaultValues||(a=qe),!Te.keepValues){if(Te.keepDirtyValues){const Ie=new Set([...s.mount,...Object.keys(u2(a,i))]);for(const Ze of Array.from(Ie))nr(r.dirtyFields,Ze)?Yn(ht,Ze,nr(i,Ze)):Y(Ze,nr(ht,Ze))}else{if(aR&&Ya(_e))for(const Ie of s.mount){const Ze=nr(n,Ie);if(Ze&&Ze._f){const _t=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(_S(_t)){const pt=_t.closest("form");if(pt){pt.reset();break}}}}for(const Ie of s.mount)Y(Ie,nr(ht,Ie))}i=fi(ht),h.array.next({values:{...ht}}),h.state.next({values:{...ht}})}s={mount:Te.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Te.keepIsValid||!!Te.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Te.keepSubmitCount?r.submitCount:0,isDirty:vt?!1:Te.keepDirty?r.isDirty:!!(Te.keepDefaultValues&&!ah(_e,a)),isSubmitted:Te.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:vt?{}:Te.keepDirtyValues?Te.keepDefaultValues&&i?u2(a,i):r.dirtyFields:Te.keepDefaultValues&&_e?u2(a,_e):Te.keepDirty?r.dirtyFields:{},touchedFields:Te.keepTouched?r.touchedFields:{},errors:Te.keepErrors?r.errors:{},isSubmitSuccessful:Te.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ye=(_e,Te)=>ge(qu(_e)?_e(i):_e,Te),Qe=(_e,Te={})=>{const qe=nr(n,_e),yt=qe&&qe._f;if(yt){const vt=yt.refs?yt.refs[0]:yt.ref;vt.focus&&(vt.focus(),Te.shouldSelect&&qu(vt.select)&&vt.select())}},st=_e=>{r={...r,..._e}},ft={control:{register:de,unregister:X,getFieldState:K,handleSubmit:Re,setError:ae,_subscribe:fe,_runSchema:L,_getWatch:V,_getDirty:j,_setValid:_,_setFieldArray:S,_setDisabledField:ue,_setErrors:E,_getFieldArray:Z,_reset:ge,_resetDefaultValues:()=>qu(t.defaultValues)&&t.defaultValues().then(_e=>{Ye(_e,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ke,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(_e){o=_e},get _defaultValues(){return a},get _names(){return s},set _names(_e){s=_e},get _formState(){return r},get _options(){return t},set _options(_e){t={...t,..._e}}},subscribe:ie,trigger:J,register:de,handleSubmit:Re,watch:se,setValue:Y,getValues:D,reset:Ye,resetField:Pe,clearErrors:Q,unregister:X,setError:ae,setFocus:Qe,getFieldState:K};return{...ft,formControl:ft}}var Op=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},AP=(e,t,r={})=>r.shouldFocus||Ya(r.shouldFocus)?r.focusName||`${e}.${Ya(r.focusIndex)?t:r.focusIndex}.`:"",NP=(e,t)=>[...e,...Fl(t)],kP=e=>Array.isArray(e)?e.map(()=>{}):void 0;function EP(e,t,r){return[...e.slice(0,t),...Fl(r),...e.slice(t)]}var CP=(e,t,r)=>Array.isArray(e)?(Ya(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],PP=(e,t)=>[...Fl(t),...Fl(e)];function S8e(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return Kw(n).length?n:[]}var TP=(e,t)=>Ya(t)?[]:S8e(e,Fl(t).sort((r,n)=>r-n)),OP=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},Sz=(e,t,r)=>(e[t]=r,e);function AS(e){const t=su(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:i,rules:o}=e,[s,l]=tt.useState(r._getFieldArray(n)),u=tt.useRef(r._getFieldArray(n).map(Op)),d=tt.useRef(s),f=tt.useRef(n),h=tt.useRef(!1);f.current=n,d.current=s,r._names.array.add(n),o&&r.register(n,o),tt.useEffect(()=>r._subjects.array.subscribe({next:({values:O,name:T})=>{if(T===f.current||!T){const M=nr(O,f.current);Array.isArray(M)&&(l(M),u.current=M.map(Op))}}}).unsubscribe,[r]);const m=tt.useCallback(O=>{h.current=!0,r._setFieldArray(n,O)},[r,n]),x=(O,T)=>{const M=Fl(fi(O)),L=NP(r._getFieldArray(n),M);r._names.focus=AP(n,L.length-1,T),u.current=NP(u.current,M.map(Op)),m(L),l(L),r._setFieldArray(n,L,NP,{argA:kP(O)})},g=(O,T)=>{const M=Fl(fi(O)),L=PP(r._getFieldArray(n),M);r._names.focus=AP(n,0,T),u.current=PP(u.current,M.map(Op)),m(L),l(L),r._setFieldArray(n,L,PP,{argA:kP(O)})},y=O=>{const T=TP(r._getFieldArray(n),O);u.current=TP(u.current,O),m(T),l(T),!Array.isArray(nr(r._fields,n))&&Yn(r._fields,n,void 0),r._setFieldArray(n,T,TP,{argA:O})},_=(O,T,M)=>{const L=Fl(fi(T)),z=EP(r._getFieldArray(n),O,L);r._names.focus=AP(n,O,M),u.current=EP(u.current,O,L.map(Op)),m(z),l(z),r._setFieldArray(n,z,EP,{argA:O,argB:kP(T)})},b=(O,T)=>{const M=r._getFieldArray(n);OP(M,O,T),OP(u.current,O,T),m(M),l(M),r._setFieldArray(n,M,OP,{argA:O,argB:T},!1)},S=(O,T)=>{const M=r._getFieldArray(n);CP(M,O,T),CP(u.current,O,T),m(M),l(M),r._setFieldArray(n,M,CP,{argA:O,argB:T},!1)},C=(O,T)=>{const M=fi(T),L=Sz(r._getFieldArray(n),O,M);u.current=[...L].map((z,P)=>!z||P===O?Op():u.current[P]),m(L),l([...L]),r._setFieldArray(n,L,Sz,{argA:O,argB:M},!0,!1)},E=O=>{const T=Fl(fi(O));u.current=T.map(Op),m([...T]),l([...T]),r._setFieldArray(n,[...T],M=>M,{},!0,!1)};return tt.useEffect(()=>{if(r._state.action=!1,qO(n,r._names)&&r._subjects.state.next({...r._formState}),h.current&&(!Wv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!Wv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(O=>{const T=nr(O.errors,n),M=nr(r._formState.errors,n);(M?!T&&M.type||T&&(M.type!==T.type||M.message!==T.message):T&&T.type)&&(T?Yn(r._formState.errors,n,T):io(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const O=nr(r._fields,n);O&&O._f&&!(Wv(r._options.reValidateMode).isOnSubmit&&Wv(r._options.mode).isOnSubmit)&&zO(O,r._names.disabled,r._formValues,r._options.criteriaMode===Zc.all,r._options.shouldUseNativeValidation,!0).then(T=>!Cs(T)&&r._subjects.state.next({errors:Pte(r._formState.errors,T,n)}))}r._subjects.state.next({name:n,values:fi(r._formValues)}),r._names.focus&&n1(r._fields,(O,T)=>{if(r._names.focus&&T.startsWith(r._names.focus)&&O.focus)return O.focus(),1}),r._names.focus="",r._setValid(),h.current=!1},[s,n,r]),tt.useEffect(()=>(!nr(r._formValues,n)&&r._setFieldArray(n),()=>{const O=(T,M)=>{const L=nr(r._fields,T);L&&L._f&&(L._f.mount=M)};r._options.shouldUnregister||i?r.unregister(n):O(n,!1)}),[n,r,a,i]),{swap:tt.useCallback(b,[m,n,r]),move:tt.useCallback(S,[m,n,r]),prepend:tt.useCallback(g,[m,n,r]),append:tt.useCallback(x,[m,n,r]),remove:tt.useCallback(y,[m,n,r]),insert:tt.useCallback(_,[m,n,r]),update:tt.useCallback(C,[m,n,r]),replace:tt.useCallback(E,[m,n,r]),fields:tt.useMemo(()=>s.map((O,T)=>({...O,[a]:u.current[T]||Op()})),[s,a])}}const A8e=typeof window<"u"?tt.useLayoutEffect:tt.useEffect;function dd(e={}){const t=tt.useRef(void 0),r=tt.useRef(void 0),[n,a]=tt.useState({isDirty:!1,isValidating:!1,isLoading:qu(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:qu(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:b8e(e),formState:n},e.formControl&&e.defaultValues&&!qu(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,A8e(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(s=>({...s,isReady:!0})),o},[i]),tt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),tt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!Cs(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),tt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),tt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),tt.useEffect(()=>{e.values&&!ah(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),tt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=xte(n,i),t.current}const Az=(e,t,r)=>{if(e&&"reportValidity"in e){const n=nr(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},Tte=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?Az(n.ref,r,e):n.refs&&n.refs.forEach(a=>Az(a,r,e))}},N8e=(e,t)=>{t.shouldUseNativeValidation&&Tte(e,t);const r={};for(const n in e){const a=nr(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(k8e(t.names||Object.keys(e),n)){const o=Object.assign({},nr(r,n));Yn(o,"root",i),Yn(r,n,o)}else Yn(r,n,i)}return r},k8e=(e,t)=>e.some(r=>r.startsWith(t+"."));var E8e=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var s=n.unionErrors[0].errors[0];r[o]={message:s.message,type:s.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var l=r[o].types,u=l&&l[n.code];r[o]=bte(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},fd=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,s){try{var l=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&Tte({},i),{errors:{},values:r.raw?n:u}})}catch(u){return s(u)}return l&&l.then?l.then(void 0,s):l}(0,function(o){if(function(s){return Array.isArray(s==null?void 0:s.errors)}(o))return{values:{},errors:N8e(E8e(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},k3="Checkbox",[C8e,$Je]=eo(k3),[P8e,T8e]=C8e(k3),Ote=A.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...f}=e,[h,m]=A.useState(null),x=Hr(t,C=>m(C)),g=A.useRef(!1),y=h?d||!!h.closest("form"):!0,[_,b]=hl({prop:a,defaultProp:i??!1,onChange:u,caller:k3}),S=A.useRef(_);return A.useEffect(()=>{const C=h==null?void 0:h.form;if(C){const E=()=>b(S.current);return C.addEventListener("reset",E),()=>C.removeEventListener("reset",E)}},[h,b]),w(P8e,{scope:r,state:_,disabled:s,children:[c(pr.button,{type:"button",role:"checkbox","aria-checked":rm(_)?"mixed":_,"aria-required":o,"data-state":Mte(_),"data-disabled":s?"":void 0,disabled:s,value:l,...f,ref:x,onKeyDown:Wt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Wt(e.onClick,C=>{b(E=>rm(E)?!0:!E),y&&(g.current=C.isPropagationStopped(),g.current||C.stopPropagation())})}),y&&c(Rte,{control:h,bubbles:!g.current,name:n,value:l,checked:_,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"},defaultChecked:rm(i)?!1:i})]})});Ote.displayName=k3;var Dte="CheckboxIndicator",Ite=A.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=T8e(Dte,r);return c(cs,{present:n||rm(i.state)||i.state===!0,children:c(pr.span,{"data-state":Mte(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Ite.displayName=Dte;var O8e="CheckboxBubbleInput",Rte=A.forwardRef(({__scopeCheckbox:e,control:t,checked:r,bubbles:n=!0,defaultChecked:a,...i},o)=>{const s=A.useRef(null),l=Hr(s,o),u=T4(r),d=p4(t);A.useEffect(()=>{const h=s.current;if(!h)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==r&&g){const y=new Event("click",{bubbles:n});h.indeterminate=rm(r),g.call(h,rm(r)?!1:r),h.dispatchEvent(y)}},[u,r,n]);const f=A.useRef(rm(r)?!1:r);return c(pr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??f.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Rte.displayName=O8e;function rm(e){return e==="indeterminate"}function Mte(e){return rm(e)?"indeterminate":e?"checked":"unchecked"}var Fte=Ote,D8e=Ite;const Rs=A.forwardRef(({className:e,...t},r)=>c(Fte,{ref:r,className:Rt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:c(D8e,{className:Rt("flex items-center justify-center text-current"),children:c(g1,{className:"h-4 w-4"})})}));Rs.displayName=Fte.displayName;const Rh=yte,Lte=A.createContext({}),He=({...e})=>c(Lte.Provider,{value:{name:e.name},children:c(zp,{...e})}),E3=()=>{const e=A.useContext(Lte),t=A.useContext(jte),{getFieldState:r,formState:n}=su(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},jte=A.createContext({}),De=A.forwardRef(({className:e,...t},r)=>{const n=A.useId();return c(jte.Provider,{value:{id:n},children:c("div",{ref:r,className:Rt("space-y-2",e),...t})})});De.displayName="FormItem";const Oe=A.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=E3();return c(er,{ref:r,className:Rt(n&&"text-destructive",e),htmlFor:a,...t})});Oe.displayName="FormLabel";const Me=A.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=E3();return c(eG,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Me.displayName="FormControl";const hi=A.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=E3();return c("p",{ref:r,id:n,className:Rt("text-sm text-muted-foreground",e),...t})});hi.displayName="FormDescription";const Xe=A.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=E3(),o=a?String(a==null?void 0:a.message):t;return o?c("p",{ref:n,id:i,className:Rt("text-sm font-medium text-destructive",e),...r,children:o}):null});Xe.displayName="FormMessage";var $n;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})($n||($n={}));var WO;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(WO||(WO={}));const vr=$n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nh=e=>{switch(typeof e){case"undefined":return vr.undefined;case"string":return vr.string;case"number":return isNaN(e)?vr.nan:vr.number;case"boolean":return vr.boolean;case"function":return vr.function;case"bigint":return vr.bigint;case"symbol":return vr.symbol;case"object":return Array.isArray(e)?vr.array:e===null?vr.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vr.promise:typeof Map<"u"&&e instanceof Map?vr.map:typeof Set<"u"&&e instanceof Set?vr.set:typeof Date<"u"&&e instanceof Date?vr.date:vr.object;default:return vr.unknown}},Ht=$n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),I8e=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class xc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let s=n,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return a(this),n}static assert(t){if(!(t instanceof xc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$n.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}xc.create=e=>new xc(e);const Y1=(e,t)=>{let r;switch(e.code){case Ht.invalid_type:e.received===vr.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Ht.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,$n.jsonStringifyReplacer)}`;break;case Ht.unrecognized_keys:r=`Unrecognized key(s) in object: ${$n.joinValues(e.keys,", ")}`;break;case Ht.invalid_union:r="Invalid input";break;case Ht.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${$n.joinValues(e.options)}`;break;case Ht.invalid_enum_value:r=`Invalid enum value. Expected ${$n.joinValues(e.options)}, received '${e.received}'`;break;case Ht.invalid_arguments:r="Invalid function arguments";break;case Ht.invalid_return_type:r="Invalid function return type";break;case Ht.invalid_date:r="Invalid date";break;case Ht.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:$n.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Ht.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Ht.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Ht.custom:r="Invalid input";break;case Ht.invalid_intersection_types:r="Intersection results could not be merged";break;case Ht.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Ht.not_finite:r="Number must be finite";break;default:r=t.defaultError,$n.assertNever(e)}return{message:r}};let $te=Y1;function R8e(e){$te=e}function NS(){return $te}const kS=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},M8e=[];function cr(e,t){const r=NS(),n=kS({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Y1?void 0:Y1].filter(a=>!!a)});e.common.issues.push(n)}class $s{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return sn;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return $s.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return sn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const sn=Object.freeze({status:"aborted"}),Vv=e=>({status:"dirty",value:e}),ml=e=>({status:"valid",value:e}),VO=e=>e.status==="aborted",HO=e=>e.status==="dirty",lg=e=>e.status==="valid",Kx=e=>typeof Promise<"u"&&e instanceof Promise;function ES(e,t,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Bte(e,t,r,n,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var Cr;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Cr||(Cr={}));var N2,k2;class uf{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Nz=(e,t)=>{if(lg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new xc(e.common.issues);return this._error=r,this._error}}};function vn(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var l,u;const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??s.defaultError}:typeof s.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:s.defaultError}},description:a}}class bn{get description(){return this._def.description}_getType(t){return nh(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:nh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new $s,ctx:{common:t.parent.common,data:t.data,parsedType:nh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Kx(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const a={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nh(t)},i=this._parseSync({data:t,path:a.path,parent:a});return Nz(a,i)}"~validate"(t){var r,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nh(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return lg(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((n=(r=i==null?void 0:i.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>lg(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nh(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Kx(a)?a:Promise.resolve(a));return Nz(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Ht.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new nd({schema:this,typeName:tn.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return rf.create(this,this._def)}nullable(){return gm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yu.create(this)}promise(){return Z1.create(this,this._def)}or(t){return Jx.create([this,t],this._def)}and(t){return Qx.create(this,t,this._def)}transform(t){return new nd({...vn(this._def),schema:this,typeName:tn.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new aw({...vn(this._def),innerType:this,defaultValue:r,typeName:tn.ZodDefault})}brand(){return new lR({typeName:tn.ZodBranded,type:this,...vn(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new iw({...vn(this._def),innerType:this,catchValue:r,typeName:tn.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Yw.create(this,t)}readonly(){return ow.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const F8e=/^c[^\s-]{8,}$/i,L8e=/^[0-9a-z]+$/,j8e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$8e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,B8e=/^[a-z0-9_-]{21}$/i,U8e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,q8e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,z8e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,W8e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let DP;const V8e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,H8e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,G8e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,K8e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Y8e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,X8e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ute="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z8e=new RegExp(`^${Ute}$`);function qte(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function J8e(e){return new RegExp(`^${qte(e)}$`)}function zte(e){let t=`${Ute}T${qte(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Q8e(e,t){return!!((t==="v4"||!t)&&V8e.test(e)||(t==="v6"||!t)&&G8e.test(e))}function eDe(e,t){if(!U8e.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function tDe(e,t){return!!((t==="v4"||!t)&&H8e.test(e)||(t==="v6"||!t)&&K8e.test(e))}class Wu extends bn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vr.string){const i=this._getOrReturnCtx(t);return cr(i,{code:Ht.invalid_type,expected:vr.string,received:i.parsedType}),sn}const n=new $s;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?cr(a,{code:Ht.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&cr(a,{code:Ht.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")z8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"email",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")DP||(DP=new RegExp(W8e,"u")),DP.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"emoji",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")$8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"uuid",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")B8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"nanoid",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")F8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"cuid",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")L8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"cuid2",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")j8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"ulid",code:Ht.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),cr(a,{validation:"url",code:Ht.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"regex",code:Ht.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?zte(i).test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Z8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?J8e(i).test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?q8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"duration",code:Ht.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Q8e(t.data,i.version)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"ip",code:Ht.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?eDe(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"jwt",code:Ht.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?tDe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"cidr",code:Ht.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Y8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"base64",code:Ht.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?X8e.test(t.data)||(a=this._getOrReturnCtx(t,a),cr(a,{validation:"base64url",code:Ht.invalid_string,message:i.message}),n.dirty()):$n.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Ht.invalid_string,...Cr.errToObj(n)})}_addCheck(t){return new Wu({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Cr.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Cr.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Cr.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Cr.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Cr.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Cr.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Cr.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Cr.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Cr.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Cr.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Cr.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Cr.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Cr.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Cr.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Cr.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Cr.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Cr.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Cr.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Cr.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Cr.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Cr.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Cr.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Cr.errToObj(r)})}nonempty(t){return this.min(1,Cr.errToObj(t))}trim(){return new Wu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Wu.create=e=>{var t;return new Wu({checks:[],typeName:tn.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...vn(e)})};function rDe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class hm extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vr.number){const i=this._getOrReturnCtx(t);return cr(i,{code:Ht.invalid_type,expected:vr.number,received:i.parsedType}),sn}let n;const a=new $s;for(const i of this._def.checks)i.kind==="int"?$n.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?rDe(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.not_finite,message:i.message}),a.dirty()):$n.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Cr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Cr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Cr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Cr.toString(r))}setLimit(t,r,n,a){return new hm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Cr.toString(a)}]})}_addCheck(t){return new hm({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Cr.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Cr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Cr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Cr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Cr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Cr.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Cr.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Cr.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Cr.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&$n.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}hm.create=e=>new hm({checks:[],typeName:tn.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...vn(e)});class pm extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==vr.bigint)return this._getInvalidInput(t);let n;const a=new $s;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),cr(n,{code:Ht.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):$n.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return cr(r,{code:Ht.invalid_type,expected:vr.bigint,received:r.parsedType}),sn}gte(t,r){return this.setLimit("min",t,!0,Cr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Cr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Cr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Cr.toString(r))}setLimit(t,r,n,a){return new pm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Cr.toString(a)}]})}_addCheck(t){return new pm({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Cr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Cr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Cr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Cr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Cr.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}pm.create=e=>{var t;return new pm({checks:[],typeName:tn.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...vn(e)})};class Yx extends bn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vr.boolean){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.boolean,received:n.parsedType}),sn}return ml(t.data)}}Yx.create=e=>new Yx({typeName:tn.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...vn(e)});class cg extends bn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vr.date){const i=this._getOrReturnCtx(t);return cr(i,{code:Ht.invalid_type,expected:vr.date,received:i.parsedType}),sn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return cr(i,{code:Ht.invalid_date}),sn}const n=new $s;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),cr(a,{code:Ht.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):$n.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new cg({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Cr.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Cr.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}cg.create=e=>new cg({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:tn.ZodDate,...vn(e)});class CS extends bn{_parse(t){if(this._getType(t)!==vr.symbol){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.symbol,received:n.parsedType}),sn}return ml(t.data)}}CS.create=e=>new CS({typeName:tn.ZodSymbol,...vn(e)});class Xx extends bn{_parse(t){if(this._getType(t)!==vr.undefined){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.undefined,received:n.parsedType}),sn}return ml(t.data)}}Xx.create=e=>new Xx({typeName:tn.ZodUndefined,...vn(e)});class Zx extends bn{_parse(t){if(this._getType(t)!==vr.null){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.null,received:n.parsedType}),sn}return ml(t.data)}}Zx.create=e=>new Zx({typeName:tn.ZodNull,...vn(e)});class X1 extends bn{constructor(){super(...arguments),this._any=!0}_parse(t){return ml(t.data)}}X1.create=e=>new X1({typeName:tn.ZodAny,...vn(e)});class z0 extends bn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ml(t.data)}}z0.create=e=>new z0({typeName:tn.ZodUnknown,...vn(e)});class Ah extends bn{_parse(t){const r=this._getOrReturnCtx(t);return cr(r,{code:Ht.invalid_type,expected:vr.never,received:r.parsedType}),sn}}Ah.create=e=>new Ah({typeName:tn.ZodNever,...vn(e)});class PS extends bn{_parse(t){if(this._getType(t)!==vr.undefined){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.void,received:n.parsedType}),sn}return ml(t.data)}}PS.create=e=>new PS({typeName:tn.ZodVoid,...vn(e)});class Yu extends bn{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==vr.array)return cr(r,{code:Ht.invalid_type,expected:vr.array,received:r.parsedType}),sn;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,s=r.data.length<a.exactLength.value;(o||s)&&(cr(r,{code:o?Ht.too_big:Ht.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(cr(r,{code:Ht.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(cr(r,{code:Ht.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,s)=>a.type._parseAsync(new uf(r,o,r.path,s)))).then(o=>$s.mergeArray(n,o));const i=[...r.data].map((o,s)=>a.type._parseSync(new uf(r,o,r.path,s)));return $s.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Yu({...this._def,minLength:{value:t,message:Cr.toString(r)}})}max(t,r){return new Yu({...this._def,maxLength:{value:t,message:Cr.toString(r)}})}length(t,r){return new Yu({...this._def,exactLength:{value:t,message:Cr.toString(r)}})}nonempty(t){return this.min(1,t)}}Yu.create=(e,t)=>new Yu({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tn.ZodArray,...vn(t)});function Lv(e){if(e instanceof pi){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=rf.create(Lv(n))}return new pi({...e._def,shape:()=>t})}else return e instanceof Yu?new Yu({...e._def,type:Lv(e.element)}):e instanceof rf?rf.create(Lv(e.unwrap())):e instanceof gm?gm.create(Lv(e.unwrap())):e instanceof df?df.create(e.items.map(t=>Lv(t))):e}class pi extends bn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=$n.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==vr.object){const u=this._getOrReturnCtx(t);return cr(u,{code:Ht.invalid_type,expected:vr.object,received:u.parsedType}),sn}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Ah&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const d=i[u],f=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new uf(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Ah){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of s)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")s.length>0&&(cr(a,{code:Ht.unrecognized_keys,keys:s}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of s){const f=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new uf(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>$s.mergeObjectSync(n,u)):$s.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Cr.errToObj,new pi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,i,o,s;const l=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(s=Cr.errToObj(t).message)!==null&&s!==void 0?s:l}:{message:l}}}:{}})}strip(){return new pi({...this._def,unknownKeys:"strip"})}passthrough(){return new pi({...this._def,unknownKeys:"passthrough"})}extend(t){return new pi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new pi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:tn.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new pi({...this._def,catchall:t})}pick(t){const r={};return $n.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new pi({...this._def,shape:()=>r})}omit(t){const r={};return $n.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new pi({...this._def,shape:()=>r})}deepPartial(){return Lv(this)}partial(t){const r={};return $n.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}),new pi({...this._def,shape:()=>r})}required(t){const r={};return $n.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof rf;)i=i._def.innerType;r[n]=i}}),new pi({...this._def,shape:()=>r})}keyof(){return Wte($n.objectKeys(this.shape))}}pi.create=(e,t)=>new pi({shape:()=>e,unknownKeys:"strip",catchall:Ah.create(),typeName:tn.ZodObject,...vn(t)});pi.strictCreate=(e,t)=>new pi({shape:()=>e,unknownKeys:"strict",catchall:Ah.create(),typeName:tn.ZodObject,...vn(t)});pi.lazycreate=(e,t)=>new pi({shape:e,unknownKeys:"strip",catchall:Ah.create(),typeName:tn.ZodObject,...vn(t)});class Jx extends bn{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new xc(s.ctx.common.issues));return cr(r,{code:Ht.invalid_union,unionErrors:o}),sn}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const l of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(l=>new xc(l));return cr(r,{code:Ht.invalid_union,unionErrors:s}),sn}}get options(){return this._def.options}}Jx.create=(e,t)=>new Jx({options:e,typeName:tn.ZodUnion,...vn(t)});const eh=e=>e instanceof tw?eh(e.schema):e instanceof nd?eh(e.innerType()):e instanceof rw?[e.value]:e instanceof mm?e.options:e instanceof nw?$n.objectValues(e.enum):e instanceof aw?eh(e._def.innerType):e instanceof Xx?[void 0]:e instanceof Zx?[null]:e instanceof rf?[void 0,...eh(e.unwrap())]:e instanceof gm?[null,...eh(e.unwrap())]:e instanceof lR||e instanceof ow?eh(e.unwrap()):e instanceof iw?eh(e._def.innerType):[];class C3 extends bn{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vr.object)return cr(r,{code:Ht.invalid_type,expected:vr.object,received:r.parsedType}),sn;const n=this.discriminator,a=r.data[n],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(cr(r,{code:Ht.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),sn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const a=new Map;for(const i of r){const o=eh(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new C3({typeName:tn.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...vn(n)})}}function GO(e,t){const r=nh(e),n=nh(t);if(e===t)return{valid:!0,data:e};if(r===vr.object&&n===vr.object){const a=$n.objectKeys(t),i=$n.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const l=GO(e[s],t[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(r===vr.array&&n===vr.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],l=GO(o,s);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return r===vr.date&&n===vr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Qx extends bn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(VO(i)||VO(o))return sn;const s=GO(i.value,o.value);return s.valid?((HO(i)||HO(o))&&r.dirty(),{status:r.value,value:s.data}):(cr(n,{code:Ht.invalid_intersection_types}),sn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Qx.create=(e,t,r)=>new Qx({left:e,right:t,typeName:tn.ZodIntersection,...vn(r)});class df extends bn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vr.array)return cr(n,{code:Ht.invalid_type,expected:vr.array,received:n.parsedType}),sn;if(n.data.length<this._def.items.length)return cr(n,{code:Ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sn;!this._def.rest&&n.data.length>this._def.items.length&&(cr(n,{code:Ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new uf(n,o,n.path,s)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>$s.mergeArray(r,o)):$s.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new df({...this._def,rest:t})}}df.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new df({items:e,typeName:tn.ZodTuple,rest:null,...vn(t)})};class ew extends bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vr.object)return cr(n,{code:Ht.invalid_type,expected:vr.object,received:n.parsedType}),sn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in n.data)a.push({key:i._parse(new uf(n,s,n.path,s)),value:o._parse(new uf(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?$s.mergeObjectAsync(r,a):$s.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof bn?new ew({keyType:t,valueType:r,typeName:tn.ZodRecord,...vn(n)}):new ew({keyType:Wu.create(),valueType:t,typeName:tn.ZodRecord,...vn(r)})}}class TS extends bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vr.map)return cr(n,{code:Ht.invalid_type,expected:vr.map,received:n.parsedType}),sn;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([s,l],u)=>({key:a._parse(new uf(n,s,n.path,[u,"key"])),value:i._parse(new uf(n,l,n.path,[u,"value"]))}));if(n.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return sn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),s.set(u.value,d.value)}return{status:r.value,value:s}})}else{const s=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return sn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),s.set(u.value,d.value)}return{status:r.value,value:s}}}}TS.create=(e,t,r)=>new TS({valueType:t,keyType:e,typeName:tn.ZodMap,...vn(r)});class ug extends bn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==vr.set)return cr(n,{code:Ht.invalid_type,expected:vr.set,received:n.parsedType}),sn;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(cr(n,{code:Ht.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(cr(n,{code:Ht.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return sn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const s=[...n.data.values()].map((l,u)=>i._parse(new uf(n,l,n.path,u)));return n.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(t,r){return new ug({...this._def,minSize:{value:t,message:Cr.toString(r)}})}max(t,r){return new ug({...this._def,maxSize:{value:t,message:Cr.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}ug.create=(e,t)=>new ug({valueType:e,minSize:null,maxSize:null,typeName:tn.ZodSet,...vn(t)});class a1 extends bn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vr.function)return cr(r,{code:Ht.invalid_type,expected:vr.function,received:r.parsedType}),sn;function n(s,l){return kS({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,NS(),Y1].filter(u=>!!u),issueData:{code:Ht.invalid_arguments,argumentsError:l}})}function a(s,l){return kS({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,NS(),Y1].filter(u=>!!u),issueData:{code:Ht.invalid_return_type,returnTypeError:l}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Z1){const s=this;return ml(async function(...l){const u=new xc([]),d=await s._def.args.parseAsync(l,i).catch(m=>{throw u.addIssue(n(l,m)),u}),f=await Reflect.apply(o,this,d);return await s._def.returns._def.type.parseAsync(f,i).catch(m=>{throw u.addIssue(a(f,m)),u})})}else{const s=this;return ml(function(...l){const u=s._def.args.safeParse(l,i);if(!u.success)throw new xc([n(l,u.error)]);const d=Reflect.apply(o,this,u.data),f=s._def.returns.safeParse(d,i);if(!f.success)throw new xc([a(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new a1({...this._def,args:df.create(t).rest(z0.create())})}returns(t){return new a1({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new a1({args:t||df.create([]).rest(z0.create()),returns:r||z0.create(),typeName:tn.ZodFunction,...vn(n)})}}class tw extends bn{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}tw.create=(e,t)=>new tw({getter:e,typeName:tn.ZodLazy,...vn(t)});class rw extends bn{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return cr(r,{received:r.data,code:Ht.invalid_literal,expected:this._def.value}),sn}return{status:"valid",value:t.data}}get value(){return this._def.value}}rw.create=(e,t)=>new rw({value:e,typeName:tn.ZodLiteral,...vn(t)});function Wte(e,t){return new mm({values:e,typeName:tn.ZodEnum,...vn(t)})}class mm extends bn{constructor(){super(...arguments),N2.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return cr(r,{expected:$n.joinValues(n),received:r.parsedType,code:Ht.invalid_type}),sn}if(ES(this,N2)||Bte(this,N2,new Set(this._def.values)),!ES(this,N2).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return cr(r,{received:r.data,code:Ht.invalid_enum_value,options:n}),sn}return ml(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return mm.create(t,{...this._def,...r})}exclude(t,r=this._def){return mm.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}N2=new WeakMap;mm.create=Wte;class nw extends bn{constructor(){super(...arguments),k2.set(this,void 0)}_parse(t){const r=$n.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==vr.string&&n.parsedType!==vr.number){const a=$n.objectValues(r);return cr(n,{expected:$n.joinValues(a),received:n.parsedType,code:Ht.invalid_type}),sn}if(ES(this,k2)||Bte(this,k2,new Set($n.getValidEnumValues(this._def.values))),!ES(this,k2).has(t.data)){const a=$n.objectValues(r);return cr(n,{received:n.data,code:Ht.invalid_enum_value,options:a}),sn}return ml(t.data)}get enum(){return this._def.values}}k2=new WeakMap;nw.create=(e,t)=>new nw({values:e,typeName:tn.ZodNativeEnum,...vn(t)});class Z1 extends bn{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vr.promise&&r.common.async===!1)return cr(r,{code:Ht.invalid_type,expected:vr.promise,received:r.parsedType}),sn;const n=r.parsedType===vr.promise?r.data:Promise.resolve(r.data);return ml(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Z1.create=(e,t)=>new Z1({type:e,typeName:tn.ZodPromise,...vn(t)});class nd extends bn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{cr(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async s=>{if(r.value==="aborted")return sn;const l=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return l.status==="aborted"?sn:l.status==="dirty"||r.value==="dirty"?Vv(l.value):l});{if(r.value==="aborted")return sn;const s=this._def.schema._parseSync({data:o,path:n.path,parent:n});return s.status==="aborted"?sn:s.status==="dirty"||r.value==="dirty"?Vv(s.value):s}}if(a.type==="refinement"){const o=s=>{const l=a.refinement(s,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?sn:(s.status==="dirty"&&r.dirty(),o(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?sn:(s.status==="dirty"&&r.dirty(),o(s.value).then(()=>({status:r.value,value:s.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!lg(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>lg(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:r.value,value:s})):o);$n.assertNever(a)}}nd.create=(e,t,r)=>new nd({schema:e,typeName:tn.ZodEffects,effect:t,...vn(r)});nd.createWithPreprocess=(e,t,r)=>new nd({schema:t,effect:{type:"preprocess",transform:e},typeName:tn.ZodEffects,...vn(r)});class rf extends bn{_parse(t){return this._getType(t)===vr.undefined?ml(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}rf.create=(e,t)=>new rf({innerType:e,typeName:tn.ZodOptional,...vn(t)});class gm extends bn{_parse(t){return this._getType(t)===vr.null?ml(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}gm.create=(e,t)=>new gm({innerType:e,typeName:tn.ZodNullable,...vn(t)});class aw extends bn{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===vr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}aw.create=(e,t)=>new aw({innerType:e,typeName:tn.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...vn(t)});class iw extends bn{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Kx(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xc(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new xc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}iw.create=(e,t)=>new iw({innerType:e,typeName:tn.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...vn(t)});class OS extends bn{_parse(t){if(this._getType(t)!==vr.nan){const n=this._getOrReturnCtx(t);return cr(n,{code:Ht.invalid_type,expected:vr.nan,received:n.parsedType}),sn}return{status:"valid",value:t.data}}}OS.create=e=>new OS({typeName:tn.ZodNaN,...vn(e)});const nDe=Symbol("zod_brand");class lR extends bn{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Yw extends bn{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?sn:i.status==="dirty"?(r.dirty(),Vv(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?sn:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new Yw({in:t,out:r,typeName:tn.ZodPipeline})}}class ow extends bn{_parse(t){const r=this._def.innerType._parse(t),n=a=>(lg(a)&&(a.value=Object.freeze(a.value)),a);return Kx(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}ow.create=(e,t)=>new ow({innerType:e,typeName:tn.ZodReadonly,...vn(t)});function kz(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function Vte(e,t={},r){return e?X1.create().superRefine((n,a)=>{var i,o;const s=e(n);if(s instanceof Promise)return s.then(l=>{var u,d;if(!l){const f=kz(t,n),h=(d=(u=f.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...f,fatal:h})}});if(!s){const l=kz(t,n),u=(o=(i=l.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...l,fatal:u})}}):X1.create()}const aDe={object:pi.lazycreate};var tn;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(tn||(tn={}));const iDe=(e,t={message:`Input not instance of ${e.name}`})=>Vte(r=>r instanceof e,t),es=Wu.create,z2=hm.create,oDe=OS.create,sDe=pm.create,cR=Yx.create,Hte=cg.create,lDe=CS.create,cDe=Xx.create,uDe=Zx.create,dDe=X1.create,fDe=z0.create,hDe=Ah.create,pDe=PS.create,Gte=Yu.create,P3=pi.create,mDe=pi.strictCreate,gDe=Jx.create,vDe=C3.create,yDe=Qx.create,xDe=df.create,wDe=ew.create,_De=TS.create,bDe=ug.create,SDe=a1.create,ADe=tw.create,NDe=rw.create,sw=mm.create,kDe=nw.create,EDe=Z1.create,Ez=nd.create,CDe=rf.create,PDe=gm.create,TDe=nd.createWithPreprocess,ODe=Yw.create,DDe=()=>es().optional(),IDe=()=>z2().optional(),RDe=()=>cR().optional(),uR={string:e=>Wu.create({...e,coerce:!0}),number:e=>hm.create({...e,coerce:!0}),boolean:e=>Yx.create({...e,coerce:!0}),bigint:e=>pm.create({...e,coerce:!0}),date:e=>cg.create({...e,coerce:!0})},MDe=sn;var je=Object.freeze({__proto__:null,defaultErrorMap:Y1,setErrorMap:R8e,getErrorMap:NS,makeIssue:kS,EMPTY_PATH:M8e,addIssueToContext:cr,ParseStatus:$s,INVALID:sn,DIRTY:Vv,OK:ml,isAborted:VO,isDirty:HO,isValid:lg,isAsync:Kx,get util(){return $n},get objectUtil(){return WO},ZodParsedType:vr,getParsedType:nh,ZodType:bn,datetimeRegex:zte,ZodString:Wu,ZodNumber:hm,ZodBigInt:pm,ZodBoolean:Yx,ZodDate:cg,ZodSymbol:CS,ZodUndefined:Xx,ZodNull:Zx,ZodAny:X1,ZodUnknown:z0,ZodNever:Ah,ZodVoid:PS,ZodArray:Yu,ZodObject:pi,ZodUnion:Jx,ZodDiscriminatedUnion:C3,ZodIntersection:Qx,ZodTuple:df,ZodRecord:ew,ZodMap:TS,ZodSet:ug,ZodFunction:a1,ZodLazy:tw,ZodLiteral:rw,ZodEnum:mm,ZodNativeEnum:nw,ZodPromise:Z1,ZodEffects:nd,ZodTransformer:nd,ZodOptional:rf,ZodNullable:gm,ZodDefault:aw,ZodCatch:iw,ZodNaN:OS,BRAND:nDe,ZodBranded:lR,ZodPipeline:Yw,ZodReadonly:ow,custom:Vte,Schema:bn,ZodSchema:bn,late:aDe,get ZodFirstPartyTypeKind(){return tn},coerce:uR,any:dDe,array:Gte,bigint:sDe,boolean:cR,date:Hte,discriminatedUnion:vDe,effect:Ez,enum:sw,function:SDe,instanceof:iDe,intersection:yDe,lazy:ADe,literal:NDe,map:_De,nan:oDe,nativeEnum:kDe,never:hDe,null:uDe,nullable:PDe,number:z2,object:P3,oboolean:RDe,onumber:IDe,optional:CDe,ostring:DDe,pipeline:ODe,preprocess:TDe,promise:EDe,record:wDe,set:bDe,strictObject:mDe,string:es,symbol:lDe,transformer:Ez,tuple:xDe,undefined:cDe,union:gDe,unknown:fDe,void:pDe,NEVER:MDe,ZodIssueCode:Ht,quotelessJson:I8e,ZodError:xc});const Wp=je.object({first_name:je.string().min(1,"First name is required"),last_name:je.string().min(1,"Last name is required"),middle_name:je.string().optional(),gender:je.enum(["male","female","other"]),age:je.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),je.number().int().positive("Age must be a positive number").nullable().optional()),marital_status:je.enum(["single","married","divorced","widowed","separated","other"]).optional(),occupation:je.string().optional()});function FDe(){const e=su();return w("div",{className:"space-y-6",children:[w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Basic Information"}),c("p",{className:"text-sm text-muted-foreground",children:"Enter the patient's basic personal information."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c(He,{control:e.control,name:"first_name",render:({field:t})=>w(De,{children:[c(Oe,{children:"First Name"}),c(Me,{children:c(ct,{placeholder:"John",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"middle_name",render:({field:t})=>w(De,{children:[c(Oe,{children:"Middle Name"}),c(Me,{children:c(ct,{placeholder:"Michael",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"last_name",render:({field:t})=>w(De,{children:[c(Oe,{children:"Last Name"}),c(Me,{children:c(ct,{placeholder:"Doe",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"gender",render:({field:t})=>w(De,{children:[c(Oe,{children:"Gender"}),w(Wr,{onValueChange:t.onChange,defaultValue:t.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select gender"})})}),w(Ur,{children:[c(wt,{value:"male",children:"Male"}),c(wt,{value:"female",children:"Female"}),c(wt,{value:"other",children:"Other"})]})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"age",render:({field:t})=>w(De,{children:[c(Oe,{children:"Age"}),c(Me,{children:c(ct,{type:"number",placeholder:"25",...t,value:t.value??"",onChange:r=>t.onChange(r.target.value===""?null:r.target.valueAsNumber)})}),c(Xe,{})]})}),c(He,{control:e.control,name:"marital_status",render:({field:t})=>w(De,{children:[c(Oe,{children:"Marital Status"}),w(Wr,{onValueChange:t.onChange,defaultValue:t.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select status"})})}),w(Ur,{children:[c(wt,{value:"single",children:"Single"}),c(wt,{value:"married",children:"Married"}),c(wt,{value:"divorced",children:"Divorced"}),c(wt,{value:"widowed",children:"Widowed"}),c(wt,{value:"separated",children:"Separated"}),c(wt,{value:"other",children:"Other"})]})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"occupation",render:({field:t})=>w(De,{children:[c(Oe,{children:"Occupation"}),c(Me,{children:c(ct,{placeholder:"Software Engineer",...t})}),c(Xe,{})]})})]})]})}const dR=je.object({phone:je.string().min(1,"Phone number is required").regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format. Use E.164 format: +1234567890"),email:je.string().email("Invalid email address").optional().nullable(),address:je.string().optional(),city:je.string().optional(),state:je.string().optional(),postal_code:je.string().optional(),country:je.string().default("USA"),emergency_contact_name:je.string().optional(),emergency_contact_phone:je.string().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional(),emergency_contact_relationship:je.string().optional()});function LDe(){const e=su();return w("div",{className:"space-y-6",children:[w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Contact Information"}),c("p",{className:"text-sm text-muted-foreground",children:"Provide contact details for communication."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c(He,{control:e.control,name:"phone",render:({field:t})=>w(De,{children:[c(Oe,{children:"Phone Number"}),c(Me,{children:c(ct,{placeholder:"+1234567890",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"email",render:({field:t})=>w(De,{children:[c(Oe,{children:"Email Address"}),c(Me,{children:c(ct,{type:"email",placeholder:"john@example.com",...t})}),c(Xe,{})]})})]}),w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Address Information"}),c("p",{className:"text-sm text-muted-foreground",children:"Enter the patient's residential address."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c(He,{control:e.control,name:"address",render:({field:t})=>w(De,{className:"col-span-2",children:[c(Oe,{children:"Street Address"}),c(Me,{children:c(ct,{placeholder:"123 Main St",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"city",render:({field:t})=>w(De,{children:[c(Oe,{children:"City"}),c(Me,{children:c(ct,{placeholder:"New York",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"state",render:({field:t})=>w(De,{children:[c(Oe,{children:"State"}),c(Me,{children:c(ct,{placeholder:"NY",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"postal_code",render:({field:t})=>w(De,{children:[c(Oe,{children:"Postal Code"}),c(Me,{children:c(ct,{placeholder:"10001",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"country",render:({field:t})=>w(De,{children:[c(Oe,{children:"Country"}),c(Me,{children:c(ct,{placeholder:"USA",...t})}),c(Xe,{})]})})]}),w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Emergency Contact"}),c("p",{className:"text-sm text-muted-foreground",children:"Provide emergency contact information."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c(He,{control:e.control,name:"emergency_contact_name",render:({field:t})=>w(De,{children:[c(Oe,{children:"Contact Name"}),c(Me,{children:c(ct,{placeholder:"Jane Doe",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"emergency_contact_phone",render:({field:t})=>w(De,{children:[c(Oe,{children:"Contact Phone"}),c(Me,{children:c(ct,{placeholder:"+1234567890",...t})}),c(Xe,{})]})}),c(He,{control:e.control,name:"emergency_contact_relationship",render:({field:t})=>w(De,{children:[c(Oe,{children:"Relationship"}),c(Me,{children:c(ct,{placeholder:"Spouse",...t})}),c(Xe,{})]})})]})]})}var fR="Radio",[jDe,Kte]=eo(fR),[$De,BDe]=jDe(fR),Yte=A.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:s="on",onCheck:l,form:u,...d}=e,[f,h]=A.useState(null),m=Hr(t,y=>h(y)),x=A.useRef(!1),g=f?u||!!f.closest("form"):!0;return w($De,{scope:r,checked:a,disabled:o,children:[c(pr.button,{type:"button",role:"radio","aria-checked":a,"data-state":Qte(a),"data-disabled":o?"":void 0,disabled:o,value:s,...d,ref:m,onClick:Wt(e.onClick,y=>{a||l==null||l(),g&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),g&&c(Jte,{control:f,bubbles:!x.current,name:n,value:s,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Yte.displayName=fR;var Xte="RadioIndicator",Zte=A.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=BDe(Xte,r);return c(cs,{present:n||i.checked,children:c(pr.span,{"data-state":Qte(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});Zte.displayName=Xte;var UDe="RadioBubbleInput",Jte=A.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=A.useRef(null),s=Hr(o,i),l=T4(r),u=p4(t);return A.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&m){const x=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(x)}},[l,r,n]),c(pr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Jte.displayName=UDe;function Qte(e){return e?"checked":"unchecked"}var qDe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T3="RadioGroup",[zDe,BJe]=eo(T3,[uy,Kte]),ere=uy(),tre=Kte(),[WDe,VDe]=zDe(T3),rre=A.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:s=!1,orientation:l,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=ere(r),x=wg(u),[g,y]=hl({prop:i,defaultProp:a??"",onChange:f,caller:T3});return c(WDe,{scope:r,name:n,required:o,disabled:s,value:g,onValueChange:y,children:c(sD,{asChild:!0,...m,orientation:l,dir:x,loop:d,children:c(pr.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":s?"":void 0,dir:x,...h,ref:t})})})});rre.displayName=T3;var nre="RadioGroupItem",are=A.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=VDe(nre,r),o=i.disabled||n,s=ere(r),l=tre(r),u=A.useRef(null),d=Hr(t,u),f=i.value===a.value,h=A.useRef(!1);return A.useEffect(()=>{const m=g=>{qDe.includes(g.key)&&(h.current=!0)},x=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),c(lD,{asChild:!0,...s,focusable:!o,active:f,children:c(Yte,{disabled:o,required:i.required,checked:f,...l,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:Wt(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Wt(a.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});are.displayName=nre;var HDe="RadioGroupIndicator",ire=A.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=tre(r);return c(Zte,{...a,...n,ref:t})});ire.displayName=HDe;var ore=rre,sre=are,GDe=ire;const Lo=A.forwardRef(({className:e,...t},r)=>c(ore,{className:Rt("grid gap-2",e),...t,ref:r}));Lo.displayName=ore.displayName;const On=A.forwardRef(({className:e,...t},r)=>c(sre,{ref:r,className:Rt("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:c(GDe,{className:"flex items-center justify-center",children:c(VH,{className:"h-2.5 w-2.5 fill-current text-current"})})}));On.displayName=sre.displayName;const KDe=[{id:"penicillin",label:"Penicillin"},{id:"amoxicillin",label:"Amoxicillin"},{id:"aspirin",label:"Aspirin"},{id:"ibuprofen",label:"Ibuprofen"},{id:"codeine",label:"Codeine"},{id:"sulfa_drugs",label:"Sulfa Drugs"},{id:"local_anesthetics",label:"Local Anesthetics (e.g., Lidocaine)"},{id:"other_medications",label:"Other Medications (please specify)"}],YDe=[{id:"peanuts",label:"Peanuts"},{id:"tree_nuts",label:"Tree Nuts (e.g., almonds, walnuts)"},{id:"dairy",label:"Dairy Products"},{id:"eggs",label:"Eggs"},{id:"shellfish",label:"Shellfish"},{id:"gluten",label:"Gluten"},{id:"soy",label:"Soy"},{id:"other_food",label:"Other Food Allergies (please specify)"}],XDe=[{id:"pollen",label:"Pollen"},{id:"dust_mites",label:"Dust Mites"},{id:"mold",label:"Mold"},{id:"pet_dander",label:"Pet Dander"},{id:"insect_stings",label:"Insect Stings"},{id:"latex",label:"Latex"},{id:"fragrances",label:"Fragrances/Perfumes"},{id:"other_environmental",label:"Other Environmental Allergies (please specify)"}],ZDe=[{id:"nickel_metals",label:"Nickel or Metals"},{id:"chlorhexidine",label:"Chlorhexidine (mouthwash/antiseptic)"},{id:"other",label:"Other (please describe)"}],lre=je.object({blood_group:je.enum(["A+","A-","B+","B-","AB+","AB-","O+","O-","unknown"]).optional(),height:je.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),je.number().positive("Height must be a positive number").nullable().optional()),weight:je.preprocess(e=>e===""||e===null||e===void 0?null:Number(e),je.number().positive("Weight must be a positive number").nullable().optional()),has_allergies:je.enum(["yes","no"]).optional(),medication_allergies:je.array(je.string()).optional(),other_medication_allergy_details:je.string().optional(),food_allergies:je.array(je.string()).optional(),other_food_allergy_details:je.string().optional(),environmental_allergies:je.array(je.string()).optional(),other_environmental_allergy_details:je.string().optional(),other_allergies:je.array(je.string()).optional(),other_allergy_details:je.string().optional(),other_allergies_manual_input:je.string().optional(),diagnosed_conditions:je.array(je.string()).optional(),other_diagnosed_condition:je.string().optional(),has_implants:je.enum(["yes","no"]).optional(),implants_details:je.string().optional(),taking_medications:je.enum(["yes","no"]).optional(),current_medications:je.array(je.object({name:je.string().min(1,"Medication name is required"),dosage:je.string().optional(),frequency:je.string().optional()})).optional(),recent_health_changes:je.enum(["yes","no"]).optional(),health_changes_details:je.string().optional(),previous_surgeries:je.array(je.object({type:je.string().min(1,"Surgery type is required"),date:je.string().optional(),notes:je.string().optional()})).optional(),immunizations_up_to_date:je.enum(["yes","no","not_sure"]).optional(),recent_immunizations:je.string().optional(),recent_medical_screenings:je.enum(["yes","no"]).optional(),screenings_details:je.string().optional(),dental_material_allergies:je.enum(["yes","no"]).optional(),dental_material_allergies_details:je.string().optional(),notes:je.string().optional()}),JDe=[{id:"diabetes",label:"Diabetes"},{id:"heart_disease",label:"Heart Disease"},{id:"hypertension",label:"Hypertension"},{id:"asthma",label:"Asthma"},{id:"bleeding_disorders",label:"Bleeding Disorders"},{id:"kidney_liver_disease",label:"Kidney/Liver Disease"},{id:"respiratory_problems",label:"Respiratory Problems"},{id:"autoimmune_disorders",label:"Autoimmune Disorders"},{id:"osteoporosis",label:"Osteoporosis"}];function QDe(){var s,l,u,d;const e=su(),{fields:t,append:r,remove:n}=AS({control:e.control,name:"current_medications"}),{fields:a,append:i,remove:o}=AS({control:e.control,name:"previous_surgeries"});return w("div",{className:"space-y-8",children:[" ",w("div",{className:"space-y-2",children:[c("h2",{className:"text-xl font-semibold",children:"Medical Information"}),c("p",{className:"text-sm text-muted-foreground",children:"Provide relevant medical information for the patient."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c(He,{control:e.control,name:"blood_group",render:({field:f})=>w(De,{children:[c(Oe,{children:"Blood Group"}),w(Wr,{onValueChange:f.onChange,defaultValue:f.value||"unknown",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select blood group"})})}),c(Ur,{children:["A+","A-","B+","B-","AB+","AB-","O+","O-","unknown"].map(h=>c(wt,{value:h,children:h==="unknown"?"Unknown":h},h))})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"height",render:({field:f})=>w(De,{children:[c(Oe,{children:"Height (cm)"}),c(Me,{children:c(ct,{type:"number",placeholder:"175",...f,value:f.value??"",onChange:h=>f.onChange(h.target.value===""?null:h.target.valueAsNumber)})}),c(Xe,{})]})}),c(He,{control:e.control,name:"weight",render:({field:f})=>w(De,{children:[c(Oe,{children:"Weight (kg)"}),c(Me,{children:c(ct,{type:"number",placeholder:"70",...f,value:f.value??"",onChange:h=>f.onChange(h.target.value===""?null:h.target.valueAsNumber)})}),c(Xe,{})]})})]})," ",w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Allergies"}),c(He,{control:e.control,name:"has_allergies",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have any allergies?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("has_allergies")==="yes"&&w("div",{className:"space-y-6 mt-4",children:[" ",c(He,{control:e.control,name:"medication_allergies",render:()=>w(De,{children:[w("div",{className:"mb-2",children:[c(Oe,{className:"text-base font-medium",children:"Medication Allergies"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:KDe.map(f=>c(He,{control:e.control,name:"medication_allergies",render:({field:h})=>{var m;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:x=>x?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),c(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),c(Xe,{})]})}),((s=e.watch("medication_allergies"))==null?void 0:s.includes("other_medications"))&&c(He,{control:e.control,name:"other_medication_allergy_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"Specify Other Medication Allergies:"}),c(Me,{children:c(ct,{placeholder:"Details...",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"food_allergies",render:()=>w(De,{children:[w("div",{className:"mb-2",children:[c(Oe,{className:"text-base font-medium",children:"Food Allergies"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:YDe.map(f=>c(He,{control:e.control,name:"food_allergies",render:({field:h})=>{var m;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:x=>x?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),c(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),c(Xe,{})]})}),((l=e.watch("food_allergies"))==null?void 0:l.includes("other_food"))&&c(He,{control:e.control,name:"other_food_allergy_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"Specify Other Food Allergies:"}),c(Me,{children:c(ct,{placeholder:"Details...",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"environmental_allergies",render:()=>w(De,{children:[w("div",{className:"mb-2",children:[c(Oe,{className:"text-base font-medium",children:"Environmental Allergies"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:XDe.map(f=>c(He,{control:e.control,name:"environmental_allergies",render:({field:h})=>{var m;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:x=>x?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),c(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),c(Xe,{})]})}),((u=e.watch("environmental_allergies"))==null?void 0:u.includes("other_environmental"))&&c(He,{control:e.control,name:"other_environmental_allergy_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"Specify Other Environmental Allergies:"}),c(Me,{children:c(ct,{placeholder:"Details...",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"other_allergies",render:()=>w(De,{children:[w("div",{className:"mb-2",children:[c(Oe,{className:"text-base font-medium",children:"Other Allergies"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:ZDe.map(f=>c(He,{control:e.control,name:"other_allergies",render:({field:h})=>{var m;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:x=>x?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),c(Oe,{className:"font-normal",children:f.label})]})}},f.id))}),c(Xe,{})]})}),((d=e.watch("other_allergies"))==null?void 0:d.includes("other"))&&c(He,{control:e.control,name:"other_allergy_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"Describe Other Allergies:"}),c(Me,{children:c(Qr,{placeholder:"Details...",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"other_allergies_manual_input",render:({field:f})=>w(De,{children:[c(Oe,{children:"Manually List Any Other Allergies:"}),c(Me,{children:c(Qr,{placeholder:"e.g., Specific chemical, rare reaction...",...f,value:f.value||""})}),c(Xe,{})]})})]})," "]})," ",w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Medical Conditions"}),c(He,{control:e.control,name:"diagnosed_conditions",render:()=>w(De,{children:[w("div",{className:"mb-4",children:[c(Oe,{className:"text-base",children:"Have you been diagnosed with any of the following?"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:JDe.map(f=>c(He,{control:e.control,name:"diagnosed_conditions",render:({field:h})=>{var m;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(m=h.value)==null?void 0:m.includes(f.id),onCheckedChange:x=>x?h.onChange([...h.value||[],f.id]):h.onChange((h.value||[]).filter(g=>g!==f.id))})}),c(Oe,{className:"font-normal",children:f.label})]},f.id)}},f.id))}),c(Xe,{})]})}),c(He,{control:e.control,name:"other_diagnosed_condition",render:({field:f})=>w(De,{children:[c(Oe,{children:"Other Medical Conditions (if any):"}),c(Me,{children:c(ct,{placeholder:"Specify other conditions",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"has_implants",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have any implanted devices or prosthetics?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("has_implants")==="yes"&&c(He,{control:e.control,name:"implants_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"If yes, specify (e.g., pacemaker, joint replacement):"}),c(Me,{children:c(ct,{placeholder:"e.g., Pacemaker, Hip Replacement",...f})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Current Medications"}),c(He,{control:e.control,name:"taking_medications",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Are you currently taking any medications?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("taking_medications")==="yes"&&w("div",{className:"space-y-4",children:[t.map((f,h)=>w("div",{className:"flex items-start space-x-2 p-3 border rounded-md relative",children:[w("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 flex-grow",children:[c(He,{control:e.control,name:`current_medications.${h}.name`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Name"}),c(Me,{children:c(ct,{placeholder:"e.g., Lisinopril",...m})}),c(Xe,{})]})}),c(He,{control:e.control,name:`current_medications.${h}.dosage`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Dosage"}),c(Me,{children:c(ct,{placeholder:"e.g., 10mg",...m})}),c(Xe,{})]})}),c(He,{control:e.control,name:`current_medications.${h}.frequency`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Frequency"}),c(Me,{children:c(ct,{placeholder:"e.g., Daily",...m})}),c(Xe,{})]})})]}),w(Fe,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>n(h),children:[c(gh,{className:"h-4 w-4"}),c("span",{className:"sr-only",children:"Remove Medication"})]})]},f.id)),c(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>r({name:"",dosage:"",frequency:""}),children:"Add Medication"})]})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Recent Health Changes"}),c(He,{control:e.control,name:"recent_health_changes",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Have you experienced any recent health changes (e.g., surgeries, hospitalizations, changes in medications)?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("recent_health_changes")==="yes"&&c(He,{control:e.control,name:"health_changes_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"If yes, please describe and provide dates if applicable:"}),c(Me,{children:c(Qr,{placeholder:"e.g., Knee surgery on 2024-01-15, Started new blood pressure medication last month",...f})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Previous Surgeries / Hospitalizations"}),w("div",{className:"space-y-4",children:[a.map((f,h)=>w("div",{className:"flex items-start space-x-2 p-3 border rounded-md relative",children:[w("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 flex-grow",children:[c(He,{control:e.control,name:`previous_surgeries.${h}.type`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Type / Reason"}),c(Me,{children:c(ct,{placeholder:"e.g., Appendectomy",...m})}),c(Xe,{})]})}),c(He,{control:e.control,name:`previous_surgeries.${h}.date`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Approx. Date"}),c(Me,{children:c(ct,{placeholder:"e.g., 2010",...m})}),c(Xe,{})]})}),c(He,{control:e.control,name:`previous_surgeries.${h}.notes`,render:({field:m})=>w(De,{children:[c(Oe,{children:"Notes"}),c(Me,{children:c(ct,{placeholder:"Optional notes",...m})}),c(Xe,{})]})})]}),w(Fe,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>o(h),children:[c(gh,{className:"h-4 w-4"}),c("span",{className:"sr-only",children:"Remove Surgery"})]})]},f.id)),c(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>i({type:"",date:"",notes:""}),children:"Add Surgery / Hospitalization"})]})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Immunizations & Screenings"}),c(He,{control:e.control,name:"immunizations_up_to_date",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Are your immunizations up to date?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"not_sure"})}),c(Oe,{className:"font-normal",children:"Not Sure"})]})]})}),c(Xe,{})]})}),c(He,{control:e.control,name:"recent_immunizations",render:({field:f})=>w(De,{children:[c(Oe,{children:"If applicable, list recent immunizations (e.g., tetanus, influenza, COVID-19):"}),c(Me,{children:c(ct,{placeholder:"e.g., Flu shot (Oct 2024), COVID Booster (Dec 2024)",...f})}),c(Xe,{})]})}),c(He,{control:e.control,name:"recent_medical_screenings",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Have you had any recent medical screenings (e.g., blood work, blood pressure checks)?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("recent_medical_screenings")==="yes"&&c(He,{control:e.control,name:"screenings_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"If yes, list the screenings and dates:"}),c(Me,{children:c(ct,{placeholder:"e.g., Blood work (Jan 2025), Colonoscopy (Mar 2024)",...f})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Allergic Reactions to Dental Materials"}),c(He,{control:e.control,name:"dental_material_allergies",render:({field:f})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Have you ever had an allergic reaction to dental materials (e.g., latex, metals, local anesthetics)?"}),c(Me,{children:w(Lo,{onValueChange:f.onChange,value:f.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dental_material_allergies")==="yes"&&c(He,{control:e.control,name:"dental_material_allergies_details",render:({field:f})=>w(De,{children:[c(Oe,{children:"If yes, please describe the reaction:"}),c(Me,{children:c(Qr,{placeholder:"e.g., Rash from latex gloves, Swelling after local anesthetic",...f})}),c(Xe,{})]})})]}),c(He,{control:e.control,name:"notes",render:({field:f})=>w(De,{children:[c(Oe,{children:"Additional Medical Notes"}),c(Me,{children:c(Qr,{placeholder:"Any other relevant medical information...",...f,value:f.value||""})}),c(Xe,{})]})})]})}const eIe=e=>A.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 698.9 980.66",...e},A.createElement("g",{id:"ID_17","data-name":"ID 17"},A.createElement("path",{d:"M209,373.39c-3.57,2.53-15.52,11.69-18.35,27.51-3.87,21.69,11.85,42.1,27.21,48,.8.31,0,0,18,3.37,18.54,3.5,21.73,4.31,27.52,4,5.38-.31,13.3-.78,20.79-5.81,12.44-8.35,14.88-23.37,16.2-31.49,1.45-8.95,3-18.28-2.75-26.9-1.19-1.8-4.1-5.71-18-11.93s-29-12.95-49.53-11.31A81.45,81.45,0,0,0,209,373.39Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M254.25,394A20.4,20.4,0,0,0,246,404.06c-1.7,4.7-1,8.73-.46,11.92a33.92,33.92,0,0,0,8.25,16.51",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M235.45,391.68c2,.58,6.56,2.2,8.71,6.42,1.05,2,1,4.5,1,9.34-.09,6.56-.13,9.84-1.43,12.67a18.74,18.74,0,0,1-8.71,8.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_16","data-name":"ID 16"},A.createElement("path",{d:"M232,304.6c-13.55,7.4-17.19,22.76-17.43,23.85-.37,1.67-3.36,16.22,5.5,28.43,6.21,8.55,14.57,10.9,31.19,15.59,13.92,3.93,26.26,7.41,41.27,3.67,8.41-2.09,20.34-5.06,24.77-15.59,5.05-12-4-25.25-5.51-27.52-4.47-6.55-10.08-10.25-16.51-13.76C272.23,306.71,250.15,294.66,232,304.6Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M271.12,366.22l-6.42-13.76",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M278.91,319l-11.46,12.38",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M256.9,317.61A35.06,35.06,0,0,1,265.61,335c.88,5,1.92,11-1.37,15.59-1.76,2.45-4.06,3.54-7.34,8.26a38.82,38.82,0,0,0-2.75,4.58",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_15","data-name":"ID 15"},A.createElement("path",{d:"M266.76,235c19.82-.05,51.93,9.27,61.54,35.89,4.83,13.37,5,33.86-6.41,42.31-6.07,4.51-14.39,3.49-30.77,1.28-23.23-3.13-38.41-5.18-48.72-17.94a43,43,0,0,1-9-23.08c-.3-3.27-2-21.81,10.26-32.05C251.17,235.19,260.23,235,266.76,235Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M295.36,259.52a35,35,0,0,0-8.71,6,21.36,21.36,0,0,0-5.5,6.88c-.79,1.71-3.06,6.61-.92,11.92a14.12,14.12,0,0,0,7.34,7.34",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M275.64,253.1a6.23,6.23,0,0,0,.46,4.12c1.07,2,2.93,2.09,4.59,4.13a9.76,9.76,0,0,1,1.83,4.59c1.08,5.26.08,15.5-6.88,18.8a11.49,11.49,0,0,1-6.42.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_14","data-name":"ID 14"},A.createElement("path",{d:"M286.26,162.42c19.81,0,51.92,9.27,61.53,35.9,4.83,13.36,5,33.85-6.41,42.31-6.07,4.5-14.38,3.49-30.77,1.28-23.23-3.14-38.41-5.18-48.71-17.95a42.88,42.88,0,0,1-9-23.08c-.3-3.26-2-21.8,10.26-32C270.66,162.59,279.73,162.44,286.26,162.42Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M290.73,212.05l12.38-2.76",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M303.57,186.36a8.18,8.18,0,0,0-.92,5c.43,2.46,1.93,2.82,3,5.5,1.24,3.27.43,6.51,0,8.26-.88,3.52-2.13,3.86-2.49,6.42-.25,1.78-.05,4.53,2.49,8.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M317.78,196c-1,.47-2,.93-3.21,1.37a40.83,40.83,0,0,1-6.42,1.84",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_13","data-name":"ID 13"},A.createElement("path",{d:"M290.1,149.57c-6.52-17.36,17.07-40.24,24.76-47.69,6.51-6.32,14.95-14.28,24.76-12.84,3.14.45,7.85,2.08,16.51,12.84a110.08,110.08,0,0,1,22.93,51.36c2.19,14.85,3.9,26.47-3.67,34.85-4.54,5-12.4,10.16-19.26,8.26-5.72-1.59-8.54-7.38-10.09-10.09C332.18,161.94,297.12,168.3,290.1,149.57Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M317.08,138.09a20.24,20.24,0,0,1,1.38-9.63c4.37-10.6,16.62-13.06,17.88-13.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_12","data-name":"ID 12"},A.createElement("path",{d:"M385.64,69.87c13.07-5.52,19.61-8.28,25.64-7.69,9.48.93,18.52,7.29,23.08,15.39,1.37,2.43,3.34,6.79,1.28,32.05-2.07,25.49-5,32.77-6.41,35.9-3.77,8.51-7.58,17.09-15.38,19.23-9.16,2.5-18.3-5.38-26.93-12.82s-20.62-17.8-24.36-35.9c-.75-3.66-5.09-26.65,7.7-38.46C372.63,75.37,377,73.54,385.64,69.87Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M382.15,91.43a64.37,64.37,0,0,1,33.48-4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_11","data-name":"ID 11"},A.createElement("path",{d:"M458.72,49.36c7.44-2.23,22.93-5.54,43.59,0a29.66,29.66,0,0,1,11.58,4.82c8.37,5.86,11,14.38,11.93,17.43,1.27,4.32,1.73,9,.91,16.51C526.2,93,523.79,111.6,509.31,134c-9.71,15-15.62,17.46-18.35,18.34a27.34,27.34,0,0,1-15.59,0c-10.69-2.84-16.62-11.11-21.1-17.42-7.27-10.27-9.62-19.26-13.75-35.77-5-20-7.42-30.15-2.76-37.61C442.29,54.28,450.26,51.89,458.72,49.36Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M461.71,74.52a72.72,72.72,0,0,1,14.22-2.3A73.82,73.82,0,0,1,500.69,75",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_21","data-name":"ID 21"},A.createElement("path",{d:"M543.24,52.35c6.47-.31,14.19-.64,22.93-.92,20.38-.64,26.93-.4,34.86,1.84,7.38,2.08,15.13,4.38,18.34,11,2.27,4.68,1.1,9.11-.92,17.43-7.69,31.72-4.94,25.9-8.25,35.77-6.14,18.25-9.37,27.49-17.43,33a30.4,30.4,0,0,1-17.43,5.5c-9.35-.13-15.92-5-20.17-8.25-11-8.36-15.49-18.93-20.18-30.27-6.51-15.71-10.81-26.09-8-39.18C530,64.92,538.7,56.24,543.24,52.35Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M554.57,73.94a168.57,168.57,0,0,1,17.43,0,165.25,165.25,0,0,1,20.17,2.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_22","data-name":"ID 22"},A.createElement("path",{d:"M639.55,65.19a60.47,60.47,0,0,1,27.51,2.75c7.13,2.48,18.66,6.5,22.93,16.51,1.25,2.93,2.19,7.1-1.83,22.93-5.54,21.77-9.17,36.08-22,46.78-3.81,3.16-9.8,8-18.35,8.25a27.12,27.12,0,0,1-16.51-5.5c-14.42-10.54-14.61-31.73-14.67-38.52,0-4.91.55-1.41,3.67-25.69,1.12-8.73,1.52-12.93,4.58-17.42C629,69.19,635.41,66.47,639.55,65.19Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M641.74,84.51a79.65,79.65,0,0,1,13.76,1.38,80.7,80.7,0,0,1,21.55,7.33",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_23","data-name":"ID 23"},A.createElement("path",{d:"M735.85,98.21a94.57,94.57,0,0,1,13.76,14.67c5.33,7.05,11.93,15.8,13.76,28.44.89,6.17,2.13,14.73-2.75,21.09-4.68,6.1-10,3.73-22,9.17-13.94,6.34-12.92,12.37-27.52,19.26-8.13,3.84-17,8-24.77,4.59-11.59-5.1-12.53-24.47-12.84-30.27-1.05-20.32,8.6-35.3,18.35-50.44,7.67-11.92,12.27-14.92,15.59-16.51C719.13,92.59,731.45,96.55,735.85,98.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M727.26,118.63a56.8,56.8,0,0,1,8.71,4.58c4.93,3.17,7.92,5.09,9.63,8.72.65,1.36,2.25,5.37.46,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_24","data-name":"ID 24"},A.createElement("path",{d:"M778.44,178.21c7.22,5.63,7.75,15.37,8.26,24.77.41,7.47.72,21.63-7.34,28.43-2.25,1.9-3.7,2.12-11,4.59-17,5.74-17.24,7.26-26.6,10.08-14.44,4.35-21.77,6.67-31.19,4.59-4.23-.94-12.31-2.72-17.42-10.09-6-8.6-3.44-19.15-2.76-22,4.16-17.37,21-26.46,34.86-33.94,14.31-7.73,25.74-9.7,33.93-10.09C766.56,174.2,773,174,778.44,178.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M743.86,196.4c-5.12,4.17-6.05,7.43-6,9.63.11,2.71,1.74,3.06,2.75,7.34a18.6,18.6,0,0,1-.45,10.55,17.63,17.63,0,0,1-3.21,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M727.36,206a7.7,7.7,0,0,1,11,9.17",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M755.33,222.08l-14.13-3.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_25","data-name":"ID 25"},A.createElement("path",{d:"M798.71,239.77c7.21,5.62,7.74,15.37,8.26,24.76.4,7.47.72,21.64-7.34,28.43-2.26,1.9-3.7,2.12-11,4.59-17,5.74-17.23,7.27-26.6,10.09-14.43,4.35-21.76,6.67-31.18,4.58-4.23-.93-12.31-2.72-17.43-10.09-6-8.6-3.43-19.15-2.75-22,4.16-17.37,21-26.46,34.85-33.93,14.32-7.73,25.75-9.71,33.94-10.09C786.83,235.75,793.3,235.54,798.71,239.77Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M766.15,257.59a13.94,13.94,0,0,0-4.13,3.67,14.71,14.71,0,0,0-2.75,7.8c-.65,7.94,4.63,10.64,3.67,16.05-.4,2.24-2,5.45-7.8,8.71",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M745.51,262.18c6.41,1.89,9.67,4.92,11.46,7.34,5,6.69,2.9,14.35,8.26,17.88a10.94,10.94,0,0,0,7.34,1.38",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_26","data-name":"ID 26"},A.createElement("path",{d:"M821.64,308.55c8.76,6.88,7.09,21.59,6.42,27.52-.69,6.1-2.19,19.37-11.92,25.68-3.57,2.31-4.75,1.43-15.59,3.67-16.74,3.46-17.4,6.3-30.27,8.26-6.75,1-14.37,2.11-23.85,0-6.85-1.53-12.87-2.57-17.43-7.34-7-7.31-6.88-18.95-4.58-26.6,3.72-12.4,14.5-18.47,25.68-24.76,14.72-8.29,27.81-9.91,36.69-11a72.9,72.9,0,0,1,24.76.92C816.54,306,819.09,306.55,821.64,308.55Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M764.14,318c1.25.53,12.13,5.36,15.13,17.43A26.08,26.08,0,0,1,771,361.12",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M783.4,317.09a72.3,72.3,0,0,0-3.21,11c-.93,4.49-5,24.31,2.75,28.89a7.69,7.69,0,0,0,4.59.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_27","data-name":"ID 27"},A.createElement("path",{d:"M829,370c13.65,6.58,18.38,24.79,18.34,36.69a46,46,0,0,1-10.09,28.43c-5.67,6.9-11.9,10.05-17.42,12.84a71.66,71.66,0,0,1-42.19,7.34c-9.8-1.37-20.8-2.91-29.35-11.93-10.9-11.49-10.37-27.28-10.09-35.77.22-6.76.5-12.78,4.58-18.34,2.25-3.07,5.8-6.2,21.1-11a196.68,196.68,0,0,1,34.39-7.56C815.21,368.54,823.69,367.46,829,370Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M802.1,394.82a23.37,23.37,0,0,0-7.34,9.63c-.65,1.61-3.69,9.13,0,17a20.09,20.09,0,0,0,7.34,8.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M787,397.11a14.91,14.91,0,0,1,5.51,4.59c4.55,6.34,3.24,16.12-1.84,22a18.1,18.1,0,0,1-7.33,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_28","data-name":"ID 28"},A.createElement("path",{d:"M854,468.38c8.92,18.95,2.44,37.45.69,42-1.93,5-5.3,13.3-13.76,19.26-5.45,3.84-10.55,4.95-16.51,6.19-6.83,1.42-19.41,4-34.39-.69-7-2.19-19.86-6.26-28.21-19.26s-6.72-26.8-6.19-30.27c.75-4.83,1.91-13.4,8.95-20.63a31.66,31.66,0,0,1,18-9.13c2.76-.34,2.92.06,8.11.18,8.61.2,19.85.46,30.26-4.81,5.7-2.88,5.12-4.37,8.26-4.82C839,445,849.43,458.73,854,468.38Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M817.16,475.29a20.27,20.27,0,0,0-6,6A20,20,0,0,0,808,492.72a19.55,19.55,0,0,0,3.21,10.09,18.39,18.39,0,0,0,6,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M800.19,475.75a27,27,0,0,1,6,7.8c1.58,3.14,5.39,10.68,1.83,17.43-3.14,6-10.05,7.51-11.46,7.79",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_38","data-name":"ID 38"},A.createElement("path",{d:"M794.8,595.84c4.56.34,11.48.72,20,.69,12.33,0,13.91-.93,18.58,0,14.58,2.9,23.07,16.26,24.07,17.88,7.38,12,5.91,24,4.82,33-1.23,10.09-2.65,21.77-11.7,28.89-7.15,5.64-15.2,5.36-30.95,4.82-16.73-.58-28.5-4.81-37.84-8.26-10.11-3.73-15.23-5.69-18.57-10.31-5.77-8-4.25-18.12-2.75-28.21,1.32-8.83,2.53-17,8.94-24.76C778.14,598.94,790.51,596.49,794.8,595.84Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M822,625.1a17.84,17.84,0,0,0-7.34,6c-3.45,4.92-5.1,13-.92,18.8a15,15,0,0,0,8.26,5.5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M809.13,621.89a31.31,31.31,0,0,1,2.75,5c1.19,2.78,3.64,8.51,2.29,14.68-1.84,8.39-9.63,12.58-11,13.3",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_37","data-name":"ID 37"},A.createElement("path",{d:"M835.39,690.08c10.91,9.79,13.31,22.74,13.76,25.45,3.91,23.72-13.92,40.85-16.51,43.34-3.83,3.68-9.95,9.56-19.26,11-5,.77-7.51-.23-24.08-5.5-23.88-7.6-27-8.18-32.33-12.39-3.57-2.79-9.58-7.51-13.07-15.82-6.43-15.32.81-30.7,4.81-39.21,3.26-6.92,6-12.73,12.39-16.51,6.16-3.64,12.36-3.41,24.07-2.06C813.62,681.67,827.85,683.31,835.39,690.08Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M798.43,705.68a19.18,19.18,0,0,1,5.5,10.55c.22,1.37,1.43,9.09-4.13,14.67a16.46,16.46,0,0,1-11.46,4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M815.86,711.18a13.44,13.44,0,0,0-8.72,2.75c-5.58,4.55-4.93,13.19-4.58,17.89a35.23,35.23,0,0,0,2.29,10.09",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_36","data-name":"ID 36"},A.createElement("path",{d:"M820.26,802.9c-1,16.59-15.15,26.65-19.26,29.58s-11.42,8.13-21.33,8.25c-5.79.07-12.57-3.39-26.14-10.32-13.92-7.11-18.55-11.07-21.32-13.75-4.13-4-6.87-6.63-9-11-7.1-14.95,2.18-31.71,4.82-36.46,3.12-5.64,6.34-11.44,13.07-14.45,6.05-2.69,12-1.8,21,.51,25.88,6.63,38.82,9.94,47.79,20.82C813,779.77,821.08,789.58,820.26,802.9Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M788.67,791.63c-2,1.64-4.57,3.19-7.33,2.76-2.92-.46-4-2.81-5.51-2.3-2.17.73-2.45,6.31-1.83,10.09a19.93,19.93,0,0,0,4.13,9.17",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M771.25,782.46a28,28,0,0,1,3.66,6.42c1.59,3.91,3.7,9.09,1.38,12.84-2.15,3.48-7.57,4.91-13.3,3.67",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_35","data-name":"ID 35"},A.createElement("path",{d:"M797.89,857c2,11-4.28,22-11.38,28.12-14.45,12.53-34,6.58-38.21,5.29-15.81-4.81-23.86-16.68-28.32-23.25-5.36-7.91-11.45-16.88-8.73-27,2.85-10.65,13.5-15.53,15.08-16.23,11.65-5.12,23.18-.45,35.18,4.41C778.65,835.29,795.18,842,797.89,857Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M790,864.21a36.18,36.18,0,0,1-4.13,6,38.73,38.73,0,0,1-17.42,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_34","data-name":"ID 34"},A.createElement("path",{d:"M765.78,914.21c-.15,11.2-8.37,20.76-16.51,25.45-16.57,9.55-34.61,0-38.52-2.06-14.61-7.73-20.27-20.91-23.39-28.21-3.77-8.78-8-18.75-3.44-28.2,4.82-9.92,16.2-12.69,17.88-13.07,12.42-2.82,22.84,4,33.71,11C751,889.2,766,898.91,765.78,914.21Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M753,922.06a42.52,42.52,0,0,1-6.66,7A43.14,43.14,0,0,1,734.74,936",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_31","data-name":"ID 31"},A.createElement("path",{d:"M576.88,1024.34c-5.54.29-13.07.64-22,.92-14.61.46-16.4.23-18.34-.92-8.75-5.15-7.85-21.21-6.88-38.52,1.18-21.11,2.08-37.23,13.75-44.94.77-.51,10.05-6.44,19.27-3.21,5.07,1.78,7.76,5.51,11.92,11.46,1.39,2,7.91,11.51,12.38,27.06.49,1.69,1.7,9.84,4.13,26.14,1,7.07,1.54,10.68-.46,14.22C587.41,1022.28,580.15,1023.85,576.88,1024.34Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M551.53,1015.86l19.72-.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_41","data-name":"ID 41"},A.createElement("path",{d:"M514.51,948.22c5.39,12.13,7,24.44,8.72,37.6,2.06,16.22,3.1,24.47,0,29.81-1.13,1.94-4.15,7.15-10.55,9.63-2.8,1.09-4,.69-12.84.46-13.92-.36-15.73.48-22-.92-5.47-1.21-8.2-1.81-10.55-3.67-7.71-6-6.41-19.24-5-33,1.12-11.29,2.52-24,11-37.14,4.55-7.05,9-14,17.43-15.59a22.57,22.57,0,0,1,19.26,6A21.19,21.19,0,0,1,514.51,948.22Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M482,1014.25c3.07.71,6.44,1.35,10.09,1.84a110,110,0,0,0,11,.92",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_42","data-name":"ID 42"},A.createElement("path",{d:"M438.84,1015.63a127.59,127.59,0,0,1-24.76-3.21c-12-2.76-14.34-5.1-15.13-6-6.8-7.39-3.59-20.37-1.38-29.35,2.4-9.75,6.28-16.18,11.47-24.77,5.65-9.37,8.71-14.29,15.13-17.88,2.73-1.53,9.64-5.39,17.88-3.21,9.44,2.5,13.6,11,14.22,12.38,1.16,2.48,1.55,6.42,2.29,14.22a141.45,141.45,0,0,1,.92,16.51,87.13,87.13,0,0,1-1.83,19.26c-1.48,6.72-2.24,10.17-5,13.76C448.22,1013,442,1014.91,438.84,1015.63Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M414,998.25a29.24,29.24,0,0,0,20.17,4.59",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_45","data-name":"ID 45"},A.createElement("path",{d:"M259.15,886.31c-.87-.72-16.53-13.95-13.3-30.27,1.45-7.33,6-11.72,12.38-17.89,11.64-11.24,24.16-15,31.19-17,8.66-2.46,13.79-3.84,20.18-1.83,1.13.36,10.77,3.57,15.13,13.3,3,6.68,1.86,12.79.92,17.89-1.51,8.13-5,13.62-7.8,17.88a70.54,70.54,0,0,1-16.51,17.43c-6.21,4.71-9.32,7.06-14.22,8.25C273.17,897.5,260.76,887.63,259.15,886.31Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M278.17,880.63a32.49,32.49,0,0,0-10.54-6c-2.28-.75-3.79-.94-5.05-2.29-2.3-2.47-1.78-6.73-.92-10.09",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_46","data-name":"ID 46"},A.createElement("path",{d:"M220.63,765.24a104,104,0,0,1,18.8-8.72A95.14,95.14,0,0,1,272,751c11.72.23,17.58.35,22.93,4.59,10.31,8.16,9.5,24.24,9.17,30.72-.29,5.75-.43,15.89-7.34,24.77a40.08,40.08,0,0,1-7.33,6.87c-5.32,4.11-16.43,12.47-33,15.14-10.1,1.62-19.78,3.17-28.89-2.29-8.61-5.16-11.83-13.65-16-24.77-3.59-9.43-6.36-16.74-3.67-25.22C210.55,772.12,217.48,767.19,220.63,765.24Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M263.51,773a17.11,17.11,0,0,0-6.88,11c-.06.43-1.29,9.92,5,13.76a11.09,11.09,0,0,0,6.88,1.37",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M242.41,783.12a16.66,16.66,0,0,1,9.17,3.67,16.44,16.44,0,0,1,2.76,22.47",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_47","data-name":"ID 47"},A.createElement("path",{d:"M262.82,673.06c12.52,6.46,18.06,18.41,19.72,22.47a45.83,45.83,0,0,1,1.83,28.89c-1.47,5.59-4.29,18.65-14.21,22.93a17.6,17.6,0,0,1-6.88,1.38c-21.73.49-29,15.15-45.86,14.21a35.53,35.53,0,0,1-17.89-6.42c-15.44-10.41-17.91-29.07-18.8-35.77-1.09-8.19-2.48-18.74,3.67-28,1.72-2.59,5.91-7.88,24.76-14.22C233.41,670.41,248.11,665.47,262.82,673.06Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M237,698.48a29.53,29.53,0,0,0-6.16,10.09c-1.39,3.9-3.25,9.1-.92,11.93,2.61,3.16,7.94.29,12.84,4.12a12,12,0,0,1,3.67,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M220.25,705.36a22.28,22.28,0,0,1,6,3.67c4.92,4.25,9.86,12.4,7.34,19.72a13.39,13.39,0,0,1-3.21,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_48","data-name":"ID 48"},A.createElement("path",{d:"M196.32,591.43a232.08,232.08,0,0,1,24.31-.46c11.62.38,17.53.63,22.93,3.21,10.85,5.2,15.85,15.2,17.88,19.26,4.72,9.42,5,17.8,5.05,22.93.13,7.83.29,16.64-5.51,23.39-3,3.48-6.19,4.82-12.38,7.34-14.56,5.91-19.36,2.62-37.14,7.79-7.81,2.27-9.59,3.69-14.22,3.21-8.67-.9-14.63-7.14-17.89-10.55a50.16,50.16,0,0,1-11.92-22.47c-1.6-6.53-6-24.31,5-39C180.34,595.62,191.8,592.42,196.32,591.43Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M221.38,614.27a35.13,35.13,0,0,0-5,10.09c-1.75,5.64-4.07,12-.91,17.42.67,1.16,3,4.69,9.17,6.42",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M207.16,616.56a40.13,40.13,0,0,1,4.59,6c2.69,4.28,5.47,8.7,5,13.76-.63,7.5-7.9,12.07-9.17,12.84",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_18","data-name":"ID 18"},A.createElement("path",{d:"M229.21,453.18c18.65,1.39,28.18,2.2,38.53,8.26,5.7,3.34,13.13,7.69,17,16.51,6.15,14.14-1.68,28.91-4.59,34.39-2,3.71-8.35,15.37-22,22-14.83,7.21-29.06,4.07-45.4.46-11.09-2.45-16.63-3.68-21.1-7.8-12.74-11.75-9.7-33.58-7.8-47.24,1.66-11.85,2.53-18.09,7.8-22.93C198,451,208.49,451.65,229.21,453.18Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M242.79,478.45c-1.57.69-7.71,3.63-9.17,9.63-1,4.12.69,7.64,3.21,12.84a47.29,47.29,0,0,0,7.79,11.46",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M224.44,478.45A26,26,0,0,1,230,484c1,1.37,8.49,11.55,4.12,20.18-.63,1.26-2.6,4.61-7.79,6.88",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_44","data-name":"ID 44"},A.createElement("path",{d:"M299.78,936.84c-.87-.71-16.54-13.94-13.3-30.26,1.45-7.33,6-11.73,12.38-17.89,11.63-11.24,24.16-15,31.18-17,8.67-2.46,13.8-3.84,20.18-1.83,1.14.36,10.78,3.57,15.14,13.3,3,6.68,1.86,12.79.91,17.88-1.5,8.14-5,13.62-7.79,17.89A70.54,70.54,0,0,1,342,936.39c-6.22,4.7-9.32,7.06-14.22,8.25C313.8,948,301.39,938.17,299.78,936.84Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M319.31,932.09a35.51,35.51,0,0,1-5.5-4.73,38.75,38.75,0,0,1-9.58-18.53",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_43","data-name":"ID 43"},A.createElement("path",{d:"M369.6,995c-2,0-24.09-1-32.56-17.42-5.16-10-2.45-20.35-.92-26.14,4.47-17,16.77-26,30.72-36.23,5.59-4.1,10.55-6.91,17-7.34,2.36-.16,10.27-.68,15.59,4.59,3.91,3.85,4.39,8.8,5.05,15.59.51,5.24.1,8.71-1.38,20.64-1.53,12.36-2.3,18.56-2.55,19.45-2,7.2-4.85,17.56-14,23.2C380.19,995.27,373.67,995.1,369.6,995Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M377.68,978.48a35.56,35.56,0,0,1-7.25.17,38.69,38.69,0,0,1-19.51-7.36",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_33","data-name":"ID 33"},A.createElement("path",{d:"M714.92,979.17a56.7,56.7,0,0,1-15.82,9.63c-6,2.42-21,8.4-32.33,2.07-8.18-4.56-10.5-13.82-15.14-32.33-2.89-11.56-5.73-23.51-1.37-37.15,1.94-6.07,4-12.5,9.63-15.14,9.39-4.38,21.84,5,31.64,12.39a82.83,82.83,0,0,1,22.7,26.14c4.69,8.52,9.3,17.2,6.19,26.14A20.67,20.67,0,0,1,714.92,979.17Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M706.18,967.57a42.81,42.81,0,0,1-19,12.91",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_32","data-name":"ID 32"},A.createElement("path",{d:"M652.32,1007.38c-3.43,1.25-8.65,3-15.13,4.81-13.83,3.79-20.77,5.34-26.83,3.44-8.8-2.76-13.5-10.42-15.13-13.07-2.31-3.74-4.06-8.85-2.07-35.08,1.94-25.5,4.31-29.14,6.88-31.65,5.16-5,14.7-9,23.39-5.5,2.9,1.17,5.13,3,10.32,9.63,6.58,8.44,11.3,14.49,16.51,25.45,7.06,14.88,11.51,24.24,7.79,33.71A22.67,22.67,0,0,1,652.32,1007.38Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M638.35,997.28a42.05,42.05,0,0,1-8.64,4.28,43.14,43.14,0,0,1-13.26,2.53",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_54","data-name":"ID 54"},A.createElement("path",{d:"M343.25,453.41c-2.43,1.73-10.58,8-12.51,18.76-2.64,14.79,8.08,28.71,18.56,32.74.55.21,0,0,12.3,2.29,12.65,2.39,14.82,2.94,18.77,2.71,3.67-.21,9.07-.53,14.18-4C403,500.26,404.7,490,405.6,484.48c1-6.11,2-12.47-1.88-18.35-.81-1.23-2.8-3.89-12.3-8.13s-19.8-8.84-33.78-7.72A55.63,55.63,0,0,0,343.25,453.41Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M374.09,467.44a14,14,0,0,0-5.63,6.88,14.79,14.79,0,0,0-.31,8.14,23.13,23.13,0,0,0,5.63,11.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M361.27,465.88c1.37.4,4.47,1.51,5.94,4.38.71,1.39.71,3.07.66,6.37-.06,4.47-.09,6.71-1,8.64a12.84,12.84,0,0,1-5.94,5.94",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_55","data-name":"ID 55"},A.createElement("path",{d:"M357,507.83c12.71.94,19.21,1.49,26.27,5.63,3.89,2.27,8.95,5.24,11.57,11.26,4.19,9.64-1.15,19.71-3.13,23.45a34.27,34.27,0,0,1-15,15c-10.11,4.92-19.82,2.78-31,.32-7.56-1.67-11.34-2.51-14.39-5.32-8.69-8-6.62-22.9-5.32-32.21,1.13-8.09,1.72-12.34,5.32-15.64C335.72,506.34,342.88,506.78,357,507.83Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M366.27,525.06c-1.06.47-5.25,2.47-6.25,6.56-.69,2.82.47,5.21,2.19,8.76a32.45,32.45,0,0,0,5.31,7.82",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M353.76,525.06a17.39,17.39,0,0,1,3.75,3.75c.69.93,5.79,7.87,2.82,13.76a10.2,10.2,0,0,1-5.32,4.69",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_53","data-name":"ID 53"},A.createElement("path",{d:"M365.84,441.28c-4.45-11.84,11.64-27.44,16.89-32.52,4.44-4.31,10.19-9.74,16.88-8.76,2.14.31,5.36,1.42,11.26,8.76a75,75,0,0,1,15.64,35c1.49,10.13,2.66,18-2.5,23.77-3.1,3.43-8.46,6.92-13.14,5.63-3.9-1.09-5.82-5-6.88-6.89C394.54,449.72,370.63,454.06,365.84,441.28Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M384.24,433.46a13.89,13.89,0,0,1,.94-6.57c3-7.23,11.34-8.91,12.2-9.07",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_52","data-name":"ID 52"},A.createElement("path",{d:"M430.16,376.92c8.91-3.77,13.37-5.66,17.48-5.25a21.24,21.24,0,0,1,15.74,10.49c.94,1.66,2.28,4.63.88,21.86-1.42,17.38-3.43,22.35-4.37,24.48-2.58,5.81-5.18,11.66-10.5,13.11-6.24,1.71-12.48-3.66-18.36-8.74S417,420.74,414.42,408.39c-.51-2.49-3.47-18.18,5.25-26.23C421.29,380.67,424.24,379.42,430.16,376.92Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M427.78,388.61a44.76,44.76,0,0,1,15-3.44,43.72,43.72,0,0,1,7.82.32",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_51","data-name":"ID 51"},A.createElement("path",{d:"M480,362.93c5.08-1.52,15.65-3.78,29.73,0a20.11,20.11,0,0,1,7.9,3.28,21.58,21.58,0,0,1,8.13,11.89c.87,2.94,1.18,6.11.63,11.26-.36,3.36-2,16-11.89,31.27-6.62,10.23-10.64,11.91-12.51,12.51a18.65,18.65,0,0,1-10.63,0c-7.29-1.94-11.33-7.57-14.39-11.88-5-7-6.56-13.13-9.38-24.4-3.41-13.63-5.05-20.55-1.88-25.64S474.23,364.65,480,362.93Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M485,375.08a49,49,0,0,1,9.69-1.56,50.15,50.15,0,0,1,16.89,1.87",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_61","data-name":"ID 61"},A.createElement("path",{d:"M537.64,365c4.41-.21,9.68-.43,15.63-.62,13.9-.44,18.37-.28,23.77,1.25,5,1.42,10.32,3,12.51,7.5,1.55,3.2.76,6.21-.62,11.89-5.25,21.63-3.37,17.66-5.63,24.39-4.18,12.45-6.39,18.75-11.89,22.52a20.69,20.69,0,0,1-11.88,3.75c-6.38-.09-10.86-3.41-13.76-5.63-7.47-5.7-10.56-12.9-13.76-20.64-4.44-10.71-7.37-17.79-5.43-26.71C528.57,373.53,534.54,367.62,537.64,365Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M548.36,374.69a112.07,112.07,0,0,1,11.89,0A114.47,114.47,0,0,1,574,376.25",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_62","data-name":"ID 62"},A.createElement("path",{d:"M603.32,373.72a41.27,41.27,0,0,1,18.76,1.88c4.86,1.69,12.73,4.43,15.64,11.26.85,2,1.49,4.84-1.25,15.63-3.78,14.85-6.26,24.61-15,31.9-2.59,2.16-6.67,5.47-12.51,5.63a18.52,18.52,0,0,1-11.25-3.75c-9.84-7.19-10-21.64-10-26.27,0-3.35.37-1,2.5-17.52.76-6,1-8.82,3.13-11.88A18.47,18.47,0,0,1,603.32,373.72Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M604.81,383.9a54.48,54.48,0,0,1,24.08,5.94",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_64","data-name":"ID 64"},A.createElement("path",{d:"M696.66,447.68C706.45,451,711.14,463,712.09,471a31.38,31.38,0,0,1-4.49,20.08c-3.28,5.14-7.24,7.78-10.75,10.12a48.79,48.79,0,0,1-28,8.43c-6.75-.12-14.32-.26-20.85-5.66-8.32-6.89-9.26-17.63-9.76-23.39-.41-4.6-.71-8.7,1.59-12.8,1.28-2.26,3.42-4.67,13.38-9.18a134.51,134.51,0,0,1,22.67-7.95C687.22,447.81,692.87,446.38,696.66,447.68Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M680.5,466.68a16,16,0,0,0-4.18,7.12c-.31,1.15-1.74,6.49,1.4,11.49a13.69,13.69,0,0,0,5.64,5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M670.44,469.47a10.18,10.18,0,0,1,4.11,2.66c3.6,3.92,3.51,10.65.56,15.05a12.5,12.5,0,0,1-4.55,4",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_65","data-name":"ID 65"},A.createElement("path",{d:"M721.66,512.22c7.59,12.1,4.72,25.16,3.91,28.36-.9,3.52-2.5,9.44-7.74,14.16-3.37,3-6.74,4.22-10.67,5.55-4.5,1.52-12.81,4.32-23.34,2.36-4.89-.92-14-2.61-20.67-10.73a30.34,30.34,0,0,1-6.68-20c.11-3.33.19-9.24,4.36-14.71a21.7,21.7,0,0,1,11.46-7.66c1.84-.45,2-.19,5.51-.54,5.84-.57,13.47-1.31,20.09-5.74,3.62-2.42,3.1-3.38,5.2-3.94C709.61,497.6,717.79,506.07,721.66,512.22Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M697.3,516.93a13.66,13.66,0,0,0-4.78,12.55,13.35,13.35,0,0,0,3,6.57,12.59,12.59,0,0,0,4.49,3.23",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M685.85,518.63a18.65,18.65,0,0,1,4.68,4.79c1.32,2,4.52,6.79,2.67,11.65-1.64,4.31-6.2,5.91-7.12,6.22",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_63","data-name":"ID 63"},A.createElement("path",{d:"M673.15,398a65.26,65.26,0,0,1,8,11.15c3,5.24,6.66,11.74,6.77,20.45.06,4.25.13,10.15-3.73,14-3.71,3.71-7.12,1.63-15.7,4.24-10,3-9.84,7.22-20.32,10.58-5.84,1.87-12.19,3.9-17.15.89-7.39-4.48-6.3-17.66-6-21.61,1.09-13.83,9-23.1,16.89-32.47,6.25-7.38,9.63-9,12-9.78C662.34,392.75,670.32,396.52,673.15,398Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M666.24,410.38a38.69,38.69,0,0,1,5.48,3.87c3,2.58,4.9,4.14,5.74,6.75a10.86,10.86,0,0,1-.71,7.79",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_71","data-name":"ID 71"},A.createElement("path",{d:"M559.58,786.61c-3.78.2-8.92.44-15,.63-10,.31-11.19.15-12.51-.63-6-3.51-5.36-14.46-4.7-26.27.81-14.4,1.43-25.39,9.39-30.65.52-.34,6.85-4.39,13.13-2.19,3.46,1.22,5.29,3.76,8.13,7.82a63,63,0,0,1,8.45,18.45c.33,1.16,1.16,6.71,2.81,17.83.72,4.82,1.05,7.28-.31,9.7C566.76,785.2,561.8,786.28,559.58,786.61Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M542.29,780.83l13.45-.32",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_81","data-name":"ID 81"},A.createElement("path",{d:"M517,734.7c3.68,8.27,4.8,16.66,6,25.64,1.4,11.06,2.11,16.69,0,20.33a14.42,14.42,0,0,1-7.2,6.57c-1.91.74-2.74.47-8.75.31-9.49-.24-10.73.33-15-.62-3.72-.83-5.58-1.24-7.19-2.51-5.25-4.12-4.37-13.12-3.44-22.51.76-7.7,1.71-16.37,7.51-25.34,3.1-4.8,6.16-9.55,11.88-10.63A15.42,15.42,0,0,1,513.92,730,14.53,14.53,0,0,1,517,734.7Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M494.9,779.73c2.09.48,4.39.92,6.88,1.25,2.7.36,5.21.55,7.5.63",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_82","data-name":"ID 82"},A.createElement("path",{d:"M465.44,780.67a86.77,86.77,0,0,1-16.89-2.19c-8.17-1.88-9.78-3.48-10.32-4.06-4.63-5-2.45-13.9-.94-20,1.64-6.65,4.29-11,7.82-16.89,3.86-6.39,5.94-9.74,10.32-12.2,1.87-1,6.57-3.67,12.2-2.19,6.43,1.71,9.27,7.54,9.69,8.45.79,1.69,1.06,4.38,1.57,9.69a99.45,99.45,0,0,1,.62,11.26,59.38,59.38,0,0,1-1.25,13.14c-1,4.58-1.53,6.93-3.44,9.38A16.52,16.52,0,0,1,465.44,780.67Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M448.47,768.82A19.9,19.9,0,0,0,462.23,772",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_83","data-name":"ID 83"},A.createElement("path",{d:"M418.21,766.6c-1.38,0-16.43-.65-22.2-11.89-3.52-6.84-1.67-13.87-.63-17.82,3.05-11.58,11.44-17.73,21-24.71,3.81-2.8,7.19-4.71,11.57-5,1.61-.1,7-.46,10.63,3.13,2.66,2.63,3,6,3.44,10.64.35,3.57.07,5.93-.94,14.07-1,8.43-1.57,12.66-1.74,13.27-1.35,4.91-3.3,12-9.51,15.81C425.44,766.78,421,766.67,418.21,766.6Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M423.73,755.34a24.81,24.81,0,0,1-4.94.11,26.43,26.43,0,0,1-13.32-5",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_72","data-name":"ID 72"},A.createElement("path",{d:"M611,775c-2.34.86-5.9,2.08-10.32,3.28-9.43,2.59-14.16,3.65-18.29,2.35-6-1.88-9.21-7.1-10.32-8.91-1.58-2.55-2.77-6-1.41-23.93,1.32-17.38,2.94-19.87,4.69-21.58,3.52-3.43,10-6.14,16-3.75,2,.8,3.5,2,7,6.57,4.49,5.75,7.7,9.87,11.26,17.35,4.82,10.15,7.85,16.53,5.31,23A15.32,15.32,0,0,1,611,775Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M601.5,768.16a29.16,29.16,0,0,1-14.94,4.64",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_75","data-name":"ID 75"},A.createElement("path",{d:"M690.21,615.19c2.91,1.12,7.35,2.74,12.89,4.38,8,2.4,9.26,2.14,12.12,3.67,8.95,4.77,11.86,15.17,12.19,16.42,2.46,9.27-.88,16.85-3.37,22.51-2.78,6.34-6,13.69-13.33,16.55-5.78,2.27-11,.5-21.16-3-10.8-3.68-17.65-8.76-23.07-12.85-5.86-4.43-8.82-6.72-10.09-10.4-2.19-6.35.8-12.66,3.77-19,2.6-5.51,5-10.6,10.72-14.41C678.72,613.93,687.28,614.76,690.21,615.19Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M702.17,639.65a12.25,12.25,0,0,0-6,2.44c-3.23,2.53-5.89,7.45-4.31,12.1a10.25,10.25,0,0,0,4.3,5.22",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M694.42,635a19.94,19.94,0,0,1,.8,3.84c.23,2,.71,6.27-1.39,10-2.86,5.12-8.77,6.32-9.81,6.51",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_74","data-name":"ID 74"},A.createElement("path",{d:"M698.12,684.72a30.75,30.75,0,0,1,4,19.33c-2.13,16.25-17.14,23.92-19.32,25-3.23,1.65-8.38,4.28-14.75,3.39-3.39-.47-4.85-1.63-14.63-8.34-14.1-9.67-16-10.66-18.67-14.46-1.77-2.53-4.77-6.79-5.41-12.91-1.17-11.26,6.59-19.88,10.88-24.64,3.49-3.88,6.42-7.13,11.34-8.34,4.74-1.16,8.74.21,16.12,3.4C685.57,674.94,694.53,678.81,698.12,684.72Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M670.91,687.61a13.07,13.07,0,0,1,1.52,8c-.13.94-.87,6.22-5.59,8.77a11.21,11.21,0,0,1-8.39.73",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M681.2,694.64a9.14,9.14,0,0,0-6.23.08c-4.54,1.86-5.82,7.64-6.52,10.77a24.24,24.24,0,0,0-.49,7",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_84","data-name":"ID 84"},A.createElement("path",{d:"M393.1,667.59c9.56.93,16.09,7.1,18.16,9.26a31.31,31.31,0,0,1,8.45,17.84c.48,3.91,2,12.9-3.22,18.12a12.1,12.1,0,0,1-4,2.61C398.83,721.21,397.91,732.34,387,736a24.09,24.09,0,0,1-12.95.44c-12.41-2.7-18.68-13.89-20.94-17.92-2.75-4.92-6.3-11.25-4.73-18.65.44-2.07,1.76-6.48,12.11-15.25C373.8,673.33,381.86,666.49,393.1,667.59Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M383.12,690.22a20,20,0,0,0-1.35,7.95c.1,2.82.23,6.58,2.42,7.78,2.45,1.35,5.11-1.81,9.18-.62a8.36,8.36,0,0,1,3.6,2.27",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M374.27,698.79a15.47,15.47,0,0,1,4.71.82c4.18,1.45,9.37,5.37,9.62,10.65a9.14,9.14,0,0,1-.76,4",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_85","data-name":"ID 85"},A.createElement("path",{d:"M330.37,632.64a156.5,156.5,0,0,1,15.29-6.42c7.45-2.69,11.27-4,15.33-3.75,8.19.55,13.88,5.63,16.2,7.69a34.52,34.52,0,0,1,9,13.26c2.06,4.92,4.38,10.47,2.41,16.2-1,3-2.71,4.62-6,7.78-7.73,7.42-11.6,6.54-21.57,14.31-4.37,3.4-5.14,4.75-8.19,5.62-5.72,1.61-11.07-.84-14-2.18a34.12,34.12,0,0,1-13.22-11.23c-2.66-3.73-9.91-13.9-6.64-26C321.31,639.33,327.76,634.41,330.37,632.64Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M352,640.79a24.06,24.06,0,0,0-.65,7.67c.31,4,.46,8.65,3.81,11.27.72.56,3.09,2.21,7.43,1.75",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M343.58,645.83a27.77,27.77,0,0,1,4.41,2.62c2.79,2,5.66,4.13,6.67,7.45,1.49,4.9-2,9.64-2.58,10.45",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10})),A.createElement("g",{id:"ID_73","data-name":"ID 73"},A.createElement("path",{d:"M653.72,755.81a38.58,38.58,0,0,1-10.79,6.56c-4.12,1.65-14.3,5.73-22,1.41-5.58-3.11-7.16-9.42-10.32-22-2-7.88-3.91-16-.94-25.33,1.32-4.14,2.72-8.53,6.57-10.32,6.4-3,14.89,3.41,21.57,8.44a56.62,56.62,0,0,1,15.49,17.83c3.19,5.81,6.34,11.73,4.22,17.83A14.22,14.22,0,0,1,653.72,755.81Z",transform:"translate(-164.72 -45.83)",fill:"#fff",stroke:"#231f20",strokeMiterlimit:10}),A.createElement("path",{d:"M648.06,750.66a29.16,29.16,0,0,1-14.94,4.64",transform:"translate(-164.72 -45.83)",fill:"none",stroke:"#231f20",strokeMiterlimit:10}))),Cz=e=>({11:"UR Central Incisor",12:"UR Lateral Incisor",13:"UR Canine",14:"UR 1st Premolar",15:"UR 2nd Premolar",16:"UR 1st Molar",17:"UR 2nd Molar",18:"UR 3rd Molar",21:"UL Central Incisor",22:"UL Lateral Incisor",23:"UL Canine",24:"UL 1st Premolar",25:"UL 2nd Premolar",26:"UL 1st Molar",27:"UL 2nd Molar",28:"UL 3rd Molar",31:"LR Central Incisor",32:"LR Lateral Incisor",33:"LR Canine",34:"LR 1st Premolar",35:"LR 2nd Premolar",36:"LR 1st Molar",37:"LR 2nd Molar",38:"LR 3rd Molar",41:"LL Central Incisor",42:"LL Lateral Incisor",43:"LL Canine",44:"LL 1st Premolar",45:"LL 2nd Premolar",46:"LL 1st Molar",47:"LL 2nd Molar",48:"LL 3rd Molar",51:"UR Primary Central Incisor",52:"UR Primary Lateral Incisor",53:"UR Primary Canine",54:"UR Primary 1st Molar",55:"UR Primary 2nd Molar",61:"UL Primary Central Incisor",62:"UL Primary Lateral Incisor",63:"UL Primary Canine",64:"UL Primary 1st Molar",65:"UL Primary 2nd Molar",71:"LR Primary Central Incisor",72:"LR Primary Lateral Incisor",73:"LR Primary Canine",74:"LR Primary 1st Molar",75:"LR Primary 2nd Molar",81:"LL Primary Central Incisor",82:"LL Primary Lateral Incisor",83:"LL Primary Canine",84:"LL Primary 1st Molar",85:"LL Primary 2nd Molar"})[e]||`Tooth ${e}`,f2={healthy:"#10B981",decayed:"#DC2626",filled:"#6B7280",missing:"#6B7280","treatment-planned":"#F97316","root-canal":"#8B5CF6",extraction:"#EF4444",crown:"#F59E0B","has-treatment-before":"#3B82F6","recommended-to-be-treated":"#FBBF24",selected:"#BFDBFE",default:"#D1D5DB"},tIe=e=>{const t={},r="healthy",n=i=>{var o;return((o=e==null?void 0:e[i])==null?void 0:o.condition)||r},a=i=>{var o;return((o=e==null?void 0:e[i])==null?void 0:o.isSelected)===!0};for(let i=11;i<=18;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=21;i<=28;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=31;i<=38;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=41;i<=48;i++)t[i]={id:i,condition:n(i),isPrimary:!1,isSelected:a(i)};for(let i=51;i<=55;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=61;i<=65;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=71;i<=75;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};for(let i=81;i<=85;i++)t[i]={id:i,condition:n(i),isPrimary:!0,isSelected:a(i)};return t},Pz=[{label:"Healthy",value:"healthy"},{label:"Decayed",value:"decayed"},{label:"Filled",value:"filled"},{label:"Missing",value:"missing"},{label:"Planned Tx",value:"treatment-planned"},{label:"Root Canal",value:"root-canal"},{label:"Extraction",value:"extraction"},{label:"Crown",value:"crown"},{label:"Prior Tx",value:"has-treatment-before"},{label:"Recommend Tx",value:"recommended-to-be-treated"}],O3=A.forwardRef(({initialState:e,onToothSelect:t,readOnly:r=!1,domain:n,domainConditions:a},i)=>{console.log("DentalChart: Render triggered. Initial prop value:",JSON.stringify(e)),console.log("DentalChart: Domain received:",n),console.log("DentalChart: DomainConditions received:",a);const[o,s]=A.useState({}),[l,u]=A.useState(null),[d,f]=A.useState(null),[h,m]=A.useState(new Set),[x,g]=A.useState(null),[y,_]=A.useState(null),b=A.useRef(null);A.useEffect(()=>{console.log("DentalChart: useEffect for initialState triggered. Prop value:",JSON.stringify(e));const P=tIe(e);console.log("DentalChart: Regenerated initialTeeth based on prop:",JSON.stringify(P)),s(P),console.log("DentalChart: setTeethData called with regenerated state."),Object.entries(P).filter(([,R])=>R.isSelected).map(([R])=>parseInt(R,10))},[e]),A.useImperativeHandle(i,()=>({getTeethData:()=>o,getLastActiveCondition:()=>l}));const S=A.useCallback(P=>{let R=P;for(;R&&R.tagName!=="svg";){if(R.tagName==="g"&&R.id.startsWith("ID_")){const j=R.id.substring(3),V=parseInt(j,10);if(!isNaN(V)&&o[V])return R}R=R.parentNode}return null},[o]),C=A.useCallback(P=>{const R=S(P);if(R){const j=R.id.substring(3);return parseInt(j,10)}return null},[S]);A.useCallback((P,R)=>{s(j=>{const V=j[P];if(!V)return j;const Z=R;let te=V.isSelected;if(R==="missing"&&(te=!1),V.condition!==Z){const Y={...j,[P]:{...V,condition:Z,isSelected:te}};if(x&&x.id===P&&g(U=>U?{...U,condition:Z}:null),R==="missing"&&V.isSelected&&!te){const U=Object.values(Y).filter(G=>G.isSelected).map(G=>G.id);t==null||t(U)}return m(U=>{const G=new Set(U);return G.add(P),G}),Y}return j})},[x,t]);const E=A.useCallback(P=>{var V;if(r)return;let R=[],j=!1;if(s(Z=>{const te=Z[P];if(!te)return Z;const q=!te.isSelected;j=q;const Y={...Z,[P]:{...te,isSelected:q,condition:q?te.condition:"healthy"}};return R=Object.values(Y).filter(U=>U.isSelected).map(U=>U.id),Y}),j||m(Z=>{const te=new Set(Z);return te.delete(P),te}),t==null||t(R),j){const Z=o[P];if(!Z)return;const te=(V=b.current)==null?void 0:V.querySelector(`#ID_${P}`);if(te&&b.current){const q=b.current.getBoundingClientRect(),Y=te.getBoundingClientRect(),U=Y.top-q.top+Y.height/2+b.current.scrollTop,G=Y.left-q.left+Y.width/2+b.current.scrollLeft;g({id:P,name:Cz(P),condition:Z.condition,top:U,left:G}),_({top:U,left:G})}}else g(null),d!==P&&_(null);return j},[r,t,o,d]),O=A.useCallback(P=>{if(r)return;const R=P;u(j=>{const V=j===R?null:R;return V&&s(Z=>{let te=!1;const q={...Z},Y=Object.entries(Z).filter(([U,G])=>{const J=parseInt(U,10);return G.isSelected&&!h.has(J)});return Y.length>0&&Y.forEach(([U,G])=>{const J=parseInt(U,10);q[J]={...G,condition:V},m(D=>new Set(D).add(J)),te=!0}),te?q:Z}),V})},[r,h]),T=A.useCallback(P=>{if(r)return;const R=C(P.target);R!==null&&(E(R),h.has(R)||u(null))},[r,E,h]),M=A.useCallback(P=>{if(r)return;const R=C(P.target);if(R!==null){f(R);const j=S(P.target);if(j&&b.current){const V=b.current.getBoundingClientRect(),Z=j.getBoundingClientRect(),te=Z.top-V.top+Z.height/2+b.current.scrollTop,q=Z.left-V.left+Z.width/2+b.current.scrollLeft;_({top:te,left:q})}}},[r,S]),L=A.useCallback(()=>{f(null),x||_(null)},[x]);A.useEffect(()=>{var R;const P=(R=b.current)==null?void 0:R.querySelector("svg");P&&(P.querySelectorAll(".condition-indicator-dot").forEach(j=>j.remove()),P.querySelectorAll(".tooth-number-text").forEach(j=>j.remove()),Object.entries(o).forEach(([j,V])=>{const Z=parseInt(j,10),te=P.querySelector(`#ID_${Z}`);if(!te)return;te.dataset.toothId=j,te.classList.remove("tooth-selected","tooth-missing","tooth-hovered","tooth-selection-processed");const q=te.querySelector("path:first-of-type");if(q&&q.setAttribute("fill","var(--tooth-default-fill, #fff)"),q){let Y="var(--tooth-default-fill, #fff)";V.condition!=="healthy"&&(Y=f2[V.condition]||"var(--tooth-default-fill, #fff)"),V.condition==="missing"?q.setAttribute("fill","transparent"):q.setAttribute("fill",Y)}V.isSelected&&!r&&(h.has(Z)?te.classList.add("tooth-selection-processed"):te.classList.add("tooth-selected")),!r&&Z===d&&te.classList.add("tooth-hovered"),V.condition==="missing"&&te.classList.add("tooth-missing")}),r?P.classList.add("opacity-75","cursor-default"):(P.classList.remove("opacity-75","cursor-default"),P.classList.add("cursor-pointer")))},[o,r,h,d]);const z=({tooth:P,name:R,condition:j})=>{const V=(a&&a.length>0?a.map(Z=>({label:Z.charAt(0).toUpperCase()+Z.slice(1),value:Z})):Pz).find(Z=>Z.value===j);return w("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 min-w-[240px] relative",children:[c("div",{className:"absolute -top-2 left-1/2 w-4 h-4 bg-white transform rotate-45 -translate-x-1/2 border-t border-l border-gray-200"}),w("div",{className:"relative",children:[w("div",{className:"flex items-start justify-between mb-2",children:[w("div",{children:[w("h3",{className:"font-medium text-gray-900 text-base",children:["Tooth ",P]}),c("p",{className:"text-sm text-gray-500",children:R})]}),c("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-50",children:c("span",{className:"text-blue-600 text-sm font-medium",children:P})})]}),c("div",{className:"mt-3 pt-3 border-t border-gray-100",children:w("div",{className:"flex items-center gap-2",children:[c("span",{className:"w-3 h-3 rounded-full border border-gray-200",style:{backgroundColor:f2[j]??f2.default}}),c("span",{className:"text-sm text-gray-600 font-medium",children:(V==null?void 0:V.label)||j})]})})]})]})};return c(Yb,{delayDuration:100,children:c("div",{className:"dental-chart-dialog-content relative",children:w("div",{className:"flex flex-row",children:[!r&&w("div",{className:"w-[200px] flex-shrink-0 pr-2 self-stretch",children:[c("label",{className:"block text-sm font-medium text-gray-700 mb-2 sticky top-0 bg-background z-10",children:"Select Conditions to Apply:"}),c("div",{className:"flex flex-wrap gap-2",children:(a&&a.length>0?a.map(P=>({label:P.charAt(0).toUpperCase()+P.slice(1),value:P})):Pz).map(P=>{const R=!Object.values(o).some(Z=>Z.isSelected),j=l===P.value,V=f2[P.value]||f2.default;return w(Fe,{variant:"ghost",size:"sm",disabled:R&&!l,onClick:()=>O(P.value),className:Rt("w-full text-sm h-auto px-3 py-2.5 rounded-md flex items-center justify-start gap-3 transition-all duration-150 ease-in-out font-medium","focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500",j?"bg-blue-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 text-slate-700",R&&!l?"opacity-50 cursor-not-allowed hover:bg-slate-100":""),children:[c("span",{className:"flex items-center justify-center w-5 h-5 border rounded-full shrink-0",style:j?{backgroundColor:"white",borderColor:"white"}:{borderColor:V},children:j&&c("span",{className:"w-2.5 h-2.5 bg-blue-500 rounded-full"})}),c("span",{children:P.label})]},P.value)})})]}),c("div",{className:Rt("relative w-full flex-grow pt-2 pb-2 overflow-y-auto max-h-[350px]",r?"cursor-default":"cursor-pointer"),ref:b,onClick:T,onMouseMove:M,onMouseLeave:L,children:c(eIe,{width:"100%",height:"100%",viewBox:"0 0 698.9 980.66"})}),w(Xb,{open:y!==null,children:[c(Zb,{asChild:!0,children:c("span",{style:{position:"absolute",top:(y==null?void 0:y.top)??0,left:(y==null?void 0:y.left)??0,width:"1px",height:"1px",padding:0,margin:0,pointerEvents:"none",transform:"translate(-50%, -50%)",zIndex:40}})}),c(q2,{side:(()=>{const P=d??(x==null?void 0:x.id);if(P===null)return"top";const R=Math.floor(P/10);return[1,2,5,6].includes(R)?"top":"bottom"})(),align:"center",sideOffset:15,className:"z-50 p-0 border-none shadow-none bg-transparent",avoidCollisions:!0,children:(()=>{const P=d??(x==null?void 0:x.id);if(P===null)return null;const R=o[P];return R?c(z,{tooth:P,name:Cz(P),condition:R.condition}):null})()})]})]})})})});O3.displayName="DentalChart";const hR=({value:e={},onChange:t,placeholder:r="Select Teeth...",disabled:n=!1})=>{const[a,i]=A.useState(!1),[o,s]=A.useState(e),l=A.useRef(null);A.useEffect(()=>{s(e)},[e]);const u=g=>{const y={};return Object.entries(g).forEach(([_,b])=>{const S=parseInt(_,10);isNaN(S)||(y[S]={isSelected:!0,conditions:b.conditions})}),y},d=()=>{if(l.current){const g=l.current.getTeethData(),y={};Object.entries(g).forEach(([_,b])=>{b.isSelected&&(y[parseInt(_,10)]={conditions:b.conditions})}),t==null||t(y),s(y)}else console.error("DentalChart ref not available to get data.");i(!1)},f=()=>{i(!1)},h=g=>{n||i(g)},m=Object.keys(e).map(Number).sort((g,y)=>g-y),x=m.length>0?`Selected: ${m.join(", ")}`:"";return w(ja,{open:a,onOpenChange:h,children:[c(Hw,{asChild:!0,children:w("div",{className:"flex items-center gap-2",children:[w(Fe,{variant:"outline",className:"flex items-center gap-1.5",disabled:n,type:"button",children:[c("span",{role:"img","aria-label":"tooth icon",children:""}),r]}),x&&c("span",{className:"text-sm text-muted-foreground",children:x})]})}),w(Pa,{className:"max-w-4xl",children:[" ",w(Ta,{children:[c(Oa,{children:"Select Affected Teeth"}),c(Yi,{children:"Use the interactive chart below to select or deselect teeth. Click Confirm to save your selection."})]}),c(O3,{ref:l,initialState:u(o),readOnly:!1},a?"open":"closed"),w(Qi,{children:[c(Fe,{variant:"outline",onClick:f,children:"Cancel"}),c(Fe,{onClick:d,children:"Confirm"})]})]})]})};hR.displayName="ToothSelector";const cre=je.object({dh_reason_for_visit:je.enum(["routine_checkup","tooth_pain","gum_issues","sensitivity","cosmetic_concerns","other"]).optional(),dh_reason_for_visit_other:je.string().optional(),dh_chief_complaint:je.string().optional(),dh_has_pain:je.enum(["yes","no"]).optional(),dh_pain_description:je.string().optional(),dh_pain_scale:je.enum(["1","2","3","4","5","6","7","8","9","10"]).optional(),dh_pain_duration_onset:je.string().optional(),dh_past_treatments:je.array(je.string()).optional(),dh_past_treatments_other:je.string().optional(),dh_brushing_frequency:je.enum(["less_than_once","once_a_day","twice_a_day","more_than_twice"]).optional(),dh_flossing_habits:je.enum(["yes_daily","no","occasionally"]).optional(),dh_additional_hygiene_products:je.string().optional(),dh_technique_tools:je.string().optional(),dh_orthodontic_history:je.enum(["yes","no"]).optional(),dh_orthodontic_details:je.string().optional(),dh_has_records:je.enum(["yes","no"]).optional(),dh_xray_frequency:je.string().optional(),dh_bite_issues:je.enum(["yes","no"]).optional(),dh_bite_symptoms:je.string().optional(),dh_cosmetic_concerns:je.enum(["yes","no"]).optional(),dh_cosmetic_issues_details:je.string().optional(),dh_functional_concerns:je.string().optional(),dh_emergency_history:je.enum(["yes","no"]).optional(),dh_emergency_details:je.string().optional(),dh_additional_summary:je.string().optional(),dh_future_goals:je.string().optional(),dh_selected_teeth:je.record(je.string(),je.object({conditions:je.array(je.enum(["healthy","decayed","filled","missing","treatment-planned","root-canal","extraction","crown","has-treatment-before","recommended-to-be-treated"]))})).optional().default({})}),rIe=[{id:"regular_cleanings",label:"Regular Dental Cleanings (Scaling & Polishing)"},{id:"deep_cleaning",label:"Deep Cleaning (Full Mouth Debridement or SRP)"},{id:"fillings",label:"Fillings",subOptions:[{id:"fillings_composite",label:"Composite (White)"},{id:"fillings_amalgam",label:"Amalgam (Silver)"}]},{id:"extractions",label:"Tooth Extractions",subOptions:[{id:"extraction_simple",label:"Simple Extraction"},{id:"extraction_surgical",label:"Surgical Extraction"}]},{id:"crowns",label:"Crowns (Caps)",subOptions:[{id:"crown_porcelain",label:"Porcelain"},{id:"crown_metal",label:"Metal"},{id:"crown_zirconia",label:"Zirconia"}]},{id:"bridges",label:"Bridges"},{id:"rct",label:"Root Canal Treatment (RCT)",subOptions:[{id:"rct_anterior",label:"Anterior Teeth"},{id:"rct_posterior",label:"Posterior Teeth"}]},{id:"implants",label:"Dental Implants",subOptions:[{id:"implant_single",label:"Single Implant"},{id:"implant_multiple",label:"Multiple Implants"}]},{id:"dentures",label:"Dentures",subOptions:[{id:"denture_full",label:"Full Dentures"},{id:"denture_partial",label:"Partial Dentures"}]},{id:"veneers",label:"Veneers"},{id:"whitening",label:"Teeth Whitening"},{id:"orthodontics",label:"Orthodontic Treatment",subOptions:[{id:"ortho_braces",label:"Braces (Metal or Ceramic)"},{id:"ortho_aligners",label:"Clear Aligners (e.g., Invisalign)"}]},{id:"gum_treatments",label:"Gum Treatments",subOptions:[{id:"gum_surgery",label:"Gum Surgery"},{id:"gum_laser",label:"Laser Gum Therapy"}]},{id:"jaw_treatment",label:"Jaw Treatment",subOptions:[{id:"jaw_tmj",label:"TMJ/TMD Therapy"},{id:"jaw_bite_adjustment",label:"Bite Adjustment / Occlusal Correction"}]},{id:"guards",label:"Night Guards or Mouthguards"},{id:"other_treatment",label:"Other (please specify)"}];function nIe({}){var t;const e=su();return w("div",{className:"space-y-8",children:[w("div",{className:"space-y-2",children:[c("h2",{className:"text-xl font-semibold",children:"Dental History"}),c("p",{className:"text-sm text-muted-foreground",children:"Please provide your detailed dental history."})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Reason for Visit & Chief Complaint"}),c(He,{control:e.control,name:"dh_reason_for_visit",render:({field:r})=>w(De,{children:[c(Oe,{children:"Primary Reason for Visit"}),w(Wr,{onValueChange:r.onChange,value:r.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select reason"})})}),w(Ur,{children:[c(wt,{value:"routine_checkup",children:"Routine Checkup"}),c(wt,{value:"tooth_pain",children:"Tooth Pain"}),c(wt,{value:"gum_issues",children:"Gum Issues"}),c(wt,{value:"sensitivity",children:"Sensitivity"}),c(wt,{value:"cosmetic_concerns",children:"Cosmetic Concerns"}),c(wt,{value:"other",children:"Other"})]})]}),c(Xe,{})]})}),e.watch("dh_reason_for_visit")==="other"&&c(He,{control:e.control,name:"dh_reason_for_visit_other",render:({field:r})=>w(De,{children:[c(Oe,{children:"If Other, please describe:"}),c(Me,{children:c(ct,{placeholder:"Explain reason",...r})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_chief_complaint",render:({field:r})=>w(De,{children:[c(Oe,{children:"Chief Complaint Description"}),c(hi,{children:"Please provide a detailed description of the issue that brought you here. Include when the problem began, how it has progressed, and any pain or discomfort experienced."}),c(Me,{children:c(Qr,{rows:4,placeholder:"Describe your main concern...",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Pain & Sensitivity Details"}),c(He,{control:e.control,name:"dh_has_pain",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you experience any dental pain or sensitivity?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dh_has_pain")==="yes"&&w(_r,{children:[c(He,{control:e.control,name:"dh_pain_description",render:({field:r})=>w(De,{children:[c(Oe,{children:"Pain Description"}),c(hi,{children:"Specify location(s), intensity, frequency, and triggers (temperature, chewing, stress)."}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Upper left molar, sharp pain (7/10) when chewing cold items, intermittent.",...r})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_pain_scale",render:({field:r})=>w(De,{children:[c(Oe,{children:"Pain Scale (1=Mild, 10=Severe)"}),w(Wr,{onValueChange:r.onChange,value:r.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select pain level"})})}),c(Ur,{children:[...Array(10)].map((n,a)=>c(wt,{value:(a+1).toString(),children:a+1},a+1))})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_pain_duration_onset",render:({field:r})=>w(De,{children:[c(Oe,{children:"Duration & Onset"}),c(hi,{children:"When did you first notice the pain/sensitivity? Is it constant or intermittent?"}),c(Me,{children:c(ct,{placeholder:"e.g., Started 2 weeks ago, comes and goes",...r})}),c(Xe,{})]})})]})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Previous Dental Treatments & Procedures"}),c(He,{control:e.control,name:"dh_past_treatments",render:()=>w(De,{children:[w("div",{className:"mb-4",children:[c(Oe,{className:"text-base",children:"Past Treatments"}),c(hi,{children:"Please select or describe all that apply."})]}),w("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-4",children:[" ",rIe.map(r=>{var n;return w("div",{children:[" ",c(He,{control:e.control,name:"dh_past_treatments",render:({field:a})=>{var i;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(i=a.value)==null?void 0:i.includes(r.id),onCheckedChange:o=>o===!0?a.onChange([...a.value||[],r.id]):a.onChange((a.value||[]).filter(s=>s!==r.id))})}),c(Oe,{className:"font-normal",children:r.label})]})}}),r.subOptions&&((n=e.watch("dh_past_treatments"))==null?void 0:n.includes(r.id))&&w("div",{className:"ml-6 mt-1 space-y-1",children:[" ",r.subOptions.map(a=>c(He,{control:e.control,name:"dh_past_treatments",render:({field:i})=>{var o;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(o=i.value)==null?void 0:o.includes(a.id),onCheckedChange:s=>{const l=s===!0?[...i.value||[],a.id]:(i.value||[]).filter(u=>u!==a.id);i.onChange(l)}})}),c(Oe,{className:"text-sm font-normal",children:a.label})]})}},a.id))]})]},r.id)})]}),c(Xe,{})]})}),((t=e.watch("dh_past_treatments"))==null?void 0:t.includes("other_treatment"))&&c(He,{control:e.control,name:"dh_past_treatments_other",render:({field:r})=>w(De,{className:"mt-4",children:[" ",c(Oe,{children:"Specify Other Treatments:"}),c(Me,{children:c(Qr,{placeholder:"Describe other treatments...",...r,value:r.value||""})})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Affected Teeth & Conditions"}),c(hi,{children:"Click the button to select the teeth involved. The specific conditions for these teeth can be detailed in the treatment plan later."}),c(He,{control:e.control,name:"dh_selected_teeth",render:({field:r})=>w(De,{children:[c(Oe,{children:"Affected Teeth"}),c(Me,{children:c(hR,{value:r.value||{},onChange:r.onChange,placeholder:"Select Affected Teeth..."})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Oral Hygiene Routine & Home Care"}),c(He,{control:e.control,name:"dh_brushing_frequency",render:({field:r})=>w(De,{children:[c(Oe,{children:"Brushing Frequency"}),w(Wr,{onValueChange:r.onChange,value:r.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select frequency"})})}),w(Ur,{children:[c(wt,{value:"less_than_once",children:"Less than once a day"}),c(wt,{value:"once_a_day",children:"Once a day"}),c(wt,{value:"twice_a_day",children:"Twice a day"}),c(wt,{value:"more_than_twice",children:"More than twice a day"})]})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_flossing_habits",render:({field:r})=>w(De,{children:[c(Oe,{children:"Flossing Habits"}),w(Wr,{onValueChange:r.onChange,value:r.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select habit"})})}),w(Ur,{children:[c(wt,{value:"yes_daily",children:"Yes, daily"}),c(wt,{value:"occasionally",children:"Occasionally"}),c(wt,{value:"no",children:"No"})]})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_additional_hygiene_products",render:({field:r})=>w(De,{children:[c(Oe,{children:"Additional Oral Hygiene Products"}),c(hi,{children:"List products used besides brushing/flossing (mouthwash, water flosser, etc.)."}),c(Me,{children:c(ct,{placeholder:"e.g., Listerine mouthwash, Waterpik",...r})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_technique_tools",render:({field:r})=>w(De,{children:[c(Oe,{children:"Technique & Tools"}),c(hi,{children:"Describe your brushing technique and any special tools (e.g., electric toothbrush)."}),c(Me,{children:c(ct,{placeholder:"e.g., Soft bristle brush, circular motions, Sonicare toothbrush",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"History of Orthodontic Treatment"}),c(He,{control:e.control,name:"dh_orthodontic_history",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Have you had braces, clear aligners, or other orthodontic treatments?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dh_orthodontic_history")==="yes"&&c(He,{control:e.control,name:"dh_orthodontic_details",render:({field:r})=>w(De,{children:[c(Oe,{children:"If yes, specify type, duration, outcomes, challenges:"}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Traditional braces (2 years), results good, wore retainer.",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Dental Records & X-Rays"}),c(He,{control:e.control,name:"dh_has_records",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have copies of previous dental records or X-rays available?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_xray_frequency",render:({field:r})=>w(De,{children:[c(Oe,{children:"X-Ray Frequency"}),c(hi,{children:"How often have you had dental X-rays? (Approximate dates if known)."}),c(Me,{children:c(ct,{placeholder:"e.g., Yearly bitewings, Full mouth series (2020)",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Occlusal & Bite Concerns"}),c(He,{control:e.control,name:"dh_bite_issues",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have issues with your bite or TMJ pain?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dh_bite_issues")==="yes"&&c(He,{control:e.control,name:"dh_bite_symptoms",render:({field:r})=>w(De,{children:[c(Oe,{children:"If yes, describe symptoms (jaw pain, clicking, difficulty chewing):"}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Jaw clicks when opening wide, occasional pain on left side",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Aesthetic & Functional Concerns"}),c(He,{control:e.control,name:"dh_cosmetic_concerns",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Are you concerned about the appearance of your teeth?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dh_cosmetic_concerns")==="yes"&&c(He,{control:e.control,name:"dh_cosmetic_issues_details",render:({field:r})=>w(De,{children:[c(Oe,{children:"Specify concerns (color, shape, alignment, spacing):"}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Teeth are slightly yellow, gap between front teeth",...r})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_functional_concerns",render:({field:r})=>w(De,{children:[c(Oe,{children:"Functional Concerns"}),c(hi,{children:"Describe difficulties with eating, speaking, etc."}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Difficulty chewing hard foods on the right side",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Previous Dental Emergencies & Urgent Care"}),c(He,{control:e.control,name:"dh_emergency_history",render:({field:r})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Have you experienced any dental emergencies?"}),c(Me,{children:w(Lo,{onValueChange:r.onChange,value:r.value,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("dh_emergency_history")==="yes"&&c(He,{control:e.control,name:"dh_emergency_details",render:({field:r})=>w(De,{children:[c(Oe,{children:"If yes, provide details (when, how managed):"}),c(Me,{children:c(Qr,{rows:3,placeholder:"e.g., Broken tooth (2022), fixed with a crown",...r})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Additional Comments & Future Dental Goals"}),c(He,{control:e.control,name:"dh_additional_summary",render:({field:r})=>w(De,{children:[c(Oe,{children:"Overall Dental History Summary"}),c(hi,{children:"Any additional information not covered above."}),c(Me,{children:c(Qr,{rows:4,placeholder:"Additional notes...",...r})}),c(Xe,{})]})}),c(He,{control:e.control,name:"dh_future_goals",render:({field:r})=>w(De,{children:[c(Oe,{children:"Future Treatment Goals & Expectations"}),c(hi,{children:"What outcomes are you hoping for?"}),c(Me,{children:c(Qr,{rows:4,placeholder:"e.g., Whiter teeth, replace missing tooth",...r})}),c(Xe,{})]})})]})]})}const ure=je.object({family_medical_conditions:je.array(je.string()).optional(),family_medical_conditions_other:je.string().optional(),family_dental_issues:je.array(je.string()).optional(),family_dental_issues_other:je.string().optional()}),aIe=[{id:"family_heart_disease",label:"Heart Disease"},{id:"family_diabetes",label:"Diabetes"},{id:"family_high_cholesterol",label:"High Cholesterol"},{id:"family_hypertension",label:"Hypertension"},{id:"family_cancer",label:"Cancer"},{id:"family_osteoporosis",label:"Osteoporosis"}],iIe=[{id:"family_gum_disease",label:"Gum Disease"},{id:"family_tooth_loss",label:"Tooth Loss"},{id:"family_orthodontic_issues",label:"Orthodontic Issues"}];function oIe(){const e=su();return w("div",{className:"space-y-8",children:[w("div",{className:"space-y-2",children:[c("h2",{className:"text-xl font-semibold",children:"Family Medical & Dental History"}),c("p",{className:"text-sm text-muted-foreground",children:"Information about medical and dental conditions in your family."})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Family Medical History"}),c(He,{control:e.control,name:"family_medical_conditions",render:()=>w(De,{children:[w("div",{className:"mb-4",children:[c(Oe,{className:"text-base",children:"Has anyone in your family been diagnosed with the following?"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:aIe.map(t=>c(He,{control:e.control,name:"family_medical_conditions",render:({field:r})=>{var n;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(n=r.value)==null?void 0:n.includes(t.id),onCheckedChange:a=>a?r.onChange([...r.value||[],t.id]):r.onChange((r.value||[]).filter(i=>i!==t.id))})}),c(Oe,{className:"font-normal",children:t.label})]},t.id)}},t.id))}),c(Xe,{})]})}),c(He,{control:e.control,name:"family_medical_conditions_other",render:({field:t})=>w(De,{children:[c(Oe,{children:"Other family medical conditions:"}),c(Me,{children:c(ct,{placeholder:"Specify other conditions",...t})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Family Dental History"}),c(He,{control:e.control,name:"family_dental_issues",render:()=>w(De,{children:[w("div",{className:"mb-4",children:[c(Oe,{className:"text-base",children:"Does your family have a history of dental issues?"}),c(hi,{children:"Select all that apply."})]}),c("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:iIe.map(t=>c(He,{control:e.control,name:"family_dental_issues",render:({field:r})=>{var n;return w(De,{className:"flex flex-row items-start space-x-3 space-y-0",children:[c(Me,{children:c(Rs,{checked:(n=r.value)==null?void 0:n.includes(t.id),onCheckedChange:a=>a?r.onChange([...r.value||[],t.id]):r.onChange((r.value||[]).filter(i=>i!==t.id))})}),c(Oe,{className:"font-normal",children:t.label})]},t.id)}},t.id))}),c(Xe,{})]})}),c(He,{control:e.control,name:"family_dental_issues_other",render:({field:t})=>w(De,{children:[c(Oe,{children:"Other family dental issues:"}),c(Me,{children:c(ct,{placeholder:"Specify other issues",...t})}),c(Xe,{})]})})]})]})}const dre=je.object({diet_description:je.string().optional().nullable(),exercise_frequency:je.preprocess(e=>typeof e=="string"||e===null||e===void 0?e:void 0,je.enum(["never","occasionally","1-2_per_week","3-4_per_week","daily"]).optional().nullable()),stress_level:je.enum(["low","moderate","high"]).optional().nullable(),has_sleep_issues:je.enum(["yes","no"]).optional().nullable(),sleep_issues_details:je.string().optional().nullable(),pregnancy_status:je.enum(["yes","no","not_applicable"]).optional().nullable(),pregnancy_comments:je.string().optional().nullable(),has_mental_health_conditions:je.enum(["yes","no"]).optional().nullable(),mental_health_details:je.string().optional().nullable(),additional_concerns:je.string().optional().nullable(),additional_comments:je.string().optional().nullable()});function sIe(){const e=su();return w("div",{className:"space-y-8",children:[w("div",{className:"space-y-2",children:[c("h2",{className:"text-xl font-semibold",children:"Lifestyle & Special Considerations"}),c("p",{className:"text-sm text-muted-foreground",children:"Information about your lifestyle that may be relevant to your health."})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Diet and Nutrition"}),c(He,{control:e.control,name:"diet_description",render:({field:t})=>w(De,{children:[c(Oe,{children:"Describe your typical diet (include details on sugar consumption, acidic foods, etc.):"}),c(Me,{children:c(Qr,{placeholder:"e.g., Balanced diet, occasional sugary snacks, drink coffee daily...",...t,value:t.value??""})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Exercise & Stress Levels"}),c(He,{control:e.control,name:"exercise_frequency",render:({field:t})=>w(De,{children:[c(Oe,{children:"How often do you exercise?"}),w(Wr,{onValueChange:t.onChange,value:typeof t.value=="boolean"?void 0:t.value??void 0,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select frequency"})})}),w(Ur,{children:[c(wt,{value:"never",children:"Never"}),c(wt,{value:"occasionally",children:"Occasionally"}),c(wt,{value:"1-2_per_week",children:"1-2 times per week"}),c(wt,{value:"3-4_per_week",children:"3-4 times per week"}),c(wt,{value:"daily",children:"Daily"})]})]}),c(Xe,{})]})}),c(He,{control:e.control,name:"stress_level",render:({field:t})=>w(De,{children:[c(Oe,{children:"Rate your overall stress level:"}),w(Wr,{onValueChange:t.onChange,value:t.value??void 0,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select stress level"})})}),w(Ur,{children:[c(wt,{value:"low",children:"Low"}),c(wt,{value:"moderate",children:"Moderate"}),c(wt,{value:"high",children:"High"})]})]}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Sleep Patterns"}),c(He,{control:e.control,name:"has_sleep_issues",render:({field:t})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have any sleep-related issues?"}),c(Me,{children:w(Lo,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("has_sleep_issues")==="yes"&&c(He,{control:e.control,name:"sleep_issues_details",render:({field:t})=>w(De,{children:[c(Oe,{children:"If yes, specify (e.g., sleep apnea, bruxism/teeth grinding):"}),c(Me,{children:c(ct,{placeholder:"e.g., Diagnosed sleep apnea, grind teeth at night",...t,value:t.value??""})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Pregnancy and/or Lactation"}),c(He,{control:e.control,name:"pregnancy_status",render:({field:t})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Are you pregnant, planning to become pregnant, or currently breastfeeding?"}),c(Me,{children:w(Lo,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"not_applicable"})}),c(Oe,{className:"font-normal",children:"Not Applicable"})]})]})}),c(Xe,{})]})}),e.watch("pregnancy_status")==="yes"&&c(He,{control:e.control,name:"pregnancy_comments",render:({field:t})=>w(De,{children:[c(Oe,{children:"Additional comments (if applicable):"}),c(Me,{children:c(Qr,{placeholder:"e.g., Due date, specific concerns...",...t,value:t.value??""})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Mental Health"}),c(He,{control:e.control,name:"has_mental_health_conditions",render:({field:t})=>w(De,{className:"space-y-3",children:[c(Oe,{children:"Do you have any mental health conditions (e.g., anxiety, depression) or medications for such conditions?"}),c(Me,{children:w(Lo,{onValueChange:t.onChange,value:t.value??void 0,className:"flex space-x-4",children:[w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"yes"})}),c(Oe,{className:"font-normal",children:"Yes"})]}),w(De,{className:"flex items-center space-x-2 space-y-0",children:[c(Me,{children:c(On,{value:"no"})}),c(Oe,{className:"font-normal",children:"No"})]})]})}),c(Xe,{})]})}),e.watch("has_mental_health_conditions")==="yes"&&c(He,{control:e.control,name:"mental_health_details",render:({field:t})=>w(De,{children:[c(Oe,{children:"If yes, provide details:"}),c(Me,{children:c(Qr,{placeholder:"e.g., Diagnosed with anxiety, taking Sertraline",...t,value:t.value??""})}),c(Xe,{})]})})]}),w("div",{className:"space-y-4 p-4 border rounded-md",children:[c("h4",{className:"font-medium",children:"Additional Concerns and Comments"}),c(He,{control:e.control,name:"additional_concerns",render:({field:t})=>w(De,{children:[c(Oe,{children:"Please list any other issues or concerns:"}),c(Me,{children:c(Qr,{placeholder:"Any other specific concerns you want to mention?",...t,value:t.value??""})}),c(Xe,{})]})}),c(He,{control:e.control,name:"additional_comments",render:({field:t})=>w(De,{children:[c(Oe,{children:"Additional comments regarding dental or general health:"}),c(Me,{children:c(Qr,{placeholder:"General comments...",...t,value:t.value??""})}),c(Xe,{})]})})]})]})}const nm=tt.forwardRef(({className:e,onFileChange:t,accept:r,maxSize:n=5,uploading:a=!1,value:i,preview:o,onRemove:s,...l},u)=>{const[d,f]=A.useState(!1),[h,m]=A.useState(null),x=S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?f(!0):S.type==="dragleave"&&f(!1)},g=S=>{var C;if(S.size>n*1024*1024)return m(`File size exceeds ${n}MB limit.`),!1;if(r){const E=r.split(",").map(z=>z.trim()),O=S.type,M=(C=S.name.split(".").pop())==null?void 0:C.toLowerCase();if(!E.some(z=>{if(z.startsWith("."))return`.${M}`===z;if(z.includes("*")){const[P]=z.split("/");return O.startsWith(`${P}/`)}else return z===O}))return m("File type not supported."),!1}return m(null),!0},y=S=>{var E;const C=((E=S.target.files)==null?void 0:E[0])||null;if(C&&!g(C)){t&&t(null);return}t&&t(C)},_=S=>{if(S.preventDefault(),S.stopPropagation(),f(!1),S.dataTransfer.files&&S.dataTransfer.files[0]){const C=S.dataTransfer.files[0];g(C)&&t&&t(C)}},b=()=>{if(!i&&!o)return null;const S=o||(i?URL.createObjectURL(i):null),C=(i==null?void 0:i.name)||"File",O=((i==null?void 0:i.type)||"").startsWith("image/")||o&&/\.(jpg|jpeg|png|gif|webp)$/i.test(o);return c("div",{className:"mt-2 relative",children:w("div",{className:"flex items-center p-2 border rounded-md bg-muted",children:[O&&S?c("div",{className:"relative w-16 h-16 mr-3 overflow-hidden rounded",children:c("img",{src:S,alt:"Preview",className:"object-cover w-full h-full"})}):c(vce,{className:"w-12 h-12 mr-3 text-muted-foreground"}),w("div",{className:"flex-1 min-w-0",children:[c("p",{className:"text-sm font-medium truncate",children:C}),c("p",{className:"text-xs text-muted-foreground",children:i!=null&&i.size?`${(i.size/1024/1024).toFixed(2)} MB`:""})]}),s&&c(Fe,{variant:"ghost",size:"sm",onClick:s,type:"button",className:"text-destructive hover:text-destructive",children:c(om,{className:"w-4 h-4"})})]})})};return w("div",{className:Rt("space-y-2",e),children:[!(i||o)&&w("div",{className:Rt("border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer",d?"border-primary bg-primary/5":"border-input",h&&"border-destructive"),onDragEnter:x,onDragOver:x,onDragLeave:x,onDrop:_,onClick:()=>{var S;return(S=document.getElementById(l.id||"file-upload"))==null?void 0:S.click()},children:[a?c(Bn,{className:"w-10 h-10 mb-4 text-muted-foreground animate-spin"}):c(Fce,{className:"w-10 h-10 mb-4 text-muted-foreground"}),c("p",{className:"text-sm font-medium",children:"Drag and drop or click to upload"}),c("p",{className:"text-xs text-muted-foreground mt-1",children:r?`Supported formats: ${r}`:"All files are supported"}),w("p",{className:"text-xs text-muted-foreground mt-1",children:["Max size: ",n,"MB"]}),h&&c("p",{className:"text-xs text-destructive mt-2",children:h})]}),c("input",{id:l.id||"file-upload",type:"file",className:"hidden",onChange:y,ref:u,accept:r,disabled:a,...l}),b(),h&&c("p",{className:"text-xs text-destructive",children:h})]})});nm.displayName="FileUpload";const fre=je.object({consent_given:je.boolean().default(!1),profile_photo:je.instanceof(File).optional().nullable(),signature:je.instanceof(File).optional().nullable(),id_document:je.instanceof(File).optional().nullable(),consent_notes:je.string().optional()});function lIe(){const e=su(),[t,r]=A.useState(!1);return w("div",{className:"space-y-6",children:[w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Documents & Consent"}),c("p",{className:"text-sm text-muted-foreground",children:"Upload necessary documents and provide consent for treatment."})]}),c(He,{control:e.control,name:"profile_photo",render:({field:n})=>w(De,{children:[c(Oe,{children:"Profile Photo"}),c(Me,{children:c(nm,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg",maxSize:5,uploading:t,onRemove:()=>n.onChange(null)})}),c(Xe,{})]})}),c(He,{control:e.control,name:"signature",render:({field:n})=>w(De,{children:[c(Oe,{children:"Patient Signature"}),c(Me,{children:c(nm,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg",maxSize:2,uploading:t,onRemove:()=>n.onChange(null)})}),c(Xe,{})]})}),c(He,{control:e.control,name:"id_document",render:({field:n})=>w(De,{children:[c(Oe,{children:"ID Document"}),c(Me,{children:c(nm,{value:n.value,onFileChange:n.onChange,accept:"image/png,image/jpeg,image/jpg,application/pdf",maxSize:10,uploading:t,onRemove:()=>n.onChange(null)})}),c(Xe,{})]})}),c(He,{control:e.control,name:"consent_given",render:({field:n})=>w(De,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[c(Me,{children:c(Rs,{checked:n.value,onCheckedChange:n.onChange})}),w("div",{className:"space-y-1 leading-none",children:[c(Oe,{children:"I consent to treatment"}),c("p",{className:"text-sm text-muted-foreground",children:"By checking this box, I provide consent for dental treatment and procedures."})]})]})}),c(He,{control:e.control,name:"consent_notes",render:({field:n})=>w(De,{children:[c(Oe,{children:"Consent Notes"}),c(Me,{children:c(Qr,{placeholder:"Any additional notes related to patient consent",...n})}),c(Xe,{})]})})]})}const cIe=je.object({acknowledgment:je.boolean().refine(e=>e===!0,{message:"You must acknowledge that the information provided is accurate."}),patient_signature_consent:je.string().optional(),consent_date:je.date().optional().default(new Date)}),uIe=je.object({...Wp.shape,...dR.shape,...lre.shape,...cre.shape,...ure.shape,...dre.shape,...cIe.shape,...fre.shape}),dIe=je.object({first_name:Wp.shape.first_name,last_name:Wp.shape.last_name,middle_name:Wp.shape.middle_name.optional(),gender:Wp.shape.gender,age:Wp.shape.age,occupation:Wp.shape.occupation.optional(),phone:dR.shape.phone}),Md=["personal","contact","medical","dental","family_lifestyle","documents"],_0=e=>e instanceof je.ZodObject?Object.keys(e.shape):[],fIe={personal:_0(Wp),contact:_0(dR),medical:_0(lre),dental:_0(cre),family_lifestyle:[..._0(ure),..._0(dre)],documents:_0(fre)};function pR({patient:e,onSuccess:t,onCancel:r,mode:n="full"}){const{toast:a}=yn(),[i,o]=A.useState(!1),[s,l]=A.useState(!1),[u,d]=A.useState(!1),[f,h]=A.useState(""),[m,x]=A.useState(new Date),[g,y]=A.useState(null),[_,b]=A.useState(Md[0]),[S,C]=A.useState(!0),E=n==="simplified",O={first_name:"",last_name:"",middle_name:"",gender:"male",age:null,occupation:"",phone:""},T={...O,marital_status:"single",email:"",address:"",city:"",state:"",postal_code:"",country:"USA",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",blood_group:"unknown",height:null,weight:null,has_allergies:"no",medication_allergies:[],other_medication_allergy_details:"",food_allergies:[],other_food_allergy_details:"",environmental_allergies:[],other_environmental_allergy_details:"",other_allergies:[],other_allergy_details:"",other_allergies_manual_input:"",diagnosed_conditions:[],other_diagnosed_condition:"",has_implants:"no",implants_details:"",taking_medications:"no",current_medications:[],recent_health_changes:"no",health_changes_details:"",previous_surgeries:[],immunizations_up_to_date:"not_sure",recent_immunizations:"",recent_medical_screenings:"no",screenings_details:"",dental_material_allergies:"no",dental_material_allergies_details:"",notes:"",dh_reason_for_visit:void 0,dh_reason_for_visit_other:"",dh_chief_complaint:"",dh_has_pain:"no",dh_pain_description:"",dh_pain_scale:void 0,dh_pain_duration_onset:"",dh_past_treatments:[],dh_past_treatments_other:"",dh_brushing_frequency:void 0,dh_flossing_habits:void 0,dh_additional_hygiene_products:"",dh_technique_tools:"",dh_orthodontic_history:"no",dh_orthodontic_details:"",dh_has_records:"no",dh_xray_frequency:"",dh_bite_issues:"no",dh_bite_symptoms:"",dh_cosmetic_concerns:"no",dh_cosmetic_issues_details:"",dh_functional_concerns:"",dh_emergency_history:"no",dh_emergency_details:"",dh_additional_summary:"",dh_future_goals:"",dh_selected_teeth:{},family_medical_conditions:[],family_medical_conditions_other:"",family_dental_issues:[],family_dental_issues_other:"",diet_description:"",exercise_frequency:void 0,stress_level:void 0,has_sleep_issues:"no",sleep_issues_details:"",pregnancy_status:"not_applicable",pregnancy_comments:"",has_mental_health_conditions:"no",mental_health_details:"",additional_concerns:"",additional_comments:"",acknowledgment:!1,patient_signature_consent:"",consent_date:new Date,consent_given:!1,consent_notes:"",profile_photo:void 0,signature:void 0,id_document:void 0},M=A.useCallback(q=>{var G,J,D,K,Q,ae,se,fe,ie,X,ue,de,re,ke,Re,Pe,ge,Ye,Qe,st,Pt,ft,_e,Te,qe,yt,vt,ht,Ie,Ze,_t;const Y=E?O:T,U=q?{first_name:q.first_name||"",last_name:q.last_name||"",middle_name:q.middle_name||"",gender:q.gender==="male"||q.gender==="female"||q.gender==="other"?q.gender:void 0,age:q.age??null,occupation:q.occupation||"",phone:q.phone||"",...!E&&{marital_status:q.marital_status||"single",email:q.email||"",address:q.address||"",city:q.city||"",state:q.state||"",postal_code:q.postal_code||"",country:q.country||"USA",emergency_contact_name:q.emergency_contact_name||"",emergency_contact_phone:q.emergency_contact_phone||"",emergency_contact_relationship:q.emergency_contact_relationship||"",blood_group:q.blood_group||"unknown",height:q.height??null,weight:q.weight??null,has_allergies:((G=q.detailed_medical_info)==null?void 0:G.has_allergies)||"no",medication_allergies:((J=q.detailed_medical_info)==null?void 0:J.medication_allergies)||[],other_medication_allergy_details:((D=q.detailed_medical_info)==null?void 0:D.other_medication_allergy_details)||"",food_allergies:((K=q.detailed_medical_info)==null?void 0:K.food_allergies)||[],other_food_allergy_details:((Q=q.detailed_medical_info)==null?void 0:Q.other_food_allergy_details)||"",environmental_allergies:((ae=q.detailed_medical_info)==null?void 0:ae.environmental_allergies)||[],other_environmental_allergy_details:((se=q.detailed_medical_info)==null?void 0:se.other_environmental_allergy_details)||"",other_allergies:((fe=q.detailed_medical_info)==null?void 0:fe.other_allergies)||[],other_allergy_details:((ie=q.detailed_medical_info)==null?void 0:ie.other_allergy_details)||"",other_allergies_manual_input:((X=q.detailed_medical_info)==null?void 0:X.other_allergies_manual_input)||"",diagnosed_conditions:Array.isArray(q.medical_conditions)?q.medical_conditions:[],taking_medications:q.current_medications&&Array.isArray(q.current_medications)&&q.current_medications.length>0?"yes":"no",current_medications:Array.isArray(q.current_medications)?q.current_medications:[],previous_surgeries:Array.isArray(q.previous_surgeries)?q.previous_surgeries:[],notes:q.notes||"",consent_given:q.consent_given||!1,...q.dental_history&&typeof q.dental_history=="object"?{...Object.fromEntries(Object.entries(q.dental_history).filter(([pt])=>pt!=="dh_selected_teeth"))}:{},...q.family_medical_history&&typeof q.family_medical_history=="object"?{...q.family_medical_history}:{},diet_description:((ue=q.lifestyle_habits)==null?void 0:ue.diet)??"",exercise_frequency:((de=q.lifestyle_habits)==null?void 0:de.exercise)??void 0,stress_level:((re=q.lifestyle_habits)==null?void 0:re.stress)??void 0,has_sleep_issues:(Re=(ke=q.lifestyle_habits)==null?void 0:ke.sleep_issues)!=null&&Re.startsWith("Yes")?"yes":((Pe=q.lifestyle_habits)==null?void 0:Pe.sleep_issues)==="No"?"no":null,sleep_issues_details:(Ye=(ge=q.lifestyle_habits)==null?void 0:ge.sleep_issues)!=null&&Ye.startsWith("Yes")&&((Qe=q.lifestyle_habits)==null?void 0:Qe.sleep_issues.replace("Yes, ",""))!=="details missing"?(st=q.lifestyle_habits)==null?void 0:st.sleep_issues.replace("Yes, ",""):"",pregnancy_status:((Pt=q.lifestyle_habits)==null?void 0:Pt.pregnancy_status)??void 0,pregnancy_comments:((ft=q.lifestyle_habits)==null?void 0:ft.pregnancy_comments)??"",has_mental_health_conditions:(Te=(_e=q.lifestyle_habits)==null?void 0:_e.mental_health)!=null&&Te.startsWith("Yes")?"yes":((qe=q.lifestyle_habits)==null?void 0:qe.mental_health)==="No"?"no":void 0,mental_health_details:(vt=(yt=q.lifestyle_habits)==null?void 0:yt.mental_health)!=null&&vt.startsWith("Yes")&&((ht=q.lifestyle_habits)==null?void 0:ht.mental_health.replace("Yes, ",""))!=="details missing"?(Ie=q.lifestyle_habits)==null?void 0:Ie.mental_health.replace("Yes, ",""):"",additional_concerns:((Ze=q.lifestyle_habits)==null?void 0:Ze.additional_concerns)??"",additional_comments:((_t=q.lifestyle_habits)==null?void 0:_t.additional_comments)??""}}:{};return{...Y,...U}},[e,E]),L=dd({resolver:fd(E?dIe:uIe),defaultValues:E?O:T,mode:"onChange"});A.useEffect(()=>{C(!0),console.log(`PatientForm: useEffect triggered. Patient ID: ${e==null?void 0:e.id}, Mode: ${n}`),(async()=>{let Y=M(e);if(console.log("PatientForm: Base defaults calculated:",JSON.stringify(Y)),e!=null&&e.id&&!E)try{console.log("PatientForm: Fetching dental history teeth map for patient:",e.id);const U=await Vt.patients.getPatientDentalHistoryTeethMap(e.id);console.log("PatientForm: Fetched dental history teeth map for form:",JSON.stringify(U)),Y.dh_selected_teeth=U||{}}catch(U){console.error("Error fetching patient dental history teeth map:",U),a({title:"Error Loading Affected Teeth",description:"Could not load previously selected affected teeth.",variant:"destructive"}),Y.dh_selected_teeth={}}else E?E&&delete Y.dh_selected_teeth:Y.dh_selected_teeth={};console.log("PatientForm: Resetting form with final defaults:",JSON.stringify(Y)),L.reset(Y),console.log("PatientForm: Form reset complete. Checking form state after reset:",JSON.stringify(L.getValues("dh_selected_teeth"))),C(!1)})()},[e,n,E,M,L,a]);const z=async(q,Y,U)=>{if(!(q instanceof File))return null;console.log(`Uploading ${U} for ${Y}`);const{data:{session:G},error:J}=await Le.auth.getSession();if(J||!G)throw new Error("Auth failed.");const D=q.name.split(".").pop(),K=`public/${Y}/${U}-${Date.now()}.${D}`,{error:Q}=await Le.storage.from("medical-records").upload(K,q);if(Q)throw new Error(`Upload failed: ${Q.message}`);const{data:ae}=Le.storage.from("medical-records").getPublicUrl(K);if(!(ae!=null&&ae.publicUrl))throw new Error("Failed to get URL.");return{path:K,url:ae.publicUrl,name:q.name,type:U,size:q.size,uploaded_at:new Date().toISOString()}},P=async q=>{o(!0);try{const Y=e==null?void 0:e.id,U=q;if(!Y&&(U.profile_photo instanceof File||U.signature instanceof File||U.id_document instanceof File))throw new Error("Cannot upload files for a new patient. Save first.");let G=[],J=(e==null?void 0:e.profile_photo_url)||null,D=(e==null?void 0:e.signature_url)||null;if(!E&&Y){Array.isArray(e==null?void 0:e.documents)&&(G=e.documents);const X=U;if(X.profile_photo instanceof File){const ue=await z(X.profile_photo,Y,"profile_photo");ue&&(J=ue.url,G=G.filter(de=>de.type!=="profile_photo"),G.push(ue))}if(X.signature instanceof File){const ue=await z(X.signature,Y,"signature");ue&&(D=ue.url,G=G.filter(de=>de.type!=="signature"),G.push(ue))}if(X.id_document instanceof File){const ue=await z(X.id_document,Y,"id_document");ue&&(G=G.filter(de=>de.type!=="id_document"),G.push(ue))}}else if(!Y&&(U.profile_photo instanceof File||U.signature instanceof File||U.id_document instanceof File))throw new Error("Cannot upload files for a new patient. Save first.");const K={first_name:q.first_name||"",last_name:q.last_name||"",middle_name:q.middle_name||null,gender:q.gender==="male"||q.gender==="female"||q.gender==="other"?q.gender:null,age:q.age??null,occupation:q.occupation||null,phone:q.phone||""};let Q;if(E)Q=K;else{const X=q;Q={...K,marital_status:X.marital_status||null,email:X.email||null,address:X.address||null,city:X.city||null,state:X.state||null,postal_code:X.postal_code||null,country:X.country||null,emergency_contact_name:X.emergency_contact_name||null,emergency_contact_phone:X.emergency_contact_phone||null,emergency_contact_relationship:X.emergency_contact_relationship||null,blood_group:X.blood_group||null,height:X.height??null,weight:X.weight??null,medical_conditions:[...X.diagnosed_conditions||[],...X.other_diagnosed_condition?[X.other_diagnosed_condition]:[]].length>0?[...X.diagnosed_conditions||[],...X.other_diagnosed_condition?[X.other_diagnosed_condition]:[]]:null,current_medications:X.taking_medications==="yes"?X.current_medications||[]:null,previous_surgeries:X.previous_surgeries&&X.previous_surgeries.length>0?X.previous_surgeries:null,detailed_medical_info:{has_implants:X.has_implants,implants_details:X.implants_details||null,recent_health_changes:X.recent_health_changes,health_changes_details:X.health_changes_details||null,immunizations_up_to_date:X.immunizations_up_to_date,recent_immunizations:X.recent_immunizations||null,recent_medical_screenings:X.recent_medical_screenings,screenings_details:X.screenings_details||null,dental_material_allergies:X.dental_material_allergies,dental_material_allergies_details:X.dental_material_allergies_details||null,has_allergies:X.has_allergies,medication_allergies:X.medication_allergies||[],other_medication_allergy_details:X.other_medication_allergy_details||null,food_allergies:X.food_allergies||[],other_food_allergy_details:X.other_food_allergy_details||null,environmental_allergies:X.environmental_allergies||[],other_environmental_allergy_details:X.other_environmental_allergy_details||null,other_allergies:X.other_allergies||[],other_allergy_details:X.other_allergy_details||null,other_allergies_manual_input:X.other_allergies_manual_input||null},dental_history:{reason_for_visit:X.dh_reason_for_visit,reason_for_visit_other:X.dh_reason_for_visit_other||null,chief_complaint:X.dh_chief_complaint||null,has_pain:X.dh_has_pain,pain_description:X.dh_pain_description||null,pain_scale:X.dh_pain_scale,pain_duration_onset:X.dh_pain_duration_onset||null,past_treatments:X.dh_past_treatments||[],past_treatments_other:X.dh_past_treatments_other||null,brushing_frequency:X.dh_brushing_frequency,flossing_habits:X.dh_flossing_habits,additional_hygiene_products:X.dh_additional_hygiene_products||null,technique_tools:X.dh_technique_tools||null,orthodontic_history:X.dh_orthodontic_history,orthodontic_details:X.dh_orthodontic_details||null,has_records:X.dh_has_records,xray_frequency:X.dh_xray_frequency||null,bite_issues:X.dh_bite_issues,bite_symptoms:X.dh_bite_symptoms||null,cosmetic_concerns:X.dh_cosmetic_concerns,cosmetic_issues_details:X.dh_cosmetic_issues_details||null,functional_concerns:X.dh_functional_concerns||null,emergency_history:X.dh_emergency_history,emergency_details:X.dh_emergency_details||null,additional_summary:X.dh_additional_summary||null,future_goals:X.dh_future_goals||null},family_medical_history:{conditions:X.family_medical_conditions||[],other:X.family_medical_conditions_other||null,dental_issues:X.family_dental_issues||[],dental_other:X.family_dental_issues_other||null},lifestyle_habits:{diet:X.diet_description||null,exercise:X.exercise_frequency||null,stress:X.stress_level||null,sleep_issues:X.has_sleep_issues==="yes"?X.sleep_issues_details?`Yes, ${X.sleep_issues_details}`:"Yes, details missing":"No",pregnancy_status:X.pregnancy_status||null,pregnancy_comments:X.pregnancy_comments||null,mental_health:X.has_mental_health_conditions==="yes"?X.mental_health_details?`Yes, ${X.mental_health_details}`:"Yes, details missing":"No",additional_concerns:X.additional_concerns||null,additional_comments:X.additional_comments||null},notes:X.notes||null,consent_given:X.consent_given||null,profile_photo_url:J,signature_url:D,documents:G}}let ae=Y,se=null;const fe=Q;if(fe.dental_history&&typeof fe.dental_history=="object"&&(delete fe.dental_history.dh_tooth_conditions,fe.dental_history=fe.dental_history),Y)console.log(`Updating existing patient (${n} mode):`,Y),await Vt.patients.update(Y,fe);else{console.log(`Creating new patient (${n} mode)...`);const X={...fe};delete X.profile_photo_url,delete X.signature_url,delete X.documents,E&&(X.marital_status=null,X.email=null,X.address=null,X.city=null,X.state=null,X.postal_code=null,X.country=null,X.emergency_contact_name=null,X.emergency_contact_phone=null,X.emergency_contact_relationship=null,X.blood_group=null,X.height=null,X.weight=null,X.medical_conditions=null,X.current_medications=null,X.previous_surgeries=null,X.detailed_medical_info=null,X.dental_history=null,X.family_medical_history=null,X.lifestyle_habits=null,X.notes=null,X.consent_given=null);const ue={first_name:X.first_name||"",last_name:X.last_name||"",middle_name:X.middle_name||null,gender:X.gender==="male"||X.gender==="female"||X.gender==="other"?X.gender:null,age:X.age??null,occupation:X.occupation||null,phone:X.phone||"",marital_status:X.marital_status||null,email:X.email||null,address:X.address||null,city:X.city||null,state:X.state||null,postal_code:X.postal_code||null,country:X.country||null,emergency_contact_name:X.emergency_contact_name||null,emergency_contact_phone:X.emergency_contact_phone||null,emergency_contact_relationship:X.emergency_contact_relationship||null,blood_group:X.blood_group||null,height:X.height??null,weight:X.weight??null,medical_conditions:X.medical_conditions||null,current_medications:X.current_medications||null,previous_surgeries:X.previous_surgeries||null,detailed_medical_info:X.detailed_medical_info||null,dental_history:X.dental_history||null,family_medical_history:X.family_medical_history||null,lifestyle_habits:X.lifestyle_habits||null,notes:X.notes||null,consent_given:X.consent_given||null};if(se=await Vt.patients.create(ue),!(se!=null&&se.id))throw new Error("Failed to create patient or retrieve new patient ID.");ae=se.id,console.log("New patient created:",ae)}if(!E&&ae){const X=q.dh_selected_teeth,ue=X?Object.keys(X).map(Number):[];console.log("Saving patient dental history teeth map (with conditions):",JSON.stringify(X));try{await Vt.patients.savePatientDentalHistoryTeethWithConditions(ae,X),console.log("Patient dental history teeth (with conditions) saved successfully.")}catch(de){console.error("Error saving patient dental history teeth:",de),a({title:"Warning",description:`Patient info saved, but failed to save dental history teeth: ${de.message}`,variant:"destructive"})}}a({title:"Success",description:Y?"Patient information updated successfully.":E?"Basic patient info saved. Complete profile later.":"Patient created successfully. Edit to add documents."}),t(ae)}catch(Y){console.error("Error saving patient:",Y);let U="Failed to save patient information.";(Y.message.startsWith("Auth")||Y.message.startsWith("Failed to upload")||Y.message.startsWith("Cannot upload")||Y.message.startsWith("Upload succeeded"))&&(U=Y.message),a({title:"Error",description:U,variant:"destructive"})}finally{o(!1)}},R=q=>{E?P(q):console.warn("onSubmit called unexpectedly in full mode")},j=async()=>{if(E)return;o(!0);const q=fIe[_]||[];if(console.log(`Validating fields for tab "${_}":`,q),q.length===0&&_!=="documents"&&console.warn(`No fields defined for validation on tab: ${_}`),q.length>0?await L.trigger(q):!0){console.log(`Validation passed for tab: ${_}`);const U=L.getValues();y(U),d(!1),h(U.patient_signature_consent||""),x(new Date),l(!0)}else console.log(`Validation failed for tab: ${_}`),a({title:"Validation Error",description:`Please fix the errors on the "${_.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase())}" tab before saving.`,variant:"destructive"});o(!1)},V=()=>{if(u&&g){const q={...g,acknowledgment:u,patient_signature_consent:f,consent_date:m||new Date,consent_given:u};P(q),l(!1),y(null)}else a({title:"Acknowledgment Required",description:"Please acknowledge and provide signature/date in the dialog to save.",variant:"destructive"})},Z=()=>{const q=Md.indexOf(_);q<Md.length-1&&b(Md[q+1])},te=()=>{const q=Md.indexOf(_);q>0&&b(Md[q-1])};return w(yte,{...L,children:[c("div",{className:"space-y-6",children:E?w("form",{onSubmit:L.handleSubmit(R),className:"space-y-6",children:[w("div",{className:"space-y-6 pt-6 max-h-[calc(90vh-200px)] overflow-y-auto p-1",children:[w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Basic Patient Information"}),c("p",{className:"text-sm text-muted-foreground",children:"Enter the essential details for the new patient."})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c(He,{control:L.control,name:"first_name",render:({field:q})=>w(De,{children:[c(Oe,{children:"First Name"}),c(Me,{children:c(ct,{placeholder:"John",...q})}),c(Xe,{})]})}),c(He,{control:L.control,name:"middle_name",render:({field:q})=>w(De,{children:[c(Oe,{children:"Middle Name"}),c(Me,{children:c(ct,{placeholder:"Michael",...q})}),c(Xe,{})]})}),c(He,{control:L.control,name:"last_name",render:({field:q})=>w(De,{children:[c(Oe,{children:"Last Name"}),c(Me,{children:c(ct,{placeholder:"Doe",...q})}),c(Xe,{})]})}),c(He,{control:L.control,name:"gender",render:({field:q})=>w(De,{children:[c(Oe,{children:"Gender"}),w(Wr,{onValueChange:q.onChange,defaultValue:q.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select gender"})})}),w(Ur,{children:[c(wt,{value:"male",children:"Male"}),c(wt,{value:"female",children:"Female"}),c(wt,{value:"other",children:"Other"})]})]}),c(Xe,{})]})}),c(He,{control:L.control,name:"age",render:({field:q})=>w(De,{children:[c(Oe,{children:"Age"}),c(Me,{children:c(ct,{type:"number",placeholder:"25",...q,value:q.value??"",onChange:Y=>q.onChange(Y.target.value===""?null:Y.target.valueAsNumber)})}),c(Xe,{})]})}),c(He,{control:L.control,name:"occupation",render:({field:q})=>w(De,{children:[c(Oe,{children:"Occupation"}),c(Me,{children:c(ct,{placeholder:"Software Engineer",...q})}),c(Xe,{})]})}),c(He,{control:L.control,name:"phone",render:({field:q})=>w(De,{children:[c(Oe,{children:"Phone Number"}),c(Me,{children:c(ct,{placeholder:"+1234567890",...q})}),c(Xe,{})]})})]})]}),w("div",{className:"flex justify-end gap-2 pt-4",children:[c(Fe,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),c(Fe,{type:"submit",disabled:i||S,children:i?w(_r,{children:[c("span",{className:"mr-2",children:"Saving..."}),c(Bn,{className:"h-4 w-4 animate-spin"})]}):S?w(_r,{children:[c("span",{className:"mr-2",children:"Loading..."}),c(Bn,{className:"h-4 w-4 animate-spin"})]}):"Save Changes"})]})]}):w("div",{className:"pt-6",children:[w(Tg,{value:_,onValueChange:b,className:"space-y-4",children:[c(Og,{children:Md.map(q=>c(dl,{value:q,children:q.replace(/_/g," ").replace(/\b\w/g,Y=>Y.toUpperCase())},q))}),c(Ci,{value:"personal",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:c(FDe,{})}),c(Ci,{value:"contact",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:c(LDe,{})}),c(Ci,{value:"medical",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:c(QDe,{})}),c(Ci,{value:"dental",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:c(nIe,{})}),w(Ci,{value:"family_lifestyle",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1 space-y-8",children:[c(oIe,{}),c(sIe,{})]}),c(Ci,{value:"documents",className:"max-h-[calc(90vh-250px)] overflow-y-auto p-1",children:c(lIe,{})})]}),w("div",{className:"flex justify-between gap-2 pt-4",children:[w("div",{children:[" ",w(Fe,{type:"button",variant:"outline",onClick:te,disabled:Md.indexOf(_)===0,children:[c(i4,{className:"mr-2 h-4 w-4"})," Previous"]}),w(Fe,{type:"button",variant:"outline",onClick:Z,disabled:Md.indexOf(_)===Md.length-1,className:"ml-2",children:["Next ",c(im,{className:"ml-2 h-4 w-4"})]})]}),w("div",{children:[" ",c(Fe,{type:"button",variant:"outline",onClick:r,className:"mr-2",children:"Cancel"}),c(Fe,{type:"button",onClick:j,disabled:i||S,children:i?w(_r,{children:[c("span",{className:"mr-2",children:"Validating..."}),c(Bn,{className:"h-4 w-4 animate-spin"})]}):S?w(_r,{children:[c("span",{className:"mr-2",children:"Loading..."}),c(Bn,{className:"h-4 w-4 animate-spin"})]}):"Save Changes"})]})]})]})})," ",c(ja,{open:s,onOpenChange:l,children:w(Pa,{className:"sm:max-w-[525px]",children:[w(Ta,{children:[w(Oa,{className:"flex items-center",children:[c(nx,{className:"h-5 w-5 text-green-600 mr-2"})," Consent & Acknowledgment"]}),c(Yi,{children:"Please review, acknowledge, and sign below before saving the patient information."})]}),w("div",{className:"space-y-4 py-4",children:[w("div",{className:"flex items-start space-x-3 rounded-md border p-4 shadow-sm",children:[c(Rs,{id:"dialog-acknowledgment",checked:u,onCheckedChange:q=>d(q===!0),className:"mt-1"}),w("div",{className:"grid gap-1.5 leading-none",children:[c("label",{htmlFor:"dialog-acknowledgment",className:"text-sm font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"I confirm that the information provided is complete and accurate to the best of my knowledge."}),!u&&c("p",{className:"text-sm text-destructive",children:"Acknowledgment is required."})]})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"dialog-signature",children:"Patient Signature (Type full name)"}),c(ct,{id:"dialog-signature",placeholder:"Type your full name",value:f,onChange:q=>h(q.target.value)}),c("p",{className:"text-xs text-muted-foreground",children:"Typing your name here acts as your digital signature."})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"dialog-consent-date",children:"Date"}),c(ct,{id:"dialog-consent-date",type:"date",value:m?m.toISOString().split("T")[0]:"",onChange:q=>x(q.target.value?new Date(q.target.value):null)})]})]}),w(Qi,{children:[c(x3,{asChild:!0,children:c(Fe,{type:"button",variant:"outline",children:"Cancel"})}),c(Fe,{type:"button",onClick:V,disabled:!u||i,children:i?w(_r,{children:[c("span",{className:"mr-2",children:"Saving..."}),c(Bn,{className:"h-4 w-4 animate-spin"})]}):"Confirm & Save"})]})]})})]})}function hIe(){var xt,Fr,ma;const[e,t]=BH();bo();const[r,n]=A.useState(new Date),[a,i]=A.useState("week"),[o,s]=A.useState(null),[l,u]=A.useState(!1),[d,f]=A.useState(!1),[h,m]=A.useState(null),[x,g]=A.useState("patient-select"),[y,_]=A.useState(""),[b,S]=A.useState(null),[C,E]=A.useState(null),[O,T]=A.useState([]),[M,L]=A.useState([]),[z,P]=A.useState([]),[R,j]=A.useState([]),[V,Z]=A.useState(!1),[te,q]=A.useState(""),[Y,U]=A.useState(null),[G,J]=A.useState(""),[D,K]=A.useState("AM"),{toast:Q}=yn(),ae=100,se="bg-booked-bg text-booked-icon border border-booked-border",fe="bg-canceled-bg text-canceled-icon border border-canceled-border line-through opacity-70",[ie,X]=A.useState(null),[ue,de]=A.useState(!1),[re,ke]=A.useState({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),Re=Array.from({length:11},(bt,mt)=>{const Jt=mt+8;return Ut(new Date().setHours(Jt,0),"HH:mm")}),[Pe,ge]=A.useState(null),[Ye,Qe]=A.useState(null),[st,Pt]=A.useState(!1),ft=async()=>{try{let bt,mt;if(a==="day"?(bt=Dl(r),mt=Qv(r)):a==="week"?(bt=ss(r,{weekStartsOn:1}),mt=D0(r,{weekStartsOn:1})):a==="month"&&(bt=Uo(r),mt=dm(r)),!bt||!mt){console.error("Invalid view state, cannot determine date range:",a);return}console.log(`Fetching appointments from ${bt.toISOString()} to ${mt.toISOString()}`);const Jt=await Vt.appointments.getByDateRange(bt.toISOString(),mt.toISOString());T(Array.isArray(Jt)?Jt:[])}catch(bt){console.error("Error fetching appointments:",bt),T([])}},_e=async()=>{try{const bt=await Vt.patients.getAll();L(bt||[])}catch(bt){console.error("Error fetching patients:",bt),L([])}},Te=async()=>{try{const bt=await Vt.staff.getDoctors();P(bt||[])}catch(bt){console.error("Error fetching all doctors:",bt),P([])}},qe=async(bt,mt,Jt)=>{if(!bt||!mt||isNaN(Jt)||Jt<=0){j([]);return}Z(!0);try{const xe=`${Ut(bt,"yyyy-MM-dd")}T${mt}:00`,ye=uL(xe,"yyyy-MM-dd'T'HH:mm:ss",new Date);if(!$p(ye))throw new Error(`Invalid combined date/time string: ${xe}`);const be=new Date(ye.getTime()+Jt*6e4),Ae=cL(ye),Se=cL(be),Ve=await Vt.staff.getAvailableDoctors(Ae,Se);j(Ve||[]),C&&!Ve.some(ut=>ut.id===C.id)&&E(null)}catch(le){console.error("Error fetching available doctors:",le),Q({variant:"destructive",title:"Error Fetching Doctors",description:"Could not fetch available doctors for the selected slot."}),j([])}finally{Z(!1)}};A.useEffect(()=>{ft(),_e(),Te();const bt=jD("appointments",mt=>{console.log("Appointment change detected:",mt),ft()});return()=>{bt.unsubscribe()}},[r,a]),A.useEffect(()=>{const bt=e.get("date"),mt=e.get("patientId"),Jt=e.get("treatmentId"),le=e.get("description");let xe=null;if(bt){const ye=zr(bt);$p(ye)?(xe=ye,n(xe)):(console.warn("Invalid date received from query params:",bt),Q({title:"Invalid Date",description:"The date from the treatment plan was invalid.",variant:"destructive"}))}mt&&xe?(async()=>{try{const be=await Vt.patients.getById(mt);be?(S(be),ke(Ae=>({...Ae,type:"Scheduled Visit",reason_for_visit:le||"",treatment_id:Jt||null})),U(xe),g("appointment-details"),u(!0),X(Jt),t({},{replace:!0})):(Q({title:"Patient Not Found",description:"Could not find the patient specified by the treatment plan.",variant:"destructive"}),X(null))}catch(be){console.error("Error fetching patient from redirect:",be),Q({title:"Error",description:"Could not fetch patient details from the treatment plan.",variant:"destructive"}),X(null)}})():(bt||mt||Jt||le)&&(console.log("Partial booking parameters received, not auto-opening modal.",{dateStr:bt,patientId:mt,treatmentId:Jt}),X(null))},[e]),A.useEffect(()=>{if(l&&x==="appointment-details"){const bt=parseInt(re.duration);let mt=null,Jt="";if(o)mt=o.date,Jt=o.time;else if(Y&&G){mt=Y;const le=G.split(":");if(le.length===2){let xe=parseInt(le[0],10),ye=parseInt(le[1],10);if(!isNaN(xe)&&!isNaN(ye)&&xe>=1&&xe<=12&&ye>=0&&ye<=59)D==="PM"&&xe<12?xe+=12:D==="AM"&&xe===12&&(xe=0),Jt=`${String(xe).padStart(2,"0")}:${String(ye).padStart(2,"0")}`;else{j([]);return}}else{j([]);return}}mt&&Jt&&!isNaN(bt)&&bt>0?qe(mt,Jt,bt):j([])}},[l,x,o,Y,G,D,re.duration]),A.useEffect(()=>{d?(async()=>{if(h&&h.treatment_id){Pt(!0),ge(null),Qe(null);try{const mt=await Vt.patients.getTreatmentVisitById(h.treatment_id);if(mt)if(ge(mt),mt.treatment_plan_id){const Jt=await Vt.patients.getTreatmentPlanDetails(mt.treatment_plan_id);Jt&&Jt.data?Qe(Jt.data.title||"Unnamed Plan"):(console.warn("Could not fetch plan details for plan ID:",mt.treatment_plan_id),Qe("Plan details unavailable"))}else Qe("Plan ID missing in visit");else console.warn("Could not fetch treatment visit for ID:",h.treatment_id)}catch(mt){console.error("Error fetching treatment details for appointment:",mt),Q({title:"Error",description:"Could not load related treatment details for this appointment.",variant:"destructive"})}finally{Pt(!1)}}else ge(null),Qe(null),Pt(!1)})():(ge(null),Qe(null),Pt(!1))},[h,d]);const yt=async bt=>{if(_(bt),bt.length>2)try{const mt=await Vt.patients.search(bt);L(mt||[])}catch(mt){console.error("Error searching patients:",mt),L([])}else bt.length===0&&_e()},vt=async bt=>{console.log("handleBookAppointment called. selectedDoctor:",C),de(!0);try{if(!b||!C){console.error("Booking validation failed: Missing patient or doctor",{selectedPatient:b,selectedDoctor:C}),Q({variant:"destructive",title:"Missing Information",description:"Please select a patient and a doctor."}),de(!1);return}let mt;const Jt=Dl(new Date);if(o){mt=new Date(o.date);const[Se,Ve]=o.time.split(":").map(Number);mt.setHours(Se,Ve,0,0)}else{if(!Y||!G){Q({variant:"destructive",title:"Missing Information",description:"Please select a date and time (hh:mm)."}),de(!1);return}const Se=G.split(":");if(Se.length===2){let Ve=parseInt(Se[0],10),ut=parseInt(Se[1],10);if(!isNaN(Ve)&&!isNaN(ut)&&Ve>=1&&Ve<=12&&ut>=0&&ut<=59){if(D==="PM"&&Ve<12?Ve+=12:D==="AM"&&Ve===12&&(Ve=0),mt=new Date(Y),mt.setHours(Ve,ut,0,0),!$p(mt)){Q({variant:"destructive",title:"Invalid Date/Time",description:"The constructed date/time is invalid."}),de(!1);return}}else{Q({variant:"destructive",title:"Invalid Time",description:"Please enter a valid time in hh:mm format (01-12 for hours, 00-59 for minutes)."}),de(!1);return}}else{Q({variant:"destructive",title:"Invalid Time Format",description:"Please use hh:mm format for time."}),de(!1);return}}const le=new Date;if(th(Dl(mt),Jt)){Q({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past dates."}),de(!1);return}if(Tp(mt)&&th(mt,le)){Q({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past times on the current day."}),de(!1);return}const xe=parseInt(bt.duration);if(isNaN(xe)||xe<=0){Q({variant:"destructive",title:"Invalid Duration",description:"Invalid appointment duration selected."}),de(!1);return}const ye=new Date(mt.getTime()+xe*6e4),be={patient_id:b.id,staff_id:C.id,title:bt.treatment_id?"Scheduled Visit":bt.type,start_time:mt.toISOString(),end_time:ye.toISOString(),type:bt.treatment_id?"Scheduled Visit":bt.type,reason_for_visit:bt.reason_for_visit,notes:bt.notes,status:"scheduled",treatment_id:bt.treatment_id||ie||null},Ae=await Vt.appointments.create(be);if(Ae!=null&&Ae.id&&Ae.start_time&&Ae.patient_id){const Se=Ae.id,Ve=Ae.patient_id,ut=zr(Ae.start_time);try{await Vt.communications.schedule({patientId:Ve,appointmentId:Se,type:"appointment_reminder",channel:"app",scheduledFor:new Date().toISOString(),customMessage:`Your appointment for ${bt.type==="Scheduled Visit"?bt.reason_for_visit:bt.type} with Dr. ${C==null?void 0:C.first_name} ${C==null?void 0:C.last_name} on ${Ut(ut,"PPP 'at' p")} is confirmed.`})}catch(Je){console.error("Error scheduling immediate app confirmation:",Je)}if(b!=null&&b.phone){const Je=dx(ut,24);if(th(new Date,Je))try{await Vt.communications.schedule({patientId:Ve,appointmentId:Se,type:"appointment_reminder",channel:"sms",scheduledFor:Je.toISOString(),customMessage:`Reminder: Your appointment for ${bt.type==="Scheduled Visit"?bt.reason_for_visit:bt.type} with Dr. ${C==null?void 0:C.first_name} ${C==null?void 0:C.last_name} is tomorrow at ${Ut(ut,"p")}. Call us if you need to reschedule.`})}catch(Dt){console.error("Error scheduling SMS reminder:",Dt)}}const et={...Ae,patients:b?{id:b.id,first_name:b.first_name,last_name:b.last_name,email:b.email,phone:b.phone}:null,staff:C?{id:C.id,first_name:C.first_name,last_name:C.last_name,role:C.role,specialization:C.specialization}:null},it=!!ie;u(!1),m(et),it||f(!0),Q({title:"Appointment Booked Successfully!",description:`Appointment for ${b==null?void 0:b.first_name} with Dr. ${C==null?void 0:C.first_name} has been scheduled.`}),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),s(null),U(null),J(""),K("AM"),g("patient-select"),X(null),await ft()}else console.error("Failed to create appointment or missing critical data from response.",Ae),Q({variant:"destructive",title:"Booking Failed",description:"Could not create the appointment. Please try again."})}catch(mt){console.error("Error booking appointment:",mt),Q({variant:"destructive",title:"Booking Error",description:`An unexpected error occurred: ${mt instanceof Error?mt.message:"Unknown error"}. Please try again.`})}finally{de(!1)}},ht=(bt,mt)=>{bt.stopPropagation(),m({...mt,notes:mt.notes||"",type:mt.type||"checkup"}),f(!0)},Ie=async()=>{if(!h||!h.id)return;const bt=h.id;try{await Vt.appointments.cancel(bt);try{await Vt.communications.cancelByAppointment(bt),console.log(`Cancellation request sent for communications related to appointment ${bt}`)}catch(mt){console.error(`Failed to cancel communications for appointment ${bt}:`,mt),Q({variant:"destructive",title:"Communication Cancellation Failed",description:"Could not cancel scheduled reminders. Please check manually."})}f(!1),await ft(),Q({title:"Appointment Cancelled",description:"The appointment and any scheduled reminders have been cancelled."})}catch(mt){console.error("Error cancelling appointment:",mt),Q({variant:"destructive",title:"Cancellation Failed",description:`Could not cancel appointment: ${mt instanceof Error?mt.message:"Unknown error"}`})}},Ze=async bt=>{try{if(!h||!h.id)return;const mt={title:bt.type,type:bt.type,notes:bt.notes};await Vt.appointments.update(h.id,mt),f(!1),await ft()}catch(mt){console.error("Error updating appointment:",mt),alert(`Failed to update appointment: ${mt instanceof Error?mt.message:"Unknown error"}`)}},_t=(bt,mt)=>{const Jt=new Date(bt),[le,xe]=mt.split(":").map(Number);Jt.setHours(le,xe,0,0);const ye=new Date(Jt);return ye.setHours(le+1,xe,0,0),Array.isArray(O)?O.filter(Ae=>{if(!Ae||!Ae.start_time||!Ae.end_time)return!1;try{const Se=zr(Ae.start_time),Ve=zr(Ae.end_time);return!$p(Se)||!$p(Ve)?(console.warn("Invalid date found in appointment, skipping:",Ae),!1):Se<ye&&Ve>Jt}catch(Se){return console.error("Error parsing appointment dates:",Ae,Se),!1}}):[]},pt=bt=>{const mt=Dl(bt),Jt=Qv(bt);return Array.isArray(O)?O.filter(le=>{if(!le||!le.start_time)return!1;try{const xe=zr(le.start_time);return $p(xe)?xe>=mt&&xe<=Jt:(console.warn("Invalid start date found in appointment, skipping:",le),!1)}catch(xe){return console.error("Error parsing appointment start date:",le,xe),!1}}):[]},Pr=async bt=>{if(!bt){console.error("PatientForm onSuccess called without a patient ID."),g("patient-select");return}try{const mt=await Vt.patients.getById(bt);if(!mt)throw new Error("Failed to fetch newly created patient details.");S(mt),g("appointment-details")}catch(mt){console.error("Error after creating patient:",mt),alert(`Patient created, but failed to fetch details: ${mt instanceof Error?mt.message:"Unknown error"}. Please select the patient manually.`),g("patient-select")}},Bt=()=>{g("patient-select")},dr=()=>n(o1e(r)),Ir=()=>n(x1(r,1)),Tr=()=>n(Fa(r,-1)),ha=()=>n(Fa(r,1)),Xr=()=>n(d6(r,1)),Na=()=>n(pl(r,1)),En=()=>{const bt=uL(te,"dd/MM/yyyy",new Date);$p(bt)?(n(bt),q("")):Q({variant:"destructive",title:"Invalid Date Format",description:"Please enter date as DD/MM/YYYY."})},pa=(bt,mt)=>{const Jt=new Date,le=Dl(Jt),xe=Dl(bt);if(th(xe,le)){Q({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past dates."});return}if(Tp(bt)){const[be,Ae]=mt.split(":").map(Number),Se=new Date(bt);if(Se.setHours(be,Ae,0,0),th(Se,Jt)){Q({variant:"destructive",title:"Booking Restricted",description:"Cannot book appointments for past times on the current day."});return}}s({date:bt,time:mt}),g("patient-select"),S(null),E(null),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),u(!0);const ye=parseInt(re.duration);qe(bt,mt,ye)},si=()=>w("div",{className:"space-y-4",children:[w("div",{className:"flex gap-2",children:[c(ct,{placeholder:"Search patients by name, email, or phone...",value:y,onChange:bt=>yt(bt.target.value)}),w(Fe,{onClick:()=>{g("new-patient"),E(null)},children:[c(Qc,{className:"h-4 w-4 mr-2"}),"New Patient"]})]}),c("div",{className:"h-[300px] overflow-y-auto space-y-2",children:Array.isArray(M)&&M.map(bt=>c(Fe,{variant:"outline",className:"w-full justify-start",onClick:()=>{S(bt),g("appointment-details")},children:w("div",{className:"flex items-center",children:[c(mi,{className:"h-4 w-4 mr-2"}),w("div",{className:"text-left",children:[c("p",{className:"font-medium",children:`${bt.first_name} ${bt.last_name}`}),c("p",{className:"text-sm text-muted-foreground",children:bt.phone||"No phone"})]})]})},bt.id))})]}),Cn=()=>{const bt=!!re.treatment_id;return w("div",{className:"space-y-4",children:[(!o||Y)&&w("div",{className:"grid grid-cols-2 gap-4",children:[w("div",{className:"space-y-2",children:[c(er,{htmlFor:"manual-date",children:"Date"}),c(ct,{id:"manual-date",type:"date",value:Y?Ut(Y,"yyyy-MM-dd"):"",onChange:mt=>U(mt.target.value?zr(mt.target.value):null),disabled:!!o&&!bt})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"manual-time-input",children:"Time"}),w("div",{className:`flex items-stretch border rounded-md overflow-hidden transition-all focus-within:ring-1 focus-within:ring-ring ${G?"border-input":"border-red-500"}`,children:[c(ct,{id:"manual-time-input",type:"text",value:G,onChange:mt=>{let Jt=mt.target.value.replace(/[^0-9]/g,"");G.length>Jt.length&&G.endsWith(":")&&(Jt=Jt.slice(0,-1)),Jt.length>2&&!Jt.includes(":")&&(Jt=Jt.slice(0,2)+":"+Jt.slice(2)),J(Jt.slice(0,5))},placeholder:"hh:mm",className:"border-none focus:ring-0 outline-none flex-grow p-2 min-w-[70px] text-sm",required:!0}),w(Wr,{value:D,onValueChange:mt=>K(mt),children:[c(Br,{className:"border-l border-input focus:ring-0 outline-none h-full bg-transparent px-3 text-sm rounded-l-none","aria-label":"Select AM or PM",children:c(Vr,{})}),w(Ur,{children:[c(wt,{value:"AM",children:"AM"}),c(wt,{value:"PM",children:"PM"})]})]})]}),c("p",{className:"text-xs text-muted-foreground pt-1",children:"Time required for the appointment."})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Select Doctor"}),w(Wr,{value:(C==null?void 0:C.id)||"",onValueChange:mt=>{const Jt=R.find(le=>le.id===mt);E(Jt||null)},disabled:V,children:[c(Br,{children:c(Vr,{placeholder:V?"Loading doctors...":"Choose an available doctor"})}),w(Ur,{children:[!V&&R.length===0&&c(wt,{value:"no-doctors",disabled:!0,children:"No doctors available for this slot"}),R.map(mt=>w(wt,{value:mt.id,children:["Dr. ",mt.first_name," ",mt.last_name," ",mt.specialization&&`(${mt.specialization})`]},mt.id))]})]})]}),b&&w("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[c(mi,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[c("p",{className:"font-medium",children:`${b.first_name} ${b.last_name}`}),c("p",{className:"text-sm text-muted-foreground",children:b.phone||"No phone"})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Appointment Type"}),w(Wr,{value:bt?"Scheduled Visit":re.type||"",onValueChange:mt=>{bt||ke({...re,type:mt})},disabled:bt,children:[c(Br,{children:c(Vr,{placeholder:"Select type"})}),c(Ur,{children:bt?c(wt,{value:"Scheduled Visit",children:"Scheduled Visit"}):w(_r,{children:[c(wt,{value:"checkup",children:"Checkup"}),c(wt,{value:"cleaning",children:"Cleaning"}),c(wt,{value:"filling",children:"Filling"}),c(wt,{value:"root-canal",children:"Root Canal"}),re.type&&!["checkup","cleaning","filling","root-canal","Scheduled Visit"].includes(re.type)&&c(wt,{value:re.type,children:re.type})]})})]})]}),re.reason_for_visit&&w("div",{className:"space-y-2",children:[c(er,{children:"Reason for Visit"}),c("p",{className:"text-sm p-3 bg-muted rounded-md whitespace-pre-wrap border",children:re.reason_for_visit})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Duration"}),w(Wr,{value:re.duration,onValueChange:mt=>{ke({...re,duration:mt});const Jt=parseInt(mt);let le=null,xe="";o&&!bt?(le=o.date,xe=o.time):Y&&G&&(le=Y,xe=G),le&&xe&&!isNaN(Jt)&&qe(le,xe,Jt)},children:[c(Br,{children:c(Vr,{placeholder:"Select duration"})}),w(Ur,{children:[c(wt,{value:"30",children:"30 minutes"}),c(wt,{value:"60",children:"1 hour"}),c(wt,{value:"90",children:"1.5 hours"}),c(wt,{value:"120",children:"2 hours"})]})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Notes"}),c(Qr,{value:re.notes,onChange:mt=>ke({...re,notes:mt.target.value}),placeholder:"Add any notes about the appointment..."})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>g("patient-select"),disabled:ue,children:"Back"}),c(Fe,{onClick:()=>vt(re),disabled:ue,children:ue?w(_r,{children:[c(Bn,{className:"mr-2 h-4 w-4 animate-spin"})," Booking..."]}):"Book Appointment"})]})]})},kr=()=>a==="day"?Jn():a==="week"?fo():a==="month"?li():null,pn=bt=>bt==="cancelled"?fe:se,fo=()=>{const bt=ss(r,{weekStartsOn:1}),mt=D0(r,{weekStartsOn:1}),Jt=F2({start:bt,end:mt}),le=new Date;return w(Yb,{delayDuration:100,children:[" ",w(sr,{children:[w("div",{className:"grid grid-cols-8 border-b",children:[c("div",{className:"p-4 font-medium text-muted-foreground",children:"Time"}),Jt.map(xe=>w("div",{className:`p-4 text-center border-l ${Tp(xe)?"bg-blue-50":""}`,children:[c("div",{className:"font-medium",children:Ut(xe,"EEE")}),c("div",{className:"text-sm text-muted-foreground",children:Ut(xe,"d")})]},xe.toISOString()))]}),c("div",{children:Re.map(xe=>w("div",{className:"grid grid-cols-8 border-b last:border-0",children:[c("div",{className:"p-4 text-sm text-right text-muted-foreground",children:xe}),Jt.map(ye=>{const be=_t(ye,xe);let Ae=!1;if(Tp(ye)){const[Se,Ve]=xe.split(":").map(Number),ut=new Date(ye);ut.setHours(Se,Ve,0,0),th(ut,le)&&(Ae=!0)}return c("div",{onClick:()=>pa(ye,xe),className:`border-l p-1 relative transition-colors overflow-hidden ${Ae?"bg-muted/30 cursor-not-allowed opacity-70":"hover:bg-muted/50 cursor-pointer"}`,style:{height:`${ae}px`},children:w("div",{className:"flex flex-wrap gap-2 h-full items-start content-start p-1.5",children:[" ",be.map(Se=>{var Ve,ut,et,it;return w(Xb,{children:[c(Zb,{asChild:!0,children:c("div",{className:`w-7 h-7 rounded-md flex items-center justify-center cursor-pointer ring-2 transition-all ${pn(Se.status)} ${Se.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:Je=>ht(Je,Se),children:Se.status==="cancelled"?c(HA,{className:"h-4 w-4 text-canceled-icon"}):c(VA,{className:"h-4 w-4 text-booked-icon"})})}),w(q2,{side:"top",align:"center",className:"bg-background border shadow-lg rounded-lg p-3 text-sm w-60",children:[w("div",{className:"flex items-center mb-2",children:[c(mi,{className:"h-5 w-5 mr-2 text-muted-foreground flex-shrink-0"})," ",w("span",{className:"font-semibold",children:[(Ve=Se.patients)==null?void 0:Ve.first_name," ",(ut=Se.patients)==null?void 0:ut.last_name]})]}),w("p",{className:"text-muted-foreground text-xs mb-1",children:["Dr. ",(et=Se.staff)==null?void 0:et.first_name," ",(it=Se.staff)==null?void 0:it.last_name]}),w("p",{className:"text-muted-foreground text-xs mb-1",children:[c(ls,{className:"inline h-3 w-3 mr-1"}),Se.start_time?Ut(zr(Se.start_time),"h:mm a"):"No time"," - ",Se.end_time?Ut(zr(Se.end_time),"h:mm a"):""]}),w("p",{className:"text-muted-foreground text-xs",children:[c(KA,{className:"inline h-3 w-3 mr-1"}),Se.type]}),Se.status==="cancelled"&&c("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},Se.id)})]})},ye.toISOString())})]},xe))})]})]})},Jn=()=>{const bt=new Date;return w(Yb,{delayDuration:100,children:[" ",w(sr,{children:[w("div",{className:"grid grid-cols-2 border-b",children:[c("div",{className:"p-4 font-medium text-muted-foreground",children:"Time"}),w("div",{className:`p-4 text-center border-l ${Tp(r)?"bg-blue-50":""}`,children:[c("div",{className:"font-medium",children:Ut(r,"EEEE")}),c("div",{className:"text-sm text-muted-foreground",children:Ut(r,"MMMM d, yyyy")})]})]}),c("div",{children:Re.map(mt=>{const Jt=_t(r,mt);let le=!1;if(Tp(r)){const[xe,ye]=mt.split(":").map(Number),be=new Date(r);be.setHours(xe,ye,0,0),th(be,bt)&&(le=!0)}return w("div",{className:"grid grid-cols-2 border-b last:border-0",children:[c("div",{className:"p-4 text-sm text-right text-muted-foreground",children:mt}),c("div",{onClick:()=>pa(r,mt),className:`border-l relative transition-colors overflow-hidden ${le?"bg-muted/30 cursor-not-allowed opacity-70":"hover:bg-muted/50 cursor-pointer"}`,style:{height:`${ae}px`},children:w("div",{className:"flex flex-wrap gap-2 h-full items-start content-start p-1.5",children:[" ",Jt.map(xe=>{var ye,be,Ae,Se;return w(Xb,{children:[c(Zb,{asChild:!0,children:c("div",{className:`w-7 h-7 rounded-md flex items-center justify-center cursor-pointer ring-2 transition-all ${pn(xe.status)} ${xe.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:Ve=>ht(Ve,xe),children:xe.status==="cancelled"?c(HA,{className:"h-4 w-4 text-canceled-icon"}):c(VA,{className:"h-4 w-4 text-booked-icon"})})}),w(q2,{side:"top",align:"center",className:"bg-background border shadow-lg rounded-lg p-3 text-sm w-60",children:[w("div",{className:"flex items-center mb-2",children:[c(mi,{className:"h-5 w-5 mr-2 text-muted-foreground flex-shrink-0"})," ",w("span",{className:"font-semibold",children:[(ye=xe.patients)==null?void 0:ye.first_name," ",(be=xe.patients)==null?void 0:be.last_name]})]}),w("p",{className:"text-muted-foreground text-xs mb-1",children:["Dr. ",(Ae=xe.staff)==null?void 0:Ae.first_name," ",(Se=xe.staff)==null?void 0:Se.last_name]}),w("p",{className:"text-muted-foreground text-xs mb-1",children:[c(ls,{className:"inline h-3 w-3 mr-1"}),xe.start_time?Ut(zr(xe.start_time),"h:mm a"):"No time"," - ",xe.end_time?Ut(zr(xe.end_time),"h:mm a"):""]}),w("p",{className:"text-muted-foreground text-xs",children:[c(KA,{className:"inline h-3 w-3 mr-1"}),xe.type]}),xe.status==="cancelled"&&c("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},xe.id)})]})})]},mt)})})]})]})},li=()=>{const bt=Uo(r),mt=dm(r),Jt=ss(bt,{weekStartsOn:1}),le=D0(mt,{weekStartsOn:1}),xe=F2({start:Jt,end:le}),ye=[];let be=[];return xe.forEach(Ae=>{be.push(Ae),be.length===7&&(ye.push(be),be=[])}),be.length>0&&ye.push(be),w(sr,{children:[w(Yb,{delayDuration:300,children:[" ",c("div",{className:"grid grid-cols-7 border-b",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(Ae=>c("div",{className:"p-2 text-center font-medium",children:Ae},Ae))}),c("div",{children:ye.map((Ae,Se)=>c("div",{className:"grid grid-cols-7",children:Ae.map(Ve=>{const ut=pt(Ve),et=N4(Ve,r),it=ut.filter(Je=>Je.status!=="cancelled");return w("div",{onClick:()=>{n(Ve),i("day")},className:`border p-2 min-h-[120px] relative ${et?Tp(Ve)?"bg-blue-50":"":"bg-gray-100 text-gray-400"} hover:bg-muted/50 cursor-pointer transition-colors`,children:[c("div",{className:`text-right font-medium ${Tp(Ve)?"text-blue-600":""}`,children:Ut(Ve,"d")}),w("div",{className:"mt-1 flex flex-wrap gap-1 overflow-hidden max-h-[80px]",children:[ut.slice(0,3).map(Je=>{var Dt,Yt,or,qt;return w(Xb,{children:[c(Zb,{asChild:!0,children:c("div",{className:`w-5 h-5 rounded flex items-center justify-center cursor-pointer ring-1 transition-all ${pn(Je.status)} ${Je.status==="cancelled"?"ring-canceled-ring animate-shake":"ring-booked-ring animate-pulse hover:ring-offset-1"}`,onClick:jt=>{jt.stopPropagation(),ht(jt,Je)},children:Je.status==="cancelled"?c(HA,{className:"h-3 w-3 text-canceled-icon"}):c(VA,{className:"h-3 w-3 text-booked-icon"})})}),w(q2,{side:"top",align:"start",className:"bg-gradient-to-b from-white to-gray-50 border border-gray-200 shadow-xl rounded-lg p-4 text-sm w-64",children:[w("div",{className:"flex items-center mb-2",children:[c(mi,{className:"h-5 w-5 mr-2 text-muted-foreground"})," ",w("span",{className:"font-bold text-gray-800",children:[(Dt=Je.patients)==null?void 0:Dt.first_name," ",(Yt=Je.patients)==null?void 0:Yt.last_name]})," "]}),w("p",{className:"text-gray-600 text-xs mb-1 font-medium",children:["Dr. ",(or=Je.staff)==null?void 0:or.first_name," ",(qt=Je.staff)==null?void 0:qt.last_name]})," ",w("p",{className:"text-muted-foreground text-xs mb-1",children:[c(ls,{className:"inline h-3 w-3 mr-1"}),Je.start_time?Ut(zr(Je.start_time),"h:mm a"):"No time"," - ",Je.end_time?Ut(zr(Je.end_time),"h:mm a"):""]}),w("p",{className:"text-muted-foreground text-xs",children:[c(KA,{className:"inline h-3 w-3 mr-1"}),Je.type]}),Je.status==="cancelled"&&c("p",{className:"text-red-600 text-xs font-semibold mt-1",children:"(Cancelled)"})]})]},Je.id)}),ut.length>3&&w("div",{className:"text-xs text-muted-foreground text-center",children:["+",it.length-3," more"]})]})]},Ve.toISOString())})},Se))})]})," "]})};return w("div",{className:"space-y-6",children:[c(Aa,{heading:"Appointments",text:"Manage and schedule patient appointments",children:w("div",{className:"flex items-center gap-4",children:[c(Tg,{value:a,onValueChange:bt=>i(bt),className:"w-fit",children:w(Og,{children:[c(dl,{value:"month",children:"Month"}),c(dl,{value:"week",children:"Week"}),c(dl,{value:"day",children:"Day"})]})}),(()=>{let bt="",mt,Jt;if(a==="day")bt=Ut(r,"MMMM d, yyyy"),mt=Tr,Jt=ha;else if(a==="week"){const le=ss(r,{weekStartsOn:1}),xe=D0(r,{weekStartsOn:1});bt=`${Ut(le,"MMM d")} - ${Ut(xe,"MMM d, yyyy")}`,mt=dr,Jt=Ir}else a==="month"&&(bt=Ut(r,"MMMM yyyy"),mt=Xr,Jt=Na);return w("div",{className:"flex items-center gap-2",children:[c(Fe,{variant:"outline",size:"icon",onClick:mt,children:c(i4,{className:"h-4 w-4"})}),c("span",{className:"text-sm font-medium",children:bt}),c(Fe,{variant:"outline",size:"icon",onClick:Jt,children:c(im,{className:"h-4 w-4"})})]})})(),w("div",{className:"flex gap-2 ml-auto",children:[c(ct,{className:"w-32",placeholder:"DD/MM/YYYY",value:te,onChange:bt=>q(bt.target.value)}),c(Fe,{variant:"outline",onClick:En,children:"Go to Date"})]}),w(Fe,{onClick:()=>{s(null),g("patient-select"),u(!0),j([]),E(null)},children:[c(Qc,{className:"h-4 w-4 mr-2"})," New Appointment"]})]})}),kr(),c(ja,{open:l,onOpenChange:bt=>{u(bt),bt||(s(null),U(null),J(""),K("AM"),S(null),E(null),j([]),_(""),g("patient-select"),ke({type:"checkup",duration:"30",notes:"",reason_for_visit:"",treatment_id:null}),X(null))},children:w(Pa,{className:"overflow-y-auto",children:[w(Ta,{children:[c(Oa,{children:x==="patient-select"?"Select Patient":x==="new-patient"?"New Patient Registration":ie?"Book Treatment Visit":"Appointment Details"}),o&&x!=="new-patient"&&!ie&&w(Yi,{children:[Ut(o.date,"MMMM d, yyyy")," at ",o.time]}),Y&&x!=="new-patient"&&ie&&w(Yi,{children:["For Treatment Visit: ",Ut(Y,"MMMM d, yyyy"),G&&` at ${G} ${D}`]}),x==="new-patient"&&c(Yi,{children:"Enter the new patient's details below."})]}),w("div",{className:"max-h-[75vh] overflow-y-auto p-4",children:[x==="patient-select"&&si(),x==="new-patient"&&c(pR,{mode:"simplified",onSuccess:Pr,onCancel:Bt}),x==="appointment-details"&&Cn()]})]})}),c(ja,{open:d,onOpenChange:f,children:w(Pa,{children:[w(Ta,{children:[c(Oa,{children:"Appointment Details"}),h&&h.start_time&&w(Yi,{children:[Ut(zr(h.start_time),"MMMM d, yyyy")," at"," ",Ut(zr(h.start_time),"h:mm a")]})]}),h&&w("div",{className:"space-y-4",children:[w("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[c(mi,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[w("p",{className:"font-medium",children:[(xt=h.patients)==null?void 0:xt.first_name," ",(Fr=h.patients)==null?void 0:Fr.last_name]}),w("div",{className:"flex items-center text-sm text-muted-foreground",children:[c(d5,{className:"h-3.5 w-3.5 mr-1"}),((ma=h.patients)==null?void 0:ma.phone)||"No phone number"]})]})]}),h.staff&&w("div",{className:"flex items-center space-x-4 p-4 bg-muted rounded-lg",children:[c(lce,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[w("p",{className:"font-medium",children:["Dr. ",h.staff.first_name," ",h.staff.last_name]}),h.staff.specialization&&c("p",{className:"text-sm text-muted-foreground",children:h.staff.specialization})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Status"}),c("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:h.status})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Type"}),w(Wr,{value:h.treatment_id?"Scheduled Visit":h.type||"",onValueChange:bt=>{!h.treatment_id&&(h.status==="scheduled"||h.status==="confirmed")&&m({...h,type:bt})},disabled:h.status!=="scheduled"&&h.status!=="confirmed"||!!h.treatment_id,children:[c(Br,{children:c(Vr,{placeholder:"Select type"})}),c(Ur,{children:h.treatment_id?c(wt,{value:"Scheduled Visit",children:"Scheduled Visit"}):w(_r,{children:[c(wt,{value:"checkup",children:"Checkup"}),c(wt,{value:"cleaning",children:"Cleaning"}),c(wt,{value:"filling",children:"Filling"}),c(wt,{value:"root-canal",children:"Root Canal"}),h.type&&!["checkup","cleaning","filling","root-canal","Scheduled Visit"].includes(h.type)&&c(wt,{value:h.type,children:h.type})]})})]})]}),h.reason_for_visit&&w("div",{className:"space-y-2",children:[c(er,{children:"Reason for Visit"}),c("p",{className:"text-sm p-3 bg-muted rounded-md whitespace-pre-wrap border",children:h.reason_for_visit})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Notes"}),c(Qr,{value:h.notes||"",onChange:bt=>m({...h,notes:bt.target.value}),placeholder:"Add any notes about the appointment...",disabled:h.status!=="scheduled"&&h.status!=="confirmed"})]}),w(Qi,{children:[(h.status==="scheduled"||h.status==="confirmed")&&w(_r,{children:[c(Fe,{variant:"destructive",onClick:Ie,children:"Cancel Appointment"}),c(Fe,{onClick:()=>Ze({type:h.type,notes:h.notes||""}),children:"Update Appointment"})]}),h.status!=="scheduled"&&h.status!=="confirmed"&&c(Fe,{variant:"outline",onClick:()=>f(!1),children:"Close"})]}),st&&w("div",{className:"p-4 text-center",children:[c(Bn,{className:"h-6 w-6 animate-spin mx-auto text-muted-foreground"}),c("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading treatment details..."})]}),!st&&Pe&&w("div",{className:"border-t pt-4 mt-4",children:[c("h4",{className:"text-md font-semibold mb-2 text-primary",children:"Related Treatment Information"}),Ye&&c("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:w("p",{className:"text-sm font-medium text-blue-700",children:["Part of Treatment Plan: ",c("span",{className:"font-bold",children:Ye})]})}),w("div",{className:"space-y-2 text-sm p-3 bg-slate-50 rounded-md",children:[w("div",{className:"flex justify-between",children:[c("span",{className:"text-muted-foreground",children:"Visit Number:"}),c("span",{className:"font-medium",children:Pe.visit_number||"N/A"})]}),w("div",{className:"flex justify-between",children:[c("span",{className:"text-muted-foreground",children:"Procedures:"}),c("span",{className:"font-medium text-right break-words max-w-[70%]",children:Pe.procedures||"N/A"})]}),Pe.estimated_duration&&w("div",{className:"flex justify-between",children:[c("span",{className:"text-muted-foreground",children:"Est. Duration:"}),c("span",{className:"font-medium",children:Pe.estimated_duration})]}),Pe.scheduled_date&&w("div",{className:"flex justify-between",children:[c("span",{className:"text-muted-foreground",children:"Originally Scheduled:"}),c("span",{className:"font-medium",children:Ut(zr(Pe.scheduled_date),"MMM d, yyyy")})]})]})]})]})]})})]})}var mR="Progress",gR=100,[pIe,UJe]=eo(mR),[mIe,gIe]=pIe(mR),hre=A.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=vIe,...o}=e;(a||a===0)&&!Tz(a)&&console.error(yIe(`${a}`,"Progress"));const s=Tz(a)?a:gR;n!==null&&!Oz(n,s)&&console.error(xIe(`${n}`,"Progress"));const l=Oz(n,s)?n:null,u=DS(l)?i(l,s):void 0;return c(mIe,{scope:r,value:l,max:s,children:c(pr.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":DS(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":gre(l,s),"data-value":l??void 0,"data-max":s,...o,ref:t})})});hre.displayName=mR;var pre="ProgressIndicator",mre=A.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=gIe(pre,r);return c(pr.div,{"data-state":gre(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});mre.displayName=pre;function vIe(e,t){return`${Math.round(e/t*100)}%`}function gre(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function DS(e){return typeof e=="number"}function Tz(e){return DS(e)&&!isNaN(e)&&e>0}function Oz(e,t){return DS(e)&&!isNaN(e)&&e<=t&&e>=0}function yIe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gR}\`.`}function xIe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vre=hre,wIe=mre;const vR=A.forwardRef(({className:e,value:t,...r},n)=>c(vre,{ref:n,className:Rt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:c(wIe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));vR.displayName=vre.displayName;const _Ie=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return e}},Dz=e=>e?e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):"Record",bIe=(e,t)=>typeof e!="object"||e===null?Dz(t):e.subjective!==void 0||e.objective!==void 0||e.assessment!==void 0||e.plan!==void 0?"Consultation Note":e.code!==void 0?"Diagnosis":e.procedure!==void 0?"Treatment":e.medication!==void 0||e.dosage!==void 0||e.frequency!==void 0||e.duration!==void 0?"Prescription":e.test_name!==void 0||e.result_value!==void 0||e.units!==void 0||e.reference_range!==void 0?"Lab Result":e.details!==void 0&&t==="note"?"Other":t==="examination"&&e.description!==void 0&&Object.keys(e).filter(r=>r!=="general_notes"&&r!=="description").length===0?"Examination":t==="procedure"&&e.details!==void 0&&Object.keys(e).filter(r=>r!=="general_notes"&&r!=="details").length===0?"Treatment":Dz(t),SIe=({record:e})=>{let t=null,r=!1;if(typeof e.description=="string"&&e.description.trim().startsWith("{")&&e.description.trim().endsWith("}"))try{t=JSON.parse(e.description),r=!0}catch(s){console.warn(`Failed to parse description JSON for record ${e.id}, treating as raw string:`,s),r=!1}else if(typeof e.description=="string")r=!1;else return console.warn(`Record description is not a string for record ${e.id}`),c("p",{className:"text-sm text-muted-foreground",children:"Could not display details."});if(!r)return e.description&&e.description.trim()!==""?c("p",{className:"text-sm whitespace-pre-wrap",children:e.description}):c("p",{className:"text-sm text-muted-foreground",children:"No details provided."});if(t===null||typeof t!="object"||Object.keys(t).length===0)return c("p",{className:"text-sm text-muted-foreground",children:"No details provided."});const n=Object.keys(t),a=n.length===1&&n[0]==="general_notes",i=!t.general_notes||String(t.general_notes).trim()==="";if(a&&i)return c("p",{className:"text-sm text-muted-foreground",children:"No details provided."});const o=["subjective","objective","assessment","plan","code","description","procedure","details","medication","dosage","frequency","duration","test_name","result_value","reference_range"].some(s=>t[s]!==void 0&&t[s]!==null&&String(t[s]).trim()!=="");return a&&!i?c("p",{className:"text-sm whitespace-pre-wrap",children:t.general_notes}):!o&&i?c("p",{className:"text-sm text-muted-foreground",children:"No details provided."}):w("div",{className:"text-sm space-y-1 mt-2",children:[t.general_notes&&!i&&w("p",{children:[c("strong",{children:"General Notes:"})," ",t.general_notes]}),t.subjective&&w("p",{children:[c("strong",{children:"Subjective:"})," ",t.subjective]}),t.objective&&w("p",{children:[c("strong",{children:"Objective:"})," ",t.objective]}),t.assessment&&w("p",{children:[c("strong",{children:"Assessment:"})," ",t.assessment]}),t.plan&&w("p",{children:[c("strong",{children:"Plan:"})," ",t.plan]}),t.code&&w("p",{children:[c("strong",{children:"Code:"})," ",t.code]}),t.description&&!t.subjective&&w("p",{children:[c("strong",{children:"Description:"})," ",t.description]}),t.procedure&&w("p",{children:[c("strong",{children:"Procedure:"})," ",t.procedure]}),t.details&&!t.procedure&&w("p",{children:[c("strong",{children:"Details:"})," ",t.details]}),t.medication&&w("p",{children:[c("strong",{children:"Medication:"})," ",t.medication]}),t.dosage&&w("p",{children:[c("strong",{children:"Dosage:"})," ",t.dosage]}),t.frequency&&w("p",{children:[c("strong",{children:"Frequency:"})," ",t.frequency]}),t.duration&&w("p",{children:[c("strong",{children:"Duration:"})," ",t.duration]}),t.test_name&&w("p",{children:[c("strong",{children:"Test:"})," ",t.test_name]}),t.result_value&&w("p",{children:[c("strong",{children:"Result:"})," ",t.result_value," ",t.units||""]}),t.reference_range&&w("p",{children:[c("strong",{children:"Range:"})," ",t.reference_range]}),t.details&&e.record_type==="note"&&w("p",{children:[c("strong",{children:"Details:"})," ",t.details]})]})};function yre({medicalRecords:e=[],onAddMedicalRecord:t}){const[r,n]=A.useState(""),o=e.map(f=>{let h=null;try{typeof f.description=="string"&&(h=JSON.parse(f.description))}catch(m){console.warn(`Failed to parse description for record ${f.id}:`,f.description,m)}return{...f,displayType:bIe(h,f.record_type||"")}}).filter(f=>{var y;const h=((y=f.teeth)==null?void 0:y.map(_=>_.id).join(" "))||"",m=JSON.stringify({...f,description:"",teeth:""}).toLowerCase(),x=typeof f.description=="string"?f.description.toLowerCase():"",g=r.toLowerCase();return m.includes(g)||x.includes(g)||h.includes(g)}).reduce((f,h)=>{const m=h.record_date?new Date(h.record_date).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Unknown Date";return f[m]||(f[m]=[]),f[m].unshift(h),f},{}),s=Object.keys(o).sort((f,h)=>f==="Unknown Date"?1:h==="Unknown Date"?-1:new Date(h).getTime()-new Date(f).getTime()),[l,u]=A.useState(new Set),d=f=>{u(h=>{const m=new Set(h);return m.has(f)?m.delete(f):m.add(f),m})};return w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between",children:[c(xr,{children:"Medical Records History"}),w(Fe,{variant:"outline",size:"sm",onClick:t,children:[c(Ch,{className:"mr-2 h-4 w-4"})," Add Record"]})]}),w(mr,{children:[c("div",{className:"flex justify-between items-center mb-4",children:c(ct,{type:"search",value:r,onChange:f=>n(f.target.value),placeholder:"Search records (type, details, teeth...)"})}),s.length>0?c("div",{className:"space-y-6",children:s.map(f=>{const h=o[f],m=l.has(f);return w("div",{children:[w("div",{className:"flex justify-between items-center mb-2 pb-2 border-b",children:[c("h3",{className:"text-lg font-medium",children:f}),c(Fe,{variant:"ghost",size:"sm",onClick:()=>d(f),children:m?"Hide Details":`View Details (${h.length})`})]}),m&&c("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:h.map(x=>{var g;return w("div",{className:"p-3 border rounded bg-background",children:[" ",c("p",{className:"font-semibold",children:x.displayType}),w("p",{className:"text-sm text-muted-foreground",children:["Time: ",(g=_Ie(x.record_date))==null?void 0:g.split(", ").pop()," "]}),c(SIe,{record:x}),x.staff&&w("p",{className:"text-xs text-muted-foreground mt-1",children:["Recorded by: ",x.staff.first_name," ",x.staff.last_name]}),x.teeth&&x.teeth.length>0&&w("div",{className:"mt-2 pt-2 border-t border-dashed",children:[c("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Associated Teeth:"}),c("div",{className:"flex flex-wrap gap-1",children:x.teeth.map(y=>c(ed,{variant:"secondary",className:"text-xs font-normal",children:y.id},y.id))})]}),x.attachments&&x.attachments.length>0&&w("div",{className:"mt-2 pt-2 border-t border-dashed",children:[c("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Attachments:"}),c("p",{className:"text-sm",children:JSON.stringify(x.attachments)})]})]},x.id)})})]},f)})}):w("p",{className:"text-sm text-muted-foreground",children:["No medical records found",r?" matching your search":"","."]})]})]})}const AIe="/DentalCare-Pro/teethselectdiagram.svg",ji=({icon:e,label:t,value:r})=>r?w("div",{className:"flex items-start py-2",children:[c(e,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),w("div",{children:[c("p",{className:"text-sm font-medium text-muted-foreground",children:t}),typeof r=="string"||typeof r=="number"?c("p",{className:"text-base",children:r}):c("div",{className:"text-base",children:r})]})]}):null,IP=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString()}catch{return e}},NIe=e=>{if(!e||typeof e!="object")return"No significant family history reported.";const t=e==null?void 0:e.conditions,r=e==null?void 0:e.other;let n="",a="";return Array.isArray(t)&&t.length>0&&(n=t.map(i=>i.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase())).join(", ")),r&&typeof r=="string"&&r.trim()!==""&&(a=`Other: ${r.trim()}`),n&&a?`${n}, ${a}`:n||a||"No significant family history reported."},kIe=e=>{if(!e||typeof e!="object")return"No lifestyle habits reported.";const t=[];Object.entries(e).forEach(([n,a])=>{if(a&&typeof a=="string"&&a.trim()!==""){const i=n.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase());t.push(`${i}: ${a.trim()}`)}});const r=t.length>0?t.join("; "):"No lifestyle habits reported.";return console.log("generateLifestyleSummary result:",r,"Input habits:",e),r},EIe=e=>{if(!e||typeof e!="object")return"No specific details reported.";const t=[];return e.has_implants==="yes"&&t.push(`Implants: Yes${e.implants_details?` (${e.implants_details})`:""}`),e.recent_health_changes==="yes"&&t.push(`Recent Health Changes: Yes${e.health_changes_details?` (${e.health_changes_details})`:""}`),e.recent_medical_screenings==="yes"&&t.push(`Screenings: Yes${e.screenings_details?` (${e.screenings_details})`:""}`),e.dental_material_allergies==="yes"&&t.push(`Dental Material Allergies: Yes${e.dental_material_allergies_details?` (${e.dental_material_allergies_details})`:""}`),e.immunizations_up_to_date&&e.immunizations_up_to_date!=="not_sure"&&t.push(`Immunizations Up To Date: ${e.immunizations_up_to_date}`),e.recent_immunizations&&e.recent_immunizations.trim()!==""&&t.push(`Recent Immunizations: ${e.recent_immunizations}`),t.length>0?t.join("; "):"No specific details reported."},CIe=e=>{if(!e||typeof e!="object")return"N/A";const t=[];return e.chief_complaint&&t.push(`Complaint: ${e.chief_complaint}`),(e.has_pain==="yes"||e.has_pain===!0)&&t.push(`Pain: Yes (Scale: ${e.pain_scale||"N/A"}, Desc: ${e.pain_description||"N/A"})`),e.brushing_frequency&&t.push(`Brushing: ${e.brushing_frequency}`),e.flossing_habits&&t.push(`Flossing: ${e.flossing_habits}`),e.past_treatments_details&&t.push(`Past Tx: ${e.past_treatments_details}`),(e.orthodontic_history==="yes"||e.orthodontic_history===!0)&&t.push(`Ortho: Yes (${e.orthodontic_details||"details missing"})`),(e.bite_issues==="yes"||e.bite_issues===!0)&&t.push(`Bite Issues: Yes (${e.bite_symptoms||"details missing"})`),t.length>0?t.join("; "):"No specific dental history reported."},PIe=e=>{if(!Array.isArray(e)||e.length===0)return"None reported.";const t=e.filter(r=>r&&typeof r=="object"&&r.name);return t.length===0?"None reported.":w("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[" ",t.map((r,n)=>w("li",{children:[c("span",{className:"font-medium",children:r.name}),r.dosage&&` (${r.dosage})`,r.frequency&&` - ${r.frequency}`]},n))]})},TIe=e=>{if(!Array.isArray(e)||e.length===0)return"None reported.";const t=e.filter(r=>r&&typeof r=="object"&&r.type);return t.length===0?"None reported.":w("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[" ",t.map((r,n)=>w("li",{children:[c("span",{className:"font-medium",children:r.type}),r.date&&` (Approx. ${r.date})`,r.notes&&w("span",{className:"block text-xs text-muted-foreground pl-2",children:["Notes: ",r.notes]})," "]},n))]})};function OIe({patient:e,appointments:t=[],medicalRecords:r=[],dentalHistoryTeeth:n=[],onEdit:a,onBookAppointment:i,onAddMedicalRecord:o}){const[s,l]=A.useState(null),[u,d]=A.useState(!0);if(A.useEffect(()=>{d(!0),fetch(AIe).then(y=>{if(!y.ok)throw console.error("SVG Fetch Response Status:",y.status,y.statusText),new Error(`Network response was not ok: ${y.status} ${y.statusText}`);return y.text()}).then(y=>{l(y),d(!1)}).catch(y=>{console.error("Error fetching SVG:",y),d(!1)})},[]),console.log("Patient object received in PatientDetailsView:",e),console.log("Appointments received:",t),console.log("Medical Records received:",r),console.log("PatientDetailsView received dentalHistoryTeeth prop:",JSON.stringify(n,null,2)),!e)return null;const f=Array.isArray(e.documents)?e.documents:[],h=f.find(y=>y.type==="profile_photo"),m=f.filter(y=>y.type!=="profile_photo"),x={healthy:"Healthy",decayed:"Decayed",filled:"Filled",missing:"Missing","treatment-planned":"Planned Tx","root-canal":"Root Canal",extraction:"Extraction",crown:"Crown","has-treatment-before":"Prior Tx","recommended-to-be-treated":"Recommend Tx"},g=y=>x[y]||y.replace(/_/g," ");return w("div",{className:"space-y-6",children:[w(sr,{children:[c(yr,{children:c(xr,{children:"Personal Information"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(ji,{icon:mi,label:"Full Name",value:`${e.first_name||""} ${e.last_name||""}`}),c(ji,{icon:mi,label:"Gender",value:e.gender}),c(ji,{icon:mi,label:"Age",value:e.age}),c(ji,{icon:mi,label:"Registration Number",value:e.registration_number})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Contact Information"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(ji,{icon:d5,label:"Phone",value:e.phone}),c(ji,{icon:o4,label:"Email",value:e.email}),c(ji,{icon:bce,label:"Address",value:`${e.address||""}, ${e.city||""}, ${e.state||""} ${e.postal_code||""}`})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Emergency Contact"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(ji,{icon:mi,label:"Name",value:e.emergency_contact_name}),c(ji,{icon:d5,label:"Phone",value:e.emergency_contact_phone}),c(ji,{icon:mi,label:"Relationship",value:e.emergency_contact_relationship})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Medical & Dental Overview"})}),w(mr,{className:"space-y-6",children:[" ",w("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c(ji,{icon:Ace,label:"Height",value:e.height?`${e.height} cm`:"N/A"}),c(ji,{icon:jce,label:"Weight",value:e.weight?`${e.weight} kg`:"N/A"}),c(ji,{icon:gce,label:"Blood Group",value:e.blood_group})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[c(ji,{icon:ace,label:"Allergies",value:Array.isArray(e.allergies)?e.allergies.join(", "):e.allergies||"None reported"}),c(ji,{icon:GA,label:"Medical Conditions",value:Array.isArray(e.medical_conditions)?e.medical_conditions.join(", "):e.medical_conditions||"None reported"})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[c(ji,{icon:GA,label:"Current Medications",value:PIe(e.current_medications)}),c(ji,{icon:GA,label:"Previous Surgeries / Hospitalizations",value:TIe(e.previous_surgeries)})]}),w("div",{className:"space-y-4 pt-4 border-t",children:[c("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"History & Habits"}),c(ji,{icon:WT,label:"Detailed Medical Info",value:EIe(e.detailed_medical_info)}),c(ji,{icon:WT,label:"Dental History Summary",value:CIe(e.dental_history)}),c(ji,{icon:l4,label:"Family Medical History",value:NIe(e.family_medical_history)}),c(ji,{icon:$0,label:"Lifestyle Habits",value:kIe(e.lifestyle_habits)})]}),w("div",{className:"pt-4 border-t",children:[c("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Affected Teeth"}),u?c("p",{className:"text-sm text-muted-foreground",children:"Loading tooth chart..."}):s?Array.isArray(n)&&n.length>0?c("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2",children:n.sort((y,_)=>y.tooth_id-_.tooth_id).map(y=>{let _='<p class="text-xs text-red-500">Not found</p>';try{const C=new DOMParser().parseFromString(s,"image/svg+xml").getElementById(`ID_${y.tooth_id}`);if(C){const E=C.cloneNode(!0);let O="0 0 50 50",T="scale(0.5) translate(-50, -50)";try{const j=document.createElementNS("http://www.w3.org/2000/svg","svg");j.style.position="absolute",j.style.visibility="hidden",j.appendChild(E.cloneNode(!0)),document.body.appendChild(j);const V=j.firstChild.getBBox();document.body.removeChild(j),V&&V.width>0&&V.height>0?(O=`${V.x-10} ${V.y-10} ${V.width+10*2} ${V.height+10*2}`,T=""):console.warn(`Could not get valid BBox for tooth ${y.tooth_id}. Using fallback viewBox/transform.`)}catch(j){console.warn(`Error getting BBox for tooth ${y.tooth_id}:`,j,". Using fallback viewBox/transform.")}const M="#FFFFFF",L="#666666",z="0.5";E.querySelectorAll("path").forEach(j=>{j.setAttribute("fill",M),j.setAttribute("stroke",L),j.setAttribute("stroke-width",z)});const R=E.outerHTML;_=`<svg viewBox="${O}" preserveAspectRatio="xMidYMid meet" width="40" height="40"><g ${T?`transform="${T}"`:""}>${R}</g></svg>`}else console.warn(`SVG element for tooth ID_${y.tooth_id} not found.`)}catch(b){console.error("Error parsing SVG content:",b),_='<p class="text-xs text-red-500">Parse error</p>'}return w("div",{className:"flex flex-col items-center border p-2 rounded-md shadow-sm bg-white hover:shadow-md transition-shadow duration-150",title:`Tooth ${y.tooth_id}`,children:[w("span",{className:"text-xs font-bold text-gray-700",children:["T",y.tooth_id]}),c("div",{dangerouslySetInnerHTML:{__html:_},className:"my-1"}),y.conditions&&y.conditions.length>0&&c("div",{className:"mt-1 text-center",children:y.conditions.filter(b=>!(y.conditions&&y.conditions.length>1&&b==="healthy")).map((b,S)=>w("span",{className:"block text-[10px] leading-tight text-blue-600",children:[g(b)," "]},S))})]},y.tooth_id)})}):Array.isArray(n)&&n.length===0?c("p",{className:"text-sm text-muted-foreground",children:"No affected teeth selected in dental history."}):c("p",{className:"text-sm text-muted-foreground",children:"Loading affected teeth data..."}):c("p",{className:"text-sm text-red-500",children:"Error loading tooth chart SVG."})]})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Documents & Consent"})}),w(mr,{className:"space-y-4",children:[h&&w("div",{className:"flex items-start py-2",children:[c(YH,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),w("div",{children:[c("p",{className:"text-sm font-medium text-muted-foreground",children:"Profile Photo"}),c("img",{src:h.url,alt:"Profile",className:"mt-1 max-w-xs max-h-40 rounded border"})]})]}),m.length>0&&w("div",{className:"space-y-3 pt-2",children:[c("p",{className:"text-sm font-medium text-muted-foreground",children:"Other Documents"}),m.map(y=>w("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[w("div",{className:"flex items-center space-x-2",children:[c(kce,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),c("span",{className:"text-sm truncate",title:y.name,children:y.name}),w("span",{className:"text-xs text-muted-foreground",children:["(",y.type,")"]})]}),c("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline ml-4",children:"View"})]},y.path))]}),w("div",{className:"flex items-start py-2",children:[c(fce,{className:"h-5 w-5 text-muted-foreground mr-3 mt-1 flex-shrink-0"}),w("div",{children:[c("p",{className:"text-sm font-medium text-muted-foreground",children:"Consent Given"}),c("p",{className:"text-base",children:e.consent_given?"Yes":"No"}),e.consent_date&&w("p",{className:"text-sm text-muted-foreground mt-1",children:["Date: ",IP(e.consent_date)]}),e.signature_url&&w("div",{className:"mt-2",children:[c("p",{className:"text-sm font-medium text-muted-foreground",children:"Signature"}),c("img",{src:e.signature_url,alt:"Signature",className:"mt-1 max-w-xs max-h-20 rounded border"})]})]})]}),f.length===0&&!h&&c("p",{className:"text-sm text-muted-foreground",children:"No documents uploaded."})]})]}),c(yre,{medicalRecords:r,onAddMedicalRecord:o}),w(sr,{children:[c(yr,{children:c(xr,{children:"Appointment History"})}),c(mr,{children:t&&t.length>0?c("div",{className:"space-y-4",children:t.map(y=>w("div",{className:"p-3 border rounded",children:[c("p",{className:"font-semibold",children:y.title||"Appointment"}),w("p",{className:"text-sm text-muted-foreground",children:[IP(y.start_time)," - ",IP(y.end_time)]}),w("p",{className:"text-sm",children:["Type: ",y.type]}),w("p",{className:"text-sm",children:["Status: ",y.status]}),y.notes&&w("p",{className:"text-sm mt-1",children:["Notes: ",y.notes]}),y.staff&&w("p",{className:"text-xs text-muted-foreground mt-1",children:["With: ",y.staff.first_name," ",y.staff.last_name]})]},y.id))}):c("p",{className:"text-sm text-muted-foreground",children:"No past appointments found."})})]}),w("div",{className:"flex justify-end space-x-2 mt-6",children:[" ",w(Fe,{variant:"outline",onClick:()=>i(e.id),children:[c(Ch,{className:"mr-2 h-4 w-4"})," Book New Appointment"]}),c(Fe,{onClick:a,children:"Edit Profile"})]})]})}const DIe=je.object({record_date:je.string().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid date format"}),record_type:je.enum(["examination","procedure","prescription","lab_result","note"],{required_error:"Record type is required"}),general_notes:je.string().optional(),consultation_subjective:je.string().optional(),consultation_objective:je.string().optional(),consultation_assessment:je.string().optional(),consultation_plan:je.string().optional(),diagnosis_code:je.string().optional(),diagnosis_description:je.string().optional(),treatment_procedure:je.string().optional(),treatment_details:je.string().optional(),prescription_medication:je.string().optional(),prescription_dosage:je.string().optional(),prescription_frequency:je.string().optional(),prescription_duration:je.string().optional(),lab_test_name:je.string().optional(),lab_result_value:je.string().optional(),lab_units:je.string().optional(),lab_reference_range:je.string().optional(),other_details:je.string().optional()});function xre({patientId:e,onSubmit:t,onCancel:r,isLoading:n}){const[a,i]=A.useState(void 0),[o,s]=A.useState([]),[l,u]=A.useState(!1),[d,f]=A.useState([]),h=dd({resolver:fd(DIe),defaultValues:{record_date:Ut(new Date,"yyyy-MM-dd"),record_type:void 0,general_notes:"",consultation_subjective:"",consultation_objective:"",consultation_assessment:"",consultation_plan:"",diagnosis_code:"",diagnosis_description:"",treatment_procedure:"",treatment_details:"",prescription_medication:"",prescription_dosage:"",prescription_frequency:"",prescription_duration:"",lab_test_name:"",lab_result_value:"",lab_units:"",lab_reference_range:"",other_details:""}}),m=h.watch("record_type");A.useEffect(()=>{i(m)},[m]);const x=b=>{f(b)},g=()=>{f([...o]),u(!0)},y=()=>{s([...d]),u(!1)},_=async b=>{await t(b,o),s([]),f([])};return w(_r,{children:[" ",c(Rh,{...h,children:w("form",{onSubmit:h.handleSubmit(_),className:"flex flex-col h-full",children:[w(rd,{className:"flex-grow pr-6 max-h-[calc(80vh-150px)]",children:[" ",w("div",{className:"space-y-6",children:[" ",w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(He,{control:h.control,name:"record_date",render:({field:b})=>w(De,{children:[c(Oe,{children:"Record Date"}),c(Me,{children:c(ct,{type:"date",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"record_type",render:({field:b})=>w(De,{children:[c(Oe,{children:"Record Type"}),w(Wr,{onValueChange:b.onChange,defaultValue:b.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select a record type"})})}),w(Ur,{children:[c(wt,{value:"examination",children:"Consultation / Examination / Diagnosis"}),c(wt,{value:"procedure",children:"Treatment / Procedure"}),c(wt,{value:"prescription",children:"Prescription"}),c(wt,{value:"lab_result",children:"Lab Result"}),c(wt,{value:"note",children:"Other Note"})]})]}),c(Xe,{})]})})]}),w(De,{children:[c(Oe,{children:"Select Teeth"})," ",w("div",{className:"flex items-center gap-4",children:[w(Fe,{type:"button",variant:"outline",onClick:g,children:[c(K8,{className:"mr-2 h-4 w-4"}),"Select Teeth..."]}),c("div",{className:"text-sm text-muted-foreground flex-grow min-w-0",children:o.length>0?w("span",{className:"truncate",children:["Selected: ",o.sort((b,S)=>b-S).join(", ")]}):"No teeth selected"})]})," "]}),c(He,{control:h.control,name:"general_notes",render:({field:b})=>w(De,{children:[c(Oe,{children:"General Notes (Optional)"}),c(Me,{children:c(Qr,{placeholder:"Add any general notes applicable to this record...",rows:3,...b})}),c(Xe,{})]})}),a&&w(Tg,{value:a,className:"w-full mt-4",children:[c(Ci,{value:"examination",className:"mt-0 p-0",children:w("div",{className:"space-y-4 p-4 border rounded bg-muted/30",children:[c("h4",{className:"font-medium text-sm mb-4",children:"Consultation / Examination / Diagnosis Details"}),c("p",{className:"text-xs text-muted-foreground mb-2",children:"Enter SOAP notes OR Diagnosis details below."}),c("h5",{className:"font-medium text-xs mb-2",children:"SOAP Notes (Optional)"}),w("div",{children:[c(He,{control:h.control,name:"consultation_subjective",render:({field:b})=>w(De,{children:[c(Oe,{children:"Subjective"}),c(Me,{children:c(Qr,{rows:2,placeholder:"Patient's complaints, history...",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"consultation_objective",render:({field:b})=>w(De,{children:[c(Oe,{children:"Objective"}),c(Me,{children:c(Qr,{rows:2,placeholder:"Clinical findings, exam results...",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"consultation_assessment",render:({field:b})=>w(De,{children:[c(Oe,{children:"Assessment"}),c(Me,{children:c(Qr,{rows:2,placeholder:"Diagnosis, differential diagnosis...",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"consultation_plan",render:({field:b})=>w(De,{children:[c(Oe,{children:"Plan"}),c(Me,{children:c(Qr,{rows:2,placeholder:"Treatment plan, follow-up...",...b})}),c(Xe,{})]})})]}),c("h5",{className:"font-medium text-xs mt-4 mb-2",children:"Diagnosis Details (Optional)"}),c(He,{control:h.control,name:"diagnosis_code",render:({field:b})=>w(De,{children:[c(Oe,{children:"Diagnosis Code (e.g., ICD-10)"}),c(Me,{children:c(ct,{placeholder:"K02.1",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"diagnosis_description",render:({field:b})=>w(De,{children:[c(Oe,{children:"Diagnosis Description"}),c(Me,{children:c(Qr,{placeholder:"Describe the diagnosis...",...b})}),c(Xe,{})]})})]})}),c(Ci,{value:"procedure",className:"mt-0 p-0",children:w("div",{className:"space-y-4 p-4 border rounded bg-muted/30",children:[c("h4",{className:"font-medium text-sm",children:"Treatment / Procedure Details"}),c(He,{control:h.control,name:"treatment_procedure",render:({field:b})=>w(De,{children:[c(Oe,{children:"Procedure (Code or Name)"}),c(Me,{children:c(ct,{placeholder:"e.g., D2391, Composite Filling",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"treatment_details",render:({field:b})=>w(De,{children:[c(Oe,{children:"Treatment Notes/Details"}),c(Me,{children:c(Qr,{placeholder:"Materials used, tooth number, outcome...",...b})}),c(Xe,{})]})})]})}),c(Ci,{value:"prescription",className:"mt-0 p-0",children:w("div",{className:"space-y-4 p-4 border rounded bg-muted/30",children:[c("h4",{className:"font-medium text-sm",children:"Prescription Details"}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(He,{control:h.control,name:"prescription_medication",render:({field:b})=>w(De,{children:[c(Oe,{children:"Medication Name"}),c(Me,{children:c(ct,{placeholder:"Amoxicillin",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"prescription_dosage",render:({field:b})=>w(De,{children:[c(Oe,{children:"Dosage"}),c(Me,{children:c(ct,{placeholder:"500mg",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"prescription_frequency",render:({field:b})=>w(De,{children:[c(Oe,{children:"Frequency"}),c(Me,{children:c(ct,{placeholder:"TID (Three times a day)",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"prescription_duration",render:({field:b})=>w(De,{children:[c(Oe,{children:"Duration"}),c(Me,{children:c(ct,{placeholder:"7 days",...b})}),c(Xe,{})]})})]})]})}),c(Ci,{value:"lab_result",className:"mt-0 p-0",children:w("div",{className:"space-y-4 p-4 border rounded bg-muted/30",children:[c("h4",{className:"font-medium text-sm",children:"Lab Result Details"}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(He,{control:h.control,name:"lab_test_name",render:({field:b})=>w(De,{children:[c(Oe,{children:"Test Name"}),c(Me,{children:c(ct,{placeholder:"Complete Blood Count (CBC)",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"lab_result_value",render:({field:b})=>w(De,{children:[c(Oe,{children:"Result Value"}),c(Me,{children:c(ct,{placeholder:"12.5",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"lab_units",render:({field:b})=>w(De,{children:[c(Oe,{children:"Units"}),c(Me,{children:c(ct,{placeholder:"g/dL",...b})}),c(Xe,{})]})}),c(He,{control:h.control,name:"lab_reference_range",render:({field:b})=>w(De,{children:[c(Oe,{children:"Reference Range"}),c(Me,{children:c(ct,{placeholder:"12.0-15.5 g/dL",...b})}),c(Xe,{})]})})]})]})}),c(Ci,{value:"note",className:"mt-0 p-0",children:w("div",{className:"space-y-4 p-4 border rounded bg-muted/30",children:[c("h4",{className:"font-medium text-sm",children:"Other Note Details"}),c(He,{control:h.control,name:"other_details",render:({field:b})=>w(De,{children:[c(Oe,{children:"Details"}),c(Me,{children:c(Qr,{placeholder:"Enter any other relevant details...",...b})}),c(Xe,{})]})})]})})]})]})," "]}),w("div",{className:"flex justify-end gap-4 pt-4 border-t mt-4",children:[" ",c(Fe,{type:"button",variant:"outline",onClick:r,disabled:n,children:"Cancel"}),w(Fe,{type:"submit",disabled:n||!a,children:[n&&c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Record"]})]})]})}),c(ja,{open:l,onOpenChange:u,children:w(Pa,{className:"max-w-2xl",children:[" ",w(Ta,{children:[c(Oa,{children:"Select Affected Teeth"}),c(Yi,{children:"Click teeth in the chart below to select or deselect them for this medical record."})]}),c(O3,{initialState:d.reduce((b,S)=>(b[S]={isSelected:!0},b),{}),onToothSelect:x}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),c(Fe,{onClick:y,children:"Confirm Selection"})]})]})})]})}function IIe({open:e,onOpenChange:t,patient:r,onSuccess:n}){return c(ja,{open:e,onOpenChange:t,children:w(Pa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c(Ta,{children:c(Oa,{children:r?"Edit Patient":"New Patient"})}),c(pR,{patient:r,onSuccess:n,onCancel:()=>t(!1)})]})})}function Iz(){const{id:e}=iy();return e?c(MIe,{}):c(RIe,{})}function RIe(){const e=bo();yn();const[t,r]=A.useState([]),[n,a]=A.useState(!0),[i,o]=A.useState(""),[s,l]=A.useState(!1);A.useEffect(()=>{u()},[]);const u=async()=>{try{const m=(await Vt.patients.getAll()).map(x=>({...x,profileCompletion:d(x)}));r(m),a(!1)}catch(h){console.error("Error fetching patients:",h),a(!1)}},d=h=>{if(!h)return 0;const m=["first_name","last_name","gender","age","phone","email","address","city","state","postal_code","emergency_contact_name","emergency_contact_phone","blood_group","allergies","medical_conditions"];let x=0;return m.forEach(g=>{h[g]!==null&&h[g]!==void 0&&h[g]!==""&&x++}),Math.floor(x/m.length*100)},f=async h=>{if(o(h),h.length>2)try{const x=(await Vt.patients.search(h)).map(g=>({...g,profileCompletion:d(g)}));r(x)}catch(m){console.error("Error searching patients:",m)}else h.length===0&&u()};return w("div",{className:"space-y-6",children:[c("div",{className:"flex items-center justify-between",children:w("div",{children:[c("h1",{className:"text-2xl font-semibold tracking-tight",children:"Patients"}),c("p",{className:"text-sm text-muted-foreground",children:"Manage patient information and appointments"})]})}),w("div",{className:"flex items-center gap-4",children:[w("div",{className:"relative flex-1",children:[c(s4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),c(ct,{placeholder:"Search by name, phone, or registration number...",className:"pl-8",value:i,onChange:h=>f(h.target.value)})]}),w(Fe,{onClick:()=>l(!0),children:[c(Qc,{className:"h-4 w-4 mr-2"}),"New Patient"]})]}),s&&c(IIe,{open:s,onOpenChange:l,onSuccess:h=>{l(!1),e(`/patients/${h}`)}}),n?c("div",{className:"text-center py-8",children:"Loading patients..."}):c("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(h=>w(sr,{children:[c(mr,{className:"pt-6",children:w("div",{className:"flex flex-col space-y-2",children:[w("div",{className:"flex items-center justify-between",children:[w("h3",{className:"font-medium",children:[h.first_name," ",h.last_name]}),c("div",{className:`px-2 py-1 rounded-full text-xs ${h.profileCompletion===100?"bg-green-100 text-green-800":h.profileCompletion>50?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:h.profileCompletion===100?"Complete":h.profileCompletion>50?"In Progress":"Basic"})]}),w("div",{className:"flex items-center text-sm text-muted-foreground",children:[c(d5,{className:"h-4 w-4 mr-2"}),h.phone]}),h.email&&w("div",{className:"flex items-center text-sm text-muted-foreground",children:[c(o4,{className:"h-4 w-4 mr-2"}),h.email]}),w("div",{className:"mt-2",children:[w("div",{className:"flex items-center justify-between text-sm mb-1",children:[c("span",{children:"Profile Completion"}),w("span",{children:[h.profileCompletion,"%"]})]}),c(vR,{value:h.profileCompletion})]})]})}),w(Z0,{className:"flex justify-between",children:[c(Fe,{variant:"outline",size:"sm",onClick:()=>e(`/patients/${h.id}`,{state:{action:"view"}}),children:"View Details"}),w(Fe,{variant:"secondary",size:"sm",onClick:()=>e(`/patients/${h.id}`,{state:{action:"edit"}}),children:[c(mi,{className:"h-4 w-4 mr-1"}),h.profileCompletion<100?"Complete Profile":"Edit Profile"]})]})]},h.id))})]})}function MIe(){const e=bo(),{id:t}=iy(),{state:r}=km(),[n,a]=A.useState(null),[i,o]=A.useState([]),[s,l]=A.useState([]),[u,d]=A.useState([]),[f,h]=A.useState(!0),[m,x]=A.useState((r==null?void 0:r.action)==="edit"),[g,y]=A.useState(!1),[_,b]=A.useState(!1),{toast:S}=yn();console.log(`Patients.tsx: PatientDetails rendering. isEditing: ${m}, Patient ID: ${t}`),A.useEffect(()=>{t&&C(t)},[t]);const C=async M=>{h(!0);try{Qt.invalidate(`patients:${M}`),Qt.invalidate(`appointments:patient:${M}`),Qt.invalidate(`medical_records:${M}`),Qt.invalidate(`patient_dental_history_teeth:${M}`);const[L,z,P,R]=await Promise.all([Vt.patients.getById(M),Vt.appointments.getByPatientId(M),Vt.patients.getMedicalRecords(M),Vt.patients.getPatientDentalHistoryTeeth(M)]);a(L),o(z||[]),l(P||[]),d(R||[])}catch(L){console.error("Error fetching patient details:",L)}finally{h(!1)}},E=()=>{y(!0)},O=async M=>{if(!t)return;b(!0);let L={general_notes:M.general_notes||void 0};switch(M.record_type){case"consultation":L={...L,subjective:M.consultation_subjective||void 0,objective:M.consultation_objective||void 0,assessment:M.consultation_assessment||void 0,plan:M.consultation_plan||void 0};break;case"diagnosis":L={...L,code:M.diagnosis_code||void 0,description:M.diagnosis_description||void 0};break;case"treatment":L={...L,procedure:M.treatment_procedure||void 0,details:M.treatment_details||void 0};break;case"prescription":L={...L,medication:M.prescription_medication||void 0,dosage:M.prescription_dosage||void 0,frequency:M.prescription_frequency||void 0,duration:M.prescription_duration||void 0};break;case"lab_result":L={...L,test_name:M.lab_test_name||void 0,result_value:M.lab_result_value||void 0,units:M.lab_units||void 0,reference_range:M.lab_reference_range||void 0};break;case"other":L={...L,details:M.other_details||void 0};break}Object.keys(L).forEach(z=>L[z]===void 0&&delete L[z]);try{await Vt.patients.createMedicalRecord({patient_id:t,record_date:M.record_date,record_type:M.record_type,description:JSON.stringify(L)},[]),S({title:"Success",description:"Medical record added successfully."}),y(!1),C(t)}catch(z){console.error("Error adding medical record:",z),S({title:"Error",description:"Failed to add medical record.",variant:"destructive"})}finally{b(!1)}},T=M=>{e(`/appointments?patientId=${M}&action=new`)};return f?c("div",{className:"flex items-center justify-center h-full",children:"Loading patient details..."}):n?w("div",{className:"space-y-6",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{children:[c("h1",{className:"text-2xl font-semibold tracking-tight",children:m?"Edit Patient Profile":"Patient Details"}),w("p",{className:"text-sm text-muted-foreground",children:[n.first_name," ",n.last_name]})]}),w("div",{className:"flex gap-2",children:[c(Fe,{variant:"outline",onClick:()=>e("/patients"),children:"Back to List"}),c(Fe,{onClick:()=>{console.log(`Patients.tsx: Edit/View button clicked. Current isEditing: ${m}`),x(!m),console.log("Patients.tsx: setIsEditing called.")},children:m?"View Details":"Edit Profile"})]})]}),m?w(_r,{children:[console.log(`Patients.tsx: Rendering PatientForm for editing. Key: ${(n==null?void 0:n.id)||"new-patient-form"}, Patient ID: ${n==null?void 0:n.id}`),c(pR,{patient:n,onSuccess:()=>{C(t),x(!1)},onCancel:()=>x(!1)},(n==null?void 0:n.id)||"new-patient-form")]}):c(OIe,{patient:n,appointments:i,medicalRecords:s,dentalHistoryTeeth:u,onEdit:()=>x(!0),onBookAppointment:T,onAddMedicalRecord:E}),c(ja,{open:g,onOpenChange:y,children:w(Pa,{className:"max-w-2xl",children:[c(Ta,{children:c(Oa,{children:"Add New Medical Record"})}),c(xre,{patientId:t,onSubmit:O,onCancel:()=>y(!1),isLoading:_})]})})]}):c("div",{className:"flex items-center justify-center h-full",children:"Patient not found"})}function Rz(e,t){const[r,n]=A.useState(!1);return A.useEffect(()=>{let a;try{a=jD(e,i=>{t&&t(i)}),n(!0)}catch(i){console.error("Error subscribing to changes:",i),n(!1)}return()=>{a&&a.unsubscribe(),n(!1)}},[e,t]),r}function Mz(e,t={}){const[r,n]=A.useState(!1);return{update:A.useCallback(async(i,o)=>{n(!0),o&&o();try{const s=await e(i);return t.onSuccess&&t.onSuccess(s),s}catch(s){throw console.error(t.errorMessage||"Update failed",s),t.onError&&t.onError(s),s}finally{n(!1)}},[e,t]),loading:r}}const FIe=(e,t)=>{if(!t)return e;const n=t.toLowerCase().match(/^(\d+)(-(\d+))?\s*(day|week|month)s?$/);if(!n)return console.warn(`Invalid timeGap format: ${t}. Defaulting to 1 day.`),Fa(e,1);const a=parseInt(n[1],10),i=n[4];switch(i){case"day":return Fa(e,a);case"week":return x1(e,a);case"month":return pl(e,a);default:return console.warn(`Unknown timeGap unit: ${i}. Defaulting to 1 day.`),Fa(e,1)}},nl={async getAllTreatmentPlans(){return Vt.patients.getTreatmentPlans(null)},async getPatientTreatmentPlans(e){return Vt.patients.getTreatmentPlans(e)},async createTreatmentPlan(e,t){const r={...e,title:e.title||"Untitled Plan",description:e.description||"No description",patient_id:e.patient_id||"",status:e.status||"planned",start_date:e.start_date||Ut(new Date,"yyyy-MM-dd"),priority:e.priority||"medium",ai_generated:e.ai_generated!==void 0?e.ai_generated:!1};return Vt.patients.createTreatmentPlan(r,t)},async createTreatmentPlanWithTreatments(e,t){const r={...e,title:e.title||"Untitled Plan",description:e.description||"No description",patient_id:e.patient_id||"",status:e.status||"planned",start_date:e.start_date||Ut(new Date,"yyyy-MM-dd"),priority:e.priority||"medium",ai_generated:e.ai_generated!==void 0?e.ai_generated:!1},n=t.map(a=>{const i=parseFloat(a.cost);return{...a,cost:isNaN(i)?0:i}});return Vt.patients.createTreatmentPlanWithTreatments(r,n)},async updateTreatmentPlan(e,t){return Vt.patients.updateTreatmentPlan(e,t)},async deleteTreatmentPlan(e){return Vt.patients.deleteTreatmentPlan(e)},async createTreatment(e){const t=parseFloat(e.cost),r={...e,cost:isNaN(t)?0:t};return Vt.patients.createTreatment(r)},async updateTreatment(e,t){const r={};for(const i in t)if(i==="cost"&&t.cost!==void 0){const o=parseFloat(t.cost);r.cost=isNaN(o)?void 0:o}else i==="status"&&t.status!==void 0?r.status=t.status:i==="description"&&t.description!==void 0?r.description=t.description:i==="type"&&t.type!==void 0?r.type=t.type:i==="priority"&&t.priority!==void 0?r.priority=t.priority:i==="plan_id"&&t.plan_id!==void 0?r.plan_id=t.plan_id:i==="scheduled_date"&&t.scheduled_date!==void 0?r.scheduled_date=t.scheduled_date?t.scheduled_date:null:i==="time_gap"&&t.time_gap!==void 0&&(r.time_gap=t.time_gap||null);const n=t.status,a=new Date().toISOString();return n==="completed"||n==="cancelled"?r.actual_end_time=a:n==="pending"?(r.actual_start_time=null,r.actual_end_time=null):n==="in_progress"&&(r.actual_start_time=a,r.actual_end_time=null),console.log(`Updating treatment ${e} with payload:`,r),Vt.patients.updateTreatment(e,r)},async deleteTreatment(e){return Vt.patients.deleteTreatment(e)},processTreatmentPlanData(e,t){return e.map(r=>{var f,h,m;const n=t.find(x=>x.id===r.patient_id),a=((f=r.treatments)==null?void 0:f.reduce((x,g)=>x+parseFloat(g.cost||0),0))||0,i=((h=r.treatments)==null?void 0:h.filter(x=>x.status==="completed").length)||0,o=((m=r.treatments)==null?void 0:m.length)||0,s=o?Math.round(i/o*100):0,l=Array.isArray(r.treatment_plan_teeth)?r.treatment_plan_teeth.map(x=>x.teeth).filter(x=>x!==null):[],u={...r};delete u.treatment_plan_teeth;const d=r.patient||(n?{full_name:`${n.first_name} ${n.last_name}`,age:n.age,gender:n.gender,registration_number:n.registration_number}:void 0);return{...u,patientName:(d==null?void 0:d.full_name)||"Unknown Patient",totalCost:a,progress:s,completedTreatments:i,totalTreatments:o,teeth:l,patient:d}})},async getVisitsByPlanId(e){if(!e)return console.warn("[treatmentService.getVisitsByPlanId] planId is required, exiting."),[];console.log(`[treatmentService.getVisitsByPlanId] Attempting for planId: ${e}`);try{console.log(`[treatmentService.getVisitsByPlanId] PRE-AWAIT for api.patients.getVisitsByPlanId with planId: ${e}`);const t=await Vt.patients.getVisitsByPlanId(e);if(console.log(`[treatmentService.getVisitsByPlanId] POST-AWAIT for api.patients.getVisitsByPlanId. Result for planId ${e}:`,t),!t)return console.warn(`[treatmentService.getVisitsByPlanId] visitsData is null/undefined for planId ${e}.`),[];if(!Array.isArray(t))return console.error(`[treatmentService.getVisitsByPlanId] visitsData is not an array for planId ${e}. Received:`,t),[];t.length===0&&console.log(`[treatmentService.getVisitsByPlanId] visitsData is an empty array for planId ${e}.`);const r=t.map((n,a)=>typeof n!="object"||n===null||typeof n.id>"u"?(console.warn(`[treatmentService.getVisitsByPlanId] Invalid visit object at index ${a} for planId ${e}:`,n),{id:"INVALID_VISIT_DATA"}):{id:n.id});return console.log(`[treatmentService.getVisitsByPlanId] Mapped visits for planId ${e}:`,r),r}catch(t){throw console.error(`[treatmentService.getVisitsByPlanId] CRITICAL ERROR fetching visits for plan ${e}:`,t),t}},async createMultipleVisits(e,t,r){if(!t||t.length===0)return{data:[],error:null};let n=zr(r);const a=[];for(let i=0;i<t.length;i++){const o=t[i];i>0&&t[i-1].timeGap&&(n=FIe(n,t[i-1].timeGap));const s={treatment_plan_id:e,visit_number:i+1,procedures:o.procedures||"N/A",estimated_duration:o.estimatedDuration,time_gap:o.timeGap,status:"pending",scheduled_date:Ut(n,"yyyy-MM-dd")};a.push(s)}return Vt.patients.createTreatmentVisitsBatch(a)}},RP=async e=>{if(!e)return console.log("[getBookedAppointmentDetailsForPlan] No planId provided, exiting."),[];console.log(`[getBookedAppointmentDetailsForPlan] Attempting to fetch for planId: ${e}`);let t=null;try{if(console.log(`[getBookedAppointmentDetailsForPlan] ENTERING TRY BLOCK for planId: ${e}`),console.log(`[getBookedAppointmentDetailsForPlan] PRE: Calling treatmentService.getVisitsByPlanId for planId: ${e}`),t=await nl.getVisitsByPlanId(e),console.log(`[getBookedAppointmentDetailsForPlan] POST: treatmentService.getVisitsByPlanId returned for planId ${e}. Result:`,t),!t)return console.log(`[getBookedAppointmentDetailsForPlan] Visits data is null or undefined for plan ${e}.`),[];if(t.length===0)return console.log(`[getBookedAppointmentDetailsForPlan] No visits found (empty array) for plan ${e}`),[];const r=t.map(i=>i.id);if(console.log(`[getBookedAppointmentDetailsForPlan] Visit IDs for plan ${e}:`,r),r.length===0)return console.log(`[getBookedAppointmentDetailsForPlan] No visit IDs extracted (map result empty) for plan ${e}`),[];console.log("[getBookedAppointmentDetailsForPlan] PRE: Calling api.appointments.getAppointmentsByTreatmentIds with visitIds:",r);const n=await Vt.appointments.getAppointmentsByTreatmentIds(r);if(console.log(`[getBookedAppointmentDetailsForPlan] POST: api.appointments.getAppointmentsByTreatmentIds returned. Appointments for visit IDs (${r.join(", ")}):`,n),!n)return console.log("[getBookedAppointmentDetailsForPlan] Appointments data is null or undefined for the given visit IDs."),[];if(n.length===0)return console.log("[getBookedAppointmentDetailsForPlan] No appointments found (empty array) for visit IDs"),[];const a=n.filter(i=>i.status!=="cancelled"&&i.treatment_id).map(i=>i);return console.log(`[getBookedAppointmentDetailsForPlan] Filtered Booked Appointments for plan ${e}:`,a),a}catch(r){return console.error(`[getBookedAppointmentDetailsForPlan] CRITICAL ERROR in getBookedAppointmentDetailsForPlan for planId ${e}. Error:`,r),t!==null?console.error("[getBookedAppointmentDetailsForPlan] State of 'visits' when error occurred:",t):console.error("[getBookedAppointmentDetailsForPlan] 'visits' was null when error occurred (error likely in getVisitsByPlanId itself)."),[]}};function LIe(){const{toast:e}=yn(),[t,r]=A.useState(!0),[n,a]=A.useState([]),[i,o]=A.useState([]),[s,l]=A.useState(null),[u,d]=A.useState({plans:null,selectedPlan:null}),f=Rz("treatment_plans",()=>{_()}),h=Rz("treatments",P=>{s&&P.new&&P.new.plan_id===s.id?b():_()}),{update:m,loading:x}=Mz(P=>nl.updateTreatment(P.treatmentId,{status:P.newStatus}),{onError:()=>{e({title:"Update Failed",description:"Failed to update treatment status. Please try again.",variant:"destructive"}),s&&u.selectedPlan&&l({...u.selectedPlan})}}),{update:g,loading:y}=Mz(P=>nl.updateTreatmentPlan(P.planId,{status:P.newStatus}),{onError:()=>{e({title:"Update Failed",description:"Failed to update plan status. Please try again.",variant:"destructive"}),u.plans&&a([...u.plans])}}),_=A.useCallback(async()=>{try{r(!0);const[P,R]=await Promise.all([nl.getAllTreatmentPlans(),Vt.patients.getAll()]),j=nl.processTreatmentPlanData(P,R);a(j),o(R)}catch(P){console.error("Error fetching data:",P),e({title:"Error",description:"Failed to load treatment plans",variant:"destructive"})}finally{r(!1)}},[e]),b=A.useCallback(async()=>{if(s)try{const R=(await nl.getAllTreatmentPlans()).find(j=>j.id===s.id);if(R){const j=nl.processTreatmentPlanData([R],i)[0];l(j)}}catch(P){console.error("Error refreshing plan:",P)}},[s,i]);A.useEffect(()=>{_()},[]);const S=A.useCallback((P,R,j)=>n.filter(V=>{var Y,U,G;const Z=P?((Y=V.title)==null?void 0:Y.toLowerCase().includes(P.toLowerCase()))||((U=V.description)==null?void 0:U.toLowerCase().includes(P.toLowerCase()))||((G=V.patientName)==null?void 0:G.toLowerCase().includes(P.toLowerCase())):!0,te=R&&R!=="all"?V.patient_id===R:!0,q=j&&j!=="all"?V.status===j:!0;return Z&&te&&q}),[n]),C=A.useCallback(async(P,R)=>{var Z,te,q,Y;let j=null,V=null;try{r(!0);const{originalAISuggestion:U,clinical_considerations:G,materials:J,post_treatment_care:D,total_visits:K,...Q}=P,ae={title:Q.title||"Untitled Plan",description:Q.description||"No description",patient_id:Q.patient_id||"",status:Q.status||"planned",start_date:Q.start_date||Ut(new Date,"yyyy-MM-dd"),priority:Q.priority||"medium",ai_generated:!!U},se=await nl.createTreatmentPlan(ae,R);if(se.error||!se.data||!se.data.id)throw console.error("Error creating base treatment plan:",se.error),e({title:"Error",description:((Z=se.error)==null?void 0:Z.message)||"Failed to create base treatment plan record.",variant:"destructive"}),se.error||new Error("Base plan creation failed or ID missing.");j=se.data.id,V=se.data,e({title:"Plan Created",description:"Base plan record and teeth associations saved. Saving metadata..."});const fe={treatment_plan_id:j,clinical_considerations:G||null,key_materials:J||null,post_treatment_care:D||null,total_visits:K?parseInt(K):((Y=(q=(te=U==null?void 0:U.planDetails)==null?void 0:te.appointmentPlan)==null?void 0:q.sittingDetails)==null?void 0:Y.length)||0,completed_visits:0};try{await Vt.patients.createTreatmentPlanMetadata(fe),e({title:"Metadata Saved",description:"Additional plan details saved successfully."})}catch(de){console.error("Error creating treatment plan metadata:",de),e({title:"Warning",description:"Plan created, but failed to save some additional details (metadata).",variant:"default"})}const ie=await Vt.patients.getTreatmentPlanDetails(j);if(ie.error||!ie.data)return console.error("Error fetching new plan details:",ie.error),e({title:"Warning",description:"Plan fully created, but failed to fetch updated details. A manual refresh may be needed.",variant:"default"}),_(),{...nl.processTreatmentPlanData([{...V,treatments:[],metadata:fe}],i)[0],originalAISuggestion:U};const X=ie.data,ue=nl.processTreatmentPlanData([X],i)[0];return _(),console.log("[useTreatmentPlans] createTreatmentPlan - Returning originalAISuggestion:",P.originalAISuggestion),{...ue,originalAISuggestion:P.originalAISuggestion}}catch(U){throw console.error("Error in createTreatmentPlan process:",U),e({title:"Error",description:`An unexpected error occurred: ${U instanceof Error?U.message:"Please check console."}`,variant:"destructive"}),U}finally{r(!1)}},[_,i,e]),E=A.useCallback(async P=>{try{r(!0),await nl.createTreatment(P),e({title:"Treatment Added",description:"New treatment has been successfully added to the plan."}),await b()}catch(R){throw console.error("Error creating treatment:",R),e({title:"Error",description:R.message||"Failed to add treatment.",variant:"destructive"}),R}finally{r(!1)}},[e,b]),O=A.useCallback(async(P,R)=>{try{r(!0),await nl.updateTreatment(P,R),e({title:"Treatment Updated",description:"Treatment details have been successfully updated."}),await b()}catch(j){throw console.error("Error updating treatment details:",j),e({title:"Error",description:j.message||"Failed to update treatment details.",variant:"destructive"}),j}finally{r(!1)}},[e,b]),T=A.useCallback(async(P,R)=>{if(d({...u,selectedPlan:{...s}}),s){const j=s.treatments.map(te=>te.id===P?{...te,status:R}:te),V=j.filter(te=>te.status==="completed").length,Z=Math.round(V/j.length*100);l({...s,treatments:j,completedTreatments:V,progress:Z})}await m({treatmentId:P,newStatus:R})},[s,u,m]),M=A.useCallback(async(P,R)=>{d({...u,plans:[...n]});const j=n.map(V=>V.id===P?{...V,status:R}:V);a(j),s&&s.id===P&&l({...s,status:R}),await g({planId:P,newStatus:R})},[n,s,u,g]),L=A.useCallback(async P=>{d({...u,selectedPlan:{...s}});try{if(r(!0),s){const R=s.treatments.find(Y=>Y.id===P),j=s.treatments.filter(Y=>Y.id!==P),V=j.filter(Y=>Y.status==="completed").length,Z=j.length,te=Z?Math.round(V/Z*100):0,q=j.reduce((Y,U)=>Y+parseFloat(U.cost||0),0);l({...s,treatments:j,completedTreatments:V,totalTreatments:Z,progress:te,totalCost:q})}await nl.deleteTreatment(P),e({title:"Success",description:"Treatment deleted successfully"}),await b()}catch(R){console.error("Error deleting treatment:",R),u.selectedPlan&&l(u.selectedPlan),e({title:"Error",description:"Failed to delete treatment",variant:"destructive"})}finally{r(!1)}},[b,s,u,e]),z=A.useCallback(async P=>{try{r(!0);const R=n.filter(j=>j.id!==P);a(R),await nl.deleteTreatmentPlan(P),e({title:"Success",description:"Treatment plan deleted successfully"}),s&&s.id===P&&l(null)}catch(R){console.error("Error deleting treatment plan:",R),_(),e({title:"Error",description:"Failed to delete treatment plan",variant:"destructive"})}finally{r(!1)}},[_,n,s,e]);return{loading:t,treatmentPlans:n,patients:i,selectedPlan:s,setSelectedPlan:l,treatmentPlansSubscribed:f,treatmentsSubscribed:h,updatingTreatmentStatus:x,updatingPlanStatus:y,filterPlans:S,fetchData:_,refreshSelectedPlan:b,createTreatmentPlan:C,createTreatment:E,updateTreatmentDetails:O,handleUpdateTreatmentStatus:T,handleUpdatePlanStatus:M,deleteTreatment:L,deletePlan:z}}function Hv(e,t=2){if(e==null)return" 0.00";const r=typeof e=="string"?parseFloat(e):e;return isNaN(r)?" 0.00":` ${r.toFixed(t)}`}function jIe({plan:e,onViewDetails:t}){const r=a=>{let i="bg-gray-100 text-gray-800";switch(a){case"planned":i="bg-blue-100 text-blue-800";break;case"in_progress":i="bg-yellow-100 text-yellow-800";break;case"completed":i="bg-green-100 text-green-800";break;case"cancelled":i="bg-red-100 text-red-800";break}return c("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i}`,children:a.replace("_"," ")})},n=a=>{let i="bg-gray-100 text-gray-800";switch(a){case"low":i="bg-green-100 text-green-800";break;case"medium":i="bg-yellow-100 text-yellow-800";break;case"high":i="bg-red-100 text-red-800";break}return c("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i}`,children:a})};return w(sr,{className:"overflow-hidden",children:[w(yr,{className:"pb-2",children:[w("div",{className:"flex justify-between items-start",children:[c(xr,{className:"text-lg",children:e.title}),r(e.status)]}),c(_c,{className:"line-clamp-2",children:e.description})]}),c(mr,{className:"pb-2",children:w("div",{className:"space-y-4",children:[w("div",{className:"flex items-center text-sm",children:[c(mi,{className:"h-4 w-4 mr-2 text-muted-foreground"}),c("span",{children:e.patientName})]}),w("div",{className:"flex items-center text-sm",children:[c(Hi,{className:"h-4 w-4 mr-2 text-muted-foreground"}),w("span",{children:[Ut(new Date(e.start_date),"MMM d, yyyy"),e.end_date&&` to ${Ut(new Date(e.end_date),"MMM d, yyyy")}`]})]}),w("div",{className:"flex items-center text-sm",children:[c(HH,{className:"h-4 w-4 mr-2 text-muted-foreground"}),w("span",{children:["Total Cost: ",Hv(e.totalCost)]})]}),w("div",{className:"space-y-1",children:[w("div",{className:"flex items-center justify-between text-sm",children:[c("span",{children:"Progress"}),w("span",{children:[e.completedTreatments," of ",e.totalTreatments," treatments"]})]}),c(vR,{value:e.progress})]})]})}),w(Z0,{className:"pt-2 flex justify-between",children:[c("div",{className:"flex gap-2",children:e.priority&&n(e.priority)}),w(Fe,{variant:"default",size:"sm",onClick:()=>t(e),children:["View Details ",c(im,{className:"h-4 w-4 ml-1"})]})]})]})}function $Ie({patientId:e,toothIds:t,domain:r,condition:n,matrixDetails:a,selectedTreatment:i,symptoms:o,description:s,patientRecord:l,onSuggestionApply:u,disabled:d=!1}){const[f,h]=A.useState(!1),[m,x]=A.useState([]),{toast:g}=yn(),[y,_]=A.useState(null),[b,S]=A.useState(null);return w("div",{className:"space-y-4",children:[c("div",{className:"flex justify-center",children:c(Fe,{type:"button",onClick:async()=>{var T,M;if(f)return;if(!i){g({title:"Missing Information",description:"Please select a treatment option first.",variant:"destructive"});return}h(!0),x([]);const E=new AbortController,O=setTimeout(()=>E.abort(),12e4);try{const L=E.signal;L.throwIfAborted();const z="https://n8n1.kol.tel/webhook/2169736a-368b-49b5-b93f-ffc215203d99",P=await fetch(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:e,toothIds:t,domain:r,condition:n,treatment:i,details:a,patientRecord:l,userInput:{symptoms:o,description:s}})});if(L.throwIfAborted(),clearTimeout(O),!P.ok)throw new Error(`AI suggestion failed: ${P.status}`);const j=(M=(T=(await P.json())[0])==null?void 0:T.output)==null?void 0:M.response;if(!j||!j.treatmentPlans||!Array.isArray(j.treatmentPlans))throw new Error("Invalid AI response structure: treatmentPlans missing or not an array.");const V=j.treatmentPlans.map(Z=>{var K,Q,ae;const te=Z.planName,q=te==null?void 0:te.toLowerCase(),Y=(Q=(K=j.caseOverview)==null?void 0:K.patientSelectedTreatment)==null?void 0:Q.toLowerCase(),U=q==null?void 0:q.includes("(patient-selected)"),G=q==null?void 0:q.includes("(patient selected)"),J=Y&&(q==null?void 0:q.startsWith(Y)),D=U||G||J;return console.log(`[AISuggestionForm] Plan: ${te} | Lower: ${q} | C1: ${U} | C2: ${G} | patientSelectedTreatmentLower: ${Y} | C3 (startsWith): ${J} | FINAL isPatientSelected: ${D}`),console.log(`[AISuggestionForm] Raw AI plan object for: ${te}`,Z),console.log(`[AISuggestionForm] Metadata source fields for: ${te}`,{aiPlanClinicalConsiderations:Z.clinicalConsiderations,aiPlanKeyMaterials:Z.keyMaterials,aiOutputPostTreatmentCare:j.postTreatmentCare}),{title:Z.planName,description:j.clinicalAssessment||"",planDetails:{planName:Z.planName,clinicalProtocol:Z.clinicalProtocol,keyMaterials:Z.keyMaterials,clinicalConsiderations:Z.clinicalConsiderations,expectedOutcomes:Z.expectedOutcomes,appointmentPlan:Z.appointmentPlan||((ae=Z.planDetails)==null?void 0:ae.appointmentPlan),isPatientSelected:D},caseOverview:j.caseOverview,patientFactors:j.patientFactors,recommendedInvestigations:j.recommendedInvestigations,clinicalRationale:j.clinicalRationale,postTreatmentCare:j.postTreatmentCare||""}});x(V)}catch(L){clearTimeout(O),console.error("Error generating suggestions:",L),L instanceof Error&&L.name==="AbortError"?g({title:"Request Timed Out",description:"The AI suggestion service took too long to respond (120 seconds).",variant:"destructive"}):g({title:"Generation Failed",description:L instanceof Error?L.message:"Failed to generate suggestions",variant:"destructive"})}finally{h(!1)}},disabled:d||!i,className:`ai-insights-button ${f?"opacity-100 cursor-not-allowed":""}`,style:f?{opacity:1}:{},children:f?w(_r,{children:[c(uh,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):w(_r,{children:[c(uh,{className:"mr-2 h-4 w-4"}),"Generate AI Suggestions"]})})}),m.length>0&&w("div",{className:"mt-4 space-y-4",children:[c("h4",{className:"font-semibold text-sm",children:"Generated Treatment Plans"}),c("div",{className:"space-y-4",children:m.map((E,O)=>w("div",{className:Rt("border rounded-lg overflow-hidden bg-card",E.planDetails.isPatientSelected&&"border-primary/50 bg-primary/5"),children:[c("div",{className:"p-4 bg-muted/50",children:w("div",{className:"flex items-start justify-between",children:[w("div",{children:[w("h5",{className:"font-medium text-base",children:[E.title," ",E.planDetails.isPatientSelected&&c("span",{className:"ml-2 text-xs text-primary font-normal",children:"(Patient Selected Plan)"})]}),E.caseOverview&&w("div",{className:"mt-1 text-xs text-muted-foreground",children:[w("p",{children:[c("strong",{children:"Condition:"})," ",E.caseOverview.condition]}),w("p",{children:[c("strong",{children:"Severity:"})," ",E.caseOverview.severity]}),w("p",{children:[c("strong",{children:"Teeth:"})," ",E.caseOverview.teethInvolved]}),E.caseOverview.patientSymptoms&&w("p",{children:[c("strong",{children:"Symptoms:"})," ",E.caseOverview.patientSymptoms]}),E.caseOverview.patientSelectedTreatment&&w("p",{children:[c("strong",{children:"Patient Preference:"})," ",E.caseOverview.patientSelectedTreatment]})]})]}),E.planDetails.isPatientSelected&&c(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>u(E),className:"bg-primary text-white hover:bg-primary/90",children:"Apply Selected Plan"})]})}),w(P4,{type:"single",collapsible:!0,className:"w-full",children:[w(ts,{value:"clinical-assessment",children:[c(rs,{className:"px-4",children:"Overall Clinical Assessment"}),c(ns,{className:"px-4 pb-4",children:c("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:E.description})})]}),E.patientFactors&&w(ts,{value:"patient-factors",children:[c(rs,{className:"px-4",children:"Patient Factors"}),w(ns,{className:"px-4 pb-4 text-sm space-y-1",children:[w("p",{children:[c("strong",{children:"Relevant Medical Conditions:"})," ",E.patientFactors.relevantMedicalConditions]}),w("p",{children:[c("strong",{children:"Medication Considerations:"})," ",E.patientFactors.medicationConsiderations]}),w("p",{children:[c("strong",{children:"Age-Related Considerations:"})," ",E.patientFactors.ageRelatedConsiderations]})]})]}),E.recommendedInvestigations&&w(ts,{value:"recommended-investigations",children:[c(rs,{className:"px-4",children:"Recommended Investigations"}),c(ns,{className:"px-4 pb-4 text-sm",children:c("p",{children:E.recommendedInvestigations})})]}),w(ts,{value:"plan-details",children:[w(rs,{className:"px-4",children:["Details for: ",E.planDetails.planName]}),c(ns,{className:"px-4 pb-4",children:w("div",{className:"space-y-3 text-sm",children:[w("div",{children:[c("p",{className:"font-medium",children:"Clinical Protocol:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:E.planDetails.clinicalProtocol})]}),w("div",{children:[c("p",{className:"font-medium",children:"Key Materials:"}),c("p",{className:"text-muted-foreground",children:E.planDetails.keyMaterials})]}),w("div",{children:[c("p",{className:"font-medium",children:"Clinical Considerations:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:E.planDetails.clinicalConsiderations})]}),w("div",{children:[c("p",{className:"font-medium",children:"Expected Outcomes:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:E.planDetails.expectedOutcomes})]})]})})]}),E.planDetails.appointmentPlan&&w(ts,{value:"appointment-plan",children:[c(rs,{className:"px-4",children:w("span",{className:"flex items-center",children:[c(Hi,{className:"mr-2 h-4 w-4"}),"Appointment Plan"]})}),c(ns,{className:"px-4 pb-4",children:w("div",{className:"space-y-3 text-sm",children:[w("div",{className:"flex items-center gap-4 text-muted-foreground mb-2",children:[w("div",{children:[c(ls,{className:"h-4 w-4 inline mr-1"}),w("span",{children:["Total Sittings: ",E.planDetails.appointmentPlan.totalSittings]})]}),w("div",{children:[c(Hi,{className:"h-4 w-4 inline mr-1"}),w("span",{children:["Total Duration: ",E.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),E.planDetails.appointmentPlan.medicalPrecautions&&w("div",{className:"mb-3",children:[c("p",{className:"font-medium",children:"Medical Precautions:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:E.planDetails.appointmentPlan.medicalPrecautions})]}),c("div",{className:"space-y-2",children:E.planDetails.appointmentPlan.sittingDetails.map((T,M)=>w("div",{className:"border rounded p-3 bg-background",children:[w("p",{className:"font-medium",children:["Visit ",T.visit]}),c("p",{className:"text-muted-foreground mt-1",children:T.procedures}),w("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-3",children:[w("p",{className:"flex items-center",children:[c(ls,{className:"h-3 w-3 mr-1"}),"Duration: ",T.estimatedDuration]}),T.timeGap!=="N/A"&&w("p",{className:"flex items-center",children:[c(Hi,{className:"h-3 w-3 mr-1"}),"Next visit in: ",T.timeGap]})]})]},M))})]})})]}),E.clinicalRationale&&w(ts,{value:"clinical-rationale",children:[c(rs,{className:"px-4",children:"Clinical Rationale"}),c(ns,{className:"px-4 pb-4 text-sm",children:c("p",{className:"whitespace-pre-line",children:E.clinicalRationale})})]}),w(ts,{value:"post-care",children:[c(rs,{className:"px-4",children:"Post-Treatment Care"}),c(ns,{className:"px-4 pb-4",children:c("p",{className:"text-sm text-muted-foreground",children:E.postTreatmentCare})})]})]})]},O))})]})]})}const BIe=je.object({symptoms:je.string().min(1,"Symptoms are required"),description:je.string().min(1,"Description is required"),patient_id:je.string().min(1,"Patient is required"),domain:je.string().optional(),condition:je.string().optional(),treatment:je.string().min(1,"Select a treatment").optional(),estimated_duration:je.string().optional(),total_visits:je.string().optional(),materials:je.string().optional(),clinical_considerations:je.string().optional(),post_treatment_care:je.string().optional(),status:je.enum(["planned","in_progress","completed","cancelled"]).optional(),start_date:je.string().optional(),priority:je.enum(["low","medium","high"]).optional(),ai_generated:je.boolean().optional(),initialTreatments:je.array(je.any()).optional(),originalAISuggestion:je.any().optional()});function UIe({open:e,onOpenChange:t,onSubmit:r,patients:n,loading:a=!1,initialData:i}){const[o,s]=A.useState(""),[l,u]=A.useState(null),[d,f]=A.useState(!1),[h,m]=A.useState(null),[x,g]=A.useState(null),[y,_]=A.useState(null),[b,S]=A.useState(!1),[C,E]=A.useState([]),[O,T]=A.useState(!1),[M,L]=A.useState([]),[z,P]=A.useState(Date.now()),[R,j]=A.useState({}),[V,Z]=A.useState([]),[te,q]=A.useState([]),[Y,U]=A.useState([]),[G,J]=A.useState(!1),[D,K]=A.useState(null),[Q,ae]=A.useState(!1),[se,fe]=A.useState([]),[ie,X]=A.useState(!1),[ue,de]=A.useState(!1),[re,ke]=A.useState(null),[Re,Pe]=A.useState(null),{toast:ge}=yn(),Ye=A.useRef(null);bo();const Qe=dd({resolver:fd(BIe),defaultValues:i||{symptoms:"",description:"",patient_id:"",domain:"",condition:"",treatment:"",estimated_duration:"",total_visits:"",materials:"",clinical_considerations:"",post_treatment_care:"",status:"planned",start_date:Ut(new Date,"yyyy-MM-dd"),priority:"medium",ai_generated:!1,initialTreatments:[],originalAISuggestion:null}});A.useEffect(()=>{e?Qe.reset({symptoms:"",description:"",patient_id:x||"",domain:"",condition:"",treatment:"",estimated_duration:"",total_visits:"",materials:"",clinical_considerations:"",post_treatment_care:""}):(E([]),g(null),u(null),s(""),K(null),fe([]),X(!1),_(null),ke(null),S(!1),Qe.reset(),T(!1),L([]))},[e,x]),A.useEffect(()=>{e&&(async()=>{J(!0);try{const Ze=await Vt.getTreatmentMatrixOptions();Z(Ze);const _t=[...new Set(Ze.map(pt=>pt.domain))].sort();q(_t),U([])}catch(Ze){console.error("Failed to fetch treatment options:",Ze)}finally{J(!1)}})()},[e]);const st=Qe.watch("domain");A.useEffect(()=>{if(console.log(`Domain changed to: ${st}. Full matrix options:`,V),st){const Ie=V.filter(Ze=>Ze.domain===st).map(Ze=>Ze.condition).sort();console.log(`Filtered conditions for ${st}:`,Ie),U(Ie)}else U([]),K(null),fe([])},[st,V,Qe]),A.useEffect(()=>{if(!st||!Re){K(null);return}(async()=>{ae(!0);try{console.log(`Fetching matrix details for Domain: ${st}, Condition: ${Re}`);const Ze=await Vt.getMatrixDetails(st,Re);K(Ze)}catch(Ze){console.error("Failed to fetch matrix details:",Ze),K(null),ge({title:"Error",description:"Could not load details for the selected domain/condition.",variant:"destructive"})}finally{ae(!1)}})()},[st,Re,Qe,ge]);const Pt=Ie=>{Qe.setValue("domain",Ie),K(null),fe([])},ft=async Ie=>{g(Ie.id),u(`${Ie.first_name||""} ${Ie.last_name||""}`.trim()),Qe.setValue("patient_id",Ie.id,{shouldValidate:!0}),s(""),j({}),E([]),_(null),S(!0);try{console.log(`Fetching full patient details for patient: ${Ie.id}`);const Ze=await Vt.patients.getById(Ie.id);_(Ze),console.log("Fetched full patient record:",Ze),console.log(`Fetching tooth conditions for patient: ${Ie.id}`);const _t=await Vt.patients.getPatientToothConditions(Ie.id);console.log("Fetched conditions data:",_t);const pt={},Pr=[];_t.forEach(Bt=>{const dr=Array.isArray(Bt.conditions)?Bt.conditions.filter(ha=>typeof ha=="string"&&["healthy","decayed","filled","missing","treatment-planned","root-canal","extraction","crown","has-treatment-before","recommended-to-be-treated"].includes(ha)):[],Ir=dr.length>0?dr:["healthy"],Tr=Ir.length>1||Ir.length===1&&Ir[0]!=="healthy";Bt.tooth_id&&(pt[Bt.tooth_id]={conditions:Ir,isSelected:Tr},Tr&&Pr.push(Bt.tooth_id))}),console.log("Formatted initialState for chart:",pt),console.log("Initially selected IDs based on conditions:",Pr),j(pt),E(Pr)}catch(Ze){console.error("Failed to fetch patient details or tooth conditions:",Ze),ge({title:"Error Loading Patient Data",description:"Could not load patient details or tooth conditions.",variant:"destructive"}),_(null),j({}),E([])}finally{S(!1)}},_e=Ie=>{L(Ie)},Te=async()=>{if(!Ye.current||!x){console.error("Dental chart ref not available or no patient selected."),ge({title:"Error",description:"Could not save chart data. Please try again.",variant:"destructive"});return}de(!0);try{const Ie=Ye.current.getTeethData(),Ze=Ye.current.getLastActiveCondition();console.log("Data from chart ref:",Ie),console.log("Last active condition from chart ref:",Ze);const _t=Object.entries(Ie).filter(([,Bt])=>Bt.isSelected&&Bt.condition!=="healthy").map(([Bt,dr])=>({tooth_id:parseInt(Bt,10),conditions:[dr.condition],patient_id:x}));console.log("Filtered and transformed data to save:",_t),await Vt.patients.savePatientToothConditionsDetailed(x,_t);const pt=Object.entries(Ie).filter(([,Bt])=>Bt.isSelected).map(([Bt])=>parseInt(Bt,10));E(pt);const Pr={};if(Object.entries(Ie).forEach(([Bt,dr])=>{Pr[parseInt(Bt,10)]={condition:dr.condition,conditions:[dr.condition],isSelected:dr.isSelected}}),j(Pr),Ze)Pe(Ze);else{const Bt=Object.values(Ie).find(dr=>dr.isSelected&&dr.condition!=="healthy");Pe((Bt==null?void 0:Bt.condition)||null)}ge({title:"Chart Saved",description:"Patient's tooth conditions have been updated.",variant:"default"}),T(!1)}catch(Ie){console.error("Failed to save tooth conditions:",Ie),ge({title:"Save Failed",description:"Could not save tooth conditions to the database.",variant:"destructive"})}finally{de(!1)}},qe=()=>{if(!x){ge({title:"No Patient Selected",description:"Please select a patient before opening the dental chart.",variant:"default"});return}console.log("Opening chart dialog with prepared initial state:",R),L([...C]),P(Date.now()),T(!0)};A.useEffect(()=>{console.log("isChartDialogOpen state changed:",O)},[O]);const yt=async Ie=>{if(!x){ge({title:"Patient Not Selected",description:"Please select a patient before submitting.",variant:"destructive"});return}let Ze={...Ie};Ze.symptoms&&(Ze.title=Ze.symptoms,delete Ze.symptoms),delete Ze.patient_name,re?Ze.originalAISuggestion=re:Ze.ai_generated=!1;try{await r(Ze,C),Qe.reset(),ke(null),t(!1)}catch(_t){console.error("Error submitting treatment plan form:",_t),ge({title:"Submission Error",description:"Failed to save the treatment plan. Please try again.",variant:"destructive"})}},vt=A.useCallback(async()=>{var Ie,Ze;if(!x||C.length===0||!st||!y){ge({title:"Missing Information",description:"Please select patient, teeth (and apply conditions in chart), and domain first.",variant:"default",duration:3e3});return}X(!0),fe([]);try{const _t="https://n8n1.kol.tel/webhook/2169736a-368b-49b5-b93f-ffc215203d99",pt={patientId:x,toothIds:C,domain:st,details:D,treatment:Qe.getValues("treatment"),patientRecord:y};console.log("Sending payload to n8n:",pt);const Pr=await fetch(_t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pt)});if(!Pr.ok){const Tr=await Pr.text();throw console.error("Error response from n8n webhook:",Pr.status,Tr),new Error(`AI suggestion call failed: ${Pr.status}`)}const Bt=await Pr.json();console.log("Received response from n8n:",Bt);const dr=(Ze=(Ie=Bt[0])==null?void 0:Ie.output)==null?void 0:Ze.response;if(!dr||!dr.treatmentPlans||!Array.isArray(dr.treatmentPlans)){console.warn("Invalid AI response structure: treatmentPlans missing or not an array. Response:",Bt),fe([]),ge({title:"AI Response Error",description:"The AI returned an unexpected data format.",variant:"destructive"}),X(!1);return}const Ir=dr.treatmentPlans.map(Tr=>{var Cn,kr,pn,fo,Jn,li;const ha=Tr.planName,Xr=ha==null?void 0:ha.toLowerCase(),Na=Qe.getValues("treatment"),En=Na==null?void 0:Na.toLowerCase();let pa=!1;Xr&&(pa=Xr.includes("(patient-selected)")||Xr.includes("(patient selected)"),!pa&&En&&Xr.startsWith(En)&&(pa=!0));const si={condition:st||((Cn=dr.caseOverview)==null?void 0:Cn.condition)||"N/A",severity:(D==null?void 0:D.severity)||((kr=dr.caseOverview)==null?void 0:kr.severity)||"N/A",teethInvolved:C.join(", ")||((pn=dr.caseOverview)==null?void 0:pn.teethInvolved)||"N/A",patientSymptoms:Qe.getValues("symptoms")||((fo=dr.caseOverview)==null?void 0:fo.patientSymptoms),patientSelectedTreatment:Na||((Jn=dr.caseOverview)==null?void 0:Jn.patientSelectedTreatment)};return{title:Tr.planName||"AI Suggested Plan",description:dr.clinicalAssessment||Tr.description||Tr.clinicalProtocol||"No detailed assessment provided.",planDetails:{planName:Tr.planName,clinicalProtocol:Tr.clinicalProtocol,keyMaterials:Tr.keyMaterials,clinicalConsiderations:Tr.clinicalConsiderations,expectedOutcomes:Tr.expectedOutcomes,appointmentPlan:Tr.appointmentPlan||((li=Tr.planDetails)==null?void 0:li.appointmentPlan),isPatientSelected:pa},caseOverview:si,patientFactors:dr.patientFactors,recommendedInvestigations:dr.recommendedInvestigations,clinicalRationale:dr.clinicalRationale,postTreatmentCare:dr.postTreatmentCare||Tr.postTreatmentCare||""}});Ir.length>0?(fe(Ir),ge({title:"AI Suggestions Ready",description:`Received ${Ir.length} new suggestions.`,variant:"default",duration:3e3})):(console.warn("Parsed suggestions array is empty. Raw AI output:",dr),fe([]),ge({title:"No Specific Suggestions",description:"The AI did not return specific treatment plans based on the input.",variant:"default",duration:3e3}))}catch(_t){console.error("Error fetching AI suggestions:",_t),ge({title:"AI Suggestion Failed",description:_t instanceof Error?_t.message:"Could not get suggestions. Check console.",variant:"destructive",duration:5e3}),fe([])}finally{X(!1)}},[x,C,st,D,Qe,ge,y]),ht=Ie=>{var Ze,_t,pt,Pr,Bt,dr;if(ke(Ie),Qe.setValue("symptoms",Ie.title),Qe.setValue("description",Ie.description),(Ze=Ie.planDetails)!=null&&Ze.clinicalConsiderations&&Qe.setValue("clinical_considerations",Ie.planDetails.clinicalConsiderations),Ie.postTreatmentCare&&Qe.setValue("post_treatment_care",Ie.postTreatmentCare),(_t=Ie.planDetails)!=null&&_t.keyMaterials&&Qe.setValue("materials",Ie.planDetails.keyMaterials),(Pr=(pt=Ie.planDetails)==null?void 0:pt.appointmentPlan)!=null&&Pr.totalSittings&&Qe.setValue("total_visits",Ie.planDetails.appointmentPlan.totalSittings),(dr=(Bt=Ie.planDetails)==null?void 0:Bt.appointmentPlan)!=null&&dr.totalTreatmentTime&&Qe.setValue("estimated_duration",Ie.planDetails.appointmentPlan.totalTreatmentTime),D!=null&&D.treatment_options&&Array.isArray(D.treatment_options)&&Ie.title){const Ir=D.treatment_options.find(Tr=>Ie.title.toLowerCase().includes(Tr.toLowerCase()));Ir&&Qe.setValue("treatment",Ir)}Qe.setValue("ai_generated",!0),ge({title:"AI Suggestion Applied",description:`"${Ie.title}" has been pre-filled into the form.`})};return w(_r,{children:[c(ja,{open:e,onOpenChange:t,children:w(Pa,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[w(Ta,{children:[c(Oa,{children:"Create New Treatment Plan"}),c(Yi,{children:"Create a comprehensive treatment plan for a patient"})]}),c(Rh,{...Qe,children:w("form",{onSubmit:Qe.handleSubmit(yt),className:"space-y-4 pb-6",children:[c(He,{control:Qe.control,name:"patient_id",render:({field:Ie})=>w(De,{className:"relative",children:[c(Oe,{htmlFor:"patient-search",children:"Patient *"}),c(Me,{children:c(ct,{type:"search",id:"patient-search",value:o,onChange:Ze=>{s(Ze.target.value),u(null)},placeholder:l||"Search by name, phone, or registration...",disabled:d,className:"w-full"})}),d&&c("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading patients..."}),h&&c("p",{className:"text-sm text-destructive mt-1",children:h}),o&&!d&&!h&&c(rd,{className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60",children:c("div",{className:"p-2",children:n.filter(Ze=>{var dr,Ir;const _t=`${Ze.first_name||""} ${Ze.last_name||""}`.toLowerCase(),pt=((dr=Ze.phone)==null?void 0:dr.toLowerCase())||"",Pr=((Ir=Ze.registration_number)==null?void 0:Ir.toLowerCase())||"",Bt=o.toLowerCase();return _t.includes(Bt)||pt.includes(Bt)||Pr.includes(Bt)}).length>0?n.filter(Ze=>{var dr,Ir;const _t=`${Ze.first_name||""} ${Ze.last_name||""}`.toLowerCase(),pt=((dr=Ze.phone)==null?void 0:dr.toLowerCase())||"",Pr=((Ir=Ze.registration_number)==null?void 0:Ir.toLowerCase())||"",Bt=o.toLowerCase();return _t.includes(Bt)||pt.includes(Bt)||Pr.includes(Bt)}).map(Ze=>c(Fe,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3 mb-1",onClick:()=>ft(Ze),type:"button",children:w("div",{children:[c("div",{children:`${Ze.first_name||""} ${Ze.last_name||""}`.trim()}),w("div",{className:"text-xs text-muted-foreground",children:[Ze.registration_number&&`Reg: ${Ze.registration_number}`,Ze.registration_number&&Ze.phone&&" | ",Ze.phone&&`Ph: ${Ze.phone}`]})]})},Ze.id)):w("p",{className:"text-sm text-muted-foreground p-2",children:['No patients found matching "',o,'"']})})}),c(Xe,{})]})}),x&&c(He,{control:Qe.control,name:"domain",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Domain"}),w(Wr,{onValueChange:Pt,value:Ie.value||"",disabled:G,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:G?"Loading...":"Select domain"})})}),c(Ur,{children:G?c(wt,{value:"loading",disabled:!0,children:"Loading..."}):te.map(Ze=>c(wt,{value:Ze,children:Ze.charAt(0).toUpperCase()+Ze.slice(1)},Ze))})]}),c(Xe,{})]})}),x&&st&&w(De,{children:[c(Oe,{children:"Affected Teeth & Conditions"}),w("div",{className:"flex items-center gap-2",children:[w(Fe,{type:"button",variant:"outline",onClick:qe,disabled:!x||!st,children:[c(K8,{className:"mr-2 h-4 w-4"}),"Select Teeth & Apply Domain Conditions"]}),C.length>0&&w("span",{className:"text-sm text-muted-foreground",children:["Selected: ",C.join(", ")]})]}),c(hi,{children:"Select the patient and domain first, then specify affected teeth and apply conditions from the selected domain."})]}),x&&st&&C.length>0&&D&&Qe.watch("treatment")&&w("div",{className:"mt-4 pt-4 border-t space-y-4",children:[c(He,{control:Qe.control,name:"symptoms",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Symptoms *"}),c(Me,{children:c(ct,{placeholder:"Enter patient symptoms",...Ie})}),c(Xe,{})]})}),c(He,{control:Qe.control,name:"description",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Description *"}),c(Me,{children:c(Qr,{placeholder:"Detailed description of the treatment plan",...Ie,rows:3})}),c(Xe,{})]})}),c("div",{className:"mt-4",children:c($Ie,{patientId:x||"",toothIds:C,domain:Qe.watch("domain")||"",condition:Qe.watch("condition")||"",matrixDetails:D,selectedTreatment:Qe.watch("treatment")||"",symptoms:Qe.watch("symptoms")||"",description:Qe.watch("description")||"",patientRecord:y,onSuggestionApply:ht,disabled:!x||C.length===0||!Qe.watch("treatment")||!y||b||ie})})]}),Q&&w("div",{className:"flex justify-center items-center p-4",children:[c(Bn,{className:"h-6 w-6 animate-spin text-muted-foreground"})," ",c("span",{className:"ml-2 text-muted-foreground",children:"Loading details..."})]}),!Q&&D&&st&&Re&&w("div",{className:"my-4 p-4 border rounded-lg bg-secondary/10 space-y-2 text-sm",children:[w("h4",{className:"font-semibold text-base mb-2",children:["Details for ",st," / ",Re]}),D.urgency&&w("p",{children:[c("strong",{children:"Urgency:"})," ",D.urgency]}),D.severity&&w("p",{children:[c("strong",{children:"Severity:"})," ",D.severity]}),D.risk_impact&&w("p",{children:[c("strong",{children:"Risk/Impact:"})," ",D.risk_impact]}),D.recommended_investigations&&D.recommended_investigations.length>0&&w("p",{children:[c("strong",{children:"Investigations:"})," ",D.recommended_investigations.join(", ")]}),D.treatment_options&&D.treatment_options.length>0&&w("div",{className:"mt-3",children:[c("p",{className:"font-semibold mb-1",children:"Select Treatment:"}),c(He,{control:Qe.control,name:"treatment",render:({field:Ie})=>w("div",{className:"space-y-1 ml-1",children:[D.treatment_options.map(Ze=>w("label",{className:"flex items-center gap-2 cursor-pointer",children:[c("input",{type:"radio",value:Ze,checked:Ie.value===Ze,onChange:_t=>{_t.target.checked&&Ie.onChange(Ze)},className:"form-radio h-4 w-4 text-primary focus:ring-primary border-muted-foreground"}),c("span",{children:Ze})]},Ze)),c(Xe,{})]})})]})]}),x&&st&&C.length>0&&D&&Qe.watch("treatment")&&w("div",{className:"my-4 p-4 border rounded-lg bg-muted/30",children:[w("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[c(uh,{className:"mr-2 h-5 w-5 text-primary"}),"AI Powered Suggestions"]}),c(Fe,{type:"button",onClick:vt,disabled:ie||!x||C.length===0||!st||b||!Qe.watch("treatment"),className:`ai-insights-button w-full flex items-center justify-center py-2 px-4 rounded-lg shadow-md font-semibold text-white transition duration-150 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 ${ie?"opacity-100 cursor-not-allowed":""}`,style:ie?{opacity:1}:{},children:ie?w(_r,{children:[c(Bn,{className:"mr-2 h-4 w-4 animate-spin"})," AI is thinking... (this may take up to 2 minutes)"]}):w(_r,{children:[c(uh,{className:"mr-2 h-5 w-5"})," Generate AI Suggestions"]})})]}),se.length>0&&w("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50 shadow",children:[c("h3",{className:"text-lg font-semibold mb-3 text-slate-800",children:"AI Suggestions"}),c("div",{className:"space-y-4",children:se.map((Ie,Ze)=>{var _t;return w("div",{className:Rt("border rounded-lg overflow-hidden bg-card",Ie.planDetails.isPatientSelected&&"border-primary/50 bg-primary/5"),children:[c("div",{className:"p-4 bg-muted/50",children:w("div",{className:"flex items-start justify-between",children:[w("div",{children:[w("h5",{className:"font-medium text-base",children:[Ie.title," ",Ie.planDetails.isPatientSelected&&c("span",{className:"ml-2 text-xs text-primary font-normal",children:"(Patient Selected Plan)"})]}),Ie.caseOverview&&w("div",{className:"mt-1 text-xs text-muted-foreground",children:[w("p",{children:[c("strong",{children:"Condition:"})," ",Ie.caseOverview.condition]}),w("p",{children:[c("strong",{children:"Severity:"})," ",Ie.caseOverview.severity]}),w("p",{children:[c("strong",{children:"Teeth:"})," ",Ie.caseOverview.teethInvolved]}),Ie.caseOverview.patientSymptoms&&w("p",{children:[c("strong",{children:"Symptoms:"})," ",Ie.caseOverview.patientSymptoms]}),Ie.caseOverview.patientSelectedTreatment&&w("p",{children:[c("strong",{children:"Patient Preference:"})," ",Ie.caseOverview.patientSelectedTreatment]})]})]}),Ie.planDetails.isPatientSelected&&c(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>ht(Ie),className:"bg-primary text-white hover:bg-primary/90",children:"Apply Selected Plan"})]})}),w(P4,{type:"single",collapsible:!0,className:"w-full",children:[w(ts,{value:`clinical-assessment-${Ze}`,children:[c(rs,{className:"px-4",children:"Overall Clinical Assessment"}),c(ns,{className:"px-4 pb-4",children:c("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:Ie.description})})]}),Ie.patientFactors&&w(ts,{value:`patient-factors-${Ze}`,children:[c(rs,{className:"px-4",children:"Patient Factors"}),w(ns,{className:"px-4 pb-4 text-sm space-y-1",children:[w("p",{children:[c("strong",{children:"Relevant Medical Conditions:"})," ",Ie.patientFactors.relevantMedicalConditions]}),w("p",{children:[c("strong",{children:"Medication Considerations:"})," ",Ie.patientFactors.medicationConsiderations]}),w("p",{children:[c("strong",{children:"Age-Related Considerations:"})," ",Ie.patientFactors.ageRelatedConsiderations]})]})]}),Ie.recommendedInvestigations&&w(ts,{value:`recommended-investigations-${Ze}`,children:[c(rs,{className:"px-4",children:"Recommended Investigations"}),c(ns,{className:"px-4 pb-4 text-sm",children:c("p",{children:Ie.recommendedInvestigations})})]}),Ie.planDetails&&w(ts,{value:`plan-details-${Ze}`,children:[w(rs,{className:"px-4",children:["Details for: ",Ie.planDetails.planName||Ie.title]}),c(ns,{className:"px-4 pb-4",children:w("div",{className:"space-y-3 text-sm",children:[Ie.planDetails.clinicalProtocol&&w("div",{children:[c("p",{className:"font-medium",children:"Clinical Protocol:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:Ie.planDetails.clinicalProtocol})]}),Ie.planDetails.keyMaterials&&w("div",{children:[c("p",{className:"font-medium",children:"Key Materials:"}),c("p",{className:"text-muted-foreground",children:Ie.planDetails.keyMaterials})]}),Ie.planDetails.clinicalConsiderations&&w("div",{children:[c("p",{className:"font-medium",children:"Clinical Considerations:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:Ie.planDetails.clinicalConsiderations})]}),Ie.planDetails.expectedOutcomes&&w("div",{children:[c("p",{className:"font-medium",children:"Expected Outcomes:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:Ie.planDetails.expectedOutcomes})]})]})})]}),((_t=Ie.planDetails)==null?void 0:_t.appointmentPlan)&&w(ts,{value:`appointment-plan-${Ze}`,children:[c(rs,{className:"px-4",children:w("span",{className:"flex items-center",children:[c(Hi,{className:"mr-2 h-4 w-4"}),"Appointment Plan"]})}),c(ns,{className:"px-4 pb-4",children:w("div",{className:"space-y-3 text-sm",children:[w("div",{className:"flex items-center gap-4 text-muted-foreground mb-2",children:[Ie.planDetails.appointmentPlan.totalSittings&&w("div",{children:[c(ls,{className:"h-4 w-4 inline mr-1"}),w("span",{children:["Total Sittings: ",Ie.planDetails.appointmentPlan.totalSittings]})]}),Ie.planDetails.appointmentPlan.totalTreatmentTime&&w("div",{children:[c(Hi,{className:"h-4 w-4 inline mr-1"}),w("span",{children:["Total Duration: ",Ie.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),Ie.planDetails.appointmentPlan.medicalPrecautions&&w("div",{className:"mb-3",children:[c("p",{className:"font-medium",children:"Medical Precautions:"}),c("p",{className:"text-muted-foreground whitespace-pre-line",children:Ie.planDetails.appointmentPlan.medicalPrecautions})]}),Ie.planDetails.appointmentPlan.sittingDetails&&Ie.planDetails.appointmentPlan.sittingDetails.length>0&&w("div",{className:"space-y-2",children:[c("p",{className:"font-medium text-sm mb-1",children:"Sitting Details:"}),Ie.planDetails.appointmentPlan.sittingDetails.map((pt,Pr)=>w("div",{className:"border rounded p-3 bg-background",children:[c("p",{className:"font-medium",children:pt.visit||`Visit ${Pr+1}`}),c("p",{className:"text-muted-foreground mt-1",children:pt.procedures}),w("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-3",children:[pt.estimatedDuration&&w("p",{className:"flex items-center",children:[c(ls,{className:"h-3 w-3 mr-1"}),"Duration: ",pt.estimatedDuration]}),pt.timeGap&&pt.timeGap!=="N/A"&&w("p",{className:"flex items-center",children:[c(Hi,{className:"h-3 w-3 mr-1"}),"Next visit in: ",pt.timeGap]})]})]},Pr))]})]})})]}),Ie.clinicalRationale&&w(ts,{value:`clinical-rationale-${Ze}`,children:[c(rs,{className:"px-4",children:"Clinical Rationale"}),c(ns,{className:"px-4 pb-4 text-sm",children:c("p",{className:"whitespace-pre-line",children:Ie.clinicalRationale})})]}),Ie.postTreatmentCare&&w(ts,{value:`post-care-${Ze}`,children:[c(rs,{className:"px-4",children:"Post-Treatment Care"}),c(ns,{className:"px-4 pb-4",children:c("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:Ie.postTreatmentCare})})]})]})]},Ze)})})]}),D&&w(_r,{children:[c(He,{control:Qe.control,name:"estimated_duration",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Estimated Duration"}),c(Me,{children:c(ct,{...Ie,placeholder:"e.g., 3-4 weeks"})}),c(Xe,{})]})}),c(He,{control:Qe.control,name:"total_visits",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Total Visits"}),c(Me,{children:c(ct,{...Ie,placeholder:"e.g., 2"})}),c(Xe,{})]})}),c(He,{control:Qe.control,name:"materials",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Required Materials"}),c(Me,{children:c(Qr,{...Ie,placeholder:"List of required materials",className:"min-h-[80px]"})}),c(Xe,{})]})}),c(He,{control:Qe.control,name:"clinical_considerations",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Clinical Considerations"}),c(Me,{children:c(Qr,{...Ie,placeholder:"Important clinical considerations",className:"min-h-[80px]"})}),c(Xe,{})]})}),c(He,{control:Qe.control,name:"post_treatment_care",render:({field:Ie})=>w(De,{children:[c(Oe,{children:"Post-Treatment Care"}),c(Me,{children:c(Qr,{...Ie,placeholder:"Post-treatment care instructions",className:"min-h-[80px]"})}),c(Xe,{})]})})]}),w(Qi,{children:[c(Fe,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),w(Fe,{type:"submit",disabled:a,children:[a?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(Qc,{className:"mr-2 h-4 w-4"}),"Create Plan"]})]})]})})]})}),c(ja,{open:O,onOpenChange:T,children:w(Pa,{className:"max-w-2xl",children:[" ",w(Ta,{children:[c(Oa,{children:"Select Affected Teeth & Apply Conditions"}),c(Yi,{children:"Click teeth to select/deselect. Use the controls below to apply conditions from the selected domain to the selected teeth."})]}),c(O3,{ref:Ye,initialState:R,onToothSelect:_e,domain:st||void 0,domainConditions:Y},z),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>T(!1),disabled:ue,children:"Cancel"}),w(Fe,{onClick:Te,disabled:ue,children:[ue?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(Tce,{className:"mr-2 h-4 w-4"}),"Confirm & Save Chart"]})]})]})})]})}var D3="Popover",[wre,qJe]=eo(D3,[Em]),Xw=Em(),[qIe,Fm]=wre(D3),_re=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=Xw(t),l=A.useRef(null),[u,d]=A.useState(!1),[f,h]=hl({prop:n,defaultProp:a??!1,onChange:i,caller:D3});return c(m4,{...s,children:c(qIe,{scope:t,contentId:Ll(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:A.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:A.useCallback(()=>d(!0),[]),onCustomAnchorRemove:A.useCallback(()=>d(!1),[]),modal:o,children:r})})};_re.displayName=D3;var bre="PopoverAnchor",zIe=A.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fm(bre,r),i=Xw(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return A.useEffect(()=>(o(),()=>s()),[o,s]),c(Ow,{...i,...n,ref:t})});zIe.displayName=bre;var Sre="PopoverTrigger",Are=A.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fm(Sre,r),i=Xw(r),o=Hr(t,a.triggerRef),s=c(pr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Pre(a.open),...n,ref:o,onClick:Wt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:c(Ow,{asChild:!0,...i,children:s})});Are.displayName=Sre;var yR="PopoverPortal",[WIe,VIe]=wre(yR,{forceMount:void 0}),Nre=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Fm(yR,t);return c(WIe,{scope:t,forceMount:r,children:c(cs,{present:r||i.open,children:c(cy,{asChild:!0,container:a,children:n})})})};Nre.displayName=yR;var J1="PopoverContent",kre=A.forwardRef((e,t)=>{const r=VIe(J1,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Fm(J1,e.__scopePopover);return c(cs,{present:n||i.open,children:i.modal?c(GIe,{...a,ref:t}):c(KIe,{...a,ref:t})})});kre.displayName=J1;var HIe=sm("PopoverContent.RemoveScroll"),GIe=A.forwardRef((e,t)=>{const r=Fm(J1,e.__scopePopover),n=A.useRef(null),a=Hr(t,n),i=A.useRef(!1);return A.useEffect(()=>{const o=n.current;if(o)return y4(o)},[]),c(Iw,{as:HIe,allowPinchZoom:!0,children:c(Ere,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Wt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,u=s.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Wt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),KIe=A.forwardRef((e,t)=>{const r=Fm(J1,e.__scopePopover),n=A.useRef(!1),a=A.useRef(!1);return c(Ere,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(s=r.triggerRef.current)==null||s.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Ere=A.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Fm(J1,r),m=Xw(r);return u4(),c(Pw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:c(_g,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:c(g4,{"data-state":Pre(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cre="PopoverClose",YIe=A.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Fm(Cre,r);return c(pr.button,{type:"button",...n,ref:t,onClick:Wt(e.onClick,()=>a.onOpenChange(!1))})});YIe.displayName=Cre;var XIe="PopoverArrow",ZIe=A.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xw(r);return c(v4,{...a,...n,ref:t})});ZIe.displayName=XIe;function Pre(e){return e?"open":"closed"}var JIe=_re,QIe=Are,eRe=Nre,Tre=kre;const dg=JIe,fg=QIe,vm=A.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>c(eRe,{children:c(Tre,{ref:a,align:t,sideOffset:r,className:Rt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));vm.displayName=Tre.displayName;var nn=function(){return nn=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nn.apply(this,arguments)};function tRe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Ore(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Zw(e){return e.mode==="multiple"}function Jw(e){return e.mode==="range"}function I3(e){return e.mode==="single"}var rRe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function nRe(e,t){return Ut(e,"LLLL y",t)}function aRe(e,t){return Ut(e,"d",t)}function iRe(e,t){return Ut(e,"LLLL",t)}function oRe(e){return"".concat(e)}function sRe(e,t){return Ut(e,"cccccc",t)}function lRe(e,t){return Ut(e,"yyyy",t)}var cRe=Object.freeze({__proto__:null,formatCaption:nRe,formatDay:aRe,formatMonthCaption:iRe,formatWeekNumber:oRe,formatWeekdayName:sRe,formatYearCaption:lRe}),uRe=function(e,t,r){return Ut(e,"do MMMM (EEEE)",r)},dRe=function(){return"Month: "},fRe=function(){return"Go to next month"},hRe=function(){return"Go to previous month"},pRe=function(e,t){return Ut(e,"cccc",t)},mRe=function(e){return"Week n. ".concat(e)},gRe=function(){return"Year: "},vRe=Object.freeze({__proto__:null,labelDay:uRe,labelMonthDropdown:dRe,labelNext:fRe,labelPrevious:hRe,labelWeekNumber:mRe,labelWeekday:pRe,labelYearDropdown:gRe});function yRe(){var e="buttons",t=rRe,r=Lw,n={},a={},i=1,o={},s=new Date;return{captionLayout:e,classNames:t,formatters:cRe,labels:vRe,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:s,mode:"default"}}function xRe(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Uo(n):t&&(i=new Date(t,0,1)),a?o=dm(a):r&&(o=new Date(r,11,31)),{fromDate:i?Dl(i):void 0,toDate:o?Dl(o):void 0}}var Dre=A.createContext(void 0);function wRe(e){var t,r=e.initialProps,n=yRe(),a=xRe(r),i=a.fromDate,o=a.toDate,s=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;s!=="buttons"&&(!i||!o)&&(s="buttons");var l;(I3(r)||Zw(r)||Jw(r))&&(l=r.onSelect);var u=nn(nn(nn({},n),r),{captionLayout:s,classNames:nn(nn({},n.classNames),r.classNames),components:nn({},r.components),formatters:nn(nn({},n.formatters),r.formatters),fromDate:i,labels:nn(nn({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:nn(nn({},n.modifiers),r.modifiers),modifiersClassNames:nn(nn({},n.modifiersClassNames),r.modifiersClassNames),onSelect:l,styles:nn(nn({},n.styles),r.styles),toDate:o});return c(Dre.Provider,{value:u,children:e.children})}function $a(){var e=A.useContext(Dre);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Ire(e){var t=$a(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return c("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function _Re(e){return c("svg",nn({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:c("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Rre(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,s=e.className,l=e.style,u=$a(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:_Re;return w("div",{className:s,style:l,children:[c("span",{className:u.classNames.vhidden,children:e["aria-label"]}),c("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),w("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,c(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function bRe(e){var t,r=$a(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,s=r.formatters.formatMonthCaption,l=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return c(_r,{});if(!a)return c(_r,{});var f=[];if(qve(n,a))for(var h=Uo(n),m=n.getMonth();m<=a.getMonth();m++)f.push(wN(h,m));else for(var h=Uo(new Date),m=0;m<=11;m++)f.push(wN(h,m));var x=function(y){var _=Number(y.target.value),b=wN(Uo(e.displayMonth),_);e.onChange(b)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Rre;return c(g,{name:"months","aria-label":d(),className:l.dropdown_month,style:i.dropdown_month,onChange:x,value:e.displayMonth.getMonth(),caption:s(e.displayMonth,{locale:o}),children:f.map(function(y){return c("option",{value:y.getMonth(),children:s(y,{locale:o})},y.getMonth())})})}function SRe(e){var t,r=e.displayMonth,n=$a(),a=n.fromDate,i=n.toDate,o=n.locale,s=n.styles,l=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return c(_r,{});if(!i)return c(_r,{});for(var m=a.getFullYear(),x=i.getFullYear(),g=m;g<=x;g++)h.push(dL(_Y(new Date),g));var y=function(b){var S=dL(Uo(r),Number(b.target.value));e.onChange(S)},_=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Rre;return c(_,{name:"years","aria-label":f(),className:l.dropdown_year,style:s.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return c("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function ARe(e,t){var r=A.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function NRe(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,s=e.numberOfMonths,l=s===void 0?1:s;if(i&&w1(i,a)<0){var u=-1*(l-1);a=pl(i,u)}return o&&w1(a,o)<0&&(a=o),Uo(a)}function kRe(){var e=$a(),t=NRe(e),r=ARe(t,e.month),n=r[0],a=r[1],i=function(o){var s;if(!e.disableNavigation){var l=Uo(o);a(l),(s=e.onMonthChange)===null||s===void 0||s.call(e,l)}};return[n,i]}function ERe(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Uo(e),i=Uo(pl(a,n)),o=w1(i,a),s=[],l=0;l<o;l++){var u=pl(a,l);s.push(u)}return r&&(s=s.reverse()),s}function CRe(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,s=Uo(e);if(!r)return pl(s,o);var l=w1(r,e);if(!(l<i))return pl(s,o)}}function PRe(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,s=Uo(e);if(!r)return pl(s,-o);var l=w1(s,r);if(!(l<=0))return pl(s,-o)}}var Mre=A.createContext(void 0);function TRe(e){var t=$a(),r=kRe(),n=r[0],a=r[1],i=ERe(n,t),o=CRe(n,t),s=PRe(n,t),l=function(f){return i.some(function(h){return N4(f,h)})},u=function(f,h){l(f)||(h&&th(f,h)?a(pl(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:s,nextMonth:o,isDateDisplayed:l};return c(Mre.Provider,{value:d,children:e.children})}function Qw(){var e=A.useContext(Mre);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Fz(e){var t,r=$a(),n=r.classNames,a=r.styles,i=r.components,o=Qw().goToMonth,s=function(d){o(pl(d,e.displayIndex?-e.displayIndex:0))},l=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:Ire,u=c(l,{id:e.id,displayMonth:e.displayMonth});return w("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[c("div",{className:n.vhidden,children:u}),c(bRe,{onChange:s,displayMonth:e.displayMonth}),c(SRe,{onChange:s,displayMonth:e.displayMonth})]})}function ORe(e){return c("svg",nn({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:c("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function DRe(e){return c("svg",nn({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:c("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var IS=A.forwardRef(function(e,t){var r=$a(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),s=nn(nn({},a.button_reset),a.button);return e.style&&Object.assign(s,e.style),c("button",nn({},e,{ref:t,type:"button",className:o,style:s}))});function IRe(e){var t,r,n=$a(),a=n.dir,i=n.locale,o=n.classNames,s=n.styles,l=n.labels,u=l.labelPrevious,d=l.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return c(_r,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),x=d(e.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),y=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:DRe,_=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:ORe;return w("div",{className:o.nav,style:s.nav,children:[!e.hidePrevious&&c(IS,{name:"previous-month","aria-label":h,className:m,style:s.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?c(y,{className:o.nav_icon,style:s.nav_icon}):c(_,{className:o.nav_icon,style:s.nav_icon})}),!e.hideNext&&c(IS,{name:"next-month","aria-label":x,className:g,style:s.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?c(_,{className:o.nav_icon,style:s.nav_icon}):c(y,{className:o.nav_icon,style:s.nav_icon})})]})}function Lz(e){var t=$a().numberOfMonths,r=Qw(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,s=o.findIndex(function(x){return N4(e.displayMonth,x)}),l=s===0,u=s===o.length-1,d=t>1&&(l||!u),f=t>1&&(u||!l),h=function(){n&&i(n)},m=function(){a&&i(a)};return c(IRe,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function RRe(e){var t,r=$a(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,s=r.components,l=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:Ire,u;return a?u=c(l,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=c(Fz,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=w(_r,{children:[c(Fz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),c(Lz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=w(_r,{children:[c(l,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),c(Lz,{displayMonth:e.displayMonth,id:e.id})]}),c("div",{className:n.caption,style:i.caption,children:u})}function MRe(e){var t=$a(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?c("tfoot",{className:a,style:n.tfoot,children:c("tr",{children:c("td",{colSpan:8,children:r})})}):c(_r,{})}function FRe(e,t,r){for(var n=r?wh(new Date):ss(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=Fa(n,i);a.push(o)}return a}function LRe(){var e=$a(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,s=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,u=FRe(a,i,o);return w("tr",{style:r.head_row,className:t.head_row,children:[n&&c("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return c("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":l(d,{locale:a}),children:s(d,{locale:a})},f)})]})}function jRe(){var e,t=$a(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:LRe;return c("thead",{style:n.head,className:r.head,children:c(i,{})})}function $Re(e){var t=$a(),r=t.locale,n=t.formatters.formatDay;return c(_r,{children:n(e.date,{locale:r})})}var xR=A.createContext(void 0);function BRe(e){if(!Zw(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return c(xR.Provider,{value:t,children:e.children})}return c(URe,{initialProps:e.initialProps,children:e.children})}function URe(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var x=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!x){var g=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var y=n?Ore([],n):[];if(d.selected){var _=y.findIndex(function(b){return sl(u,b)});y.splice(_,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,d,f)}}},s={disabled:[]};n&&s.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return sl(h,u)});return!!(d&&!f)});var l={selected:n,onDayClick:o,modifiers:s};return c(xR.Provider,{value:l,children:r})}function wR(){var e=A.useContext(xR);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function qRe(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?sl(a,e)&&sl(n,e)?void 0:sl(a,e)?{from:a,to:void 0}:sl(n,e)?void 0:u6(n,e)?{from:e,to:a}:{from:n,to:e}:a?u6(e,a)?{from:a,to:e}:{from:e,to:a}:n?th(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var _R=A.createContext(void 0);function zRe(e){if(!Jw(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c(_R.Provider,{value:t,children:e.children})}return c(WRe,{initialProps:e.initialProps,children:e.children})}function WRe(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,s=t.min,l=t.max,u=function(m,x,g){var y,_;(y=t.onDayClick)===null||y===void 0||y.call(t,m,x,g);var b=qRe(m,n);(_=t.onSelect)===null||_===void 0||_.call(t,b,m,x,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],sl(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),s&&(i&&!o&&d.disabled.push({after:yN(i,s-1),before:Fa(i,s-1)}),i&&o&&d.disabled.push({after:i,before:Fa(i,s-1)}),!i&&o&&d.disabled.push({after:yN(o,s-1),before:Fa(o,s-1)})),l){if(i&&!o&&(d.disabled.push({before:Fa(i,-l+1)}),d.disabled.push({after:Fa(i,l-1)})),i&&o){var f=zu(o,i)+1,h=l-f;d.disabled.push({before:yN(i,h)}),d.disabled.push({after:Fa(o,h)})}!i&&o&&(d.disabled.push({before:Fa(o,-l+1)}),d.disabled.push({after:Fa(o,l-1)}))}return c(_R.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function bR(){var e=A.useContext(_R);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Qb(e){return Array.isArray(e)?Ore([],e):e!==void 0?[e]:[]}function VRe(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Qb(a)}),t}var ad;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ad||(ad={}));var HRe=ad.Selected,Jf=ad.Disabled,GRe=ad.Hidden,KRe=ad.Today,MP=ad.RangeEnd,FP=ad.RangeMiddle,LP=ad.RangeStart,YRe=ad.Outside;function XRe(e,t,r){var n,a=(n={},n[HRe]=Qb(e.selected),n[Jf]=Qb(e.disabled),n[GRe]=Qb(e.hidden),n[KRe]=[e.today],n[MP]=[],n[FP]=[],n[LP]=[],n[YRe]=[],n);return e.fromDate&&a[Jf].push({before:e.fromDate}),e.toDate&&a[Jf].push({after:e.toDate}),Zw(e)?a[Jf]=a[Jf].concat(t.modifiers[Jf]):Jw(e)&&(a[Jf]=a[Jf].concat(r.modifiers[Jf]),a[LP]=r.modifiers[LP],a[FP]=r.modifiers[FP],a[MP]=r.modifiers[MP]),a}var Fre=A.createContext(void 0);function ZRe(e){var t=$a(),r=wR(),n=bR(),a=XRe(t,r,n),i=VRe(t.modifiers),o=nn(nn({},a),i);return c(Fre.Provider,{value:o,children:e.children})}function Lre(){var e=A.useContext(Fre);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function JRe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function QRe(e){return!!(e&&typeof e=="object"&&"from"in e)}function eMe(e){return!!(e&&typeof e=="object"&&"after"in e)}function tMe(e){return!!(e&&typeof e=="object"&&"before"in e)}function rMe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function nMe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=zu(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=zu(e,n)>=0&&zu(a,e)>=0;return o}return a?sl(a,e):n?sl(n,e):!1}function aMe(e){return kD(e)}function iMe(e){return Array.isArray(e)&&e.every(kD)}function oMe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(aMe(r))return sl(e,r);if(iMe(r))return r.includes(e);if(QRe(r))return nMe(e,r);if(rMe(r))return r.dayOfWeek.includes(e.getDay());if(JRe(r)){var n=zu(r.before,e),a=zu(r.after,e),i=n>0,o=a<0,s=u6(r.before,r.after);return s?o&&i:i||o}return eMe(r)?zu(e,r.after)>0:tMe(r)?zu(r.before,e)>0:typeof r=="function"?r(e):!1})}function SR(e,t,r){var n=Object.keys(t).reduce(function(i,o){var s=t[o];return oMe(e,s)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!N4(e,r)&&(a.outside=!0),a}function sMe(e,t){for(var r=Uo(e[0]),n=dm(e[e.length-1]),a,i,o=r;o<=n;){var s=SR(o,t),l=!s.disabled&&!s.hidden;if(!l){o=Fa(o,1);continue}if(s.selected)return o;s.today&&!i&&(i=o),a||(a=o),o=Fa(o,1)}return i||a}var lMe=365;function jre(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,s=o===void 0?{count:0,lastFocused:e}:o,l=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:Fa,week:x1,month:pl,year:B0e,startOfWeek:function(y){return a.ISOWeek?wh(y):ss(y,{locale:f,weekStartsOn:l})},endOfWeek:function(y){return a.ISOWeek?bY(y):D0(y,{locale:f,weekStartsOn:l})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=U0e([u,m]):n==="after"&&d&&(m=q0e([d,m]));var x=!0;if(i){var g=SR(m,i);x=!g.disabled&&!g.hidden}return x?m:s.count>lMe?s.lastFocused:jre(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:nn(nn({},s),{count:s.count+1})})}var $re=A.createContext(void 0);function cMe(e){var t=Qw(),r=Lre(),n=A.useState(),a=n[0],i=n[1],o=A.useState(),s=o[0],l=o[1],u=sMe(t.displayMonths,r),d=a??(s&&t.isDateDisplayed(s))?s:u,f=function(){l(a),i(void 0)},h=function(y){i(y)},m=$a(),x=function(y,_){if(a){var b=jre(a,{moveBy:y,direction:_,context:m,modifiers:r});sl(a,b)||(t.goToDate(b,a),h(b))}},g={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return c($re.Provider,{value:g,children:e.children})}function AR(){var e=A.useContext($re);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function uMe(e,t){var r=Lre(),n=SR(e,r,t);return n}var NR=A.createContext(void 0);function dMe(e){if(!I3(e.initialProps)){var t={selected:void 0};return c(NR.Provider,{value:t,children:e.children})}return c(fMe,{initialProps:e.initialProps,children:e.children})}function fMe(e){var t=e.initialProps,r=e.children,n=function(i,o,s){var l,u,d;if((l=t.onDayClick)===null||l===void 0||l.call(t,i,o,s),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,s);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,s)},a={selected:t.selected,onDayClick:n};return c(NR.Provider,{value:a,children:r})}function Bre(){var e=A.useContext(NR);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function hMe(e,t){var r=$a(),n=Bre(),a=wR(),i=bR(),o=AR(),s=o.focusDayAfter,l=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,x=o.focusMonthAfter,g=o.focusYearBefore,y=o.focusYearAfter,_=o.focusStartOfWeek,b=o.focusEndOfWeek,S=function(q){var Y,U,G,J;I3(r)?(Y=n.onDayClick)===null||Y===void 0||Y.call(n,e,t,q):Zw(r)?(U=a.onDayClick)===null||U===void 0||U.call(a,e,t,q):Jw(r)?(G=i.onDayClick)===null||G===void 0||G.call(i,e,t,q):(J=r.onDayClick)===null||J===void 0||J.call(r,e,t,q)},C=function(q){var Y;h(e),(Y=r.onDayFocus)===null||Y===void 0||Y.call(r,e,t,q)},E=function(q){var Y;f(),(Y=r.onDayBlur)===null||Y===void 0||Y.call(r,e,t,q)},O=function(q){var Y;(Y=r.onDayMouseEnter)===null||Y===void 0||Y.call(r,e,t,q)},T=function(q){var Y;(Y=r.onDayMouseLeave)===null||Y===void 0||Y.call(r,e,t,q)},M=function(q){var Y;(Y=r.onDayPointerEnter)===null||Y===void 0||Y.call(r,e,t,q)},L=function(q){var Y;(Y=r.onDayPointerLeave)===null||Y===void 0||Y.call(r,e,t,q)},z=function(q){var Y;(Y=r.onDayTouchCancel)===null||Y===void 0||Y.call(r,e,t,q)},P=function(q){var Y;(Y=r.onDayTouchEnd)===null||Y===void 0||Y.call(r,e,t,q)},R=function(q){var Y;(Y=r.onDayTouchMove)===null||Y===void 0||Y.call(r,e,t,q)},j=function(q){var Y;(Y=r.onDayTouchStart)===null||Y===void 0||Y.call(r,e,t,q)},V=function(q){var Y;(Y=r.onDayKeyUp)===null||Y===void 0||Y.call(r,e,t,q)},Z=function(q){var Y;switch(q.key){case"ArrowLeft":q.preventDefault(),q.stopPropagation(),r.dir==="rtl"?s():l();break;case"ArrowRight":q.preventDefault(),q.stopPropagation(),r.dir==="rtl"?l():s();break;case"ArrowDown":q.preventDefault(),q.stopPropagation(),u();break;case"ArrowUp":q.preventDefault(),q.stopPropagation(),d();break;case"PageUp":q.preventDefault(),q.stopPropagation(),q.shiftKey?g():m();break;case"PageDown":q.preventDefault(),q.stopPropagation(),q.shiftKey?y():x();break;case"Home":q.preventDefault(),q.stopPropagation(),_();break;case"End":q.preventDefault(),q.stopPropagation(),b();break}(Y=r.onDayKeyDown)===null||Y===void 0||Y.call(r,e,t,q)},te={onClick:S,onFocus:C,onBlur:E,onKeyDown:Z,onKeyUp:V,onMouseEnter:O,onMouseLeave:T,onPointerEnter:M,onPointerLeave:L,onTouchCancel:z,onTouchEnd:P,onTouchMove:R,onTouchStart:j};return te}function pMe(){var e=$a(),t=Bre(),r=wR(),n=bR(),a=I3(e)?t.selected:Zw(e)?r.selected:Jw(e)?n.selected:void 0;return a}function mMe(e){return Object.values(ad).includes(e)}function gMe(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(mMe(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function vMe(e,t){var r=nn({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=nn(nn({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function yMe(e,t,r){var n,a,i,o=$a(),s=AR(),l=uMe(e,t),u=hMe(e,l),d=pMe(),f=!!(o.onDayClick||o.mode!=="default");A.useEffect(function(){var O;l.outside||s.focusedDay&&f&&sl(s.focusedDay,e)&&((O=r.current)===null||O===void 0||O.focus())},[s.focusedDay,e,r,f,l.outside]);var h=gMe(o,l).join(" "),m=vMe(o,l),x=!!(l.outside&&!o.showOutsideDays||l.hidden),g=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:$Re,y=c(g,{date:e,displayMonth:t,activeModifiers:l}),_={style:m,className:h,children:y,role:"gridcell"},b=s.focusTarget&&sl(s.focusTarget,e)&&!l.outside,S=s.focusedDay&&sl(s.focusedDay,e),C=nn(nn(nn({},_),(n={disabled:l.disabled,role:"gridcell"},n["aria-selected"]=l.selected,n.tabIndex=S||b?0:-1,n)),u),E={isButton:f,isHidden:x,activeModifiers:l,selectedDays:d,buttonProps:C,divProps:_};return E}function xMe(e){var t=A.useRef(null),r=yMe(e.date,e.displayMonth,t);return r.isHidden?c("div",{role:"gridcell"}):r.isButton?c(IS,nn({name:"day",ref:t},r.buttonProps)):c("div",nn({},r.divProps))}function wMe(e){var t=e.number,r=e.dates,n=$a(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,s=n.locale,l=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:s});if(!a)return c("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=l(Number(t),{locale:s}),h=function(m){a(t,r,m)};return c(IS,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function _Me(e){var t,r,n=$a(),a=n.styles,i=n.classNames,o=n.showWeekNumber,s=n.components,l=(t=s==null?void 0:s.Day)!==null&&t!==void 0?t:xMe,u=(r=s==null?void 0:s.WeekNumber)!==null&&r!==void 0?r:wMe,d;return o&&(d=c("td",{className:i.cell,style:a.cell,children:c(u,{number:e.weekNumber,dates:e.dates})})),w("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return c("td",{className:i.cell,style:a.cell,role:"presentation",children:c(l,{displayMonth:e.displayMonth,date:f})},Wge(f))})]})}function jz(e,t,r){for(var n=r!=null&&r.ISOWeek?bY(t):D0(t,r),a=r!=null&&r.ISOWeek?wh(e):ss(e,r),i=zu(n,a),o=[],s=0;s<=i;s++)o.push(Fa(a,s));var l=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?ED(d):PD(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return l}function bMe(e,t){var r=jz(Uo(e),dm(e),t);if(t!=null&&t.useFixedWeeks){var n=Hge(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=x1(i,6-n),s=jz(x1(i,1),o,t);r.push.apply(r,s)}}return r}function SMe(e){var t,r,n,a=$a(),i=a.locale,o=a.classNames,s=a.styles,l=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,x=bMe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),g=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:jRe,y=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:_Me,_=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:MRe;return w("table",{id:e.id,className:o.table,style:s.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&c(g,{}),c("tbody",{className:o.tbody,style:s.tbody,children:x.map(function(b){return c(y,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),c(_,{displayMonth:e.displayMonth})]})}function AMe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var NMe=AMe()?A.useLayoutEffect:A.useEffect,jP=!1,kMe=0;function $z(){return"react-day-picker-".concat(++kMe)}function EMe(e){var t,r=e??(jP?$z():null),n=A.useState(r),a=n[0],i=n[1];return NMe(function(){a===null&&i($z())},[]),A.useEffect(function(){jP===!1&&(jP=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function CMe(e){var t,r,n=$a(),a=n.dir,i=n.classNames,o=n.styles,s=n.components,l=Qw().displayMonths,u=EMe(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,x=e.displayIndex===l.length-1,g=!m&&!x;a==="rtl"&&(t=[m,x],x=t[0],m=t[1]),m&&(f.push(i.caption_start),h=nn(nn({},h),o.caption_start)),x&&(f.push(i.caption_end),h=nn(nn({},h),o.caption_end)),g&&(f.push(i.caption_between),h=nn(nn({},h),o.caption_between));var y=(r=s==null?void 0:s.Caption)!==null&&r!==void 0?r:RRe;return w("div",{className:f.join(" "),style:h,children:[c(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),c(SMe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function PMe(e){var t=$a(),r=t.classNames,n=t.styles;return c("div",{className:r.months,style:n.months,children:e.children})}function TMe(e){var t,r,n=e.initialProps,a=$a(),i=AR(),o=Qw(),s=A.useState(!1),l=s[0],u=s[1];A.useEffect(function(){a.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,l,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=nn(nn({},a.styles.root),a.style),h=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,g){var y;return nn(nn({},x),(y={},y[g]=n[g],y))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:PMe;return c("div",nn({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:c(m,{children:o.displayMonths.map(function(x,g){return c(CMe,{displayIndex:g,displayMonth:x},g)})})}))}function OMe(e){var t=e.children,r=tRe(e,["children"]);return c(wRe,{initialProps:r,children:c(TRe,{children:c(dMe,{initialProps:r,children:c(BRe,{initialProps:r,children:c(zRe,{initialProps:r,children:c(ZRe,{children:c(cMe,{children:t})})})})})})})}function DMe(e){return c(OMe,nn({},e,{children:c(TMe,{initialProps:e})}))}function ym({className:e,classNames:t,showOutsideDays:r=!0,...n}){return c(DMe,{showOutsideDays:r,className:Rt("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Rt(ax({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Rt(ax({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>c(i4,{className:"h-4 w-4"}),IconRight:({...a})=>c(im,{className:"h-4 w-4"})},...n})}ym.displayName="Calendar";const IMe=je.object({type:je.string().min(1,"Treatment type is required"),description:je.string().min(1,"Description is required"),status:je.enum(["pending","completed","cancelled"]),cost:je.string().min(1,"Cost is required").refine(e=>!isNaN(parseFloat(e)),"Cost must be a valid number").refine(e=>parseFloat(e)>=0,"Cost must be a non-negative number"),estimated_duration:je.string().optional().nullable().transform(e=>e===""?null:e),priority:je.enum(["low","medium","high"]),plan_id:je.string().min(1),scheduled_date:je.string().optional().nullable().transform(e=>e===""?null:e),time_gap:je.string().optional().nullable().transform(e=>e===""?null:e)});function Bz({open:e,onOpenChange:t,onSubmit:r,planId:n,loading:a=!1,initialData:i,isEditMode:o=!1}){const s=dd({resolver:fd(IMe),defaultValues:{type:"",description:"",status:"pending",cost:"0",estimated_duration:"",priority:"medium",plan_id:n,scheduled_date:null,time_gap:null}});tt.useEffect(()=>{if(n&&!o&&s.setValue("plan_id",n),o&&i){const u=i.priority,f=["low","medium","high"].includes(u||"")?u:"medium";s.reset({type:i.type||"",description:i.procedures||i.description||"",status:i.status||"pending",cost:i.cost!==void 0&&i.cost!==null?String(i.cost):"0",estimated_duration:i.estimated_duration||null,priority:f,plan_id:i.treatment_plan_id||n,scheduled_date:i.scheduled_date?Ut(zr(i.scheduled_date),"yyyy-MM-dd"):null,time_gap:i.time_gap||null})}else o||s.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null})},[n,i,o,s]);const l=async u=>{await r(u),o||s.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null})};return c(ja,{open:e,onOpenChange:u=>{u||o||s.reset({type:"",description:"",status:"pending",cost:"0",estimated_duration:null,priority:"medium",plan_id:n,scheduled_date:null,time_gap:null}),t(u)},children:w(Pa,{className:"max-w-lg overflow-y-auto max-h-[90vh]",children:[" ",w(Ta,{children:[c(Oa,{children:o?"Edit Treatment Details":"Add New Treatment"}),c(Yi,{children:o?"Update the details of this treatment or visit.":"Add a treatment procedure to the plan."})]}),c(Rh,{...s,children:w("form",{onSubmit:s.handleSubmit(l),className:"space-y-4 py-2 pr-2",children:[c(He,{control:s.control,name:"type",render:({field:u})=>w(De,{children:[c(Oe,{children:"Treatment Type / Title *"}),c(Me,{children:c(ct,{placeholder:"e.g., Root Canal, Filling, Visit 1",...u})}),c(Xe,{})]})}),c(He,{control:s.control,name:"description",render:({field:u})=>w(De,{children:[c(Oe,{children:"Description / Procedures *"}),c(Me,{children:c(Qr,{placeholder:"Detailed description of the treatment or procedures",...u,rows:3})}),c(Xe,{})]})}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(zp,{name:"cost",control:s.control,render:({field:u,fieldState:{error:d}})=>w(De,{children:[c(Oe,{children:"Cost () *"}),c(Me,{children:c(ct,{type:"text",inputMode:"decimal",placeholder:"0.00",ref:u.ref,name:u.name,onBlur:u.onBlur,value:u.value===null||u.value===void 0?"":String(u.value),onChange:f=>u.onChange(f.target.value),"aria-invalid":!!d})}),d&&c(Xe,{children:d.message})]})}),c(He,{control:s.control,name:"estimated_duration",render:({field:u})=>w(De,{children:[c(Oe,{children:"Estimated Duration"}),c(Me,{children:c(ct,{type:"text",placeholder:"e.g., 30 minutes, 1 hour",...u,value:u.value??""})}),c(Xe,{})]})})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(He,{control:s.control,name:"scheduled_date",render:({field:u})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Scheduled Date"}),w(dg,{children:[c(fg,{asChild:!0,children:c(Me,{children:w(Fe,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!u.value&&"text-muted-foreground"}`,children:[u.value?Ut(zr(u.value),"PPP"):c("span",{children:"Pick a date"}),c(H8,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{mode:"single",selected:u.value?zr(u.value):void 0,onSelect:d=>u.onChange(d?Ut(d,"yyyy-MM-dd"):null),disabled:d=>d<new Date("1900-01-01"),initialFocus:!0})})]}),c(Xe,{})]})}),c(He,{control:s.control,name:"time_gap",render:({field:u})=>w(De,{children:[c(Oe,{children:"Next Visit In (Time Gap)"}),c(Me,{children:c(ct,{placeholder:"e.g., 7 days, 2 weeks",...u,value:u.value??""})}),c(Xe,{})]})})]}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c(He,{control:s.control,name:"status",render:({field:u})=>w(De,{children:[c(Oe,{children:"Status"}),w(Wr,{onValueChange:u.onChange,value:u.value||"pending",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select status"})})}),w(Ur,{children:[c(wt,{value:"pending",children:"Pending"}),c(wt,{value:"completed",children:"Completed"}),c(wt,{value:"cancelled",children:"Cancelled"})]})]}),c(Xe,{})]})}),c(He,{control:s.control,name:"priority",render:({field:u})=>w(De,{children:[c(Oe,{children:"Priority"}),w(Wr,{onValueChange:u.onChange,value:u.value||"medium",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select priority"})})}),w(Ur,{children:[c(wt,{value:"low",children:"Low"}),c(wt,{value:"medium",children:"Medium"}),c(wt,{value:"high",children:"High"})]})]}),c(Xe,{})]})})]}),w(Qi,{className:"pt-4",children:[" ",c(Fe,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),w(Fe,{type:"submit",disabled:a||s.formState.isSubmitting,children:[a||s.formState.isSubmitting?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):o?null:c(Qc,{className:"mr-2 h-4 w-4"}),o?"Save Changes":"Add Treatment"]})]})]})})]})})}var Ure="AlertDialog",[RMe,zJe]=eo(Ure,[uee]),Mh=uee(),qre=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mh(t);return c(kee,{...n,...r,modal:!0})};qre.displayName=Ure;var MMe="AlertDialogTrigger",zre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mh(r);return c(Eee,{...a,...n,ref:t})});zre.displayName=MMe;var FMe="AlertDialogPortal",Wre=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mh(t);return c(Cee,{...n,...r})};Wre.displayName=FMe;var LMe="AlertDialogOverlay",Vre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mh(r);return c(KI,{...a,...n,ref:t})});Vre.displayName=LMe;var i1="AlertDialogContent",[jMe,$Me]=RMe(i1),BMe=rG("AlertDialogContent"),Hre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Mh(r),o=A.useRef(null),s=Hr(t,o),l=A.useRef(null);return c(gOe,{contentName:i1,titleName:Gre,docsSlug:"alert-dialog",children:c(jMe,{scope:r,cancelRef:l,children:w(YI,{role:"alertdialog",...i,...a,ref:s,onOpenAutoFocus:Wt(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c(BMe,{children:n}),c(qMe,{contentRef:o})]})})})});Hre.displayName=i1;var Gre="AlertDialogTitle",Kre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mh(r);return c(XI,{...a,...n,ref:t})});Kre.displayName=Gre;var Yre="AlertDialogDescription",Xre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mh(r);return c(ZI,{...a,...n,ref:t})});Xre.displayName=Yre;var UMe="AlertDialogAction",Zre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mh(r);return c(y3,{...a,...n,ref:t})});Zre.displayName=UMe;var Jre="AlertDialogCancel",Qre=A.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=$Me(Jre,r),i=Mh(r),o=Hr(t,a);return c(y3,{...i,...n,ref:o})});Qre.displayName=Jre;var qMe=({contentRef:e})=>{const t=`\`${i1}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${i1}\` by passing a \`${Yre}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${i1}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return A.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},zMe=qre,WMe=zre,VMe=Wre,ene=Vre,tne=Hre,rne=Zre,nne=Qre,ane=Kre,ine=Xre;const Uz=zMe,qz=WMe,HMe=VMe,one=A.forwardRef(({className:e,...t},r)=>c(ene,{className:Rt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));one.displayName=ene.displayName;const KO=A.forwardRef(({className:e,...t},r)=>w(HMe,{children:[c(one,{}),c(tne,{ref:r,className:Rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));KO.displayName=tne.displayName;const YO=({className:e,...t})=>c("div",{className:Rt("flex flex-col space-y-2 text-center sm:text-left",e),...t});YO.displayName="AlertDialogHeader";const XO=({className:e,...t})=>c("div",{className:Rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});XO.displayName="AlertDialogFooter";const ZO=A.forwardRef(({className:e,...t},r)=>c(ane,{ref:r,className:Rt("text-lg font-semibold",e),...t}));ZO.displayName=ane.displayName;const JO=A.forwardRef(({className:e,...t},r)=>c(ine,{ref:r,className:Rt("text-sm text-muted-foreground",e),...t}));JO.displayName=ine.displayName;const QO=A.forwardRef(({className:e,...t},r)=>c(rne,{ref:r,className:Rt(ax(),e),...t}));QO.displayName=rne.displayName;const e8=A.forwardRef(({className:e,...t},r)=>c(nne,{ref:r,className:Rt(ax({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));e8.displayName=nne.displayName;function GMe({treatment:e,onStatusChange:t,onDelete:r,onEdit:n,loading:a=!1}){const[i,o]=A.useState(!1),[s,l]=A.useState("N/A");A.useEffect(()=>{let y=null;const _=()=>{const b=e.actual_start_time?new Date(e.actual_start_time):null,S=e.actual_end_time?new Date(e.actual_end_time):null;if(S&&b)y&&clearInterval(y),l(kY(S,b));else if(b){const E=wY(new Date,b),O=Math.floor(E/3600),T=Math.floor(E%3600/60),M=E%60;l(`${String(O).padStart(2,"0")}:${String(T).padStart(2,"0")}:${String(M).padStart(2,"0")}`)}else l(u(e.estimated_duration)),y&&clearInterval(y)};return _(),e.actual_start_time&&!e.actual_end_time&&(y=setInterval(_,1e3)),()=>{y&&clearInterval(y)}},[e.actual_start_time,e.actual_end_time,e.estimated_duration]);const u=y=>{if(console.log("Received intervalValue:",y,"Type:",typeof y),!y)return"N/A";if(typeof y=="object"&&y!==null){const{days:_=0,hours:b=0,minutes:S=0,seconds:C=0}=y;let E="";return _>0&&(E+=`${_} day${_>1?"s":""} `),b>0&&(E+=`${b} hour${b>1?"s":""} `),S>0&&(E+=`${S} minute${S>1?"s":""} `),E.trim()||"N/A"}if(typeof y=="string")try{if(typeof y=="string"&&/^\d{2}:\d{2}:\d{2}$/.test(y)){const _=y.split(":").map(Number),b=_[0]||0,S=_[1]||0,C=_[2]||0;if(isNaN(b)||isNaN(S)||isNaN(C))return console.warn(`Could not parse HH:MM:SS interval: ${y}`),y;let E="";return b>0&&(E+=`${b} hour${b>1?"s":""} `),S>0&&(E+=`${S} minute${S>1?"s":""} `),C>0&&b===0&&S===0&&(E+=`${C} second${C>1?"s":""}`),E.trim()||"N/A"}return y}catch(_){return console.error("Error parsing interval string:",y,_),y}return console.warn("Unexpected interval value type:",typeof y,y),"Invalid Duration"},d=y=>{let _="bg-gray-100 text-gray-800";switch(y){case"pending":_="bg-purple-100 text-purple-800";break;case"completed":_="bg-green-100 text-green-800";break;case"cancelled":_="bg-red-100 text-red-800";break}return c("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${_}`,children:y.replace("_"," ")})},f=y=>{let _="bg-gray-100 text-gray-800";switch(y){case"low":_="bg-green-100 text-green-800";break;case"medium":_="bg-yellow-100 text-yellow-800";break;case"high":_="bg-red-100 text-red-800";break}return c("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${_}`,children:y})};if(!e)return c("div",{className:"text-center text-sm text-gray-500 py-4",children:"No treatment data."});const h=String(e.cost||"0"),m=parseFloat(h),x=isNaN(m)?0:m,g=e.scheduled_date||e.estimatedVisitDate;return w("div",{className:"bg-white shadow-md rounded-lg mb-3 transition-all hover:shadow-lg",children:[w("div",{className:"px-5 py-4",children:[w("div",{className:"flex justify-between items-start mb-2",children:[w("div",{children:[c("h4",{className:"font-semibold text-md text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:e.type}),c("p",{className:"text-sm text-gray-600 mt-0.5",children:e.description})]}),w("div",{className:"flex items-center space-x-2 shrink-0 ml-4",children:[d(e.status),e.priority&&f(e.priority),c(Fe,{variant:"ghost",size:"icon",onClick:n,disabled:a,className:"h-7 w-7 text-gray-500 hover:text-blue-600",title:"Edit Treatment",children:c(Ece,{className:"h-4 w-4"})})]})]}),w("div",{className:"flex items-center text-xs text-gray-500 mt-3 pt-3 border-t border-gray-200",children:[g&&w(_r,{children:[c(Hi,{className:"mr-1.5 h-3.5 w-3.5 text-gray-400"}),c("span",{className:"font-medium",children:"Visit Date:"}),c("span",{className:"ml-1",children:g}),c("span",{className:"mx-2 text-gray-300",children:"|"})," "]}),c(ls,{className:"mr-1.5 h-3.5 w-3.5 text-gray-400"}),c("span",{className:"font-medium",children:"Duration:"}),c("span",{className:"ml-1",children:s}),e.time_gap&&w(_r,{children:[c("span",{className:"mx-2 text-gray-300",children:"|"}),c("span",{className:"font-medium",children:"Next visit in:"}),c("span",{className:"ml-1",children:e.time_gap})]})]})]}),c("div",{className:"bg-gray-50 px-5 py-3 border-t border-gray-200",children:w("div",{className:"flex items-center justify-between",children:[w("div",{className:"text-sm font-medium text-gray-700",children:["Cost: ",c("span",{className:"text-gray-900",children:Hv(x,"USD")})]}),w("div",{className:"flex items-center space-x-2",children:[e.status==="pending"&&w(_r,{children:[w(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Mark this treatment as completed",onClick:()=>t(e.id,"completed"),disabled:a||i,children:[a&&!i?c(Bn,{className:"h-3 w-3 mr-1.5 animate-spin"}):c(g1,{className:"h-3 w-3 mr-1.5"}),"Mark Complete"]}),w(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Cancel this treatment",onClick:()=>t(e.id,"cancelled"),disabled:a||i,children:[a&&!i?c(Bn,{className:"h-3 w-3 mr-1.5 animate-spin"}):c(gh,{className:"h-3 w-3 mr-1.5"}),"Cancel"]})]}),(e.status==="completed"||e.status==="cancelled")&&w(Fe,{variant:"outline",size:"sm",className:"text-xs",title:"Reopen this treatment (set to pending)",onClick:()=>t(e.id,"pending"),disabled:a||i,children:[a&&!i?c(Bn,{className:"h-3 w-3 mr-1.5 animate-spin"}):c(Pce,{className:"h-3 w-3 mr-1.5"}),"Reopen"]})]})]})})]})}const zz="#0060df",KMe="#22c55e",Wz="#e0e0e0",Vz="#ffffff",YMe=({steps:e,currentStepId:t,completedStepIds:r})=>{const n=(a,i)=>{const o=i===e.length-1,s=t==="completed";return r.includes(a)?s&&o?"finalComplete":"completed":a===t?s&&o?"finalComplete":"current":"pending"};return w("div",{className:"flex items-start w-full px-2 py-4 bg-white rounded-lg shadow-sm overflow-x-auto",children:[" ",e.map((a,i)=>{const o=n(a.id,i),s=i===e.length-1,l=o==="completed",u=o==="current",d=o==="finalComplete",f=d?KMe:l||u?zz:Wz;return w(tt.Fragment,{children:[w("div",{className:"flex flex-col items-center min-w-[100px] px-1",children:[" ",c("div",{className:"flex items-center justify-center w-6 h-6 rounded-full transition-colors duration-500 mb-1",style:{backgroundColor:f},children:l||d?w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:Vz,className:"w-4 h-4",children:[" ",c("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})]}):u?w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:Vz,className:"w-4 h-4",children:[" ",c("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})]}):c("div",{className:"w-2 h-2 bg-gray-400 rounded-sm"})}),w("div",{className:"text-center",children:[w("div",{className:`text-xs font-medium ${l||u||d?"text-gray-700":"text-gray-400"}`,children:[" ",a.title]}),a.description&&c("div",{className:"text-[10px] text-gray-400",children:a.description})]})]}),!s&&w("div",{className:"flex-1 h-1 mx-1 relative transition-colors duration-500",style:{backgroundColor:Wz},children:[" ",c("div",{className:"absolute top-0 left-0 h-full transition-all duration-1000 ease-out",style:{width:l?"100%":"0%",backgroundColor:zz}})]})]},a.id)})]})};function wa(e){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(e)}var Ms=Uint8Array,pc=Uint16Array,kR=Int32Array,R3=new Ms([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M3=new Ms([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),t8=new Ms([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sne=function(e,t){for(var r=new pc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new kR(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},lne=sne(R3,2),cne=lne.b,r8=lne.r;cne[28]=258,r8[258]=28;var une=sne(M3,0),XMe=une.b,Hz=une.r,n8=new pc(32768);for(var Ja=0;Ja<32768;++Ja){var Dp=(Ja&43690)>>1|(Ja&21845)<<1;Dp=(Dp&52428)>>2|(Dp&13107)<<2,Dp=(Dp&61680)>>4|(Dp&3855)<<4,n8[Ja]=((Dp&65280)>>8|(Dp&255)<<8)>>1}var nf=function(e,t,r){for(var n=e.length,a=0,i=new pc(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new pc(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var s;if(r){s=new pc(1<<t);var l=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=o[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)s[n8[f]>>l]=u}else for(s=new pc(n),a=0;a<n;++a)e[a]&&(s[a]=n8[o[e[a]-1]++]>>15-e[a]);return s},xm=new Ms(288);for(var Ja=0;Ja<144;++Ja)xm[Ja]=8;for(var Ja=144;Ja<256;++Ja)xm[Ja]=9;for(var Ja=256;Ja<280;++Ja)xm[Ja]=7;for(var Ja=280;Ja<288;++Ja)xm[Ja]=8;var lw=new Ms(32);for(var Ja=0;Ja<32;++Ja)lw[Ja]=5;var ZMe=nf(xm,9,0),JMe=nf(xm,9,1),QMe=nf(lw,5,0),e7e=nf(lw,5,1),$P=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Du=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},BP=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},ER=function(e){return(e+7)/8|0},dne=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Ms(e.subarray(t,r))},t7e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fu=function(e,t,r){var n=new Error(t||t7e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Fu),!r)throw n;return n},r7e=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new Ms(0);var o=!r,s=o||t.i!=2,l=t.i;o&&(r=new Ms(a*3));var u=function(de){var re=r.length;if(de>re){var ke=new Ms(Math.max(re*2,de));ke.set(r),r=ke}},d=t.f||0,f=t.p||0,h=t.b||0,m=t.l,x=t.d,g=t.m,y=t.n,_=a*8;do{if(!m){d=Du(e,f,1);var b=Du(e,f+1,3);if(f+=3,b)if(b==1)m=JMe,x=e7e,g=9,y=5;else if(b==2){var O=Du(e,f,31)+257,T=Du(e,f+10,15)+4,M=O+Du(e,f+5,31)+1;f+=14;for(var L=new Ms(M),z=new Ms(19),P=0;P<T;++P)z[t8[P]]=Du(e,f+P*3,7);f+=T*3;for(var R=$P(z),j=(1<<R)-1,V=nf(z,R,1),P=0;P<M;){var Z=V[Du(e,f,j)];f+=Z&15;var S=Z>>4;if(S<16)L[P++]=S;else{var te=0,q=0;for(S==16?(q=3+Du(e,f,3),f+=2,te=L[P-1]):S==17?(q=3+Du(e,f,7),f+=3):S==18&&(q=11+Du(e,f,127),f+=7);q--;)L[P++]=te}}var Y=L.subarray(0,O),U=L.subarray(O);g=$P(Y),y=$P(U),m=nf(Y,g,1),x=nf(U,y,1)}else Fu(1);else{var S=ER(f)+4,C=e[S-4]|e[S-3]<<8,E=S+C;if(E>a){l&&Fu(0);break}s&&u(h+C),r.set(e.subarray(S,E),h),t.b=h+=C,t.p=f=E*8,t.f=d;continue}if(f>_){l&&Fu(0);break}}s&&u(h+131072);for(var G=(1<<g)-1,J=(1<<y)-1,D=f;;D=f){var te=m[BP(e,f)&G],K=te>>4;if(f+=te&15,f>_){l&&Fu(0);break}if(te||Fu(2),K<256)r[h++]=K;else if(K==256){D=f,m=null;break}else{var Q=K-254;if(K>264){var P=K-257,ae=R3[P];Q=Du(e,f,(1<<ae)-1)+cne[P],f+=ae}var se=x[BP(e,f)&J],fe=se>>4;se||Fu(3),f+=se&15;var U=XMe[fe];if(fe>3){var ae=M3[fe];U+=BP(e,f)&(1<<ae)-1,f+=ae}if(f>_){l&&Fu(0);break}s&&u(h+131072);var ie=h+Q;if(h<U){var X=i-U,ue=Math.min(U,ie);for(X+h<0&&Fu(3);h<ue;++h)r[h]=n[X+h]}for(;h<ie;++h)r[h]=r[h-U]}}t.l=m,t.p=D,t.b=h,t.f=d,m&&(d=1,t.m=g,t.d=x,t.n=y)}while(!d);return h!=r.length&&o?dne(r,0,h):r.subarray(0,h)},Qf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},h2=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},UP=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:hne,l:0};if(a==1){var o=new Ms(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,O){return E.f-O.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};d!=a-1;)s=r[r[u].f<r[f].f?u++:f++],l=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var m=new pc(h+1),x=a8(r[d-1],m,0);if(x>t){var n=0,g=0,y=x-t,_=1<<y;for(i.sort(function(O,T){return m[T.s]-m[O.s]||O.f-T.f});n<a;++n){var b=i[n].s;if(m[b]>t)g+=_-(1<<x-m[b]),m[b]=t;else break}for(g>>=y;g>0;){var S=i[n].s;m[S]<t?g-=1<<t-m[S]++-1:++n}for(;n>=0&&g;--n){var C=i[n].s;m[C]==t&&(--m[C],++g)}x=t}return{t:new Ms(m),l:x}},a8=function(e,t,r){return e.s==-1?Math.max(a8(e.l,t,r+1),a8(e.r,t,r+1)):t[e.s]=r},Gz=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new pc(++t),n=0,a=e[0],i=1,o=function(l){r[n++]=l},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[s]}return{c:r.subarray(0,n),n:t}},p2=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},fne=function(e,t,r){var n=r.length,a=ER(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},Kz=function(e,t,r,n,a,i,o,s,l,u,d){Qf(t,d++,r),++a[256];for(var f=UP(a,15),h=f.t,m=f.l,x=UP(i,15),g=x.t,y=x.l,_=Gz(h),b=_.c,S=_.n,C=Gz(g),E=C.c,O=C.n,T=new pc(19),M=0;M<b.length;++M)++T[b[M]&31];for(var M=0;M<E.length;++M)++T[E[M]&31];for(var L=UP(T,7),z=L.t,P=L.l,R=19;R>4&&!z[t8[R-1]];--R);var j=u+5<<3,V=p2(a,xm)+p2(i,lw)+o,Z=p2(a,h)+p2(i,g)+o+14+3*R+p2(T,z)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&j<=V&&j<=Z)return fne(t,d,e.subarray(l,l+u));var te,q,Y,U;if(Qf(t,d,1+(Z<V)),d+=2,Z<V){te=nf(h,m,0),q=h,Y=nf(g,y,0),U=g;var G=nf(z,P,0);Qf(t,d,S-257),Qf(t,d+5,O-1),Qf(t,d+10,R-4),d+=14;for(var M=0;M<R;++M)Qf(t,d+3*M,z[t8[M]]);d+=3*R;for(var J=[b,E],D=0;D<2;++D)for(var K=J[D],M=0;M<K.length;++M){var Q=K[M]&31;Qf(t,d,G[Q]),d+=z[Q],Q>15&&(Qf(t,d,K[M]>>5&127),d+=K[M]>>12)}}else te=ZMe,q=xm,Y=QMe,U=lw;for(var M=0;M<s;++M){var ae=n[M];if(ae>255){var Q=ae>>18&31;h2(t,d,te[Q+257]),d+=q[Q+257],Q>7&&(Qf(t,d,ae>>23&31),d+=R3[Q]);var se=ae&31;h2(t,d,Y[se]),d+=U[se],se>3&&(h2(t,d,ae>>5&8191),d+=M3[se])}else h2(t,d,te[ae]),d+=q[ae]}return h2(t,d,te[256]),d+q[256]},n7e=new kR([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hne=new Ms(0),a7e=function(e,t,r,n,a,i){var o=i.z||e.length,s=new Ms(n+o+5*(1+Math.ceil(o/7e3))+a),l=s.subarray(n,s.length-a),u=i.l,d=(i.r||0)&7;if(t){d&&(l[0]=i.r>>3);for(var f=n7e[t-1],h=f>>13,m=f&8191,x=(1<<r)-1,g=i.p||new pc(32768),y=i.h||new pc(x+1),_=Math.ceil(r/3),b=2*_,S=function(Re){return(e[Re]^e[Re+1]<<_^e[Re+2]<<b)&x},C=new kR(25e3),E=new pc(288),O=new pc(32),T=0,M=0,L=i.i||0,z=0,P=i.w||0,R=0;L+2<o;++L){var j=S(L),V=L&32767,Z=y[j];if(g[V]=Z,y[j]=V,P<=L){var te=o-L;if((T>7e3||z>24576)&&(te>423||!u)){d=Kz(e,l,0,C,E,O,M,z,R,L-R,d),z=T=M=0,R=L;for(var q=0;q<286;++q)E[q]=0;for(var q=0;q<30;++q)O[q]=0}var Y=2,U=0,G=m,J=V-Z&32767;if(te>2&&j==S(L-J))for(var D=Math.min(h,te)-1,K=Math.min(32767,L),Q=Math.min(258,te);J<=K&&--G&&V!=Z;){if(e[L+Y]==e[L+Y-J]){for(var ae=0;ae<Q&&e[L+ae]==e[L+ae-J];++ae);if(ae>Y){if(Y=ae,U=J,ae>D)break;for(var se=Math.min(J,ae-2),fe=0,q=0;q<se;++q){var ie=L-J+q&32767,X=g[ie],ue=ie-X&32767;ue>fe&&(fe=ue,Z=ie)}}}V=Z,Z=g[V],J+=V-Z&32767}if(U){C[z++]=268435456|r8[Y]<<18|Hz[U];var de=r8[Y]&31,re=Hz[U]&31;M+=R3[de]+M3[re],++E[257+de],++O[re],P=L+Y,++T}else C[z++]=e[L],++E[e[L]]}}for(L=Math.max(L,P);L<o;++L)C[z++]=e[L],++E[e[L]];d=Kz(e,l,u,C,E,O,M,z,R,L-R,d),u||(i.r=d&7|l[d/8|0]<<3,d-=7,i.h=y,i.p=g,i.i=L,i.w=P)}else{for(var L=i.w||0;L<o+u;L+=65535){var ke=L+65535;ke>=o&&(l[d/8|0]=u,ke=o),d=fne(l,d+1,e.subarray(L,ke))}i.i=o}return dne(s,0,n+ER(d)+a)},pne=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var s=Math.min(o+2655,i);o<s;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},i7e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Ms(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return a7e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},mne=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},o7e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=pne();a.p(t.dictionary),mne(e,2,a.d())}},s7e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Fu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Fu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function i8(e,t){t||(t={});var r=pne();r.p(e);var n=i7e(e,t,t.dictionary?6:2,4);return o7e(n,t),mne(n,n.length-4,r.d()),n}function l7e(e,t){return r7e(e.subarray(s7e(e),-4),{i:2},t,t)}var c7e=typeof TextDecoder<"u"&&new TextDecoder,u7e=0;try{c7e.decode(hne,{stream:!0}),u7e=1}catch{}var Jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function qP(){Jr.console&&typeof Jr.console.log=="function"&&Jr.console.log.apply(Jr.console,arguments)}var Ea={log:qP,warn:function(e){Jr.console&&(typeof Jr.console.warn=="function"?Jr.console.warn.apply(Jr.console,arguments):qP.call(null,arguments))},error:function(e){Jr.console&&(typeof Jr.console.error=="function"?Jr.console.error.apply(Jr.console,arguments):qP(e))}};function zP(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){k0(n.response,t,r)},n.onerror=function(){Ea.error("could not download file")},n.send()}function Yz(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function _b(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var W2,o8,k0=Jr.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==Jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Jr.URL||Jr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?Yz(a.href)?zP(e,t,r):_b(a,a.target="_blank"):_b(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){_b(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Yz(e))zP(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){_b(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:wa(i)!=="object"&&(Ea.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return zP(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Jr.HTMLElement)||Jr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var d=s.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},s.readAsDataURL(e)}else{var l=Jr.URL||Jr.webkitURL,u=l.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function gne(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return s.length==1&&(s="0"+s),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+s+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function WP(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=_s(r,n,a,i,t[0],7,-680876936),i=_s(i,r,n,a,t[1],12,-389564586),a=_s(a,i,r,n,t[2],17,606105819),n=_s(n,a,i,r,t[3],22,-1044525330),r=_s(r,n,a,i,t[4],7,-176418897),i=_s(i,r,n,a,t[5],12,1200080426),a=_s(a,i,r,n,t[6],17,-1473231341),n=_s(n,a,i,r,t[7],22,-45705983),r=_s(r,n,a,i,t[8],7,1770035416),i=_s(i,r,n,a,t[9],12,-1958414417),a=_s(a,i,r,n,t[10],17,-42063),n=_s(n,a,i,r,t[11],22,-1990404162),r=_s(r,n,a,i,t[12],7,1804603682),i=_s(i,r,n,a,t[13],12,-40341101),a=_s(a,i,r,n,t[14],17,-1502002290),r=bs(r,n=_s(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=bs(i,r,n,a,t[6],9,-1069501632),a=bs(a,i,r,n,t[11],14,643717713),n=bs(n,a,i,r,t[0],20,-373897302),r=bs(r,n,a,i,t[5],5,-701558691),i=bs(i,r,n,a,t[10],9,38016083),a=bs(a,i,r,n,t[15],14,-660478335),n=bs(n,a,i,r,t[4],20,-405537848),r=bs(r,n,a,i,t[9],5,568446438),i=bs(i,r,n,a,t[14],9,-1019803690),a=bs(a,i,r,n,t[3],14,-187363961),n=bs(n,a,i,r,t[8],20,1163531501),r=bs(r,n,a,i,t[13],5,-1444681467),i=bs(i,r,n,a,t[2],9,-51403784),a=bs(a,i,r,n,t[7],14,1735328473),r=Ss(r,n=bs(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ss(i,r,n,a,t[8],11,-2022574463),a=Ss(a,i,r,n,t[11],16,1839030562),n=Ss(n,a,i,r,t[14],23,-35309556),r=Ss(r,n,a,i,t[1],4,-1530992060),i=Ss(i,r,n,a,t[4],11,1272893353),a=Ss(a,i,r,n,t[7],16,-155497632),n=Ss(n,a,i,r,t[10],23,-1094730640),r=Ss(r,n,a,i,t[13],4,681279174),i=Ss(i,r,n,a,t[0],11,-358537222),a=Ss(a,i,r,n,t[3],16,-722521979),n=Ss(n,a,i,r,t[6],23,76029189),r=Ss(r,n,a,i,t[9],4,-640364487),i=Ss(i,r,n,a,t[12],11,-421815835),a=Ss(a,i,r,n,t[15],16,530742520),r=As(r,n=Ss(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=As(i,r,n,a,t[7],10,1126891415),a=As(a,i,r,n,t[14],15,-1416354905),n=As(n,a,i,r,t[5],21,-57434055),r=As(r,n,a,i,t[12],6,1700485571),i=As(i,r,n,a,t[3],10,-1894986606),a=As(a,i,r,n,t[10],15,-1051523),n=As(n,a,i,r,t[1],21,-2054922799),r=As(r,n,a,i,t[8],6,1873313359),i=As(i,r,n,a,t[15],10,-30611744),a=As(a,i,r,n,t[6],15,-1560198380),n=As(n,a,i,r,t[13],21,1309151649),r=As(r,n,a,i,t[4],6,-145523070),i=As(i,r,n,a,t[11],10,-1120210379),a=As(a,i,r,n,t[2],15,718787259),n=As(n,a,i,r,t[9],21,-343485551),e[0]=Zp(r,e[0]),e[1]=Zp(n,e[1]),e[2]=Zp(a,e[2]),e[3]=Zp(i,e[3])}function F3(e,t,r,n,a,i){return t=Zp(Zp(t,e),Zp(n,i)),Zp(t<<a|t>>>32-a,r)}function _s(e,t,r,n,a,i,o){return F3(t&r|~t&n,e,t,a,i,o)}function bs(e,t,r,n,a,i,o){return F3(t&n|r&~n,e,t,a,i,o)}function Ss(e,t,r,n,a,i,o){return F3(t^r^n,e,t,a,i,o)}function As(e,t,r,n,a,i,o){return F3(r^(t|~n),e,t,a,i,o)}function vne(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)WP(n,d7e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(WP(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,WP(n,a),n}function d7e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}W2=Jr.atob.bind(Jr),o8=Jr.btoa.bind(Jr);var Xz="0123456789abcdef".split("");function f7e(e){for(var t="",r=0;r<4;r++)t+=Xz[e>>8*r+4&15]+Xz[e>>8*r&15];return t}function h7e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function s8(e){return vne(e).map(h7e).join("")}var p7e=function(e){for(var t=0;t<e.length;t++)e[t]=f7e(e[t]);return e.join("")}(vne("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zp(e,t){if(p7e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function l8(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),s=[],l=0;l<256;l++)s[l]=l;var u=0;for(l=0;l<256;l++){var d=s[l];u=(u+d+o.charCodeAt(l))%256,s[l]=s[u],s[u]=d}r=e,n=s}else s=n;var f=t.length,h=0,m=0,x="";for(l=0;l<f;l++)m=(m+(d=s[h=(h+1)%256]))%256,s[h]=s[m],s[m]=d,o=s[(s[h]+s[m])%256],x+=String.fromCharCode(t.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Zz={print:4,modify:8,copy:16,"annot-forms":32};function jv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(s){if(Zz.perm!==void 0)throw new Error("Invalid permission: "+s);a+=Zz[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=s8(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=l8(this.encryptionKey,this.padding)}function $v(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function Jz(e){if(wa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(s){Jr.console&&Ea.error("jsPDF PubSub Error",s.message,s)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function RS(e){if(!(this instanceof RS))return new RS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function yne(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function C0(e,t,r,n,a){if(!(this instanceof C0))return new C0(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,yne.call(this,n,a)}function Gv(e,t,r,n,a){if(!(this instanceof Gv))return new Gv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,yne.call(this,n,a)}function $r(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],s=1,l=16,u="S",d=null;wa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},m={internal:{},__private__:{}};m.__private__.PubSub=Jz;var x="1.3",g=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(B){x=B};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var _=m.__private__.getPageFormat=function(B){return y[B]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},S=b.COMPAT;function C(){this.saveGraphicsState(),ge(new xt(pt,0,0,-pt,0,Sd()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",S=b.ADVANCED}function E(){this.restoreGraphicsState(),u="S",S=b.COMPAT}var O=m.__private__.combineFontStyleAndFontWeight=function(B,ce){if(B=="bold"&&ce=="normal"||B=="bold"&&ce==400||B=="normal"&&ce=="italic"||B=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(B=ce==400||ce==="normal"?B==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||B!=="normal"?(ce==700?"bold":ce)+""+B:"bold"),B};m.advancedAPI=function(B){var ce=S===b.COMPAT;return ce&&C.call(this),typeof B!="function"||(B(this),ce&&E.call(this)),this},m.compatAPI=function(B){var ce=S===b.ADVANCED;return ce&&E.call(this),typeof B!="function"||(B(this),ce&&C.call(this)),this},m.isAdvancedAPI=function(){return S===b.ADVANCED};var T,M=function(B){if(S!==b.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=m.roundToPrecision=m.__private__.roundToPrecision=function(B,ce){var Ee=t||ce;if(isNaN(B)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ee).replace(/0+$/,"")};T=m.hpf=m.__private__.hpf=typeof l=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,l)}:l==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return L(B,16)};var z=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return L(B,2)},P=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return L(B,3)},R=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return S===b.COMPAT?B*pt:S===b.ADVANCED?B:void 0},j=function(B){return S===b.COMPAT?Sd()-B:S===b.ADVANCED?B:void 0},V=function(B){return R(j(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(t=parseInt(B,10))};var Z,te="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return te},Y=m.__private__.setFileId=function(B){return te=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(qa=new jv(d.userPermissions,d.userPassword,d.ownerPassword,te)),te};m.setFileId=function(B){return Y(B),this},m.getFileId=function(){return q()};var U=m.__private__.convertDateToPDFDate=function(B){var ce=B.getTimezoneOffset(),Ee=ce<0?"+":"-",$e=Math.floor(Math.abs(ce/60)),rt=Math.abs(ce%60),At=[Ee,Q($e),"'",Q(rt),"'"].join("");return["D:",B.getFullYear(),Q(B.getMonth()+1),Q(B.getDate()),Q(B.getHours()),Q(B.getMinutes()),Q(B.getSeconds()),At].join("")},G=m.__private__.convertPDFDateToDate=function(B){var ce=parseInt(B.substr(2,4),10),Ee=parseInt(B.substr(6,2),10)-1,$e=parseInt(B.substr(8,2),10),rt=parseInt(B.substr(10,2),10),At=parseInt(B.substr(12,2),10),Mt=parseInt(B.substr(14,2),10);return new Date(ce,Ee,$e,rt,At,Mt,0)},J=m.__private__.setCreationDate=function(B){var ce;if(B===void 0&&(B=new Date),B instanceof Date)ce=U(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=B}return Z=ce},D=m.__private__.getCreationDate=function(B){var ce=Z;return B==="jsDate"&&(ce=G(Z)),ce};m.setCreationDate=function(B){return J(B),this},m.getCreationDate=function(B){return D(B)};var K,Q=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},ae=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},se=0,fe=[],ie=[],X=0,ue=[],de=[],re=!1,ke=ie,Re=function(){se=0,X=0,ie=[],fe=[],ue=[],ye=Jt(),be=Jt()};m.__private__.setCustomOutputDestination=function(B){re=!0,ke=B};var Pe=function(B){re||(ke=B)};m.__private__.resetCustomOutputDestination=function(){re=!1,ke=ie};var ge=m.__private__.out=function(B){return B=B.toString(),X+=B.length+1,ke.push(B),ke},Ye=m.__private__.write=function(B){return ge(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Qe=m.__private__.getArrayBuffer=function(B){for(var ce=B.length,Ee=new ArrayBuffer(ce),$e=new Uint8Array(Ee);ce--;)$e[ce]=B.charCodeAt(ce);return Ee},st=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return st};var Pt=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return Pt=S===b.ADVANCED?B/pt:B,this};var ft,_e=m.__private__.getFontSize=m.getFontSize=function(){return S===b.COMPAT?Pt:Pt*pt},Te=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return Te=B,this},m.__private__.getR2L=m.getR2L=function(){return Te};var qe,yt=m.__private__.setZoomMode=function(B){var ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))ft=B;else if(isNaN(B)){if(ce.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');ft=B}else ft=parseInt(B,10)};m.__private__.getZoomMode=function(){return ft};var vt,ht=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');qe=B};m.__private__.getPageMode=function(){return qe};var Ie=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');vt=B};m.__private__.getLayoutMode=function(){return vt},m.__private__.setDisplayMode=m.setDisplayMode=function(B,ce,Ee){return yt(B),Ie(ce),ht(Ee),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(Ze).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[B]},m.__private__.getDocumentProperties=function(){return Ze},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var ce in Ze)Ze.hasOwnProperty(ce)&&B[ce]&&(Ze[ce]=B[ce]);return this},m.__private__.setDocumentProperty=function(B,ce){if(Object.keys(Ze).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[B]=ce};var _t,pt,Pr,Bt,dr,Ir={},Tr={},ha=[],Xr={},Na={},En={},pa={},si=null,Cn=0,kr=[],pn=new Jz(m),fo=e.hotfixes||[],Jn={},li={},lt=[],xt=function B(ce,Ee,$e,rt,At,Mt){if(!(this instanceof B))return new B(ce,Ee,$e,rt,At,Mt);isNaN(ce)&&(ce=1),isNaN(Ee)&&(Ee=0),isNaN($e)&&($e=0),isNaN(rt)&&(rt=1),isNaN(At)&&(At=0),isNaN(Mt)&&(Mt=0),this._matrix=[ce,Ee,$e,rt,At,Mt]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(B)},xt.prototype.multiply=function(B){var ce=B.sx*this.sx+B.shy*this.shx,Ee=B.sx*this.shy+B.shy*this.sy,$e=B.shx*this.sx+B.sy*this.shx,rt=B.shx*this.shy+B.sy*this.sy,At=B.tx*this.sx+B.ty*this.shx+this.tx,Mt=B.tx*this.shy+B.ty*this.sy+this.ty;return new xt(ce,Ee,$e,rt,At,Mt)},xt.prototype.decompose=function(){var B=this.sx,ce=this.shy,Ee=this.shx,$e=this.sy,rt=this.tx,At=this.ty,Mt=Math.sqrt(B*B+ce*ce),lr=(B/=Mt)*Ee+(ce/=Mt)*$e;Ee-=B*lr,$e-=ce*lr;var Dr=Math.sqrt(Ee*Ee+$e*$e);return lr/=Dr,B*($e/=Dr)<ce*(Ee/=Dr)&&(B=-B,ce=-ce,lr=-lr,Mt=-Mt),{scale:new xt(Mt,0,0,Dr,0,0),translate:new xt(1,0,0,1,rt,At),rotate:new xt(B,ce,-ce,B,0,0),skew:new xt(1,0,lr,1,0,0)}},xt.prototype.toString=function(B){return this.join(" ")},xt.prototype.inversed=function(){var B=this.sx,ce=this.shy,Ee=this.shx,$e=this.sy,rt=this.tx,At=this.ty,Mt=1/(B*$e-ce*Ee),lr=$e*Mt,Dr=-ce*Mt,un=-Ee*Mt,cn=B*Mt;return new xt(lr,Dr,un,cn,-lr*rt-un*At,-Dr*rt-cn*At)},xt.prototype.applyToPoint=function(B){var ce=B.x*this.sx+B.y*this.shx+this.tx,Ee=B.x*this.shy+B.y*this.sy+this.ty;return new Pc(ce,Ee)},xt.prototype.applyToRectangle=function(B){var ce=this.applyToPoint(B),Ee=this.applyToPoint(new Pc(B.x+B.w,B.y+B.h));return new bd(ce.x,ce.y,Ee.x-ce.x,Ee.y-ce.y)},xt.prototype.clone=function(){var B=this.sx,ce=this.shy,Ee=this.shx,$e=this.sy,rt=this.tx,At=this.ty;return new xt(B,ce,Ee,$e,rt,At)},m.Matrix=xt;var Fr=m.matrixMult=function(B,ce){return ce.multiply(B)},ma=new xt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ma;var bt=function(B,ce){if(!Na[B]){var Ee=(ce instanceof C0?"Sh":"P")+(Object.keys(Xr).length+1).toString(10);ce.id=Ee,Na[B]=Ee,Xr[Ee]=ce,pn.publish("addPattern",ce)}};m.ShadingPattern=C0,m.TilingPattern=Gv,m.addShadingPattern=function(B,ce){return M("addShadingPattern()"),bt(B,ce),this},m.beginTilingPattern=function(B){M("beginTilingPattern()"),Vg(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,ce){M("endTilingPattern()"),ce.stream=de[K].join(`
`),bt(B,ce),pn.publish("endTilingPattern",ce),lt.pop().restore()};var mt=m.__private__.newObject=function(){var B=Jt();return le(B,!0),B},Jt=m.__private__.newObjectDeferred=function(){return se++,fe[se]=function(){return X},se},le=function(B,ce){return ce=typeof ce=="boolean"&&ce,fe[B]=X,ce&&ge(B+" 0 obj"),B},xe=m.__private__.newAdditionalObject=function(){var B={objId:Jt(),content:""};return ue.push(B),B},ye=Jt(),be=Jt(),Ae=m.__private__.decodeColorString=function(B){var ce=B.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length===5&&(ce[4]==="k"||ce[4]==="K")&&(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var Ee=parseFloat(ce[0]);ce=[Ee,Ee,Ee,"r"]}for(var $e="#",rt=0;rt<3;rt++)$e+=("0"+Math.floor(255*parseFloat(ce[rt])).toString(16)).slice(-2);return $e},Se=m.__private__.encodeColorString=function(B){var ce;typeof B=="string"&&(B={ch1:B});var Ee=B.ch1,$e=B.ch2,rt=B.ch3,At=B.ch4,Mt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var lr=new gne(Ee);if(lr.ok)Ee=lr.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Dr=parseInt(Ee.substr(1),16);Ee=Dr>>16&255,$e=Dr>>8&255,rt=255&Dr}if($e===void 0||At===void 0&&Ee===$e&&$e===rt)if(typeof Ee=="string")ce=Ee+" "+Mt[0];else switch(B.precision){case 2:ce=z(Ee/255)+" "+Mt[0];break;case 3:default:ce=P(Ee/255)+" "+Mt[0]}else if(At===void 0||wa(At)==="object"){if(At&&!isNaN(At.a)&&At.a===0)return ce=["1.","1.","1.",Mt[1]].join(" ");if(typeof Ee=="string")ce=[Ee,$e,rt,Mt[1]].join(" ");else switch(B.precision){case 2:ce=[z(Ee/255),z($e/255),z(rt/255),Mt[1]].join(" ");break;default:case 3:ce=[P(Ee/255),P($e/255),P(rt/255),Mt[1]].join(" ")}}else if(typeof Ee=="string")ce=[Ee,$e,rt,At,Mt[2]].join(" ");else switch(B.precision){case 2:ce=[z(Ee),z($e),z(rt),z(At),Mt[2]].join(" ");break;case 3:default:ce=[P(Ee),P($e),P(rt),P(At),Mt[2]].join(" ")}return ce},Ve=m.__private__.getFilters=function(){return o},ut=m.__private__.putStream=function(B){var ce=(B=B||{}).data||"",Ee=B.filters||Ve(),$e=B.alreadyAppliedFilters||[],rt=B.addLength1||!1,At=ce.length,Mt=B.objectId,lr=function(Ao){return Ao};if(d!==null&&Mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(lr=qa.encryptor(Mt,0));var Dr={};Ee===!0&&(Ee=["FlateEncode"]);var un=B.additionalKeyValues||[],cn=(Dr=$r.API.processDataByFilters!==void 0?$r.API.processDataByFilters(ce,Ee):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray($e)?$e.join(" "):$e.toString());if(Dr.data.length!==0&&(un.push({key:"Length",value:Dr.data.length}),rt===!0&&un.push({key:"Length1",value:At})),cn.length!=0)if(cn.split("/").length-1==1)un.push({key:"Filter",value:cn});else{un.push({key:"Filter",value:"["+cn+"]"});for(var Pn=0;Pn<un.length;Pn+=1)if(un[Pn].key==="DecodeParms"){for(var za=[],ti=0;ti<Dr.reverseChain.split("/").length-1;ti+=1)za.push("null");za.push(un[Pn].value),un[Pn].value="["+za.join(" ")+"]"}}ge("<<");for(var wi=0;wi<un.length;wi++)ge("/"+un[wi].key+" "+un[wi].value);ge(">>"),Dr.data.length!==0&&(ge("stream"),ge(lr(Dr.data)),ge("endstream"))},et=m.__private__.putPage=function(B){var ce=B.number,Ee=B.data,$e=B.objId,rt=B.contentsObjId;le($e,!0),ge("<</Type /Page"),ge("/Parent "+B.rootDictionaryObjId+" 0 R"),ge("/Resources "+B.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(T(B.mediaBox.bottomLeftX))+" "+parseFloat(T(B.mediaBox.bottomLeftY))+" "+T(B.mediaBox.topRightX)+" "+T(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ge("/CropBox ["+T(B.cropBox.bottomLeftX)+" "+T(B.cropBox.bottomLeftY)+" "+T(B.cropBox.topRightX)+" "+T(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ge("/BleedBox ["+T(B.bleedBox.bottomLeftX)+" "+T(B.bleedBox.bottomLeftY)+" "+T(B.bleedBox.topRightX)+" "+T(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ge("/TrimBox ["+T(B.trimBox.bottomLeftX)+" "+T(B.trimBox.bottomLeftY)+" "+T(B.trimBox.topRightX)+" "+T(B.trimBox.topRightY)+"]"),B.artBox!==null&&ge("/ArtBox ["+T(B.artBox.bottomLeftX)+" "+T(B.artBox.bottomLeftY)+" "+T(B.artBox.topRightX)+" "+T(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ge("/UserUnit "+B.userUnit),pn.publish("putPage",{objId:$e,pageContext:kr[ce],pageNumber:ce,page:Ee}),ge("/Contents "+rt+" 0 R"),ge(">>"),ge("endobj");var At=Ee.join(`
`);return S===b.ADVANCED&&(At+=`
Q`),le(rt,!0),ut({data:At,filters:Ve(),objectId:rt}),ge("endobj"),$e},it=m.__private__.putPages=function(){var B,ce,Ee=[];for(B=1;B<=Cn;B++)kr[B].objId=Jt(),kr[B].contentsObjId=Jt();for(B=1;B<=Cn;B++)Ee.push(et({number:B,data:de[B],objId:kr[B].objId,contentsObjId:kr[B].contentsObjId,mediaBox:kr[B].mediaBox,cropBox:kr[B].cropBox,bleedBox:kr[B].bleedBox,trimBox:kr[B].trimBox,artBox:kr[B].artBox,userUnit:kr[B].userUnit,rootDictionaryObjId:ye,resourceDictionaryObjId:be}));le(ye,!0),ge("<</Type /Pages");var $e="/Kids [";for(ce=0;ce<Cn;ce++)$e+=Ee[ce]+" 0 R ";ge($e+"]"),ge("/Count "+Cn),ge(">>"),ge("endobj"),pn.publish("postPutPages")},Je=function(B){pn.publish("putFont",{font:B,out:ge,newObject:mt,putStream:ut}),B.isAlreadyPutted!==!0&&(B.objectNumber=mt(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+$v(B.postScriptName)),ge("/Subtype /Type1"),typeof B.encoding=="string"&&ge("/Encoding /"+B.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},Dt=function(){for(var B in Ir)Ir.hasOwnProperty(B)&&(f===!1||f===!0&&h.hasOwnProperty(B))&&Je(Ir[B])},Yt=function(B){B.objectNumber=mt();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[T(B.x),T(B.y),T(B.x+B.width),T(B.y+B.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ee=B.pages[1].join(`
`);ut({data:Ee,additionalKeyValues:ce,objectId:B.objectNumber}),ge("endobj")},or=function(){for(var B in Jn)Jn.hasOwnProperty(B)&&Yt(Jn[B])},qt=function(B,ce){var Ee,$e=[],rt=1/(ce-1);for(Ee=0;Ee<1;Ee+=rt)$e.push(Ee);if($e.push(1),B[0].offset!=0){var At={offset:0,color:B[0].color};B.unshift(At)}if(B[B.length-1].offset!=1){var Mt={offset:1,color:B[B.length-1].color};B.push(Mt)}for(var lr="",Dr=0,un=0;un<$e.length;un++){for(Ee=$e[un];Ee>B[Dr+1].offset;)Dr++;var cn=B[Dr].offset,Pn=(Ee-cn)/(B[Dr+1].offset-cn),za=B[Dr].color,ti=B[Dr+1].color;lr+=ae(Math.round((1-Pn)*za[0]+Pn*ti[0]).toString(16))+ae(Math.round((1-Pn)*za[1]+Pn*ti[1]).toString(16))+ae(Math.round((1-Pn)*za[2]+Pn*ti[2]).toString(16))}return lr.trim()},jt=function(B,ce){ce||(ce=21);var Ee=mt(),$e=qt(B.colors,ce),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+ce+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut({data:$e,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),ge("endobj"),B.objectNumber=mt(),ge("<< /ShadingType "+B.type),ge("/ColorSpace /DeviceRGB");var At="/Coords ["+T(parseFloat(B.coords[0]))+" "+T(parseFloat(B.coords[1]))+" ";B.type===2?At+=T(parseFloat(B.coords[2]))+" "+T(parseFloat(B.coords[3])):At+=T(parseFloat(B.coords[2]))+" "+T(parseFloat(B.coords[3]))+" "+T(parseFloat(B.coords[4]))+" "+T(parseFloat(B.coords[5])),ge(At+="]"),B.matrix&&ge("/Matrix ["+B.matrix.toString()+"]"),ge("/Function "+Ee+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},Zr=function(B,ce){var Ee=Jt(),$e=mt();ce.push({resourcesOid:Ee,objectOid:$e}),B.objectNumber=$e;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+B.boundingBox.map(T).join(" ")+"]"}),rt.push({key:"XStep",value:T(B.xStep)}),rt.push({key:"YStep",value:T(B.yStep)}),rt.push({key:"Resources",value:Ee+" 0 R"}),B.matrix&&rt.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ut({data:B.stream,additionalKeyValues:rt,objectId:B.objectNumber}),ge("endobj")},Fn=function(B){var ce;for(ce in Xr)Xr.hasOwnProperty(ce)&&(Xr[ce]instanceof C0?jt(Xr[ce]):Xr[ce]instanceof Gv&&Zr(Xr[ce],B))},Qn=function(B){for(var ce in B.objectNumber=mt(),ge("<<"),B)switch(ce){case"opacity":ge("/ca "+z(B[ce]));break;case"stroke-opacity":ge("/CA "+z(B[ce]))}ge(">>"),ge("endobj")},Ba=function(){var B;for(B in En)En.hasOwnProperty(B)&&Qn(En[B])},Wl=function(){for(var B in ge("/XObject <<"),Jn)Jn.hasOwnProperty(B)&&Jn[B].objectNumber>=0&&ge("/"+B+" "+Jn[B].objectNumber+" 0 R");pn.publish("putXobjectDict"),ge(">>")},Sc=function(){qa.oid=mt(),ge("<<"),ge("/Filter /Standard"),ge("/V "+qa.v),ge("/R "+qa.r),ge("/U <"+qa.toHexString(qa.U)+">"),ge("/O <"+qa.toHexString(qa.O)+">"),ge("/P "+qa.P),ge(">>"),ge("endobj")},Vs=function(){for(var B in ge("/Font <<"),Ir)Ir.hasOwnProperty(B)&&(f===!1||f===!0&&h.hasOwnProperty(B))&&ge("/"+B+" "+Ir[B].objectNumber+" 0 R");ge(">>")},xi=function(){if(Object.keys(Xr).length>0){for(var B in ge("/Shading <<"),Xr)Xr.hasOwnProperty(B)&&Xr[B]instanceof C0&&Xr[B].objectNumber>=0&&ge("/"+B+" "+Xr[B].objectNumber+" 0 R");pn.publish("putShadingPatternDict"),ge(">>")}},Ac=function(B){if(Object.keys(Xr).length>0){for(var ce in ge("/Pattern <<"),Xr)Xr.hasOwnProperty(ce)&&Xr[ce]instanceof m.TilingPattern&&Xr[ce].objectNumber>=0&&Xr[ce].objectNumber<B&&ge("/"+ce+" "+Xr[ce].objectNumber+" 0 R");pn.publish("putTilingPatternDict"),ge(">>")}},Ua=function(){if(Object.keys(En).length>0){var B;for(B in ge("/ExtGState <<"),En)En.hasOwnProperty(B)&&En[B].objectNumber>=0&&ge("/"+B+" "+En[B].objectNumber+" 0 R");pn.publish("putGStateDict"),ge(">>")}},ci=function(B){le(B.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vs(),xi(),Ac(B.objectOid),Ua(),Wl(),ge(">>"),ge("endobj")},$g=function(){var B=[];Dt(),Ba(),or(),Fn(B),pn.publish("putResources"),B.forEach(ci),ci({resourcesOid:be,objectOid:Number.MAX_SAFE_INTEGER}),pn.publish("postPutResources")},Bg=function(){pn.publish("putAdditionalObjects");for(var B=0;B<ue.length;B++){var ce=ue[B];le(ce.objId,!0),ge(ce.content),ge("endobj")}pn.publish("postPutAdditionalObjects")},wf=function(B){Tr[B.fontName]=Tr[B.fontName]||{},Tr[B.fontName][B.fontStyle]=B.id},md=function(B,ce,Ee,$e,rt){var At={id:"F"+(Object.keys(Ir).length+1).toString(10),postScriptName:B,fontName:ce,fontStyle:Ee,encoding:$e,isStandardFont:rt||!1,metadata:{}};return pn.publish("addFont",{font:At,instance:this}),Ir[At.id]=At,wf(At),At.id},_f=function(B){for(var ce=0,Ee=st.length;ce<Ee;ce++){var $e=md.call(this,B[ce][0],B[ce][1],B[ce][2],st[ce][3],!0);f===!1&&(h[$e]=!0);var rt=B[ce][0].split("-");wf({id:$e,fontName:rt[0],fontStyle:rt[1]||""})}pn.publish("addFonts",{fonts:Ir,dictionary:Tr})},us=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch($e){var ce=$e.stack||"";~ce.indexOf(" at ")&&(ce=ce.split(" at ")[1]);var Ee="Error in function "+ce.split(`
`)[0].split("<")[0]+": "+$e.message;if(!Jr.console)throw new Error(Ee);Jr.console.error(Ee,$e),Jr.alert&&alert(Ee)}},B.foo.bar=B,B.foo},$h=function(B,ce){var Ee,$e,rt,At,Mt,lr,Dr,un,cn;if(rt=(ce=ce||{}).sourceEncoding||"Unicode",Mt=ce.outputEncoding,(ce.autoencode||Mt)&&Ir[_t].metadata&&Ir[_t].metadata[rt]&&Ir[_t].metadata[rt].encoding&&(At=Ir[_t].metadata[rt].encoding,!Mt&&Ir[_t].encoding&&(Mt=Ir[_t].encoding),!Mt&&At.codePages&&(Mt=At.codePages[0]),typeof Mt=="string"&&(Mt=At[Mt]),Mt)){for(Dr=!1,lr=[],Ee=0,$e=B.length;Ee<$e;Ee++)(un=Mt[B.charCodeAt(Ee)])?lr.push(String.fromCharCode(un)):lr.push(B[Ee]),lr[Ee].charCodeAt(0)>>8&&(Dr=!0);B=lr.join("")}for(Ee=B.length;Dr===void 0&&Ee!==0;)B.charCodeAt(Ee-1)>>8&&(Dr=!0),Ee--;if(!Dr)return B;for(lr=ce.noBOM?[]:[254,255],Ee=0,$e=B.length;Ee<$e;Ee++){if((cn=(un=B.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lr.push(cn),lr.push(un-(cn<<8))}return String.fromCharCode.apply(void 0,lr)},ds=m.__private__.pdfEscape=m.pdfEscape=function(B,ce){return $h(B,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bf=m.__private__.beginPage=function(B){de[++Cn]=[],kr[Cn]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},gd(Cn),Pe(de[K])},Um=function(B,ce){var Ee,$e,rt;switch(r=ce||r,typeof B=="string"&&(Ee=_(B.toLowerCase()),Array.isArray(Ee)&&($e=Ee[0],rt=Ee[1])),Array.isArray(B)&&($e=B[0]*pt,rt=B[1]*pt),isNaN($e)&&($e=a[0],rt=a[1]),($e>14400||rt>14400)&&(Ea.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$e=Math.min(14400,$e),rt=Math.min(14400,rt)),a=[$e,rt],r.substr(0,1)){case"l":rt>$e&&(a=[rt,$e]);break;case"p":$e>rt&&(a=[rt,$e])}bf(a),Ef(Vm),ge(fs),Gm!==0&&ge(Gm+" J"),Pf!==0&&ge(Pf+" j"),pn.publish("addPage",{pageNumber:Cn})},qm=function(B){B>0&&B<=Cn&&(de.splice(B,1),kr.splice(B,1),Cn--,K>Cn&&(K=Cn),this.setPage(K))},gd=function(B){B>0&&B<=Cn&&(K=B)},Ey=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return de.length-1},Bh=function(B,ce,Ee){var $e,rt=void 0;return Ee=Ee||{},B=B!==void 0?B:Ir[_t].fontName,ce=ce!==void 0?ce:Ir[_t].fontStyle,$e=B.toLowerCase(),Tr[$e]!==void 0&&Tr[$e][ce]!==void 0?rt=Tr[$e][ce]:Tr[B]!==void 0&&Tr[B][ce]!==void 0?rt=Tr[B][ce]:Ee.disableWarning===!1&&Ea.warn("Unable to look up font label for font '"+B+"', '"+ce+"'. Refer to getFontList() for available fonts."),rt||Ee.noFallback||(rt=Tr.times[ce])==null&&(rt=Tr.times.normal),rt},Un=m.__private__.putInfo=function(){var B=mt(),ce=function($e){return $e};for(var Ee in d!==null&&(ce=qa.encryptor(B,0)),ge("<<"),ge("/Producer ("+ds(ce("jsPDF "+$r.version))+")"),Ze)Ze.hasOwnProperty(Ee)&&Ze[Ee]&&ge("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+ds(ce(Ze[Ee]))+")");ge("/CreationDate ("+ds(ce(Z))+")"),ge(">>"),ge("endobj")},Uh=m.__private__.putCatalog=function(B){var ce=(B=B||{}).rootDictionaryObjId||ye;switch(mt(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+ce+" 0 R"),ft||(ft="fullwidth"),ft){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+ft;Ee.substr(Ee.length-1)==="%"&&(ft=parseInt(ft)/100),typeof ft=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+z(ft)+"]")}switch(vt||(vt="continuous"),vt){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}qe&&ge("/PageMode /"+qe),pn.publish("putCatalog"),ge(">>"),ge("endobj")},Ug=m.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(se+1)),ge("/Root "+se+" 0 R"),ge("/Info "+(se-1)+" 0 R"),d!==null&&ge("/Encrypt "+qa.oid+" 0 R"),ge("/ID [ <"+te+"> <"+te+"> ]"),ge(">>")},zm=m.__private__.putHeader=function(){ge("%PDF-"+x),ge("%")},qg=m.__private__.putXRef=function(){var B="0000000000";ge("xref"),ge("0 "+(se+1)),ge("0000000000 65535 f ");for(var ce=1;ce<=se;ce++)typeof fe[ce]=="function"?ge((B+fe[ce]()).slice(-10)+" 00000 n "):fe[ce]!==void 0?ge((B+fe[ce]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},Nc=m.__private__.buildDocument=function(){Re(),Pe(ie),pn.publish("buildDocument"),zm(),it(),Bg(),$g(),d!==null&&Sc(),Un(),Uh();var B=X;return qg(),Ug(),ge("startxref"),ge(""+B),ge("%%EOF"),Pe(de[K]),ie.join(`
`)},Sf=m.__private__.getBlob=function(B){return new Blob([Qe(B)],{type:"application/pdf"})},vd=m.output=m.__private__.output=us(function(B,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",B){case void 0:return Nc();case"save":m.save(ce.filename);break;case"arraybuffer":return Qe(Nc());case"blob":return Sf(Nc());case"bloburi":case"bloburl":if(Jr.URL!==void 0&&typeof Jr.URL.createObjectURL=="function")return Jr.URL&&Jr.URL.createObjectURL(Sf(Nc()))||void 0;Ea.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",$e=Nc();try{Ee=o8($e)}catch{Ee=o8(unescape(encodeURIComponent($e)))}return"data:application/pdf;filename="+ce.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jr)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",At=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(rt=ce.pdfObjectUrl,At="");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+At+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",lr=Jr.open();return lr!==null&&lr.document.write(Mt),lr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jr)==="[object Window]"){var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',un=Jr.open();if(un!==null){un.document.write(Dr);var cn=this;un.document.documentElement.querySelector("#pdfViewer").onload=function(){un.document.title=ce.filename,un.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cn.output("bloburl"))}}return un}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',za=Jr.open();if(za!==null&&(za.document.write(Pn),za.document.title=ce.filename),za||typeof safari>"u")return za;break;case"datauri":case"dataurl":return Jr.document.location.href=this.output("datauristring",ce);default:return null}}),Af=function(B){return Array.isArray(fo)===!0&&fo.indexOf(B)>-1};switch(n){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Af("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pt=n}var qa=null;J(),Y();var kc=function(B){return d!==null?qa.encryptor(B,0):function(ce){return ce}},Vl=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kr[B].objId,pageNumber:B,pageContext:kr[B]}},qr=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in kr)if(kr[ce].objId===B)break;return Vl(ce)},Nf=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:kr[K].objId,pageNumber:K,pageContext:kr[K]}};m.addPage=function(){return Um.apply(this,arguments),this},m.setPage=function(){return gd.apply(this,arguments),Pe.call(this,de[K]),this},m.insertPage=function(B){return this.addPage(),this.movePage(K,B),this},m.movePage=function(B,ce){var Ee,$e;if(B>ce){Ee=de[B],$e=kr[B];for(var rt=B;rt>ce;rt--)de[rt]=de[rt-1],kr[rt]=kr[rt-1];de[ce]=Ee,kr[ce]=$e,this.setPage(ce)}else if(B<ce){Ee=de[B],$e=kr[B];for(var At=B;At<ce;At++)de[At]=de[At+1],kr[At]=kr[At+1];de[ce]=Ee,kr[ce]=$e,this.setPage(ce)}return this},m.deletePage=function(){return qm.apply(this,arguments),this},m.__private__.text=m.text=function(B,ce,Ee,$e,rt){var At,Mt,lr,Dr,un,cn,Pn,za,ti,wi=($e=$e||{}).scope||this;if(typeof B=="number"&&typeof ce=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var Ao=Ee;Ee=ce,ce=B,B=Ao}if(arguments[3]instanceof xt?(M("The transform parameter of text() with a Matrix value"),ti=rt):(lr=arguments[4],Dr=arguments[5],wa(Pn=arguments[3])==="object"&&Pn!==null||(typeof lr=="string"&&(Dr=lr,lr=null),typeof Pn=="string"&&(Dr=Pn,Pn=null),typeof Pn=="number"&&(lr=Pn,Pn=null),$e={flags:Pn,angle:lr,align:Dr})),isNaN(ce)||isNaN(Ee)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return wi;var ro="",Yl=!1,Gs=typeof $e.lineHeightFactor=="number"?$e.lineHeightFactor:kf,xl=wi.internal.scaleFactor;function Ad(ga){return ga=ga.split("	").join(Array($e.TabLen||9).join(" ")),ds(ga,Pn)}function Xm(ga){for(var ea,ni=ga.concat(),_i=[],Dc=ni.length;Dc--;)typeof(ea=ni.shift())=="string"?_i.push(ea):Array.isArray(ga)&&(ea.length===1||ea[1]===void 0&&ea[2]===void 0)?_i.push(ea[0]):_i.push([ea[0],ea[1],ea[2]]);return _i}function Zh(ga,ea){var ni;if(typeof ga=="string")ni=ea(ga)[0];else if(Array.isArray(ga)){for(var _i,Dc,sp=ga.concat(),Lf=[],Qm=sp.length;Qm--;)typeof(_i=sp.shift())=="string"?Lf.push(ea(_i)[0]):Array.isArray(_i)&&typeof _i[0]=="string"&&(Dc=ea(_i[0],_i[1],_i[2]),Lf.push([Dc[0],Dc[1],Dc[2]]));ni=Lf}return ni}var Tf=!1,Jh=!0;if(typeof B=="string")Tf=!0;else if(Array.isArray(B)){var Qh=B.concat();Mt=[];for(var Of,ri=Qh.length;ri--;)(typeof(Of=Qh.shift())!="string"||Array.isArray(Of)&&typeof Of[0]!="string")&&(Jh=!1);Tf=Jh}if(Tf===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ep=Pt/wi.internal.scaleFactor,tp=ep*(Gs-1);switch($e.baseline){case"bottom":Ee-=tp;break;case"top":Ee+=ep-tp;break;case"hanging":Ee+=ep-2*tp;break;case"middle":Ee+=ep/2-tp}if((cn=$e.maxWidth||0)>0&&(typeof B=="string"?B=wi.splitTextToSize(B,cn):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(ga,ea){return ga.concat(wi.splitTextToSize(ea,cn))},[]))),At={text:B,x:ce,y:Ee,options:$e,mutex:{pdfEscape:ds,activeFontKey:_t,fonts:Ir,activeFontSize:Pt}},pn.publish("preProcessText",At),B=At.text,lr=($e=At.options).angle,!(ti instanceof xt)&&lr&&typeof lr=="number"){lr*=Math.PI/180,$e.rotationDirection===0&&(lr=-lr),S===b.ADVANCED&&(lr=-lr);var rp=Math.cos(lr),np=Math.sin(lr);ti=new xt(rp,np,-np,rp,0,0)}else lr&&lr instanceof xt&&(ti=lr);S!==b.ADVANCED||ti||(ti=ma),(un=$e.charSpace||_d)!==void 0&&(ro+=T(R(un))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(za=$e.horizontalScale)!==void 0&&(ro+=T(100*za)+` Tz
`),$e.lang;var zo=-1,Df=$e.renderingMode!==void 0?$e.renderingMode:$e.stroke,du=wi.internal.getCurrentPageInfo().pageContext;switch(Df){case 0:case!1:case"fill":zo=0;break;case 1:case!0:case"stroke":zo=1;break;case 2:case"fillThenStroke":zo=2;break;case 3:case"invisible":zo=3;break;case 4:case"fillAndAddForClipping":zo=4;break;case 5:case"strokeAndAddPathForClipping":zo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zo=6;break;case 7:case"addToPathForClipping":zo=7}var Hg=du.usedRenderingMode!==void 0?du.usedRenderingMode:-1;zo!==-1?ro+=zo+` Tr
`:Hg!==-1&&(ro+=`0 Tr
`),zo!==-1&&(du.usedRenderingMode=zo),Dr=$e.align||"left";var Wo,ap=Pt*Gs,Zm=wi.internal.pageSize.getWidth(),ip=Ir[_t];un=$e.charSpace||_d,cn=$e.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},$e.flags);var Tc=[],Nd=function(ga){return wi.getStringUnitWidth(ga,{font:ip,charSpace:un,fontSize:Pt,doKerning:!1})*Pt/xl};if(Object.prototype.toString.call(B)==="[object Array]"){var Vo;Mt=Xm(B),Dr!=="left"&&(Wo=Mt.map(Nd));var No,kd=0;if(Dr==="right"){ce-=Wo[0],B=[],ri=Mt.length;for(var fu=0;fu<ri;fu++)fu===0?(No=vl(ce),Vo=yl(Ee)):(No=R(kd-Wo[fu]),Vo=-ap),B.push([Mt[fu],No,Vo]),kd=Wo[fu]}else if(Dr==="center"){ce-=Wo[0]/2,B=[],ri=Mt.length;for(var hu=0;hu<ri;hu++)hu===0?(No=vl(ce),Vo=yl(Ee)):(No=R((kd-Wo[hu])/2),Vo=-ap),B.push([Mt[hu],No,Vo]),kd=Wo[hu]}else if(Dr==="left"){B=[],ri=Mt.length;for(var op=0;op<ri;op++)B.push(Mt[op])}else if(Dr==="justify"&&ip.encoding==="Identity-H"){B=[],ri=Mt.length,cn=cn!==0?cn:Zm;for(var pu=0,qn=0;qn<ri;qn++)if(Vo=qn===0?yl(Ee):-ap,No=qn===0?vl(ce):pu,qn<ri-1){var mu=R((cn-Wo[qn])/(Mt[qn].split(" ").length-1)),ko=Mt[qn].split(" ");B.push([ko[0]+" ",No,Vo]),pu=0;for(var Ks=1;Ks<ko.length;Ks++){var If=(Nd(ko[Ks-1]+" "+ko[Ks])-Nd(ko[Ks]))*xl+mu;Ks==ko.length-1?B.push([ko[Ks],If,0]):B.push([ko[Ks]+" ",If,0]),pu-=If}}else B.push([Mt[qn],No,Vo]);B.push(["",pu,0])}else{if(Dr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ri=Mt.length,cn=cn!==0?cn:Zm,qn=0;qn<ri;qn++)Vo=qn===0?yl(Ee):-ap,No=qn===0?vl(ce):0,qn<ri-1?Tc.push(T(R((cn-Wo[qn])/(Mt[qn].split(" ").length-1)))):Tc.push(0),B.push([Mt[qn],No,Vo])}}var Jm=typeof $e.R2L=="boolean"?$e.R2L:Te;Jm===!0&&(B=Zh(B,function(ga,ea,ni){return[ga.split("").reverse().join(""),ea,ni]})),At={text:B,x:ce,y:Ee,options:$e,mutex:{pdfEscape:ds,activeFontKey:_t,fonts:Ir,activeFontSize:Pt}},pn.publish("postProcessText",At),B=At.text,Yl=At.mutex.isHex||!1;var Rf=Ir[_t].encoding;Rf!=="WinAnsiEncoding"&&Rf!=="StandardEncoding"||(B=Zh(B,function(ga,ea,ni){return[Ad(ga),ea,ni]})),Mt=Xm(B),B=[];for(var Mf,Ff,Ys,gu=0,Oc=1,vu=Array.isArray(Mt[0])?Oc:gu,yu="",Ed=function(ga,ea,ni){var _i="";return ni instanceof xt?(ni=typeof $e.angle=="number"?Fr(ni,new xt(1,0,0,1,ga,ea)):Fr(new xt(1,0,0,1,ga,ea),ni),S===b.ADVANCED&&(ni=Fr(new xt(1,0,0,-1,0,0),ni)),_i=ni.join(" ")+` Tm
`):_i=T(ga)+" "+T(ea)+` Td
`,_i},ho=0;ho<Mt.length;ho++){switch(yu="",vu){case Oc:Ys=(Yl?"<":"(")+Mt[ho][0]+(Yl?">":")"),Mf=parseFloat(Mt[ho][1]),Ff=parseFloat(Mt[ho][2]);break;case gu:Ys=(Yl?"<":"(")+Mt[ho]+(Yl?">":")"),Mf=vl(ce),Ff=yl(Ee)}Tc!==void 0&&Tc[ho]!==void 0&&(yu=Tc[ho]+` Tw
`),ho===0?B.push(yu+Ed(Mf,Ff,ti)+Ys):vu===gu?B.push(yu+Ys):vu===Oc&&B.push(yu+Ed(Mf,Ff,ti)+Ys)}B=vu===gu?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var hs=`BT
/`;return hs+=_t+" "+Pt+` Tf
`,hs+=T(Pt*Gs)+` TL
`,hs+=Ii+`
`,hs+=ro,hs+=B,ge(hs+="ET"),h[_t]=!0,wi};var Ec=m.__private__.clip=m.clip=function(B){return ge(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ec("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ge("n"),this};var Cc=m.__private__.isValidStyle=function(B){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ce=!0),ce};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return Cc(B)&&(u=B),this};var Wm=m.__private__.getStyle=m.getStyle=function(B){var ce=u;switch(B){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=B}return ce},yd=m.close=function(){return ge("h"),this};m.stroke=function(){return ge("S"),this},m.fill=function(B){return qh("f",B),this},m.fillEvenOdd=function(B){return qh("f*",B),this},m.fillStroke=function(B){return qh("B",B),this},m.fillStrokeEvenOdd=function(B){return qh("B*",B),this};var qh=function(B,ce){wa(ce)==="object"?zg(ce,B):ge(B)},zh=function(B){B===null||S===b.ADVANCED&&B===void 0||(B=Wm(B),ge(B))};function Wh(B,ce,Ee,$e,rt){var At=new Gv(ce||this.boundingBox,Ee||this.xStep,$e||this.yStep,this.gState,rt||this.matrix);At.stream=this.stream;var Mt=B+"$$"+this.cloneIndex+++"$$";return bt(Mt,At),At}var zg=function(B,ce){var Ee=Na[B.key],$e=Xr[Ee];if($e instanceof C0)ge("q"),ge(Cy(ce)),$e.gState&&m.setGState($e.gState),ge(B.matrix.toString()+" cm"),ge("/"+Ee+" sh"),ge("Q");else if($e instanceof Gv){var rt=new xt(1,0,0,-1,0,Sd());B.matrix&&(rt=rt.multiply(B.matrix||ma),Ee=Wh.call($e,B.key,B.boundingBox,B.xStep,B.yStep,rt).id),ge("q"),ge("/Pattern cs"),ge("/"+Ee+" scn"),$e.gState&&m.setGState($e.gState),ge(ce),ge("Q")}},Cy=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},cu=m.moveTo=function(B,ce){return ge(T(R(B))+" "+T(V(ce))+" m"),this},Hl=m.lineTo=function(B,ce){return ge(T(R(B))+" "+T(V(ce))+" l"),this},Hs=m.curveTo=function(B,ce,Ee,$e,rt,At){return ge([T(R(B)),T(V(ce)),T(R(Ee)),T(V($e)),T(R(rt)),T(V(At)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,ce,Ee,$e,rt){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||isNaN($e)||!Cc(rt))throw new Error("Invalid arguments passed to jsPDF.line");return S===b.COMPAT?this.lines([[Ee-B,$e-ce]],B,ce,[1,1],rt||"S"):this.lines([[Ee-B,$e-ce]],B,ce,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,ce,Ee,$e,rt,At){var Mt,lr,Dr,un,cn,Pn,za,ti,wi,Ao,ro,Yl;if(typeof B=="number"&&(Yl=Ee,Ee=ce,ce=B,B=Yl),$e=$e||[1,1],At=At||!1,isNaN(ce)||isNaN(Ee)||!Array.isArray(B)||!Array.isArray($e)||!Cc(rt)||typeof At!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(cu(ce,Ee),Mt=$e[0],lr=$e[1],un=B.length,Ao=ce,ro=Ee,Dr=0;Dr<un;Dr++)(cn=B[Dr]).length===2?(Ao=cn[0]*Mt+Ao,ro=cn[1]*lr+ro,Hl(Ao,ro)):(Pn=cn[0]*Mt+Ao,za=cn[1]*lr+ro,ti=cn[2]*Mt+Ao,wi=cn[3]*lr+ro,Ao=cn[4]*Mt+Ao,ro=cn[5]*lr+ro,Hs(Pn,za,ti,wi,Ao,ro));return At&&yd(),zh(rt),this},m.path=function(B){for(var ce=0;ce<B.length;ce++){var Ee=B[ce],$e=Ee.c;switch(Ee.op){case"m":cu($e[0],$e[1]);break;case"l":Hl($e[0],$e[1]);break;case"c":Hs.apply(this,$e);break;case"h":yd()}}return this},m.__private__.rect=m.rect=function(B,ce,Ee,$e,rt){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||isNaN($e)||!Cc(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return S===b.COMPAT&&($e=-$e),ge([T(R(B)),T(V(ce)),T(R(Ee)),T(R($e)),"re"].join(" ")),zh(rt),this},m.__private__.triangle=m.triangle=function(B,ce,Ee,$e,rt,At,Mt){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||isNaN($e)||isNaN(rt)||isNaN(At)||!Cc(Mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-B,$e-ce],[rt-Ee,At-$e],[B-rt,ce-At]],B,ce,[1,1],Mt,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,ce,Ee,$e,rt,At,Mt){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||isNaN($e)||isNaN(rt)||isNaN(At)||!Cc(Mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lr=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*Ee),At=Math.min(At,.5*$e),this.lines([[Ee-2*rt,0],[rt*lr,0,rt,At-At*lr,rt,At],[0,$e-2*At],[0,At*lr,-rt*lr,At,-rt,At],[2*rt-Ee,0],[-rt*lr,0,-rt,-At*lr,-rt,-At],[0,2*At-$e],[0,-At*lr,rt*lr,-At,rt,-At]],B+rt,ce,[1,1],Mt,!0),this},m.__private__.ellipse=m.ellipse=function(B,ce,Ee,$e,rt){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||isNaN($e)||!Cc(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var At=4/3*(Math.SQRT2-1)*Ee,Mt=4/3*(Math.SQRT2-1)*$e;return cu(B+Ee,ce),Hs(B+Ee,ce-Mt,B+At,ce-$e,B,ce-$e),Hs(B-At,ce-$e,B-Ee,ce-Mt,B-Ee,ce),Hs(B-Ee,ce+Mt,B-At,ce+$e,B,ce+$e),Hs(B+At,ce+$e,B+Ee,ce+Mt,B+Ee,ce),zh(rt),this},m.__private__.circle=m.circle=function(B,ce,Ee,$e){if(isNaN(B)||isNaN(ce)||isNaN(Ee)||!Cc($e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ce,Ee,Ee,$e)},m.setFont=function(B,ce,Ee){return Ee&&(ce=O(ce,Ee)),_t=Bh(B,ce,{disableWarning:!1}),this};var Vh=m.__private__.getFont=m.getFont=function(){return Ir[Bh.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,ce,Ee={};for(B in Tr)if(Tr.hasOwnProperty(B))for(ce in Ee[B]=[],Tr[B])Tr[B].hasOwnProperty(ce)&&Ee[B].push(ce);return Ee},m.addFont=function(B,ce,Ee,$e,rt){var At=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&At.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&At.indexOf(arguments[3])==-1&&(Ee=O(Ee,$e)),rt=rt||"Identity-H",md.call(this,B,ce,Ee,rt)};var kf,Vm=e.lineWidth||.200025,xd=m.__private__.getLineWidth=m.getLineWidth=function(){return Vm},Ef=m.__private__.setLineWidth=m.setLineWidth=function(B){return Vm=B,ge(T(R(B))+" w"),this};m.__private__.setLineDash=$r.API.setLineDash=$r.API.setLineDashPattern=function(B,ce){if(B=B||[],ce=ce||0,isNaN(ce)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ee){return T(R(Ee))}).join(" "),ce=T(R(ce)),ge("["+B+"] "+ce+" d"),this};var Hh=m.__private__.getLineHeight=m.getLineHeight=function(){return Pt*kf};m.__private__.getLineHeight=m.getLineHeight=function(){return Pt*kf};var Hm=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(kf=B),this},Gl=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return kf};Hm(e.lineHeight);var vl=m.__private__.getHorizontalCoordinate=function(B){return R(B)},yl=m.__private__.getVerticalCoordinate=function(B){return S===b.ADVANCED?B:kr[K].mediaBox.topRightY-kr[K].mediaBox.bottomLeftY-R(B)},Wg=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return T(vl(B))},Kl=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return T(yl(B))},fs=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ae(fs)},m.__private__.setStrokeColor=m.setDrawColor=function(B,ce,Ee,$e){return fs=Se({ch1:B,ch2:ce,ch3:Ee,ch4:$e,pdfColorType:"draw",precision:2}),ge(fs),this};var Gh=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ae(Gh)},m.__private__.setFillColor=m.setFillColor=function(B,ce,Ee,$e){return Gh=Se({ch1:B,ch2:ce,ch3:Ee,ch4:$e,pdfColorType:"fill",precision:2}),ge(Gh),this};var Ii=e.textColor||"0 g",wd=m.__private__.getTextColor=m.getTextColor=function(){return Ae(Ii)};m.__private__.setTextColor=m.setTextColor=function(B,ce,Ee,$e){return Ii=Se({ch1:B,ch2:ce,ch3:Ee,ch4:$e,pdfColorType:"text",precision:3}),this};var _d=e.charSpace,Cf=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(_d||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _d=B,this};var Gm=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var ce=m.CapJoinStyles[B];if(ce===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gm=ce,ge(ce+" J"),this};var Pf=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var ce=m.CapJoinStyles[B];if(ce===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pf=ce,ge(ce+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(T(R(B))+" M"),this},m.GState=RS,m.setGState=function(B){(B=typeof B=="string"?En[pa[B]]:Kh(null,B)).equals(si)||(ge("/"+B.id+" gs"),si=B)};var Kh=function(B,ce){if(!B||!pa[B]){var Ee=!1;for(var $e in En)if(En.hasOwnProperty($e)&&En[$e].equals(ce)){Ee=!0;break}if(Ee)ce=En[$e];else{var rt="GS"+(Object.keys(En).length+1).toString(10);En[rt]=ce,ce.id=rt}return B&&(pa[B]=ce.id),pn.publish("addGState",ce),ce}};m.addGState=function(B,ce){return Kh(B,ce),this},m.saveGraphicsState=function(){return ge("q"),ha.push({key:_t,size:Pt,color:Ii}),this},m.restoreGraphicsState=function(){ge("Q");var B=ha.pop();return _t=B.key,Pt=B.size,Ii=B.color,si=null,this},m.setCurrentTransformationMatrix=function(B){return ge(B.toString()+" cm"),this},m.comment=function(B){return ge("#"+B),this};var Pc=function(B,ce){var Ee=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(At){isNaN(At)||(Ee=parseFloat(At))}});var $e=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $e},set:function(At){isNaN(At)||($e=parseFloat(At))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(At){rt=At.toString()}}),this},bd=function(B,ce,Ee,$e){Pc.call(this,B,ce),this.type="rect";var rt=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(Mt){isNaN(Mt)||(rt=parseFloat(Mt))}});var At=$e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return At},set:function(Mt){isNaN(Mt)||(At=parseFloat(Mt))}}),this},Yh=function(){this.page=Cn,this.currentPage=K,this.pages=de.slice(0),this.pagesContext=kr.slice(0),this.x=Pr,this.y=Bt,this.matrix=dr,this.width=uu(K),this.height=Sd(K),this.outputDestination=ke,this.id="",this.objectNumber=-1};Yh.prototype.restore=function(){Cn=this.page,K=this.currentPage,kr=this.pagesContext,de=this.pages,Pr=this.x,Bt=this.y,dr=this.matrix,Km(K,this.width),Ym(K,this.height),ke=this.outputDestination};var Vg=function(B,ce,Ee,$e,rt){lt.push(new Yh),Cn=K=0,de=[],Pr=B,Bt=ce,dr=rt,bf([Ee,$e])},Py=function(B){if(li[B])lt.pop().restore();else{var ce=new Yh,Ee="Xo"+(Object.keys(Jn).length+1).toString(10);ce.id=Ee,li[B]=Ee,Jn[Ee]=ce,pn.publish("addFormObject",ce),lt.pop().restore()}};for(var Xh in m.beginFormObject=function(B,ce,Ee,$e,rt){return Vg(B,ce,Ee,$e,rt),this},m.endFormObject=function(B){return Py(B),this},m.doFormObject=function(B,ce){var Ee=Jn[li[B]];return ge("q"),ge(ce.toString()+" cm"),ge("/"+Ee.id+" Do"),ge("Q"),this},m.getFormObject=function(B){var ce=Jn[li[B]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},m.save=function(B,ce){return B=B||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(k0(Sf(Nc()),B),typeof k0.unload=="function"&&Jr.setTimeout&&setTimeout(k0.unload,911),this):new Promise(function(Ee,$e){try{var rt=k0(Sf(Nc()),B);typeof k0.unload=="function"&&Jr.setTimeout&&setTimeout(k0.unload,911),Ee(rt)}catch(At){$e(At.message)}})},$r.API)$r.API.hasOwnProperty(Xh)&&(Xh==="events"&&$r.API.events.length?function(B,ce){var Ee,$e,rt;for(rt=ce.length-1;rt!==-1;rt--)Ee=ce[rt][0],$e=ce[rt][1],B.subscribe.apply(B,[Ee].concat(typeof $e=="function"?[$e]:$e))}(pn,$r.API.events):m[Xh]=$r.API[Xh]);var uu=m.getPageWidth=function(B){return(kr[B=B||K].mediaBox.topRightX-kr[B].mediaBox.bottomLeftX)/pt},Km=m.setPageWidth=function(B,ce){kr[B].mediaBox.topRightX=ce*pt+kr[B].mediaBox.bottomLeftX},Sd=m.getPageHeight=function(B){return(kr[B=B||K].mediaBox.topRightY-kr[B].mediaBox.bottomLeftY)/pt},Ym=m.setPageHeight=function(B,ce){kr[B].mediaBox.topRightY=ce*pt+kr[B].mediaBox.bottomLeftY};return m.internal={pdfEscape:ds,getStyle:Wm,getFont:Vh,getFontSize:_e,getCharSpace:Cf,getTextColor:wd,getLineHeight:Hh,getLineHeightFactor:Gl,getLineWidth:xd,write:Ye,getHorizontalCoordinate:vl,getVerticalCoordinate:yl,getCoordinateString:Wg,getVerticalCoordinateString:Kl,collections:{},newObject:mt,newAdditionalObject:xe,newObjectDeferred:Jt,newObjectDeferredBegin:le,getFilters:Ve,putStream:ut,events:pn,scaleFactor:pt,pageSize:{getWidth:function(){return uu(K)},setWidth:function(B){Km(K,B)},getHeight:function(){return Sd(K)},setHeight:function(B){Ym(K,B)}},encryptionOptions:d,encryption:qa,getEncryptor:kc,output:vd,getNumberOfPages:Ey,pages:de,out:ge,f2:z,f3:P,getPageInfo:Vl,getPageInfoByObjId:qr,getCurrentPageInfo:Nf,getPDFVersion:g,Point:Pc,Rectangle:bd,Matrix:xt,hasHotfix:Af},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return uu(K)},set:function(B){Km(K,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Sd(K)},set:function(B){Ym(K,B)},enumerable:!0,configurable:!0}),_f.call(m,st),_t="F1",Um(a,r),pn.publish("initialized"),m}jv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},jv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jv.prototype.processOwnerPassword=function(e,t){return l8(s8(t).substr(0,5),e)},jv.prototype.encryptor=function(e,t){var r=s8(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return l8(r,n)}},RS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||wa(e)!==wa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},$r.API={events:[]},$r.version="3.0.1";var Ni=$r.API,CR=1,Dg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ov=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hn=function(e){return e.toFixed(2)},Ip=function(e){return e.toFixed(5)};Ni.__acroform__={};var zl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Qz=function(e){return e*CR},jd=function(e){var t=new wne,r=Ar.internal.getHeight(e)||0,n=Ar.internal.getWidth(e)||0;return t.BBox=[0,0,Number(hn(n)),Number(hn(r))],t},m7e=Ni.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},g7e=Ni.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},v7e=Ni.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Ui=Ni.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return v7e(e,t-1)},qi=Ni.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return m7e(e,t-1)},zi=Ni.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return g7e(e,t-1)},y7e=Ni.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],s=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(i+s)||0,l.upperRight_X=r(a+o)||0,l.upperRight_Y=n(i)||0,[Number(hn(l.lowerLeft_X)),Number(hn(l.lowerLeft_Y)),Number(hn(l.upperRight_X)),Number(hn(l.upperRight_Y))]},x7e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=c8(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+hn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=jd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},c8=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var i=r,o=Ar.internal.getHeight(e)||0;o=o<0?-o:o;var s=Ar.internal.getWidth(e)||0;s=s<0?-s:s;var l=function(P,R,j){if(P+1<a.length){var V=R+" "+a[P+1][0];return bb(V,e,j).width<=s-4}return!1};i++;e:for(;i>0;){t="",i--;var u,d,f=bb("3",e,i).height,h=e.multiline?o-i:(o-f)/2,m=h+=2,x=0,g=0,y=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+bb(t,e,i=12).width+", FieldWidth:"+s+`
`;break}for(var _="",b=0,S=0;S<a.length;S++)if(a.hasOwnProperty(S)){var C=!1;if(a[S].length!==1&&y!==a[S].length-1){if((f+2)*(b+2)+2>o)continue e;_+=a[S][y],C=!0,g=S,S--}else{_=(_+=a[S][y]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var E=parseInt(S),O=l(E,_,i),T=S>=a.length-1;if(O&&!T){_+=" ",y=0;continue}if(O||T){if(T)g=E;else if(e.multiline&&(f+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(b+2)+2>o)continue e;g=E}}for(var M="",L=x;L<=g;L++){var z=a[L];if(e.multiline){if(L===g){M+=z[y]+" ",y=(y+1)%z.length;continue}if(L===x){M+=z[z.length-1]+" ";continue}}M+=z[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,d=bb(M,e,i).width,e.textAlign){case"right":u=s-d-2;break;case"center":u=(s-d)/2;break;case"left":default:u=2}t+=hn(u)+" "+hn(m)+` Td
`,t+="("+Dg(M)+`) Tj
`,t+=-hn(u)+` 0 Td
`,m=-(i+2),d=0,x=C?g:g+1,b++,_=""}break}return n.text=t,n.fontSize=i,n},bb=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},w7e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},_7e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},b7e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),wa(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},S7e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(hd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(w7e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _ne,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&_7e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var s=n[o],l=[],u=s.Rect;if(s.Rect&&(s.Rect=y7e(s.Rect,a)),a.internal.newObjectDeferredBegin(s.objId,!0),s.DA=Ar.createDefaultAppearanceStream(s),wa(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(l=s.getKeyValueListForStream()),s.Rect=u,s.hasAppearanceStream&&!s.appearanceStreamContent){var d=x7e(s);l.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(s.appearanceStreamContent){var f="";for(var h in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(h)){var m=s.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(a,s)),f+="/"+o+" "+x+" ",a.internal.acroformPlugin.xForms.indexOf(x)>=0||a.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(a,s)),f+="/"+o+" "+x,a.internal.acroformPlugin.xForms.indexOf(x)>=0||a.internal.acroformPlugin.xForms.push(x);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:s.objId}),a.internal.out("endobj")}i&&b7e(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},xne=Ni.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),wa(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Dg(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},VP=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Dg(n(e))+")"},Yd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yd.prototype.toString=function(){return this.objId+" 0 R"},Yd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Yd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:xne(a,this.objId,this.scope)}):a instanceof Yd?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var wne=function(){Yd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};zl(wne,Yd);var _ne=function(){Yd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Dg(r(e))+")"}},set:function(r){e=r}})};zl(_ne,Yd);var hd=function e(){Yd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ui(t,3)},set:function(_){_?this.F=qi(t,3):this.F=zi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof MS)return;i="FieldObject"+e.FieldNum++}var _=function(b){return b};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+Dg(_(i))+")"},set:function(_){i=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(_){i=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(_){s=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/CR:u},set:function(_){u=_}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof MS||this instanceof W0))return VP(f,this.objId,this.scope)},set:function(_){_=_.toString(),f=_}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Fo?h:VP(h,this.objId,this.scope)},set:function(_){_=_.toString(),h=this instanceof Fo?_:_.substr(0,1)==="("?Ov(_.substr(1,_.length-2)):Ov(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fo?Ov(h.substr(1,h.length-1)):h},set:function(_){_=_.toString(),h=this instanceof Fo?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Fo?m:VP(m,this.objId,this.scope)},set:function(_){_=_.toString(),m=this instanceof Fo?_:_.substr(0,1)==="("?Ov(_.substr(1,_.length-2)):Ov(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fo?Ov(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof Fo?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(_){_=!!_,g=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(_){x=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,1)},set:function(_){_?this.Ff=qi(this.Ff,1):this.Ff=zi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,2)},set:function(_){_?this.Ff=qi(this.Ff,2):this.Ff=zi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,3)},set:function(_){_?this.Ff=qi(this.Ff,3):this.Ff=zi(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');y=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(y){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};zl(hd,Yd);var o1=function(){hd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xne(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,s){s||(s=1);for(var l,u=[];l=o.exec(i);)u.push(l[s]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,18)},set:function(r){r?this.Ff=qi(this.Ff,18):this.Ff=zi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=qi(this.Ff,19):this.Ff=zi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,20)},set:function(r){r?(this.Ff=qi(this.Ff,20),t.sort()):this.Ff=zi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,22)},set:function(r){r?this.Ff=qi(this.Ff,22):this.Ff=zi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(r){r?this.Ff=qi(this.Ff,23):this.Ff=zi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,27)},set:function(r){r?this.Ff=qi(this.Ff,27):this.Ff=zi(this.Ff,27)}}),this.hasAppearanceStream=!1};zl(o1,hd);var s1=function(){o1.call(this),this.fontName="helvetica",this.combo=!1};zl(s1,o1);var l1=function(){s1.call(this),this.combo=!0};zl(l1,s1);var e5=function(){l1.call(this),this.edit=!0};zl(e5,l1);var Fo=function(){hd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,15)},set:function(r){r?this.Ff=qi(this.Ff,15):this.Ff=zi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,16)},set:function(r){r?this.Ff=qi(this.Ff,16):this.Ff=zi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,17)},set:function(r){r?this.Ff=qi(this.Ff,17):this.Ff=zi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(r){r?this.Ff=qi(this.Ff,26):this.Ff=zi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Dg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){wa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};zl(Fo,hd);var t5=function(){Fo.call(this),this.pushButton=!0};zl(t5,Fo);var c1=function(){Fo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};zl(c1,Fo);var MS=function(){var e,t;hd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(s){return s};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Dg(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){wa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zl(MS,hd),c1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},c1.prototype.createOption=function(e){var t=new MS;return t.Parent=this,t.optionName=e,this.Kids.push(t),A7e.call(this.scope,t),t};var r5=function(){Fo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ar.CheckBox.createAppearanceStream()};zl(r5,Fo);var W0=function(){hd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,13)},set:function(t){t?this.Ff=qi(this.Ff,13):this.Ff=zi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,21)},set:function(t){t?this.Ff=qi(this.Ff,21):this.Ff=zi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,23)},set:function(t){t?this.Ff=qi(this.Ff,23):this.Ff=zi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,24)},set:function(t){t?this.Ff=qi(this.Ff,24):this.Ff=zi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,25)},set:function(t){t?this.Ff=qi(this.Ff,25):this.Ff=zi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,26)},set:function(t){t?this.Ff=qi(this.Ff,26):this.Ff=zi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zl(W0,hd);var n5=function(){W0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ui(this.Ff,14)},set:function(e){e?this.Ff=qi(this.Ff,14):this.Ff=zi(this.Ff,14)}}),this.password=!0};zl(n5,W0);var Ar={CheckBox:{createAppearanceStream:function(){return{N:{On:Ar.CheckBox.YesNormal},D:{On:Ar.CheckBox.YesPushDown,Off:Ar.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=c8(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+hn(Ar.internal.getWidth(e))+" "+hn(Ar.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+hn(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=jd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Ar.internal.getHeight(e),o=Ar.internal.getWidth(e),s=c8(e,e.caption);return a.push("1 g"),a.push("0 0 "+hn(o)+" "+hn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+hn(o-1)+" "+hn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+hn(s.fontSize)+" Tf "+n),a.push(s.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hn(Ar.internal.getWidth(e))+" "+hn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Circle.YesNormal,t.D[e]=Ar.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=jd(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Ar.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ip(Ar.internal.getWidth(e)/2)+" "+Ip(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ar.internal.Bezier_C).toFixed(5)),o=Number((n*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ip(Ar.internal.getWidth(e)/2)+" "+Ip(Ar.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ip(Ar.internal.getWidth(e)/2)+" "+Ip(Ar.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=[],n=Ar.internal.getWidth(e)<=Ar.internal.getHeight(e)?Ar.internal.getWidth(e)/4:Ar.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ip(Ar.internal.getWidth(e)/2)+" "+Ip(Ar.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ar.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ar.RadioButton.Cross.YesNormal,t.D[e]=Ar.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=jd(e);t.scope=e.scope;var r=[],n=Ar.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+hn(Ar.internal.getWidth(e)-2)+" "+hn(Ar.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(hn(n.x1.x)+" "+hn(n.x1.y)+" m"),r.push(hn(n.x2.x)+" "+hn(n.x2.y)+" l"),r.push(hn(n.x4.x)+" "+hn(n.x4.y)+" m"),r.push(hn(n.x3.x)+" "+hn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=Ar.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+hn(Ar.internal.getWidth(e))+" "+hn(Ar.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+hn(Ar.internal.getWidth(e)-2)+" "+hn(Ar.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(hn(r.x1.x)+" "+hn(r.x1.y)+" m"),n.push(hn(r.x2.x)+" "+hn(r.x2.y)+" l"),n.push(hn(r.x4.x)+" "+hn(r.x4.y)+" m"),n.push(hn(r.x3.x)+" "+hn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=jd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hn(Ar.internal.getWidth(e))+" "+hn(Ar.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ar.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ar.internal.getWidth(e),r=Ar.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ar.internal.getWidth=function(e){var t=0;return wa(e)==="object"&&(t=Qz(e.Rect[2])),t},Ar.internal.getHeight=function(e){var t=0;return wa(e)==="object"&&(t=Qz(e.Rect[3])),t};var A7e=Ni.addField=function(e){if(S7e(this,e),!(e instanceof hd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ni.AcroFormChoiceField=o1,Ni.AcroFormListBox=s1,Ni.AcroFormComboBox=l1,Ni.AcroFormEditBox=e5,Ni.AcroFormButton=Fo,Ni.AcroFormPushButton=t5,Ni.AcroFormRadioButton=c1,Ni.AcroFormCheckBox=r5,Ni.AcroFormTextField=W0,Ni.AcroFormPasswordField=n5,Ni.AcroFormAppearance=Ar,Ni.AcroForm={ChoiceField:o1,ListBox:s1,ComboBox:l1,EditBox:e5,Button:Fo,PushButton:t5,RadioButton:c1,CheckBox:r5,TextField:W0,PasswordField:n5,Appearance:Ar},$r.AcroForm={ChoiceField:o1,ListBox:s1,ComboBox:l1,EditBox:e5,Button:Fo,PushButton:t5,RadioButton:c1,CheckBox:r5,TextField:W0,PasswordField:n5,Appearance:Ar};$r.AcroForm;function bne(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,R){var j,V,Z,te,q,Y=t;if((R=R||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(O(P))for(q in r)for(Z=r[q],j=0;j<Z.length;j+=1){for(te=!0,V=0;V<Z[j].length;V+=1)if(Z[j][V]!==void 0&&Z[j][V]!==P[V]){te=!1;break}if(te===!0){Y=q;break}}else for(q in r)for(Z=r[q],j=0;j<Z.length;j+=1){for(te=!0,V=0;V<Z[j].length;V+=1)if(Z[j][V]!==void 0&&Z[j][V]!==P.charCodeAt(V)){te=!1;break}if(te===!0){Y=q;break}}return Y===t&&R!==t&&(Y=R),Y},a=function P(R){for(var j=this.internal.write,V=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:R.width}),te.push({key:"Height",value:R.height}),R.colorSpace===y.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===y.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var q="",Y=0,U=R.transparency.length;Y<U;Y++)q+=R.transparency[Y]+" "+R.transparency[Y]+" ";te.push({key:"Mask",value:"["+q+"]"})}R.sMask!==void 0&&te.push({key:"SMask",value:R.objectId+1+" 0 R"});var G=R.filter!==void 0?["/"+R.filter]:void 0;if(V({data:R.data,additionalKeyValues:te,alreadyAppliedFilters:G,objectId:R.objectId}),j("endobj"),"sMask"in R&&R.sMask!==void 0){var J="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,D={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:J,data:R.sMask};"filter"in R&&(D.filter=R.filter),P.call(this,D)}if(R.colorSpace===y.INDEXED){var K=this.internal.newObject();V({data:M(new Uint8Array(R.palette)),objectId:K}),j("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var R in P)a.call(this,P[R])},o=function(){var P,R=this.internal.collections.addImage_images,j=this.internal.write;for(var V in R)j("/I"+(P=R[V]).index,P.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var P=this.internal.collections.addImage_images;return s.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return wa(P)==="object"&&P.nodeType===1},h=function(P,R){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var j=""+P.getAttribute("src");if(j.indexOf("data:image/")===0)return W2(unescape(j).split("base64,").pop());var V=e.loadFile(j,!0);if(V!==void 0)return V}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var Z;switch(R){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return W2(P.toDataURL(Z,1).split("base64,").pop())}},m=function(P){var R=this.internal.collections.addImage_images;if(R){for(var j in R)if(P===R[j].alias)return R[j]}},x=function(P,R,j){return P||R||(P=-96,R=-96),P<0&&(P=-1*j.width*72/P/this.internal.scaleFactor),R<0&&(R=-1*j.height*72/R/this.internal.scaleFactor),P===0&&(P=R*j.width/j.height),R===0&&(R=P*j.height/j.width),[P,R]},g=function(P,R,j,V,Z,te){var q=x.call(this,j,V,Z),Y=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,G=l.call(this);if(j=q[0],V=q[1],G[Z.index]=Z,te){te*=Math.PI/180;var J=Math.cos(te),D=Math.sin(te),K=function(ae){return ae.toFixed(4)},Q=[K(J),K(D),K(-1*D),K(J),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,Y(P),U(R+V),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([Y(j),"0","0",Y(V),"0","0","cm"].join(" "))):this.internal.write([Y(j),"0","0",Y(V),Y(P),U(R+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(P){var R,j,V=0;if(typeof P=="string")for(j=P.length,R=0;R<j;R++)V=(V<<5)-V+P.charCodeAt(R),V|=0;else if(O(P))for(j=P.byteLength/2,R=0;R<j;R++)V=(V<<5)-V+P[R],V|=0;return V},S=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var R=!0;return P.length===0&&(R=!1),P.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(R=!1),R},C=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var R=P.indexOf(",");return R<0?null:P.substring(0,R).trim().endsWith("base64")?P.substring(R+1):null},E=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return E()&&P instanceof ArrayBuffer};var O=e.__addimage__.isArrayBufferView=function(P){return E()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(P){for(var R=P.length,j=new Uint8Array(R),V=0;V<R;V++)j[V]=P.charCodeAt(V);return j},M=e.__addimage__.arrayBufferToBinaryString=function(P){for(var R="",j=O(P)?P:new Uint8Array(P),V=0;V<j.length;V+=8192)R+=String.fromCharCode.apply(null,j.subarray(V,V+8192));return R};e.addImage=function(){var P,R,j,V,Z,te,q,Y,U;if(typeof arguments[1]=="number"?(R=t,j=arguments[1],V=arguments[2],Z=arguments[3],te=arguments[4],q=arguments[5],Y=arguments[6],U=arguments[7]):(R=arguments[1],j=arguments[2],V=arguments[3],Z=arguments[4],te=arguments[5],q=arguments[6],Y=arguments[7],U=arguments[8]),wa(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var G=P;P=G.imageData,R=G.format||R||t,j=G.x||j||0,V=G.y||V||0,Z=G.w||G.width||Z,te=G.h||G.height||te,q=G.alias||q,Y=G.compression||Y,U=G.rotation||G.angle||U}var J=this.internal.getFilters();if(Y===void 0&&J.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(j)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var D=L.call(this,P,R,q,Y);return g.call(this,j,V,Z,te,D,U),this};var L=function(P,R,j,V){var Z,te,q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var Y=z(P,!1);(Y!==""||(Y=e.loadFile(P,!0))!==void 0)&&(P=Y)}if(f(P)&&(P=h(P,R)),R=n(P,R),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((q=j)==null||q.length===0)&&(j=function(U){return typeof U=="string"||O(U)?b(U):O(U.data)?b(U.data):null}(P)),(Z=m.call(this,j))||(E()&&(P instanceof Uint8Array||R==="RGBA"||(te=P,P=T(P))),Z=this["process"+R.toUpperCase()](P,u.call(this),j,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:_.NONE}(V),te)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},z=e.__addimage__.convertBase64ToBinaryString=function(P,R){R=typeof R!="boolean"||R;var j,V="";if(typeof P=="string"){var Z;j=(Z=C(P))!==null&&Z!==void 0?Z:P;try{V=W2(j)}catch(te){if(R)throw S(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(P){var R,j,V="";if(f(P)&&(P=h(P)),typeof P=="string"&&n(P)===t&&((V=z(P,!1))===""&&(V=e.loadFile(P)||""),P=V),j=n(P),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!E()||P instanceof Uint8Array||(P=T(P)),!(R=this["process"+j.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=j,R}})($r.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};$r.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(g.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+m(_(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+m(_(b))+") >>",g.content=i;var S=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(x(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var E=this.annotations._nameMap[n.options.name];n.options.pageNumber=E.page,n.options.top=E.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var O=s(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+O+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var s=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+a),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,s,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){s=i.maxWidth;var d=this.splitTextToSize(r,s).length;o=Math.ceil(u*d)}else s=l,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,a-u,s,o,i),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}($r.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},s=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(g){var y=0,_=r,b="",S=0;for(y=0;y<g.length;y+=1)_[g.charCodeAt(y)]!==void 0?(S++,typeof(_=_[g.charCodeAt(y)])=="number"&&(b+=String.fromCharCode(_),_=r,S=0),y===g.length-1&&(_=r,b+=g.charAt(y-(S-1)),y-=S-1,S=0)):(_=r,b+=g.charAt(y-S),y-=S,S=0);return b};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(g,y,_){return o(g)?i(g)===!1?-1:!u(g)||!o(y)&&!o(_)||!o(_)&&s(y)||s(g)&&!o(y)||s(g)&&l(y)||s(g)&&s(y)?0:d(g)&&o(y)&&!s(y)&&o(_)&&u(_)?3:s(g)||!o(_)?1:2:-1},m=function(g){var y=0,_=0,b=0,S="",C="",E="",O=(g=g||"").split("\\s+"),T=[];for(y=0;y<O.length;y+=1){for(T.push(""),_=0;_<O[y].length;_+=1)S=O[y][_],C=O[y][_-1],E=O[y][_+1],o(S)?(b=h(S,C,E),T[y]+=b!==-1?String.fromCharCode(t[S.charCodeAt(0)][b]):S):T[y]+=S;T[y]=f(T[y])}return T.join(" ")},x=e.__arabicParser__.processArabic=e.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(y)){var b=0;for(_=[],b=0;b<y.length;b+=1)Array.isArray(y[b])?_.push([m(y[b][0]),y[b][1],y[b][2]]):_.push([m(y[b])]);g=_}else g=m(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",x])}($r.API),$r.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(s){a=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(s){i=s}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(s){o=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($r.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(g){x=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,m=0,x=0,g=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=u.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,C){return S.concat(y.splitTextToSize(C,_))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)m<(g=this.getStringUnitWidth(l[b],{font:f})*d)&&(m=g);return m!==0&&(x=l.length),{w:m/=h,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,m&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};e.table=function(l,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var m,x,g,y,_=[],b=[],S=[],C={},E={},O=[],T=[],M=(h=h||{}).autoSize||!1,L=h.printHeaders!==!1,z=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),R=typeof h.padding=="number"?h.padding:3,j=h.headerBackgroundColor||"#c8c8c8",V=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=V,this.setFontSize(z),f==null)b=_=Object.keys(d[0]),S=_.map(function(){return"left"});else if(Array.isArray(f)&&wa(f[0])==="object")for(_=f.map(function(G){return G.name}),b=f.map(function(G){return G.prompt||G.name||""}),S=f.map(function(G){return G.align||"left"}),m=0;m<f.length;m+=1)E[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(b=_=f,S=_.map(function(){return"left"}));if(M||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<_.length;m+=1){for(C[y=_[m]]=d.map(function(G){return G[y]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(b[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=C[y],this.setFont(void 0,"normal"),g=0;g<x.length;g+=1)O.push(this.getTextDimensions(x[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[y]=Math.max.apply(null,O)+R+R,O=[]}if(L){var Z={};for(m=0;m<_.length;m+=1)Z[_[m]]={},Z[_[m]].text=b[m],Z[_[m]].align=S[m];var te=s.call(this,Z,E);T=_.map(function(G){return new i(l,u,E[G],te,Z[G].text,void 0,Z[G].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var q=f.reduce(function(G,J){return G[J.name]=J.align,G},{});for(m=0;m<d.length;m+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:m,data:d[m]},this);var Y=s.call(this,d[m],E);for(g=0;g<_.length;g+=1){var U=d[m][_[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:m,col:g,data:U},this),o.call(this,new i(l,u,E[_[g]],Y,U,m+2,q[_[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var s=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/h+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}($r.API);var Sne={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ane=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],u8=bne(Ane),Nne=[100,200,300,400,500,600,700,800,900],N7e=bne(Nne);function d8(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return Sne[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof u8[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function eW(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var k7e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rW(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function E7e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},k7e,r.genericFontFamilies||{}),i=null,o=null,s=0;s<t.length;++s)if(a[(i=d8(t[s])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+rW(i)+"' and default family '"+n+"'.");if(o=function(l,u){if(u[l])return u[l];var d=u8[l],f=d<=u8.normal?-1:1,h=eW(u,Ane,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,o),o=function(l,u){if(u[l])return u[l];for(var d=Sne[l],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+l)}(i.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=N7e[l],f=eW(u,Nne,d,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+rW(i)+"'.");return o}function nW(e){return e.trimLeft()}function C7e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function P7e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Sb,aW,iW,HP=["times"];(function(e){var t,r,n,a,i,o,s,l,u,d=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=D;Object.defineProperty(this,"pdf",{get:function(){return K}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Pe){Q=!!Pe}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Pe){ae=!!Pe}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Pe){isNaN(Pe)||(se=Pe)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(Pe){isNaN(Pe)||(fe=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Pe){var ge;typeof Pe=="number"?ge=[Pe,Pe,Pe,Pe]:((ge=new Array(4))[0]=Pe[0],ge[1]=Pe.length>=2?Pe[1]:ge[0],ge[2]=Pe.length>=3?Pe[2]:ge[0],ge[3]=Pe.length>=4?Pe[3]:ge[1]),u.margin=ge}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Pe){ie=Pe}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(Pe){X=Pe}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(Pe){ue=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Pe){Pe instanceof d&&(u=Pe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Pe){u.path=Pe}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(Pe){de=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var ge;ge=h(Pe),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var ge=h(Pe);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var re=null;function ke(Pe,ge){if(re===null){var Ye=function(Qe){var st=[];return Object.keys(Qe).forEach(function(Pt){Qe[Pt].forEach(function(ft){var _e=null;switch(ft){case"bold":_e={family:Pt,weight:"bold"};break;case"italic":_e={family:Pt,style:"italic"};break;case"bolditalic":_e={family:Pt,weight:"bold",style:"italic"};break;case"":case"normal":_e={family:Pt}}_e!==null&&(_e.ref={name:Pt,style:ft},st.push(_e))})}),st}(Pe.getFontList());re=function(Qe){for(var st={},Pt=0;Pt<Qe.length;++Pt){var ft=d8(Qe[Pt]),_e=ft.family,Te=ft.stretch,qe=ft.style,yt=ft.weight;st[_e]=st[_e]||{},st[_e][Te]=st[_e][Te]||{},st[_e][Te][qe]=st[_e][Te][qe]||{},st[_e][Te][qe][yt]=ft}return st}(Ye.concat(ge))}return re}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(Pe){re=null,Re=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var ge;if(this.ctx.font=Pe,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var Ye=ge[1];ge[2];var Qe=ge[3],st=ge[4];ge[5];var Pt=ge[6],ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(st)[2];st=Math.floor(ft==="px"?parseFloat(st)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(st)*this.pdf.getFontSize():parseFloat(st)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(st);var _e=function(Ze){var _t,pt,Pr=[],Bt=Ze.trim();if(Bt==="")return HP;if(Bt in tW)return[tW[Bt]];for(;Bt!=="";){switch(pt=null,_t=(Bt=nW(Bt)).charAt(0)){case'"':case"'":pt=C7e(Bt.substring(1),_t);break;default:pt=P7e(Bt)}if(pt===null||(Pr.push(pt[0]),(Bt=nW(pt[1]))!==""&&Bt.charAt(0)!==","))return HP;Bt=Bt.replace(/^,/,"")}return Pr}(Pt);if(this.fontFaces){var Te=E7e(ke(this.pdf,this.fontFaces),_e.map(function(Ze){return{family:Ze,stretch:"normal",weight:Qe,style:Ye}}));this.pdf.setFont(Te.ref.name,Te.ref.style)}else{var qe="";(Qe==="bold"||parseInt(Qe,10)>=700||Ye==="bold")&&(qe="bold"),Ye==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var yt="",vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ht=0;ht<_e.length;ht++){if(this.pdf.internal.getFont(_e[ht],qe,{noFallback:!0,disableWarning:!0})!==void 0){yt=_e[ht];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(_e[ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)yt=_e[ht],qe="bold";else if(this.pdf.internal.getFont(_e[ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){yt=_e[ht],qe="normal";break}}if(yt===""){for(var Ie=0;Ie<_e.length;Ie++)if(vt[_e[Ie]]){yt=vt[_e[Ie]];break}}yt=yt===""?"Times":yt,this.pdf.setFont(yt,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){C.call(this,"fill",!1)},f.prototype.stroke=function(){C.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,K){if(isNaN(D)||isNaN(K))throw Ea.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(D,K)},f.prototype.closePath=function(){var D=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&wa(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){D=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},f.prototype.lineTo=function(D,K){if(isNaN(D)||isNaN(K))throw Ea.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,K,Q,ae){if(isNaN(Q)||isNaN(ae)||isNaN(D)||isNaN(K))throw Ea.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(Q,ae)),fe=this.ctx.transform.applyToPoint(new o(D,K));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},f.prototype.bezierCurveTo=function(D,K,Q,ae,se,fe){if(isNaN(se)||isNaN(fe)||isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae))throw Ea.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(se,fe)),X=this.ctx.transform.applyToPoint(new o(D,K)),ue=this.ctx.transform.applyToPoint(new o(Q,ae));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:ue.x,y2:ue.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},f.prototype.arc=function(D,K,Q,ae,se,fe){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae)||isNaN(se))throw Ea.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(D,K));D=ie.x,K=ie.y;var X=this.ctx.transform.applyToPoint(new o(0,Q)),ue=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(X.x-ue.x,2)+Math.pow(X.y-ue.y,2))}Math.abs(se-ae)>=2*Math.PI&&(ae=0,se=2*Math.PI),this.path.push({type:"arc",x:D,y:K,radius:Q,startAngle:ae,endAngle:se,counterclockwise:fe})},f.prototype.arcTo=function(D,K,Q,ae,se){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,K,Q,ae){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae))throw Ea.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,K),this.lineTo(D+Q,K),this.lineTo(D+Q,K+ae),this.lineTo(D,K+ae),this.lineTo(D,K),this.lineTo(D+Q,K),this.lineTo(D,K)},f.prototype.fillRect=function(D,K,Q,ae){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae))throw Ea.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,K,Q,ae),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},f.prototype.strokeRect=function(D,K,Q,ae){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae))throw Ea.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(D,K,Q,ae),this.stroke())},f.prototype.clearRect=function(D,K,Q,ae){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae))throw Ea.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,K,Q,ae))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(K),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var K,Q,ae,se;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))K=0,Q=0,ae=0,se=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(fe!==null)K=parseInt(fe[1]),Q=parseInt(fe[2]),ae=parseInt(fe[3]),se=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)K=parseInt(fe[1]),Q=parseInt(fe[2]),ae=parseInt(fe[3]),se=parseFloat(fe[4]);else{if(se=1,typeof D=="string"&&D.charAt(0)!=="#"){var ie=new gne(D);D=ie.ok?ie.toHex():"#000000"}D.length===4?(K=D.substring(1,2),K+=K,Q=D.substring(2,3),Q+=Q,ae=D.substring(3,4),ae+=ae):(K=D.substring(1,3),Q=D.substring(3,5),ae=D.substring(5,7)),K=parseInt(K,16),Q=parseInt(Q,16),ae=parseInt(ae,16)}}return{r:K,g:Q,b:ae,a:se,style:D}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,K,Q,ae){if(isNaN(K)||isNaN(Q)||typeof D!="string")throw Ea.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!m.call(this)){var se=Y(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;R.call(this,{text:D,x:K,y:Q,scale:fe,angle:se,align:this.textAlign,maxWidth:ae})}},f.prototype.strokeText=function(D,K,Q,ae){if(isNaN(K)||isNaN(Q)||typeof D!="string")throw Ea.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ae=isNaN(ae)?void 0:ae;var se=Y(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;R.call(this,{text:D,x:K,y:Q,scale:fe,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ae})}},f.prototype.measureText=function(D){if(typeof D!="string")throw Ea.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Q=this.pdf.internal.scaleFactor,ae=K.internal.getFontSize(),se=K.getStringUnitWidth(D)*ae/K.internal.scaleFactor,fe=function(ie){var X=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return X}}),this};return new fe({width:se*=Math.round(96*Q/72*1e4)/1e4})},f.prototype.scale=function(D,K){if(isNaN(D)||isNaN(K))throw Ea.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new l(D,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.rotate=function(D){if(isNaN(D))throw Ea.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(D,K){if(isNaN(D)||isNaN(K))throw Ea.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new l(1,0,0,1,D,K);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.transform=function(D,K,Q,ae,se,fe){if(isNaN(D)||isNaN(K)||isNaN(Q)||isNaN(ae)||isNaN(se)||isNaN(fe))throw Ea.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new l(D,K,Q,ae,se,fe);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(D,K,Q,ae,se,fe){D=isNaN(D)?1:D,K=isNaN(K)?0:K,Q=isNaN(Q)?0:Q,ae=isNaN(ae)?1:ae,se=isNaN(se)?0:se,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(D,K,Q,ae,se,fe)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,K,Q,ae,se,fe,ie,X,ue){var de=this.pdf.getImageProperties(D),re=1,ke=1,Re=1,Pe=1;ae!==void 0&&X!==void 0&&(Re=X/ae,Pe=ue/se,re=de.width/ae*X/ae,ke=de.height/se*ue/se),fe===void 0&&(fe=K,ie=Q,K=0,Q=0),ae!==void 0&&X===void 0&&(X=ae,ue=se),ae===void 0&&X===void 0&&(X=de.width,ue=de.height);for(var ge,Ye=this.ctx.transform.decompose(),Qe=Y(Ye.rotate.shx),st=new l,Pt=(st=(st=(st=st.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new s(fe-K*Re,ie-Q*Pe,ae*re,se*ke)),ft=y.call(this,Pt),_e=[],Te=0;Te<ft.length;Te+=1)_e.indexOf(ft[Te])===-1&&_e.push(ft[Te]);if(S(_e),this.autoPaging)for(var qe=_e[0],yt=_e[_e.length-1],vt=qe;vt<yt+1;vt++){this.pdf.setPage(vt);var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=vt===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=vt===1?0:Ze+(vt-2)*_t;if(this.ctx.clip_path.length!==0){var Pr=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ge,this.posX+this.margin[3],-pt+Ie+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Pr}var Bt=JSON.parse(JSON.stringify(Pt));Bt=b([Bt],this.posX+this.margin[3],-pt+Ie+this.ctx.prevPageLastElemOffset)[0];var dr=(vt>qe||vt<yt)&&g.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,_t,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Bt.x,Bt.y,Bt.w,Bt.h,null,null,Qe),dr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Qe)};var y=function(D,K,Q){var ae=[];K=K||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ae.push(Math.floor((D.y+se)/Q)+1);break;case"arc":ae.push(Math.floor((D.y+se-D.radius)/Q)+1),ae.push(Math.floor((D.y+se+D.radius)/Q)+1);break;case"qct":var fe=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ae.push(Math.floor((fe.y+se)/Q)+1),ae.push(Math.floor((fe.y+fe.h+se)/Q)+1);break;case"bct":var ie=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ae.push(Math.floor((ie.y+se)/Q)+1),ae.push(Math.floor((ie.y+ie.h+se)/Q)+1);break;case"rect":ae.push(Math.floor((D.y+se)/Q)+1),ae.push(Math.floor((D.y+D.h+se)/Q)+1)}for(var X=0;X<ae.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<ae[X];)_.call(this);return ae},_=function(){var D=this.fillStyle,K=this.strokeStyle,Q=this.font,ae=this.lineCap,se=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=K,this.font=Q,this.lineCap=ae,this.lineWidth=se,this.lineJoin=fe},b=function(D,K,Q){for(var ae=0;ae<D.length;ae++)switch(D[ae].type){case"bct":D[ae].x2+=K,D[ae].y2+=Q;case"qct":D[ae].x1+=K,D[ae].y1+=Q;case"mt":case"lt":case"arc":default:D[ae].x+=K,D[ae].y+=Q}return D},S=function(D){return D.sort(function(K,Q){return K-Q})},C=function(D,K){for(var Q,ae,se=this.fillStyle,fe=this.strokeStyle,ie=this.lineCap,X=this.lineWidth,ue=Math.abs(X*this.ctx.transform.scaleX),de=this.lineJoin,re=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Re=[],Pe=0;Pe<ke.length;Pe++)if(ke[Pe].x!==void 0)for(var ge=y.call(this,ke[Pe]),Ye=0;Ye<ge.length;Ye+=1)Re.indexOf(ge[Ye])===-1&&Re.push(ge[Ye]);for(var Qe=0;Qe<Re.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<Re[Qe];)_.call(this);if(S(Re),this.autoPaging)for(var st=Re[0],Pt=Re[Re.length-1],ft=st;ft<Pt+1;ft++){this.pdf.setPage(ft),this.fillStyle=se,this.strokeStyle=fe,this.lineCap=ie,this.lineWidth=ue,this.lineJoin=de;var _e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=ft===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],vt=ft===1?0:qe+(ft-2)*yt;if(this.ctx.clip_path.length!==0){var ht=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Q,this.posX+this.margin[3],-vt+Te+this.ctx.prevPageLastElemOffset),E.call(this,D,!0),this.path=ht}if(ae=JSON.parse(JSON.stringify(re)),this.path=b(ae,this.posX+this.margin[3],-vt+Te+this.ctx.prevPageLastElemOffset),K===!1||ft===0){var Ie=(ft>st||ft<Pt)&&g.call(this);Ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_e,yt,null).clip().discardPath()),E.call(this,D,K),Ie&&this.pdf.restoreGraphicsState()}this.lineWidth=X}else this.lineWidth=ue,E.call(this,D,K),this.lineWidth=X;this.path=re},E=function(D,K){if((D!=="stroke"||K||!x.call(this))&&(D==="stroke"||K||!m.call(this))){for(var Q,ae,se=[],fe=this.path,ie=0;ie<fe.length;ie++){var X=fe[ie];switch(X.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:X,deltas:[],abs:[]});break;case"lt":var ue=se.length;if(fe[ie-1]&&!isNaN(fe[ie-1].x)&&(Q=[X.x-fe[ie-1].x,X.y-fe[ie-1].y],ue>0)){for(;ue>=0;ue--)if(se[ue-1].close!==!0&&se[ue-1].begin!==!0){se[ue-1].deltas.push(Q),se[ue-1].abs.push(X);break}}break;case"bct":Q=[X.x1-fe[ie-1].x,X.y1-fe[ie-1].y,X.x2-fe[ie-1].x,X.y2-fe[ie-1].y,X.x-fe[ie-1].x,X.y-fe[ie-1].y],se[se.length-1].deltas.push(Q);break;case"qct":var de=fe[ie-1].x+2/3*(X.x1-fe[ie-1].x),re=fe[ie-1].y+2/3*(X.y1-fe[ie-1].y),ke=X.x+2/3*(X.x1-X.x),Re=X.y+2/3*(X.y1-X.y),Pe=X.x,ge=X.y;Q=[de-fe[ie-1].x,re-fe[ie-1].y,ke-fe[ie-1].x,Re-fe[ie-1].y,Pe-fe[ie-1].x,ge-fe[ie-1].y],se[se.length-1].deltas.push(Q);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(X)}}ae=K?null:D==="stroke"?"stroke":"fill";for(var Ye=!1,Qe=0;Qe<se.length;Qe++)if(se[Qe].arc)for(var st=se[Qe].abs,Pt=0;Pt<st.length;Pt++){var ft=st[Pt];ft.type==="arc"?M.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,K,!Ye):j.call(this,ft.x,ft.y),Ye=!0}else if(se[Qe].close===!0)this.pdf.internal.out("h"),Ye=!1;else if(se[Qe].begin!==!0){var _e=se[Qe].start.x,Te=se[Qe].start.y;V.call(this,se[Qe].deltas,_e,Te),Ye=!0}ae&&L.call(this,ae),K&&z.call(this)}},O=function(D){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-Q;case"top":return D+K-Q;case"hanging":return D+K-2*Q;case"middle":return D+K/2-Q;case"ideographic":return D;case"alphabetic":default:return D}},T=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(K,Q){this.colorStops.push([K,Q])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(D,K,Q,ae,se,fe,ie,X,ue){for(var de=te.call(this,Q,ae,se,fe),re=0;re<de.length;re++){var ke=de[re];re===0&&(ue?P.call(this,ke.x1+D,ke.y1+K):j.call(this,ke.x1+D,ke.y1+K)),Z.call(this,D,K,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}X?z.call(this):L.call(this,ie)},L=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(D,K){this.pdf.internal.out(r(D)+" "+n(K)+" m")},R=function(D){var K;switch(D.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var Q=this.pdf.getTextDimensions(D.text),ae=O.call(this,D.y),se=T.call(this,ae)-Q.h,fe=this.ctx.transform.applyToPoint(new o(D.x,ae)),ie=this.ctx.transform.decompose(),X=new l;X=(X=(X=X.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var ue,de,re,ke=this.ctx.transform.applyToRectangle(new s(D.x,ae,Q.w,Q.h)),Re=X.applyToRectangle(new s(D.x,se,Q.w,Q.h)),Pe=y.call(this,Re),ge=[],Ye=0;Ye<Pe.length;Ye+=1)ge.indexOf(Pe[Ye])===-1&&ge.push(Pe[Ye]);if(S(ge),this.autoPaging)for(var Qe=ge[0],st=ge[ge.length-1],Pt=Qe;Pt<st+1;Pt++){this.pdf.setPage(Pt);var ft=Pt===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[2],qe=Te-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],vt=yt-this.margin[3],ht=Pt===1?0:_e+(Pt-2)*qe;if(this.ctx.clip_path.length!==0){var Ie=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ue,this.posX+this.margin[3],-1*ht+ft),E.call(this,"fill",!0),this.path=Ie}var Ze=b([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-ht+ft+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*D.scale),re=this.lineWidth,this.lineWidth=re*D.scale);var _t=this.autoPaging!=="text";if(_t||Ze.y+Ze.h<=Te){if(_t||Ze.y>=ft&&Ze.x<=yt){var pt=_t?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||yt-Ze.x)[0],Pr=b([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-ht+ft+this.ctx.prevPageLastElemOffset)[0],Bt=_t&&(Pt>Qe||Pt<st)&&g.call(this);Bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,qe,null).clip().discardPath()),this.pdf.text(pt,Pr.x,Pr.y,{angle:D.angle,align:K,renderingMode:D.renderingMode}),Bt&&this.pdf.restoreGraphicsState()}}else Ze.y<Te&&(this.ctx.prevPageLastElemOffset+=Te-Ze.y);D.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=re)}else D.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*D.scale),re=this.lineWidth,this.lineWidth=re*D.scale),this.pdf.text(D.text,fe.x+this.posX,fe.y+this.posY,{angle:D.angle,align:K,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=re)},j=function(D,K,Q,ae){Q=Q||0,ae=ae||0,this.pdf.internal.out(r(D+Q)+" "+n(K+ae)+" l")},V=function(D,K,Q){return this.pdf.lines(D,K,Q,null,null)},Z=function(D,K,Q,ae,se,fe,ie,X){this.pdf.internal.out([t(a(Q+D)),t(i(ae+K)),t(a(se+D)),t(i(fe+K)),t(a(ie+D)),t(i(X+K)),"c"].join(" "))},te=function(D,K,Q,ae){for(var se=2*Math.PI,fe=Math.PI/2;K>Q;)K-=se;var ie=Math.abs(Q-K);ie<se&&ae&&(ie=se-ie);for(var X=[],ue=ae?-1:1,de=K;ie>1e-5;){var re=de+ue*Math.min(ie,fe);X.push(q.call(this,D,de,re)),ie-=Math.abs(re-de),de=re}return X},q=function(D,K,Q){var ae=(Q-K)/2,se=D*Math.cos(ae),fe=D*Math.sin(ae),ie=se,X=-fe,ue=ie*ie+X*X,de=ue+ie*se+X*fe,re=4/3*(Math.sqrt(2*ue*de)-de)/(ie*fe-X*se),ke=ie-re*X,Re=X+re*ie,Pe=ke,ge=-Re,Ye=ae+K,Qe=Math.cos(Ye),st=Math.sin(Ye);return{x1:D*Math.cos(K),y1:D*Math.sin(K),x2:ke*Qe-Re*st,y2:ke*st+Re*Qe,x3:Pe*Qe-ge*st,y3:Pe*st+ge*Qe,x4:D*Math.cos(Q),y4:D*Math.sin(Q)}},Y=function(D){return 180*D/Math.PI},U=function(D,K,Q,ae,se,fe){var ie=D+.5*(Q-D),X=K+.5*(ae-K),ue=se+.5*(Q-se),de=fe+.5*(ae-fe),re=Math.min(D,se,ie,ue),ke=Math.max(D,se,ie,ue),Re=Math.min(K,fe,X,de),Pe=Math.max(K,fe,X,de);return new s(re,Re,ke-re,Pe-Re)},G=function(D,K,Q,ae,se,fe,ie,X){var ue,de,re,ke,Re,Pe,ge,Ye,Qe,st,Pt,ft,_e,Te,qe=Q-D,yt=ae-K,vt=se-Q,ht=fe-ae,Ie=ie-se,Ze=X-fe;for(de=0;de<41;de++)Qe=(ge=(re=D+(ue=de/40)*qe)+ue*((Re=Q+ue*vt)-re))+ue*(Re+ue*(se+ue*Ie-Re)-ge),st=(Ye=(ke=K+ue*yt)+ue*((Pe=ae+ue*ht)-ke))+ue*(Pe+ue*(fe+ue*Ze-Pe)-Ye),de==0?(Pt=Qe,ft=st,_e=Qe,Te=st):(Pt=Math.min(Pt,Qe),ft=Math.min(ft,st),_e=Math.max(_e,Qe),Te=Math.max(Te,st));return new s(Math.round(Pt),Math.round(ft),Math.round(_e-Pt),Math.round(Te-ft))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,K,Q=(D=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:K}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})($r.API),function(e){var t=function(i){var o,s,l,u,d,f,h,m,x,g;for(s=[],l=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>l;l+=4)(d=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(f=(d=((d=((d=((d=(d-(g=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,s.push(f+33,h+33,m+33,x+33,g+33)):s.push(122);return function(y,_){for(var b=_;b>0;b--)y.pop()}(s,o.length),String.fromCharCode.apply(String,s)+"~>"},r=function(i){var o,s,l,u,d,f=String,h="length",m=255,x="charCodeAt",g="slice",y="replace";for(i[g](-2),i=i[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),l=[],u=0,d=(i+=o="uuuuu"[g](i[h]%5||5))[h];d>u;u+=5)s=52200625*(i[x](u)-33)+614125*(i[x](u+1)-33)+7225*(i[x](u+2)-33)+85*(i[x](u+3)-33)+(i[x](u+4)-33),l.push(m&s>>24,m&s>>16,m&s>>8,m&s);return function(_,b){for(var S=b;S>0;S--)_.pop()}(l,o[h]),f.fromCharCode.apply(f,l)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var s="",l=0;l<i.length;l+=2)s+=String.fromCharCode("0x"+(i[l]+i[l+1]));return s},a=function(i){for(var o=new Uint8Array(i.length),s=i.length;s--;)o[s]=i.charCodeAt(s);return i=(o=i8(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,o){var s=0,l=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}($r.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var s=void 0;try{s=function(l,u,d){var f=new XMLHttpRequest,h=0,m=function(x){var g=x.length,y=[],_=String.fromCharCode;for(h=0;h<g;h+=1)y.push(_(255&x.charCodeAt(h)));return y.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(m(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,o)}catch{}return s}(t,r,n)},e.loadImageFile=e.loadFile}($r.API),function(e){function t(){return(Jr.html2canvas?Promise.resolve(Jr.html2canvas):xh(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Jr.DOMPurify?Promise.resolve(Jr.DOMPurify):xh(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var s=wa(o);return s==="undefined"?"undefined":s==="string"||o instanceof String?"string":s==="number"||o instanceof Number?"number":s==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":s==="object"?"object":"unknown"},a=function(o,s){var l=document.createElement(o);for(var u in s.className&&(l.className=s.className),s.innerHTML&&s.dompurify&&(l.innerHTML=s.dompurify.sanitize(s.innerHTML)),s.style)l.style[u]=s.style[u];return l},i=function o(s){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(s)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,s){return o.__proto__=s||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,s){return this.then(function(){switch(s=s||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(l){return this.set({src:a("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},s=function l(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(l(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);s.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(s),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(s){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,s(this.prop.container,l)}).then(function(s){(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(s){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],x=m.src.find(function(g){return g.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),s(this.prop.container,f)}).then(function(s){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(s),this.prop.canvas=s,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,s,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,s):this.outputPdf(o,s)},i.prototype.outputPdf=function(o,s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,s)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var s=Object.keys(o||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(s)})},i.prototype.get=function(o,s){return this.then(function(){var l=o in i.template.prop?this.prop[o]:this.opt[o];return s?s(l):l})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function s(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||$r.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:s(o.inner.width,o.k),height:s(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,s,l,u){return o!=null&&(this.progress.val=o),s!=null&&(this.progress.state=s),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,s,l,u){return this.setProgress(o?this.progress.val+o:null,s||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,s){var l=this;return this.thenCore(o,s,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,u),f}).then(u,d).then(function(f){return l.updateProgress(1),f})})},i.prototype.thenCore=function(o,s,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),s&&(s=s.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),d=l.call(u,o,s);return i.convert(d,this.__proto__)},i.prototype.thenExternal=function(o,s){return Promise.prototype.then.call(this,o,s)},i.prototype.thenList=function(o){var s=this;return o.forEach(function(l){s=s.thenCore(l)}),s},i.prototype.catch=function(o){o&&(o=o.bind(this));var s=Promise.prototype.catch.call(this,o);return i.convert(s,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,$r.getPageSize=function(o,s,l){if(wa(o)==="object"){var u=o;o=u.orientation,s=u.unit||s,l=u.format||l}s=s||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,f=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(s){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+s}var m,x=0,g=0;if(h.hasOwnProperty(f))x=h[f][1]/d,g=h[f][0]/d;else try{x=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>x&&(m=g,g=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>g&&(m=g,g=x,x=m)}return{width:g,height:x,unit:s,k:d,orientation:o}},e.html=function(o,s){(s=s||{}).callback=s.callback||function(){},s.html2canvas=s.html2canvas||{},s.html2canvas.canvas=s.html2canvas.canvas||this.canvas,s.jsPDF=s.jsPDF||this,s.fontFaces=s.fontFaces?s.fontFaces.map(d8):null;var l=new i(s);return s.worker?l:l.from(o).doCallback()}}($r.API),$r.API.addJS=function(e){return iW=e,this.internal.events.subscribe("postPutResources",function(){Sb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Sb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),aW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+iW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Sb!==void 0&&aW!==void 0&&this.internal.out("/Names <</JavaScript "+Sb+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],s=n.exec(o);if(s!=null){var l=s[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(i=0;i<u;i++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<d.length;i++)r.internal.write("(page_"+(i+1)+")"+d[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var s=this.count=this.count_r({count:0},o);if(s>0&&this.line("/Count "+s),o.options&&o.options.pageNumber){var l=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}($r.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,s){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var h,m=256*f.charCodeAt(4)+f.charCodeAt(5),x=f.length,g={width:0,height:0,numcomponents:1},y=4;y<x;y+=2){if(y+=m,t.indexOf(f.charCodeAt(y+1))!==-1){h=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),g={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:h,numcomponents:f.charCodeAt(y+9)};break}m=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:s,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}($r.API);var Dv,Ab,oW,sW,lW,T7e=function(){var e,t,r;function n(i){var o,s,l,u,d,f,h,m,x,g,y,_,b,S;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),x=(function(){var C,E;for(E=[],C=0;C<4;++C)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,_=0;0<=o?_<o:_>o;0<=o?++_:--_)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(y=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,y.slice(0,h)),this.text[m]=String.fromCharCode.apply(String,y.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,s=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*s,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,s;for(s=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)s.push(this.data[this.pos++]);return s},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,s=new Uint8Array(this.width*this.height*o),l=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function d(f,h,m,x){var g,y,_,b,S,C,E,O,T,M,L,z,P,R,j,V,Z,te,q,Y,U,G=Math.ceil((u.width-f)/m),J=Math.ceil((u.height-h)/x),D=u.width==G&&u.height==J;for(R=o*G,z=D?s:new Uint8Array(R*J),C=i.length,P=0,y=0;P<J&&l<C;){switch(i[l++]){case 0:for(b=Z=0;Z<R;b=Z+=1)z[y++]=i[l++];break;case 1:for(b=te=0;te<R;b=te+=1)g=i[l++],S=b<o?0:z[y-o],z[y++]=(g+S)%256;break;case 2:for(b=q=0;q<R;b=q+=1)g=i[l++],_=(b-b%o)/o,j=P&&z[(P-1)*R+_*o+b%o],z[y++]=(j+g)%256;break;case 3:for(b=Y=0;Y<R;b=Y+=1)g=i[l++],_=(b-b%o)/o,S=b<o?0:z[y-o],j=P&&z[(P-1)*R+_*o+b%o],z[y++]=(g+Math.floor((S+j)/2))%256;break;case 4:for(b=U=0;U<R;b=U+=1)g=i[l++],_=(b-b%o)/o,S=b<o?0:z[y-o],P===0?j=V=0:(j=z[(P-1)*R+_*o+b%o],V=_&&z[(P-1)*R+(_-1)*o+b%o]),E=S+j-V,O=Math.abs(E-S),M=Math.abs(E-j),L=Math.abs(E-V),T=O<=M&&O<=L?S:M<=L?j:V,z[y++]=(g+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!D){var K=((h+P*x)*u.width+f)*o,Q=P*R;for(b=0;b<G;b+=1){for(var ae=0;ae<o;ae+=1)s[K++]=z[Q++];K+=(m-1)*o}}P++}}return i=l7e(i),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),s},n.prototype.decodePalette=function(){var i,o,s,l,u,d,f,h,m;for(s=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+s.length),l=0,i=0,o=f=0,h=s.length;f<h;o=f+=3)u[l++]=s[o],u[l++]=s[o+1],u[l++]=s[o+2],u[l++]=(m=d[i++])!=null?m:255;return u},n.prototype.copyToImageData=function(i,o){var s,l,u,d,f,h,m,x,g,y,_;if(l=this.colors,g=null,s=this.hasAlphaChannel,this.palette.length&&(g=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),l=4,s=!0),x=(u=i.data||i).length,f=g||o,d=h=0,l===1)for(;d<x;)m=g?4*o[d/4]:h,y=f[m++],u[d++]=y,u[d++]=y,u[d++]=y,u[d++]=s?f[m++]:255,h=m;else for(;d<x;)m=g?4*o[d/4]:h,u[d++]=f[m++],u[d++]=f[m++],u[d++]=f[m++],u[d++]=s?f[m++]:255,h=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Jr)==="[object Window]"){try{t=Jr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,s,l,u,d,f,h,m;if(this.animation){for(m=[],s=d=0,f=(h=this.animation.frames).length;d<f;s=++d)o=h[s],l=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,m.push(o.image=e(l));return m}},n.prototype.renderFrame=function(i,o){var s,l,u;return s=(l=this.animation.frames)[o],u=l[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),s.blendOp===0&&i.clearRect(s.xOffset,s.yOffset,s.width,s.height),i.drawImage(s.image,s.xOffset,s.yOffset)},n.prototype.animate=function(i){var o,s,l,u,d,f,h=this;return s=0,f=this.animation,u=f.numFrames,l=f.frames,d=f.numPlays,(o=function(){var m,x;if(m=s++%u,x=l[m],h.renderFrame(i,m),u>1&&s/u<d)return h.animation._timeout=setTimeout(o,x.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,s;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(s=o.createImageData(this.width,this.height),this.copyToImageData(s,this.decodePixels()),o.putImageData(s,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function O7e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var s=null,l=null;i&&(s=t,l=o,t+=3*o);var u=!0,d=[],f=0,h=null,m=0,x=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,x=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&g)==0&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,C=e[t++],E=C>>6&1,O=1<<(7&C)+1,T=s,M=l,L=!1;C>>7&&(L=!0,T=t,M=O,t+=3*O);var z=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:y,y:_,width:b,height:S,has_local_palette:L,palette_offset:T,palette_size:M,data_offset:z,data_length:t-z,transparent_index:h,interlaced:!!E,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(R){if(R<0||R>=d.length)throw new Error("Frame index out of range.");return d[R]},this.decodeAndBlitFrameBGRA=function(R,j){var V=this.frameInfo(R),Z=V.width*V.height,te=new Uint8Array(Z);cW(e,V.data_offset,te,Z);var q=V.palette_offset,Y=V.transparent_index;Y===null&&(Y=256);var U=V.width,G=r-U,J=U,D=4*(V.y*r+V.x),K=4*((V.y+V.height)*r+V.x),Q=D,ae=4*G;V.interlaced===!0&&(ae+=4*r*7);for(var se=8,fe=0,ie=te.length;fe<ie;++fe){var X=te[fe];if(J===0&&(J=U,(Q+=ae)>=K&&(ae=4*G+4*r*(se-1),Q=D+(U+G)*(se<<1),se>>=1)),X===Y)Q+=4;else{var ue=e[q+3*X],de=e[q+3*X+1],re=e[q+3*X+2];j[Q++]=re,j[Q++]=de,j[Q++]=ue,j[Q++]=255}--J}},this.decodeAndBlitFrameRGBA=function(R,j){var V=this.frameInfo(R),Z=V.width*V.height,te=new Uint8Array(Z);cW(e,V.data_offset,te,Z);var q=V.palette_offset,Y=V.transparent_index;Y===null&&(Y=256);var U=V.width,G=r-U,J=U,D=4*(V.y*r+V.x),K=4*((V.y+V.height)*r+V.x),Q=D,ae=4*G;V.interlaced===!0&&(ae+=4*r*7);for(var se=8,fe=0,ie=te.length;fe<ie;++fe){var X=te[fe];if(J===0&&(J=U,(Q+=ae)>=K&&(ae=4*G+4*r*(se-1),Q=D+(U+G)*(se<<1),se>>=1)),X===Y)Q+=4;else{var ue=e[q+3*X],de=e[q+3*X+1],re=e[q+3*X+2];j[Q++]=ue,j[Q++]=de,j[Q++]=re,j[Q++]=255}--J}}}function cW(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,s=o+1,l=a+1,u=(1<<l)-1,d=0,f=0,h=0,m=e[t++],x=new Int32Array(4096),g=null;;){for(;d<16&&m!==0;)f|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<l)break;var y=f&u;if(f>>=l,d-=l,y!==i){if(y===o)break;for(var _=y<s?y:g,b=0,S=_;S>i;)S=x[S]>>8,++b;var C=S;if(h+b+(_!==y?1:0)>n)return void Ea.log("Warning, gif stream longer than expected.");r[h++]=C;var E=h+=b;for(_!==y&&(r[h++]=C),S=_;b--;)S=x[S],r[--E]=255&S,S>>=8;g!==null&&s<4096&&(x[s++]=g<<8|C,s>=u+1&&l<12&&(++l,u=u<<1|1)),g=y}else s=o+1,u=(1<<(l=a+1))-1,g=null}return h!==n&&Ea.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function GP(e){var t,r,n,a,i,o=Math.floor,s=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),m=new Array(64),x=new Array(64),g=[],y=0,_=7,b=new Array(64),S=new Array(64),C=new Array(64),E=new Array(256),O=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(D,K){for(var Q=0,ae=0,se=new Array,fe=1;fe<=16;fe++){for(var ie=1;ie<=D[fe];ie++)se[K[ae]]=[],se[K[ae]][0]=Q,se[K[ae]][1]=fe,ae++,Q++;Q*=2}return se}function q(D){for(var K=D[0],Q=D[1]-1;Q>=0;)K&1<<Q&&(y|=1<<_),Q--,--_<0&&(y==255?(Y(255),Y(0)):Y(y),_=7,y=0)}function Y(D){g.push(D)}function U(D){Y(D>>8&255),Y(255&D)}function G(D,K,Q,ae,se){for(var fe,ie=se[0],X=se[240],ue=function(st,Pt){var ft,_e,Te,qe,yt,vt,ht,Ie,Ze,_t,pt=0;for(Ze=0;Ze<8;++Ze){ft=st[pt],_e=st[pt+1],Te=st[pt+2],qe=st[pt+3],yt=st[pt+4],vt=st[pt+5],ht=st[pt+6];var Pr=ft+(Ie=st[pt+7]),Bt=ft-Ie,dr=_e+ht,Ir=_e-ht,Tr=Te+vt,ha=Te-vt,Xr=qe+yt,Na=qe-yt,En=Pr+Xr,pa=Pr-Xr,si=dr+Tr,Cn=dr-Tr;st[pt]=En+si,st[pt+4]=En-si;var kr=.707106781*(Cn+pa);st[pt+2]=pa+kr,st[pt+6]=pa-kr;var pn=.382683433*((En=Na+ha)-(Cn=Ir+Bt)),fo=.5411961*En+pn,Jn=1.306562965*Cn+pn,li=.707106781*(si=ha+Ir),lt=Bt+li,xt=Bt-li;st[pt+5]=xt+fo,st[pt+3]=xt-fo,st[pt+1]=lt+Jn,st[pt+7]=lt-Jn,pt+=8}for(pt=0,Ze=0;Ze<8;++Ze){ft=st[pt],_e=st[pt+8],Te=st[pt+16],qe=st[pt+24],yt=st[pt+32],vt=st[pt+40],ht=st[pt+48];var Fr=ft+(Ie=st[pt+56]),ma=ft-Ie,bt=_e+ht,mt=_e-ht,Jt=Te+vt,le=Te-vt,xe=qe+yt,ye=qe-yt,be=Fr+xe,Ae=Fr-xe,Se=bt+Jt,Ve=bt-Jt;st[pt]=be+Se,st[pt+32]=be-Se;var ut=.707106781*(Ve+Ae);st[pt+16]=Ae+ut,st[pt+48]=Ae-ut;var et=.382683433*((be=ye+le)-(Ve=mt+ma)),it=.5411961*be+et,Je=1.306562965*Ve+et,Dt=.707106781*(Se=le+mt),Yt=ma+Dt,or=ma-Dt;st[pt+40]=or+it,st[pt+24]=or-it,st[pt+8]=Yt+Je,st[pt+56]=Yt-Je,pt++}for(Ze=0;Ze<64;++Ze)_t=st[Ze]*Pt[Ze],m[Ze]=_t>0?_t+.5|0:_t-.5|0;return m}(D,K),de=0;de<64;++de)x[T[de]]=ue[de];var re=x[0]-Q;Q=x[0],re==0?q(ae[0]):(q(ae[h[fe=32767+re]]),q(f[fe]));for(var ke=63;ke>0&&x[ke]==0;)ke--;if(ke==0)return q(ie),Q;for(var Re,Pe=1;Pe<=ke;){for(var ge=Pe;x[Pe]==0&&Pe<=ke;)++Pe;var Ye=Pe-ge;if(Ye>=16){Re=Ye>>4;for(var Qe=1;Qe<=Re;++Qe)q(X);Ye&=15}fe=32767+x[Pe],q(se[(Ye<<4)+h[fe]]),q(f[fe]),Pe++}return ke!=63&&q(ie),Q}function J(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(K){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var se=o((Q[ae]*K+50)/100);se=Math.min(Math.max(se,1),255),s[T[ae]]=se}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var X=o((fe[ie]*K+50)/100);X=Math.min(Math.max(X,1),255),l[T[ie]]=X}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,re=0;re<8;re++)for(var ke=0;ke<8;ke++)u[de]=1/(s[T[de]]*ue[re]*ue[ke]*8),d[de]=1/(l[T[de]]*ue[re]*ue[ke]*8),de++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,K){K&&J(K),g=new Array,y=0,_=7,U(65496),U(65504),U(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),U(1),U(1),Y(0),Y(0),function(){U(65499),U(132),Y(0);for(var _e=0;_e<64;_e++)Y(s[_e]);Y(1);for(var Te=0;Te<64;Te++)Y(l[Te])}(),function(_e,Te){U(65472),U(17),Y(8),U(Te),U(_e),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(D.width,D.height),function(){U(65476),U(418),Y(0);for(var _e=0;_e<16;_e++)Y(M[_e+1]);for(var Te=0;Te<=11;Te++)Y(L[Te]);Y(16);for(var qe=0;qe<16;qe++)Y(z[qe+1]);for(var yt=0;yt<=161;yt++)Y(P[yt]);Y(1);for(var vt=0;vt<16;vt++)Y(R[vt+1]);for(var ht=0;ht<=11;ht++)Y(j[ht]);Y(17);for(var Ie=0;Ie<16;Ie++)Y(V[Ie+1]);for(var Ze=0;Ze<=161;Ze++)Y(Z[Ze])}(),U(65498),U(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var Q=0,ae=0,se=0;y=0,_=7,this.encode.displayName="_encode_";for(var fe,ie,X,ue,de,re,ke,Re,Pe,ge=D.data,Ye=D.width,Qe=D.height,st=4*Ye,Pt=0;Pt<Qe;){for(fe=0;fe<st;){for(de=st*Pt+fe,ke=-1,Re=0,Pe=0;Pe<64;Pe++)re=de+(Re=Pe>>3)*st+(ke=4*(7&Pe)),Pt+Re>=Qe&&(re-=st*(Pt+1+Re-Qe)),fe+ke>=st&&(re-=fe+ke-st+4),ie=ge[re++],X=ge[re++],ue=ge[re++],b[Pe]=(O[ie]+O[X+256>>0]+O[ue+512>>0]>>16)-128,S[Pe]=(O[ie+768>>0]+O[X+1024>>0]+O[ue+1280>>0]>>16)-128,C[Pe]=(O[ie+1280>>0]+O[X+1536>>0]+O[ue+1792>>0]>>16)-128;Q=G(b,u,Q,t,n),ae=G(S,d,ae,r,a),se=G(C,d,se,r,a),fe+=32}Pt+=8}if(_>=0){var ft=[];ft[1]=_+1,ft[0]=(1<<_+1)-1,q(ft)}return U(65497),new Uint8Array(g)},e=e||50,function(){for(var D=String.fromCharCode,K=0;K<256;K++)E[K]=D(K)}(),t=te(M,L),r=te(R,j),n=te(z,P),a=te(V,Z),function(){for(var D=1,K=2,Q=1;Q<=15;Q++){for(var ae=D;ae<K;ae++)h[32767+ae]=Q,f[32767+ae]=[],f[32767+ae][1]=Q,f[32767+ae][0]=ae;for(var se=-(K-1);se<=-D;se++)h[32767+se]=Q,f[32767+se]=[],f[32767+se][1]=Q,f[32767+se][0]=K-1+se;D<<=1,K<<=1}}(),function(){for(var D=0;D<256;D++)O[D]=19595*D,O[D+256>>0]=38470*D,O[D+512>>0]=7471*D+32768,O[D+768>>0]=-11059*D,O[D+1024>>0]=-21709*D,O[D+1280>>0]=32768*D+8421375,O[D+1536>>0]=-27439*D,O[D+1792>>0]=-5329*D}(),J(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Iu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function uW(e){function t(M){if(!M)throw Error("assert :P")}function r(M,L,z){for(var P=0;4>P;P++)if(M[L+P]!=z.charCodeAt(P))return!0;return!1}function n(M,L,z,P,R){for(var j=0;j<R;j++)M[L+j]=z[P+j]}function a(M,L,z,P){for(var R=0;R<P;R++)M[L+R]=z}function i(M){return new Int32Array(M)}function o(M,L){for(var z=[],P=0;P<M;P++)z.push(new L);return z}function s(M,L){var z=[];return function P(R,j,V){for(var Z=V[j],te=0;te<Z&&(R.push(V.length>j+1?[]:new L),!(V.length<j+1));te++)P(R[te],j+1,V)}(z,0,M),z}var l=function(){var M=this;function L(k,F){for(var H=1<<F-1>>>0;k&H;)H>>>=1;return H?(k&H-1)+H:k}function z(k,F,H,ne,oe){t(!(ne%H));do k[F+(ne-=H)]=oe;while(0<ne)}function P(k,F,H,ne,oe){if(t(2328>=oe),512>=oe)var he=i(512);else if((he=i(oe))==null)return 0;return function(me,ve,we,Ne,Be,nt){var at,Ke,Ot=ve,St=1<<we,ze=i(16),We=i(16);for(t(Be!=0),t(Ne!=null),t(me!=null),t(0<we),Ke=0;Ke<Be;++Ke){if(15<Ne[Ke])return 0;++ze[Ne[Ke]]}if(ze[0]==Be)return 0;for(We[1]=0,at=1;15>at;++at){if(ze[at]>1<<at)return 0;We[at+1]=We[at]+ze[at]}for(Ke=0;Ke<Be;++Ke)at=Ne[Ke],0<Ne[Ke]&&(nt[We[at]++]=Ke);if(We[15]==1)return(Ne=new R).g=0,Ne.value=nt[0],z(me,Ot,1,St,Ne),St;var kt,Nt=-1,Ct=St-1,fr=0,ar=1,Rr=1,ir=1<<we;for(Ke=0,at=1,Be=2;at<=we;++at,Be<<=1){if(ar+=Rr<<=1,0>(Rr-=ze[at]))return 0;for(;0<ze[at];--ze[at])(Ne=new R).g=at,Ne.value=nt[Ke++],z(me,Ot+fr,Be,ir,Ne),fr=L(fr,at)}for(at=we+1,Be=2;15>=at;++at,Be<<=1){if(ar+=Rr<<=1,0>(Rr-=ze[at]))return 0;for(;0<ze[at];--ze[at]){if(Ne=new R,(fr&Ct)!=Nt){for(Ot+=ir,kt=1<<(Nt=at)-we;15>Nt&&!(0>=(kt-=ze[Nt]));)++Nt,kt<<=1;St+=ir=1<<(kt=Nt-we),me[ve+(Nt=fr&Ct)].g=kt+we,me[ve+Nt].value=Ot-ve-Nt}Ne.g=at-we,Ne.value=nt[Ke++],z(me,Ot+(fr>>we),Be,ir,Ne),fr=L(fr,at)}}return ar!=2*We[15]-1?0:St}(k,F,H,ne,oe,he)}function R(){this.value=this.g=0}function j(){this.value=this.g=0}function V(){this.G=o(5,R),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ri,j)}function Z(k,F,H,ne){t(k!=null),t(F!=null),t(2147483648>ne),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=F,k.pa=H,k.Jd=F,k.Yc=H+ne,k.Zc=4<=ne?H+ne-4+1:H,fe(k)}function te(k,F){for(var H=0;0<F--;)H|=X(k,128)<<F;return H}function q(k,F){var H=te(k,F);return ie(k)?-H:H}function Y(k,F,H,ne){var oe,he=0;for(t(k!=null),t(F!=null),t(4294967288>ne),k.Sb=ne,k.Ra=0,k.u=0,k.h=0,4<ne&&(ne=4),oe=0;oe<ne;++oe)he+=F[H+oe]<<8*oe;k.Ra=he,k.bb=ne,k.oa=F,k.pa=H}function U(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<rp-8>>>0,++k.bb,k.u-=8;Q(k)&&(k.h=1,k.u=0)}function G(k,F){if(t(0<=F),!k.h&&F<=tp){var H=K(k)&ep[F];return k.u+=F,U(k),H}return k.h=1,k.u=0}function J(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(k){return k.Ra>>>(k.u&rp-1)>>>0}function Q(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>rp}function ae(k,F){k.u=F,k.h=Q(k)}function se(k){k.u>=np&&(t(k.u>=np),U(k))}function fe(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function ie(k){return te(k,1)}function X(k,F){var H=k.Ca;0>k.b&&fe(k);var ne=k.b,oe=H*F>>>8,he=(k.I>>>ne>oe)+0;for(he?(H-=oe,k.I-=oe+1<<ne>>>0):H=oe+1,ne=H,oe=0;256<=ne;)oe+=8,ne>>=8;return ne=7^oe+zo[ne],k.b-=ne,k.Ca=(H<<ne)-1,he}function ue(k,F,H){k[F+0]=H>>24&255,k[F+1]=H>>16&255,k[F+2]=H>>8&255,k[F+3]=H>>0&255}function de(k,F){return k[F+0]<<0|k[F+1]<<8}function re(k,F){return de(k,F)|k[F+2]<<16}function ke(k,F){return de(k,F)|de(k,F+2)<<16}function Re(k,F){var H=1<<F;return t(k!=null),t(0<F),k.X=i(H),k.X==null?0:(k.Mb=32-F,k.Xa=F,1)}function Pe(k,F){t(k!=null),t(F!=null),t(k.Xa==F.Xa),n(F.X,0,k.X,0,1<<F.Xa)}function ge(){this.X=[],this.Xa=this.Mb=0}function Ye(k,F,H,ne){t(H!=null),t(ne!=null);var oe=H[0],he=ne[0];return oe==0&&(oe=(k*he+F/2)/F),he==0&&(he=(F*oe+k/2)/k),0>=oe||0>=he?0:(H[0]=oe,ne[0]=he,1)}function Qe(k,F){return k+(1<<F)-1>>>F}function st(k,F){return((4278255360&k)+(4278255360&F)>>>0&4278255360)+((16711935&k)+(16711935&F)>>>0&16711935)>>>0}function Pt(k,F){M[F]=function(H,ne,oe,he,me,ve,we){var Ne;for(Ne=0;Ne<me;++Ne){var Be=M[k](ve[we+Ne-1],oe,he+Ne);ve[we+Ne]=st(H[ne+Ne],Be)}}}function ft(){this.ud=this.hd=this.jd=0}function _e(k,F){return((4278124286&(k^F))>>>1)+(k&F)>>>0}function Te(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function qe(k,F){return Te(k+(k-F+.5>>1))}function yt(k,F,H){return Math.abs(F-H)-Math.abs(k-H)}function vt(k,F,H,ne,oe,he,me){for(ne=he[me-1],H=0;H<oe;++H)he[me+H]=ne=st(k[F+H],ne)}function ht(k,F,H,ne,oe){var he;for(he=0;he<H;++he){var me=k[F+he],ve=me>>8&255,we=16711935&(we=(we=16711935&me)+((ve<<16)+ve));ne[oe+he]=(4278255360&me)+we>>>0}}function Ie(k,F){F.jd=k>>0&255,F.hd=k>>8&255,F.ud=k>>16&255}function Ze(k,F,H,ne,oe,he){var me;for(me=0;me<ne;++me){var ve=F[H+me],we=ve>>>8,Ne=ve,Be=255&(Be=(Be=ve>>>16)+((k.jd<<24>>24)*(we<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((k.hd<<24>>24)*(we<<24>>24)>>>5))+((k.ud<<24>>24)*(Be<<24>>24)>>>5)),oe[he+me]=(4278255360&ve)+(Be<<16)+Ne}}function _t(k,F,H,ne,oe){M[F]=function(he,me,ve,we,Ne,Be,nt,at,Ke){for(we=nt;we<at;++we)for(nt=0;nt<Ke;++nt)Ne[Be++]=oe(ve[ne(he[me++])])},M[k]=function(he,me,ve,we,Ne,Be,nt){var at=8>>he.b,Ke=he.Ea,Ot=he.K[0],St=he.w;if(8>at)for(he=(1<<he.b)-1,St=(1<<at)-1;me<ve;++me){var ze,We=0;for(ze=0;ze<Ke;++ze)ze&he||(We=ne(we[Ne++])),Be[nt++]=oe(Ot[We&St]),We>>=at}else M["VP8LMapColor"+H](we,Ne,Ot,St,Be,nt,me,ve,Ke)}}function pt(k,F,H,ne,oe){for(H=F+H;F<H;){var he=k[F++];ne[oe++]=he>>16&255,ne[oe++]=he>>8&255,ne[oe++]=he>>0&255}}function Pr(k,F,H,ne,oe){for(H=F+H;F<H;){var he=k[F++];ne[oe++]=he>>16&255,ne[oe++]=he>>8&255,ne[oe++]=he>>0&255,ne[oe++]=he>>24&255}}function Bt(k,F,H,ne,oe){for(H=F+H;F<H;){var he=(me=k[F++])>>16&240|me>>12&15,me=me>>0&240|me>>28&15;ne[oe++]=he,ne[oe++]=me}}function dr(k,F,H,ne,oe){for(H=F+H;F<H;){var he=(me=k[F++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;ne[oe++]=he,ne[oe++]=me}}function Ir(k,F,H,ne,oe){for(H=F+H;F<H;){var he=k[F++];ne[oe++]=he>>0&255,ne[oe++]=he>>8&255,ne[oe++]=he>>16&255}}function Tr(k,F,H,ne,oe,he){if(he==0)for(H=F+H;F<H;)ue(ne,((he=k[F++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),oe+=32;else n(ne,oe,k,F,H)}function ha(k,F){M[F][0]=M[k+"0"],M[F][1]=M[k+"1"],M[F][2]=M[k+"2"],M[F][3]=M[k+"3"],M[F][4]=M[k+"4"],M[F][5]=M[k+"5"],M[F][6]=M[k+"6"],M[F][7]=M[k+"7"],M[F][8]=M[k+"8"],M[F][9]=M[k+"9"],M[F][10]=M[k+"10"],M[F][11]=M[k+"11"],M[F][12]=M[k+"12"],M[F][13]=M[k+"13"],M[F][14]=M[k+"0"],M[F][15]=M[k+"0"]}function Xr(k){return k==cp||k==jf||k==r0||k==n0}function Na(){this.eb=[],this.size=this.A=this.fb=0}function En(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pa(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Na,this.f.kb=new En,this.sd=null}function si(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kr(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function pn(k,F){var H=k.T,ne=F.ba.f.RGBA,oe=ne.eb,he=ne.fb+k.ka*ne.A,me=ms[F.ba.S],ve=k.y,we=k.O,Ne=k.f,Be=k.N,nt=k.ea,at=k.W,Ke=F.cc,Ot=F.dc,St=F.Mc,ze=F.Nc,We=k.ka,kt=k.ka+k.T,Nt=k.U,Ct=Nt+1>>1;for(We==0?me(ve,we,null,null,Ne,Be,nt,at,Ne,Be,nt,at,oe,he,null,null,Nt):(me(F.ec,F.fc,ve,we,Ke,Ot,St,ze,Ne,Be,nt,at,oe,he-ne.A,oe,he,Nt),++H);We+2<kt;We+=2)Ke=Ne,Ot=Be,St=nt,ze=at,Be+=k.Rc,at+=k.Rc,he+=2*ne.A,me(ve,(we+=2*k.fa)-k.fa,ve,we,Ke,Ot,St,ze,Ne,Be,nt,at,oe,he-ne.A,oe,he,Nt);return we+=k.fa,k.j+kt<k.o?(n(F.ec,F.fc,ve,we,Nt),n(F.cc,F.dc,Ne,Be,Ct),n(F.Mc,F.Nc,nt,at,Ct),H--):1&kt||me(ve,we,null,null,Ne,Be,nt,at,Ne,Be,nt,at,oe,he+ne.A,null,null,Nt),H}function fo(k,F,H){var ne=k.F,oe=[k.J];if(ne!=null){var he=k.U,me=F.ba.S,ve=me==t0||me==r0;F=F.ba.f.RGBA;var we=[0],Ne=k.ka;we[0]=k.T,k.Kb&&(Ne==0?--we[0]:(--Ne,oe[0]-=k.width),k.j+k.ka+k.T==k.o&&(we[0]=k.o-k.j-Ne));var Be=F.eb;Ne=F.fb+Ne*F.A,k=ea(ne,oe[0],k.width,he,we,Be,Ne+(ve?0:3),F.A),t(H==we),k&&Xr(me)&&hs(Be,Ne,ve,he,we,F.A)}return 0}function Jn(k){var F=k.ma,H=F.ba.S,ne=11>H,oe=H==Cd||H==e0||H==t0||H==va||H==12||Xr(H);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!Jh(F.Oa,k,oe?11:12))return 0;if(oe&&Xr(H)&&Mt(),k.da)alert("todo:use_scaling");else{if(ne){if(F.Ib=kr,k.Kb){if(H=k.U+1>>1,F.memory=i(k.U+2*H),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+k.U,F.Mc=F.cc,F.Nc=F.dc+H,F.Ib=pn,Mt()}}else alert("todo:EmitYUV");oe&&(F.Jb=fo,ne&&rt())}if(ne&&!po){for(k=0;256>k;++k)gs[k]=89858*(k-128)+Xl>>xu,vs[k]=-22014*(k-128)+Xl,hp[k]=-45773*(k-128),qf[k]=113618*(k-128)+Xl>>xu;for(k=ta;k<sa;++k)F=76283*(k-16)+Xl>>xu,Zg[k-ta]=Gs(F,255),m_[k-ta]=Gs(F+8>>4,15);po=1}return 1}function li(k){var F=k.ma,H=k.U,ne=k.T;return t(!(1&k.ka)),0>=H||0>=ne?0:(H=F.Ib(k,F),F.Jb!=null&&F.Jb(k,F,H),F.Dc+=H,1)}function lt(k){k.ma.memory=null}function xt(k,F,H,ne){return G(k,8)!=47?0:(F[0]=G(k,14)+1,H[0]=G(k,14)+1,ne[0]=G(k,1),G(k,3)!=0?0:!k.h)}function Fr(k,F){if(4>k)return k+1;var H=k-2>>1;return(2+(1&k)<<H)+G(F,H)+1}function ma(k,F){return 120<F?F-120:1<=(H=((H=tA[F-1])>>4)*k+(8-(15&H)))?H:1;var H}function bt(k,F,H){var ne=K(H),oe=k[F+=255&ne].g-8;return 0<oe&&(ae(H,H.u+8),ne=K(H),F+=k[F].value,F+=ne&(1<<oe)-1),ae(H,H.u+k[F].g),k[F].value}function mt(k,F,H){return H.g+=k.g,H.value+=k.value<<F>>>0,t(8>=H.g),k.g}function Jt(k,F,H){var ne=k.xc;return t((F=ne==0?0:k.vc[k.md*(H>>ne)+(F>>ne)])<k.Wb),k.Ya[F]}function le(k,F,H,ne){var oe=k.ab,he=k.c*F,me=k.C;F=me+F;var ve=H,we=ne;for(ne=k.Ta,H=k.Ua;0<oe--;){var Ne=k.gc[oe],Be=me,nt=F,at=ve,Ke=we,Ot=(we=ne,ve=H,Ne.Ea);switch(t(Be<nt),t(nt<=Ne.nc),Ne.hc){case 2:Hg(at,Ke,(nt-Be)*Ot,we,ve);break;case 0:var St=Be,ze=nt,We=we,kt=ve,Nt=(ir=Ne).Ea;St==0&&(Df(at,Ke,null,null,1,We,kt),vt(at,Ke+1,0,0,Nt-1,We,kt+1),Ke+=Nt,kt+=Nt,++St);for(var Ct=1<<ir.b,fr=Ct-1,ar=Qe(Nt,ir.b),Rr=ir.K,ir=ir.w+(St>>ir.b)*ar;St<ze;){var Ln=Rr,jn=ir,In=1;for(du(at,Ke,We,kt-Nt,1,We,kt);In<Nt;){var mn=(In&~fr)+Ct;mn>Nt&&(mn=Nt),(0,Tc[Ln[jn++]>>8&15])(at,Ke+ +In,We,kt+In-Nt,mn-In,We,kt+In),In=mn}Ke+=Nt,kt+=Nt,++St&fr||(ir+=ar)}nt!=Ne.nc&&n(we,ve-Ot,we,ve+(nt-Be-1)*Ot,Ot);break;case 1:for(Ot=at,ze=Ke,Nt=(at=Ne.Ea)-(kt=at&~(We=(Ke=1<<Ne.b)-1)),St=Qe(at,Ne.b),Ct=Ne.K,Ne=Ne.w+(Be>>Ne.b)*St;Be<nt;){for(fr=Ct,ar=Ne,Rr=new ft,ir=ze+kt,Ln=ze+at;ze<ir;)Ie(fr[ar++],Rr),Nd(Rr,Ot,ze,Ke,we,ve),ze+=Ke,ve+=Ke;ze<Ln&&(Ie(fr[ar++],Rr),Nd(Rr,Ot,ze,Nt,we,ve),ze+=Nt,ve+=Nt),++Be&We||(Ne+=St)}break;case 3:if(at==we&&Ke==ve&&0<Ne.b){for(ze=we,at=Ot=ve+(nt-Be)*Ot-(kt=(nt-Be)*Qe(Ne.Ea,Ne.b)),Ke=we,We=ve,St=[],kt=(Nt=kt)-1;0<=kt;--kt)St[kt]=Ke[We+kt];for(kt=Nt-1;0<=kt;--kt)ze[at+kt]=St[kt];Wo(Ne,Be,nt,we,Ot,we,ve)}else Wo(Ne,Be,nt,at,Ke,we,ve)}ve=ne,we=H}we!=H&&n(ne,H,ve,we,he)}function xe(k,F){var H=k.V,ne=k.Ba+k.c*k.C,oe=F-k.C;if(t(F<=k.l.o),t(16>=oe),0<oe){var he=k.l,me=k.Ta,ve=k.Ua,we=he.width;if(le(k,oe,H,ne),oe=ve=[ve],t((H=k.C)<(ne=F)),t(he.v<he.va),ne>he.o&&(ne=he.o),H<he.j){var Ne=he.j-H;H=he.j,oe[0]+=Ne*we}if(H>=ne?H=0:(oe[0]+=4*he.v,he.ka=H-he.j,he.U=he.va-he.v,he.T=ne-H,H=1),H){if(ve=ve[0],11>(H=k.ca).S){var Be=H.f.RGBA,nt=(ne=H.S,oe=he.U,he=he.T,Ne=Be.eb,Be.A),at=he;for(Be=Be.fb+k.Ma*Be.A;0<at--;){var Ke=me,Ot=ve,St=oe,ze=Ne,We=Be;switch(ne){case Gg:Vo(Ke,Ot,St,ze,We);break;case Cd:No(Ke,Ot,St,ze,We);break;case cp:No(Ke,Ot,St,ze,We),hs(ze,We,0,St,1,0);break;case u_:hu(Ke,Ot,St,ze,We);break;case e0:Tr(Ke,Ot,St,ze,We,1);break;case jf:Tr(Ke,Ot,St,ze,We,1),hs(ze,We,0,St,1,0);break;case t0:Tr(Ke,Ot,St,ze,We,0);break;case r0:Tr(Ke,Ot,St,ze,We,0),hs(ze,We,1,St,1,0);break;case va:kd(Ke,Ot,St,ze,We);break;case n0:kd(Ke,Ot,St,ze,We),ga(ze,We,St,1,0);break;case Kg:fu(Ke,Ot,St,ze,We);break;default:t(0)}ve+=we,Be+=nt}k.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=H.height)}}k.C=F,t(k.C<=k.i)}function ye(k){var F;if(0<k.ua)return 0;for(F=0;F<k.Wb;++F){var H=k.Ya[F].G,ne=k.Ya[F].H;if(0<H[1][ne[1]+0].g||0<H[2][ne[2]+0].g||0<H[3][ne[3]+0].g)return 0}return 1}function be(k,F,H,ne,oe,he){if(k.Z!=0){var me=k.qd,ve=k.rd;for(t(Eo[k.Z]!=null);F<H;++F)Eo[k.Z](me,ve,ne,oe,ne,oe,he),me=ne,ve=oe,oe+=he;k.qd=me,k.rd=ve}}function Ae(k,F){var H=k.l.ma,ne=H.Z==0||H.Z==1?k.l.j:k.C;if(ne=k.C<ne?ne:k.C,t(F<=k.l.o),F>ne){var oe=k.l.width,he=H.ca,me=H.tb+oe*ne,ve=k.V,we=k.Ba+k.c*ne,Ne=k.gc;t(k.ab==1),t(Ne[0].hc==3),Zm(Ne[0],ne,F,ve,we,he,me),be(H,ne,F,he,me,oe)}k.C=k.Ma=F}function Se(k,F,H,ne,oe,he,me){var ve=k.$/ne,we=k.$%ne,Ne=k.m,Be=k.s,nt=H+k.$,at=nt;oe=H+ne*oe;var Ke=H+ne*he,Ot=280+Be.ua,St=k.Pb?ve:16777216,ze=0<Be.ua?Be.Wa:null,We=Be.wc,kt=nt<Ke?Jt(Be,we,ve):null;t(k.C<he),t(Ke<=oe);var Nt=!1;e:for(;;){for(;Nt||nt<Ke;){var Ct=0;if(ve>=St){var fr=nt-H;t((St=k).Pb),St.wd=St.m,St.xd=fr,0<St.s.ua&&Pe(St.s.Wa,St.s.vb),St=ve+Xg}if(we&We||(kt=Jt(Be,we,ve)),t(kt!=null),kt.Qb&&(F[nt]=kt.qb,Nt=!0),!Nt)if(se(Ne),kt.jc){Ct=Ne,fr=F;var ar=nt,Rr=kt.pd[K(Ct)&ri-1];t(kt.jc),256>Rr.g?(ae(Ct,Ct.u+Rr.g),fr[ar]=Rr.value,Ct=0):(ae(Ct,Ct.u+Rr.g-256),t(256<=Rr.value),Ct=Rr.value),Ct==0&&(Nt=!0)}else Ct=bt(kt.G[0],kt.H[0],Ne);if(Ne.h)break;if(Nt||256>Ct){if(!Nt)if(kt.nd)F[nt]=(kt.qb|Ct<<8)>>>0;else{if(se(Ne),Nt=bt(kt.G[1],kt.H[1],Ne),se(Ne),fr=bt(kt.G[2],kt.H[2],Ne),ar=bt(kt.G[3],kt.H[3],Ne),Ne.h)break;F[nt]=(ar<<24|Nt<<16|Ct<<8|fr)>>>0}if(Nt=!1,++nt,++we>=ne&&(we=0,++ve,me!=null&&ve<=he&&!(ve%16)&&me(k,ve),ze!=null))for(;at<nt;)Ct=F[at++],ze.X[(506832829*Ct&4294967295)>>>ze.Mb]=Ct}else if(280>Ct){if(Ct=Fr(Ct-256,Ne),fr=bt(kt.G[4],kt.H[4],Ne),se(Ne),fr=ma(ne,fr=Fr(fr,Ne)),Ne.h)break;if(nt-H<fr||oe-nt<Ct)break e;for(ar=0;ar<Ct;++ar)F[nt+ar]=F[nt+ar-fr];for(nt+=Ct,we+=Ct;we>=ne;)we-=ne,++ve,me!=null&&ve<=he&&!(ve%16)&&me(k,ve);if(t(nt<=oe),we&We&&(kt=Jt(Be,we,ve)),ze!=null)for(;at<nt;)Ct=F[at++],ze.X[(506832829*Ct&4294967295)>>>ze.Mb]=Ct}else{if(!(Ct<Ot))break e;for(Nt=Ct-280,t(ze!=null);at<nt;)Ct=F[at++],ze.X[(506832829*Ct&4294967295)>>>ze.Mb]=Ct;Ct=nt,t(!(Nt>>>(fr=ze).Xa)),F[Ct]=fr.X[Nt],Nt=!0}Nt||t(Ne.h==Q(Ne))}if(k.Pb&&Ne.h&&nt<oe)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&Pe(k.s.vb,k.s.Wa);else{if(Ne.h)break e;me!=null&&me(k,ve>he?he:ve),k.a=0,k.$=nt-H}return 1}return k.a=3,0}function Ve(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var F=k.Wa;F!=null&&(F.X=null),k.vb=null,t(k!=null)}function ut(){var k=new Py;return k==null?null:(k.a=0,k.xb=dp,ha("Predictor","VP8LPredictors"),ha("Predictor","VP8LPredictors_C"),ha("PredictorAdd","VP8LPredictorsAdd"),ha("PredictorAdd","VP8LPredictorsAdd_C"),Hg=ht,Nd=Ze,Vo=pt,No=Pr,kd=Bt,fu=dr,hu=Ir,M.VP8LMapColor32b=ap,M.VP8LMapColor8b=ip,k)}function et(k,F,H,ne,oe){var he=1,me=[k],ve=[F],we=ne.m,Ne=ne.s,Be=null,nt=0;e:for(;;){if(H)for(;he&&G(we,1);){var at=me,Ke=ve,Ot=ne,St=1,ze=Ot.m,We=Ot.gc[Ot.ab],kt=G(ze,2);if(Ot.Oc&1<<kt)he=0;else{switch(Ot.Oc|=1<<kt,We.hc=kt,We.Ea=at[0],We.nc=Ke[0],We.K=[null],++Ot.ab,t(4>=Ot.ab),kt){case 0:case 1:We.b=G(ze,3)+2,St=et(Qe(We.Ea,We.b),Qe(We.nc,We.b),0,Ot,We.K),We.K=We.K[0];break;case 3:var Nt,Ct=G(ze,8)+1,fr=16<Ct?0:4<Ct?1:2<Ct?2:3;if(at[0]=Qe(We.Ea,fr),We.b=fr,Nt=St=et(Ct,1,0,Ot,We.K)){var ar,Rr=Ct,ir=We,Ln=1<<(8>>ir.b),jn=i(Ln);if(jn==null)Nt=0;else{var In=ir.K[0],mn=ir.w;for(jn[0]=ir.K[0][0],ar=1;ar<1*Rr;++ar)jn[ar]=st(In[mn+ar],jn[ar-1]);for(;ar<4*Ln;++ar)jn[ar]=0;ir.K[0]=null,ir.K[0]=jn,Nt=1}}St=Nt;break;case 2:break;default:t(0)}he=St}}if(me=me[0],ve=ve[0],he&&G(we,1)&&!(he=1<=(nt=G(we,4))&&11>=nt)){ne.a=3;break e}var ra;if(ra=he)t:{var la,rn,Wa,Ko=ne,ui=me,Ri=ve,Hn=nt,Co=H,Po=Ko.m,Va=Ko.s,Mi=[null],mo=1,ys=0,bl=f_[Hn];r:for(;;){if(Co&&G(Po,1)){var Ha=G(Po,3)+2,bi=Qe(ui,Ha),Xs=Qe(Ri,Ha),Od=bi*Xs;if(!et(bi,Xs,0,Ko,Mi))break r;for(Mi=Mi[0],Va.xc=Ha,la=0;la<Od;++la){var _u=Mi[la]>>8&65535;Mi[la]=_u,_u>=mo&&(mo=_u+1)}}if(Po.h)break r;for(rn=0;5>rn;++rn){var Gn=$f[rn];!rn&&0<Hn&&(Gn+=1<<Hn),ys<Gn&&(ys=Gn)}var Mc=o(mo*bl,R),Jg=mo,My=o(Jg,V);if(My==null)var Sl=null;else t(65536>=Jg),Sl=My;var Al=i(ys);if(Sl==null||Al==null||Mc==null){Ko.a=1;break r}var Wf=Mc;for(la=Wa=0;la<mo;++la){var Nl=Sl[la],bu=Nl.G,Vf=Nl.H,pp=0,Zs=1,mp=0;for(rn=0;5>rn;++rn){Gn=$f[rn],bu[rn]=Wf,Vf[rn]=Wa,!rn&&0<Hn&&(Gn+=1<<Hn);a:{var Dd,Su=Gn,gp=Ko,Fc=Al,v_=Wf,Fy=Wa,ka=0,Zl=gp.m,Ly=G(Zl,1);if(a(Fc,0,0,Su),Ly){var jy=G(Zl,1)+1,Qg=G(Zl,1),ev=G(Zl,Qg==0?1:8);Fc[ev]=1,jy==2&&(Fc[ev=G(Zl,8)]=1);var Lc=1}else{var Da=i(19),Si=G(Zl,4)+4;if(19<Si){gp.a=3;var di=0;break a}for(Dd=0;Dd<Si;++Dd)Da[eA[Dd]]=G(Zl,3);var vp=void 0,Au=void 0,yp=gp,oA=Da,Fi=Su,tv=Fc,l0=0,jc=yp.m,Jl=8,Js=o(128,R);n:for(;P(Js,0,7,oA,19);){if(G(jc,1)){var c0=2+2*G(jc,3);if((vp=2+G(jc,c0))>Fi)break n}else vp=Fi;for(Au=0;Au<Fi&&vp--;){se(jc);var rv=Js[0+(127&K(jc))];ae(jc,jc.u+rv.g);var Id=rv.value;if(16>Id)tv[Au++]=Id,Id!=0&&(Jl=Id);else{var y_=Id==16,$y=Id-16,x_=Yg[$y],By=G(jc,a0[$y])+x_;if(Au+By>Fi)break n;for(var w_=y_?Jl:0;0<By--;)tv[Au++]=w_}}l0=1;break n}l0||(yp.a=3),Lc=l0}(Lc=Lc&&!Zl.h)&&(ka=P(v_,Fy,8,Fc,Su)),Lc&&ka!=0?di=ka:(gp.a=3,di=0)}if(di==0)break r;if(Zs&&d_[rn]==1&&(Zs=Wf[Wa].g==0),pp+=Wf[Wa].g,Wa+=di,3>=rn){var xp,nv=Al[0];for(xp=1;xp<Gn;++xp)Al[xp]>nv&&(nv=Al[xp]);mp+=nv}}if(Nl.nd=Zs,Nl.Qb=0,Zs&&(Nl.qb=(bu[3][Vf[3]+0].value<<24|bu[1][Vf[1]+0].value<<16|bu[2][Vf[2]+0].value)>>>0,pp==0&&256>bu[0][Vf[0]+0].value&&(Nl.Qb=1,Nl.qb+=bu[0][Vf[0]+0].value<<8)),Nl.jc=!Nl.Qb&&6>mp,Nl.jc){var u0,Qs=Nl;for(u0=0;u0<ri;++u0){var Nu=u0,Ql=Qs.pd[Nu],Hf=Qs.G[0][Qs.H[0]+Nu];256<=Hf.value?(Ql.g=Hf.g+256,Ql.value=Hf.value):(Ql.g=0,Ql.value=0,Nu>>=mt(Hf,8,Ql),Nu>>=mt(Qs.G[1][Qs.H[1]+Nu],16,Ql),Nu>>=mt(Qs.G[2][Qs.H[2]+Nu],0,Ql),mt(Qs.G[3][Qs.H[3]+Nu],24,Ql))}}}Va.vc=Mi,Va.Wb=mo,Va.Ya=Sl,Va.yc=Mc,ra=1;break t}ra=0}if(!(he=ra)){ne.a=3;break e}if(0<nt){if(Ne.ua=1<<nt,!Re(Ne.Wa,nt)){ne.a=1,he=0;break e}}else Ne.ua=0;var av=ne,iv=me,__=ve,ov=av.s,sv=ov.xc;if(av.c=iv,av.i=__,ov.md=Qe(iv,sv),ov.wc=sv==0?-1:(1<<sv)-1,H){ne.xb=Rc;break e}if((Be=i(me*ve))==null){ne.a=1,he=0;break e}he=(he=Se(ne,Be,0,me,ve,ve,null))&&!we.h;break e}return he?(oe!=null?oe[0]=Be:(t(Be==null),t(H)),ne.$=0,H||Ve(Ne)):Ve(Ne),he}function it(k,F){var H=k.c*k.i,ne=H+F+16*F;return t(k.c<=F),k.V=i(ne),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+H+F,1)}function Je(k,F){var H=k.C,ne=F-H,oe=k.V,he=k.Ba+k.c*H;for(t(F<=k.l.o);0<ne;){var me=16<ne?16:ne,ve=k.l.ma,we=k.l.width,Ne=we*me,Be=ve.ca,nt=ve.tb+we*H,at=k.Ta,Ke=k.Ua;le(k,me,oe,he),ni(at,Ke,Be,nt,Ne),be(ve,H,H+me,Be,nt,we),ne-=me,oe+=me*k.c,H+=me}t(H==F),k.C=k.Ma=F}function Dt(){this.ub=this.yd=this.td=this.Rb=0}function Yt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function or(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function qt(){this.Yb=function(){var k=[];return function F(H,ne,oe){for(var he=oe[ne],me=0;me<he&&(H.push(oe.length>ne+1?[]:0),!(oe.length<ne+1));me++)F(H[me],ne+1,oe)}(k,0,[3,11]),k}()}function jt(){this.jb=i(3),this.Wc=s([4,8],qt),this.Xc=s([4,17],qt)}function Zr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Fn(){this.ld=this.La=this.dd=this.tc=0}function Qn(){this.Na=this.la=0}function Ba(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Wl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fn),this.Y=0,this.ya=Array(new Wl),this.aa=0,this.l=new Ac}function Vs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function xi(){this.cb=this.a=0,this.sc="",this.m=new J,this.Od=new Dt,this.Kc=new Yt,this.ed=new Zr,this.Qa=new or,this.Ic=this.$c=this.Aa=0,this.D=new Sc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,J),this.ia=0,this.pb=o(4,Ba),this.Pa=new jt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vs),this.Hd=0,this.rb=Array(new Qn),this.sb=0,this.wa=Array(new Fn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Wl),this.L=this.aa=0,this.gd=s([4,2],Fn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ac(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ua(){var k=new xi;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Bf||(Bf=wf)),k}function ci(k,F,H){return k.a==0&&(k.a=F,k.sc=H,k.cb=0),0}function $g(k,F,H){return 3<=H&&k[F+0]==157&&k[F+1]==1&&k[F+2]==42}function Bg(k,F){if(k==null)return 0;if(k.a=0,k.sc="OK",F==null)return ci(k,2,"null VP8Io passed to VP8GetHeaders()");var H=F.data,ne=F.w,oe=F.ha;if(4>oe)return ci(k,7,"Truncated header.");var he=H[ne+0]|H[ne+1]<<8|H[ne+2]<<16,me=k.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return ci(k,3,"Incorrect keyframe parameters.");if(!me.yd)return ci(k,4,"Frame not displayable.");ne+=3,oe-=3;var ve=k.Kc;if(me.Rb){if(7>oe)return ci(k,7,"cannot parse picture header");if(!$g(H,ne,oe))return ci(k,3,"Bad code word");ve.c=16383&(H[ne+4]<<8|H[ne+3]),ve.Td=H[ne+4]>>6,ve.i=16383&(H[ne+6]<<8|H[ne+5]),ve.Ud=H[ne+6]>>6,ne+=7,oe-=7,k.za=ve.c+15>>4,k.Ub=ve.i+15>>4,F.width=ve.c,F.height=ve.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,a((he=k.Pa).jb,0,255,he.jb.length),t((he=k.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(me.ub>oe)return ci(k,7,"bad partition length");Z(he=k.m,H,ne,me.ub),ne+=me.ub,oe-=me.ub,me.Rb&&(ve.Ld=ie(he),ve.Kd=ie(he)),ve=k.Qa;var we,Ne=k.Pa;if(t(he!=null),t(ve!=null),ve.Cb=ie(he),ve.Cb){if(ve.Bb=ie(he),ie(he)){for(ve.Fb=ie(he),we=0;4>we;++we)ve.Zb[we]=ie(he)?q(he,7):0;for(we=0;4>we;++we)ve.Lb[we]=ie(he)?q(he,6):0}if(ve.Bb)for(we=0;3>we;++we)Ne.jb[we]=ie(he)?te(he,8):255}else ve.Bb=0;if(he.Ka)return ci(k,3,"cannot parse segment header");if((ve=k.ed).zd=ie(he),ve.Tb=te(he,6),ve.wb=te(he,3),ve.Pc=ie(he),ve.Pc&&ie(he)){for(Ne=0;4>Ne;++Ne)ie(he)&&(ve.vd[Ne]=q(he,6));for(Ne=0;4>Ne;++Ne)ie(he)&&(ve.od[Ne]=q(he,6))}if(k.L=ve.Tb==0?0:ve.zd?1:2,he.Ka)return ci(k,3,"cannot parse filter header");var Be=oe;if(oe=we=ne,ne=we+Be,ve=Be,k.Xb=(1<<te(k.m,2))-1,Be<3*(Ne=k.Xb))H=7;else{for(we+=3*Ne,ve-=3*Ne,Be=0;Be<Ne;++Be){var nt=H[oe+0]|H[oe+1]<<8|H[oe+2]<<16;nt>ve&&(nt=ve),Z(k.Jc[+Be],H,we,nt),we+=nt,ve-=nt,oe+=3}Z(k.Jc[+Ne],H,we,ve),H=we<ne?0:5}if(H!=0)return ci(k,H,"cannot parse partitions");for(H=te(we=k.m,7),oe=ie(we)?q(we,4):0,ne=ie(we)?q(we,4):0,ve=ie(we)?q(we,4):0,Ne=ie(we)?q(we,4):0,we=ie(we)?q(we,4):0,Be=k.Qa,nt=0;4>nt;++nt){if(Be.Cb){var at=Be.Zb[nt];Be.Fb||(at+=H)}else{if(0<nt){k.pb[nt]=k.pb[0];continue}at=H}var Ke=k.pb[nt];Ke.Sc[0]=up[Gs(at+oe,127)],Ke.Sc[1]=i0[Gs(at+0,127)],Ke.Eb[0]=2*up[Gs(at+ne,127)],Ke.Eb[1]=101581*i0[Gs(at+ve,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=up[Gs(at+Ne,117)],Ke.Qc[1]=i0[Gs(at+we,127)],Ke.lc=at+we}if(!me.Rb)return ci(k,4,"Not a key frame.");for(ie(he),me=k.Pa,H=0;4>H;++H){for(oe=0;8>oe;++oe)for(ne=0;3>ne;++ne)for(ve=0;11>ve;++ve)Ne=X(he,nA[H][oe][ne][ve])?te(he,8):p_[H][oe][ne][ve],me.Wc[H][oe].Yb[ne][ve]=Ne;for(oe=0;17>oe;++oe)me.Xc[H][oe]=me.Wc[H][Dy[oe]]}return k.kc=ie(he),k.kc&&(k.Bd=te(he,8)),k.cb=1}function wf(k,F,H,ne,oe,he,me){var ve=F[oe].Yb[H];for(H=0;16>oe;++oe){if(!X(k,ve[H+0]))return oe;for(;!X(k,ve[H+1]);)if(ve=F[++oe].Yb[0],H=0,oe==16)return 16;var we=F[oe+1].Yb;if(X(k,ve[H+2])){var Ne=k,Be=0;if(X(Ne,(at=ve)[(nt=H)+3]))if(X(Ne,at[nt+6])){for(ve=0,nt=2*(Be=X(Ne,at[nt+8]))+(at=X(Ne,at[nt+9+Be])),Be=0,at=Ty[nt];at[ve];++ve)Be+=Be+X(Ne,at[ve]);Be+=3+(8<<nt)}else X(Ne,at[nt+7])?(Be=7+2*X(Ne,165),Be+=X(Ne,145)):Be=5+X(Ne,159);else Be=X(Ne,at[nt+4])?3+X(Ne,at[nt+5]):2;ve=we[2]}else Be=1,ve=we[1];we=me+Oy[oe],0>(Ne=k).b&&fe(Ne);var nt,at=Ne.b,Ke=(nt=Ne.Ca>>1)-(Ne.I>>at)>>31;--Ne.b,Ne.Ca+=Ke,Ne.Ca|=1,Ne.I-=(nt+1&Ke)<<at,he[we]=((Be^Ke)-Ke)*ne[(0<oe)+0]}return 16}function md(k){var F=k.rb[k.sb-1];F.la=0,F.Na=0,a(k.zc,0,0,k.zc.length),k.ja=0}function _f(k,F){if(k==null)return 0;if(F==null)return ci(k,2,"NULL VP8Io parameter in VP8Decode().");if(!k.cb&&!Bg(k,F))return 0;if(t(k.cb),F.ac==null||F.ac(F)){F.ob&&(k.L=0);var H=zf[k.L];if(k.L==2?(k.yb=0,k.zb=0):(k.yb=F.v-H>>4,k.zb=F.j-H>>4,0>k.yb&&(k.yb=0),0>k.zb&&(k.zb=0)),k.Va=F.o+15+H>>4,k.Hb=F.va+15+H>>4,k.Hb>k.za&&(k.Hb=k.za),k.Va>k.Ub&&(k.Va=k.Ub),0<k.L){var ne=k.ed;for(H=0;4>H;++H){var oe;if(k.Qa.Cb){var he=k.Qa.Lb[H];k.Qa.Fb||(he+=ne.Tb)}else he=ne.Tb;for(oe=0;1>=oe;++oe){var me=k.gd[H][oe],ve=he;if(ne.Pc&&(ve+=ne.vd[0],oe&&(ve+=ne.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<ne.wb&&(we=4<ne.wb?we>>2:we>>1)>9-ne.wb&&(we=9-ne.wb),1>we&&(we=1),me.dd=we,me.tc=2*ve+we,me.ld=40<=ve?2:15<=ve?1:0}else me.tc=0;me.La=oe}}}H=0}else ci(k,6,"Frame setup failed"),H=k.a;if(H=H==0){if(H){k.$c=0,0<k.Aa||(k.Ic=wu);e:{H=k.Ic,ne=4*(we=k.za);var Ne=32*we,Be=we+1,nt=0<k.L?we*(0<k.Aa?2:1):0,at=(k.Aa==2?2:1)*we;if((me=ne+832+(oe=3*(16*H+zf[k.L])/2*Ne)+(he=k.Fa!=null&&0<k.Fa.length?k.Kc.c*k.Kc.i:0))!=me)H=0;else{if(me>k.Vb){if(k.Vb=0,k.Ec=i(me),k.Fc=0,k.Ec==null){H=ci(k,1,"no memory during frame initialization.");break e}k.Vb=me}me=k.Ec,ve=k.Fc,k.Ac=me,k.Bc=ve,ve+=ne,k.Gd=o(Ne,Vs),k.Hd=0,k.rb=o(Be+1,Qn),k.sb=1,k.wa=nt?o(nt,Fn):null,k.Y=0,k.D.Nb=0,k.D.wa=k.wa,k.D.Y=k.Y,0<k.Aa&&(k.D.Y+=we),t(!0),k.oc=me,k.pc=ve,ve+=832,k.ya=o(at,Wl),k.aa=0,k.D.ya=k.ya,k.D.aa=k.aa,k.Aa==2&&(k.D.aa+=we),k.R=16*we,k.B=8*we,we=(Ne=zf[k.L])*k.R,Ne=Ne/2*k.B,k.sa=me,k.ta=ve+we,k.qa=k.sa,k.ra=k.ta+16*H*k.R+Ne,k.Ha=k.qa,k.Ia=k.ra+8*H*k.B+Ne,k.$c=0,ve+=oe,k.mb=he?me:null,k.nb=he?ve:null,t(ve+he<=k.Fc+k.Vb),md(k),a(k.Ac,k.Bc,0,ne),H=1}}if(H){if(F.ka=0,F.y=k.sa,F.O=k.ta,F.f=k.qa,F.N=k.ra,F.ea=k.Ha,F.Vd=k.Ia,F.fa=k.R,F.Rc=k.B,F.F=null,F.J=0,!Qm){for(H=-255;255>=H;++H)_i[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)Dc[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)sp[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)Lf[255+H]=0>H?0:255<H?255:H;Qm=1}op=Un,pu=qm,mu=gd,ko=Ey,Ks=Bh,qn=Um,If=Gh,Jm=Ii,Rf=Cf,Mf=Gm,Ff=wd,Ys=_d,gu=Pf,Oc=Kh,vu=Gl,yu=vl,Ed=yl,ho=Wg,_l[0]=Cc,_l[1]=Ug,_l[2]=Nf,_l[3]=Ec,_l[4]=Wm,_l[5]=qh,_l[6]=yd,_l[7]=zh,_l[8]=zg,_l[9]=Wh,Go[0]=Af,Go[1]=qg,Go[2]=Nc,Go[3]=Sf,Go[4]=qa,Go[5]=kc,Go[6]=Vl,ps[0]=Hs,ps[1]=zm,ps[2]=Cy,ps[3]=cu,ps[4]=kf,ps[5]=Vh,ps[6]=Vm,H=1}else H=0}H&&(H=function(Ke,Ot){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var St,ze=Ke.Jc[Ke.M&Ke.Xb],We=Ke.m,kt=Ke;for(St=0;St<kt.za;++St){var Nt=We,Ct=kt,fr=Ct.Ac,ar=Ct.Bc+4*St,Rr=Ct.zc,ir=Ct.ya[Ct.aa+St];if(Ct.Qa.Bb?ir.$b=X(Nt,Ct.Pa.jb[0])?2+X(Nt,Ct.Pa.jb[2]):X(Nt,Ct.Pa.jb[1]):ir.$b=0,Ct.kc&&(ir.Ad=X(Nt,Ct.Bd)),ir.Za=!X(Nt,145)+0,ir.Za){var Ln=ir.Ob,jn=0;for(Ct=0;4>Ct;++Ct){var In,mn=Rr[0+Ct];for(In=0;4>In;++In){mn=rA[fr[ar+In]][mn];for(var ra=h_[X(Nt,mn[0])];0<ra;)ra=h_[2*ra+X(Nt,mn[ra])];mn=-ra,fr[ar+In]=mn}n(Ln,jn,fr,ar,4),jn+=4,Rr[0+Ct]=mn}}else mn=X(Nt,156)?X(Nt,128)?1:3:X(Nt,163)?2:0,ir.Ob[0]=mn,a(fr,ar,mn,4),a(Rr,0,mn,4);ir.Dd=X(Nt,142)?X(Nt,114)?X(Nt,183)?1:3:2:0}if(kt.m.Ka)return ci(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(kt=ze,Nt=(We=Ke).rb[We.sb-1],fr=We.rb[We.sb+We.ja],St=We.ya[We.aa+We.ja],ar=We.kc?St.Ad:0)Nt.la=fr.la=0,St.Za||(Nt.Na=fr.Na=0),St.Hc=0,St.Gc=0,St.ia=0;else{var la,rn;if(Nt=fr,fr=kt,ar=We.Pa.Xc,Rr=We.ya[We.aa+We.ja],ir=We.pb[Rr.$b],Ct=Rr.ad,Ln=0,jn=We.rb[We.sb-1],mn=In=0,a(Ct,Ln,0,384),Rr.Za)var Wa=0,Ko=ar[3];else{ra=i(16);var ui=Nt.Na+jn.Na;if(ui=Bf(fr,ar[1],ui,ir.Eb,0,ra,0),Nt.Na=jn.Na=(0<ui)+0,1<ui)op(ra,0,Ct,Ln);else{var Ri=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)Ct[Ln+ra]=Ri}Wa=1,Ko=ar[0]}var Hn=15&Nt.la,Co=15&jn.la;for(ra=0;4>ra;++ra){var Po=1&Co;for(Ri=rn=0;4>Ri;++Ri)Hn=Hn>>1|(Po=(ui=Bf(fr,Ko,ui=Po+(1&Hn),ir.Sc,Wa,Ct,Ln))>Wa)<<7,rn=rn<<2|(3<ui?3:1<ui?2:Ct[Ln+0]!=0),Ln+=16;Hn>>=4,Co=Co>>1|Po<<7,In=(In<<8|rn)>>>0}for(Ko=Hn,Wa=Co>>4,la=0;4>la;la+=2){for(rn=0,Hn=Nt.la>>4+la,Co=jn.la>>4+la,ra=0;2>ra;++ra){for(Po=1&Co,Ri=0;2>Ri;++Ri)ui=Po+(1&Hn),Hn=Hn>>1|(Po=0<(ui=Bf(fr,ar[2],ui,ir.Qc,0,Ct,Ln)))<<3,rn=rn<<2|(3<ui?3:1<ui?2:Ct[Ln+0]!=0),Ln+=16;Hn>>=2,Co=Co>>1|Po<<5}mn|=rn<<4*la,Ko|=Hn<<4<<la,Wa|=(240&Co)<<la}Nt.la=Ko,jn.la=Wa,Rr.Hc=In,Rr.Gc=mn,Rr.ia=43690&mn?0:ir.ia,ar=!(In|mn)}if(0<We.L&&(We.wa[We.Y+We.ja]=We.gd[St.$b][St.Za],We.wa[We.Y+We.ja].La|=!ar),kt.Ka)return ci(Ke,7,"Premature end-of-file encountered.")}if(md(Ke),We=Ot,kt=1,St=(ze=Ke).D,Nt=0<ze.L&&ze.M>=ze.zb&&ze.M<=ze.Va,ze.Aa==0)e:{if(St.M=ze.M,St.uc=Nt,Zh(ze,St),kt=1,St=(rn=ze.D).Nb,Nt=(mn=zf[ze.L])*ze.R,fr=mn/2*ze.B,ra=16*St*ze.R,Ri=8*St*ze.B,ar=ze.sa,Rr=ze.ta-Nt+ra,ir=ze.qa,Ct=ze.ra-fr+Ri,Ln=ze.Ha,jn=ze.Ia-fr+Ri,Co=(Hn=rn.M)==0,In=Hn>=ze.Va-1,ze.Aa==2&&Zh(ze,rn),rn.uc)for(Po=(ui=ze).D.M,t(ui.D.uc),rn=ui.yb;rn<ui.Hb;++rn){Wa=rn,Ko=Po;var Va=(Mi=(Gn=ui).D).Nb;la=Gn.R;var Mi=Mi.wa[Mi.Y+Wa],mo=Gn.sa,ys=Gn.ta+16*Va*la+16*Wa,bl=Mi.dd,Ha=Mi.tc;if(Ha!=0)if(t(3<=Ha),Gn.L==1)0<Wa&&yu(mo,ys,la,Ha+4),Mi.La&&ho(mo,ys,la,Ha),0<Ko&&vu(mo,ys,la,Ha+4),Mi.La&&Ed(mo,ys,la,Ha);else{var bi=Gn.B,Xs=Gn.qa,Od=Gn.ra+8*Va*bi+8*Wa,_u=Gn.Ha,Gn=Gn.Ia+8*Va*bi+8*Wa;Va=Mi.ld,0<Wa&&(Jm(mo,ys,la,Ha+4,bl,Va),Mf(Xs,Od,_u,Gn,bi,Ha+4,bl,Va)),Mi.La&&(Ys(mo,ys,la,Ha,bl,Va),Oc(Xs,Od,_u,Gn,bi,Ha,bl,Va)),0<Ko&&(If(mo,ys,la,Ha+4,bl,Va),Rf(Xs,Od,_u,Gn,bi,Ha+4,bl,Va)),Mi.La&&(Ff(mo,ys,la,Ha,bl,Va),gu(Xs,Od,_u,Gn,bi,Ha,bl,Va))}}if(ze.ia&&alert("todo:DitherRow"),We.put!=null){if(rn=16*Hn,Hn=16*(Hn+1),Co?(We.y=ze.sa,We.O=ze.ta+ra,We.f=ze.qa,We.N=ze.ra+Ri,We.ea=ze.Ha,We.W=ze.Ia+Ri):(rn-=mn,We.y=ar,We.O=Rr,We.f=ir,We.N=Ct,We.ea=Ln,We.W=jn),In||(Hn-=mn),Hn>We.o&&(Hn=We.o),We.F=null,We.J=null,ze.Fa!=null&&0<ze.Fa.length&&rn<Hn&&(We.J=Ym(ze,We,rn,Hn-rn),We.F=ze.mb,We.F==null&&We.F.length==0)){kt=ci(ze,3,"Could not decode alpha data.");break e}rn<We.j&&(mn=We.j-rn,rn=We.j,t(!(1&mn)),We.O+=ze.R*mn,We.N+=ze.B*(mn>>1),We.W+=ze.B*(mn>>1),We.F!=null&&(We.J+=We.width*mn)),rn<Hn&&(We.O+=We.v,We.N+=We.v>>1,We.W+=We.v>>1,We.F!=null&&(We.J+=We.v),We.ka=rn-We.j,We.U=We.va-We.v,We.T=Hn-rn,kt=We.put(We))}St+1!=ze.Ic||In||(n(ze.sa,ze.ta-Nt,ar,Rr+16*ze.R,Nt),n(ze.qa,ze.ra-fr,ir,Ct+8*ze.B,fr),n(ze.Ha,ze.Ia-fr,Ln,jn+8*ze.B,fr))}if(!kt)return ci(Ke,6,"Output aborted.")}return 1}(k,F)),F.bc!=null&&F.bc(F),H&=1}return H?(k.cb=0,H):0}function us(k,F,H,ne,oe){oe=k[F+H+32*ne]+(oe>>3),k[F+H+32*ne]=-256&oe?0>oe?0:255:oe}function $h(k,F,H,ne,oe,he){us(k,F,0,H,ne+oe),us(k,F,1,H,ne+he),us(k,F,2,H,ne-he),us(k,F,3,H,ne-oe)}function ds(k){return(20091*k>>16)+k}function bf(k,F,H,ne){var oe,he=0,me=i(16);for(oe=0;4>oe;++oe){var ve=k[F+0]+k[F+8],we=k[F+0]-k[F+8],Ne=(35468*k[F+4]>>16)-ds(k[F+12]),Be=ds(k[F+4])+(35468*k[F+12]>>16);me[he+0]=ve+Be,me[he+1]=we+Ne,me[he+2]=we-Ne,me[he+3]=ve-Be,he+=4,F++}for(oe=he=0;4>oe;++oe)ve=(k=me[he+0]+4)+me[he+8],we=k-me[he+8],Ne=(35468*me[he+4]>>16)-ds(me[he+12]),us(H,ne,0,0,ve+(Be=ds(me[he+4])+(35468*me[he+12]>>16))),us(H,ne,1,0,we+Ne),us(H,ne,2,0,we-Ne),us(H,ne,3,0,ve-Be),he++,ne+=32}function Um(k,F,H,ne){var oe=k[F+0]+4,he=35468*k[F+4]>>16,me=ds(k[F+4]),ve=35468*k[F+1]>>16;$h(H,ne,0,oe+me,k=ds(k[F+1]),ve),$h(H,ne,1,oe+he,k,ve),$h(H,ne,2,oe-he,k,ve),$h(H,ne,3,oe-me,k,ve)}function qm(k,F,H,ne,oe){bf(k,F,H,ne),oe&&bf(k,F+16,H,ne+4)}function gd(k,F,H,ne){pu(k,F+0,H,ne,1),pu(k,F+32,H,ne+128,1)}function Ey(k,F,H,ne){var oe;for(k=k[F+0]+4,oe=0;4>oe;++oe)for(F=0;4>F;++F)us(H,ne,F,oe,k)}function Bh(k,F,H,ne){k[F+0]&&ko(k,F+0,H,ne),k[F+16]&&ko(k,F+16,H,ne+4),k[F+32]&&ko(k,F+32,H,ne+128),k[F+48]&&ko(k,F+48,H,ne+128+4)}function Un(k,F,H,ne){var oe,he=i(16);for(oe=0;4>oe;++oe){var me=k[F+0+oe]+k[F+12+oe],ve=k[F+4+oe]+k[F+8+oe],we=k[F+4+oe]-k[F+8+oe],Ne=k[F+0+oe]-k[F+12+oe];he[0+oe]=me+ve,he[8+oe]=me-ve,he[4+oe]=Ne+we,he[12+oe]=Ne-we}for(oe=0;4>oe;++oe)me=(k=he[0+4*oe]+3)+he[3+4*oe],ve=he[1+4*oe]+he[2+4*oe],we=he[1+4*oe]-he[2+4*oe],Ne=k-he[3+4*oe],H[ne+0]=me+ve>>3,H[ne+16]=Ne+we>>3,H[ne+32]=me-ve>>3,H[ne+48]=Ne-we>>3,ne+=64}function Uh(k,F,H){var ne,oe=F-32,he=Ho,me=255-k[oe-1];for(ne=0;ne<H;++ne){var ve,we=he,Ne=me+k[F-1];for(ve=0;ve<H;++ve)k[F+ve]=we[Ne+k[oe+ve]];F+=32}}function Ug(k,F){Uh(k,F,4)}function zm(k,F){Uh(k,F,8)}function qg(k,F){Uh(k,F,16)}function Nc(k,F){var H;for(H=0;16>H;++H)n(k,F+32*H,k,F-32,16)}function Sf(k,F){var H;for(H=16;0<H;--H)a(k,F,k[F-1],16),F+=32}function vd(k,F,H){var ne;for(ne=0;16>ne;++ne)a(F,H+32*ne,k,16)}function Af(k,F){var H,ne=16;for(H=0;16>H;++H)ne+=k[F-1+32*H]+k[F+H-32];vd(ne>>5,k,F)}function qa(k,F){var H,ne=8;for(H=0;16>H;++H)ne+=k[F-1+32*H];vd(ne>>4,k,F)}function kc(k,F){var H,ne=8;for(H=0;16>H;++H)ne+=k[F+H-32];vd(ne>>4,k,F)}function Vl(k,F){vd(128,k,F)}function qr(k,F,H){return k+2*F+H+2>>2}function Nf(k,F){var H,ne=F-32;for(ne=new Uint8Array([qr(k[ne-1],k[ne+0],k[ne+1]),qr(k[ne+0],k[ne+1],k[ne+2]),qr(k[ne+1],k[ne+2],k[ne+3]),qr(k[ne+2],k[ne+3],k[ne+4])]),H=0;4>H;++H)n(k,F+32*H,ne,0,ne.length)}function Ec(k,F){var H=k[F-1],ne=k[F-1+32],oe=k[F-1+64],he=k[F-1+96];ue(k,F+0,16843009*qr(k[F-1-32],H,ne)),ue(k,F+32,16843009*qr(H,ne,oe)),ue(k,F+64,16843009*qr(ne,oe,he)),ue(k,F+96,16843009*qr(oe,he,he))}function Cc(k,F){var H,ne=4;for(H=0;4>H;++H)ne+=k[F+H-32]+k[F-1+32*H];for(ne>>=3,H=0;4>H;++H)a(k,F+32*H,ne,4)}function Wm(k,F){var H=k[F-1+0],ne=k[F-1+32],oe=k[F-1+64],he=k[F-1-32],me=k[F+0-32],ve=k[F+1-32],we=k[F+2-32],Ne=k[F+3-32];k[F+0+96]=qr(ne,oe,k[F-1+96]),k[F+1+96]=k[F+0+64]=qr(H,ne,oe),k[F+2+96]=k[F+1+64]=k[F+0+32]=qr(he,H,ne),k[F+3+96]=k[F+2+64]=k[F+1+32]=k[F+0+0]=qr(me,he,H),k[F+3+64]=k[F+2+32]=k[F+1+0]=qr(ve,me,he),k[F+3+32]=k[F+2+0]=qr(we,ve,me),k[F+3+0]=qr(Ne,we,ve)}function yd(k,F){var H=k[F+1-32],ne=k[F+2-32],oe=k[F+3-32],he=k[F+4-32],me=k[F+5-32],ve=k[F+6-32],we=k[F+7-32];k[F+0+0]=qr(k[F+0-32],H,ne),k[F+1+0]=k[F+0+32]=qr(H,ne,oe),k[F+2+0]=k[F+1+32]=k[F+0+64]=qr(ne,oe,he),k[F+3+0]=k[F+2+32]=k[F+1+64]=k[F+0+96]=qr(oe,he,me),k[F+3+32]=k[F+2+64]=k[F+1+96]=qr(he,me,ve),k[F+3+64]=k[F+2+96]=qr(me,ve,we),k[F+3+96]=qr(ve,we,we)}function qh(k,F){var H=k[F-1+0],ne=k[F-1+32],oe=k[F-1+64],he=k[F-1-32],me=k[F+0-32],ve=k[F+1-32],we=k[F+2-32],Ne=k[F+3-32];k[F+0+0]=k[F+1+64]=he+me+1>>1,k[F+1+0]=k[F+2+64]=me+ve+1>>1,k[F+2+0]=k[F+3+64]=ve+we+1>>1,k[F+3+0]=we+Ne+1>>1,k[F+0+96]=qr(oe,ne,H),k[F+0+64]=qr(ne,H,he),k[F+0+32]=k[F+1+96]=qr(H,he,me),k[F+1+32]=k[F+2+96]=qr(he,me,ve),k[F+2+32]=k[F+3+96]=qr(me,ve,we),k[F+3+32]=qr(ve,we,Ne)}function zh(k,F){var H=k[F+0-32],ne=k[F+1-32],oe=k[F+2-32],he=k[F+3-32],me=k[F+4-32],ve=k[F+5-32],we=k[F+6-32],Ne=k[F+7-32];k[F+0+0]=H+ne+1>>1,k[F+1+0]=k[F+0+64]=ne+oe+1>>1,k[F+2+0]=k[F+1+64]=oe+he+1>>1,k[F+3+0]=k[F+2+64]=he+me+1>>1,k[F+0+32]=qr(H,ne,oe),k[F+1+32]=k[F+0+96]=qr(ne,oe,he),k[F+2+32]=k[F+1+96]=qr(oe,he,me),k[F+3+32]=k[F+2+96]=qr(he,me,ve),k[F+3+64]=qr(me,ve,we),k[F+3+96]=qr(ve,we,Ne)}function Wh(k,F){var H=k[F-1+0],ne=k[F-1+32],oe=k[F-1+64],he=k[F-1+96];k[F+0+0]=H+ne+1>>1,k[F+2+0]=k[F+0+32]=ne+oe+1>>1,k[F+2+32]=k[F+0+64]=oe+he+1>>1,k[F+1+0]=qr(H,ne,oe),k[F+3+0]=k[F+1+32]=qr(ne,oe,he),k[F+3+32]=k[F+1+64]=qr(oe,he,he),k[F+3+64]=k[F+2+64]=k[F+0+96]=k[F+1+96]=k[F+2+96]=k[F+3+96]=he}function zg(k,F){var H=k[F-1+0],ne=k[F-1+32],oe=k[F-1+64],he=k[F-1+96],me=k[F-1-32],ve=k[F+0-32],we=k[F+1-32],Ne=k[F+2-32];k[F+0+0]=k[F+2+32]=H+me+1>>1,k[F+0+32]=k[F+2+64]=ne+H+1>>1,k[F+0+64]=k[F+2+96]=oe+ne+1>>1,k[F+0+96]=he+oe+1>>1,k[F+3+0]=qr(ve,we,Ne),k[F+2+0]=qr(me,ve,we),k[F+1+0]=k[F+3+32]=qr(H,me,ve),k[F+1+32]=k[F+3+64]=qr(ne,H,me),k[F+1+64]=k[F+3+96]=qr(oe,ne,H),k[F+1+96]=qr(he,oe,ne)}function Cy(k,F){var H;for(H=0;8>H;++H)n(k,F+32*H,k,F-32,8)}function cu(k,F){var H;for(H=0;8>H;++H)a(k,F,k[F-1],8),F+=32}function Hl(k,F,H){var ne;for(ne=0;8>ne;++ne)a(F,H+32*ne,k,8)}function Hs(k,F){var H,ne=8;for(H=0;8>H;++H)ne+=k[F+H-32]+k[F-1+32*H];Hl(ne>>4,k,F)}function Vh(k,F){var H,ne=4;for(H=0;8>H;++H)ne+=k[F+H-32];Hl(ne>>3,k,F)}function kf(k,F){var H,ne=4;for(H=0;8>H;++H)ne+=k[F-1+32*H];Hl(ne>>3,k,F)}function Vm(k,F){Hl(128,k,F)}function xd(k,F,H){var ne=k[F-H],oe=k[F+0],he=3*(oe-ne)+Ic[1020+k[F-2*H]-k[F+H]],me=lp[112+(he+4>>3)];k[F-H]=Ho[255+ne+lp[112+(he+3>>3)]],k[F+0]=Ho[255+oe-me]}function Ef(k,F,H,ne){var oe=k[F+0],he=k[F+H];return wl[255+k[F-2*H]-k[F-H]]>ne||wl[255+he-oe]>ne}function Hh(k,F,H,ne){return 4*wl[255+k[F-H]-k[F+0]]+wl[255+k[F-2*H]-k[F+H]]<=ne}function Hm(k,F,H,ne,oe){var he=k[F-3*H],me=k[F-2*H],ve=k[F-H],we=k[F+0],Ne=k[F+H],Be=k[F+2*H],nt=k[F+3*H];return 4*wl[255+ve-we]+wl[255+me-Ne]>ne?0:wl[255+k[F-4*H]-he]<=oe&&wl[255+he-me]<=oe&&wl[255+me-ve]<=oe&&wl[255+nt-Be]<=oe&&wl[255+Be-Ne]<=oe&&wl[255+Ne-we]<=oe}function Gl(k,F,H,ne){var oe=2*ne+1;for(ne=0;16>ne;++ne)Hh(k,F+ne,H,oe)&&xd(k,F+ne,H)}function vl(k,F,H,ne){var oe=2*ne+1;for(ne=0;16>ne;++ne)Hh(k,F+ne*H,1,oe)&&xd(k,F+ne*H,1)}function yl(k,F,H,ne){var oe;for(oe=3;0<oe;--oe)Gl(k,F+=4*H,H,ne)}function Wg(k,F,H,ne){var oe;for(oe=3;0<oe;--oe)vl(k,F+=4,H,ne)}function Kl(k,F,H,ne,oe,he,me,ve){for(he=2*he+1;0<oe--;){if(Hm(k,F,H,he,me))if(Ef(k,F,H,ve))xd(k,F,H);else{var we=k,Ne=F,Be=H,nt=we[Ne-2*Be],at=we[Ne-Be],Ke=we[Ne+0],Ot=we[Ne+Be],St=we[Ne+2*Be],ze=27*(kt=Ic[1020+3*(Ke-at)+Ic[1020+nt-Ot]])+63>>7,We=18*kt+63>>7,kt=9*kt+63>>7;we[Ne-3*Be]=Ho[255+we[Ne-3*Be]+kt],we[Ne-2*Be]=Ho[255+nt+We],we[Ne-Be]=Ho[255+at+ze],we[Ne+0]=Ho[255+Ke-ze],we[Ne+Be]=Ho[255+Ot-We],we[Ne+2*Be]=Ho[255+St-kt]}F+=ne}}function fs(k,F,H,ne,oe,he,me,ve){for(he=2*he+1;0<oe--;){if(Hm(k,F,H,he,me))if(Ef(k,F,H,ve))xd(k,F,H);else{var we=k,Ne=F,Be=H,nt=we[Ne-Be],at=we[Ne+0],Ke=we[Ne+Be],Ot=lp[112+((St=3*(at-nt))+4>>3)],St=lp[112+(St+3>>3)],ze=Ot+1>>1;we[Ne-2*Be]=Ho[255+we[Ne-2*Be]+ze],we[Ne-Be]=Ho[255+nt+St],we[Ne+0]=Ho[255+at-Ot],we[Ne+Be]=Ho[255+Ke-ze]}F+=ne}}function Gh(k,F,H,ne,oe,he){Kl(k,F,H,1,16,ne,oe,he)}function Ii(k,F,H,ne,oe,he){Kl(k,F,1,H,16,ne,oe,he)}function wd(k,F,H,ne,oe,he){var me;for(me=3;0<me;--me)fs(k,F+=4*H,H,1,16,ne,oe,he)}function _d(k,F,H,ne,oe,he){var me;for(me=3;0<me;--me)fs(k,F+=4,1,H,16,ne,oe,he)}function Cf(k,F,H,ne,oe,he,me,ve){Kl(k,F,oe,1,8,he,me,ve),Kl(H,ne,oe,1,8,he,me,ve)}function Gm(k,F,H,ne,oe,he,me,ve){Kl(k,F,1,oe,8,he,me,ve),Kl(H,ne,1,oe,8,he,me,ve)}function Pf(k,F,H,ne,oe,he,me,ve){fs(k,F+4*oe,oe,1,8,he,me,ve),fs(H,ne+4*oe,oe,1,8,he,me,ve)}function Kh(k,F,H,ne,oe,he,me,ve){fs(k,F+4,1,oe,8,he,me,ve),fs(H,ne+4,1,oe,8,he,me,ve)}function Pc(){this.ba=new pa,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vg(){this.ua=0,this.Wa=new ge,this.vb=new ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new R}function Py(){this.xb=this.a=0,this.l=new Ac,this.ca=new pa,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vg,this.ab=0,this.gc=o(4,Yh),this.Oc=0}function Xh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ac,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function uu(k,F,H,ne,oe,he,me){for(k=k==null?0:k[F+0],F=0;F<me;++F)oe[he+F]=k+H[ne+F]&255,k=oe[he+F]}function Km(k,F,H,ne,oe,he,me){var ve;if(k==null)uu(null,null,H,ne,oe,he,me);else for(ve=0;ve<me;++ve)oe[he+ve]=k[F+ve]+H[ne+ve]&255}function Sd(k,F,H,ne,oe,he,me){if(k==null)uu(null,null,H,ne,oe,he,me);else{var ve,we=k[F+0],Ne=we,Be=we;for(ve=0;ve<me;++ve)Ne=Be+(we=k[F+ve])-Ne,Be=H[ne+ve]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=we,oe[he+ve]=Be}}function Ym(k,F,H,ne){var oe=F.width,he=F.o;if(t(k!=null&&F!=null),0>H||0>=ne||H+ne>he)return null;if(!k.Cc){if(k.ga==null){var me;if(k.ga=new Xh,(me=k.ga==null)||(me=F.width*F.o,t(k.Gb.length==0),k.Gb=i(me),k.Uc=0,k.Gb==null?me=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,me=1),me=!me),!me){me=k.ga;var ve=k.Fa,we=k.P,Ne=k.qc,Be=k.mb,nt=k.nb,at=we+1,Ke=Ne-1,Ot=me.l;if(t(ve!=null&&Be!=null&&F!=null),Eo[0]=null,Eo[1]=uu,Eo[2]=Km,Eo[3]=Sd,me.ca=Be,me.tb=nt,me.c=F.width,me.i=F.height,t(0<me.c&&0<me.i),1>=Ne)F=0;else if(me.$a=ve[we+0]>>0&3,me.Z=ve[we+0]>>2&3,me.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||we)F=0;else if(Ot.put=li,Ot.ac=Jn,Ot.bc=lt,Ot.ma=me,Ot.width=F.width,Ot.height=F.height,Ot.Da=F.Da,Ot.v=F.v,Ot.va=F.va,Ot.j=F.j,Ot.o=F.o,me.$a)e:{t(me.$a==1),F=ut();t:for(;;){if(F==null){F=0;break e}if(t(me!=null),me.mc=F,F.c=me.c,F.i=me.i,F.l=me.l,F.l.ma=me,F.l.width=me.c,F.l.height=me.i,F.a=0,Y(F.m,ve,at,Ke),!et(me.c,me.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&ye(F.s)?(me.ic=1,ve=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(ve),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(me.ic=0,F=it(F,me.c)),!F))break t;F=1;break e}me.mc=null,F=0}else F=Ke>=me.c*me.i;me=!F}if(me)return null;k.ga.Lc!=1?k.Ga=0:ne=he-H}t(k.ga!=null),t(H+ne<=he);e:{if(F=(ve=k.ga).c,he=ve.l.o,ve.$a==0){if(at=k.rc,Ke=k.Vc,Ot=k.Fa,we=k.P+1+H*F,Ne=k.mb,Be=k.nb+H*F,t(we<=k.P+k.qc),ve.Z!=0)for(t(Eo[ve.Z]!=null),me=0;me<ne;++me)Eo[ve.Z](at,Ke,Ot,we,Ne,Be,F),at=Ne,Ke=Be,Be+=F,we+=F;else for(me=0;me<ne;++me)n(Ne,Be,Ot,we,F),at=Ne,Ke=Be,Be+=F,we+=F;k.rc=at,k.Vc=Ke}else{if(t(ve.mc!=null),F=H+ne,t((me=ve.mc)!=null),t(F<=me.i),me.C>=F)F=1;else if(ve.ic||rt(),ve.ic){ve=me.V,at=me.Ba,Ke=me.c;var St=me.i,ze=(Ot=1,we=me.$/Ke,Ne=me.$%Ke,Be=me.m,nt=me.s,me.$),We=Ke*St,kt=Ke*F,Nt=nt.wc,Ct=ze<kt?Jt(nt,Ne,we):null;t(ze<=We),t(F<=St),t(ye(nt));t:for(;;){for(;!Be.h&&ze<kt;){if(Ne&Nt||(Ct=Jt(nt,Ne,we)),t(Ct!=null),se(Be),256>(St=bt(Ct.G[0],Ct.H[0],Be)))ve[at+ze]=St,++ze,++Ne>=Ke&&(Ne=0,++we<=F&&!(we%16)&&Ae(me,we));else{if(!(280>St)){Ot=0;break t}St=Fr(St-256,Be);var fr,ar=bt(Ct.G[4],Ct.H[4],Be);if(se(Be),!(ze>=(ar=ma(Ke,ar=Fr(ar,Be)))&&We-ze>=St)){Ot=0;break t}for(fr=0;fr<St;++fr)ve[at+ze+fr]=ve[at+ze+fr-ar];for(ze+=St,Ne+=St;Ne>=Ke;)Ne-=Ke,++we<=F&&!(we%16)&&Ae(me,we);ze<kt&&Ne&Nt&&(Ct=Jt(nt,Ne,we))}t(Be.h==Q(Be))}Ae(me,we>F?F:we);break t}!Ot||Be.h&&ze<We?(Ot=0,me.a=Be.h?5:3):me.$=ze,F=Ot}else F=Se(me,me.V,me.Ba,me.c,me.i,F,Je);if(!F){ne=0;break e}}H+ne>=he&&(k.Cc=1),ne=1}if(!ne)return null;if(k.Cc&&((ne=k.ga)!=null&&(ne.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+H*oe}function B(k,F,H,ne,oe,he){for(;0<oe--;){var me,ve=k,we=F+(H?1:0),Ne=k,Be=F+(H?0:3);for(me=0;me<ne;++me){var nt=Ne[Be+4*me];nt!=255&&(nt*=32897,ve[we+4*me+0]=ve[we+4*me+0]*nt>>23,ve[we+4*me+1]=ve[we+4*me+1]*nt>>23,ve[we+4*me+2]=ve[we+4*me+2]*nt>>23)}F+=he}}function ce(k,F,H,ne,oe){for(;0<ne--;){var he;for(he=0;he<H;++he){var me=k[F+2*he+0],ve=15&(Ne=k[F+2*he+1]),we=4369*ve,Ne=(240&Ne|Ne>>4)*we>>16;k[F+2*he+0]=(240&me|me>>4)*we>>16&240|(15&me|me<<4)*we>>16>>4&15,k[F+2*he+1]=240&Ne|ve}F+=oe}}function Ee(k,F,H,ne,oe,he,me,ve){var we,Ne,Be=255;for(Ne=0;Ne<oe;++Ne){for(we=0;we<ne;++we){var nt=k[F+we];he[me+4*we]=nt,Be&=nt}F+=H,me+=ve}return Be!=255}function $e(k,F,H,ne,oe){var he;for(he=0;he<oe;++he)H[ne+he]=k[F+he]>>8}function rt(){hs=B,ga=ce,ea=Ee,ni=$e}function At(k,F,H){M[k]=function(ne,oe,he,me,ve,we,Ne,Be,nt,at,Ke,Ot,St,ze,We,kt,Nt){var Ct,fr=Nt-1>>1,ar=ve[we+0]|Ne[Be+0]<<16,Rr=nt[at+0]|Ke[Ot+0]<<16;t(ne!=null);var ir=3*ar+Rr+131074>>2;for(F(ne[oe+0],255&ir,ir>>16,St,ze),he!=null&&(ir=3*Rr+ar+131074>>2,F(he[me+0],255&ir,ir>>16,We,kt)),Ct=1;Ct<=fr;++Ct){var Ln=ve[we+Ct]|Ne[Be+Ct]<<16,jn=nt[at+Ct]|Ke[Ot+Ct]<<16,In=ar+Ln+Rr+jn+524296,mn=In+2*(Ln+Rr)>>3;ir=mn+ar>>1,ar=(In=In+2*(ar+jn)>>3)+Ln>>1,F(ne[oe+2*Ct-1],255&ir,ir>>16,St,ze+(2*Ct-1)*H),F(ne[oe+2*Ct-0],255&ar,ar>>16,St,ze+(2*Ct-0)*H),he!=null&&(ir=In+Rr>>1,ar=mn+jn>>1,F(he[me+2*Ct-1],255&ir,ir>>16,We,kt+(2*Ct-1)*H),F(he[me+2*Ct+0],255&ar,ar>>16,We,kt+(2*Ct+0)*H)),ar=Ln,Rr=jn}1&Nt||(ir=3*ar+Rr+131074>>2,F(ne[oe+Nt-1],255&ir,ir>>16,St,ze+(Nt-1)*H),he!=null&&(ir=3*Rr+ar+131074>>2,F(he[me+Nt-1],255&ir,ir>>16,We,kt+(Nt-1)*H)))}}function Mt(){ms[Gg]=aA,ms[Cd]=Pd,ms[u_]=iA,ms[e0]=fp,ms[t0]=Uf,ms[va]=o0,ms[Kg]=Iy,ms[cp]=Pd,ms[jf]=fp,ms[r0]=Uf,ms[n0]=o0}function lr(k){return k&-16384?0>k?0:255:k>>Td}function Dr(k,F){return lr((19077*k>>8)+(26149*F>>8)-14234)}function un(k,F,H){return lr((19077*k>>8)-(6419*F>>8)-(13320*H>>8)+8708)}function cn(k,F){return lr((19077*k>>8)+(33050*F>>8)-17685)}function Pn(k,F,H,ne,oe){ne[oe+0]=Dr(k,H),ne[oe+1]=un(k,F,H),ne[oe+2]=cn(k,F)}function za(k,F,H,ne,oe){ne[oe+0]=cn(k,F),ne[oe+1]=un(k,F,H),ne[oe+2]=Dr(k,H)}function ti(k,F,H,ne,oe){var he=un(k,F,H);F=he<<3&224|cn(k,F)>>3,ne[oe+0]=248&Dr(k,H)|he>>5,ne[oe+1]=F}function wi(k,F,H,ne,oe){var he=240&cn(k,F)|15;ne[oe+0]=240&Dr(k,H)|un(k,F,H)>>4,ne[oe+1]=he}function Ao(k,F,H,ne,oe){ne[oe+0]=255,Pn(k,F,H,ne,oe+1)}function ro(k,F,H,ne,oe){za(k,F,H,ne,oe),ne[oe+3]=255}function Yl(k,F,H,ne,oe){Pn(k,F,H,ne,oe),ne[oe+3]=255}function Gs(k,F){return 0>k?0:k>F?F:k}function xl(k,F,H){M[k]=function(ne,oe,he,me,ve,we,Ne,Be,nt){for(var at=Be+(-2&nt)*H;Be!=at;)F(ne[oe+0],he[me+0],ve[we+0],Ne,Be),F(ne[oe+1],he[me+0],ve[we+0],Ne,Be+H),oe+=2,++me,++we,Be+=2*H;1&nt&&F(ne[oe+0],he[me+0],ve[we+0],Ne,Be)}}function Ad(k,F,H){return H==0?k==0?F==0?6:5:F==0?4:0:H}function Xm(k,F,H,ne,oe){switch(k>>>30){case 3:pu(F,H,ne,oe,0);break;case 2:qn(F,H,ne,oe);break;case 1:ko(F,H,ne,oe)}}function Zh(k,F){var H,ne,oe=F.M,he=F.Nb,me=k.oc,ve=k.pc+40,we=k.oc,Ne=k.pc+584,Be=k.oc,nt=k.pc+600;for(H=0;16>H;++H)me[ve+32*H-1]=129;for(H=0;8>H;++H)we[Ne+32*H-1]=129,Be[nt+32*H-1]=129;for(0<oe?me[ve-1-32]=we[Ne-1-32]=Be[nt-1-32]=129:(a(me,ve-32-1,127,21),a(we,Ne-32-1,127,9),a(Be,nt-32-1,127,9)),ne=0;ne<k.za;++ne){var at=F.ya[F.aa+ne];if(0<ne){for(H=-1;16>H;++H)n(me,ve+32*H-4,me,ve+32*H+12,4);for(H=-1;8>H;++H)n(we,Ne+32*H-4,we,Ne+32*H+4,4),n(Be,nt+32*H-4,Be,nt+32*H+4,4)}var Ke=k.Gd,Ot=k.Hd+ne,St=at.ad,ze=at.Hc;if(0<oe&&(n(me,ve-32,Ke[Ot].y,0,16),n(we,Ne-32,Ke[Ot].f,0,8),n(Be,nt-32,Ke[Ot].ea,0,8)),at.Za){var We=me,kt=ve-32+16;for(0<oe&&(ne>=k.za-1?a(We,kt,Ke[Ot].y[15],4):n(We,kt,Ke[Ot+1].y,0,4)),H=0;4>H;H++)We[kt+128+H]=We[kt+256+H]=We[kt+384+H]=We[kt+0+H];for(H=0;16>H;++H,ze<<=2)We=me,kt=ve+Ry[H],_l[at.Ob[H]](We,kt),Xm(ze,St,16*+H,We,kt)}else if(We=Ad(ne,oe,at.Ob[0]),Go[We](me,ve),ze!=0)for(H=0;16>H;++H,ze<<=2)Xm(ze,St,16*+H,me,ve+Ry[H]);for(H=at.Gc,We=Ad(ne,oe,at.Dd),ps[We](we,Ne),ps[We](Be,nt),ze=St,We=we,kt=Ne,255&(at=H>>0)&&(170&at?mu(ze,256,We,kt):Ks(ze,256,We,kt)),at=Be,ze=nt,255&(H>>=8)&&(170&H?mu(St,320,at,ze):Ks(St,320,at,ze)),oe<k.Ub-1&&(n(Ke[Ot].y,0,me,ve+480,16),n(Ke[Ot].f,0,we,Ne+224,8),n(Ke[Ot].ea,0,Be,nt+224,8)),H=8*he*k.B,Ke=k.sa,Ot=k.ta+16*ne+16*he*k.R,St=k.qa,at=k.ra+8*ne+H,ze=k.Ha,We=k.Ia+8*ne+H,H=0;16>H;++H)n(Ke,Ot+H*k.R,me,ve+32*H,16);for(H=0;8>H;++H)n(St,at+H*k.B,we,Ne+32*H,8),n(ze,We+H*k.B,Be,nt+32*H,8)}}function Tf(k,F,H,ne,oe,he,me,ve,we){var Ne=[0],Be=[0],nt=0,at=we!=null?we.kd:0,Ke=we??new bd;if(k==null||12>H)return 7;Ke.data=k,Ke.w=F,Ke.ha=H,F=[F],H=[H],Ke.gb=[Ke.gb];e:{var Ot=F,St=H,ze=Ke.gb;if(t(k!=null),t(St!=null),t(ze!=null),ze[0]=0,12<=St[0]&&!r(k,Ot[0],"RIFF")){if(r(k,Ot[0]+8,"WEBP")){ze=3;break e}var We=ke(k,Ot[0]+4);if(12>We||4294967286<We){ze=3;break e}if(at&&We>St[0]-8){ze=7;break e}ze[0]=We,Ot[0]+=12,St[0]-=12}ze=0}if(ze!=0)return ze;for(We=0<Ke.gb[0],H=H[0];;){e:{var kt=k;St=F,ze=H;var Nt=Ne,Ct=Be,fr=Ot=[0];if((ir=nt=[nt])[0]=0,8>ze[0])ze=7;else{if(!r(kt,St[0],"VP8X")){if(ke(kt,St[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var ar=ke(kt,St[0]+8),Rr=1+re(kt,St[0]+12);if(2147483648<=Rr*(kt=1+re(kt,St[0]+15))){ze=3;break e}fr!=null&&(fr[0]=ar),Nt!=null&&(Nt[0]=Rr),Ct!=null&&(Ct[0]=kt),St[0]+=18,ze[0]-=18,ir[0]=1}ze=0}}if(nt=nt[0],Ot=Ot[0],ze!=0)return ze;if(St=!!(2&Ot),!We&&nt)return 3;if(he!=null&&(he[0]=!!(16&Ot)),me!=null&&(me[0]=St),ve!=null&&(ve[0]=0),me=Ne[0],Ot=Be[0],nt&&St&&we==null){ze=0;break}if(4>H){ze=7;break}if(We&&nt||!We&&!nt&&!r(k,F[0],"ALPH")){H=[H],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{ar=k,ze=F,We=H;var ir=Ke.gb;Nt=Ke.na,Ct=Ke.P,fr=Ke.Sa,Rr=22,t(ar!=null),t(We!=null),kt=ze[0];var Ln=We[0];for(t(Nt!=null),t(fr!=null),Nt[0]=null,Ct[0]=null,fr[0]=0;;){if(ze[0]=kt,We[0]=Ln,8>Ln){ze=7;break e}var jn=ke(ar,kt+4);if(4294967286<jn){ze=3;break e}var In=8+jn+1&-2;if(Rr+=In,0<ir&&Rr>ir){ze=3;break e}if(!r(ar,kt,"VP8 ")||!r(ar,kt,"VP8L")){ze=0;break e}if(Ln[0]<In){ze=7;break e}r(ar,kt,"ALPH")||(Nt[0]=ar,Ct[0]=kt+8,fr[0]=jn),kt+=In,Ln-=In}}if(H=H[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],ze!=0)break}H=[H],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(ir=k,ze=F,We=H,Nt=Ke.gb[0],Ct=Ke.Ja,fr=Ke.xa,ar=ze[0],kt=!r(ir,ar,"VP8 "),Rr=!r(ir,ar,"VP8L"),t(ir!=null),t(We!=null),t(Ct!=null),t(fr!=null),8>We[0])ze=7;else{if(kt||Rr){if(ir=ke(ir,ar+4),12<=Nt&&ir>Nt-12){ze=3;break e}if(at&&ir>We[0]-8){ze=7;break e}Ct[0]=ir,ze[0]+=8,We[0]-=8,fr[0]=Rr}else fr[0]=5<=We[0]&&ir[ar+0]==47&&!(ir[ar+4]>>5),Ct[0]=We[0];ze=0}if(H=H[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],F=F[0],ze!=0)break;if(4294967286<Ke.Ja)return 3;if(ve==null||St||(ve[0]=Ke.xa?2:1),me=[me],Ot=[Ot],Ke.xa){if(5>H){ze=7;break}ve=me,at=Ot,St=he,k==null||5>H?k=0:5<=H&&k[F+0]==47&&!(k[F+4]>>5)?(We=[0],ir=[0],Nt=[0],Y(Ct=new D,k,F,H),xt(Ct,We,ir,Nt)?(ve!=null&&(ve[0]=We[0]),at!=null&&(at[0]=ir[0]),St!=null&&(St[0]=Nt[0]),k=1):k=0):k=0}else{if(10>H){ze=7;break}ve=Ot,k==null||10>H||!$g(k,F+3,H-3)?k=0:(at=k[F+0]|k[F+1]<<8|k[F+2]<<16,St=16383&(k[F+7]<<8|k[F+6]),k=16383&(k[F+9]<<8|k[F+8]),1&at||3<(at>>1&7)||!(at>>4&1)||at>>5>=Ke.Ja||!St||!k?k=0:(me&&(me[0]=St),ve&&(ve[0]=k),k=1))}if(!k||(me=me[0],Ot=Ot[0],nt&&(Ne[0]!=me||Be[0]!=Ot)))return 3;we!=null&&(we[0]=Ke,we.offset=F-we.w,t(4294967286>F-we.w),t(we.offset==we.ha-H));break}return ze==0||ze==7&&nt&&we==null?(he!=null&&(he[0]|=Ke.na!=null&&0<Ke.na.length),ne!=null&&(ne[0]=me),oe!=null&&(oe[0]=Ot),0):ze}function Jh(k,F,H){var ne=F.width,oe=F.height,he=0,me=0,ve=ne,we=oe;if(F.Da=k!=null&&0<k.Da,F.Da&&(ve=k.cd,we=k.bd,he=k.v,me=k.j,11>H||(he&=-2,me&=-2),0>he||0>me||0>=ve||0>=we||he+ve>ne||me+we>oe))return 0;if(F.v=he,F.j=me,F.va=he+ve,F.o=me+we,F.U=ve,F.T=we,F.da=k!=null&&0<k.da,F.da){if(!Ye(ve,we,H=[k.ib],he=[k.hb]))return 0;F.ib=H[0],F.hb=he[0]}return F.ob=k!=null&&k.ob,F.Kb=k==null||!k.Sd,F.da&&(F.ob=F.ib<3*ne/4&&F.hb<3*oe/4,F.Kb=0),1}function Qh(k){if(k==null)return 2;if(11>k.S){var F=k.f.RGBA;F.fb+=(k.height-1)*F.A,F.A=-F.A}else F=k.f.kb,k=k.height,F.O+=(k-1)*F.fa,F.fa=-F.fa,F.N+=(k-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(k-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(k-1)*F.lb,F.lb=-F.lb);return 0}function Of(k,F,H,ne){if(ne==null||0>=k||0>=F)return 2;if(H!=null){if(H.Da){var oe=H.cd,he=H.bd,me=-2&H.v,ve=-2&H.j;if(0>me||0>ve||0>=oe||0>=he||me+oe>k||ve+he>F)return 2;k=oe,F=he}if(H.da){if(!Ye(k,F,oe=[H.ib],he=[H.hb]))return 2;k=oe[0],F=he[0]}}ne.width=k,ne.height=F;e:{var we=ne.width,Ne=ne.height;if(k=ne.S,0>=we||0>=Ne||!(k>=Gg&&13>k))k=2;else{if(0>=ne.Rd&&ne.sd==null){me=he=oe=F=0;var Be=(ve=we*s0[k])*Ne;if(11>k||(he=(Ne+1)/2*(F=(we+1)/2),k==12&&(me=(oe=we)*Ne)),(Ne=i(Be+2*he+me))==null){k=1;break e}ne.sd=Ne,11>k?((we=ne.f.RGBA).eb=Ne,we.fb=0,we.A=ve,we.size=Be):((we=ne.f.kb).y=Ne,we.O=0,we.fa=ve,we.Fd=Be,we.f=Ne,we.N=0+Be,we.Ab=F,we.Cd=he,we.ea=Ne,we.W=0+Be+he,we.Db=F,we.Ed=he,k==12&&(we.F=Ne,we.J=0+Be+2*he),we.Tc=me,we.lb=oe)}if(F=1,oe=ne.S,he=ne.width,me=ne.height,oe>=Gg&&13>oe)if(11>oe)k=ne.f.RGBA,F&=(ve=Math.abs(k.A))*(me-1)+he<=k.size,F&=ve>=he*s0[oe],F&=k.eb!=null;else{k=ne.f.kb,ve=(he+1)/2,Be=(me+1)/2,we=Math.abs(k.fa),Ne=Math.abs(k.Ab);var nt=Math.abs(k.Db),at=Math.abs(k.lb),Ke=at*(me-1)+he;F&=we*(me-1)+he<=k.Fd,F&=Ne*(Be-1)+ve<=k.Cd,F=(F&=nt*(Be-1)+ve<=k.Ed)&we>=he&Ne>=ve&nt>=ve,F&=k.y!=null,F&=k.f!=null,F&=k.ea!=null,oe==12&&(F&=at>=he,F&=Ke<=k.Tc,F&=k.F!=null)}else F=0;k=F?0:2}}return k!=0||H!=null&&H.fd&&(k=Qh(ne)),k}var ri=64,ep=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],tp=24,rp=32,np=8,zo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pt("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(k){return k},M.Predictor2=function(k,F,H){return F[H+0]},M.Predictor3=function(k,F,H){return F[H+1]},M.Predictor4=function(k,F,H){return F[H-1]},M.Predictor5=function(k,F,H){return _e(_e(k,F[H+1]),F[H+0])},M.Predictor6=function(k,F,H){return _e(k,F[H-1])},M.Predictor7=function(k,F,H){return _e(k,F[H+0])},M.Predictor8=function(k,F,H){return _e(F[H-1],F[H+0])},M.Predictor9=function(k,F,H){return _e(F[H+0],F[H+1])},M.Predictor10=function(k,F,H){return _e(_e(k,F[H-1]),_e(F[H+0],F[H+1]))},M.Predictor11=function(k,F,H){var ne=F[H+0];return 0>=yt(ne>>24&255,k>>24&255,(F=F[H-1])>>24&255)+yt(ne>>16&255,k>>16&255,F>>16&255)+yt(ne>>8&255,k>>8&255,F>>8&255)+yt(255&ne,255&k,255&F)?ne:k},M.Predictor12=function(k,F,H){var ne=F[H+0];return(Te((k>>24&255)+(ne>>24&255)-((F=F[H-1])>>24&255))<<24|Te((k>>16&255)+(ne>>16&255)-(F>>16&255))<<16|Te((k>>8&255)+(ne>>8&255)-(F>>8&255))<<8|Te((255&k)+(255&ne)-(255&F)))>>>0},M.Predictor13=function(k,F,H){var ne=F[H-1];return(qe((k=_e(k,F[H+0]))>>24&255,ne>>24&255)<<24|qe(k>>16&255,ne>>16&255)<<16|qe(k>>8&255,ne>>8&255)<<8|qe(k>>0&255,ne>>0&255))>>>0};var Df=M.PredictorAdd0;M.PredictorAdd1=vt,Pt("Predictor2","PredictorAdd2"),Pt("Predictor3","PredictorAdd3"),Pt("Predictor4","PredictorAdd4"),Pt("Predictor5","PredictorAdd5"),Pt("Predictor6","PredictorAdd6"),Pt("Predictor7","PredictorAdd7"),Pt("Predictor8","PredictorAdd8"),Pt("Predictor9","PredictorAdd9"),Pt("Predictor10","PredictorAdd10"),Pt("Predictor11","PredictorAdd11"),Pt("Predictor12","PredictorAdd12"),Pt("Predictor13","PredictorAdd13");var du=M.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var Hg,Wo=M.ColorIndexInverseTransform,ap=M.MapARGB,Zm=M.VP8LColorIndexInverseTransformAlpha,ip=M.MapAlpha,Tc=M.VP8LPredictorsAdd=[];Tc.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Nd,Vo,No,kd,fu,hu,op,pu,qn,mu,ko,Ks,If,Jm,Rf,Mf,Ff,Ys,gu,Oc,vu,yu,Ed,ho,hs,ga,ea,ni,_i=i(511),Dc=i(2041),sp=i(225),Lf=i(767),Qm=0,Ic=Dc,lp=sp,Ho=Lf,wl=_i,Gg=0,Cd=1,u_=2,e0=3,t0=4,va=5,Kg=6,cp=7,jf=8,r0=9,n0=10,a0=[2,3,7],Yg=[3,3,11],$f=[280,256,256,256,40],d_=[0,1,1,1,0],eA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],f_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xg=8,up=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],i0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bf=null,Ty=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Oy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],h_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],p_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Dy=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Go=[],_l=[],ps=[],Rc=1,dp=2,Eo=[],ms=[];At("UpsampleRgbLinePair",Pn,3),At("UpsampleBgrLinePair",za,3),At("UpsampleRgbaLinePair",Yl,4),At("UpsampleBgraLinePair",ro,4),At("UpsampleArgbLinePair",Ao,4),At("UpsampleRgba4444LinePair",wi,2),At("UpsampleRgb565LinePair",ti,2);var aA=M.UpsampleRgbLinePair,iA=M.UpsampleBgrLinePair,Pd=M.UpsampleRgbaLinePair,fp=M.UpsampleBgraLinePair,Uf=M.UpsampleArgbLinePair,o0=M.UpsampleRgba4444LinePair,Iy=M.UpsampleRgb565LinePair,xu=16,Xl=1<<xu-1,ta=-227,sa=482,Td=6,po=0,gs=i(256),qf=i(256),hp=i(256),vs=i(256),Zg=i(sa-ta),m_=i(sa-ta);xl("YuvToRgbRow",Pn,3),xl("YuvToBgrRow",za,3),xl("YuvToRgbaRow",Yl,4),xl("YuvToBgraRow",ro,4),xl("YuvToArgbRow",Ao,4),xl("YuvToRgba4444Row",wi,2),xl("YuvToRgb565Row",ti,2);var Ry=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zf=[0,2,8],g_=[8,7,6,4,4,2,2,2,1,1,1,1],wu=1;this.WebPDecodeRGBA=function(k,F,H,ne,oe){var he=Cd,me=new Pc,ve=new pa;me.ba=ve,ve.S=he,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,Ne=ve.height,Be=new si;if(Be==null||k==null)var nt=2;else t(Be!=null),nt=Tf(k,F,H,Be.width,Be.height,Be.Pd,Be.Qd,Be.format,null);if(nt!=0?we=0:(we!=null&&(we[0]=Be.width[0]),Ne!=null&&(Ne[0]=Be.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],ne!=null&&(ne[0]=ve.width),oe!=null&&(oe[0]=ve.height);e:{if(ne=new Ac,(oe=new bd).data=k,oe.w=F,oe.ha=H,oe.kd=1,F=[0],t(oe!=null),((k=Tf(oe.data,oe.w,oe.ha,null,null,null,F,null,oe))==0||k==7)&&F[0]&&(k=4),(F=k)==0){if(t(me!=null),ne.data=oe.data,ne.w=oe.w+oe.offset,ne.ha=oe.ha-oe.offset,ne.put=li,ne.ac=Jn,ne.bc=lt,ne.ma=me,oe.xa){if((k=ut())==null){me=1;break e}if(function(at,Ke){var Ot=[0],St=[0],ze=[0];t:for(;;){if(at==null)return 0;if(Ke==null)return at.a=2,0;if(at.l=Ke,at.a=0,Y(at.m,Ke.data,Ke.w,Ke.ha),!xt(at.m,Ot,St,ze)){at.a=3;break t}if(at.xb=dp,Ke.width=Ot[0],Ke.height=St[0],!et(Ot[0],St[0],1,at,null))break t;return 1}return t(at.a!=0),0}(k,ne)){if(ne=(F=Of(ne.width,ne.height,me.Oa,me.ba))==0){t:{ne=k;r:for(;;){if(ne==null){ne=0;break t}if(t(ne.s.yc!=null),t(ne.s.Ya!=null),t(0<ne.s.Wb),t((H=ne.l)!=null),t((oe=H.ma)!=null),ne.xb!=0){if(ne.ca=oe.ba,ne.tb=oe.tb,t(ne.ca!=null),!Jh(oe.Oa,H,e0)){ne.a=2;break r}if(!it(ne,H.width)||H.da)break r;if((H.da||Xr(ne.ca.S))&&rt(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&rt()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!Re(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break r}ne.xb=0}if(!Se(ne,ne.V,ne.Ba,ne.c,ne.i,H.o,xe))break r;oe.Dc=ne.Ma,ne=1;break t}t(ne.a!=0),ne=0}ne=!ne}ne&&(F=k.a)}else F=k.a}else{if((k=new Ua)==null){me=1;break e}if(k.Fa=oe.na,k.P=oe.P,k.qc=oe.Sa,Bg(k,ne)){if((F=Of(ne.width,ne.height,me.Oa,me.ba))==0){if(k.Aa=0,H=me.Oa,t((oe=k)!=null),H!=null){if(0<(we=0>(we=H.Md)?0:100<we?255:255*we/100)){for(Ne=Be=0;4>Ne;++Ne)12>(nt=oe.pb[Ne]).lc&&(nt.ia=we*g_[0>nt.lc?0:nt.lc]>>3),Be|=nt.ia;Be&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=H.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}_f(k,ne)||(F=k.a)}}else F=k.a}F==0&&me.Oa!=null&&me.Oa.fd&&(F=Qh(me.ba))}me=F}he=me!=0?null:11>he?ve.f.RGBA.eb:ve.f.kb.y}else he=null;return he};var s0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(M,L){for(var z="",P=0;P<4;P++)z+=String.fromCharCode(M[L++]);return z}function d(M,L){return(M[L+0]<<0|M[L+1]<<8|M[L+2]<<16)>>>0}function f(M,L){return(M[L+0]<<0|M[L+1]<<8|M[L+2]<<16|M[L+3]<<24)>>>0}new l;var h=[0],m=[0],x=[],g=new l,y=e,_=function(M,L){var z={},P=0,R=!1,j=0,V=0;if(z.frames=[],!function(K,Q,ae,se){for(var fe=0;fe<se;fe++)if(K[Q+fe]!=ae.charCodeAt(fe))return!0;return!1}(M,L,"RIFF",4)){for(f(M,L+=4),L+=8;L<M.length;){var Z=u(M,L),te=f(M,L+=4);L+=4;var q=te+(1&te);switch(Z){case"VP8 ":case"VP8L":z.frames[P]===void 0&&(z.frames[P]={}),(G=z.frames[P]).src_off=R?V:L-8,G.src_size=j+te+8,P++,R&&(R=!1,j=0,V=0);break;case"VP8X":(G=z.header={}).feature_flags=M[L];var Y=L+4;G.canvas_width=1+d(M,Y),Y+=3,G.canvas_height=1+d(M,Y),Y+=3;break;case"ALPH":R=!0,j=q+8,V=L-8;break;case"ANIM":(G=z.header).bgcolor=f(M,L),Y=L+4,G.loop_count=(J=M)[(D=Y)+0]<<0|J[D+1]<<8,Y+=2;break;case"ANMF":var U,G;(G=z.frames[P]={}).offset_x=2*d(M,L),L+=3,G.offset_y=2*d(M,L),L+=3,G.width=1+d(M,L),L+=3,G.height=1+d(M,L),L+=3,G.duration=d(M,L),L+=3,U=M[L++],G.dispose=1&U,G.blend=U>>1&1}Z!="ANMF"&&(L+=q)}var J,D;return z}}(y,0);_.response=y,_.rgbaoutput=!0,_.dataurl=!1;var b=_.header?_.header:null,S=_.frames?_.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var C=0;C<S.length&&S[C].blend!=0;C++);}var E=S[0],O=g.WebPDecodeRGBA(y,E.src_off,E.src_size,m,h);E.rgba=O,E.imgwidth=m[0],E.imgheight=h[0];for(var T=0;T<m[0]*h[0]*4;T++)x[T]=O[T];return this.width=m,this.height=h,this.data=x,this}(function(e){var t=function(){return typeof i8=="function"},r=function(h,m,x,g){var y=4,_=o;switch(g){case e.image_compression.FAST:y=1,_=i;break;case e.image_compression.MEDIUM:y=6,_=s;break;case e.image_compression.SLOW:y=9,_=l}h=n(h,m,x,_);var b=i8(h,{level:y});return e.__addimage__.arrayBufferToBinaryString(b)},n=function(h,m,x,g){for(var y,_,b,S=h.length/m,C=new Uint8Array(h.length+S),E=d(),O=0;O<S;O+=1){if(b=O*m,y=h.subarray(b,b+m),g)C.set(g(y,x,_),b+O);else{for(var T,M=E.length,L=[];T<M;T+=1)L[T]=E[T](y,x,_);var z=f(L.concat());C.set(L[z],b+O)}_=y}return C},a=function(h){var m=Array.apply([],h);return m.unshift(0),m},i=function(h,m){var x,g=[],y=h.length;g[0]=1;for(var _=0;_<y;_+=1)x=h[_-m]||0,g[_+1]=h[_]-x+256&255;return g},o=function(h,m,x){var g,y=[],_=h.length;y[0]=2;for(var b=0;b<_;b+=1)g=x&&x[b]||0,y[b+1]=h[b]-g+256&255;return y},s=function(h,m,x){var g,y,_=[],b=h.length;_[0]=3;for(var S=0;S<b;S+=1)g=h[S-m]||0,y=x&&x[S]||0,_[S+1]=h[S]+256-(g+y>>>1)&255;return _},l=function(h,m,x){var g,y,_,b,S=[],C=h.length;S[0]=4;for(var E=0;E<C;E+=1)g=h[E-m]||0,y=x&&x[E]||0,_=x&&x[E-m]||0,b=u(g,y,_),S[E+1]=h[E]-b+256&255;return S},u=function(h,m,x){if(h===m&&m===x)return h;var g=Math.abs(m-x),y=Math.abs(h-x),_=Math.abs(h+m-x-x);return g<=y&&g<=_?h:y<=_?m:x},d=function(){return[a,i,o,s,l]},f=function(h){var m=h.map(function(x){return x.reduce(function(g,y){return g+Math.abs(y)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(h,m,x,g){var y,_,b,S,C,E,O,T,M,L,z,P,R,j,V,Z=this.decode.FLATE_DECODE,te="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new T7e(h)).imgData,_=b.bits,y=b.colorSpace,C=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){M=(T=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,z=new Uint8Array(M*b.colors),L=new Uint8Array(M);var q,Y=b.pixelBitlength-b.bits;for(j=0,V=0;j<M;j++){for(R=T[j],q=0;q<Y;)z[V++]=R>>>q&255,q+=b.bits;L[j]=R>>>q&255}}if(b.bits===16){M=(T=new Uint32Array(b.decodePixels().buffer)).length,z=new Uint8Array(M*(32/b.pixelBitlength)*b.colors),L=new Uint8Array(M*(32/b.pixelBitlength)),P=b.colors>1,j=0,V=0;for(var U=0;j<M;)R=T[j++],z[V++]=R>>>0&255,P&&(z[V++]=R>>>16&255,R=T[j++],z[V++]=R>>>0&255),L[U++]=R>>>16&255;_=8}g!==e.image_compression.NONE&&t()?(h=r(z,b.width*b.colors,b.colors,g),O=r(L,b.width,1,g)):(h=z,O=L,Z=void 0)}if(b.colorType===3&&(y=this.color_spaces.INDEXED,E=b.palette,b.transparency.indexed)){var G=b.transparency.indexed,J=0;for(j=0,M=G.length;j<M;++j)J+=G[j];if((J/=255)===M-1&&G.indexOf(0)!==-1)S=[G.indexOf(0)];else if(J!==M){for(T=b.decodePixels(),L=new Uint8Array(T.length),j=0,M=T.length;j<M;j++)L[j]=G[T[j]];O=r(L,b.width,1)}}var D=function(K){var Q;switch(K){case e.image_compression.FAST:Q=11;break;case e.image_compression.MEDIUM:Q=13;break;case e.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(g);return Z===this.decode.FLATE_DECODE&&(te="/Predictor "+D+" "),te+="/Colors "+C+" /BitsPerComponent "+_+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:x,data:h,index:m,filter:Z,decodeParameters:te,transparency:S,palette:E,sMask:O,predictor:D,width:b.width,height:b.height,bitsPerComponent:_,colorSpace:y}}}})($r.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new O7e(t),o=i.width,s=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:s},d=new GP(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}($r.API),Iu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Iu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ea.log("bit decode error:"+r)}},Iu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,s=0;s<8&&8*a+s<this.width;s++){var l=this.palette[i>>7-s&1];this.data[o+4*s]=l.blue,this.data[o+4*s+1]=l.green,this.data[o+4*s+2]=l.red,this.data[o+4*s+3]=255}r!==0&&(this.pos+=4-r)}},Iu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,s=i>>4,l=15&i,u=this.palette[s];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Iu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Iu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,s=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,u=i>>15?255:0,d=n*this.width*4+4*a;this.data[d]=l,this.data[d+1]=s,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},Iu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&t)/t*255|0,l=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=a*this.width*4+4*i;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=s,this.data[d+3]=255}this.pos+=e}},Iu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Iu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=o}},Iu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new Iu(t,!1),o=i.width,s=i.height,l={data:i.getData(),width:o,height:s},u=new GP(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}($r.API),uW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new uW(t),o=i.width,s=i.height,l={data:i.getData(),width:o,height:s},u=new GP(100).encode(l,100);return e.processJPEG.call(this,u,r,n,a)}}($r.API),$r.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),s=0,l=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],m=n[u+3];i[s++]=d,i[s++]=f,i[s++]=h,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},$r.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dv=$r.API,Ab=Dv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:a.metadata.Unicode.widths,l=s.fof?s.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,m=e.length,x=0,g=s[0]||l,y=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?y.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(h=f&&wa(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/d:0,y.push((s[n]||g)/l+h)),x=n;return y},oW=Dv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Dv.processArabic&&(e=Dv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Ab.apply(this,arguments).reduce(function(i,o){return i+o},0)},sW=function(e,t,r,n){for(var a=[],i=0,o=e.length,s=0;i!==o&&s+t[i]<r;)s+=t[i],i++;a.push(e.slice(0,i));var l=i;for(s=0;i!==o;)s+t[i]>n&&(a.push(e.slice(l,i)),s=0,l=i),s+=t[i],i++;return l!==i&&a.push(e.slice(l,i)),a},lW=function(e,t,r){r||(r={});var n,a,i,o,s,l,u,d=[],f=[d],h=r.textIndent||0,m=0,x=0,g=e.split(" "),y=Ab.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var _=Array(l).join(" "),b=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?b=b.concat(C.map(function(E,O){return(O&&E.length?`
`:"")+E})):b.push(C[0])}),g=b,l=oW.apply(this,[_,r])}for(i=0,o=g.length;i<o;i++){var S=0;if(n=g[i],l&&n[0]==`
`&&(n=n.substr(1),S=1),h+m+(x=(a=Ab.apply(this,[n,r])).reduce(function(C,E){return C+E},0))>t||S){if(x>t){for(s=sW.apply(this,[n,a,t-(h+m),t]),d.push(s.shift()),d=[s.pop()];s.length;)f.push([s.shift()]);x=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(C,E){return C+E},0)}else d=[n];f.push(d),h=x+l,m=y}else d.push(n),h+=m+x,m=y}return u=l?function(C,E){return(E?_:"")+C.join(" ")}:function(C){return C.join(" ")},f.map(u)},Dv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var s,l,u=[];for(s=0,l=n.length;s<l;s++)u=u.concat(lW.apply(this,[n[s],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var h,m,x,g,y=["{"];for(var _ in f){if(h=f[_],isNaN(parseInt(_,10))?m="'"+_+"'":(_=parseInt(_,10),m=(m=i(_).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof h=="number")h<0?(x=i(h).slice(3),g="-"):(x=i(h).slice(2),g=""),x=g+x.slice(0,-1)+n[x.slice(-1)];else{if(wa(h)!=="object")throw new Error("Don't know what to do with value type "+wa(h)+".");x=o(h)}y.push(m+x)}return y.push("}"),y.join("")},s=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,x,g,y={},_=1,b=y,S=[],C="",E="",O=f.length-1,T=1;T<O;T+=1)(g=f[T])=="'"?h?(x=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(S.push([b,x]),b={},x=void 0):g=="}"?((m=S.pop())[0][m[1]]=b,x=void 0,b=m[0]):g=="-"?_=-1:x===void 0?r.hasOwnProperty(g)?(C+=r[g],x=parseInt(C,16)*_,_=1,C=""):C+=g:r.hasOwnProperty(g)?(E+=r[g],b[x]=parseInt(E,16)*_,_=1,x=void 0,E=""):E+=g;return y},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var x=u.Unicode[h.postScriptName];x&&(h.metadata.Unicode.encoding=x,h.encoding=x.codePages[0])}])}($r.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(W2(s)),o.metadata=e.API.TTFFont.open(s),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}($r),function(e){function t(){return(Jr.canvg?Promise.resolve(Jr.canvg):xh(()=>import("./index.es-4f8DCqWd.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}$r.API.addSvgAsImage=function(r,n,a,i,o,s,l,u){if(isNaN(n)||isNaN(a))throw Ea.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ea.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=i,d.height=o;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(x){return x.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(h)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),n,a,i,o,l,u)})}}(),$r.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},$r.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(o),l=[],u=0,d=0,f=0;function h(x,g){var y,_=!1;for(y=0;y<x.length;y+=1)x[y]===g&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=s.length;for(f=0;f<m;f+=1)r[s[f]].value=r[s[f]].defaultValue,r[s[f]].explicitSet=!1}if(wa(e)==="object"){for(a in e)if(i=e[a],h(s,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")l.push(String(i[u]-1));else if(i[u].length>1){for(d=0;d<i[u].length;d+=1)typeof i[u][d]!="number"&&(n=!1);n===!0&&l.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,g=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?g.push("/"+x+" /"+r[x].value):g.push("/"+x+" "+r[x].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+s.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+s+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}($r.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var s,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=i.length;f<h;++f){if(s=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(s),o.metadata.toUnicode[s]=i.charCodeAt(f),l.indexOf(s)==-1&&(l.push(s),l.push([parseInt(o.metadata.widthOfGlyph(s),10)])),s=="0")return d.join("");s=s.toString(16),d.push(u[4-s.length],s)}return d.join("")},n=function(i){var o,s,l,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,h=(s=Object.keys(i).sort(function(m,x){return m-x})).length;f<h;f++)o=s[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var s=o.font,l=o.out,u=o.newObject,d=o.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var f=s.metadata.Unicode.widths,h=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),m="",x=0;x<h.length;x++)m+=String.fromCharCode(h[x]);var g=u();d({data:m,addLength1:!0,objectId:g}),l("endobj");var y=u();d({data:n(s.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+$v(s.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/Flags "+s.metadata.flags),l("/StemV "+s.metadata.stemV),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l(">>"),l("endobj");var b=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+$v(s.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+s.encoding+")"),l(">>"),l(">>"),l("endobj"),s.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+$v(s.fontName)),l("/Encoding /"+s.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var s=o.font,l=o.out,u=o.newObject,d=o.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var f=s.metadata.rawData,h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var x=u();d({data:h,addLength1:!0,objectId:x}),l("endobj");var g=u();d({data:n(s.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var y=u();l("<<"),l("/Descent "+s.metadata.decender),l("/CapHeight "+s.metadata.capHeight),l("/StemV "+s.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),l("/FontName /"+$v(s.fontName)),l("/ItalicAngle "+s.metadata.italicAngle),l("/Ascent "+s.metadata.ascender),l(">>"),l("endobj"),s.objectNumber=u();for(var _=0;_<s.metadata.hmtx.widths.length;_++)s.metadata.hmtx.widths[_]=parseInt(s.metadata.hmtx.widths[_]*(1e3/s.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+$v(s.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),l("endobj"),s.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,s=i.text||"",l=i.x,u=i.y,d=i.options||{},f=i.mutex||{},h=f.pdfEscape,m=f.activeFontKey,x=f.fonts,g=m,y="",_=0,b="",S=x[g].encoding;if(x[g].encoding!=="Identity-H")return{text:s,x:l,y:u,options:d,mutex:f};for(b=s,g=m,Array.isArray(s)&&(b=s[0]),_=0;_<b.length;_+=1)x[g].metadata.hasOwnProperty("cmap")&&(o=x[g].metadata.cmap.unicode.codeMap[b[_].charCodeAt(0)]),o||b[_].charCodeAt(0)<256&&x[g].metadata.hasOwnProperty("Unicode")?y+=b[_]:y+="";var C="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?C=h(y,g).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(C=r(y,x[g])),f.isHex=!0,{text:C,x:l,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",s=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?s.push([a(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):s.push(a(Object.assign({},l,{text:o[u]})).text);i.text=s}else i.text=a(Object.assign({},l,{text:o})).text}])}($r),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($r.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,s,l,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,S=0;this.__bidiEngine__={};var C=function(P){var R=P.charCodeAt(),j=R>>8,V=g[j];return V!==void 0?f[256*V+(255&R)]:j===252||j===253?"AL":_.test(j)?"L":j===8?"R":"N"},E=function(P){for(var R,j=0;j<P.length;j++){if((R=C(P.charAt(j)))==="L")return!1;if(R==="R")return!0}return!1},O=function(P,R,j,V){var Z,te,q,Y,U=R[V];switch(U){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(U="AN");break;case"AL":b=!0,U="R";break;case"WS":U="N";break;case"CS":V<1||V+1>=R.length||(Z=j[V-1])!=="EN"&&Z!=="AN"||(te=R[V+1])!=="EN"&&te!=="AN"?U="N":b&&(te="AN"),U=te===Z?te:"N";break;case"ES":U=(Z=V>0?j[V-1]:"B")==="EN"&&V+1<R.length&&R[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&j[V-1]==="EN"){U="EN";break}if(b){U="N";break}for(q=V+1,Y=R.length;q<Y&&R[q]==="ET";)q++;U=q<Y&&R[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!s){for(Y=R.length,q=V+1;q<Y&&R[q]==="NSM";)q++;if(q<Y){var G=P[V],J=G>=1425&&G<=2303||G===64286;if(Z=R[q],J&&(Z==="R"||Z==="AL")){U="R";break}}}U=V<1||(Z=R[V-1])==="B"?"N":j[V-1];break;case"B":b=!1,a=!0,U=S;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":U="N"}return U},T=function(P,R,j){var V=P.split("");return j&&M(V,j,{hiLevel:S}),V.reverse(),R&&R.reverse(),V.join("")},M=function(P,R,j){var V,Z,te,q,Y,U=-1,G=P.length,J=0,D=[],K=S?m:h,Q=[];for(b=!1,a=!1,i=!1,Z=0;Z<G;Z++)Q[Z]=C(P[Z]);for(te=0;te<G;te++){if(Y=J,D[te]=O(P,Q,D,te),V=240&(J=K[Y][x[D[te]]]),J&=15,R[te]=q=K[J][5],V>0)if(V===16){for(Z=U;Z<te;Z++)R[Z]=1;U=-1}else U=-1;if(K[J][6])U===-1&&(U=te);else if(U>-1){for(Z=U;Z<te;Z++)R[Z]=q;U=-1}Q[te]==="B"&&(R[te]=0),j.hiLevel|=q}i&&function(ae,se,fe){for(var ie=0;ie<fe;ie++)if(ae[ie]==="S"){se[ie]=S;for(var X=ie-1;X>=0&&ae[X]==="WS";X--)se[X]=S}}(Q,R,G)},L=function(P,R,j,V,Z){if(!(Z.hiLevel<P)){if(P===1&&S===1&&!a)return R.reverse(),void(j&&j.reverse());for(var te,q,Y,U,G=R.length,J=0;J<G;){if(V[J]>=P){for(Y=J+1;Y<G&&V[Y]>=P;)Y++;for(U=J,q=Y-1;U<q;U++,q--)te=R[U],R[U]=R[q],R[q]=te,j&&(te=j[U],j[U]=j[q],j[q]=te);J=Y}J++}}},z=function(P,R,j){var V=P.split(""),Z={hiLevel:S};return j||(j=[]),M(V,j,Z),function(te,q,Y){if(Y.hiLevel!==0&&d)for(var U,G=0;G<te.length;G++)q[G]===1&&(U=y.indexOf(te[G]))>=0&&(te[G]=y[U+1])}(V,j,Z),L(2,V,R,j,Z),L(1,V,R,j,Z),V.join("")};return this.__bidiEngine__.doBidiReorder=function(P,R,j){if(function(Z,te){if(te)for(var q=0;q<Z.length;q++)te[q]=q;s===void 0&&(s=E(Z)),u===void 0&&(u=E(Z))}(P,R),o||!l||u)if(o&&l&&s^u)S=s?1:0,P=T(P,R,j);else if(!o&&l&&u)S=s?1:0,P=z(P,R,j),P=T(P,R);else if(!o||s||l||u){if(o&&!l&&s^u)P=T(P,R),s?(S=0,P=z(P,R,j)):(S=1,P=z(P,R,j),P=T(P,R));else if(o&&s&&!l&&u)S=1,P=z(P,R,j),P=T(P,R);else if(!o&&!l&&s^u){var V=d;s?(S=1,P=z(P,R,j),S=0,d=!1,P=z(P,R,j),d=V):(S=0,P=z(P,R,j),P=T(P,R),S=1,d=!1,P=z(P,R,j),d=V,P=T(P,R))}}else S=0,P=z(P,R,j);else S=s?1:0,P=z(P,R,j);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,l=P.isOutputVisual,s=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var s=0;for(o=[],s=0;s<a.length;s+=1)Object.prototype.toString.call(a[s])==="[object Array]"?o.push([r.doBidiReorder(a[s][0]),a[s][1],a[s][2]]):o.push([r.doBidiReorder(a[s])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}($r),$r.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new wm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new H7e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new D7e(this.contents),this.head=new R7e(this),this.name=new $7e(this),this.cmap=new kne(this),this.toUnicode={},this.hhea=new M7e(this),this.maxp=new B7e(this),this.hmtx=new U7e(this),this.post=new L7e(this),this.os2=new F7e(this),this.loca=new V7e(this),this.glyf=new q7e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,s,l,u;for(u=[],o=0,s=(l=this.bbox).length;o<s;o++)t=l[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,s;for(o=0,i=0,s=(t=""+t).length;0<=s?i<s:i>s;i=0<=s?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var pd,wm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,s,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^s)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*s+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),D7e=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,s,l,u,d,f,h,m,x,g;for(g in m=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(m)/l),o=Math.floor(f/l),d=16*m-f,(a=new wm).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(d),i=16*m,u=a.pos+i,s=null,x=[],r)for(h=r[g],a.writeString(g),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),x=x.concat(h),g==="head"&&(s=u),u+=h.length;u%4;)x.push(0),u++;return a.write(x),n=2981146554-e(a.data),a.pos=s+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=Ene.call(r);r.length%4;)r.push(0);for(i=new wm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),I7e={}.hasOwnProperty,vf=function(e,t){for(var r in t)I7e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};pd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var R7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new wm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),dW=function(){function e(t,r){var n,a,i,o,s,l,u,d,f,h,m,x,g,y,_,b,S;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(m=t.readUInt16(),h=m/2,t.pos+=6,i=function(){var C,E;for(E=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)E.push(t.readUInt16());return E}(),t.pos+=2,g=function(){var C,E;for(E=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)E.push(t.readUInt16());return E}(),u=function(){var C,E;for(E=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)E.push(t.readUInt16());return E}(),d=function(){var C,E;for(E=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)E.push(t.readUInt16());return E}(),a=(this.length-t.pos+this.offset)/2,s=function(){var C,E;for(E=[],l=C=0;0<=a?C<a:C>a;l=0<=a?++C:--C)E.push(t.readUInt16());return E}(),l=_=0,S=i.length;_<S;l=++_)for(y=i[l],n=b=x=g[l];x<=y?b<=y:b>=y;n=x<=y?++b:--b)d[l]===0?o=n+u[l]:(o=s[d[l]/2+(n-x)-(h-l)]||0)!==0&&(o+=u[l]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,i,o,s,l,u,d,f,h,m,x,g,y,_,b,S,C,E,O,T,M,L,z,P,R,j,V,Z,te,q,Y,U,G,J,D,K,Q,ae,se,fe,ie,X,ue,de,re;switch(V=new wm,o=Object.keys(t).sort(function(ke,Re){return ke-Re}),r){case"macroman":for(g=0,y=function(){var ke=[];for(x=0;x<256;++x)ke.push(0);return ke}(),b={0:0},i={},Z=0,U=o.length;Z<U;Z++)b[X=t[a=o[Z]]]==null&&(b[X]=++g),i[a]={old:t[a],new:b[t[a]]},y[a]=b[t[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(y),{charMap:i,subtable:V.data,maxGlyphID:g+1};case"unicode":for(R=[],f=[],S=0,b={},n={},_=u=null,te=0,G=o.length;te<G;te++)b[E=t[a=o[te]]]==null&&(b[E]=++S),n[a]={old:E,new:b[E]},s=b[E]-a,_!=null&&s===u||(_&&f.push(_),R.push(a),u=s),_=a;for(_&&f.push(_),f.push(65535),R.push(65535),z=2*(L=R.length),M=2*Math.pow(Math.log(L)/Math.LN2,2),h=Math.log(M/2)/Math.LN2,T=2*L-M,l=[],O=[],m=[],x=q=0,J=R.length;q<J;x=++q){if(P=R[x],d=f[x],P===65535){l.push(0),O.push(0);break}if(P-(j=n[P].new)>=32768)for(l.push(0),O.push(2*(m.length+L-x)),a=Y=P;P<=d?Y<=d:Y>=d;a=P<=d?++Y:--Y)m.push(n[a].new);else l.push(j-P),O.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*L+2*m.length),V.writeUInt16(0),V.writeUInt16(z),V.writeUInt16(M),V.writeUInt16(h),V.writeUInt16(T),fe=0,D=f.length;fe<D;fe++)a=f[fe],V.writeUInt16(a);for(V.writeUInt16(0),ie=0,K=R.length;ie<K;ie++)a=R[ie],V.writeUInt16(a);for(ue=0,Q=l.length;ue<Q;ue++)s=l[ue],V.writeUInt16(s);for(de=0,ae=O.length;de<ae;de++)C=O[de],V.writeUInt16(C);for(re=0,se=m.length;re<se;re++)g=m[re],V.writeUInt16(g);return{charMap:n,subtable:V.data,maxGlyphID:S+1}}},e}(),kne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new dW(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=dW.encode(r,n),(i=new wm).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),M7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),F7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),L7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var s,l,u;for(u=[],o=s=0,l=this.file.maxp.numGlyphs;0<=l?s<l:s>l;o=0<=l?++s:--s)u.push(r.readUInt32());return u}).call(this)}},t}(),j7e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},$7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,o,s,l,u,d,f,h,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},o=f=0,h=a.length;f<h;o=++f)i=a[o],r.pos=i.offset,d=r.readString(i.length),s=new j7e(d,i),u[m=i.nameID]==null&&(u[m]=[]),u[i.nameID].push(s);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),B7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),U7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,o,s,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,m;for(m=[],d=0,f=(h=this.metrics).length;d<f;d++)o=h[d],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=s=0;0<=i?s<i:s>i;n=0<=i?++s:--s)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Ene=[].slice,q7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,o,s,l,u,d,f,h;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,s=(l=new wm(n.read(i))).readShort(),d=l.readShort(),h=l.readShort(),u=l.readShort(),f=l.readShort(),this.cache[r]=s===-1?new W7e(l,d,h,u,f):new z7e(l,s,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,o,s,l,u;for(s=[],o=[],l=0,u=n.length;l<u;l++)i=r[n[l]],o.push(s.length),i&&(s=s.concat(i.encode(a)));return o.push(s.length),{table:s,offsets:o}},t}(),z7e=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),W7e=function(){function e(t,r,n,a,i){var o,s;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new wm(Ene.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),V7e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vf(t,pd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<a.length;++s)if(a[s]=i,o<n.length&&n[o]==s){++o,a[s]=i;var l=this.offsets[s],u=this.offsets[s+1]-l;u>0&&(i+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),H7e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,s,l;for(a={},o=0,s=t.length;o<s;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,s,l,u,d,f,h,m,x,g,y,_;for(a in n=kne.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},_=n.charMap)m[(l=_[a]).old]=l.new;for(x in h=n.maxGlyphID,o)x in m||(m[x]=h++);return d=function(b){var S,C;for(S in C={},b)C[b[S]]=S;return C}(m),f=Object.keys(d).sort(function(b,S){return b-S}),g=function(){var b,S,C;for(C=[],b=0,S=f.length;b<S;b++)s=f[b],C.push(d[s]);return C}(),i=this.font.glyf.encode(o,g,m),u=this.font.loca.encode(i.offsets,g),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();$r.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var s,l,u;for(u=[],s=0,l=r.length;s<l;s++)n=r[s],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function Cne(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,s=a.internal.getFontSize()/o,l=a.getLineHeightFactor?a.getLineHeightFactor():i,u=s*l,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=s*(2-i),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var m=s;if(n.halign==="center"&&(m*=.5),f&&h>=1){for(var x=0;x<f.length;x++)a.text(f[x],t-a.getStringUnitWidth(f[x])*m,r),r+=u;return a}t-=a.getStringUnitWidth(e)*m}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var fW={},u1=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:fW=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),s=o.fontStyle,l=o.fontName;if(t.font&&(l=t.font),t.fontStyle){s=t.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),s=u[0])}if(this.jsPDFDocument.setFont(l,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(i=this.jsPDFDocument).setDrawColor.apply(i,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return fW||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),f8=function(e,t){return f8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},f8(e,t)};function Pne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");f8(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Tne=function(e){Pne(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function G7e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function K7e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function FS(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function One(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=Dne(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function Dne(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function L3(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Ine(e,t){var r=L3(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Y7e(e,t,r,n,a){var i={},o=1.3333333333333333,s=KP(t,function(S){return a.getComputedStyle(S).backgroundColor});s!=null&&(i.fillColor=s);var l=KP(t,function(S){return a.getComputedStyle(S).color});l!=null&&(i.textColor=l);var u=Z7e(n,r);u&&(i.cellPadding=u);var d="borderTopColor",f=o*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var m=(parseFloat(h)||0)/f;m&&(i.lineWidth=m)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},i.lineWidth.top||(i.lineWidth.right?d="borderRightColor":i.lineWidth.bottom?d="borderBottomColor":i.lineWidth.left&&(d="borderLeftColor"));var x=KP(t,function(S){return a.getComputedStyle(S)[d]});x!=null&&(i.lineColor=x);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(i.fontSize=y/o);var _=X7e(n);_&&(i.fontStyle=_);var b=(n.fontFamily||"").toLowerCase();return e.indexOf(b)!==-1&&(i.font=b),i}function X7e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function KP(e,t){var r=Rne(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Rne(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Rne(e.parentElement,t):r}function Z7e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(s){return parseInt(s||"0")/n}),o=L3(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Mne(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var s;typeof t=="string"?s=r.document.querySelector(t):s=t;var l=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!s)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var m=0;m<s.rows.length;m++){var x=s.rows[m],g=(o=(i=x==null?void 0:x.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),y=J7e(l,u,r,x,n,a);y&&(g==="thead"?d.push(y):g==="tfoot"?h.push(y):f.push(y))}return{head:d,body:f,foot:h}}function J7e(e,t,r,n,a,i){for(var o=new Tne(n),s=0;s<n.cells.length;s++){var l=n.cells[s],u=r.getComputedStyle(l);if(a||u.display!=="none"){var d=void 0;i&&(d=Y7e(e,l,t,u,r)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:Q7e(l)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function Q7e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function eFe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function lh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])}return i}function Fne(e,t){var r=new u1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();eFe(a,n,t);var i=lh({},a,n,t),o;typeof window<"u"&&(o=window);var s=tFe(a,n,t),l=rFe(a,n,t),u=nFe(r,i),d=iFe(r,i,o);return{id:t.tableId,content:d,hooks:l,styles:s,settings:u}}function tFe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(l){if(l==="columnStyles"){var u=e[l],d=t[l],f=r[l];n.columnStyles=lh({},u,d,f)}else{var h=[e,t,r],m=h.map(function(x){return x[l]||{}});n[l]=lh({},m[0],m[1],m[2])}},i=0,o=Object.keys(n);i<o.length;i++){var s=o[i];a(s)}return n}function rFe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var s=o[i];s.didParseCell&&a.didParseCell.push(s.didParseCell),s.willDrawCell&&a.willDrawCell.push(s.willDrawCell),s.didDrawCell&&a.didDrawCell.push(s.didDrawCell),s.willDrawPage&&a.willDrawPage.push(s.willDrawPage),s.didDrawPage&&a.didDrawPage.push(s.didDrawPage)}return a}function nFe(e,t){var r,n,a,i,o,s,l,u,d,f,h,m,x=L3(t.margin,40/e.scaleFactor()),g=(r=aFe(e,t.startY))!==null&&r!==void 0?r:x.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var _;t.showHead===!0?_="everyPage":t.showHead===!1?_="never":_=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var b=(i=t.useCss)!==null&&i!==void 0?i:!1,S=t.theme||(b?"plain":"striped"),C=!!t.horizontalPageBreak,E=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(s=t.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:b,theme:S,startY:g,margin:x,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:_,showFoot:y,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:C,horizontalPageBreakRepeat:E,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function aFe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function iFe(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var s=Mne(e,t.html,r,o,t.useCss)||{};n=s.head||n,a=s.body||n,i=s.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||oFe(n,a,i);return{columns:l,head:n,body:a,foot:i}}function oFe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,s;Array.isArray(n)?s=n[parseInt(i)]:s=n[i],typeof s=="object"&&!Array.isArray(s)&&(o=(s==null?void 0:s.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(l>0?"_".concat(l):"");var d={dataKey:u};a.push(d)}}),a}var h8=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),sFe=function(e){Pne(t,e);function t(r,n,a,i,o,s){var l=e.call(this,r,n,s)||this;return l.cell=a,l.row=i,l.column=o,l.section=i.section,l}return t}(h8),lFe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var s=0,l=r;s<l.length;s++){var u=l[s],d=new sFe(t,this,n,a,i,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new h8(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new h8(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Lne=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof Tne&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var s=r.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+s;return u>a?u:a},0)},e}(),jne=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",s=/\r\n|\r|\n/g;this.text=o.split(s)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=L3(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),cFe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function uFe(e,t){dFe(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=p8(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=p8(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),hFe(t),pFe(t,e),fFe(t)}function dFe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Ine(e,t);t.allRows().forEach(function(i){for(var o=0,s=t.columns;o<s.length;o++){var l=s[o],u=i.cells[l.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,i,l,null);var f=u.padding("horizontal");u.contentWidth=FS(u.text,u.styles,e)+f;var h=FS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var m=10/r;u.minWidth=u.styles.minCellWidth||m,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,s=t.columns;o<s.length;o++){var l=s[o],u=i.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function p8(e,t,r){for(var n=t,a=e.reduce(function(m,x){return m+x.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],s=o.wrappedWidth/a,l=n*s,u=o.width+l,d=r(o),f=u<d?d:u;t-=f-o.width,o.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(m){return t<0?m.width>r(m):!0});h.length&&(t=p8(h,t,r))}return t}function fFe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,s=e.columns;o<s.length;o++){var l=s[o],u=t[l.index];if(r>1)r--,delete i.cells[l.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[l.index],u.left--,u.left<=1&&delete t[l.index];else{var d=i.cells[l.index];if(!d)continue;if(d.height=i.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[l.index]={cell:d,left:h,row:i}}}}}function hFe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,s=0;s<e.columns.length;s++){var l=e.columns[s];if(o-=1,o>1&&e.columns[s+1])i+=l.width,delete n.cells[l.index];else if(a){var u=a;delete n.cells[l.index],a=null,u.width=l.width+i}else{var u=n.cells[l.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){a=u,i+=l.width;continue}u.width=l.width+i}}}function pFe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,s=e.columns;o<s.length;o++){var l=s[o],u=i.cells[l.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=hW(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=hW(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>i.height&&(i.height=h)}}r.count--}}function hW(e,t,r,n,a){return e.map(function(i){return mFe(i,t,r,n,a)})}function mFe(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=FS(e,r,n))return e;for(;t<FS(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function $ne(e,t){var r=new u1(e),n=gFe(t,r.scaleFactor()),a=new lFe(t,n);return uFe(r,a),r.applyStyles(r.userStyles),a}function gFe(e,t){var r=e.content,n=yFe(r.columns);if(r.head.length===0){var a=pW(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=pW(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:YP("head",r.head,n,o,i,t),body:YP("body",r.body,n,o,i,t),foot:YP("foot",r.foot,n,o,i,t)}}function YP(e,t,r,n,a,i){var o={},s=t.map(function(l,u){for(var d=0,f={},h=0,m=0,x=0,g=r;x<g.length;x++){var y=g[x];if(o[y.index]==null||o[y.index].left===0)if(m===0){var _=void 0;Array.isArray(l)?_=l[y.index-h-d]:_=l[y.dataKey];var b={};typeof _=="object"&&!Array.isArray(_)&&(b=(_==null?void 0:_.styles)||{});var S=xFe(e,y,u,a,n,i,b),C=new jne(_,S,e);f[y.dataKey]=C,f[y.index]=C,m=C.colSpan-1,o[y.index]={left:C.rowSpan-1,times:m}}else m--,h++;else o[y.index].left--,m=o[y.index].times,d++}return new Lne(l,u,e,f)});return s}function pW(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=vFe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function vFe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function yFe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new cFe(a,t,r)})}function xFe(e,t,r,n,a,i,o){var s=K7e(n),l;e==="head"?l=a.headStyles:e==="body"?l=a.bodyStyles:e==="foot"&&(l=a.footStyles);var u=lh({},s.table,s[e],a.styles,l),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?lh({},s.alternateRow,a.alternateRowStyles):{},m=G7e(i),x=lh({},m,u,h,f);return lh(x,o)}function wFe(e,t,r){var n;r===void 0&&(r={});var a=Ine(e,t),i=new Map,o=[],s=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(h){var m=t.columns.find(function(x){return x.dataKey===h||x.index===h});m&&!i.has(m.index)&&(i.set(m.index,!0),o.push(m.index),s.push(t.columns[m.index]),a-=m.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(i.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),s.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:s,lastIndex:d-1}}function _Fe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=wFe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Bne(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),s=n+a.bottom+o;if(r.pageBreak==="avoid"){var l=t.body,u=l.reduce(function(h,m){return h+m.height},0);s+=u}var d=new u1(e);(r.pageBreak==="always"||r.startY!=null&&s>d.pageSize().height)&&(qne(d),i.y=a.top),t.callWillDrawPageHooks(d,i);var f=lh({},i);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?bFe(d,t,f,i):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Nh(d,t,h,i,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,m){var x=m===t.body.length-1;LS(d,t,h,x,f,i,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Nh(d,t,h,i,t.columns)})),One(d,t,f,i),t.callEndPageHooks(d,i),t.finalY=i.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function bFe(e,t,r,n){var a=_Fe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?V2(e,t,r,n,u.columns,!0):mW(e,t,n,u.columns),SFe(e,t,r,n,u.columns),XP(e,t,n,u.columns)});else for(var o=-1,s=a[0],l=function(){var u=o;if(s){e.applyStyles(e.userStyles);var d=s.columns;o>=0?V2(e,t,r,n,d,!0):mW(e,t,n,d),u=gW(e,t,o+1,n,d),XP(e,t,n,d)}var f=u-o;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),V2(e,t,r,n,h.columns,!0),gW(e,t,o+1,n,h.columns,f),XP(e,t,n,h.columns)}),o=u};o<t.body.length-1;)l()}function mW(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Nh(e,t,i,r,n)})}function SFe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var s=o===t.body.length-1;LS(e,t,i,s,r,n,a)})}function gW(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),s=-1;return t.body.slice(r,o).forEach(function(l,u){var d=r+u===t.body.length-1,f=Une(e,t,d,n);l.canEntireRowFit(f,a)&&(Nh(e,t,l,n,a),s=r+u)}),s}function XP(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Nh(e,t,i,r,n)})}function AFe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function NFe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,s=r.columns;o<s.length;o++){var l=s[o],u=e.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new jne(u.raw,u.styles,u.section);d=lh(d,u),d.text=[];var f=AFe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),m=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,m),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,m),d.contentHeight>i&&(i=d.contentHeight),a[l.index]=d}}var x=new Lne(e.raw,-1,e.section,a,!0);x.height=i;for(var g=0,y=r.columns;g<y.length;g++){var l=y[g],d=x.cells[l.index];d&&(d.height=x.height);var u=e.cells[l.index];u&&(u.height=e.height)}return x}function kFe(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,s=a-o;t.section==="body"&&(s-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),u=l<r;if(l>s)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>s;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function LS(e,t,r,n,a,i,o){var s=Une(e,t,n,i);if(r.canEntireRowFit(s,o))Nh(e,t,r,i,o);else if(kFe(e,r,s,t)){var l=NFe(r,s,t,e);Nh(e,t,r,i,o),V2(e,t,a,i,o),LS(e,t,l,n,a,i,o)}else V2(e,t,a,i,o),LS(e,t,r,n,a,i,o)}function Nh(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var s=o[i],l=r.cells[s.index];if(!l){n.x+=s.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,l,r,s,n);if(u===!1){n.x+=s.width;continue}EFe(e,l,n);var d=l.getTextPos();Cne(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,s,n),n.x+=s.width}n.y+=r.height}function EFe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Dne(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),CFe(e,t,r,n.lineWidth))}function CFe(e,t,r,n){var a,i,o,s;n.top&&(a=r.x,i=r.y,o=r.x+t.width,s=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),l(n.top,a,i,o,s)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,s=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),l(n.bottom,a,i,o,s)),n.left&&(a=r.x,i=r.y,o=r.x,s=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(s+=.5*n.bottom),l(n.left,a,i,o,s)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,s=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(s+=.5*n.bottom),l(n.right,a,i,o,s));function l(u,d,f,h,m){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,m,"S")}}function Une(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function V2(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(s){return Nh(e,t,s,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;One(e,t,r,n),qne(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(s){return Nh(e,t,s,n,a)}),e.applyStyles(e.userStyles))}function qne(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function PFe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Fne(this,n),i=$ne(this,a);return Bne(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Cne(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return u1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){u1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new u1(this),i=Mne(a,t,window,r,!1),o=i.head,s=i.body,l=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:s,data:s}}}var ZP;function PR(e,t){var r=Fne(e,t),n=$ne(e,r);Bne(e,n)}try{if(typeof window<"u"&&window){var vW=window,yW=vW.jsPDF||((ZP=vW.jspdf)===null||ZP===void 0?void 0:ZP.jsPDF);yW&&PFe(yW)}}catch(e){console.error("Could not apply autoTable plugin",e)}const TFe=(e,t)=>{if(!t)try{return Ut(zr(e),"yyyy-MM-dd")}catch{try{const a=new Date(e);return isNaN(a.getTime())?(console.warn(`[calculateEstimatedDate] Could not parse baseDateStr with any known method: ${e}`),e):Ut(a,"yyyy-MM-dd")}catch{return console.warn(`[calculateEstimatedDate] Further error parsing baseDateStr: ${e}`),e}}let r;try{r=zr(e)}catch{try{if(r=new Date(e),isNaN(r.getTime()))throw new Error("Invalid base date after new Date()")}catch(a){return console.error(`[calculateEstimatedDate] Invalid baseDate: ${e}`,a),"Invalid Date"}}if(isNaN(r.getTime()))return console.error(`[calculateEstimatedDate] BaseDate is invalid after parsing attempts: ${e}`),"Invalid Date";try{const n=t.toLowerCase().split(" ");if(n.length!==2)return Ut(r,"yyyy-MM-dd");const a=parseInt(n[0],10),i=n[1].endsWith("s")?n[1]:n[1]+"s";if(isNaN(a))return Ut(r,"yyyy-MM-dd");let o={};if(i==="days")o={days:a};else if(i==="weeks")o={weeks:a};else if(i==="months")o={months:a};else if(i==="years")o={years:a};else return Ut(r,"yyyy-MM-dd");return Ut(R0e(r,o),"yyyy-MM-dd")}catch(n){console.error(`Error calculating estimated date with baseDate: ${e}, timeGap: ${t}`,n);try{return Ut(r,"yyyy-MM-dd")}catch{return"Invalid Date"}}};function OFe({open:e,onOpenChange:t,plan:r,onRefresh:n,onAddTreatment:a,onStatusChange:i,onDeletePlan:o,onTreatmentStatusChange:s,onDeleteTreatment:l,loading:u=!1,navigateToPatient:d,aiInitialSuggestion:f,onEditTreatment:h,bookedAppointments:m=[]}){var D,K,Q,ae,se,fe;const{toast:x}=yn(),g=bo(),[y,_]=A.useState(!1),[b,S]=A.useState(!1),[C,E]=A.useState(1),O=5,[T,M]=A.useState(!1),L=ie=>{if(!ie||typeof ie!="string")return;ie=ie.trim();const X=ie.match(/^(\d+)\s*[-]\s*(\d+)\s+(\w+)$/i);if(X&&X.length===4)return`${X[2]} ${X[3]}`;const ue=ie.match(/^(\d+)\s+(\w+)$/i);if(ue&&ue.length===3)return`${ue[1]} ${ue[2]}`;const de=ie.match(/^(\d+)$/);if(de&&de.length===2)return`${de[1]} minutes`;console.warn(`[TreatmentPlanDetails] Could not parse duration: "${ie}". It does not match expected formats (e.g., "X-Y units", "X units", "X"). Falling back to undefined.`)};console.log("[TreatmentPlanDetails] Rendering. Plan:",r),console.log("[TreatmentPlanDetails] aiInitialSuggestion:",f),(D=f==null?void 0:f.planDetails)!=null&&D.appointmentPlan&&(console.log("[TreatmentPlanDetails] aiInitialSuggestion.planDetails.appointmentPlan.sittingDetails:",f.planDetails.appointmentPlan.sittingDetails),console.log("[TreatmentPlanDetails] sittingDetails length:",(K=f.planDetails.appointmentPlan.sittingDetails)==null?void 0:K.length)),console.log("[TreatmentPlanDetails] plan.treatments:",r==null?void 0:r.treatments);const z=A.useMemo(()=>{if(!(r!=null&&r.treatments)||r.treatments.length===0)return[];const ie=new Map;for(const ue of r.treatments)ue&&typeof ue.id<"u"?ie.has(ue.id)||ie.set(ue.id,ue):console.warn("[TreatmentPlanDetails] Encountered a treatment without an ID:",ue);return Array.from(ie.values()).sort((ue,de)=>{const re=typeof ue.visit_number=="number"?ue.visit_number:1/0,ke=typeof de.visit_number=="number"?de.visit_number:1/0;if(re!==ke)return re-ke;const Re=ue.created_at?new Date(ue.created_at).getTime():0,Pe=de.created_at?new Date(de.created_at).getTime():0;return Re-Pe})},[r==null?void 0:r.treatments]);A.useMemo(()=>{if(!z)return[];const ie=(C-1)*O,X=ie+O;return z.slice(ie,X)},[z,C]);const P=A.useMemo(()=>{if(!z||z.length===0)return[];let ie=r.start_date||r.created_at;return z.map((X,ue)=>{let de;if(ue===0)de=Ut(zr(ie),"yyyy-MM-dd");else{const re=z[ue-1];ie=TFe(ie,re.time_gap),de=ie}return{...X,estimatedVisitDate:de}})},[z,r==null?void 0:r.start_date,r==null?void 0:r.created_at]),R=A.useMemo(()=>{if(!P)return[];const ie=(C-1)*O,X=ie+O;return P.slice(ie,X)},[P,C]),j=A.useMemo(()=>z?Math.ceil(z.length/O):1,[z]),V=()=>{const ie="print-styles";let X=document.getElementById(ie);X||(X=document.createElement("style"),X.id=ie),X.innerHTML=`
        @media print {
            /* Hide everything except print content */
            body * {
                visibility: hidden;
            }
            #printable-content,
            #printable-content * {
                visibility: visible;
                color: black;
            }
            #printable-content {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white;
            }
            @page {
                size: auto;
                margin: 20mm;
            }
        }
    `,document.head.appendChild(X);const ue=document.getElementById("printable-content");ue&&(ue.style.display="block"),window.print();const de=()=>{ue&&(ue.style.display="none"),X&&X.parentNode&&X.parentNode.removeChild(X),window.removeEventListener("afterprint",de)};window.addEventListener("afterprint",de)},Z=(ie,X,ue)=>{const de=typeof ue=="number"?ue+1:ie.visit_number;let re=null;if(ie.scheduled_date&&/^\d{4}-\d{2}-\d{2}$/.test(ie.scheduled_date))re=ie.scheduled_date;else if(ie.estimatedVisitDate&&/^\d{4}-\d{2}-\d{2}$/.test(ie.estimatedVisitDate))re=ie.estimatedVisitDate;else if(ie.scheduled_date)try{re=Ut(zr(ie.scheduled_date),"yyyy-MM-dd")}catch{try{const Re=new Date(ie.scheduled_date);isNaN(Re.getTime())||(re=Ut(Re,"yyyy-MM-dd"))}catch{}}return{id:ie.id,treatment_plan_id:X,visit_number:de||0,procedures:ie.description||ie.procedures||"",type:ie.type||ie.title||"",estimated_duration:ie.estimated_duration,time_gap:ie.time_gap,status:ie.status||"pending",scheduled_date:re,cost:ie.cost,priority:ie.priority||"medium"}},te=async()=>{var ue,de;if(!((de=(ue=f==null?void 0:f.planDetails)==null?void 0:ue.appointmentPlan)!=null&&de.sittingDetails)||!(r!=null&&r.id)){x({title:"Error",description:"No AI suggestion details found or plan ID is missing.",variant:"destructive"});return}M(!0);let ie=0;const X=f.planDetails.appointmentPlan.sittingDetails.length;try{for(const[re,ke]of f.planDetails.appointmentPlan.sittingDetails.entries()){const Re=ke.procedures||"No procedures detailed.",Pe=Re.substring(0,50)+(Re.length>50?"...":""),ge=`${ke.visit||`Visit ${re+1}`} - ${Pe}`,Ye=L(ke.estimatedDuration),Qe={type:ge,description:Re,status:"pending",priority:"medium",cost:"0",estimated_duration:Ye,time_gap:ke.timeGap||null,plan_id:r.id};await nl.createTreatment(Qe),ie++}x({title:"Success",description:`${ie} of ${X} AI suggested treatments created. Refreshing...`}),await n()}catch(re){console.error("Error creating AI suggested treatments:",re),x({title:"Creation Failed",description:`Failed to create some or all AI suggested treatments. ${ie} created. ${re.message}`,variant:"destructive"}),ie>0&&await n()}finally{M(!1)}};if(!r)return null;const q=A.useMemo(()=>{if(!r.start_date||!r.end_date)return null;try{const ie=new Date(r.start_date),X=new Date(r.end_date);return kY(X,ie,{addSuffix:!1})}catch(ie){return console.error("Error calculating duration:",ie),null}},[r.start_date,r.end_date]),Y=A.useMemo(()=>[{id:"planned",title:"Planned",description:"Plan created"},{id:"in_progress",title:"In Progress",description:"Treatment started"},{id:"completed",title:"Completed",description:"Plan finished"}],[]),U=A.useMemo(()=>{const ie=[];if(!(r!=null&&r.status))return ie;const X=Y.findIndex(ue=>ue.id===r.status);for(let ue=0;ue<X;ue++)ie.push(Y[ue].id);return r.status==="completed"&&(ie.includes("planned")||ie.push("planned"),ie.includes("in_progress")||ie.push("in_progress")),r.status,ie},[r==null?void 0:r.status,Y]),G=ie=>{let X="bg-gray-100 text-gray-800";switch(ie){case"planned":X="bg-blue-100 text-blue-800";break;case"in_progress":X="bg-yellow-100 text-yellow-800";break;case"completed":X="bg-green-100 text-green-800";break;case"cancelled":X="bg-red-100 text-red-800";break}return c("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X}`,children:ie.replace("_"," ")})},J=ie=>{let X="bg-gray-100 text-gray-800";switch(ie){case"low":X="bg-green-100 text-green-800";break;case"medium":X="bg-yellow-100 text-yellow-800";break;case"high":X="bg-red-100 text-red-800";break}return c("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${X}`,children:ie})};return c(ja,{open:e,onOpenChange:t,children:w(Pa,{className:"max-w-4xl",children:[w(Ta,{children:[c(Oa,{children:"Treatment Plan Details"}),w(Yi,{children:["Created on ",Ut(new Date(r.created_at),"MMMM d, yyyy")]})]}),c("div",{className:"pr-6 py-4 max-h-[70vh] overflow-y-auto",children:w("div",{className:"space-y-6",children:[w("div",{className:"flex justify-between items-start",children:[w("div",{children:[c("h2",{className:"text-xl font-semibold",children:r.title}),c("p",{className:"text-sm text-muted-foreground",children:r.description})]}),w("div",{className:"flex items-center gap-2",children:[G(r.status),r.priority&&J(r.priority)]})]}),r.status!=="cancelled"&&c("div",{className:"my-6",children:c(YMe,{steps:Y,currentStepId:r.status,completedStepIds:U})}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w("div",{className:"space-y-4",children:[w("div",{className:"flex items-center gap-2",children:[c(mi,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[c("p",{className:"text-sm font-medium",children:"Patient"}),c("p",{children:r.patientName})]}),d&&c(Fe,{variant:"ghost",size:"sm",className:"ml-auto",onClick:()=>d(r.patient_id),children:c(ice,{className:"h-4 w-4"})})]}),w("div",{className:"flex items-center gap-2",children:[c(Hi,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[c("p",{className:"text-sm font-medium",children:"Timeframe"}),w("p",{children:[Ut(new Date(r.start_date),"MMMM d, yyyy"),r.end_date&&` to ${Ut(new Date(r.end_date),"MMMM d, yyyy")}`]}),q&&w("p",{className:"text-sm text-muted-foreground",children:["Calculated Duration: ",q]}),((ae=(Q=f==null?void 0:f.planDetails)==null?void 0:Q.appointmentPlan)==null?void 0:ae.totalTreatmentTime)&&w("p",{className:"text-sm text-muted-foreground mt-1",children:["Suggested Total Plan Duration: ",f.planDetails.appointmentPlan.totalTreatmentTime]})]})]}),r.teeth&&r.teeth.length>0&&w("div",{className:"flex items-center gap-2",children:[c(K8,{className:"h-5 w-5 text-muted-foreground"}),w("div",{children:[c("p",{className:"text-sm font-medium",children:"Affected Teeth"}),c("p",{className:"text-sm text-muted-foreground",children:r.teeth.map(ie=>ie.tooth_id).sort((ie,X)=>ie-X).join(", ")})]})]})]})}),w("div",{className:"space-y-2",children:[w("div",{className:"flex items-center justify-between",children:[c("h3",{className:"text-lg font-medium",children:"Treatments"}),w("div",{className:"flex gap-2",children:[w(Fe,{variant:"outline",size:"sm",onClick:n,disabled:u,children:[c(X7,{className:"h-4 w-4 mr-1"}),"Refresh"]}),w(Fe,{variant:"outline",size:"sm",onClick:a,disabled:u,children:[c(Qc,{className:"h-4 w-4 mr-1"}),"Add Treatment"]}),w(Fe,{onClick:V,variant:"outline",size:"sm",disabled:u,title:"Print this treatment plan",children:[c(Cce,{className:"h-4 w-4 mr-1"})," ","Print Plan"]})]})]}),r.treatments&&r.treatments.length>0?w(_r,{children:[c("div",{className:"space-y-3",children:R.map((ie,X)=>c(GMe,{treatment:ie,onStatusChange:s,onDelete:l,onEdit:()=>{const ue=Z(ie,r.id,X);h(ue)},loading:u},ie.id))}),j>1&&w("div",{className:"flex justify-center items-center gap-2 mt-4 pagination-controls-print-hide",children:[" ",w(Fe,{variant:"outline",size:"sm",onClick:()=>E(ie=>Math.max(ie-1,1)),disabled:C===1||u,children:[c(i4,{className:"h-4 w-4"}),"Previous"]}),w("span",{className:"text-sm text-muted-foreground",children:["Page ",C," of ",j]}),w(Fe,{variant:"outline",size:"sm",onClick:()=>E(ie=>Math.min(ie+1,j)),disabled:C===j||u,children:["Next",c(im,{className:"h-4 w-4"})]})]})]}):(fe=(se=f==null?void 0:f.planDetails)==null?void 0:se.appointmentPlan)!=null&&fe.sittingDetails&&f.planDetails.appointmentPlan.sittingDetails.length>0?w("div",{className:"text-center py-6 border rounded-lg",children:[c(uh,{className:"h-8 w-8 mx-auto text-primary mb-3"}),c("p",{className:"text-muted-foreground mb-4",children:"AI-generated treatment visits are available for this plan."}),w(Fe,{onClick:te,disabled:T||u,size:"sm",children:[T?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(Qc,{className:"mr-2 h-4 w-4"}),"Add AI Suggested Visits"]})]}):w("div",{className:"text-center py-6 border rounded-lg",children:[c(WT,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),c("p",{className:"text-muted-foreground",children:"No treatments added yet"}),w(Fe,{variant:"outline",size:"sm",className:"mt-4",onClick:a,disabled:u,children:[c(Qc,{className:"h-4 w-4 mr-1"}),"Add First Treatment"]})]})]}),w(Tg,{defaultValue:"additionalInfo",className:"w-full tabs-print-all-content",children:[" ",w(Og,{className:"grid w-full grid-cols-3 print-hide",children:[" ",c(dl,{value:"additionalInfo",children:"Additional Information"}),c(dl,{value:"visits",children:"Scheduled Visits"}),c(dl,{value:"financial",children:"Financial Information"})]}),c(Ci,{value:"additionalInfo",className:"space-y-4",children:w("div",{className:"border rounded-lg p-4",children:[c("h4",{className:"font-medium",children:"Clinical Information"}),w("div",{className:"mt-4 space-y-4",children:[r.metadata&&r.metadata.length>0&&r.metadata[0].clinical_considerations&&w("div",{children:[c("h5",{className:"text-sm font-medium",children:"Clinical Considerations"}),c("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].clinical_considerations})]}),r.metadata&&r.metadata.length>0&&r.metadata[0].key_materials&&w("div",{children:[c("h5",{className:"text-sm font-medium",children:"Key Materials"}),c("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].key_materials})]}),r.metadata&&r.metadata.length>0&&r.metadata[0].post_treatment_care&&w("div",{children:[c("h5",{className:"text-sm font-medium",children:"Post-Treatment Care"}),c("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.metadata[0].post_treatment_care})]}),(!r.metadata||r.metadata.length===0||r.metadata.length>0&&!r.metadata[0].clinical_considerations&&!r.metadata[0].key_materials&&!r.metadata[0].post_treatment_care)&&c("p",{className:"text-sm text-muted-foreground",children:"No additional clinical information available."})]})]})}),c(Ci,{value:"visits",className:"space-y-4",children:w("div",{className:"border rounded-lg p-4",children:[c("div",{className:"flex justify-between items-center mb-3",children:c("h4",{className:"font-medium",children:"Scheduled Visits Overview"})}),P&&P.length>0?c("div",{className:"space-y-3",children:P.map((ie,X)=>{const de=(m||[]).find(Re=>Re.treatment_id===ie.id&&Re.status!=="cancelled"),re=!!de;let ke=null;if(re&&de){let Re="N/A",Pe="N/A";const ge=de.staff&&de.staff.first_name&&de.staff.last_name?`${de.staff.first_name} ${de.staff.last_name}`:"N/A";if(de.start_time&&typeof de.start_time=="string")try{const Ye=zr(de.start_time);Re=Ut(Ye,"MMM dd, yyyy"),Pe=Ut(Ye,"p")}catch(Ye){console.error(`[TreatmentPlanDetails] Error parsing start_time for booked appointment: ${de.start_time}`,Ye)}else console.warn("[TreatmentPlanDetails] Booked appointment start_time is missing or not a string.");ke={bookedDate:Re,bookedTime:Pe,doctorName:ge}}return w("div",{className:"border rounded-md p-4 bg-white shadow-sm hover:shadow-md transition-shadow",children:[w("div",{className:"flex justify-between items-start",children:[w("div",{children:[c("h5",{className:"font-medium text-gray-800",children:ie.type||ie.title||`Visit ${X+1}`}),c("p",{className:"text-xs text-gray-500 mt-0.5 truncate max-w-md",children:ie.description||ie.procedures||"No description"})]}),ie.status&&c("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${ie.status==="completed"?"bg-green-100 text-green-700":ie.status==="cancelled"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:ie.status.charAt(0).toUpperCase()+ie.status.slice(1)})]}),w("div",{className:"mt-3 space-y-2 text-xs text-gray-600",children:[w("div",{className:"flex items-center",children:[c(Hi,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),c("strong",{children:"Est. Visit:"}),"",ie.scheduled_date||ie.estimatedVisitDate||"Not set"]}),ie.estimated_duration&&w("div",{className:"flex items-center",children:[c(ls,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),c("strong",{children:"Duration:"}),"",ie.estimated_duration]}),ie.time_gap&&w("div",{className:"flex items-center",children:[c(X7,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),c("strong",{children:"Next visit in:"}),"",ie.time_gap]}),ie.cost!==void 0&&ie.cost!==null&&parseFloat(String(ie.cost))>0&&w("div",{className:"flex items-center",children:[c(HH,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),c("strong",{children:"Cost:"}),"",Hv(parseFloat(String(ie.cost)))]})]}),c("div",{className:"mt-4 flex justify-end items-center",children:re?w("div",{className:"flex items-center gap-4",children:[w("div",{className:"flex items-center justify-center h-9 px-3 text-sm font-medium text-white bg-green-500 rounded-md",children:[c(g1,{className:"w-3.5 h-3.5 mr-1.5"}),"Booked"]}),ke&&w("div",{className:"ml-4 p-3 bg-gray-50 rounded-md border border-blue-600 space-y-2 shadow-sm",children:[w("div",{className:"flex items-center space-x-2",children:[c(H8,{className:"h-4 w-4 text-gray-500"}),c("span",{className:"text-xs text-gray-600 font-medium",children:"Date:"}),c("span",{className:"text-xs text-green-600 font-semibold",children:ke.bookedDate})]}),w("div",{className:"flex items-center space-x-2",children:[c(ls,{className:"h-4 w-4 text-gray-500"}),c("span",{className:"text-xs text-gray-600 font-medium",children:"Time:"}),c("span",{className:"text-xs text-gray-800",children:ke.bookedTime})]}),w("div",{className:"flex items-center space-x-2",children:[c(pce,{className:"h-4 w-4 text-gray-500"}),c("span",{className:"text-xs text-gray-600 font-medium",children:"Doctor:"}),c("span",{className:"text-xs text-gray-800",children:ke.doctorName})]})]})]}):w(Fe,{variant:"outline",size:"sm",onClick:()=>{const Re=ie.scheduled_date||ie.estimatedVisitDate,Pe=r.patient_id,ge=ie.id,Ye=ie.type||ie.title||"New Appointment";if(!Re){x({title:"Cannot Book Appointment",description:"This visit does not have a scheduled or estimated date yet.",variant:"destructive"});return}const Qe=new URLSearchParams({date:Re,patientId:Pe});ge&&Qe.append("treatmentId",ge),Qe.append("description",Ye),g(`/appointments?${Qe.toString()}`)},disabled:u||T,children:[c(Hi,{className:"w-3.5 h-3.5 mr-1.5"}),"Book Appointment"]})})]},ie.id||X)})}):w("div",{className:"text-center py-8 border rounded-lg",children:[c(Hi,{className:"h-10 w-10 mx-auto text-muted-foreground mb-3"}),c("p",{className:"text-muted-foreground",children:"No scheduled visits for this plan yet."})]})]})}),c(Ci,{value:"financial",className:"space-y-4",children:w("div",{className:"border rounded-lg p-4",children:[c("h4",{className:"font-medium",children:"Financial Summary"}),w("div",{className:"mt-4 space-y-2",children:[w("div",{className:"flex justify-between",children:[c("span",{className:"text-sm",children:"Total Treatment Cost:"}),c("span",{className:"font-medium",children:Hv(r.totalCost||0)})]}),w("div",{className:"flex justify-between",children:[c("span",{className:"text-sm",children:"Insurance Coverage (Est.):"}),c("span",{className:"font-medium",children:Hv(r.insurance_coverage||0)})]}),w("div",{className:"flex justify-between",children:[c("span",{className:"text-sm",children:"Patient Responsibility:"}),c("span",{className:"font-medium",children:Hv((r.totalCost||0)-(r.insurance_coverage||0))})]})]})]})})]}),w(Qi,{className:"pt-4 mt-auto dialog-footer-print-hide",children:[" ",w("div",{className:"flex gap-2 items-center",children:[r.status==="planned"&&w(Fe,{variant:"outline",onClick:()=>i(r.id,"in_progress"),disabled:u,title:"Start this treatment plan",children:[u&&!y&&!b?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(ls,{className:"h-4 w-4 mr-1"}),"Start Treatment"]}),r.status==="in_progress"&&w(Fe,{variant:"outline",onClick:()=>i(r.id,"completed"),disabled:u,title:"Mark this plan as completed",children:[u&&!y&&!b?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(g1,{className:"h-4 w-4 mr-1"}),"Mark Completed"]}),(r.status==="planned"||r.status==="in_progress")&&w(Uz,{open:b,onOpenChange:S,children:[c(qz,{asChild:!0,children:w(Fe,{variant:"outline",disabled:u,title:"Cancel this treatment plan",children:[u&&b?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(gh,{className:"h-4 w-4 mr-1"}),"Cancel Plan"]})}),w(KO,{children:[w(YO,{children:[c(ZO,{children:"Cancel Treatment Plan"}),c(JO,{children:"Are you sure you want to cancel this treatment plan? This action cannot be undone."})]}),w(XO,{children:[c(e8,{children:"No, Keep Plan"}),c(QO,{onClick:()=>{i(r.id,"cancelled"),S(!1)},children:"Yes, Cancel Plan"})]})]})]}),w(Uz,{open:y,onOpenChange:_,children:[c(qz,{asChild:!0,children:w(Fe,{variant:"outline",disabled:u,title:"Delete this treatment plan",children:[u&&y?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(om,{className:"h-4 w-4 mr-1"}),"Delete Plan"]})}),w(KO,{children:[w(YO,{children:[c(ZO,{children:"Delete Treatment Plan"}),c(JO,{children:"Are you sure you want to delete this treatment plan? This action cannot be undone."})]}),w(XO,{children:[c(e8,{children:"No, Keep Plan"}),c(QO,{onClick:()=>{o(r.id),_(!1)},children:"Yes, Delete Plan"})]})]})]})]})]})]})})]})})}function DFe({open:e,onOpenChange:t,patients:r}){const[n,a]=A.useState(""),[i,o]=A.useState(""),[s,l]=A.useState(""),[u,d]=A.useState(null),[f,h]=A.useState(""),[m,x]=A.useState(""),[g,y]=A.useState([]),[_,b]=A.useState(null),[S,C]=A.useState(!1),[E,O]=A.useState(null),[T,M]=A.useState({}),{toast:L}=yn(),z=q=>{var Pt;if(!q)return console.log("[generateSuggestions] No details provided."),[];console.log("[generateSuggestions] Processing details object:",q),console.log("[generateSuggestions] Processing details (stringified):",JSON.stringify(q));const Y=Array.isArray(q.medical_conditions)?q.medical_conditions.map(ft=>String(ft).toLowerCase()):[],U=String(((Pt=q.lifestyle_habits)==null?void 0:Pt.additional_concerns)||"").toLowerCase(),G=q.dental_history,J=String((G==null?void 0:G.chief_complaint)||"").toLowerCase(),D=String((G==null?void 0:G.pain_description)||"").toLowerCase(),K=String((G==null?void 0:G.functional_concerns)||"").toLowerCase();console.log("[generateSuggestions] Parsed medicalConditions array:",Y),console.log("[generateSuggestions] Parsed lifestyleConcerns string:",U),console.log("[generateSuggestions] Parsed chiefComplaint string:",J),console.log("[generateSuggestions] Parsed painDescription string:",D),console.log("[generateSuggestions] Parsed functionalConcerns string:",K);const Q=["pain","throbbing","sensitivity","sensitive","hot food","severe tooth pain","ache"],ae=["filling","root canal","lodgement","molar","cavity","broken","chipped","missing"],se=["gum","recession","periodontal","bleeding","swelling","pocketing","mobile"],fe=["jaw","clicking","tmj","bruxism","grinding","headache","lock"],ie=["stain","deposits","white teeth","cosmetic","discolored","yellow"],X=`${J} ${D} ${K} ${U}`;console.log("[generateSuggestions] Combined searchable text:",X);const ue=[],de=new Set;let re=0;const ke=(ft,_e,Te)=>{let qe=Te.split(" ")[0];const yt=Te.match(/\b(\d{2}(?:,\s*\d{2})*)\b/);return yt?qe=`Teeth ${yt[0]}`:_e.length>0&&(qe=_e[0].charAt(0).toUpperCase()+_e[0].slice(1)),`${ft}: ${qe}`},Re=Q.filter(ft=>X.includes(ft)||Y.includes(ft));if(Re.length>0&&re<3){const ft=ke("Assess Pain",Re,D||J);if(!de.has(ft)){const _e=`Patient reports pain/sensitivity related to: "${D||J||"N/A"}". Relevant Medical Conditions: ${Y.join(", ")||"None"}.`,Te=`Regarding the reported pain/sensitivity (${D||J||"see condition"}), what are the likely causes? What diagnostic steps (tests, imaging) and initial pain management strategies are recommended?`;ue.push({label:ft,condition:_e,question:Te}),de.add(ft),re++}}const Pe=ae.filter(ft=>X.includes(ft));if(Pe.length>0&&re<3){const ft=ke("Evaluate Restorative",Pe,J||K);if(!de.has(ft)){const _e=`Patient presents with potential restorative needs (${Pe.join(", ")}). Chief Complaint: "${J||"N/A"}". Functional Concerns: "${K||"N/A"}".`,Te=`Given the potential restorative issues (${J||K||Pe.join(", ")||"see condition"}), what diagnostic evaluations are needed? What are the primary restorative treatment options to consider?`;ue.push({label:ft,condition:_e,question:Te}),de.add(ft),re++}}const ge=se.filter(ft=>X.includes(ft));if(ge.length>0&&re<3){const ft=ke("Check Perio",ge,K||J);if(!de.has(ft)){const _e=`Patient shows signs potentially related to periodontal health (${ge.join(", ")}). Chief Complaint: "${J||"N/A"}". Functional Concerns: "${K||"N/A"}". Relevant Medical Conditions: ${Y.join(", ")||"None"}.`,Te=`Based on potential periodontal indicators (${K||J||ge.join(", ")||"see condition"}), what periodontal assessment (probing, bleeding index) is necessary? What initial hygiene or treatment steps should be considered?`;ue.push({label:ft,condition:_e,question:Te}),de.add(ft),re++}}const Ye=ie.filter(ft=>X.includes(ft));if(Ye.length>0&&re<3){const ft=ke("Review Esthetics",Ye,K||J);if(!de.has(ft)){const _e=`Patient has expressed concerns or shows signs related to dental esthetics (${Ye.join(", ")}). Chief Complaint: "${J||"N/A"}". Functional Concerns: "${K||"N/A"}".`,Te=`Regarding the esthetic concerns (${J||K||Ye.join(", ")||"see condition"}), what options are available (e.g., whitening, veneers, cleaning)? What factors should be considered in treatment planning?`;ue.push({label:ft,condition:_e,question:Te}),de.add(ft),re++}}const Qe=fe.filter(ft=>X.includes(ft));if(Qe.length>0&&re<3){const ft=ke("Assess TMJ",Qe,J||D||K);if(!de.has(ft)){const _e=`Patient reports symptoms potentially related to TMJ dysfunction (${Qe.join(", ")}). Chief Complaint: "${J||"N/A"}". Pain Description: "${D||"N/A"}". Functional Concerns: "${K||"N/A"}".`,Te=`Considering the potential TMJ symptoms (${J||D||K||Qe.join(", ")||"see condition"}), how should TMJ function be assessed? What are the initial management options for potential TMJ disorders or bruxism?`;ue.push({label:ft,condition:_e,question:Te}),de.add(ft),re++}}const st=ue;return console.log("[generateSuggestions] Final generated suggestions (more exact labels):",JSON.stringify(st,null,2)),st};A.useEffect(()=>{(async()=>{if(!i){d(null),console.log("[fetchDetails] No patient selected, clearing details.");return}console.log("[fetchDetails] Fetching details for patient ID:",i);try{const{data:Y,error:U}=await Le.from("patients").select("*").eq("id",i).single();U?(console.error("[fetchDetails] Error fetching patient details:",U),d(null)):Y?(console.log("[fetchDetails] Raw data received:",Y),console.log("[fetchDetails] Setting fetchedPatientDetails with full record:",Y),d(Y)):(console.log("[fetchDetails] No data received for patient ID:",i),d(null))}catch(Y){console.error("[fetchDetails] Exception fetching patient details:",Y),d(null)}})(),(!e||!i)&&M({})},[i,e]),A.useEffect(()=>{console.log("[suggestionEffect] Suggestion useEffect triggered. Patient ID:",i),console.log("[suggestionEffect] Using fetchedPatientDetails:",u);let q=[];i&&u&&u.id===i?(q=z(u),console.log("[suggestionEffect] Generated specific suggestions:",q)):console.log("[suggestionEffect] Conditions not met for generating specific suggestions."),y(q),console.log("[suggestionEffect] Set dynamicSuggestions to:",q)},[i,u]),A.useEffect(()=>{console.log("[clearFieldsEffect] Clearing fields due to patient change:",i),h(""),x(""),b(null),O(null),M({})},[i]);const P=q=>{o(q.id),l(`${q.first_name||""} ${q.last_name||""}`.trim()),a("")},R=q=>{h(q.condition),x(q.question),b(q.label)},j=()=>{x("I want three treatment plans"),b(null)},V=async()=>{var U;if(!i){L({title:"Patient Required",description:"Please select a patient",variant:"destructive",duration:3e3});return}if(Object.keys(T).length===0){L({title:"Teeth Required",description:"Please select at least one tooth.",variant:"destructive",duration:3e3});return}if(!f.trim()){L({title:"Input Required",description:"Please describe the patient's current condition.",variant:"destructive",duration:3e3});return}if(!m.trim()){L({title:"Input Required",description:"Please enter the specific question for the AI.",variant:"destructive",duration:3e3});return}C(!0),O(null);const q=new AbortController,Y=setTimeout(()=>{q.abort(),console.log("Fetch request timed out after 120 seconds")},12e4);try{const G="https://n8n1.kol.tel/webhook/33d4fdab-98eb-4cc4-8a69-2ab835e76511",J=await fetch(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:i,toothIds:Object.keys(T).map(Number),condition:f,question:m,patientRecord:u}),signal:q.signal});clearTimeout(Y);const D=await J.text();if(!J.ok)throw console.error("Error response from webhook (not ok):",J.status,D),new Error(`Webhook call failed with status: ${J.status}. Response: ${D.substring(0,200)}...`);let K;try{K=JSON.parse(D)}catch(ae){throw console.error("Failed to parse JSON response from webhook:",ae),console.error("Raw response text was:",D),new Error(`Invalid JSON response from AI generator. Content: ${D.substring(0,200)}...`)}console.log("Successfully parsed webhook response data:",K);const Q=(U=K==null?void 0:K[0])==null?void 0:U.output;if(Q){const ae=JSON.stringify(Q);O(ae);const se=Q.response,fe=JSON.stringify(se||{});L({title:"Treatment Plan Generated",description:"The AI-generated plan is now available below.",variant:"default",duration:5e3});const{data:ie,error:X}=await Le.from("ai_treatment_plans").insert({patient_id:i,title:f,description:m,content:fe,created_at:new Date().toISOString()}).select("id").single();if(X)console.error("Error saving AI treatment plan to database:",X),L({title:"Save Failed",description:"Failed to save the main AI plan details. Check console.",variant:"destructive",duration:5e3});else if(ie){console.log("AI treatment plan saved successfully with ID:",ie.id);const ue=ie.id,de=Object.keys(T).map(Number);if(de&&de.length>0){const re=de.map(Re=>({ai_treatment_plan_id:ue,tooth_id:Re})),{error:ke}=await Le.from("ai_treatment_plans_teeth").insert(re);ke?(console.error("Error linking teeth to AI treatment plan:",ke),L({title:"Partial Save",description:"AI plan saved, but failed to link selected teeth. Check console.",variant:"default",duration:5e3})):console.log("Teeth linked to AI treatment plan successfully.")}}}else throw console.error("Could not extract output object from webhook response:",K),new Error("Received invalid response format from AI generator (missing output).")}catch(G){console.error("Error generating treatment plan:",G);let J="Please check console for details.";G instanceof Error&&(J=G.message,G.name==="AbortError"&&(J="The request timed out after 120 seconds.")),L({title:"Generation Failed",description:`Could not trigger treatment plan generation. ${J}`,variant:"destructive",duration:5e3})}finally{clearTimeout(Y),C(!1)}},Z=()=>{O(null),M({}),o(""),l(""),a(""),h(""),x(""),d(null),y([]),b(null),t(!1)},te=r.filter(q=>{var D,K;const Y=`${q.first_name||""} ${q.last_name||""}`.toLowerCase(),U=((D=q.phone)==null?void 0:D.toLowerCase())||"",G=((K=q.registration_number)==null?void 0:K.toLowerCase())||"",J=n.toLowerCase();return Y.includes(J)||U.includes(J)||G.includes(J)});return c(ja,{open:e,onOpenChange:Z,children:w(Pa,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[w(Ta,{children:[w(Oa,{className:"flex items-center gap-2",children:[c(uh,{className:"h-5 w-5"}),"AI Treatment Plan Generator"]}),c(Yi,{children:"Select a patient and describe the current issue to generate a treatment plan using AI."})]}),w("div",{className:"space-y-3 py-4",children:[w("div",{className:"space-y-2 relative",children:[" ",c(er,{htmlFor:"patient-search",children:"Select Patient"}),c(ct,{type:"search",id:"patient-search",value:n,onChange:q=>{a(q.target.value),i&&(o(""),l(""),d(null))},placeholder:s||"Search by name, phone, or registration...",className:"w-full"}),n&&w(rd,{className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60",children:[" ",c("div",{className:"p-2",children:te.length>0?te.map(q=>c(Fe,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3 mb-1",onClick:()=>P(q),children:w("div",{children:[c("div",{children:`${q.first_name||""} ${q.last_name||""}`.trim()}),w("div",{className:"text-xs text-muted-foreground",children:[q.registration_number&&`Reg: ${q.registration_number}`,q.registration_number&&q.phone&&" | ",q.phone&&`Ph: ${q.phone}`,!q.registration_number&&!q.phone&&`ID: ${q.id.substring(0,6)}...`]})]})},q.id)):w("p",{className:"text-sm text-muted-foreground p-2",children:['No patients found matching "',n,'"']})})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Teeth *"}),i?c(hR,{value:T,onChange:M,placeholder:"Select Affected Teeth...",disabled:!i}):c("div",{className:"flex items-center justify-center h-10 px-3 border rounded-md bg-gray-50 text-sm text-muted-foreground",children:"Select a patient to enable teeth selection."})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"condition-input",children:"Condition"}),c(Qr,{id:"condition-input",placeholder:"Describe symptoms, observations, relevant history...",rows:5,value:f,onChange:q=>h(q.target.value),disabled:!i})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"question-input",children:"Question"}),c(Qr,{id:"question-input",placeholder:"What specific question do you have based on the condition?",rows:3,value:m,onChange:q=>x(q.target.value),disabled:!i})]}),i&&g.length>0&&w("div",{className:"space-y-2 pt-2",children:[" ",c(er,{children:"Query Suggestions"})," ",w("div",{className:"flex flex-wrap gap-2 pt-1",children:[" ",c(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                    h-auto px-2.5 py-0.5 rounded-full border-none
                    transition-colors duration-150 ease-in-out
                    focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                    disabled:opacity-60 disabled:cursor-not-allowed
                    bg-[#e8eefd] text-[#1B56FD] hover:bg-[#d1dffd]
                    disabled:bg-blue-50 disabled:text-blue-300
                  `,onClick:j,children:"I want three treatment plans"},"fixed-suggestion"),g.map((q,Y)=>{const U=q.label===_;return c(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                    h-auto px-2.5 py-0.5
                    rounded-full
                    border-none
                    transition-colors duration-150 ease-in-out
                    focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                    disabled:opacity-60 disabled:cursor-not-allowed
                   ${U?`
                    bg-[#1B56FD] /* Main blue background */
                    text-white /* White text */
                    hover:bg-[#0118D8] /* Darker blue hover */
                    disabled:bg-blue-300 disabled:text-gray-100
                  `:`
                    bg-[#e8eefd] /* Light blue background */
                    text-[#1B56FD] /* Main blue text */
                    hover:bg-[#d1dffd] /* Slightly darker light blue hover */
                    disabled:bg-blue-50 disabled:text-blue-300
                  `}`,onClick:()=>R(q),children:q.label},Y)})]}),c("p",{className:"text-xs text-muted-foreground pt-1",children:"Click a suggestion to populate the fields above. The fixed suggestion only populates the question."})," "]}),i&&g.length===0&&w("div",{className:"space-y-2 pt-2",children:[c(er,{children:"Query Suggestions"}),c("div",{className:"flex flex-wrap gap-2 pt-1",children:c(Fe,{disabled:!i,variant:"ghost",size:"sm",className:`
                    h-auto px-2.5 py-0.5 rounded-full border-none
                    transition-colors duration-150 ease-in-out
                    focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-[#0118D8]
                    disabled:opacity-60 disabled:cursor-not-allowed
                    bg-[#e8eefd] text-[#1B56FD] hover:bg-[#d1dffd]
                    disabled:bg-blue-50 disabled:text-blue-300
                  `,onClick:j,children:"I want three treatment plans"},"fixed-suggestion-only")}),c("p",{className:"text-xs text-muted-foreground pt-1",children:"Click the suggestion to populate the question field."})]}),E&&w("div",{className:"pt-6 mt-6 border-t border-gray-200",children:[c(er,{className:"text-base font-medium mb-3 block text-gray-700",children:"AI Generated Plan"}),w("div",{className:"flex items-start space-x-3",children:[c("div",{className:"flex-shrink-0 w-9 h-9 rounded-full bg-indigo-100 flex items-center justify-center border border-indigo-200 shadow-sm",children:c(qH,{className:"w-5 h-5 text-indigo-600"})}),c("div",{className:"flex-1 min-w-0 overflow-hidden",children:c("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:c(rd,{className:"h-auto pr-4",children:w("div",{className:"space-y-4 text-sm text-gray-800",children:[" ",(()=>{const q=(U,G,J="mb-4")=>G?w("div",{className:J,children:[w("strong",{className:"block font-semibold text-gray-800 mb-1",children:[U,":"]}),c("p",{className:"text-gray-700 whitespace-pre-wrap",children:G})]}):null,Y=U=>!U||typeof U!="string"?null:U.match(/^\s*\d+\.\s+/m)?c("ol",{className:"list-decimal list-inside pl-4 mt-1 space-y-1 text-gray-700",children:U.split(/\n?\s*\d+\.\s+/).filter(Boolean).map((G,J)=>c("li",{children:G.trim()},J))}):c("p",{className:"text-gray-700 whitespace-pre-wrap mt-1",children:U});try{const G=JSON.parse(E).response;return typeof G!="object"||G===null?(console.warn("Extracted response data is not an object:",G),c("pre",{className:"whitespace-pre-wrap text-xs",children:E})):w("div",{className:"space-y-6",children:[q("Clinical Assessment",G.clinicalAssessment),q("Evidence & Rationale",G.evidenceAndRationale),G.treatmentPlans&&Array.isArray(G.treatmentPlans)&&G.treatmentPlans.length>0&&w("div",{children:[c("h3",{className:"text-lg font-semibold text-gray-800 mb-3 border-b pb-2",children:"Treatment Plans"}),c("div",{className:"space-y-6",children:G.treatmentPlans.map((J,D)=>w("div",{className:"pl-2 border-l-4 border-indigo-200",children:[J.planName&&c("h4",{className:"text-base font-semibold text-indigo-700 mb-2",children:J.planName}),q("Recommendation",J.recommendation,"mb-2"),q("Approach",J.approach,"mb-2"),q("Benefits",J.benefits,"mb-2"),q("Considerations",J.considerations,"mb-2"),J.procedureSteps&&w("div",{className:"mb-2",children:[c("strong",{className:"block font-semibold text-gray-800 mb-1",children:"Procedure Steps:"}),Y(J.procedureSteps)]})]},D))})]}),q("Follow Up",G.followUp),q("Patient Instructions",G.patientInstructions)]})}catch(U){return console.warn("Failed to parse generatedPlan (output object) as JSON, displaying raw:",U),c("pre",{className:"whitespace-pre-wrap text-xs",children:E})}})()]})})})})]})]})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:Z,children:"Cancel"}),c(Fe,{onClick:V,disabled:!i||Object.keys(T).length===0||!f.trim()||!m.trim(),className:`ai-insights-button ${S?"opacity-100 cursor-not-allowed":""}`,style:S?{opacity:1}:{},children:S?w(_r,{children:[c(uh,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):w(_r,{children:[c(uh,{className:"mr-2 h-4 w-4"}),"Generate Plan"]})})]})]})})}function IFe(){const e=bo(),{toast:t}=yn(),{loading:r,patients:n,selectedPlan:a,setSelectedPlan:i,treatmentPlansSubscribed:o,updatingTreatmentStatus:s,updatingPlanStatus:l,filterPlans:u,refreshSelectedPlan:d,createTreatmentPlan:f,createTreatment:h,handleUpdateTreatmentStatus:m,handleUpdatePlanStatus:x,deleteTreatment:g,deletePlan:y,updateTreatmentDetails:_}=LIe(),[b,S]=A.useState(""),[C,E]=A.useState(null),[O,T]=A.useState(null),[M,L]=A.useState(!1),[z,P]=A.useState(!1),[R,j]=A.useState(!1),[V,Z]=A.useState(!1),[te,q]=A.useState(null),[Y,U]=A.useState([]),[G,J]=A.useState(null),[D,K]=A.useState(!1),Q=async(ke,Re)=>{try{const Pe=await f(ke,Re);L(!1),i(Pe),console.log("[TreatmentPlansPage] handleCreatePlan - newPlan object:",Pe),console.log("[TreatmentPlansPage] handleCreatePlan - newPlan.originalAISuggestion:",Pe==null?void 0:Pe.originalAISuggestion),Pe!=null&&Pe.originalAISuggestion?q(Pe.originalAISuggestion):q(null),P(!0)}catch(Pe){console.error("Error creating plan:",Pe)}},ae=async ke=>{try{await h(ke),j(!1),await d()}catch(Re){console.error("Error adding treatment:",Re)}},se=async ke=>{if(!G||!G.id){t({title:"Error",description:"No treatment selected for update.",variant:"destructive"});return}try{const Re={...ke,plan_id:ke.plan_id||G.plan_id};await _(G.id,Re),K(!1),J(null)}catch(Re){console.error("Error updating treatment:",Re)}},fe=ke=>{J(ke),K(!0)},ie=async ke=>{i(ke),P(!0);try{const Re=await RP(ke.id);U(Re)}catch(Re){console.error("Error fetching booked appointment details:",Re),U([])}},X=()=>{j(!0)},ue=ke=>{e(`/patients/${ke}`)},de=(ke,Re)=>x(ke,Re),re=(ke,Re)=>m(ke,Re);return w("div",{className:"space-y-6",children:[c(Aa,{heading:"Treatment Plans",text:"Manage dental treatment plans and procedures",children:w("div",{className:"flex items-center gap-4",children:[w("div",{className:"relative flex-1",children:[c(s4,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),c(ct,{placeholder:"Search treatment plans...",className:"pl-8",value:b,onChange:ke=>S(ke.target.value)})]}),w(Wr,{value:C||"all",onValueChange:ke=>E(ke==="all"?null:ke),children:[c(Br,{className:"w-[220px]",children:c(Vr,{placeholder:"Filter by patient"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Patients"}),n.map(ke=>w(wt,{value:ke.id,children:[ke.first_name," ",ke.last_name]},ke.id))]})]}),w(Wr,{value:O||"all",onValueChange:ke=>T(ke==="all"?null:ke),children:[c(Br,{className:"w-[180px]",children:c(Vr,{placeholder:"Filter by status"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Statuses"}),c(wt,{value:"planned",children:"Planned"}),c(wt,{value:"in_progress",children:"In Progress"}),c(wt,{value:"completed",children:"Completed"}),c(wt,{value:"cancelled",children:"Cancelled"})]})]}),w(Fe,{className:"ai-insights-button",onClick:()=>Z(!0),children:[c(Lce,{className:"h-4 w-4 mr-2"}),"AI Generate Plan"]}),w(Fe,{onClick:()=>L(!0),children:[c(Qc,{className:"h-4 w-4 mr-2"}),"New Treatment Plan"]})]})}),c("div",{className:"flex items-center justify-end",children:w("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[c("div",{className:`h-2 w-2 rounded-full ${o?"bg-green-500":"bg-red-500"}`}),w("span",{children:["Real-time updates ",o?"active":"inactive"]})]})}),r&&c("div",{className:"flex justify-center my-12",children:w("div",{className:"flex flex-col items-center gap-2",children:[c(Bn,{className:"h-8 w-8 animate-spin text-primary"}),c("p",{className:"text-muted-foreground",children:"Loading treatment plans..."})]})}),!r&&u(b,C,O).length===0&&w("div",{className:"text-center py-12 border rounded-lg",children:[c(QH,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),c("h3",{className:"text-lg font-medium",children:"No Treatment Plans Found"}),c("p",{className:"text-muted-foreground mt-1 mb-6",children:"Create your first treatment plan to get started"}),w(Fe,{onClick:()=>L(!0),children:[c(Qc,{className:"h-4 w-4 mr-2"}),"New Treatment Plan"]})]}),c("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u(b,C,O).map(ke=>c(jIe,{plan:ke,onViewDetails:ie},ke.id))}),c(UIe,{open:M,onOpenChange:L,onSubmit:Q,patients:n,loading:r}),z&&a&&c(OFe,{open:z,onOpenChange:ke=>{P(ke),ke?ke&&a&&(async()=>{try{const Pe=await RP(a.id);U(Pe)}catch(Pe){console.error("[TreatmentPlansPage] fetchDetails: Error fetching booked appointment details on dialog open:",Pe),U([])}})():U([])},plan:a,onRefresh:async()=>{if(await d(),a)try{const ke=await RP(a.id);U(ke)}catch(ke){console.error("Error fetching booked appointment details after refresh:",ke),U([])}},onAddTreatment:X,onStatusChange:de,onDeletePlan:async ke=>{await y(ke),P(!1)},onTreatmentStatusChange:re,onDeleteTreatment:g,onEditTreatment:fe,loading:r||l||s,navigateToPatient:ue,aiInitialSuggestion:te,bookedAppointments:Y},a.id),a&&c(Bz,{open:R,onOpenChange:j,onSubmit:ae,planId:a.id,loading:r}),a&&G&&c(Bz,{open:D,onOpenChange:ke=>{ke||J(null),K(ke)},onSubmit:se,planId:a.id,initialData:G,loading:r,isEditMode:!0}),c(DFe,{open:V,onOpenChange:Z,patients:n})]})}var j3="Switch",[RFe,WJe]=eo(j3),[MFe,FFe]=RFe(j3),zne=A.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...f}=e,[h,m]=A.useState(null),x=Hr(t,S=>m(S)),g=A.useRef(!1),y=h?d||!!h.closest("form"):!0,[_,b]=hl({prop:a,defaultProp:i??!1,onChange:u,caller:j3});return w(MFe,{scope:r,checked:_,disabled:s,children:[c(pr.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":Gne(_),"data-disabled":s?"":void 0,disabled:s,value:l,...f,ref:x,onClick:Wt(e.onClick,S=>{b(C=>!C),y&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})}),y&&c(Hne,{control:h,bubbles:!g.current,name:n,value:l,checked:_,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});zne.displayName=j3;var Wne="SwitchThumb",Vne=A.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=FFe(Wne,r);return c(pr.span,{"data-state":Gne(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Vne.displayName=Wne;var LFe="SwitchBubbleInput",Hne=A.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=A.useRef(null),s=Hr(o,i),l=T4(r),u=p4(t);return A.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&m){const x=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(x)}},[l,r,n]),c("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Hne.displayName=LFe;function Gne(e){return e?"checked":"unchecked"}var Kne=zne,jFe=Vne;const E2=A.forwardRef(({className:e,...t},r)=>c(Kne,{className:Rt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:c(jFe,{className:Rt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));E2.displayName=Kne.displayName;function $Fe(){const[e,t]=A.useState(null),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,s]=A.useState(!1),[l,u]=A.useState(!1),[d,f]=A.useState({first_name:"",last_name:"",email:"",role:"doctor",specialization:"",working_hours:JSON.stringify([{day:"monday",start:"09:00",end:"17:00"},{day:"tuesday",start:"09:00",end:"17:00"},{day:"wednesday",start:"09:00",end:"17:00"},{day:"thursday",start:"09:00",end:"17:00"},{day:"friday",start:"09:00",end:"17:00"}])}),[h,m]=A.useState([]),[x,g]=A.useState(!0),[y,_]=A.useState(!1),[b,S]=A.useState({staff_id:"",start_time:"",end_time:"",reason:""}),[C,E]=A.useState(null),[O,T]=A.useState(null),[M,L]=A.useState(!1);A.useEffect(()=>{Promise.all([R(),z(),P()])},[]),A.useEffect(()=>{const G=localStorage.getItem("customClinicLogo");G&&E(G)},[]);const z=async()=>{try{const G=await Vt.staff.getAll();n(G)}catch(G){console.error("Error fetching staff:",G)}},P=async()=>{g(!0);try{const G=await Vt.absences.getAll();m(G||[])}catch(G){console.error("Error fetching absences:",G),Bi({title:"Error",description:"Could not fetch staff absences.",variant:"destructive"})}finally{g(!1)}},R=async()=>{try{const G=await Vt.settings.get();t(G),i(!1)}catch(G){console.error("Error fetching settings:",G),i(!1)}},j=async()=>{if(e){Bi({title:"Saving changes...",description:"Please wait while we update your settings."}),s(!0);try{await Vt.settings.update(e),Bi({title:"Settings saved successfully",description:"All your changes have been updated.",variant:"default"})}catch(G){console.error("Error saving settings:",G),Bi({title:"Error",description:"Failed to save settings. Please try again.",variant:"destructive"})}finally{s(!1)}}},V=(G,J,D)=>{if(!e)return;const K=[...e.working_hours],Q=K.findIndex(ae=>ae.day===G);Q!==-1&&(K[Q]={...K[Q],[J]:D},t({...e,working_hours:K}))},Z=async()=>{try{await Vt.staff.create(d),u(!1),z(),f({first_name:"",last_name:"",email:"",role:"doctor",specialization:"",working_hours:JSON.stringify([{day:"monday",start:"09:00",end:"17:00"},{day:"tuesday",start:"09:00",end:"17:00"},{day:"wednesday",start:"09:00",end:"17:00"},{day:"thursday",start:"09:00",end:"17:00"},{day:"friday",start:"09:00",end:"17:00"}])}),Bi({title:"Staff member created",description:"New staff member has been added successfully."})}catch(G){console.error("Error creating staff:",G),Bi({title:"Error",description:"Failed to create staff member. Please try again.",variant:"destructive"})}},te=async()=>{if(!b.staff_id||!b.start_time||!b.end_time){Bi({title:"Missing Information",description:"Please select staff, start time, and end time.",variant:"destructive"});return}const G=new Date(b.start_time).toISOString(),J=new Date(b.end_time).toISOString();if(new Date(J)<=new Date(G)){Bi({title:"Invalid Dates",description:"End time must be after start time.",variant:"destructive"});return}try{await Vt.absences.create({...b,start_time:G,end_time:J}),_(!1),P(),S({staff_id:"",start_time:"",end_time:"",reason:""}),Bi({title:"Absence Added",description:"Staff absence recorded successfully."})}catch(D){console.error("Error creating absence:",D),Bi({title:"Error",description:`Failed to add absence: ${D instanceof Error?D.message:"Unknown error"}`,variant:"destructive"})}},q=async G=>{if(confirm("Are you sure you want to delete this absence record?"))try{await Vt.absences.delete(G),P(),Bi({title:"Absence Deleted",description:"The absence record has been removed."})}catch(J){console.error("Error deleting absence:",J),Bi({title:"Error",description:"Failed to delete absence.",variant:"destructive"})}},Y=G=>{if(G.target.files&&G.target.files[0]){const J=G.target.files[0];if(J.size>1*1024*1024){Bi({title:"File Too Large",description:"Please upload a logo smaller than 1MB.",variant:"destructive"});return}T(J);const D=new FileReader;D.onloadend=()=>{E(D.result),L(!1)},D.readAsDataURL(J)}},U=()=>{C?(localStorage.setItem("customClinicLogo",C),Bi({title:"Logo Saved",description:"Your new clinic logo has been saved.",variant:"default"}),L(!0)):Bi({title:"No Logo Selected",description:"Please select a logo file first.",variant:"destructive"})};return a?c("div",{children:"Loading settings..."}):e?w(_r,{children:[w("div",{className:"space-y-6",children:[c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:c("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:c(cce,{className:"h-6 w-6 text-blue-600"})})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Clinic Information"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your clinic details and contact information"})]})]}),w("div",{className:"mt-6 space-y-4",children:[w("div",{className:"space-y-2",children:[c(er,{children:"Clinic Name"}),c(ct,{value:e.name,onChange:G=>t({...e,name:G.target.value})})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Address"}),c(ct,{value:e.address,onChange:G=>t({...e,address:G.target.value})})]}),w("div",{className:"grid grid-cols-2 gap-4",children:[w("div",{className:"space-y-2",children:[c(er,{children:"Phone"}),c(ct,{value:e.phone,onChange:G=>t({...e,phone:G.target.value})})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Email"}),c(ct,{type:"email",value:e.email,onChange:G=>t({...e,email:G.target.value})})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Website"}),c(ct,{value:e.website,onChange:G=>t({...e,website:G.target.value})})]}),w("div",{className:"mt-6 space-y-4",children:[w("div",{children:[c(er,{htmlFor:"logo-upload",className:"block text-sm font-medium text-gray-700",children:"Clinic Logo"}),c("p",{className:"text-xs text-gray-500 mt-1 mb-2",children:"Recommended aspect ratio: 4:1 (e.g., 200x50 pixels). Max file size: 1MB."}),c("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-blue-400 transition-colors duration-150 ease-in-out",children:w("div",{className:"space-y-1 text-center",children:[!C&&c("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),C&&c("div",{className:"my-2 flex justify-center",children:c("img",{src:C,alt:"Clinic Logo Preview",className:"max-h-24 max-w-[250px] object-contain rounded-md shadow-md"})}),w("div",{className:"flex text-sm text-gray-600 justify-center",children:[w("label",{htmlFor:"logo-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[c("span",{children:C?"Change logo":"Upload a file"}),c("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"sr-only",accept:"image/png, image/jpeg, image/svg+xml",onChange:Y})]}),!C&&c("p",{className:"pl-1",children:"or drag and drop"})]}),c("p",{className:"text-xs text-gray-500",children:"PNG, JPG, SVG up to 1MB"})]})})]}),O&&c("div",{className:"mt-3 flex justify-center",children:c(Fe,{onClick:U,className:"min-w-[120px]",disabled:M,children:M?"Logo Saved!":"Save Logo"})})]})]})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:c("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:c(ls,{className:"h-6 w-6 text-blue-600"})})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Working Hours"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Set your clinic's operating hours"})]})]}),c("div",{className:"mt-6",children:c("div",{className:"space-y-4",children:e.working_hours.map(G=>w("div",{className:"flex items-center justify-between",children:[w("div",{className:"flex items-center gap-4",children:[c(E2,{checked:G.is_open,onCheckedChange:J=>V(G.day,"is_open",J)}),c("span",{className:"text-sm font-medium capitalize",children:G.day})]}),w("div",{className:"flex items-center gap-2",children:[c(ct,{type:"time",value:G.start,onChange:J=>V(G.day,"start",J.target.value),disabled:!G.is_open,className:"w-32"}),c("span",{className:"text-sm text-muted-foreground",children:"to"}),c(ct,{type:"time",value:G.end,onChange:J=>V(G.day,"end",J.target.value),disabled:!G.is_open,className:"w-32"})]})]},G.day))})})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:c("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:c(a4,{className:"h-6 w-6 text-blue-600"})})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Notification Preferences"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Configure your notification settings"})]})]}),w("div",{className:"mt-6 space-y-6",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{className:"space-y-0.5",children:[c(er,{children:"Email Notifications"}),c("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),c(E2,{checked:e.notification_preferences.email_notifications,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,email_notifications:G}})})]}),w("div",{className:"flex items-center justify-between",children:[w("div",{className:"space-y-0.5",children:[c(er,{children:"SMS Notifications"}),c("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via SMS"})]}),c(E2,{checked:e.notification_preferences.sms_notifications,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,sms_notifications:G}})})]}),w("div",{className:"flex items-center justify-between",children:[w("div",{className:"space-y-0.5",children:[c(er,{children:"Appointment Reminders"}),c("p",{className:"text-sm text-muted-foreground",children:"Send reminders for upcoming appointments"})]}),c(E2,{checked:e.notification_preferences.appointment_reminders,onCheckedChange:G=>t({...e,notification_preferences:{...e.notification_preferences,appointment_reminders:G}})})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Reminder Time"}),w(Wr,{value:e.notification_preferences.reminder_time,onValueChange:G=>t({...e,notification_preferences:{...e.notification_preferences,reminder_time:G}}),children:[c(Br,{children:c(Vr,{})}),w(Ur,{children:[c(wt,{value:"1h",children:"1 hour before"}),c(wt,{value:"2h",children:"2 hours before"}),c(wt,{value:"24h",children:"24 hours before"}),c(wt,{value:"48h",children:"48 hours before"})]})]})]})]})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:c("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:c(l4,{className:"h-6 w-6 text-blue-600"})})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Staff Management"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Manage clinic staff and their roles"})]})]}),w(Fe,{onClick:()=>u(!0),children:[c(Qc,{className:"h-4 w-4 mr-2"}),"Add Staff Member"]})]}),c("div",{className:"mt-6 space-y-4",children:r.map(G=>w("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[w("div",{className:"flex items-center space-x-4",children:[c("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:c(mi,{className:"h-5 w-5 text-gray-600"})}),w("div",{children:[w("h3",{className:"font-medium",children:[G.first_name," ",G.last_name]}),w("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[c("span",{className:"capitalize",children:G.role}),G.specialization&&w("span",{children:[" ",G.specialization]})]})]})]}),w("div",{className:"flex items-center space-x-2",children:[w(Fe,{variant:"ghost",size:"sm",children:[c(o4,{className:"h-4 w-4 mr-2"}),G.email]}),c(Fe,{variant:"destructive",size:"sm",onClick:()=>{confirm("Are you sure you want to remove this staff member?")},children:c(om,{className:"h-4 w-4"})})]})]},G.id))})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:w("div",{className:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center",children:[c(ls,{className:"h-6 w-6 text-orange-600"})," "]})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Staff Absences"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Manage scheduled staff absences"})]})]}),w(Fe,{onClick:()=>{S({staff_id:"",start_time:"",end_time:"",reason:""}),_(!0)},children:[c(Qc,{className:"h-4 w-4 mr-2"}),"Add Absence"]})]}),w("div",{className:"mt-6 space-y-4",children:[x&&c("div",{children:"Loading absences..."}),!x&&h.length===0&&c("p",{className:"text-sm text-gray-500",children:"No absences recorded."}),!x&&h.map(G=>{var J,D;return w("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[w("div",{className:"flex items-center space-x-4",children:[c("div",{className:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center",children:c(mi,{className:"h-5 w-5 text-gray-600"})}),w("div",{children:[w("h3",{className:"font-medium",children:[((J=G.staff)==null?void 0:J.first_name)||"Unknown"," ",((D=G.staff)==null?void 0:D.last_name)||"Staff"]}),w("p",{className:"text-sm text-gray-500",children:[Ut(zr(G.start_time),"MMM d, yyyy h:mm a")," - ",Ut(zr(G.end_time),"MMM d, yyyy h:mm a")]}),G.reason&&w("p",{className:"text-xs text-gray-400",children:["Reason: ",G.reason]})]})]}),c(Fe,{variant:"destructive",size:"sm",onClick:()=>q(G.id),children:c(om,{className:"h-4 w-4"})})]},G.id)})]})]})}),c("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:w("div",{className:"p-6",children:[w("div",{className:"flex items-center",children:[c("div",{className:"flex-shrink-0",children:c("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:c(Ice,{className:"h-6 w-6 text-blue-600"})})}),w("div",{className:"ml-4",children:[c("h2",{className:"text-lg font-medium text-gray-900",children:"Security Settings"}),c("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your security preferences and access controls"})]})]}),w("div",{className:"mt-6",children:[c(Fe,{className:"w-full",children:"Change Password"}),c("div",{className:"mt-4",children:w("div",{className:"relative flex items-start",children:[c("div",{className:"flex items-center h-5",children:c("input",{id:"2fa",name:"2fa",type:"checkbox",className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),w("div",{className:"ml-3 text-sm",children:[c("label",{htmlFor:"2fa",className:"font-medium text-gray-700",children:"Enable Two-Factor Authentication"}),c("p",{className:"text-gray-500",children:"Add an extra layer of security to your account"})]})]})})]})]})}),c("div",{className:"flex justify-end",children:c(Fe,{onClick:j,disabled:o,className:"min-w-[120px]",children:o?"Saving...":"Save Changes"})})]}),c(ja,{open:l,onOpenChange:u,children:w(Pa,{children:[c(Ta,{children:c(Oa,{children:"Add Staff Member"})}),w("div",{className:"space-y-4",children:[w("div",{className:"grid grid-cols-2 gap-4",children:[w("div",{className:"space-y-2",children:[c(er,{children:"First Name"}),c(ct,{value:d.first_name,onChange:G=>f({...d,first_name:G.target.value})})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Last Name"}),c(ct,{value:d.last_name,onChange:G=>f({...d,last_name:G.target.value})})]})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Email"}),c(ct,{type:"email",value:d.email,onChange:G=>f({...d,email:G.target.value})})]}),w("div",{className:"space-y-2",children:[c(er,{children:"Role"}),w(Wr,{value:d.role,onValueChange:G=>f({...d,role:G}),children:[c(Br,{children:c(Vr,{})}),w(Ur,{children:[c(wt,{value:"doctor",children:"Doctor"}),c(wt,{value:"assistant",children:"Assistant"}),c(wt,{value:"receptionist",children:"Receptionist"})]})]})]}),d.role==="doctor"&&w("div",{className:"space-y-2",children:[c(er,{children:"Specialization"}),c(ct,{value:d.specialization,onChange:G=>f({...d,specialization:G.target.value}),placeholder:"e.g., Orthodontics, Periodontics"})]})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),c(Fe,{onClick:Z,children:"Add Staff Member"})]})]})}),c(ja,{open:y,onOpenChange:_,children:w(Pa,{children:[c(Ta,{children:c(Oa,{children:"Add Staff Absence"})}),w("div",{className:"space-y-4 py-4",children:[w("div",{className:"space-y-2",children:[c(er,{htmlFor:"absence-staff",children:"Staff Member"}),w(Wr,{value:b.staff_id,onValueChange:G=>S({...b,staff_id:G}),children:[c(Br,{id:"absence-staff",children:c(Vr,{placeholder:"Select staff member"})}),c(Ur,{children:r.map(G=>w(wt,{value:G.id,children:[G.first_name," ",G.last_name," (",G.role,")"]},G.id))})]})]}),w("div",{className:"grid grid-cols-2 gap-4",children:[w("div",{className:"space-y-2",children:[c(er,{htmlFor:"absence-start",children:"Start Time"}),c(ct,{id:"absence-start",type:"datetime-local",value:b.start_time,onChange:G=>S({...b,start_time:G.target.value})})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"absence-end",children:"End Time"}),c(ct,{id:"absence-end",type:"datetime-local",value:b.end_time,onChange:G=>S({...b,end_time:G.target.value})})]})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"absence-reason",children:"Reason (Optional)"}),c(ct,{id:"absence-reason",value:b.reason,onChange:G=>S({...b,reason:G.target.value}),placeholder:"e.g., Vacation, Conference"})]})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),c(Fe,{onClick:te,children:"Add Absence"})]})]})})]}):c("div",{children:"No settings found"})}var BFe="Separator",xW="horizontal",UFe=["horizontal","vertical"],Yne=A.forwardRef((e,t)=>{const{decorative:r,orientation:n=xW,...a}=e,i=qFe(n)?n:xW,s=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c(pr.div,{"data-orientation":i,...s,...a,ref:t})});Yne.displayName=BFe;function qFe(e){return UFe.includes(e)}var Xne=Yne;const am=A.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>c(Xne,{ref:a,decorative:r,orientation:t,className:Rt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));am.displayName=Xne.displayName;function zFe(){var b,S,C,E;const{user:e}=oi(),{toast:t}=yn(),[r,n]=A.useState(null),[a,i]=A.useState(!0),[o,s]=A.useState(!1),[l,u]=A.useState(!1),[d,f]=A.useState(null),[h,m]=A.useState(null),x=A.useCallback(async()=>{if(e){i(!0);try{const{data:O,error:T,status:M}=await Le.from("profiles").select("id, first_name, last_name, mobile_number, address, date_of_birth, gender, avatar_url").eq("id",e.id).single();if(T&&M!==406)throw T;O?(n({...O,mobile_number:O.mobile_number||null,address:O.address||null,date_of_birth:O.date_of_birth||null,gender:O.gender||null,avatar_url:O.avatar_url||null,current_plan:"Pro Plan",payment_method_details:"Visa ending in 4242"}),m(O.avatar_url||null)):(n({id:e.id,first_name:"",last_name:"",mobile_number:null,address:null,date_of_birth:null,gender:null,avatar_url:null,current_plan:"Free Plan",payment_method_details:"N/A"}),m(null))}catch(O){console.error("Error fetching profile:",O),t({title:"Error Fetching Profile",description:O.message||"Could not load profile data.",variant:"destructive"}),n({id:(e==null?void 0:e.id)||"",first_name:"",last_name:"",mobile_number:null,address:null,date_of_birth:null,gender:null,avatar_url:null,current_plan:"Free Plan",payment_method_details:"N/A"}),m(null)}finally{i(!1)}}},[e,t]);A.useEffect(()=>{x()},[x]);const g=O=>{const{name:T,value:M}=O.target;n(L=>L?{...L,[T]:M}:null)},y=O=>{if(O.target.files&&O.target.files[0]){const T=O.target.files[0],M=2*1024*1024;if(T.size>M){t({title:"File Too Large",description:"Please select an image smaller than 2MB.",variant:"destructive"}),O.target.value="",f(null);return}f(T);const L=new FileReader;L.onloadend=()=>{m(L.result)},L.readAsDataURL(T)}else f(null),m((r==null?void 0:r.avatar_url)||null)},_=async O=>{if(O.preventDefault(),!r||!e)return;s(!0);let T=r.avatar_url;try{if(d){const z=d.name.split(".").pop(),P=`${e.id}-${Date.now()}.${z}`,{error:R}=await Le.storage.from("avatars").upload(P,d,{cacheControl:"3600",upsert:!0});if(R)throw new Error(`Failed to upload avatar: ${R.message}`);const{data:j}=Le.storage.from("avatars").getPublicUrl(P);j!=null&&j.publicUrl?T=j.publicUrl:console.warn("Could not get public URL for uploaded avatar, but upload might have succeeded.")}const M={id:e.id,first_name:r.first_name||"",last_name:r.last_name||"",mobile_number:r.mobile_number,address:r.address,date_of_birth:r.date_of_birth,gender:r.gender,avatar_url:T,updated_at:new Date().toISOString()},{error:L}=await Le.from("profiles").upsert(M,{onConflict:"id"});if(L)throw L;t({title:"Profile updated successfully!"}),f(null),T!==r.avatar_url&&(n(z=>z?{...z,avatar_url:T}:null),m(T??null)),u(!1)}catch(M){console.error("Failed to save profile:",M),t({title:"Update Failed",description:M.message||"Could not save profile changes.",variant:"destructive"})}finally{s(!1)}};return a?c(Aa,{heading:"Profile",text:"Loading profile..."}):!e||!r?c(Aa,{heading:"Profile",text:"Could not load profile data."}):w("div",{className:"container mx-auto py-8",children:[c(Aa,{heading:"User Profile",text:"View and update your personal information."}),w(sr,{className:"max-w-2xl mx-auto mt-6",children:[c(yr,{children:c(xr,{children:"Your Details"})}),w("form",{onSubmit:_,children:[w(mr,{className:"space-y-6",children:[" ",w("div",{className:"flex flex-col items-center space-y-4",children:[!l&&w(vD,{className:"h-24 w-24",children:[c(yD,{src:h||(r==null?void 0:r.avatar_url)||void 0,alt:"User Avatar"}),w(xD,{children:[(S=(b=r==null?void 0:r.first_name)==null?void 0:b[0])==null?void 0:S.toUpperCase(),(E=(C=r==null?void 0:r.last_name)==null?void 0:C[0])==null?void 0:E.toUpperCase()]})]}),l&&w("div",{className:"w-full max-w-xs flex flex-col items-center",children:[w(er,{htmlFor:"avatarFile",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted transition-colors",children:[h&&!d?w("div",{className:"relative group",children:[c("img",{src:h,alt:"Current avatar",className:"h-28 w-28 object-cover rounded-lg"}),c("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:c(Y0,{className:"w-8 h-8 text-white"})})]}):d?w("div",{className:"text-center",children:[c("img",{src:h||void 0,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg mx-auto mb-2"}),c("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:d.name}),w(Fe,{variant:"ghost",size:"sm",className:"mt-1 text-destructive hover:text-destructive-foreground",onClick:O=>{O.preventDefault(),f(null),m((r==null?void 0:r.avatar_url)||null);const T=document.getElementById("avatarFile");T&&(T.value="")},children:[c(gh,{className:"w-4 h-4 mr-1"})," Remove"]})]}):w("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[c(Y0,{className:"w-8 h-8 mb-2 text-muted-foreground"}),w("p",{className:"mb-1 text-sm text-muted-foreground",children:[c("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),c("p",{className:"text-xs text-muted-foreground",children:"SVG, PNG, JPG or GIF (MAX. 2MB)"})]}),c(ct,{id:"avatarFile",name:"avatarFile",type:"file",accept:"image/png, image/jpeg, image/gif, image/svg+xml",onChange:y,disabled:o,className:"hidden"})]}),!d&&c("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Upload a square picture (e.g., 100x100px). Max 2MB."})]})]}),c(am,{})," ",w("div",{className:"space-y-2",children:[c(er,{htmlFor:"email",children:"Email"}),c(ct,{id:"email",type:"email",value:e.email||"",disabled:!0}),c("p",{className:"text-sm text-muted-foreground",children:"Email address cannot be changed here."})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"first_name",children:"First Name"}),c(ct,{id:"first_name",name:"first_name",value:r.first_name||"",onChange:g,disabled:!l||o})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"last_name",children:"Last Name"}),c(ct,{id:"last_name",name:"last_name",value:r.last_name||"",onChange:g,disabled:!l||o})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"mobile_number",children:"Mobile Number"}),c(ct,{id:"mobile_number",name:"mobile_number",type:"tel",value:r.mobile_number||"",onChange:g,disabled:!l||o,placeholder:"e.g., +1 123 456 7890"})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"address",children:"Address"}),c(ct,{id:"address",name:"address",value:r.address||"",onChange:g,disabled:!l||o,placeholder:"e.g., 123 Main St, Anytown, USA"})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"date_of_birth",children:"Date of Birth"}),c(ct,{id:"date_of_birth",name:"date_of_birth",type:"date",value:r.date_of_birth||"",onChange:g,disabled:!l||o})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"gender",children:"Gender"}),c(ct,{id:"gender",name:"gender",value:r.gender||"",onChange:g,disabled:!l||o,placeholder:"e.g., Male, Female, Non-binary, Prefer not to say"})]}),c(am,{}),w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Subscription"}),w("div",{className:"flex justify-between items-center",children:[c("span",{className:"text-muted-foreground",children:"Current Plan:"}),c("span",{children:r.current_plan||"N/A"})]})]}),w("div",{className:"space-y-2",children:[c("h3",{className:"text-lg font-medium",children:"Payment Method"}),w("div",{className:"flex justify-between items-center",children:[c("span",{className:"text-muted-foreground",children:"Payment Details:"}),c("span",{children:r.payment_method_details||"N/A"})]})]})]}),c(Z0,{className:"flex justify-end gap-2",children:l?w(_r,{children:[c(Fe,{type:"button",variant:"outline",onClick:()=>{u(!1),f(null),m((r==null?void 0:r.avatar_url)||null),x()},disabled:o,children:"Cancel"}),c(Fe,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})]}):c(Fe,{type:"button",onClick:()=>u(!0),children:"Edit Profile"})})]})]})]})}const Rp={free:{name:"Free Plan",price:"0",features:["Basic Patient Record Management","Appointment Scheduling (up to 10/month)","Standard Email Reminders","Community Support"]},professional:{name:"Professional Plan",price:"49",priceSuffix:"/ month",features:["All features in Free Plan","Unlimited Patient Records","Unlimited Appointment Scheduling","Automated SMS & Email Reminders","Basic Treatment Planning","Consent Form Management","Priority Email Support","5 GB Document Storage"]}},WFe=[{question:"Can I change my plan later?",answer:"Yes, you can upgrade or downgrade your plan at any time from your account settings. Changes will take effect from the next billing cycle."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, American Express) and PayPal."},{question:"Is my payment information secure?",answer:"Absolutely. We use industry-standard encryption and partner with Stripe, a leading payment processor, to ensure your payment details are handled securely."},{question:"What happens if my payment fails?",answer:"If a payment fails, we'll notify you and attempt to retry the payment method. You'll have a grace period to update your payment details before any service interruption."}];function VFe(){const[e,t]=A.useState("professional"),[r,n]=A.useState(""),[a,i]=A.useState(!1),o=Rp[e],s=e==="free"?0:49,l=e==="free"?0:4,u=s+l;return w("div",{className:"container mx-auto py-8 px-4 md:px-6 lg:px-8",children:[c(Aa,{heading:"Payments & Subscription",text:"Manage your billing details and subscription plan."}),w("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-6",children:[w(sr,{className:"lg:col-span-2",children:[w(yr,{children:[c(xr,{children:"Payment Details"}),c(_c,{children:"Enter your payment information to subscribe."})]}),c(mr,{children:w("form",{onSubmit:f=>{f.preventDefault(),console.log("Processing payment for:",e,"Total:",u)},className:"space-y-6",children:[w("div",{className:"space-y-2",children:[c(er,{htmlFor:"email",children:"Email address"}),c(ct,{id:"email",type:"email",placeholder:"you@example.com",required:!0,defaultValue:"m@example.com"})," "]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"cardNumber",children:"Credit Card Number"}),c(ct,{id:"cardNumber",type:"text",placeholder:"XXXX XXXX XXXX XXXX",required:!0})]}),w("div",{className:"grid grid-cols-2 gap-4",children:[w("div",{className:"space-y-2",children:[c(er,{htmlFor:"expiryDate",children:"Expiry Date"}),c(ct,{id:"expiryDate",type:"text",placeholder:"MM / YY",required:!0})]}),w("div",{className:"space-y-2",children:[c(er,{htmlFor:"cvv",children:"CVV"}),c(ct,{id:"cvv",type:"text",placeholder:"XXX",required:!0})]})]}),w("div",{className:"flex items-center space-x-2",children:[c(Rs,{id:"promo",checked:a,onCheckedChange:f=>i(!!f)}),c(er,{htmlFor:"promo",className:"cursor-pointer",children:"I have a promo code"})]}),a&&w("div",{className:"space-y-2",children:[c(er,{htmlFor:"promoCode",children:"Promo Code"}),c(ct,{id:"promoCode",type:"text",placeholder:"Enter code",value:r,onChange:f=>n(f.target.value)})]}),w("div",{className:"space-y-2 border-t pt-4 mt-4",children:[w("div",{className:"flex justify-between",children:[c("span",{children:"Subtotal"}),w("span",{children:["",s.toFixed(2)]})]}),w("div",{className:"flex justify-between text-muted-foreground",children:[c("span",{children:"Platform Fee"}),w("span",{children:["",l.toFixed(2)]})]}),w("div",{className:"flex justify-between font-semibold text-lg border-t pt-2 mt-2",children:[c("span",{children:"Total Amount"}),w("span",{children:["",u.toFixed(2)]})]})]}),c(Fe,{type:"submit",className:"w-full",disabled:e==="free",children:e==="free"?"Free Plan Selected":`Subscribe to ${o.name}`})]})})]}),w("div",{className:"space-y-8",children:[w(sr,{children:[c(yr,{children:c(xr,{children:"Choose Your Plan"})}),c(mr,{children:w(Lo,{value:e,onValueChange:f=>t(f),children:[w(er,{htmlFor:"free-plan",className:`flex flex-col items-start space-y-1 rounded-md border p-4 cursor-pointer transition-colors ${e==="free"?"border-primary bg-primary/5":"hover:bg-accent hover:text-accent-foreground"}`,children:[w("div",{className:"flex justify-between w-full items-center",children:[c("span",{className:"font-semibold",children:Rp.free.name}),c(On,{value:"free",id:"free-plan",className:"translate-y-0"})]}),c("span",{className:"text-2xl font-bold",children:Rp.free.price}),c("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 mt-2",children:Rp.free.features.map((f,h)=>c("li",{children:f},h))})]}),w(er,{htmlFor:"professional-plan",className:`flex flex-col items-start space-y-1 rounded-md border p-4 cursor-pointer transition-colors ${e==="professional"?"border-primary bg-primary/5":"hover:bg-accent hover:text-accent-foreground"}`,children:[w("div",{className:"flex justify-between w-full items-center",children:[c("span",{className:"font-semibold",children:Rp.professional.name}),c(On,{value:"professional",id:"professional-plan",className:"translate-y-0"})]}),w("span",{className:"text-2xl font-bold",children:[Rp.professional.price,c("span",{className:"text-sm font-normal text-muted-foreground",children:Rp.professional.priceSuffix})]}),c("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 mt-2",children:Rp.professional.features.map((f,h)=>c("li",{children:f},h))})]})]})}),w(Z0,{children:[c(Fe,{variant:"outline",className:"w-full",children:"Modify Plan"})," "]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Frequently Asked Questions"})}),c(mr,{children:c(P4,{type:"single",collapsible:!0,className:"w-full",children:WFe.map((f,h)=>w(ts,{value:`item-${h+1}`,children:[c(rs,{children:f.question}),c(ns,{children:f.answer})]},h))})})]})]})]})]})}function HFe(){const[e,t]=A.useState([]),[r,n]=A.useState(""),[a,i]=A.useState(null),[o,s]=A.useState(null),[l,u]=A.useState([]),[d,f]=A.useState(!1),[h,m]=A.useState(!1),[x,g]=A.useState(null),[y,_]=A.useState(null),[b,S]=A.useState(!1),[C,E]=A.useState(!1),{toast:O}=yn();A.useEffect(()=>{(async()=>{f(!0),g(null);try{const{data:R,error:j}=await Le.from("patients").select("id, first_name, last_name, phone, registration_number").order("last_name",{ascending:!0}).order("first_name",{ascending:!0});if(j)throw j;t(R||[])}catch(R){g("Failed to fetch patients."),console.error("Error fetching patients:",R)}finally{f(!1)}})()},[]);const T=A.useCallback(async P=>{if(P){m(!0),_(null),u([]);try{if(!P)throw new Error("Patient ID became null unexpectedly.");const{data:R,error:j}=await Le.from("medical_records").select(`
           *,
           staff:created_by ( first_name, last_name ),
           teeth:medical_record_teeth ( teeth ( id, description ) ) 
         `).eq("patient_id",P).order("record_date",{ascending:!1});if(j)throw j;const V=(R||[]).map(Z=>{const q=(Z.teeth||[]).map(Y=>Y.teeth).filter(Boolean);return{...Z,teeth:q}});u(V)}catch(R){_("Failed to fetch medical records."),console.error("Error fetching medical records:",R)}finally{m(!1)}}},[]);A.useEffect(()=>{a?T(a):u([])},[a,T]);const M=P=>{i(P.id),s(`${P.first_name||""} ${P.last_name||""}`.trim()),n("")},L=()=>{if(!a){O({title:"No Patient Selected",description:"Please select a patient before adding a record.",variant:"destructive"});return}S(!0)},z=async(P,R)=>{if(!a)return;E(!0);let j={};switch(P.general_notes&&String(P.general_notes).trim()!==""&&(j.general_notes=P.general_notes),P.record_type){case"examination":P.consultation_subjective&&(j.subjective=P.consultation_subjective),P.consultation_objective&&(j.objective=P.consultation_objective),P.consultation_assessment&&(j.assessment=P.consultation_assessment),P.consultation_plan&&(j.plan=P.consultation_plan),P.diagnosis_code&&(j.code=P.diagnosis_code),P.diagnosis_description&&(j.description=P.diagnosis_description);break;case"procedure":j={...j,procedure:P.treatment_procedure,details:P.treatment_details};break;case"prescription":j={...j,medication:P.prescription_medication,dosage:P.prescription_dosage,frequency:P.prescription_frequency,duration:P.prescription_duration};break;case"lab_result":j={...j,test_name:P.lab_test_name,result_value:P.lab_result_value,units:P.lab_units,reference_range:P.lab_reference_range};break;case"note":P.other_details&&String(P.other_details).trim()!==""&&(j.details=P.other_details);break}const V=Object.keys(j).length>0?JSON.stringify(j):"{}",Z=new Date,te=new Date(P.record_date+"T00:00:00");Z.setFullYear(te.getFullYear()),Z.setMonth(te.getMonth()),Z.setDate(te.getDate());const q=Z.toISOString(),Y={patient_id:a,record_date:q,record_type:P.record_type,description:V};try{await Vt.patients.createMedicalRecord(Y,R),O({title:"Success",description:"Medical record added successfully."}),S(!1),T(a)}catch(U){console.error("Error saving medical record:",U),O({title:"Error",description:"Failed to save medical record. "+U.message,variant:"destructive"})}finally{E(!1)}};return w("div",{children:[c(Aa,{heading:"Patient Medical Records",text:"Select a patient to view or add medical records."}),w("div",{className:"mt-6 mb-8 max-w-md relative",children:[" ",c(er,{htmlFor:"patient-search",children:"Select Patient"}),c(ct,{type:"search",id:"patient-search",value:r,onChange:P=>{n(P.target.value),i(null),s(null)},placeholder:o||"Search by name, phone, or registration...",disabled:d,className:"w-full"}),d&&c("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading patients..."}),x&&c("p",{className:"text-sm text-destructive mt-1",children:x}),r&&!d&&!x&&w(rd,{className:"absolute z-10 w-full bg-background border rounded-md shadow-lg mt-1 max-h-60",children:[" ",c("div",{className:"p-2",children:e.filter(P=>{var te,q;const R=`${P.first_name||""} ${P.last_name||""}`.toLowerCase(),j=((te=P.phone)==null?void 0:te.toLowerCase())||"",V=((q=P.registration_number)==null?void 0:q.toLowerCase())||"",Z=r.toLowerCase();return R.includes(Z)||j.includes(Z)||V.includes(Z)}).length>0?e.filter(P=>{var te,q;const R=`${P.first_name||""} ${P.last_name||""}`.toLowerCase(),j=((te=P.phone)==null?void 0:te.toLowerCase())||"",V=((q=P.registration_number)==null?void 0:q.toLowerCase())||"",Z=r.toLowerCase();return R.includes(Z)||j.includes(Z)||V.includes(Z)}).map(P=>c(Fe,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3 mb-1",onClick:()=>M(P),children:w("div",{children:[c("div",{children:`${P.first_name||""} ${P.last_name||""}`.trim()}),w("div",{className:"text-xs text-muted-foreground",children:[P.registration_number&&`Reg: ${P.registration_number}`,P.registration_number&&P.phone&&" | ",P.phone&&`Ph: ${P.phone}`," "]})]})},P.id)):w("p",{className:"text-sm text-muted-foreground p-2",children:['No patients found matching "',r,'"']})})]})]}),a&&(h?c("p",{children:"Loading medical records..."}):y?c("p",{className:"text-destructive",children:y}):c(yre,{medicalRecords:l,onAddMedicalRecord:L})),!a&&!d&&!r&&c("p",{className:"text-muted-foreground mt-8",children:"Please search for and select a patient to view their medical records."}),c(ja,{open:b,onOpenChange:S,children:w(Pa,{className:"sm:max-w-[600px]",children:[" ",c(Ta,{children:c(Oa,{children:"Add New Medical Record"})}),a&&c(xre,{patientId:a,onSubmit:z,onCancel:()=>S(!1),isLoading:C})]})})]})}const Bs=A.forwardRef(({className:e,...t},r)=>c("div",{className:"relative w-full overflow-auto",children:c("table",{ref:r,className:Rt("w-full caption-bottom text-sm",e),...t})}));Bs.displayName="Table";const Us=A.forwardRef(({className:e,...t},r)=>c("thead",{ref:r,className:Rt("[&_tr]:border-b",e),...t}));Us.displayName="TableHeader";const qs=A.forwardRef(({className:e,...t},r)=>c("tbody",{ref:r,className:Rt("[&_tr:last-child]:border-0",e),...t}));qs.displayName="TableBody";const GFe=A.forwardRef(({className:e,...t},r)=>c("tfoot",{ref:r,className:Rt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));GFe.displayName="TableFooter";const kn=A.forwardRef(({className:e,...t},r)=>c("tr",{ref:r,className:Rt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));kn.displayName="TableRow";const Gt=A.forwardRef(({className:e,...t},r)=>c("th",{ref:r,className:Rt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Gt.displayName="TableHead";const $t=A.forwardRef(({className:e,...t},r)=>c("td",{ref:r,className:Rt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));$t.displayName="TableCell";const KFe=A.forwardRef(({className:e,...t},r)=>c("caption",{ref:r,className:Rt("mt-4 text-sm text-muted-foreground",e),...t}));KFe.displayName="TableCaption";const YFe=Ew("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),id=A.forwardRef(({className:e,variant:t,...r},n)=>c("div",{ref:n,role:"alert",className:Rt(YFe({variant:t}),e),...r}));id.displayName="Alert";const od=A.forwardRef(({className:e,...t},r)=>c("h5",{ref:r,className:Rt("mb-1 font-medium leading-none tracking-tight",e),...t}));od.displayName="AlertTitle";const sd=A.forwardRef(({className:e,...t},r)=>c("div",{ref:r,className:Rt("text-sm [&_p]:leading-relaxed",e),...t}));sd.displayName="AlertDescription";function jl({className:e,...t}){return c("div",{className:Rt("animate-pulse rounded-md bg-muted",e),...t})}const $3="inventory_items",TR=async()=>{const{data:e,error:t}=await Le.from($3).select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching inventory items:",t),new Error(t.message);return e||[]},XFe=async e=>{const{data:t,error:r}=await Le.from($3).select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return console.log(`Inventory item with id ${e} not found.`),null;throw console.error(`Error fetching inventory item ${e}:`,r),new Error(r.message)}return t},ZFe=async e=>{var i;const{data:t,error:r}=await Le.from($3).insert([e]).select().single();if(r)throw console.error("Error adding inventory item:",r),new Error(r.message);if(!t)throw new Error("Failed to add inventory item, no data returned.");const n={inventory_item_id:t.id,item_id:null,quantity_change:t.quantity,change_type:"initial_stock",user_id:((i=(await Le.auth.getUser()).data.user)==null?void 0:i.id)||null,notes:"Initial stock set during item creation",inventory_item_batch_id:null,purchase_order_item_id:null},{error:a}=await Le.from("inventory_log").insert([n]);return a&&console.error("Error logging initial inventory stock:",a),t},JFe=async(e,t)=>{var i;const r=await XFe(e);if(!r)throw new Error(`Inventory item ${e} not found.`);if(t.quantity!==void 0&&t.quantity!==r.quantity){const o=t.quantity-r.quantity,s={inventory_item_id:e,item_id:null,quantity_change:o,change_type:o>0?"add":"use",user_id:((i=(await Le.auth.getUser()).data.user)==null?void 0:i.id)||null,notes:`Quantity updated from ${r.quantity} to ${t.quantity}`,inventory_item_batch_id:null,purchase_order_item_id:null},{error:l}=await Le.from("inventory_log").insert([s]);l&&console.error("Error logging inventory quantity change:",l)}const{data:n,error:a}=await Le.from($3).update(t).eq("id",e).select().single();if(a)throw console.error(`Error updating inventory item ${e}:`,a),new Error(a.message);if(!n)throw new Error(`Failed to update inventory item ${e}, no data returned.`);return n},wW=async(e,t)=>{const{data:r,error:n}=await Le.from("inventory_log").select("*").gte("created_at",e).lte("created_at",t).order("created_at",{ascending:!0});if(n)throw console.error("Error fetching inventory log entries:",n),new Error(n.message);return r||[]},QFe=async e=>{let t=Le.from("inventory_log").select(`
      *,
      inventory_items (item_name, item_code)
    `).order("created_at",{ascending:!1});const r=["Expired","Damaged","Lost","Stock Count Correction","Used","Other","adjustment"];if(t=t.in("change_type",r),e.startDate&&(t=t.gte("created_at",e.startDate.toISOString())),e.endDate){const i=new Date(e.endDate);i.setDate(i.getDate()+1),t=t.lt("created_at",i.toISOString())}if(e.searchTerm){const i=`%${e.searchTerm}%`;t=t.or(`inventory_items.item_name.ilike.${i},inventory_items.item_code.ilike.${i},notes.ilike.${i},change_type.ilike.${i}`)}const{data:n,error:a}=await t;if(a)throw console.error("Error fetching detailed inventory logs:",a),new Error(a.message);return n||[]},_W=async e=>{const{data:t,error:r}=await Le.from("inventory_adjustment_requests").insert({inventory_item_id:e.inventory_item_id,inventory_item_batch_id:e.inventory_item_batch_id,quantity_to_decrease:e.quantity_to_decrease,reason:e.reason,notes:e.notes,photo_url:e.photo_url,requested_by_user_id:e.requested_by_user_id,custom_approver_emails:e.custom_approver_emails,approver_role_target:e.approver_role_target,status:"pending"}).select("id, inventory_item_id, inventory_item_batch_id, quantity_to_decrease, reason, notes, photo_url, status, requested_by_user_id, requested_at, reviewed_by_user_id, reviewed_at, reviewer_notes, created_at, updated_at, approval_token, approval_token_expires_at, custom_approver_emails, approver_role_target").single();if(r)throw console.error("Error creating inventory adjustment request:",r),r;if(!t)throw new Error("Failed to create adjustment request, no data returned.");return t},bW=async(e,t)=>{const r=e.name.split(".").pop(),n=`inventory_adjustments/${t}/${Date.now()}.${r}`;try{const{error:a,data:i}=await Le.storage.from("inventory-proofs").upload(n,e);return a?(console.error("Error uploading adjustment photo (likely CORS or network issue):",a),null):n}catch(a){return console.error("Exception during photo upload:",a),null}},eLe=async(e,t)=>{let r=Le.from("inventory_adjustment_requests").select(`
            *,
            inventory_items ( item_name ),
            requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
        `).eq("status","pending").neq("requested_by_user_id",e);if(t==="admin")r=r.or("approver_role_target.eq.admin,approver_role_target.is.null");else if(t==="owner")r=r.or("approver_role_target.eq.owner,approver_role_target.is.null");else if(t==="doctor")r=r.eq("approver_role_target","doctor");else return[];r=r.order("requested_at",{ascending:!0});const{data:n,error:a}=await r;if(a)throw console.error("Error fetching pending adjustment requests:",a),a;return n||[]},tLe=async e=>{const{data:t,error:r}=await Le.from("inventory_adjustment_requests").select(`
            *,
            inventory_items ( item_name ),
            requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
        `).eq("id",e).single();if(r){if(r.code==="PGRST116")return console.log(`Adjustment request with id ${e} not found.`),null;throw console.error(`Error fetching adjustment request ${e}:`,r),r}return t},rLe=async(e,t,r=20)=>{let n=Le.from("inventory_adjustment_requests").select(`
      *,
      inventory_items ( item_name ),
      requester_profile:profiles!inventory_adjustment_requests_requested_by_user_id_fkey ( first_name, last_name )
    `).eq("requested_by_user_id",e);t&&t.length>0&&(n=n.in("status",t)),n=n.order("requested_at",{ascending:!1}).limit(r);const{data:a,error:i}=await n;if(i)throw console.error("Error fetching adjustment requests for user:",i),i;return a||[]},jS=async e=>{if(!e)return null;const{data:t,error:r}=await Le.storage.from("inventory-proofs").createSignedUrl(e,60*10);return r?(console.error("Error creating signed URL for adjustment photo:",r),null):(t==null?void 0:t.signedUrl)||null},Zne=async(e,t,r)=>{const{error:n}=await Le.rpc("process_approved_adjustment",{p_request_id:e,p_reviewer_user_id:t,p_reviewer_notes:r===void 0?null:r});if(n)throw console.error(`Error approving adjustment request ${e}:`,n),n},Jne=async(e,t,r)=>{const{error:n}=await Le.from("inventory_adjustment_requests").update({status:"rejected",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r}).eq("id",e).eq("status","pending");if(n)throw console.error(`Error rejecting adjustment request ${e}:`,n),n},nLe=async(e,t)=>{const{data:r,error:n}=await Le.rpc("verify_adjustment_approval_token",{p_request_id:e,p_raw_token:t});return n?(console.error("Error verifying adjustment token:",n),null):r&&r.length>0?r[0]:null},aLe=async e=>{const{data:t,error:r}=await Le.from("stock_takes").insert(e).select().single();if(r)throw console.error("Error creating stock take entry:",r),r;if(!t)throw new Error("Failed to create stock take entry, no data returned.");return t},Qne=tt.forwardRef(({status:e,className:t,onClick:r},n)=>{let a="",i="";switch(e){case"In Stock":a="bg-green-100 text-green-800";break;case"Low Stock":a="bg-yellow-100 text-yellow-800",i="animate-pulse";break;case"Expired":a="bg-red-100 text-red-800";break;default:a="bg-gray-100 text-gray-800"}return c("span",{ref:n,className:fn("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold capitalize",a,i,t),onClick:r,children:e})});Qne.displayName="InventoryStatusBadge";const iLe=e=>(e.quantity??0)<=(e.low_stock_threshold??0)?"Low Stock":"In Stock",oLe=e=>{switch(e){case"In Stock":return"text-green-600 font-bold";case"Low Stock":return"text-red-600 font-bold";default:return""}},sLe=({onEditItem:e,refreshTrigger:t,searchTerm:r,categoryFilter:n,onDataFiltered:a})=>{const[i,o]=A.useState([]),[s,l]=A.useState(!0),[u,d]=A.useState(null),[f,h]=A.useState("item_name"),[m,x]=A.useState("asc");bo();const{toast:g}=yn(),{user:y}=oi(),_=A.useRef(null),b=A.useRef(null),S=A.useRef(0),C=5,E=1e3,O=3e4,T=A.useCallback(async()=>{l(!0),d(null);try{let z=Le.from("inventory_items").select("*");r&&(z=z.ilike("item_name",`%${r}%`)),n!=="all"&&(z=z.eq("category",n));const P={ascending:m==="asc"};z=z.order(f,P);const{data:R,error:j}=await z;if(j)throw j;const V=await Promise.all((R||[]).map(async Z=>{let te=[];if(Z.is_batched){const{data:q,error:Y}=await Le.from("inventory_item_batches").select("*").eq("inventory_item_id",Z.id).order("expiry_date",{ascending:!0,nullsFirst:!1});Y?console.error(`Failed to fetch batches for item ${Z.id}:`,Y):te=q||[]}return{...Z,stock_status:iLe(Z),batches:te}}));o(V),a(V)}catch(z){console.error("Failed to fetch inventory items:",z),d(z instanceof Error?z.message:"An unknown error occurred"),g({title:"Error Fetching Inventory",description:z instanceof Error?z.message:"Could not load items.",variant:"destructive"})}finally{l(!1)}},[r,n,f,m,a]);A.useEffect(()=>{T()},[T,t]),A.useEffect(()=>{if(!Le){console.error("Supabase client is not available");return}let z=Le.channel("inventory_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},P=>{T()}).subscribe((P,R)=>{if(P==="SUBSCRIBED")S.current=0,b.current&&(clearTimeout(b.current),b.current=null);else if(P==="CHANNEL_ERROR"||P==="TIMED_OUT"||P==="CLOSED")if(console.error(`List Realtime subscription ${P}:`,R),R&&console.error("Error message:",R.message),S.current<C){S.current+=1;const j=Math.min(E*Math.pow(2,S.current-1),O);console.error(`List attempting to reconnect in ${j/1e3} seconds...`),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{_.current&&_.current.subscribe()},j)}else console.error("List max reconnection attempts reached."),g({title:"Realtime Connection Issue",description:"Inventory list updates may be delayed. Please refresh if needed.",variant:"destructive",duration:1e4})});return _.current=z,()=>{b.current&&clearTimeout(b.current);const P=_.current;P&&(Le.removeChannel(P).catch(R=>console.error("Error removing list channel:",R)),_.current=null)}},[Le,T,g]);const M=z=>{f===z?x(P=>P==="asc"?"desc":"asc"):(h(z),x("asc"))},L=z=>f!==z?c(u5,{className:"ml-2 h-4 w-4 opacity-30 group-hover:opacity-100"}):c(u5,{className:`ml-2 h-4 w-4 ${m==="asc"?"":"rotate-180"}`});return s?c("div",{className:"space-y-2",children:[...Array(5)].map((z,P)=>c(jl,{className:"h-10 w-full"},P))}):u?w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:u})]}):i.length===0?c("p",{className:"text-center text-gray-500 mt-4",children:"No inventory items found. Add one to get started!"}):c("div",{className:"rounded-md border",children:w(Bs,{className:"min-w-full divide-y divide-gray-200 bg-white shadow-md rounded-lg overflow-hidden",children:[c(Us,{className:"bg-gray-50",children:w(kn,{className:"text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[c(Gt,{className:"px-6 py-3",children:w(Fe,{variant:"ghost",onClick:()=>M("item_code"),className:"px-0 group",children:["Item Code ",L("item_code")]})}),c(Gt,{className:"px-6 py-3",children:"Batch No / Info"}),c(Gt,{className:"px-6 py-3",children:"Supplier ID/Info"}),c(Gt,{className:"px-6 py-3",children:w(Fe,{variant:"ghost",onClick:()=>M("item_name"),className:"px-0 group",children:["Item Name ",L("item_name")]})}),c(Gt,{className:"px-6 py-3 text-right",children:w(Fe,{variant:"ghost",onClick:()=>M("quantity"),className:"px-0 group",children:["Quantity ",L("quantity")]})}),c(Gt,{className:"px-6 py-3",children:"Status"})]})}),c(qs,{className:"bg-white divide-y divide-gray-200",children:i.map(z=>w(kn,{className:"hover:bg-gray-100 text-sm text-gray-900",children:[c($t,{className:"px-6 py-4 whitespace-nowrap",children:z.item_code||"N/A"}),c($t,{className:"px-6 py-4 whitespace-nowrap",children:z.is_batched&&z.batches&&z.batches.length>0?z.batches.map(P=>P.batch_number||"N/A").join(", "):z.is_batched?"No batches":"N/A"}),c($t,{className:"px-6 py-4 whitespace-nowrap",children:z.supplier_info||"N/A"}),c($t,{className:"px-6 py-4 whitespace-nowrap",children:z.item_name}),c($t,{className:"px-6 py-4 whitespace-nowrap text-right",children:z.quantity??"-"}),c($t,{className:"px-6 py-4 whitespace-nowrap",children:c(Qne,{status:z.stock_status,className:oLe(z.stock_status)})})]},z.id))})]})})},lLe=async(e,t,r)=>{if(!e)throw new Error("No file provided for upload.");if(!t)throw new Error("User ID is required for upload.");const n=e.name.split(".").pop(),i=`invoices/${`${t}_${Date.now()}.${n}`}`,{data:o,error:s}=await Le.storage.from("invoices").upload(i,e);if(s)throw console.error("Error uploading invoice to storage:",s),new Error(`Storage upload failed: ${s.message}`);console.log("File uploaded successfully to:",o.path);const l={file_name:e.name,storage_path:o.path,uploaded_by_user_id:t,inventory_item_id:r},{data:u,error:d}=await Le.from("invoices").insert(l).select().single();if(d)throw console.error("Error inserting invoice record:",d),await Le.storage.from("invoices").remove([o.path]),console.warn("Orphaned file removed from storage due to DB insert failure:",o.path),new Error(`Database insert failed: ${d.message}`);return console.log("Invoice record created successfully:",u),o.path},cLe=async()=>{const{data:e,error:t}=await Le.from("invoices").select(`
            *,
            inventory_items (
                item_name
            )
        `).order("uploaded_at",{ascending:!1});if(t)throw console.error("Error fetching invoices with item names:",t),t;return e},uLe=async(e,t=60)=>{const{data:r,error:n}=await Le.storage.from("invoices").createSignedUrl(e,t);if(n)throw console.error("Error creating signed URL:",n),n;return r.signedUrl},dLe=P3({item_name:es().min(1,{message:"Item name is required"}),category:sw(["Medicines","Tools","Consumables"],{required_error:"Category is required"}),supplier_info:es().optional().nullable(),low_stock_threshold:uR.number().int().min(0,{message:"Threshold must be 0 or greater"}),item_code:es().optional().nullable()}),fLe=({itemToEdit:e,onSave:t,onCancel:r})=>{const{toast:n}=yn(),{user:a}=oi(),[i,o]=A.useState(null),s=!!e,l=["Medicines","Tools","Consumables"],u=y=>{if(y&&l.includes(y))return y},d=dd({resolver:fd(dLe),defaultValues:{item_name:(e==null?void 0:e.item_name)??"",category:u(e==null?void 0:e.category),supplier_info:(e==null?void 0:e.supplier_info)??"",low_stock_threshold:Number((e==null?void 0:e.low_stock_threshold)??10),item_code:(e==null?void 0:e.item_code)??""}}),{handleSubmit:f,control:h,reset:m}=d;A.useEffect(()=>{m(e?{item_name:e.item_name,category:u(e.category),supplier_info:e.supplier_info??"",low_stock_threshold:Number(e.low_stock_threshold??10),item_code:e.item_code??""}:{item_name:"",category:void 0,supplier_info:"",low_stock_threshold:10,item_code:""})},[e,m]);const x=y=>{y.target.files&&y.target.files[0]?o(y.target.files[0]):o(null)};return c(Rh,{...d,children:w("form",{onSubmit:f(async y=>{if(!a){n({title:"Error",description:"You must be logged in to save items.",variant:"destructive"});return}let _=null;try{if(s&&e){const b={item_name:y.item_name,category:y.category,supplier_info:y.supplier_info||null,low_stock_threshold:y.low_stock_threshold,item_code:y.item_code||null};_=await JFe(e.id,b),n({title:"Success",description:"Inventory item updated."})}else{const b={item_name:y.item_name,category:y.category,quantity:0,supplier_info:y.supplier_info||null,low_stock_threshold:y.low_stock_threshold,item_code:y.item_code||null,is_batched:y.category==="Medicines",photo_url:null,updated_at:null};if(_=await ZFe(b),n({title:"Success",description:"New inventory item added."}),i&&_)try{console.log(`Uploading invoice for new item ID: ${_.id}`),await lLe(i,a.id,_.id),n({title:"Invoice Uploaded",description:`Invoice "${i.name}" uploaded successfully.`})}catch(S){console.error("Invoice upload failed after item creation:",S),n({title:"Warning",description:`Item was added, but invoice upload failed: ${S instanceof Error?S.message:"Unknown error"}`,variant:"default",duration:7e3})}}if(!_)throw new Error("Failed to get saved item data.");t(_),o(null)}catch(b){console.error("Failed to save inventory item:",b),n({title:"Error",description:`Failed to save item: ${b instanceof Error?b.message:"Unknown error"}`,variant:"destructive"})}}),className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Basic Information"}),c(He,{control:h,name:"item_name",render:({field:y})=>w(De,{children:[c(Oe,{children:"Item Name *"}),c(Me,{children:c(ct,{placeholder:"e.g., Amoxicillin 500mg",...y})}),c(Xe,{})]})}),c(He,{control:h,name:"category",render:({field:y})=>w(De,{children:[c(Oe,{children:"Category *"}),w(Wr,{onValueChange:y.onChange,value:y.value??"",defaultValue:y.value??"",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select a category"})})}),c(Ur,{children:l.map(_=>c(wt,{value:_,children:_},_))})]}),c(Xe,{})]})}),c(He,{control:h,name:"item_code",render:({field:y})=>w(De,{children:[c(Oe,{children:"Item Code/SKU (Optional)"}),c(Me,{children:c(ct,{placeholder:"e.g., MED-001",...y,value:y.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"low_stock_threshold",render:({field:y})=>w(De,{children:[c(Oe,{children:"Low Stock Threshold"}),c(Me,{children:c(ct,{type:"number",min:"0",placeholder:"10",...y,value:String(y.value??"")})}),c(Xe,{})]})})]}),w("div",{className:"md:col-span-2 grid grid-cols-1 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold",children:"Supplier Information"}),c(He,{control:h,name:"supplier_info",render:({field:y})=>w(De,{children:[c(Oe,{children:"Supplier Details (Optional)"}),c(Me,{children:c(ct,{placeholder:"e.g., Supplier Name, Contact",...y,value:y.value??""})}),c(Xe,{})]})})]}),!s&&w("div",{className:"md:col-span-2 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Upload"}),w(De,{children:[c(Oe,{children:"Attach Invoice (Optional)"}),c(Me,{children:c("div",{className:"flex items-center justify-center w-full",children:w("label",{htmlFor:"invoice-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted/50",children:[w("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[c(Y0,{className:"w-8 h-8 mb-4 text-muted-foreground"}),w("p",{className:"mb-2 text-sm text-muted-foreground",children:[c("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),c("p",{className:"text-xs text-muted-foreground",children:"PDF, DOCX, XLSX, PNG, JPG (MAX. 5MB)"})]}),c(ct,{id:"invoice-upload",type:"file",className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.jpg,.jpeg,.png",onChange:x})]})})}),i&&w("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:["Selected: ",i.name]})]})]}),w("div",{className:"md:col-span-2 flex justify-end space-x-2 pt-4",children:[c(Fe,{type:"button",variant:"outline",onClick:()=>{o(null),r()},children:"Cancel"}),c(Fe,{type:"submit",disabled:d.formState.isSubmitting,children:d.formState.isSubmitting?"Saving...":s?"Update Item":"Add Item"})]})]})})},hLe={reorder:c(JH,{className:"text-blue-500",size:16}),expiry:c(Hi,{className:"text-red-500",size:16}),clinical:c(yce,{className:"text-orange-500",size:16})},SW={High:"bg-red-100 text-red-600",Medium:"bg-yellow-100 text-yellow-600",Low:"bg-green-100 text-green-600"},pLe=e=>{var a;const t={},r=[];let n=null;for(const i of e){const o=i.message.trim(),s=o.match(/\*\*(.*?)\*\*/),l=((a=s==null?void 0:s[1])==null?void 0:a.trim())||null;if(l){n=l;const u=o.replace(/\*\*(.*?)\*\*\s*:?/,"").trim();t[n]||(t[n]=[]),u&&u!=="-"&&u.length>5&&t[n].push({insight:i,content:u})}else n?o&&o!=="-"&&o.length>5&&t[n].push({insight:i,content:o}):o&&o.length>10&&o!=="-"&&r.push({insight:i,content:o})}return{grouped:t,ungrouped:r}},mLe=({onLoadingChange:e,onInitialFetchComplete:t})=>{const[r,n]=A.useState(null),[a,i]=A.useState(""),[o,s]=A.useState(!1),[l,u]=A.useState(null),d=async m=>{var x;s(!0),u(null),e(!0);try{m==null||m.throwIfAborted();const{data:g,error:y}=await Le.functions.invoke("ai-insights");if(m==null||m.throwIfAborted(),y)throw y;const _=g;if((x=_.assets)!=null&&x.structuredInsights)n(_.assets.structuredInsights),i(_.generatedAt);else throw new Error("Invalid AI insight format.")}catch(g){g.name==="AbortError"?u("AI insights request timed out (120 seconds)."):g&&typeof g=="object"&&"message"in g?u(g.message||"Unknown error fetching AI insights"):u("An unknown error occurred while fetching AI insights."),n(null)}finally{s(!1),e(!1),t()}};if(A.useEffect(()=>{const m=new AbortController,x=setTimeout(()=>m.abort(),12e4);return d(m.signal),()=>{clearTimeout(x),m.abort(),e(!1),t()}},[e,t]),o)return w(sr,{children:[c(yr,{children:c(xr,{className:"animate-pulse",children:"AI Suggestions"})}),w(mr,{children:[c(jl,{className:"h-4 w-full mb-2"}),c(jl,{className:"h-4 w-full mb-2"}),c(jl,{className:"h-4 w-full mb-2"})]})]});if(l)return w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:l})]});if(!r)return null;const{grouped:f,ungrouped:h}=pLe(r);return w("div",{className:"space-y-6",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{className:"text-xl font-semibold flex gap-2 items-center",children:[c(Z7,{className:"text-yellow-400"}),"AI Suggestions"]}),w("div",{className:"text-xs text-muted-foreground",children:["Generated: ",new Date(a).toLocaleString()]})]}),w("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[Object.entries(f).map(([m,x],g)=>!x||x.length===0?null:w("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm p-4 space-y-3 hover:shadow-md transition-all",children:[w("div",{className:"flex items-center justify-between",children:[w("div",{className:"font-semibold text-base flex items-center gap-2",children:[hLe[x[0].insight.type],m]}),w("div",{className:`text-xs px-2 py-1 rounded-full font-medium ${SW[x[0].insight.impact]}`,children:[x[0].insight.impact," Impact"]})]}),c("ul",{className:"space-y-2 text-sm text-gray-700",children:x.map((y,_)=>c("li",{className:"border-l-2 pl-3 border-gray-300",children:y.content},_))})]},g)),h.length>0&&w("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-sm p-4 space-y-3 col-span-full",children:[w("div",{className:"font-semibold text-base flex items-center gap-2",children:[c(Z7,{className:"text-purple-500"}),"General Suggestions"]}),c("ul",{className:"space-y-2 text-sm text-gray-700",children:h.map((m,x)=>w("li",{className:"flex justify-between items-start border-l-2 pl-3 border-gray-300",children:[c("span",{children:m.content}),c("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${SW[m.insight.impact]}`,children:m.insight.impact})]},x))})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var $S={};$S.version="0.18.5";var eae=1252,gLe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],OR={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},DR=function(e){gLe.indexOf(e)!=-1&&(eae=OR[0]=e)};function vLe(){DR(1252)}var Vu=function(e){DR(e)};function IR(){Vu(1200),vLe()}function AW(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function yLe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function tae(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var C2=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?yLe(e.slice(2)):t==254&&r==255?tae(e.slice(2)):t==65279?e.slice(1):e},Nb=function(t){return String.fromCharCode(t)},NW=function(t){return String.fromCharCode(t)},m8,Jp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cw(e){for(var t="",r=0,n=0,a=0,i=0,o=0,s=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),s=(n&15)<<2|a>>6,l=a&63,isNaN(n)?s=l=64:isNaN(a)&&(l=64),t+=Jp.charAt(i)+Jp.charAt(o)+Jp.charAt(s)+Jp.charAt(l);return t}function bc(e){var t="",r=0,n=0,a=0,i=0,o=0,s=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Jp.indexOf(e.charAt(u++)),o=Jp.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),s=Jp.indexOf(e.charAt(u++)),n=(o&15)<<4|s>>2,s!==64&&(t+=String.fromCharCode(n)),l=Jp.indexOf(e.charAt(u++)),a=(s&3)<<6|l,l!==64&&(t+=String.fromCharCode(a));return t}var Sn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Fh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function _m(e){return Sn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function kW(e){return Sn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var fc=function(t){return Sn?Fh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function B3(e){if(typeof ArrayBuffer>"u")return fc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Lm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function xLe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function RR(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return RR(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var $o=Sn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Fh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function wLe(e){for(var t=[],r=0,n=e.length+250,a=_m(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var s=e.charCodeAt(++i)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|s>>6&15|(o&3)<<4,a[r++]=128|s&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=_m(65535),n=65530)}return t.push(a.slice(0,r)),$o(t)}var fl=/\u0000/g,P2=/[\u0001-\u0006]/g;function d1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Hu(e,t){var r=""+e;return r.length>=t?r:Ei("0",t-r.length)+r}function MR(e,t){var r=""+e;return r.length>=t?r:Ei(" ",t-r.length)+r}function BS(e,t){var r=""+e;return r.length>=t?r:r+Ei(" ",t-r.length)}function _Le(e,t){var r=""+Math.round(e);return r.length>=t?r:Ei("0",t-r.length)+r}function bLe(e,t){var r=""+e;return r.length>=t?r:Ei("0",t-r.length)+r}var EW=Math.pow(2,32);function Iv(e,t){if(e>EW||e<-EW)return _Le(e,t);var r=Math.round(e);return bLe(r,t)}function US(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CW=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],JP=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SLe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Kr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},PW={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ALe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function qS(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,o=1,s=0,l=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),s=f*o+i,d=f*u+l,!(a-f<5e-8));)a=1/(a-f),i=o,o=s,l=u,u=d;if(d>t&&(u>t?(d=l,s=i):(d=u,s=o)),!r)return[0,n*s,d];var h=Math.floor(n*s/d);return[h,n*s-h*d,d]}function j0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,o=[],s={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(n+=1462),s.u>.9999&&(s.u=0,++a==86400&&(s.T=a=0,++n,++s.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=TLe(l,o))}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=a%60,a=Math.floor(a/60),s.M=a%60,a=Math.floor(a/60),s.H=a,s.q=i,s}var rae=new Date(1899,11,31,0,0,0),NLe=rae.getTime(),kLe=new Date(1900,2,1,0,0,0);function nae(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=kLe&&(r+=24*60*60*1e3),(r-(NLe+(e.getTimezoneOffset()-rae.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function FR(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ELe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function CLe(e){var t=e<0?12:11,r=FR(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function PLe(e){var t=FR(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function uw(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=CLe(e):t===10?r=e.toFixed(10).substr(0,12):r=PLe(e),FR(ELe(r.toUpperCase()))}function hg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):uw(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return au(14,nae(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function TLe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function OLe(e,t,r,n){var a="",i=0,o=0,s=r.y,l,u=0;switch(e){case 98:s=r.y+543;case 121:switch(t.length){case 1:case 2:l=s%100,u=2;break;default:l=s%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return JP[r.m-1][1];case 5:return JP[r.m-1][0];default:return JP[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return CW[r.q][0];default:return CW[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Hu(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(a=Hu(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=s,u=1;break}var d=u>0?Hu(l,u):"";return d}function Qp(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var aae=/%/g;function DLe(e,t,r){var n=t.replace(aae,""),a=t.length-n.length;return hh(e,n,r*Math.pow(10,2*a))+Ei("%",a)}function ILe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function iae(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+iae(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,l,u,d){return l+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var oae=/# (\?+)( ?)\/( ?)(\d+)/;function RLe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),o=a-i*n,s=n;return r+(i===0?"":""+i)+" "+(o===0?Ei(" ",e[1].length+1+e[4].length):MR(o,e[1].length)+e[2]+"/"+e[3]+Hu(s,e[4].length))}function MLe(e,t,r){return r+(t===0?"":""+t)+Ei(" ",e[1].length+2+e[4].length)}var sae=/^#*0*\.([0#]+)/,lae=/\).*[0#]/,cae=/\(###\) ###\\?-####/;function il(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function TW(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function OW(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function FLe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function LLe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Wc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lae)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Wc("n",n,r):"("+Wc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ILe(e,t,r);if(t.indexOf("%")!==-1)return DLe(e,t,r);if(t.indexOf("E")!==-1)return iae(t,r);if(t.charCodeAt(0)===36)return"$"+Wc(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,s,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Iv(l,t.length);if(t.match(/^[#?]+$/))return a=Iv(r,0),a==="0"&&(a=""),a.length>t.length?a:il(t.substr(0,t.length-a.length))+a;if(i=t.match(oae))return RLe(i,l,u);if(t.match(/^#+0+$/))return u+Iv(l,t.length-t.indexOf("0"));if(i=t.match(sae))return a=TW(r,i[1].length).replace(/^([^\.]+)$/,"$1."+il(i[1])).replace(/\.$/,"."+il(i[1])).replace(/\.(\d*)$/,function(x,g){return"."+g+Ei("0",il(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+TW(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Qp(Iv(l,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Wc(e,t,-r):Qp(""+(Math.floor(r)+FLe(r,i[1].length)))+"."+Hu(OW(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Wc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=d1(Wc(e,t.replace(/[\\-]/g,""),r)),o=0,d1(d1(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<a.length?a.charAt(o++):x==="0"?"0":""}));if(t.match(cae))return a=Wc(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),s=qS(l,Math.pow(10,o)-1,!1),a=""+u,d=hh("n",i[1],s[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=BS(s[2],o),d.length<i[4].length&&(d=il(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),s=qS(l,Math.pow(10,o)-1,!0),u+(s[0]||(s[1]?"":"0"))+" "+(s[1]?MR(s[1],o)+i[2]+"/"+i[3]+BS(s[2],o):Ei(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Iv(r,0),t.length<=a.length?a:il(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return il(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=OW(r,i[1].length),r<0?"-"+Wc(e,t,-r):Qp(LLe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Hu(0,3-x.length):"")+x})+"."+Hu(o,i[1].length);switch(t){case"###,##0.00":return Wc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Qp(Iv(l,0));return m!=="0"?u+m:"";case"###,###.00":return Wc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Wc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function jLe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function $Le(e,t,r){var n=t.replace(aae,""),a=t.length-n.length;return hh(e,n,r*Math.pow(10,2*a))+Ei("%",a)}function uae(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+uae(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,l,u,d){return l+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function $d(e,t,r){if(e.charCodeAt(0)===40&&!t.match(lae)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?$d("n",n,r):"("+$d("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return jLe(e,t,r);if(t.indexOf("%")!==-1)return $Le(e,t,r);if(t.indexOf("E")!==-1)return uae(t,r);if(t.charCodeAt(0)===36)return"$"+$d(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,s,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Hu(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:il(t.substr(0,t.length-a.length))+a;if(i=t.match(oae))return MLe(i,l,u);if(t.match(/^#+0+$/))return u+Hu(l,t.length-t.indexOf("0"));if(i=t.match(sae))return a=(""+r).replace(/^([^\.]+)$/,"$1."+il(i[1])).replace(/\.$/,"."+il(i[1])),a=a.replace(/\.(\d*)$/,function(x,g){return"."+g+Ei("0",il(i[1]).length-g.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Qp(""+l);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+$d(e,t,-r):Qp(""+r)+"."+Ei("0",i[1].length);if(i=t.match(/^#,#*,#0/))return $d(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=d1($d(e,t.replace(/[\\-]/g,""),r)),o=0,d1(d1(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return o<a.length?a.charAt(o++):x==="0"?"0":""}));if(t.match(cae))return a=$d(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),s=qS(l,Math.pow(10,o)-1,!1),a=""+u,d=hh("n",i[1],s[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=BS(s[2],o),d.length<i[4].length&&(d=il(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),s=qS(l,Math.pow(10,o)-1,!0),u+(s[0]||(s[1]?"":"0"))+" "+(s[1]?MR(s[1],o)+i[2]+"/"+i[3]+BS(s[2],o):Ei(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:il(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return il(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+$d(e,t,-r):Qp(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Hu(0,3-x.length):"")+x})+"."+Hu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Qp(""+l);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return $d(e,t.slice(0,t.lastIndexOf(".")),r)+il(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function hh(e,t,r){return(r|0)===r?$d(e,t,r):Wc(e,t,r)}function BLe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var dae=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _y(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":US(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(dae))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ULe(e,t,r,n){for(var a=[],i="",o=0,s="",l="t",u,d,f,h="H";o<e.length;)switch(s=e.charAt(o)){case"G":if(!US(e,o))throw new Error("unrecognized character "+s+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),x=m==="("||m===")"?m:"t";a[a.length]={t:x,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=j0(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},l=s,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":s=s.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=j0(t,r),u==null))return"";for(i=s;++o<e.length&&e.charAt(o).toLowerCase()===s;)i+=s;s==="m"&&l.toLowerCase()==="h"&&(s="M"),s==="h"&&(s=h),a[a.length]={t:s,v:i},l=s;break;case"A":case"a":case"":var g={t:s,v:s};if(u==null&&(u=j0(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(g.v=u.H>=12?"P":"A"),g.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(g.v=u.H>=12?"PM":"AM"),g.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(g.v=u.H>=12?"":""),g.t="T",o+=5,h="h"):(g.t="t",++o),u==null&&g.t==="T")return"";a[a.length]=g,l=s;break;case"[":for(i=s;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(dae)){if(u==null&&(u=j0(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",_y(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=s;++o<e.length&&(s=e.charAt(o))==="0";)i+=s;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=s;++o<e.length&&"0#?.,E+-%".indexOf(s=e.charAt(o))>-1;)i+=s;a[a.length]={t:"n",v:i};break;case"?":for(i=s;e.charAt(++o)===s;)i+=s;a[a.length]={t:s,v:i},l=s;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":s,v:s},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=s;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:s,v:s},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(s)===-1)throw new Error("unrecognized character "+s+" in "+e);a[a.length]={t:"t",v:s},++o;break}var y=0,_=0,b;for(o=a.length-1,l="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,l="h",y<1&&(y=1);break;case"s":(b=a[o].v.match(/\.0+$/))&&(_=Math.max(_,b[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=a[o].t;break;case"m":l==="s"&&(a[o].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&a[o].v.match(/[Hh]/)&&(y=1),y<2&&a[o].v.match(/[Mm]/)&&(y=2),y<3&&a[o].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",C;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=OLe(a[o].t.charCodeAt(0),a[o].v,u,_),a[o].t="t";break;case"n":case"?":for(C=o+1;a[C]!=null&&((s=a[C].t)==="?"||s==="D"||(s===" "||s==="t")&&a[C+1]!=null&&(a[C+1].t==="?"||a[C+1].t==="t"&&a[C+1].v==="/")||a[o].t==="("&&(s===" "||s==="n"||s===")")||s==="t"&&(a[C].v==="/"||a[C].v===" "&&a[C+1]!=null&&a[C+1].t=="?"));)a[o].v+=a[C].v,a[C]={v:"",t:";"},++C;S+=a[o].v,o=C-1;break;case"G":a[o].t="t",a[o].v=hg(t,r);break}var E="",O,T;if(S.length>0){S.charCodeAt(0)==40?(O=t<0&&S.charCodeAt(0)===45?-t:t,T=hh("n",S,O)):(O=t<0&&n>1?-t:t,T=hh("n",S,O),O<0&&a[0]&&a[0].t=="t"&&(T=T.substr(1),a[0].v="-"+a[0].v)),C=T.length-1;var M=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){M=o;break}var L=a.length;if(M===a.length&&T.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(C>=a[o].v.length-1?(C-=a[o].v.length,a[o].v=T.substr(C+1,a[o].v.length)):C<0?a[o].v="":(a[o].v=T.substr(0,C+1),C=-1),a[o].t="t",L=o);C>=0&&L<a.length&&(a[L].v=T.substr(0,C+1)+a[L].v)}else if(M!==a.length&&T.indexOf("E")===-1){for(C=T.indexOf(".")-1,o=M;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===M?a[o].v.indexOf(".")-1:a[o].v.length-1,E=a[o].v.substr(d+1);d>=0;--d)C>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(E=T.charAt(C--)+E);a[o].v=E,a[o].t="t",L=o}for(C>=0&&L<a.length&&(a[L].v=T.substr(0,C+1)+a[L].v),C=T.indexOf(".")+1,o=M;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==M)){for(d=a[o].v.indexOf(".")>-1&&o===M?a[o].v.indexOf(".")+1:0,E=a[o].v.substr(0,d);d<a[o].v.length;++d)C<T.length&&(E+=T.charAt(C++));a[o].v=E,a[o].t="t",L=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(O=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=hh(a[o].t,a[o].v,O),a[o].t="t");var z="";for(o=0;o!==a.length;++o)a[o]!=null&&(z+=a[o].v);return z}var DW=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function IW(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function qLe(e,t){var r=BLe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(DW),s=r[1].match(DW);return IW(t,o)?[n,r[0]]:IW(t,s)?[n,r[1]]:[n,r[o!=null&&s!=null?2:1]]}return[n,i]}function au(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Kr)[e],n==null&&(n=r.table&&r.table[PW[e]]||Kr[PW[e]]),n==null&&(n=ALe[e]||"General");break}if(US(n,0))return hg(t,r);t instanceof Date&&(t=nae(t,r.date1904));var a=qLe(n,t);if(US(a[1]))return hg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ULe(a[1],t,r,a[0])}function ph(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Kr[r]==null){t<0&&(t=r);continue}if(Kr[r]==e){t=r;break}}t<0&&(t=391)}return Kr[t]=e,t}function U3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&ph(e[t],t)}function by(){Kr=SLe()}var zLe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},fae=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function WLe(e){var t=typeof e=="number"?Kr[e]:e;return t=t.replace(fae,"(\\d+)"),new RegExp("^"+t+"$")}function VLe(e,t,r){var n=-1,a=-1,i=-1,o=-1,s=-1,l=-1;(t.match(fae)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":o=m;break;case"s":l=m;break;case"m":o>=0?s=m:a=m;break}}),l>=0&&s==-1&&a>=0&&(s=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&s==-1&&l==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var HLe=function(){var e={};e.version="1.2.0";function t(){for(var T=0,M=new Array(256),L=0;L!=256;++L)T=L,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,M[L]=T;return typeof Int32Array<"u"?new Int32Array(M):M}var r=t();function n(T){var M=0,L=0,z=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(z=0;z!=256;++z)P[z]=T[z];for(z=0;z!=256;++z)for(L=T[z],M=256+z;M<4096;M+=256)L=P[M]=L>>>8^T[L&255];var R=[];for(z=1;z!=16;++z)R[z-1]=typeof Int32Array<"u"?P.subarray(z*256,z*256+256):P.slice(z*256,z*256+256);return R}var a=n(r),i=a[0],o=a[1],s=a[2],l=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],x=a[9],g=a[10],y=a[11],_=a[12],b=a[13],S=a[14];function C(T,M){for(var L=M^-1,z=0,P=T.length;z<P;)L=L>>>8^r[(L^T.charCodeAt(z++))&255];return~L}function E(T,M){for(var L=M^-1,z=T.length-15,P=0;P<z;)L=S[T[P++]^L&255]^b[T[P++]^L>>8&255]^_[T[P++]^L>>16&255]^y[T[P++]^L>>>24]^g[T[P++]]^x[T[P++]]^m[T[P++]]^h[T[P++]]^f[T[P++]]^d[T[P++]]^u[T[P++]]^l[T[P++]]^s[T[P++]]^o[T[P++]]^i[T[P++]]^r[T[P++]];for(z+=15;P<z;)L=L>>>8^r[(L^T[P++])&255];return~L}function O(T,M){for(var L=M^-1,z=0,P=T.length,R=0,j=0;z<P;)R=T.charCodeAt(z++),R<128?L=L>>>8^r[(L^R)&255]:R<2048?(L=L>>>8^r[(L^(192|R>>6&31))&255],L=L>>>8^r[(L^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,j=T.charCodeAt(z++)&1023,L=L>>>8^r[(L^(240|R>>8&7))&255],L=L>>>8^r[(L^(128|R>>2&63))&255],L=L>>>8^r[(L^(128|j>>6&15|(R&3)<<4))&255],L=L>>>8^r[(L^(128|j&63))&255]):(L=L>>>8^r[(L^(224|R>>12&15))&255],L=L>>>8^r[(L^(128|R>>6&63))&255],L=L>>>8^r[(L^(128|R&63))&255]);return~L}return e.table=r,e.bstr=C,e.buf=E,e.str=O,e}(),Mr=function(){var t={};t.version="1.2.1";function r(le,xe){for(var ye=le.split("/"),be=xe.split("/"),Ae=0,Se=0,Ve=Math.min(ye.length,be.length);Ae<Ve;++Ae){if(Se=ye[Ae].length-be[Ae].length)return Se;if(ye[Ae]!=be[Ae])return ye[Ae]<be[Ae]?-1:1}return ye.length-be.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var xe=le.lastIndexOf("/");return xe===-1?le:le.slice(0,xe+1)}function a(le){if(le.charAt(le.length-1)=="/")return a(le.slice(0,-1));var xe=le.lastIndexOf("/");return xe===-1?le:le.slice(xe+1)}function i(le,xe){typeof xe=="string"&&(xe=new Date(xe));var ye=xe.getHours();ye=ye<<6|xe.getMinutes(),ye=ye<<5|xe.getSeconds()>>>1,le.write_shift(2,ye);var be=xe.getFullYear()-1980;be=be<<4|xe.getMonth()+1,be=be<<5|xe.getDate(),le.write_shift(2,be)}function o(le){var xe=le.read_shift(2)&65535,ye=le.read_shift(2)&65535,be=new Date,Ae=ye&31;ye>>>=5;var Se=ye&15;ye>>>=4,be.setMilliseconds(0),be.setFullYear(ye+1980),be.setMonth(Se-1),be.setDate(Ae);var Ve=xe&31;xe>>>=5;var ut=xe&63;return xe>>>=6,be.setHours(xe),be.setMinutes(ut),be.setSeconds(Ve<<1),be}function s(le){as(le,0);for(var xe={},ye=0;le.l<=le.length-4;){var be=le.read_shift(2),Ae=le.read_shift(2),Se=le.l+Ae,Ve={};switch(be){case 21589:ye=le.read_shift(1),ye&1&&(Ve.mtime=le.read_shift(4)),Ae>5&&(ye&2&&(Ve.atime=le.read_shift(4)),ye&4&&(Ve.ctime=le.read_shift(4))),Ve.mtime&&(Ve.mt=new Date(Ve.mtime*1e3));break}le.l=Se,xe[be]=Ve}return xe}var l;function u(){return l||(l={})}function d(le,xe){if(le[0]==80&&le[1]==75)return En(le,xe);if((le[0]|32)==109&&(le[1]|32)==105)return lt(le,xe);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var ye=3,be=512,Ae=0,Se=0,Ve=0,ut=0,et=0,it=[],Je=le.slice(0,512);as(Je,0);var Dt=f(Je);switch(ye=Dt[0],ye){case 3:be=512;break;case 4:be=4096;break;case 0:if(Dt[1]==0)return En(le,xe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}be!==512&&(Je=le.slice(0,be),as(Je,28));var Yt=le.slice(0,be);h(Je,ye);var or=Je.read_shift(4,"i");if(ye===3&&or!==0)throw new Error("# Directory Sectors: Expected 0 saw "+or);Je.l+=4,Ve=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),ut=Je.read_shift(4,"i"),Ae=Je.read_shift(4,"i"),et=Je.read_shift(4,"i"),Se=Je.read_shift(4,"i");for(var qt=-1,jt=0;jt<109&&(qt=Je.read_shift(4,"i"),!(qt<0));++jt)it[jt]=qt;var Zr=m(le,be);y(et,Se,Zr,be,it);var Fn=b(Zr,Ve,it,be);Fn[Ve].name="!Directory",Ae>0&&ut!==j&&(Fn[ut].name="!MiniFAT"),Fn[it[0]].name="!FAT",Fn.fat_addrs=it,Fn.ssz=be;var Qn={},Ba=[],Wl=[],Sc=[];S(Ve,Fn,Zr,Ba,Ae,Qn,Wl,ut),x(Wl,Sc,Ba),Ba.shift();var Vs={FileIndex:Wl,FullPaths:Sc};return xe&&xe.raw&&(Vs.raw={header:Yt,sectors:Zr}),Vs}function f(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(V,"Header Signature: "),le.l+=16;var xe=le.read_shift(2,"u");return[le.read_shift(2,"u"),xe]}function h(le,xe){var ye=9;switch(le.l+=2,ye=le.read_shift(2)){case 9:if(xe!=3)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(xe!=4)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function m(le,xe){for(var ye=Math.ceil(le.length/xe)-1,be=[],Ae=1;Ae<ye;++Ae)be[Ae-1]=le.slice(Ae*xe,(Ae+1)*xe);return be[ye-1]=le.slice(ye*xe),be}function x(le,xe,ye){for(var be=0,Ae=0,Se=0,Ve=0,ut=0,et=ye.length,it=[],Je=[];be<et;++be)it[be]=Je[be]=be,xe[be]=ye[be];for(;ut<Je.length;++ut)be=Je[ut],Ae=le[be].L,Se=le[be].R,Ve=le[be].C,it[be]===be&&(Ae!==-1&&it[Ae]!==Ae&&(it[be]=it[Ae]),Se!==-1&&it[Se]!==Se&&(it[be]=it[Se])),Ve!==-1&&(it[Ve]=be),Ae!==-1&&be!=it[be]&&(it[Ae]=it[be],Je.lastIndexOf(Ae)<ut&&Je.push(Ae)),Se!==-1&&be!=it[be]&&(it[Se]=it[be],Je.lastIndexOf(Se)<ut&&Je.push(Se));for(be=1;be<et;++be)it[be]===be&&(Se!==-1&&it[Se]!==Se?it[be]=it[Se]:Ae!==-1&&it[Ae]!==Ae&&(it[be]=it[Ae]));for(be=1;be<et;++be)if(le[be].type!==0){if(ut=be,ut!=it[ut])do ut=it[ut],xe[be]=xe[ut]+"/"+xe[be];while(ut!==0&&it[ut]!==-1&&ut!=it[ut]);it[be]=-1}for(xe[0]+="/",be=1;be<et;++be)le[be].type!==2&&(xe[be]+="/")}function g(le,xe,ye){for(var be=le.start,Ae=le.size,Se=[],Ve=be;ye&&Ae>0&&Ve>=0;)Se.push(xe.slice(Ve*R,Ve*R+R)),Ae-=R,Ve=P0(ye,Ve*4);return Se.length===0?Et(0):$o(Se).slice(0,le.size)}function y(le,xe,ye,be,Ae){var Se=j;if(le===j){if(xe!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Ve=ye[le],ut=(be>>>2)-1;if(!Ve)return;for(var et=0;et<ut&&(Se=P0(Ve,et*4))!==j;++et)Ae.push(Se);y(P0(Ve,be-4),xe-1,ye,be,Ae)}}function _(le,xe,ye,be,Ae){var Se=[],Ve=[];Ae||(Ae=[]);var ut=be-1,et=0,it=0;for(et=xe;et>=0;){Ae[et]=!0,Se[Se.length]=et,Ve.push(le[et]);var Je=ye[Math.floor(et*4/be)];if(it=et*4&ut,be<4+it)throw new Error("FAT boundary crossed: "+et+" 4 "+be);if(!le[Je])break;et=P0(le[Je],it)}return{nodes:Se,data:VW([Ve])}}function b(le,xe,ye,be){var Ae=le.length,Se=[],Ve=[],ut=[],et=[],it=be-1,Je=0,Dt=0,Yt=0,or=0;for(Je=0;Je<Ae;++Je)if(ut=[],Yt=Je+xe,Yt>=Ae&&(Yt-=Ae),!Ve[Yt]){et=[];var qt=[];for(Dt=Yt;Dt>=0;){qt[Dt]=!0,Ve[Dt]=!0,ut[ut.length]=Dt,et.push(le[Dt]);var jt=ye[Math.floor(Dt*4/be)];if(or=Dt*4&it,be<4+or)throw new Error("FAT boundary crossed: "+Dt+" 4 "+be);if(!le[jt]||(Dt=P0(le[jt],or),qt[Dt]))break}Se[Yt]={nodes:ut,data:VW([et])}}return Se}function S(le,xe,ye,be,Ae,Se,Ve,ut){for(var et=0,it=be.length?2:0,Je=xe[le].data,Dt=0,Yt=0,or;Dt<Je.length;Dt+=128){var qt=Je.slice(Dt,Dt+128);as(qt,64),Yt=qt.read_shift(2),or=zR(qt,0,Yt-it),be.push(or);var jt={name:or,type:qt.read_shift(1),color:qt.read_shift(1),L:qt.read_shift(4,"i"),R:qt.read_shift(4,"i"),C:qt.read_shift(4,"i"),clsid:qt.read_shift(16),state:qt.read_shift(4,"i"),start:0,size:0},Zr=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);Zr!==0&&(jt.ct=C(qt,qt.l-8));var Fn=qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2)+qt.read_shift(2);Fn!==0&&(jt.mt=C(qt,qt.l-8)),jt.start=qt.read_shift(4,"i"),jt.size=qt.read_shift(4,"i"),jt.size<0&&jt.start<0&&(jt.size=jt.type=0,jt.start=j,jt.name=""),jt.type===5?(et=jt.start,Ae>0&&et!==j&&(xe[et].name="!StreamData")):jt.size>=4096?(jt.storage="fat",xe[jt.start]===void 0&&(xe[jt.start]=_(ye,jt.start,xe.fat_addrs,xe.ssz)),xe[jt.start].name=jt.name,jt.content=xe[jt.start].data.slice(0,jt.size)):(jt.storage="minifat",jt.size<0?jt.size=0:et!==j&&jt.start!==j&&xe[et]&&(jt.content=g(jt,xe[et].data,(xe[ut]||{}).data))),jt.content&&as(jt.content,0),Se[or]=jt,Ve.push(jt)}}function C(le,xe){return new Date((cc(le,xe+4)/1e7*Math.pow(2,32)+cc(le,xe)/1e7-11644473600)*1e3)}function E(le,xe){return u(),d(l.readFileSync(le),xe)}function O(le,xe){var ye=xe&&xe.type;switch(ye||Sn&&Buffer.isBuffer(le)&&(ye="buffer"),ye||"base64"){case"file":return E(le,xe);case"base64":return d(fc(bc(le)),xe);case"binary":return d(fc(le),xe)}return d(le,xe)}function T(le,xe){var ye=xe||{},be=ye.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=be+"/",le.FileIndex[0]={name:be,type:5}),ye.CLSID&&(le.FileIndex[0].clsid=ye.CLSID),M(le)}function M(le){var xe="Sh33tJ5";if(!Mr.find(le,"/"+xe)){var ye=Et(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,le.FileIndex.push({name:xe,type:2,content:ye,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+xe),L(le)}}function L(le,xe){T(le);for(var ye=!1,be=!1,Ae=le.FullPaths.length-1;Ae>=0;--Ae){var Se=le.FileIndex[Ae];switch(Se.type){case 0:be?ye=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:be=!0,isNaN(Se.R*Se.L*Se.C)&&(ye=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(ye=!0);break;default:ye=!0;break}}if(!(!ye&&!xe)){var Ve=new Date(1987,1,19),ut=0,et=Object.create?Object.create(null):{},it=[];for(Ae=0;Ae<le.FullPaths.length;++Ae)et[le.FullPaths[Ae]]=!0,le.FileIndex[Ae].type!==0&&it.push([le.FullPaths[Ae],le.FileIndex[Ae]]);for(Ae=0;Ae<it.length;++Ae){var Je=n(it[Ae][0]);be=et[Je],be||(it.push([Je,{name:a(Je).replace("/",""),type:1,clsid:te,ct:Ve,mt:Ve,content:null}]),et[Je]=!0)}for(it.sort(function(or,qt){return r(or[0],qt[0])}),le.FullPaths=[],le.FileIndex=[],Ae=0;Ae<it.length;++Ae)le.FullPaths[Ae]=it[Ae][0],le.FileIndex[Ae]=it[Ae][1];for(Ae=0;Ae<it.length;++Ae){var Dt=le.FileIndex[Ae],Yt=le.FullPaths[Ae];if(Dt.name=a(Yt).replace("/",""),Dt.L=Dt.R=Dt.C=-(Dt.color=1),Dt.size=Dt.content?Dt.content.length:0,Dt.start=0,Dt.clsid=Dt.clsid||te,Ae===0)Dt.C=it.length>1?1:-1,Dt.size=0,Dt.type=5;else if(Yt.slice(-1)=="/"){for(ut=Ae+1;ut<it.length&&n(le.FullPaths[ut])!=Yt;++ut);for(Dt.C=ut>=it.length?-1:ut,ut=Ae+1;ut<it.length&&n(le.FullPaths[ut])!=n(Yt);++ut);Dt.R=ut>=it.length?-1:ut,Dt.type=1}else n(le.FullPaths[Ae+1]||"")==n(Yt)&&(Dt.R=Ae+1),Dt.type=2}}}function z(le,xe){var ye=xe||{};if(ye.fileType=="mad")return xt(le,ye);switch(L(le),ye.fileType){case"zip":return si(le,ye)}var be=function(or){for(var qt=0,jt=0,Zr=0;Zr<or.FileIndex.length;++Zr){var Fn=or.FileIndex[Zr];if(Fn.content){var Qn=Fn.content.length;Qn>0&&(Qn<4096?qt+=Qn+63>>6:jt+=Qn+511>>9)}}for(var Ba=or.FullPaths.length+3>>2,Wl=qt+7>>3,Sc=qt+127>>7,Vs=Wl+jt+Ba+Sc,xi=Vs+127>>7,Ac=xi<=109?0:Math.ceil((xi-109)/127);Vs+xi+Ac+127>>7>xi;)Ac=++xi<=109?0:Math.ceil((xi-109)/127);var Ua=[1,Ac,xi,Sc,Ba,jt,qt,0];return or.FileIndex[0].size=qt<<6,Ua[7]=(or.FileIndex[0].start=Ua[0]+Ua[1]+Ua[2]+Ua[3]+Ua[4]+Ua[5])+(Ua[6]+7>>3),Ua}(le),Ae=Et(be[7]<<9),Se=0,Ve=0;{for(Se=0;Se<8;++Se)Ae.write_shift(1,Z[Se]);for(Se=0;Se<8;++Se)Ae.write_shift(2,0);for(Ae.write_shift(2,62),Ae.write_shift(2,3),Ae.write_shift(2,65534),Ae.write_shift(2,9),Ae.write_shift(2,6),Se=0;Se<3;++Se)Ae.write_shift(2,0);for(Ae.write_shift(4,0),Ae.write_shift(4,be[2]),Ae.write_shift(4,be[0]+be[1]+be[2]+be[3]-1),Ae.write_shift(4,0),Ae.write_shift(4,4096),Ae.write_shift(4,be[3]?be[0]+be[1]+be[2]-1:j),Ae.write_shift(4,be[3]),Ae.write_shift(-4,be[1]?be[0]-1:j),Ae.write_shift(4,be[1]),Se=0;Se<109;++Se)Ae.write_shift(-4,Se<be[2]?be[1]+Se:-1)}if(be[1])for(Ve=0;Ve<be[1];++Ve){for(;Se<236+Ve*127;++Se)Ae.write_shift(-4,Se<be[2]?be[1]+Se:-1);Ae.write_shift(-4,Ve===be[1]-1?j:Ve+1)}var ut=function(or){for(Ve+=or;Se<Ve-1;++Se)Ae.write_shift(-4,Se+1);or&&(++Se,Ae.write_shift(-4,j))};for(Ve=Se=0,Ve+=be[1];Se<Ve;++Se)Ae.write_shift(-4,q.DIFSECT);for(Ve+=be[2];Se<Ve;++Se)Ae.write_shift(-4,q.FATSECT);ut(be[3]),ut(be[4]);for(var et=0,it=0,Je=le.FileIndex[0];et<le.FileIndex.length;++et)Je=le.FileIndex[et],Je.content&&(it=Je.content.length,!(it<4096)&&(Je.start=Ve,ut(it+511>>9)));for(ut(be[6]+7>>3);Ae.l&511;)Ae.write_shift(-4,q.ENDOFCHAIN);for(Ve=Se=0,et=0;et<le.FileIndex.length;++et)Je=le.FileIndex[et],Je.content&&(it=Je.content.length,!(!it||it>=4096)&&(Je.start=Ve,ut(it+63>>6)));for(;Ae.l&511;)Ae.write_shift(-4,q.ENDOFCHAIN);for(Se=0;Se<be[4]<<2;++Se){var Dt=le.FullPaths[Se];if(!Dt||Dt.length===0){for(et=0;et<17;++et)Ae.write_shift(4,0);for(et=0;et<3;++et)Ae.write_shift(4,-1);for(et=0;et<12;++et)Ae.write_shift(4,0);continue}Je=le.FileIndex[Se],Se===0&&(Je.start=Je.size?Je.start-1:j);var Yt=Se===0&&ye.root||Je.name;if(it=2*(Yt.length+1),Ae.write_shift(64,Yt,"utf16le"),Ae.write_shift(2,it),Ae.write_shift(1,Je.type),Ae.write_shift(1,Je.color),Ae.write_shift(-4,Je.L),Ae.write_shift(-4,Je.R),Ae.write_shift(-4,Je.C),Je.clsid)Ae.write_shift(16,Je.clsid,"hex");else for(et=0;et<4;++et)Ae.write_shift(4,0);Ae.write_shift(4,Je.state||0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(4,Je.start),Ae.write_shift(4,Je.size),Ae.write_shift(4,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(Je=le.FileIndex[Se],Je.size>=4096)if(Ae.l=Je.start+1<<9,Sn&&Buffer.isBuffer(Je.content))Je.content.copy(Ae,Ae.l,0,Je.size),Ae.l+=Je.size+511&-512;else{for(et=0;et<Je.size;++et)Ae.write_shift(1,Je.content[et]);for(;et&511;++et)Ae.write_shift(1,0)}for(Se=1;Se<le.FileIndex.length;++Se)if(Je=le.FileIndex[Se],Je.size>0&&Je.size<4096)if(Sn&&Buffer.isBuffer(Je.content))Je.content.copy(Ae,Ae.l,0,Je.size),Ae.l+=Je.size+63&-64;else{for(et=0;et<Je.size;++et)Ae.write_shift(1,Je.content[et]);for(;et&63;++et)Ae.write_shift(1,0)}if(Sn)Ae.l=Ae.length;else for(;Ae.l<Ae.length;)Ae.write_shift(1,0);return Ae}function P(le,xe){var ye=le.FullPaths.map(function(et){return et.toUpperCase()}),be=ye.map(function(et){var it=et.split("/");return it[it.length-(et.slice(-1)=="/"?2:1)]}),Ae=!1;xe.charCodeAt(0)===47?(Ae=!0,xe=ye[0].slice(0,-1)+xe):Ae=xe.indexOf("/")!==-1;var Se=xe.toUpperCase(),Ve=Ae===!0?ye.indexOf(Se):be.indexOf(Se);if(Ve!==-1)return le.FileIndex[Ve];var ut=!Se.match(P2);for(Se=Se.replace(fl,""),ut&&(Se=Se.replace(P2,"!")),Ve=0;Ve<ye.length;++Ve)if((ut?ye[Ve].replace(P2,"!"):ye[Ve]).replace(fl,"")==Se||(ut?be[Ve].replace(P2,"!"):be[Ve]).replace(fl,"")==Se)return le.FileIndex[Ve];return null}var R=64,j=-2,V="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],te="00000000000000000000000000000000",q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(le,xe,ye){u();var be=z(le,ye);l.writeFileSync(xe,be)}function U(le){for(var xe=new Array(le.length),ye=0;ye<le.length;++ye)xe[ye]=String.fromCharCode(le[ye]);return xe.join("")}function G(le,xe){var ye=z(le,xe);switch(xe&&xe.type||"buffer"){case"file":return u(),l.writeFileSync(xe.filename,ye),ye;case"binary":return typeof ye=="string"?ye:U(ye);case"base64":return cw(typeof ye=="string"?ye:U(ye));case"buffer":if(Sn)return Buffer.isBuffer(ye)?ye:Fh(ye);case"array":return typeof ye=="string"?fc(ye):ye}return ye}var J;function D(le){try{var xe=le.InflateRaw,ye=new xe;if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),ye.bytesRead)J=le;else throw new Error("zlib does not expose bytesRead")}catch(be){console.error("cannot use native zlib: "+(be.message||be))}}function K(le,xe){if(!J)return Xr(le,xe);var ye=J.InflateRaw,be=new ye,Ae=be._processChunk(le.slice(le.l),be._finishFlushFlag);return le.l+=be.bytesRead,Ae}function Q(le){return J?J.deflateRawSync(le):_t(le)}var ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(le){var xe=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(xe>>16|xe>>8|xe)&255}for(var X=typeof Uint8Array<"u",ue=X?new Uint8Array(256):[],de=0;de<256;++de)ue[de]=ie(de);function re(le,xe){var ye=ue[le&255];return xe<=8?ye>>>8-xe:(ye=ye<<8|ue[le>>8&255],xe<=16?ye>>>16-xe:(ye=ye<<8|ue[le>>16&255],ye>>>24-xe))}function ke(le,xe){var ye=xe&7,be=xe>>>3;return(le[be]|(ye<=6?0:le[be+1]<<8))>>>ye&3}function Re(le,xe){var ye=xe&7,be=xe>>>3;return(le[be]|(ye<=5?0:le[be+1]<<8))>>>ye&7}function Pe(le,xe){var ye=xe&7,be=xe>>>3;return(le[be]|(ye<=4?0:le[be+1]<<8))>>>ye&15}function ge(le,xe){var ye=xe&7,be=xe>>>3;return(le[be]|(ye<=3?0:le[be+1]<<8))>>>ye&31}function Ye(le,xe){var ye=xe&7,be=xe>>>3;return(le[be]|(ye<=1?0:le[be+1]<<8))>>>ye&127}function Qe(le,xe,ye){var be=xe&7,Ae=xe>>>3,Se=(1<<ye)-1,Ve=le[Ae]>>>be;return ye<8-be||(Ve|=le[Ae+1]<<8-be,ye<16-be)||(Ve|=le[Ae+2]<<16-be,ye<24-be)||(Ve|=le[Ae+3]<<24-be),Ve&Se}function st(le,xe,ye){var be=xe&7,Ae=xe>>>3;return be<=5?le[Ae]|=(ye&7)<<be:(le[Ae]|=ye<<be&255,le[Ae+1]=(ye&7)>>8-be),xe+3}function Pt(le,xe,ye){var be=xe&7,Ae=xe>>>3;return ye=(ye&1)<<be,le[Ae]|=ye,xe+1}function ft(le,xe,ye){var be=xe&7,Ae=xe>>>3;return ye<<=be,le[Ae]|=ye&255,ye>>>=8,le[Ae+1]=ye,xe+8}function _e(le,xe,ye){var be=xe&7,Ae=xe>>>3;return ye<<=be,le[Ae]|=ye&255,ye>>>=8,le[Ae+1]=ye&255,le[Ae+2]=ye>>>8,xe+16}function Te(le,xe){var ye=le.length,be=2*ye>xe?2*ye:xe+5,Ae=0;if(ye>=xe)return le;if(Sn){var Se=kW(be);if(le.copy)le.copy(Se);else for(;Ae<le.length;++Ae)Se[Ae]=le[Ae];return Se}else if(X){var Ve=new Uint8Array(be);if(Ve.set)Ve.set(le);else for(;Ae<ye;++Ae)Ve[Ae]=le[Ae];return Ve}return le.length=be,le}function qe(le){for(var xe=new Array(le),ye=0;ye<le;++ye)xe[ye]=0;return xe}function yt(le,xe,ye){var be=1,Ae=0,Se=0,Ve=0,ut=0,et=le.length,it=X?new Uint16Array(32):qe(32);for(Se=0;Se<32;++Se)it[Se]=0;for(Se=et;Se<ye;++Se)le[Se]=0;et=le.length;var Je=X?new Uint16Array(et):qe(et);for(Se=0;Se<et;++Se)it[Ae=le[Se]]++,be<Ae&&(be=Ae),Je[Se]=0;for(it[0]=0,Se=1;Se<=be;++Se)it[Se+16]=ut=ut+it[Se-1]<<1;for(Se=0;Se<et;++Se)ut=le[Se],ut!=0&&(Je[Se]=it[ut+16]++);var Dt=0;for(Se=0;Se<et;++Se)if(Dt=le[Se],Dt!=0)for(ut=re(Je[Se],be)>>be-Dt,Ve=(1<<be+4-Dt)-1;Ve>=0;--Ve)xe[ut|Ve<<Dt]=Dt&15|Se<<4;return be}var vt=X?new Uint16Array(512):qe(512),ht=X?new Uint16Array(32):qe(32);if(!X){for(var Ie=0;Ie<512;++Ie)vt[Ie]=0;for(Ie=0;Ie<32;++Ie)ht[Ie]=0}(function(){for(var le=[],xe=0;xe<32;xe++)le.push(5);yt(le,ht,32);var ye=[];for(xe=0;xe<=143;xe++)ye.push(8);for(;xe<=255;xe++)ye.push(9);for(;xe<=279;xe++)ye.push(7);for(;xe<=287;xe++)ye.push(8);yt(ye,vt,288)})();var Ze=function(){for(var xe=X?new Uint8Array(32768):[],ye=0,be=0;ye<fe.length-1;++ye)for(;be<fe[ye+1];++be)xe[be]=ye;for(;be<32768;++be)xe[be]=29;var Ae=X?new Uint8Array(259):[];for(ye=0,be=0;ye<se.length-1;++ye)for(;be<se[ye+1];++be)Ae[be]=ye;function Se(ut,et){for(var it=0;it<ut.length;){var Je=Math.min(65535,ut.length-it),Dt=it+Je==ut.length;for(et.write_shift(1,+Dt),et.write_shift(2,Je),et.write_shift(2,~Je&65535);Je-- >0;)et[et.l++]=ut[it++]}return et.l}function Ve(ut,et){for(var it=0,Je=0,Dt=X?new Uint16Array(32768):[];Je<ut.length;){var Yt=Math.min(65535,ut.length-Je);if(Yt<10){for(it=st(et,it,+(Je+Yt==ut.length)),it&7&&(it+=8-(it&7)),et.l=it/8|0,et.write_shift(2,Yt),et.write_shift(2,~Yt&65535);Yt-- >0;)et[et.l++]=ut[Je++];it=et.l*8;continue}it=st(et,it,+(Je+Yt==ut.length)+2);for(var or=0;Yt-- >0;){var qt=ut[Je];or=(or<<5^qt)&32767;var jt=-1,Zr=0;if((jt=Dt[or])&&(jt|=Je&-32768,jt>Je&&(jt-=32768),jt<Je))for(;ut[jt+Zr]==ut[Je+Zr]&&Zr<250;)++Zr;if(Zr>2){qt=Ae[Zr],qt<=22?it=ft(et,it,ue[qt+1]>>1)-1:(ft(et,it,3),it+=5,ft(et,it,ue[qt-23]>>5),it+=3);var Fn=qt<8?0:qt-4>>2;Fn>0&&(_e(et,it,Zr-se[qt]),it+=Fn),qt=xe[Je-jt],it=ft(et,it,ue[qt]>>3),it-=3;var Qn=qt<4?0:qt-2>>1;Qn>0&&(_e(et,it,Je-jt-fe[qt]),it+=Qn);for(var Ba=0;Ba<Zr;++Ba)Dt[or]=Je&32767,or=(or<<5^ut[Je])&32767,++Je;Yt-=Zr-1}else qt<=143?qt=qt+48:it=Pt(et,it,1),it=ft(et,it,ue[qt]),Dt[or]=Je&32767,++Je}it=ft(et,it,0)-1}return et.l=(it+7)/8|0,et.l}return function(et,it){return et.length<8?Se(et,it):Ve(et,it)}}();function _t(le){var xe=Et(50+Math.floor(le.length*1.1)),ye=Ze(le,xe);return xe.slice(0,ye)}var pt=X?new Uint16Array(32768):qe(32768),Pr=X?new Uint16Array(32768):qe(32768),Bt=X?new Uint16Array(128):qe(128),dr=1,Ir=1;function Tr(le,xe){var ye=ge(le,xe)+257;xe+=5;var be=ge(le,xe)+1;xe+=5;var Ae=Pe(le,xe)+4;xe+=4;for(var Se=0,Ve=X?new Uint8Array(19):qe(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],et=1,it=X?new Uint8Array(8):qe(8),Je=X?new Uint8Array(8):qe(8),Dt=Ve.length,Yt=0;Yt<Ae;++Yt)Ve[ae[Yt]]=Se=Re(le,xe),et<Se&&(et=Se),it[Se]++,xe+=3;var or=0;for(it[0]=0,Yt=1;Yt<=et;++Yt)Je[Yt]=or=or+it[Yt-1]<<1;for(Yt=0;Yt<Dt;++Yt)(or=Ve[Yt])!=0&&(ut[Yt]=Je[or]++);var qt=0;for(Yt=0;Yt<Dt;++Yt)if(qt=Ve[Yt],qt!=0){or=ue[ut[Yt]]>>8-qt;for(var jt=(1<<7-qt)-1;jt>=0;--jt)Bt[or|jt<<qt]=qt&7|Yt<<3}var Zr=[];for(et=1;Zr.length<ye+be;)switch(or=Bt[Ye(le,xe)],xe+=or&7,or>>>=3){case 16:for(Se=3+ke(le,xe),xe+=2,or=Zr[Zr.length-1];Se-- >0;)Zr.push(or);break;case 17:for(Se=3+Re(le,xe),xe+=3;Se-- >0;)Zr.push(0);break;case 18:for(Se=11+Ye(le,xe),xe+=7;Se-- >0;)Zr.push(0);break;default:Zr.push(or),et<or&&(et=or);break}var Fn=Zr.slice(0,ye),Qn=Zr.slice(ye);for(Yt=ye;Yt<286;++Yt)Fn[Yt]=0;for(Yt=be;Yt<30;++Yt)Qn[Yt]=0;return dr=yt(Fn,pt,286),Ir=yt(Qn,Pr,30),xe}function ha(le,xe){if(le[0]==3&&!(le[1]&3))return[_m(xe),2];for(var ye=0,be=0,Ae=kW(xe||1<<18),Se=0,Ve=Ae.length>>>0,ut=0,et=0;(be&1)==0;){if(be=Re(le,ye),ye+=3,be>>>1)be>>1==1?(ut=9,et=5):(ye=Tr(le,ye),ut=dr,et=Ir);else{ye&7&&(ye+=8-(ye&7));var it=le[ye>>>3]|le[(ye>>>3)+1]<<8;if(ye+=32,it>0)for(!xe&&Ve<Se+it&&(Ae=Te(Ae,Se+it),Ve=Ae.length);it-- >0;)Ae[Se++]=le[ye>>>3],ye+=8;continue}for(;;){!xe&&Ve<Se+32767&&(Ae=Te(Ae,Se+32767),Ve=Ae.length);var Je=Qe(le,ye,ut),Dt=be>>>1==1?vt[Je]:pt[Je];if(ye+=Dt&15,Dt>>>=4,(Dt>>>8&255)===0)Ae[Se++]=Dt;else{if(Dt==256)break;Dt-=257;var Yt=Dt<8?0:Dt-4>>2;Yt>5&&(Yt=0);var or=Se+se[Dt];Yt>0&&(or+=Qe(le,ye,Yt),ye+=Yt),Je=Qe(le,ye,et),Dt=be>>>1==1?ht[Je]:Pr[Je],ye+=Dt&15,Dt>>>=4;var qt=Dt<4?0:Dt-2>>1,jt=fe[Dt];for(qt>0&&(jt+=Qe(le,ye,qt),ye+=qt),!xe&&Ve<or&&(Ae=Te(Ae,or+100),Ve=Ae.length);Se<or;)Ae[Se]=Ae[Se-jt],++Se}}}return xe?[Ae,ye+7>>>3]:[Ae.slice(0,Se),ye+7>>>3]}function Xr(le,xe){var ye=le.slice(le.l||0),be=ha(ye,xe);return le.l+=be[1],be[0]}function Na(le,xe){if(le)typeof console<"u"&&console.error(xe);else throw new Error(xe)}function En(le,xe){var ye=le;as(ye,0);var be=[],Ae=[],Se={FileIndex:be,FullPaths:Ae};T(Se,{root:xe.root});for(var Ve=ye.length-4;(ye[Ve]!=80||ye[Ve+1]!=75||ye[Ve+2]!=5||ye[Ve+3]!=6)&&Ve>=0;)--Ve;ye.l=Ve+4,ye.l+=4;var ut=ye.read_shift(2);ye.l+=6;var et=ye.read_shift(4);for(ye.l=et,Ve=0;Ve<ut;++Ve){ye.l+=20;var it=ye.read_shift(4),Je=ye.read_shift(4),Dt=ye.read_shift(2),Yt=ye.read_shift(2),or=ye.read_shift(2);ye.l+=8;var qt=ye.read_shift(4),jt=s(ye.slice(ye.l+Dt,ye.l+Dt+Yt));ye.l+=Dt+Yt+or;var Zr=ye.l;ye.l=qt+4,pa(ye,it,Je,Se,jt),ye.l=Zr}return Se}function pa(le,xe,ye,be,Ae){le.l+=2;var Se=le.read_shift(2),Ve=le.read_shift(2),ut=o(le);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var et=le.read_shift(4),it=le.read_shift(4),Je=le.read_shift(4),Dt=le.read_shift(2),Yt=le.read_shift(2),or="",qt=0;qt<Dt;++qt)or+=String.fromCharCode(le[le.l++]);if(Yt){var jt=s(le.slice(le.l,le.l+Yt));(jt[21589]||{}).mt&&(ut=jt[21589].mt),((Ae||{})[21589]||{}).mt&&(ut=Ae[21589].mt)}le.l+=Yt;var Zr=le.slice(le.l,le.l+it);switch(Ve){case 8:Zr=K(le,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ve)}var Fn=!1;Se&8&&(et=le.read_shift(4),et==134695760&&(et=le.read_shift(4),Fn=!0),it=le.read_shift(4),Je=le.read_shift(4)),it!=xe&&Na(Fn,"Bad compressed size: "+xe+" != "+it),Je!=ye&&Na(Fn,"Bad uncompressed size: "+ye+" != "+Je),ma(be,or,Zr,{unsafe:!0,mt:ut})}function si(le,xe){var ye=xe||{},be=[],Ae=[],Se=Et(1),Ve=ye.compression?8:0,ut=0,et=0,it=0,Je=0,Dt=0,Yt=le.FullPaths[0],or=Yt,qt=le.FileIndex[0],jt=[],Zr=0;for(et=1;et<le.FullPaths.length;++et)if(or=le.FullPaths[et].slice(Yt.length),qt=le.FileIndex[et],!(!qt.size||!qt.content||or=="Sh33tJ5")){var Fn=Je,Qn=Et(or.length);for(it=0;it<or.length;++it)Qn.write_shift(1,or.charCodeAt(it)&127);Qn=Qn.slice(0,Qn.l),jt[Dt]=HLe.buf(qt.content,0);var Ba=qt.content;Ve==8&&(Ba=Q(Ba)),Se=Et(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,ut),Se.write_shift(2,Ve),qt.mt?i(Se,qt.mt):Se.write_shift(4,0),Se.write_shift(-4,jt[Dt]),Se.write_shift(4,Ba.length),Se.write_shift(4,qt.content.length),Se.write_shift(2,Qn.length),Se.write_shift(2,0),Je+=Se.length,be.push(Se),Je+=Qn.length,be.push(Qn),Je+=Ba.length,be.push(Ba),Se=Et(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,ut),Se.write_shift(2,Ve),Se.write_shift(4,0),Se.write_shift(-4,jt[Dt]),Se.write_shift(4,Ba.length),Se.write_shift(4,qt.content.length),Se.write_shift(2,Qn.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,Fn),Zr+=Se.l,Ae.push(Se),Zr+=Qn.length,Ae.push(Qn),++Dt}return Se=Et(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,Dt),Se.write_shift(2,Dt),Se.write_shift(4,Zr),Se.write_shift(4,Je),Se.write_shift(2,0),$o([$o(be),$o(Ae),Se])}var Cn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function kr(le,xe){if(le.ctype)return le.ctype;var ye=le.name||"",be=ye.match(/\.([^\.]+)$/);return be&&Cn[be[1]]||xe&&(be=(ye=xe).match(/[\.\\]([^\.\\])+$/),be&&Cn[be[1]])?Cn[be[1]]:"application/octet-stream"}function pn(le){for(var xe=cw(le),ye=[],be=0;be<xe.length;be+=76)ye.push(xe.slice(be,be+76));return ye.join(`\r
`)+`\r
`}function fo(le){var xe=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(it){var Je=it.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});xe=xe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),xe.charAt(0)==`
`&&(xe="=0D"+xe.slice(1)),xe=xe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ye=[],be=xe.split(`\r
`),Ae=0;Ae<be.length;++Ae){var Se=be[Ae];if(Se.length==0){ye.push("");continue}for(var Ve=0;Ve<Se.length;){var ut=76,et=Se.slice(Ve,Ve+ut);et.charAt(ut-1)=="="?ut--:et.charAt(ut-2)=="="?ut-=2:et.charAt(ut-3)=="="&&(ut-=3),et=Se.slice(Ve,Ve+ut),Ve+=ut,Ve<Se.length&&(et+="="),ye.push(et)}}return ye.join(`\r
`)}function Jn(le){for(var xe=[],ye=0;ye<le.length;++ye){for(var be=le[ye];ye<=le.length&&be.charAt(be.length-1)=="=";)be=be.slice(0,be.length-1)+le[++ye];xe.push(be)}for(var Ae=0;Ae<xe.length;++Ae)xe[Ae]=xe[Ae].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return fc(xe.join(`\r
`))}function li(le,xe,ye){for(var be="",Ae="",Se="",Ve,ut=0;ut<10;++ut){var et=xe[ut];if(!et||et.match(/^\s*$/))break;var it=et.match(/^(.*?):\s*([^\s].*)$/);if(it)switch(it[1].toLowerCase()){case"content-location":be=it[2].trim();break;case"content-type":Se=it[2].trim();break;case"content-transfer-encoding":Ae=it[2].trim();break}}switch(++ut,Ae.toLowerCase()){case"base64":Ve=fc(bc(xe.slice(ut).join("")));break;case"quoted-printable":Ve=Jn(xe.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ae)}var Je=ma(le,be.slice(ye.length),Ve,{unsafe:!0});Se&&(Je.ctype=Se)}function lt(le,xe){if(U(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ye=xe&&xe.root||"",be=(Sn&&Buffer.isBuffer(le)?le.toString("binary"):U(le)).split(`\r
`),Ae=0,Se="";for(Ae=0;Ae<be.length;++Ae)if(Se=be[Ae],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),ye||(ye=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=ye.slice(0,ye.length-1),ye=ye.slice(0,ye.lastIndexOf("/")+1),Se.slice(0,ye.length)!=ye););var Ve=(be[1]||"").match(/boundary="(.*?)"/);if(!Ve)throw new Error("MAD cannot find boundary");var ut="--"+(Ve[1]||""),et=[],it=[],Je={FileIndex:et,FullPaths:it};T(Je);var Dt,Yt=0;for(Ae=0;Ae<be.length;++Ae){var or=be[Ae];or!==ut&&or!==ut+"--"||(Yt++&&li(Je,be.slice(Dt,Ae),ye),Dt=Ae)}return Je}function xt(le,xe){var ye=xe||{},be=ye.boundary||"SheetJS";be="------="+be;for(var Ae=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+be.slice(2)+'"',"","",""],Se=le.FullPaths[0],Ve=Se,ut=le.FileIndex[0],et=1;et<le.FullPaths.length;++et)if(Ve=le.FullPaths[et].slice(Se.length),ut=le.FileIndex[et],!(!ut.size||!ut.content||Ve=="Sh33tJ5")){Ve=Ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Zr){return"_x"+Zr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Zr){return"_u"+Zr.charCodeAt(0).toString(16)+"_"});for(var it=ut.content,Je=Sn&&Buffer.isBuffer(it)?it.toString("binary"):U(it),Dt=0,Yt=Math.min(1024,Je.length),or=0,qt=0;qt<=Yt;++qt)(or=Je.charCodeAt(qt))>=32&&or<128&&++Dt;var jt=Dt>=Yt*4/5;Ae.push(be),Ae.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+Ve),Ae.push("Content-Transfer-Encoding: "+(jt?"quoted-printable":"base64")),Ae.push("Content-Type: "+kr(ut,Ve)),Ae.push(""),Ae.push(jt?fo(Je):pn(Je))}return Ae.push(be+`--\r
`),Ae.join(`\r
`)}function Fr(le){var xe={};return T(xe,le),xe}function ma(le,xe,ye,be){var Ae=be&&be.unsafe;Ae||T(le);var Se=!Ae&&Mr.find(le,xe);if(!Se){var Ve=le.FullPaths[0];xe.slice(0,Ve.length)==Ve?Ve=xe:(Ve.slice(-1)!="/"&&(Ve+="/"),Ve=(Ve+xe).replace("//","/")),Se={name:a(xe),type:2},le.FileIndex.push(Se),le.FullPaths.push(Ve),Ae||Mr.utils.cfb_gc(le)}return Se.content=ye,Se.size=ye?ye.length:0,be&&(be.CLSID&&(Se.clsid=be.CLSID),be.mt&&(Se.mt=be.mt),be.ct&&(Se.ct=be.ct)),Se}function bt(le,xe){T(le);var ye=Mr.find(le,xe);if(ye){for(var be=0;be<le.FileIndex.length;++be)if(le.FileIndex[be]==ye)return le.FileIndex.splice(be,1),le.FullPaths.splice(be,1),!0}return!1}function mt(le,xe,ye){T(le);var be=Mr.find(le,xe);if(be){for(var Ae=0;Ae<le.FileIndex.length;++Ae)if(le.FileIndex[Ae]==be)return le.FileIndex[Ae].name=a(ye),le.FullPaths[Ae]=ye,!0}return!1}function Jt(le){L(le,!0)}return t.find=P,t.read=O,t.parse=d,t.write=G,t.writeFile=Y,t.utils={cfb_new:Fr,cfb_add:ma,cfb_del:bt,cfb_mov:mt,cfb_gc:Jt,ReadShift:H2,CheckField:Rae,prep_blob:as,bconcat:$o,use_zlib:D,_deflateRaw:_t,_inflateRaw:Xr,consts:q},t}();function GLe(e){return typeof e=="string"?B3(e):Array.isArray(e)?xLe(e):e}function e_(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=B3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Xd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([GLe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(e);return s.open("w"),s.encoding="binary",Array.isArray(t)&&(t=Lm(t)),s.write(t),s.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function KLe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Di(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function RW(e,t){for(var r=[],n=Di(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function q3(e){for(var t=[],r=Di(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function z3(e){for(var t=[],r=Di(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function YLe(e){for(var t=[],r=Di(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var zS=new Date(1899,11,30,0,0,0);function _o(e,t){var r=e.getTime(),n=zS.getTime()+(e.getTimezoneOffset()-zS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var hae=new Date,XLe=zS.getTime()+(hae.getTimezoneOffset()-zS.getTimezoneOffset())*6e4,MW=hae.getTimezoneOffset();function W3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+XLe),t.getTimezoneOffset()!==MW&&t.setTime(t.getTime()+(t.getTimezoneOffset()-MW)*6e4),t}function ZLe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var FW=new Date("2017-02-19T19:06:09.000Z"),pae=isNaN(FW.getFullYear())?new Date("2/19/17"):FW,JLe=pae.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(JLe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(pae.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function pg(e,t){if(Sn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Xd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Xd(tae(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Xd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Xd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function ei(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ei(e[r]));return t}function Ei(e,t){for(var r="";r.length<t;)r+=e;return r}function Xu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var QLe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Q1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&QLe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var e9e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],s=1;s<i.length;++s)o.push(a),o.push(i[s]);return o}}();function mae(e){return e?e.content&&e.type?pg(e.content,!0):e.data?C2(e.data):e.asNodeBuffer&&Sn?C2(e.asNodeBuffer().toString("binary")):e.asBinary?C2(e.asBinary()):e._data&&e._data.getContent?C2(pg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function gae(e){if(!e)return null;if(e.data)return AW(e.data);if(e.asNodeBuffer&&Sn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?AW(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function t9e(e){return e&&e.name.slice(-4)===".bin"?gae(e):mae(e)}function Gc(e,t){for(var r=e.FullPaths||Di(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function LR(e,t){var r=Gc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function so(e,t,r){if(!r)return t9e(LR(e,t));if(!t)return null;try{return so(e,t)}catch{return null}}function hc(e,t,r){if(!r)return mae(LR(e,t));if(!t)return null;try{return hc(e,t)}catch{return null}}function r9e(e,t,r){return gae(LR(e,t))}function LW(e){for(var t=e.FullPaths||Di(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function _n(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Sn?n=Fh(r):n=wLe(r),Mr.utils.cfb_add(e,t,n)}Mr.utils.cfb_add(e,t,r)}else e.file(t,r)}function jR(){return Mr.utils.cfb_new()}function vae(e,t){switch(t.type){case"base64":return Mr.read(e,{type:"base64"});case"binary":return Mr.read(e,{type:"binary"});case"buffer":case"array":return Mr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function T2(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var to=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,n9e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,jW=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,a9e=/<[^>]*>/g,Ws=to.match(jW)?jW:a9e,i9e=/<\w*:/,o9e=/<(\/?)\w+:/;function an(e,t,r){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match(n9e),s=0,l="",u=0,d="",f="",h=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(d=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(h=(a=f.charCodeAt(i+1))==34||a==39?1:0,l=f.slice(i+1+h,f.length-h),s=0;s!=d.length&&d.charCodeAt(s)!==58;++s);if(s===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var m=(s===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(s+1);if(n[m]&&d.slice(s-3,s)=="ext")continue;n[m]=l,n[m.toLowerCase()]=l}}return n}function yf(e){return e.replace(o9e,"<$1")}var yae={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$R=q3(yae),Wn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(s,l){return yae[s]||String.fromCharCode(parseInt(l,s.indexOf("x")>-1?16:10))||s}).replace(t,function(s,l){return String.fromCharCode(parseInt(l,16))});var o=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,o)+r(a.slice(o+3))}}(),BR=/[&<>'"]/g,s9e=/[\u0000-\u0008\u000b-\u001f]/g;function _a(e){var t=e+"";return t.replace(BR,function(r){return $R[r]}).replace(s9e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function $W(e){return _a(e).replace(/ /g,"_x0020_")}var xae=/[\u0000-\u001f]/g;function UR(e){var t=e+"";return t.replace(BR,function(r){return $R[r]}).replace(/\n/g,"<br/>").replace(xae,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function l9e(e){var t=e+"";return t.replace(BR,function(r){return $R[r]}).replace(xae,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var BW=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function c9e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Xa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function QP(e){for(var t="",r=0,n=0,a=0,i=0,o=0,s=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}o=e.charCodeAt(r++),s=((n&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(s&1023))}return t}function UW(e){var t=_m(2*e.length),r,n,a=1,i=0,o=0,s;for(n=0;n<e.length;n+=a)a=1,(s=e.charCodeAt(n))<128?r=s:s<224?(r=(s&31)*64+(e.charCodeAt(n+1)&63),a=2):s<240?(r=(s&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(s&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function qW(e){return Fh(e,"binary").toString("utf8")}var kb="foo bar baz",Sa=Sn&&(qW(kb)==QP(kb)&&qW||UW(kb)==QP(kb)&&UW)||QP,Xd=Sn?function(e){return Fh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},dw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),wae=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),u9e=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),d9e=/<\/?(?:vt:)?variant>/g,f9e=/<(?:vt:)([^>]*)>([\s\S]*)</;function zW(e,t){var r=an(e),n=e.match(u9e(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(i){var o=i.replace(d9e,"").match(f9e);o&&a.push({v:Sa(o[2]),t:o[1]})}),a}var _ae=/(^\s|\s$|\n)/;function os(e,t){return"<"+e+(t.match(_ae)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function fw(e){return Di(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function tr(e,t,r){return"<"+e+(r!=null?fw(r):"")+(t!=null?(t.match(_ae)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function g8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function h9e(e,t){switch(typeof e){case"string":var r=tr("vt:lpwstr",_a(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return tr((e|0)==e?"vt:i4":"vt:r8",_a(String(e)));case"boolean":return tr("vt:bool",e?"true":"false")}if(e instanceof Date)return tr("vt:filetime",g8(e));throw new Error("Unable to serialize "+e)}function qR(e){if(Sn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Sa(Lm(RR(e)));throw new Error("Bad input format: expected Buffer or string")}var hw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,xo={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ig=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],lc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function p9e(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function m9e(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=n?-t:t;isFinite(o)?o==0?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var s=0;s<=5;++s,i/=256)e[r+s]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var WW=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},VW=Sn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Fh(t)})):WW(e)}:WW,HW=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(ch(e,a)));return n.join("").replace(fl,"")},zR=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(fl,""):HW(e,t,r)}:HW,GW=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},bae=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):GW(e,t,r)}:GW,KW=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Bv(e,a)));return n.join("")},t_=Sn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):KW(t,r,n)}:KW,Sae=function(e,t){var r=cc(e,t);return r>0?t_(e,t+4,t+4+r-1):""},Aae=Sae,Nae=function(e,t){var r=cc(e,t);return r>0?t_(e,t+4,t+4+r-1):""},kae=Nae,Eae=function(e,t){var r=2*cc(e,t);return r>0?t_(e,t+4,t+4+r-1):""},Cae=Eae,Pae=function(t,r){var n=cc(t,r);return n>0?zR(t,r+4,r+4+n):""},Tae=Pae,Oae=function(e,t){var r=cc(e,t);return r>0?t_(e,t+4,t+4+r):""},Dae=Oae,Iae=function(e,t){return p9e(e,t)},WS=Iae,WR=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Sn&&(Aae=function(t,r){if(!Buffer.isBuffer(t))return Sae(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},kae=function(t,r){if(!Buffer.isBuffer(t))return Nae(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Cae=function(t,r){if(!Buffer.isBuffer(t))return Eae(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Tae=function(t,r){if(!Buffer.isBuffer(t))return Pae(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Dae=function(t,r){if(!Buffer.isBuffer(t))return Oae(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},WS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Iae(t,r)},WR=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Bv=function(e,t){return e[t]},ch=function(e,t){return e[t+1]*256+e[t]},g9e=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},cc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},P0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},v9e=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function H2(e,t){var r="",n,a,i=[],o,s,l,u;switch(t){case"dbcs":if(u=this.l,Sn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(ch(this,u)),u+=2;e*=2;break;case"utf8":r=t_(this,this.l,this.l+e);break;case"utf16le":e*=2,r=zR(this,this.l,this.l+e);break;case"wstr":return H2.call(this,e,"dbcs");case"lpstr-ansi":r=Aae(this,this.l),e=4+cc(this,this.l);break;case"lpstr-cp":r=kae(this,this.l),e=4+cc(this,this.l);break;case"lpwstr":r=Cae(this,this.l),e=4+2*cc(this,this.l);break;case"lpp4":e=4+cc(this,this.l),r=Tae(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+cc(this,this.l),r=Dae(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Bv(this,this.l+e++))!==0;)i.push(Nb(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=ch(this,this.l+e))!==0;)i.push(Nb(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Bv(this,u),this.l=u+1,s=H2.call(this,e-l,o?"dbcs-cont":"sbcs-cont"),i.join("")+s;i.push(Nb(ch(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Bv(this,u),this.l=u+1,s=H2.call(this,e-l,o?"dbcs-cont":"sbcs-cont"),i.join("")+s;i.push(Nb(Bv(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Bv(this,this.l),this.l++,n;case 2:return n=(t==="i"?g9e:ch)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?P0:v9e)(this,this.l),this.l+=4,n):(a=cc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=WS(this,this.l):a=WS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=bae(this,this.l,e);break}}return this.l+=e,r}var y9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},x9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},w9e=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function _9e(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)w9e(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,y9e(this,t,this.l);break;case 8:if(n=8,r==="f"){m9e(this,t,this.l);break}case 16:break;case-4:n=4,x9e(this,t,this.l);break}return this.l+=n,this}function Rae(e,t){var r=bae(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function as(e,t){e.l=t,e.read_shift=H2,e.chk=Rae,e.write_shift=_9e}function zs(e,t){e.l+=t}function Et(e){var t=_m(e);return as(t,0),t}function Lh(e,t,r){if(e){var n,a,i;as(e,e.l||0);for(var o=e.length,s=0,l=0;e.l<o;){s=e.read_shift(1),s&128&&(s=(s&127)+((e.read_shift(1)&127)<<7));var u=xw[s]||xw[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;l=e.l+i;var d=u.f&&u.f(e,i,r);if(e.l=l,t(d,u,s))return}}}function $l(){var e=[],t=Sn?256:2048,r=function(u){var d=Et(u);return as(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),$o(e)},s=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:s,end:o,_bufs:e}}function It(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=xw[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var s=0;s!=4;++s)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&WR(r)&&e.push(r)}}function G2(e,t,r){var n=ei(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function YW(e,t,r){var n=ei(e);return n.s=G2(n.s,t.s,r),n.e=G2(n.e,t.s,r),n}function K2(e,t){if(e.cRel&&e.c<0)for(e=ei(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=ei(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=en(e);return!e.cRel&&e.cRel!=null&&(r=A9e(r)),!e.rRel&&e.rRel!=null&&(r=b9e(r)),r}function eT(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+vi(e.s.c)+":"+(e.e.cRel?"":"$")+vi(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ji(e.s.r)+":"+(e.e.rRel?"":"$")+Ji(e.e.r):K2(e.s,t.biff)+":"+K2(e.e,t.biff)}function VR(e){return parseInt(S9e(e),10)-1}function Ji(e){return""+(e+1)}function b9e(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function S9e(e){return e.replace(/\$(\d+)$/,"$1")}function HR(e){for(var t=N9e(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function vi(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function A9e(e){return e.replace(/^([A-Z])/,"$$$1")}function N9e(e){return e.replace(/^\$([A-Z])/,"$1")}function k9e(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function yi(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function en(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Bl(e){var t=e.indexOf(":");return t==-1?{s:yi(e),e:yi(e)}:{s:yi(e.slice(0,t)),e:yi(e.slice(t+1))}}function gn(e,t){return typeof t>"u"||typeof t=="number"?gn(e.s,e.e):(typeof e!="string"&&(e=en(e)),typeof t!="string"&&(t=en(t)),e==t?e:e+":"+t)}function Vn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function XW(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=au(e.z,r?_o(t):t)}catch{}try{return e.w=au((e.XF||{}).numFmtId||(r?14:0),r?_o(t):t)}catch{return""+t}}function kh(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?jh[e.v]||e.v:t==null?XW(e,e.v):XW(e,t))}function jm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Mae(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),o=0,s=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var l=typeof n.origin=="string"?yi(n.origin):n.origin;o=l.r,s=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Vn(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},x=o+f,g=s+h;if(u.s.r>x&&(u.s.r=x),u.s.c>g&&(u.s.c=g),u.e.r<x&&(u.e.r=x),u.e.c<g&&(u.e.c=g),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Kr[14],n.cellDates?(m.t="d",m.w=au(m.z,_o(m.v))):(m.t="n",m.v=_o(m.v),m.w=au(m.z,m.v))):m.t="s";if(a)i[x]||(i[x]=[]),i[x][g]&&i[x][g].z&&(m.z=i[x][g].z),i[x][g]=m;else{var y=en({c:g,r:x});i[y]&&i[y].z&&(m.z=i[y].z),i[y]=m}}}return u.s.c<1e7&&(i["!ref"]=gn(u)),i}function Sy(e,t){return Mae(null,e,t)}function E9e(e){return e.read_shift(4,"i")}function Zu(e,t){return t||(t=Et(4)),t.write_shift(4,e),t}function js(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Bo(e,t){var r=!1;return t==null&&(r=!0,t=Et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function C9e(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function P9e(e,t){return t||(t=Et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function GR(e,t){var r=e.l,n=e.read_shift(1),a=js(e),i=[],o={t:a,h:a};if((n&1)!==0){for(var s=e.read_shift(4),l=0;l!=s;++l)i.push(C9e(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function T9e(e,t){var r=!1;return t==null&&(r=!0,t=Et(15+4*e.t.length)),t.write_shift(1,0),Bo(e.t,t),r?t.slice(0,t.l):t}var O9e=GR;function D9e(e,t){var r=!1;return t==null&&(r=!0,t=Et(23+4*e.t.length)),t.write_shift(1,1),Bo(e.t,t),t.write_shift(4,1),P9e({},t),r?t.slice(0,t.l):t}function lu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Rg(e,t){return t==null&&(t=Et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Mg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Fg(e,t){return t==null&&(t=Et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var I9e=js,Fae=Bo;function KR(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function VS(e,t){var r=!1;return t==null&&(r=!0,t=Et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var R9e=js,v8=KR,YR=VS;function XR(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?WS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):P0(t,0)>>2;return r?a/100:a}function Lae(e,t){t==null&&(t=Et(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function jae(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function M9e(e,t){return t||(t=Et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Lg=jae,Ay=M9e;function Fs(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function mg(e,t){return(t||Et(8)).write_shift(8,e,"f")}function F9e(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),s=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=V0[a];u&&(t.rgb=mw(u));break;case 2:t.rgb=mw([o,s,l]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function HS(e,t){if(t||(t=Et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function L9e(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function j9e(e,t){t||(t=Et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function $ae(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function $9e(e){return $ae(e,1)}function B9e(e){return $ae(e,2)}var ZR=2,Ol=3,Eb=11,ZW=12,GS=19,Cb=64,U9e=65,q9e=71,z9e=4108,W9e=4126,Mo=80,Bae=81,V9e=[Mo,Bae],y8={1:{n:"CodePage",t:ZR},2:{n:"Category",t:Mo},3:{n:"PresentationFormat",t:Mo},4:{n:"ByteCount",t:Ol},5:{n:"LineCount",t:Ol},6:{n:"ParagraphCount",t:Ol},7:{n:"SlideCount",t:Ol},8:{n:"NoteCount",t:Ol},9:{n:"HiddenCount",t:Ol},10:{n:"MultimediaClipCount",t:Ol},11:{n:"ScaleCrop",t:Eb},12:{n:"HeadingPairs",t:z9e},13:{n:"TitlesOfParts",t:W9e},14:{n:"Manager",t:Mo},15:{n:"Company",t:Mo},16:{n:"LinksUpToDate",t:Eb},17:{n:"CharacterCount",t:Ol},19:{n:"SharedDoc",t:Eb},22:{n:"HyperlinksChanged",t:Eb},23:{n:"AppVersion",t:Ol,p:"version"},24:{n:"DigSig",t:U9e},26:{n:"ContentType",t:Mo},27:{n:"ContentStatus",t:Mo},28:{n:"Language",t:Mo},29:{n:"Version",t:Mo},255:{},2147483648:{n:"Locale",t:GS},2147483651:{n:"Behavior",t:GS},1919054434:{}},x8={1:{n:"CodePage",t:ZR},2:{n:"Title",t:Mo},3:{n:"Subject",t:Mo},4:{n:"Author",t:Mo},5:{n:"Keywords",t:Mo},6:{n:"Comments",t:Mo},7:{n:"Template",t:Mo},8:{n:"LastAuthor",t:Mo},9:{n:"RevNumber",t:Mo},10:{n:"EditTime",t:Cb},11:{n:"LastPrinted",t:Cb},12:{n:"CreatedDate",t:Cb},13:{n:"ModifiedDate",t:Cb},14:{n:"PageCount",t:Ol},15:{n:"WordCount",t:Ol},16:{n:"CharCount",t:Ol},17:{n:"Thumbnail",t:q9e},18:{n:"Application",t:Mo},19:{n:"DocSecurity",t:Ol},255:{},2147483648:{n:"Locale",t:GS},2147483651:{n:"Behavior",t:GS},1919054434:{}},JW={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},H9e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function G9e(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var K9e=G9e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),V0=ei(K9e),jh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Uae={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},w8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Pb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function JR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Y9e(e){var t=JR();if(!e||!e.match)return t;var r={};if((e.match(Ws)||[]).forEach(function(n){var a=an(n);switch(a[0].replace(i9e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[w8[a.ContentType]]!==void 0&&t[w8[a.ContentType]].push(a.PartName);break}}),t.xmlns!==xo.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function qae(e,t){var r=YLe(w8),n=[],a;n[n.length]=to,n[n.length]=tr("Types",null,{xmlns:xo.CT,"xmlns:xsd":xo.xsd,"xmlns:xsi":xo.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return tr("Default",null,{Extension:l[0],ContentType:l[1]})}));var i=function(l){e[l]&&e[l].length>0&&(a=e[l][0],n[n.length]=tr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Pb[l][t.bookType]||Pb[l].xlsx}))},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=tr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Pb[l][t.bookType]||Pb[l].xlsx})})},s=function(l){(e[l]||[]).forEach(function(u){n[n.length]=tr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return i("workbooks"),o("sheets"),o("charts"),s("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),o("metadata"),s("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Nn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function pw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Y2(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Ws)||[]).forEach(function(a){var i=an(a);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var s=i.TargetMode==="External"?i.Target:T2(i.Target,t);r[s]=o,n[i.Id]=o}}),r["!id"]=n,r}function f1(e){var t=[to,tr("Relationships",null,{xmlns:xo.RELS})];return Di(e["!id"]).forEach(function(r){t[t.length]=tr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function xa(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[Nn.HLINK,Nn.XPATH,Nn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var X9e="application/vnd.oasis.opendocument.spreadsheet";function Z9e(e,t){for(var r=qR(e),n,a;n=hw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=an(n[0],!1),a.path=="/"&&a.type!==X9e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function J9e(e){var t=[to];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function QW(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Q9e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function eje(e){var t=[to];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(QW(e[r][0],e[r][1])),t.push(Q9e("",e[r][0]));return t.push(QW("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function zae(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+$S.version+"</meta:generator></office:meta></office:document-meta>"}var tu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],tje=function(){for(var e=new Array(tu.length),t=0;t<tu.length;++t){var r=tu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Wae(e){var t={};e=Sa(e);for(var r=0;r<tu.length;++r){var n=tu[r],a=e.match(tje[r]);a!=null&&a.length>0&&(t[n[1]]=Wn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function tT(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=_a(t),n[n.length]=r?tr(e,t,r):os(e,t))}function Vae(e,t){var r=t||{},n=[to,tr("cp:coreProperties",null,{"xmlns:cp":xo.CORE_PROPS,"xmlns:dc":xo.dc,"xmlns:dcterms":xo.dcterms,"xmlns:dcmitype":xo.dcmitype,"xmlns:xsi":xo.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&tT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:g8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&tT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:g8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=tu.length;++i){var o=tu[i],s=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;s===!0?s="1":s===!1?s="0":typeof s=="number"&&(s=String(s)),s!=null&&tT(o[0],s,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var H0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Hae=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Gae(e,t,r,n){var a=[];if(typeof e=="string")a=zW(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(d){return{v:d}}));var o=typeof t=="string"?zW(t,n).map(function(d){return d.v}):t,s=0,l=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(l=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=o.slice(s,s+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=o.slice(s,s+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=o.slice(s,s+l);break}s+=l}}function rje(e,t,r){var n={};return t||(t={}),e=Sa(e),H0.forEach(function(a){var i=(e.match(dw(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Wn(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Gae(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Kae(e){var t=[],r=tr;return e||(e={}),e.Application="SheetJS",t[t.length]=to,t[t.length]=tr("Properties",null,{xmlns:xo.EXT_PROPS,"xmlns:vt":xo.vt}),H0.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=_a(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+_a(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var nje=/<[^>]+>[^<]*/g;function aje(e,t){var r={},n="",a=e.match(nje);if(a)for(var i=0;i!=a.length;++i){var o=a[i],s=an(o);switch(s[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Wn(s.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var l=o.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Wn(d);break;case"bool":r[n]=Xa(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Wn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,l)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Yae(e){var t=[to,tr("Properties",null,{xmlns:xo.CUST_PROPS,"xmlns:vt":xo.vt})];if(!e)return t.join("");var r=1;return Di(e).forEach(function(a){++r,t[t.length]=tr("property",h9e(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:_a(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var _8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},rT;function ije(e,t,r){rT||(rT=q3(_8)),t=rT[t]||t,e[t]=r}function oje(e,t){var r=[];return Di(_8).map(function(n){for(var a=0;a<tu.length;++a)if(tu[a][1]==n)return tu[a];for(a=0;a<H0.length;++a)if(H0[a][1]==n)return H0[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(os(_8[n[1]]||n[1],a))}}),tr("DocumentProperties",r.join(""),{xmlns:lc.o})}function sje(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Di(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<tu.length;++o)if(i==tu[o][1])return;for(o=0;o<H0.length;++o)if(i==H0[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var s=e[i],l="string";typeof s=="number"?(l="float",s=String(s)):s===!0||s===!1?(l="boolean",s=s?"1":"0"):s=String(s),a.push(tr($W(i),s,{"dt:dt":l}))}}),t&&Di(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],s="string";typeof o=="number"?(s="float",o=String(o)):o===!0||o===!1?(s="boolean",o=o?"1":"0"):o instanceof Date?(s="dateTime.tz",o=o.toISOString()):o=String(o),a.push(tr($W(i),o,{"dt:dt":s}))}}),"<"+n+' xmlns="'+lc.o+'">'+a.join("")+"</"+n+">"}function QR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function lje(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var o=Et(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Xae(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function Zae(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Jae(e,t,r){return t===31?Zae(e):Xae(e,t,r)}function b8(e,t,r){return Jae(e,t,r===!1?0:4)}function cje(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Jae(e,t,0)}function uje(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(fl,""),e.l-a&2&&(e.l+=2)}return r}function dje(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(fl,"");return r}function fje(e){var t=e.l,r=KS(e,Bae);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=KS(e,Ol);return[r,n]}function hje(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(fje(e));return r}function eV(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(fl,"").replace(P2,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Qae(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function pje(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function KS(e,t,r){var n=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==ZW&&n!==t&&V9e.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===ZW?n:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Xae(e,n,4).replace(fl,"");case 31:return Zae(e);case 64:return QR(e);case 65:return Qae(e);case 71:return pje(e);case 80:return b8(e,n,!i.raw).replace(fl,"");case 81:return cje(e,n).replace(fl,"");case 4108:return hje(e);case 4126:case 4127:return n==4127?uje(e):dje(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function tV(e,t){var r=Et(4),n=Et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Et(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=lje(t);break;case 31:case 80:for(n=Et(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return $o([r,n])}function rV(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],o=0,s=0,l=-1,u={};for(o=0;o!=a;++o){var d=e.read_shift(4),f=e.read_shift(4);i[o]=[d,f+r]}i.sort(function(b,S){return b[1]-S[1]});var h={};for(o=0;o!=a;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var x=t[i[o][0]];if(h[x.n]=KS(e,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Vu(s=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(i[o][0]===1){if(s=h.CodePage=KS(e,ZR),Vu(s),l!==-1){var g=e.l;e.l=i[l][1],u=eV(e,s),e.l=g}}else if(i[o][0]===0){if(s===0){l=o,e.l=i[o+1][1];continue}u=eV(e,s)}else{var y=u[i[o][0]],_;switch(e[e.l]){case 65:e.l+=4,_=Qae(e);break;case 30:e.l+=4,_=b8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,_=b8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,_=e.read_shift(4,"i");break;case 19:e.l+=4,_=e.read_shift(4);break;case 5:e.l+=4,_=e.read_shift(8,"f");break;case 11:e.l+=4,_=$i(e,4);break;case 64:e.l+=4,_=Qa(QR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[y]=_}}return e.l=r+n,h}var eie=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function mje(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function nV(e,t,r){var n=Et(8),a=[],i=[],o=8,s=0,l=Et(8),u=Et(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),i.push(l),a.push(u),o+=8+l.length,!t){u=Et(8),u.write_shift(4,0),a.unshift(u);var d=[Et(4)];for(d[0].write_shift(4,e.length),s=0;s<e.length;++s){var f=e[s][0];for(l=Et(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,s+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=$o(d),i.unshift(l),o+=8+l.length}for(s=0;s<e.length;++s)if(!(t&&!t[e[s][0]])&&!(eie.indexOf(e[s][0])>-1||Hae.indexOf(e[s][0])>-1)&&e[s][1]!=null){var h=e[s][1],m=0;if(t){m=+t[e[s][0]];var x=r[m];if(x.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}l=tV(x.t,h)}else{var y=mje(h);y==-1&&(y=31,h=String(h)),l=tV(y,h)}i.push(l),u=Et(8),u.write_shift(4,t?m:2+s),a.push(u),o+=8+l.length}var _=8*(i.length+1);for(s=0;s<i.length;++s)a[s].write_shift(4,_),_+=i[s].length;return n.write_shift(4,o),n.write_shift(4,i.length),$o([n].concat(a).concat(i))}function aV(e,t,r){var n=e.content;if(!n)return{};as(n,0);var a,i,o,s,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Mr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),s=n.read_shift(4),a===1&&s!==n.l)throw new Error("Length mismatch: "+s+" !== "+n.l);a===2&&(o=n.read_shift(16),l=n.read_shift(4));var f=rV(n,t),h={SystemIdentifier:u};for(var m in f)h[m]=f[m];if(h.FMTID=i,a===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=rV(n,null)}catch{}for(m in x)h[m]=x[m];return h.FMTID=[i,o],h}function iV(e,t,r,n,a,i){var o=Et(a?68:48),s=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Mr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var l=nV(e,r,n);if(s.push(l),a){var u=nV(a,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+l.length),s.push(u)}return $o(s)}function Mp(e,t){return e.read_shift(t),null}function gje(e,t){t||(t=Et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function vje(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function $i(e,t){return e.read_shift(t)===1}function ol(e,t){return t||(t=Et(2)),t.write_shift(2,+!!e),t}function lo(e){return e.read_shift(2,"u")}function Kc(e,t){return t||(t=Et(2)),t.write_shift(2,e),t}function tie(e,t){return vje(e,t,lo)}function yje(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function rie(e,t,r){return r||(r=Et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function r_(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function xje(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,i=1+(r&1),o=0,s,l={};a&&(o=e.read_shift(2)),n&&(s=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*o),n&&(e.l+=s),l.t=d,a||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function wje(e){var t=e.t||"",r=Et(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Et(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return $o(a)}function gg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function n_(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):gg(e,n,r)}function jg(e,t,r){if(r.biff>5)return n_(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function nie(e,t,r){return r||(r=Et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function _je(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function bje(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(fl,"");return n&&(e.l+=24),a}function Sje(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(fl,"");return r+o}function Aje(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return bje(e);case"0303000000000000c000000000000046":return Sje(e);default:throw new Error("Unsupported Moniker "+r)}}function Tb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(fl,""):"";return r}function oV(e,t){t||(t=Et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Nje(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,o,s,l,u="",d,f;a&16&&(i=Tb(e,r-e.l)),a&128&&(o=Tb(e,r-e.l)),(a&257)===257&&(s=Tb(e,r-e.l)),(a&257)===1&&(l=Aje(e,r-e.l)),a&8&&(u=Tb(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=QR(e)),e.l=r;var h=o||s||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var m={Target:h};return d&&(m.guid=d),f&&(m.time=f),i&&(m.Tooltip=i),m}function kje(e){var t=Et(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),oV(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var s=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(s.length+1)),r=0;r<s.length;++r)t.write_shift(2,s.charCodeAt(r));t.write_shift(2,0),i&8&&oV(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function aie(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function iie(e,t){var r=aie(e);return r[3]=0,r}function xf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function vg(e,t,r,n){return n||(n=Et(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Eje(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Cje(e,t,r){return t===0?"":jg(e,t,r)}function Pje(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,i,o]}function oie(e){var t=e.read_shift(2),r=XR(e);return[t,r]}function Tje(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=r_(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function V3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function sie(e,t){return t||(t=Et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function lie(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var Oje=lie;function cie(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Dje(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Ije(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ns(e){e.l+=2,e.l+=e.read_shift(2)}var Rje={0:Ns,4:Ns,5:Ns,6:Ns,7:Ije,8:Ns,9:Ns,10:Ns,11:Ns,12:Ns,13:Dje,14:Ns,15:Ns,16:Ns,17:Ns,18:Ns,19:Ns,20:Ns,21:cie};function Mje(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(Rje[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Ob(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function eM(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Et(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Fje(e,t){return t===0||e.read_shift(2),1200}function Lje(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=jg(e,0,r);return e.read_shift(t+n-e.l),a}function jje(e,t){var r=!t||t.biff==8,n=Et(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function $je(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Bje(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=r_(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:i,name:o}}function Uje(e,t){var r=!t||t.biff>=8?2:1,n=Et(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function qje(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),i=[],o=0;o!=a&&e.l<r;++o)i.push(xje(e));return i.Count=n,i.Unique=a,i}function zje(e,t){var r=Et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=wje(e[a]);var i=$o([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function Wje(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Vje(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Hje(e){var t=Eje(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Gje(e){return e.read_shift(2),e.read_shift(4)}function sV(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function Kje(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),s=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:i,CurTab:o,FirstTab:s,Selected:l,TabRatio:u}}function Yje(){var e=Et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Xje(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Zje(e){var t=Et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Jje(){}function Qje(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=r_(e,0,r),n}function e$e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Et(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function t$e(e){var t=xf(e);return t.isst=e.read_shift(4),t}function r$e(e,t,r,n){var a=Et(10);return vg(e,t,n,a),a.write_shift(4,r),a}function n$e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=xf(e);r.biff==2&&e.l++;var i=n_(e,n-e.l,r);return a.val=i,a}function a$e(e,t,r,n,a){var i=!a||a.biff==8,o=Et(8+ +i+(1+i)*r.length);return vg(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function i$e(e,t,r){var n=e.read_shift(2),a=jg(e,0,r);return[n,a]}function o$e(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var s$e=jg;function lV(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),o=e.read_shift(a),s=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:i,c:s},e:{r:o,c:l}}}function l$e(e,t){var r=t.biff==8||!t.biff?4:2,n=Et(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function c$e(e){var t=e.read_shift(2),r=e.read_shift(2),n=oie(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function u$e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(oie(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:i}}function d$e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:i}}function f$e(e,t,r,n){var a={},i=e.read_shift(4),o=e.read_shift(4),s=e.read_shift(4),l=e.read_shift(2);return a.patternType=H9e[s>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=s&127,a.icvBottom=s>>7&127,a.icvDiag=s>>14&127,a.dgDiag=s>>21&15,a.icvFore=l&127,a.icvBack=l>>7&127,a.fsxButton=l>>14&1),a}function h$e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=f$e(e,t,n.fStyle,r),n}function cV(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function p$e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function m$e(e){var t=Et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function uV(e,t,r){var n=xf(e);(r.biff==2||t==9)&&++e.l;var a=yje(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function g$e(e,t,r,n,a,i){var o=Et(8);return vg(e,t,n,o),rie(r,i,o),o}function v$e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=xf(e),a=Fs(e);return n.val=a,n}function y$e(e,t,r,n){var a=Et(14);return vg(e,t,n,a),mg(r,a),a}var dV=Cje;function x$e(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=gg(e,i),s=[];n>e.l;)s.push(n_(e));return[i,a,o,s]}function fV(e,t,r){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=Tje(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var w$e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hV(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),s=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=gg(e,o,r);a&32&&(u=w$e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||s===0||!(d>0)?[]:Mze(e,d,r,s);return{chKey:i,Name:u,itab:l,rgce:f}}function uie(e,t,r){if(r.biff<8)return _$e(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Pje(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function _$e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=r_(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function b$e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),i=gg(e,n,r),o=gg(e,a,r);return[i,o]}function S$e(e,t,r){var n=lie(e);e.l++;var a=e.read_shift(1);return t-=8,[Fze(e,t,r),a,n]}function pV(e,t,r){var n=Oje(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Ize(e,t,r)]}function A$e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function N$e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),s=jg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},s,o,i]}}function k$e(e,t,r){return N$e(e,t,r)}function E$e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(V3(e));return r}function C$e(e){var t=Et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)sie(e[r],t);return t}function P$e(e,t,r){if(r&&r.biff<8)return O$e(e,t,r);var n=cie(e),a=Mje(e,t-22,n[1]);return{cmo:n,ft:a}}var T$e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function O$e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((T$e[n]||zs)(e,t,r)),{cmo:[a,n,i],ft:o}}function D$e(e,t,r){var n=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=_je(e,6,r);var s=e.read_shift(2);e.read_shift(2),lo(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=gg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?s:2*s))break}if(a.length!==s&&a.length!==s*2)throw new Error("cchText: "+s+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function I$e(e,t){var r=V3(e);e.l+=16;var n=Nje(e,t-24);return[r,n]}function R$e(e){var t=Et(24),r=yi(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return $o([t,kje(e[1])])}function M$e(e,t){e.read_shift(2);var r=V3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(fl,""),[r,n]}function F$e(e){var t=e[1].Tooltip,r=Et(10+2*(t.length+1));r.write_shift(2,2048);var n=yi(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function L$e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=JW[r]||r,r=e.read_shift(2),t[1]=JW[r]||r,t}function j$e(e){return e||(e=Et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function $$e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(iie(e));return r}function B$e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(iie(e));return r}function U$e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function die(e,t,r){if(!r.cellStyles)return zs(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),s=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:o,ixfe:s,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function q$e(e,t){var r=Et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function z$e(e,t){var r={};return t<32||(e.l+=16,r.header=Fs(e),r.footer=Fs(e),e.l+=2),r}function W$e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function V$e(e){for(var t=Et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var H$e=xf,G$e=tie,K$e=n_;function Y$e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function X$e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=xf(e);++e.l;var a=jg(e,t-7,r);return n.t="str",n.val=a,n}function Z$e(e){var t=xf(e);++e.l;var r=Fs(e);return t.t="n",t.val=r,t}function J$e(e,t,r){var n=Et(15);return s_(n,e,t),n.write_shift(8,r,"f"),n}function Q$e(e){var t=xf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function eBe(e,t,r){var n=Et(9);return s_(n,e,t),n.write_shift(2,r),n}function tBe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function rBe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function nBe(e,t,r){var n=e.l+t,a=xf(e),i=e.read_shift(2),o=gg(e,i,r);return e.l=n,a.t="str",a.val=o,a}var aBe=[2,3,48,49,131,139,140,245],S8=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=q3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(s,l){var u=[],d=_m(1);switch(l.type){case"base64":d=fc(bc(s));break;case"binary":d=fc(s);break;case"buffer":case"array":d=s;break}as(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,y=521;f==2&&(g=d.read_shift(2)),d.l+=3,f!=2&&(g=d.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(y=d.read_shift(2));var _=d.read_shift(2),b=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(b=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var S=[],C={},E=Math.min(d.length,f==2?521:y-10-(m?264:0)),O=x?32:11;d.l<E&&d[d.l]!=13;)switch(C={},C.name=m8.utils.decode(b,d.slice(d.l,d.l+O)).replace(/[\u0000\r\n].*$/g,""),d.l+=O,C.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(C.offset=d.read_shift(4)),C.len=d.read_shift(1),f==2&&(C.offset=d.read_shift(2)),C.dec=d.read_shift(1),C.name.length&&S.push(C),f!=2&&(d.l+=x?13:14),C.type){case"B":(!m||C.len!=8)&&l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var T=0,M=0;for(u[0]=[],M=0;M!=S.length;++M)u[0][M]=S[M].name;for(;g-- >0;){if(d[d.l]===42){d.l+=_;continue}for(++d.l,u[++T]=[],M=0,M=0;M!=S.length;++M){var L=d.slice(d.l,d.l+S[M].len);d.l+=S[M].len,as(L,0);var z=m8.utils.decode(b,L);switch(S[M].type){case"C":z.trim().length&&(u[T][M]=z.replace(/\s+$/,""));break;case"D":z.length===8?u[T][M]=new Date(+z.slice(0,4),+z.slice(4,6)-1,+z.slice(6,8)):u[T][M]=z;break;case"F":u[T][M]=parseFloat(z.trim());break;case"+":case"I":u[T][M]=x?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(z.trim().toUpperCase()){case"Y":case"T":u[T][M]=!0;break;case"N":case"F":u[T][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+z+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[T][M]="##MEMO##"+(x?parseInt(z.trim(),10):L.read_shift(4));break;case"N":z=z.replace(/\u0000/g,"").trim(),z&&z!="."&&(u[T][M]=+z||0);break;case"@":u[T][M]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":u[T][M]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":u[T][M]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[T][M]=-L.read_shift(-8,"f");break;case"B":if(m&&S[M].len==8){u[T][M]=L.read_shift(8,"f");break}case"G":case"P":L.l+=S[M].len;break;case"0":if(S[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[M].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=S,u}function n(s,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Sy(r(s,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(s,l){try{return jm(n(s,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(s,l){var u=l||{};if(+u.codepage>=0&&Vu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=$l(),f=ZS(s,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),x=s["!cols"]||[],g=0,y=0,_=0,b=1;for(g=0;g<h.length;++g){if(((x[g]||{}).DBF||{}).name){h[g]=x[g].DBF.name,++_;continue}if(h[g]!=null){if(++_,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(y=0;y<1024;++y)if(h.indexOf(h[g]+"_"+y)==-1){h[g]+="_"+y;break}}}}var S=Vn(s["!ref"]),C=[],E=[],O=[];for(g=0;g<=S.e.c-S.s.c;++g){var T="",M="",L=0,z=[];for(y=0;y<m.length;++y)m[y][g]!=null&&z.push(m[y][g]);if(z.length==0||h[g]==null){C[g]="?";continue}for(y=0;y<z.length;++y){switch(typeof z[y]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=z[y]instanceof Date?"D":"C";break;default:M="C"}L=Math.max(L,String(z[y]).length),T=T&&T!=M?"C":M}L>250&&(L=250),M=((x[g]||{}).DBF||{}).type,M=="C"&&x[g].DBF.len>L&&(L=x[g].DBF.len),T=="B"&&M=="N"&&(T="N",O[g]=x[g].DBF.dec,L=x[g].DBF.len),E[g]=T=="C"||M=="N"?L:i[T]||0,b+=E[g],C[g]=T}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,m.length),P.write_shift(2,296+32*_),P.write_shift(2,b),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[eae]||3)<<8),g=0,y=0;g<h.length;++g)if(h[g]!=null){var R=d.next(32),j=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,j,"sbcs"),R.write_shift(1,C[g]=="?"?"C":C[g],"sbcs"),R.write_shift(4,y),R.write_shift(1,E[g]||i[C[g]]||0),R.write_shift(1,O[g]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),y+=E[g]||i[C[g]]||0}var V=d.next(264);for(V.write_shift(4,13),g=0;g<65;++g)V.write_shift(4,0);for(g=0;g<m.length;++g){var Z=d.next(b);for(Z.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(C[y]){case"L":Z.write_shift(1,m[g][y]==null?63:m[g][y]?84:70);break;case"B":Z.write_shift(8,m[g][y]||0,"f");break;case"N":var te="0";for(typeof m[g][y]=="number"&&(te=m[g][y].toFixed(O[y]||0)),_=0;_<E[y]-te.length;++_)Z.write_shift(1,32);Z.write_shift(1,te,"sbcs");break;case"D":m[g][y]?(Z.write_shift(4,("0000"+m[g][y].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(m[g][y].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+m[g][y].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var q=String(m[g][y]!=null?m[g][y]:"").slice(0,E[y]);for(Z.write_shift(1,q,"sbcs"),_=0;_<E[y]-q.length;++_)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),fie=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Di(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var x=e[m];return typeof x=="number"?NW(x):x},n=function(h,m,x){var g=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return g==59?h:NW(g)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return i(bc(h),m);case"binary":return i(h,m);case"buffer":return i(Sn&&Buffer.isBuffer(h)?h.toString("binary"):Lm(h),m);case"array":return i(pg(h),m)}throw new Error("Unrecognized type "+m.type)}function i(h,m){var x=h.split(/[\n\r]+/),g=-1,y=-1,_=0,b=0,S=[],C=[],E=null,O={},T=[],M=[],L=[],z=0,P;for(+m.codepage>=0&&Vu(+m.codepage);_!==x.length;++_){z=0;var R=x[_].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),j=R.replace(/;;/g,"\0").split(";").map(function(ae){return ae.replace(/\u0000/g,";")}),V=j[0],Z;if(R.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&C.push(R.slice(3).replace(/;;/g,";"));break;case"C":var te=!1,q=!1,Y=!1,U=!1,G=-1,J=-1;for(b=1;b<j.length;++b)switch(j[b].charAt(0)){case"A":break;case"X":y=parseInt(j[b].slice(1))-1,q=!0;break;case"Y":for(g=parseInt(j[b].slice(1))-1,q||(y=0),P=S.length;P<=g;++P)S[P]=[];break;case"K":Z=j[b].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Xu(Z))?isNaN(Q1(Z).getDate())||(Z=Qa(Z)):(Z=Xu(Z),E!==null&&_y(E)&&(Z=W3(Z))),te=!0;break;case"E":U=!0;var D=h1(j[b].slice(1),{r:g,c:y});S[g][y]=[S[g][y],D];break;case"S":Y=!0,S[g][y]=[S[g][y],"S5S"];break;case"G":break;case"R":G=parseInt(j[b].slice(1))-1;break;case"C":J=parseInt(j[b].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}if(te&&(S[g][y]&&S[g][y].length==2?S[g][y][0]=Z:S[g][y]=Z,E=null),Y){if(U)throw new Error("SYLK shared formula cannot have own formula");var K=G>-1&&S[G][J];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");S[g][y][1]=Tie(K[1],{r:g-G,c:y-J})}break;case"F":var Q=0;for(b=1;b<j.length;++b)switch(j[b].charAt(0)){case"X":y=parseInt(j[b].slice(1))-1,++Q;break;case"Y":for(g=parseInt(j[b].slice(1))-1,P=S.length;P<=g;++P)S[P]=[];break;case"M":z=parseInt(j[b].slice(1))/20;break;case"F":break;case"G":break;case"P":E=C[parseInt(j[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=j[b].slice(1).split(" "),P=parseInt(L[0],10);P<=parseInt(L[1],10);++P)z=parseInt(L[2],10),M[P-1]=z===0?{hidden:!0}:{wch:z},bm(M[P-1]);break;case"C":y=parseInt(j[b].slice(1))-1,M[y]||(M[y]={});break;case"R":g=parseInt(j[b].slice(1))-1,T[g]||(T[g]={}),z>0?(T[g].hpt=z,T[g].hpx=ty(z)):z===0&&(T[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}Q<1&&(E=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+R)}}return T.length>0&&(O["!rows"]=T),M.length>0&&(O["!cols"]=M),m&&m.sheetRows&&(S=S.slice(0,m.sheetRows)),[S,O]}function o(h,m){var x=a(h,m),g=x[0],y=x[1],_=Sy(g,m);return Di(y).forEach(function(b){_[b]=y[b]}),_}function s(h,m){return jm(o(h,m),m)}function l(h,m,x,g){var y="C;Y"+(x+1)+";X"+(g+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+oM(h.f,{r:x,c:g}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(h,m){m.forEach(function(x,g){var y="F;W"+(g+1)+" "+(g+1)+" ";x.hidden?y+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=gw(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=vw(x.wpx)),typeof x.wch=="number"&&(y+=Math.round(x.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function d(h,m){m.forEach(function(x,g){var y="F;";x.hidden?y+="M0;":x.hpt?y+="M"+20*x.hpt+";":x.hpx&&(y+="M"+20*yw(x.hpx)+";"),y.length>2&&h.push(y+"R"+(g+1))})}function f(h,m){var x=["ID;PWXL;N;E"],g=[],y=Vn(h["!ref"]),_,b=Array.isArray(h),S=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&u(x,h["!cols"]),h["!rows"]&&d(x,h["!rows"]),x.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var C=y.s.r;C<=y.e.r;++C)for(var E=y.s.c;E<=y.e.c;++E){var O=en({r:C,c:E});_=b?(h[C]||[])[E]:h[O],!(!_||_.v==null&&(!_.f||_.F))&&g.push(l(_,h,C,E))}return x.join(S)+S+g.join(S)+S+"E"+S}return{to_workbook:s,to_sheet:o,from_sheet:f}}(),hie=function(){function e(i,o){switch(o.type){case"base64":return t(bc(i),o);case"binary":return t(i,o);case"buffer":return t(Sn&&Buffer.isBuffer(i)?i.toString("binary"):Lm(i),o);case"array":return t(pg(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var s=i.split(`
`),l=-1,u=-1,d=0,f=[];d!==s.length;++d){if(s[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=s[d].trim().split(","),m=h[0],x=h[1];++d;for(var g=s[d]||"";(g.match(/["]/g)||[]).length&1&&d<s.length-1;)g+=`
`+s[++d];switch(g=g.trim(),+m){case-1:if(g==="BOT"){f[++l]=[],u=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?f[l][u]=!0:g==="FALSE"?f[l][u]=!1:isNaN(Xu(x))?isNaN(Q1(x).getDate())?f[l][u]=x:f[l][u]=Qa(x):f[l][u]=Xu(x),++u;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),f[l][u++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return Sy(e(i,o),o)}function n(i,o){return jm(r(i,o),o)}var a=function(){var i=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},o=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Vn(l["!ref"]),f,h=Array.isArray(l);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var g=en({r:m,c:x});if(f=h?(l[m]||[])[x]:l[g],!f){o(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,y,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=au(f.z||Kr[14],_o(Qa(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var _=`\r
`,b=u.join(_);return b}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),pie=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),x=-1,g=-1,y=0,_=[];y!==m.length;++y){var b=m[y].trim().split(":");if(b[0]==="cell"){var S=yi(b[1]);if(_.length<=S.r)for(x=_.length;x<=S.r;++x)_[x]||(_[x]=[]);switch(x=S.r,g=S.c,b[2]){case"t":_[x][g]=e(b[3]);break;case"v":_[x][g]=+b[3];break;case"vtf":var C=b[b.length-1];case"vtc":switch(b[3]){case"nl":_[x][g]=!!+b[4];break;default:_[x][g]=+b[4];break}b[2]=="vtf"&&(_[x][g]=[_[x][g],C])}}}return h&&h.sheetRows&&(_=_.slice(0,h.sheetRows)),_}function n(f,h){return Sy(r(f,h),h)}function a(f,h){return jm(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],x,g="",y=Bl(f["!ref"]),_=Array.isArray(f),b=y.s.r;b<=y.e.r;++b)for(var S=y.s.c;S<=y.e.c;++S)if(g=en({r:b,c:S}),x=_?(f[b]||[])[S]:f[g],!(!x||x.v==null||x.t==="z")){switch(m=["cell",g,"t"],x.t){case"s":case"str":m.push(t(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=t(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var C=_o(Qa(x.v));m[2]="vtc",m[3]="nd",m[4]=""+C,m[5]=x.w||au(x.z||Kr[14],C);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,o,s,o,u(f),l].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),ey=function(){function e(d,f,h,m,x){x.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(Xu(d))?isNaN(Q1(d).getDate())?f[h][m]=d:f[h][m]=Qa(d):f[h][m]=Xu(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var x=d.split(/[\r\n]/),g=x.length-1;g>=0&&x[g].length===0;)--g;for(var y=10,_=0,b=0;b<=g;++b)_=x[b].indexOf(" "),_==-1?_=x[b].length:_++,y=Math.max(y,_);for(b=0;b<=g;++b){m[b]=[];var S=0;for(e(x[b].slice(0,y).trim(),m,b,S,h),S=1;S<=(x[b].length-y)/10+1;++S)e(x[b].slice(y+(S-1)*10,y+S*10).trim(),m,b,S,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,x=0;m<d.length;++m)(x=d.charCodeAt(m))==34?h=!h:!h&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m]);if(!x.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&x.push([f[m],m])}return x.sort(function(g,y){return g[0]-y[0]||n[g[1]]-n[y[1]]}),r[x.pop()[1]]||44}function i(d,f){var h=f||{},m="",x=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var y=0,_=0,b=0,S=0,C=0,E=m.charCodeAt(0),O=!1,T=0,M=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var L=h.dateNF!=null?WLe(h.dateNF):null;function z(){var P=d.slice(S,C),R={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)R.t="z";else if(h.raw)R.t="s",R.v=P;else if(P.trim().length===0)R.t="s",R.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(R.t="s",R.v=P.slice(2,-1).replace(/""/g,'"')):xqe(P)?(R.t="n",R.f=P.slice(1)):(R.t="s",R.v=P);else if(P=="TRUE")R.t="b",R.v=!0;else if(P=="FALSE")R.t="b",R.v=!1;else if(!isNaN(b=Xu(P)))R.t="n",h.cellText!==!1&&(R.w=P),R.v=b;else if(!isNaN(Q1(P).getDate())||L&&P.match(L)){R.z=h.dateNF||Kr[14];var j=0;L&&P.match(L)&&(P=VLe(P,h.dateNF,P.match(L)||[]),j=1),h.cellDates?(R.t="d",R.v=Qa(P,j)):(R.t="n",R.v=_o(Qa(P,j))),h.cellText!==!1&&(R.w=au(R.z,R.v instanceof Date?_o(R.v):R.v)),h.cellNF||delete R.z}else R.t="s",R.v=P;if(R.t=="z"||(h.dense?(x[y]||(x[y]=[]),x[y][_]=R):x[en({c:_,r:y})]=R),S=C+1,M=d.charCodeAt(S),g.e.c<_&&(g.e.c=_),g.e.r<y&&(g.e.r=y),T==E)++_;else if(_=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;C<d.length;++C)switch(T=d.charCodeAt(C)){case 34:M===34&&(O=!O);break;case E:case 10:case 13:if(!O&&z())break e;break}return C-S>0&&z(),x["!ref"]=gn(g),x}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):Sy(t(d,f),f)}function s(d,f){var h="",m=f.type=="string"?[0,0,0,0]:pM(d,f);switch(f.type){case"base64":h=bc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):(f.codepage,h=Sn&&Buffer.isBuffer(d)?d.toString("binary"):Lm(d));break;case"array":h=pg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=Sa(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Sa(h):f.type=="binary",h.slice(0,19)=="socialcalc:version:"?pie.to_sheet(f.type=="string"?h:Sa(h),f):o(h,f)}function l(d,f){return jm(s(d,f),f)}function u(d){for(var f=[],h=Vn(d["!ref"]),m,x=Array.isArray(d),g=h.s.r;g<=h.e.r;++g){for(var y=[],_=h.s.c;_<=h.e.c;++_){var b=en({r:g,c:_});if(m=x?(d[g]||[])[_]:d[b],!m||m.v==null){y.push("          ");continue}for(var S=(m.w||(kh(m),m.w)||"").slice(0,10);S.length<10;)S+=" ";y.push(S+(_===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:s,from_sheet:u}}();function iBe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=fie.to_workbook(e,r);return r.WTF=n,a}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return ey.to_workbook(e,t)}}var G0=function(){function e(D,K,Q){if(D){as(D,D.l||0);for(var ae=Q.Enum||G;D.l<D.length;){var se=D.read_shift(2),fe=ae[se]||ae[65535],ie=D.read_shift(2),X=D.l+ie,ue=fe.f&&fe.f(D,ie,Q);if(D.l=X,K(ue,fe,se))return}}}function t(D,K){switch(K.type){case"base64":return r(fc(bc(D)),K);case"binary":return r(fc(D),K);case"buffer":case"array":return r(D,K)}throw"Unsupported type "+K.type}function r(D,K){if(!D)return D;var Q=K||{},ae=Q.dense?[]:{},se="Sheet1",fe="",ie=0,X={},ue=[],de=[],re={s:{r:0,c:0},e:{r:0,c:0}},ke=Q.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)Q.Enum=G,e(D,function(Ye,Qe,st){switch(st){case 0:Q.vers=Ye,Ye>=4096&&(Q.qpro=!0);break;case 6:re=Ye;break;case 204:Ye&&(fe=Ye);break;case 222:fe=Ye;break;case 15:case 51:Q.qpro||(Ye[1].v=Ye[1].v.slice(1));case 13:case 14:case 16:st==14&&(Ye[2]&112)==112&&(Ye[2]&15)>1&&(Ye[2]&15)<15&&(Ye[1].z=Q.dateNF||Kr[14],Q.cellDates&&(Ye[1].t="d",Ye[1].v=W3(Ye[1].v))),Q.qpro&&Ye[3]>ie&&(ae["!ref"]=gn(re),X[se]=ae,ue.push(se),ae=Q.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},ie=Ye[3],se=fe||"Sheet"+(ie+1),fe="");var Pt=Q.dense?(ae[Ye[0].r]||[])[Ye[0].c]:ae[en(Ye[0])];if(Pt){Pt.t=Ye[1].t,Pt.v=Ye[1].v,Ye[1].z!=null&&(Pt.z=Ye[1].z),Ye[1].f!=null&&(Pt.f=Ye[1].f);break}Q.dense?(ae[Ye[0].r]||(ae[Ye[0].r]=[]),ae[Ye[0].r][Ye[0].c]=Ye[1]):ae[en(Ye[0])]=Ye[1];break}},Q);else if(D[2]==26||D[2]==14)Q.Enum=J,D[2]==14&&(Q.qpro=!0,D.l=0),e(D,function(Ye,Qe,st){switch(st){case 204:se=Ye;break;case 22:Ye[1].v=Ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ye[3]>ie&&(ae["!ref"]=gn(re),X[se]=ae,ue.push(se),ae=Q.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},ie=Ye[3],se="Sheet"+(ie+1)),ke>0&&Ye[0].r>=ke)break;Q.dense?(ae[Ye[0].r]||(ae[Ye[0].r]=[]),ae[Ye[0].r][Ye[0].c]=Ye[1]):ae[en(Ye[0])]=Ye[1],re.e.c<Ye[0].c&&(re.e.c=Ye[0].c),re.e.r<Ye[0].r&&(re.e.r=Ye[0].r);break;case 27:Ye[14e3]&&(de[Ye[14e3][0]]=Ye[14e3][1]);break;case 1537:de[Ye[0]]=Ye[1],Ye[0]==ie&&(se=Ye[1]);break}},Q);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(ae["!ref"]=gn(re),X[fe||se]=ae,ue.push(fe||se),!de.length)return{SheetNames:ue,Sheets:X};for(var Re={},Pe=[],ge=0;ge<de.length;++ge)X[ue[ge]]?(Pe.push(de[ge]||ue[ge]),Re[de[ge]]=X[de[ge]]||X[ue[ge]]):(Pe.push(de[ge]),Re[de[ge]]={"!ref":"A1"});return{SheetNames:Pe,Sheets:Re}}function n(D,K){var Q=K||{};if(+Q.codepage>=0&&Vu(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK1 to JS string");var ae=$l(),se=Vn(D["!ref"]),fe=Array.isArray(D),ie=[];rr(ae,0,i(1030)),rr(ae,6,l(se));for(var X=Math.min(se.e.r,8191),ue=se.s.r;ue<=X;++ue)for(var de=Ji(ue),re=se.s.c;re<=se.e.c;++re){ue===se.s.r&&(ie[re]=vi(re));var ke=ie[re]+de,Re=fe?(D[ue]||[])[re]:D[ke];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?rr(ae,13,m(ue,re,Re.v)):rr(ae,14,g(ue,re,Re.v));else{var Pe=kh(Re);rr(ae,15,f(ue,re,Pe.slice(0,239)))}}return rr(ae,1),ae.end()}function a(D,K){var Q=K||{};if(+Q.codepage>=0&&Vu(+Q.codepage),Q.type=="string")throw new Error("Cannot write WK3 to JS string");var ae=$l();rr(ae,0,o(D));for(var se=0,fe=0;se<D.SheetNames.length;++se)(D.Sheets[D.SheetNames[se]]||{})["!ref"]&&rr(ae,27,U(D.SheetNames[se],fe++));var ie=0;for(se=0;se<D.SheetNames.length;++se){var X=D.Sheets[D.SheetNames[se]];if(!(!X||!X["!ref"])){for(var ue=Vn(X["!ref"]),de=Array.isArray(X),re=[],ke=Math.min(ue.e.r,8191),Re=ue.s.r;Re<=ke;++Re)for(var Pe=Ji(Re),ge=ue.s.c;ge<=ue.e.c;++ge){Re===ue.s.r&&(re[ge]=vi(ge));var Ye=re[ge]+Pe,Qe=de?(X[Re]||[])[ge]:X[Ye];if(!(!Qe||Qe.t=="z"))if(Qe.t=="n")rr(ae,23,z(Re,ge,ie,Qe.v));else{var st=kh(Qe);rr(ae,22,T(Re,ge,ie,st.slice(0,239)))}}++ie}}return rr(ae,1),ae.end()}function i(D){var K=Et(2);return K.write_shift(2,D),K}function o(D){var K=Et(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var Q=0,ae=0,se=0,fe=0;fe<D.SheetNames.length;++fe){var ie=D.SheetNames[fe],X=D.Sheets[ie];if(!(!X||!X["!ref"])){++se;var ue=Bl(X["!ref"]);Q<ue.e.r&&(Q=ue.e.r),ae<ue.e.c&&(ae=ue.e.c)}}return Q>8191&&(Q=8191),K.write_shift(2,Q),K.write_shift(1,se),K.write_shift(1,ae),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function s(D,K,Q){var ae={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&Q.qpro?(ae.s.c=D.read_shift(1),D.l++,ae.s.r=D.read_shift(2),ae.e.c=D.read_shift(1),D.l++,ae.e.r=D.read_shift(2),ae):(ae.s.c=D.read_shift(2),ae.s.r=D.read_shift(2),K==12&&Q.qpro&&(D.l+=2),ae.e.c=D.read_shift(2),ae.e.r=D.read_shift(2),K==12&&Q.qpro&&(D.l+=2),ae.s.c==65535&&(ae.s.c=ae.e.c=ae.s.r=ae.e.r=0),ae)}function l(D){var K=Et(8);return K.write_shift(2,D.s.c),K.write_shift(2,D.s.r),K.write_shift(2,D.e.c),K.write_shift(2,D.e.r),K}function u(D,K,Q){var ae=[{c:0,r:0},{t:"n",v:0},0,0];return Q.qpro&&Q.vers!=20768?(ae[0].c=D.read_shift(1),ae[3]=D.read_shift(1),ae[0].r=D.read_shift(2),D.l+=2):(ae[2]=D.read_shift(1),ae[0].c=D.read_shift(2),ae[0].r=D.read_shift(2)),ae}function d(D,K,Q){var ae=D.l+K,se=u(D,K,Q);if(se[1].t="s",Q.vers==20768){D.l++;var fe=D.read_shift(1);return se[1].v=D.read_shift(fe,"utf8"),se}return Q.qpro&&D.l++,se[1].v=D.read_shift(ae-D.l,"cstr"),se}function f(D,K,Q){var ae=Et(7+Q.length);ae.write_shift(1,255),ae.write_shift(2,K),ae.write_shift(2,D),ae.write_shift(1,39);for(var se=0;se<ae.length;++se){var fe=Q.charCodeAt(se);ae.write_shift(1,fe>=128?95:fe)}return ae.write_shift(1,0),ae}function h(D,K,Q){var ae=u(D,K,Q);return ae[1].v=D.read_shift(2,"i"),ae}function m(D,K,Q){var ae=Et(7);return ae.write_shift(1,255),ae.write_shift(2,K),ae.write_shift(2,D),ae.write_shift(2,Q,"i"),ae}function x(D,K,Q){var ae=u(D,K,Q);return ae[1].v=D.read_shift(8,"f"),ae}function g(D,K,Q){var ae=Et(13);return ae.write_shift(1,255),ae.write_shift(2,K),ae.write_shift(2,D),ae.write_shift(8,Q,"f"),ae}function y(D,K,Q){var ae=D.l+K,se=u(D,K,Q);if(se[1].v=D.read_shift(8,"f"),Q.qpro)D.l=ae;else{var fe=D.read_shift(2);C(D.slice(D.l,D.l+fe),se),D.l+=fe}return se}function _(D,K,Q){var ae=K&32768;return K&=-32769,K=(ae?D:0)+(K>=8192?K-16384:K),(ae?"":"$")+(Q?vi(K):Ji(K))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(D,K){as(D,0);for(var Q=[],ae=0,se="",fe="",ie="",X="";D.l<D.length;){var ue=D[D.l++];switch(ue){case 0:Q.push(D.read_shift(8,"f"));break;case 1:fe=_(K[0].c,D.read_shift(2),!0),se=_(K[0].r,D.read_shift(2),!1),Q.push(fe+se);break;case 2:{var de=_(K[0].c,D.read_shift(2),!0),re=_(K[0].r,D.read_shift(2),!1);fe=_(K[0].c,D.read_shift(2),!0),se=_(K[0].r,D.read_shift(2),!1),Q.push(de+re+":"+fe+se)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:Q.push("("+Q.pop()+")");break;case 5:Q.push(D.read_shift(2));break;case 6:{for(var ke="";ue=D[D.l++];)ke+=String.fromCharCode(ue);Q.push('"'+ke.replace(/"/g,'""')+'"')}break;case 8:Q.push("-"+Q.pop());break;case 23:Q.push("+"+Q.pop());break;case 22:Q.push("NOT("+Q.pop()+")");break;case 20:case 21:X=Q.pop(),ie=Q.pop(),Q.push(["AND","OR"][ue-20]+"("+ie+","+X+")");break;default:if(ue<32&&S[ue])X=Q.pop(),ie=Q.pop(),Q.push(ie+S[ue]+X);else if(b[ue]){if(ae=b[ue][1],ae==69&&(ae=D[D.l++]),ae>Q.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+Q.join("|")+"|");return}var Re=Q.slice(-ae);Q.length-=ae,Q.push(b[ue][0]+"("+Re.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}Q.length==1?K[1].f=""+Q[0]:console.error("WK1 bad formula parse |"+Q.join("|")+"|")}function E(D){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=D.read_shift(2),K[3]=D[D.l++],K[0].c=D[D.l++],K}function O(D,K){var Q=E(D);return Q[1].t="s",Q[1].v=D.read_shift(K-4,"cstr"),Q}function T(D,K,Q,ae){var se=Et(6+ae.length);se.write_shift(2,D),se.write_shift(1,Q),se.write_shift(1,K),se.write_shift(1,39);for(var fe=0;fe<ae.length;++fe){var ie=ae.charCodeAt(fe);se.write_shift(1,ie>=128?95:ie)}return se.write_shift(1,0),se}function M(D,K){var Q=E(D);Q[1].v=D.read_shift(2);var ae=Q[1].v>>1;if(Q[1].v&1)switch(ae&7){case 0:ae=(ae>>3)*5e3;break;case 1:ae=(ae>>3)*500;break;case 2:ae=(ae>>3)/20;break;case 3:ae=(ae>>3)/200;break;case 4:ae=(ae>>3)/2e3;break;case 5:ae=(ae>>3)/2e4;break;case 6:ae=(ae>>3)/16;break;case 7:ae=(ae>>3)/64;break}return Q[1].v=ae,Q}function L(D,K){var Q=E(D),ae=D.read_shift(4),se=D.read_shift(4),fe=D.read_shift(2);if(fe==65535)return ae===0&&se===3221225472?(Q[1].t="e",Q[1].v=15):ae===0&&se===3489660928?(Q[1].t="e",Q[1].v=42):Q[1].v=0,Q;var ie=fe&32768;return fe=(fe&32767)-16446,Q[1].v=(1-ie*2)*(se*Math.pow(2,fe+32)+ae*Math.pow(2,fe)),Q}function z(D,K,Q,ae){var se=Et(14);if(se.write_shift(2,D),se.write_shift(1,Q),se.write_shift(1,K),ae==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var fe=0,ie=0,X=0,ue=0;return ae<0&&(fe=1,ae=-ae),ie=Math.log2(ae)|0,ae/=Math.pow(2,ie-31),ue=ae>>>0,(ue&2147483648)==0&&(ae/=2,++ie,ue=ae>>>0),ae-=ue,ue|=2147483648,ue>>>=0,ae*=Math.pow(2,32),X=ae>>>0,se.write_shift(4,X),se.write_shift(4,ue),ie+=16383+(fe?32768:0),se.write_shift(2,ie),se}function P(D,K){var Q=L(D);return D.l+=K-14,Q}function R(D,K){var Q=E(D),ae=D.read_shift(4);return Q[1].v=ae>>6,Q}function j(D,K){var Q=E(D),ae=D.read_shift(8,"f");return Q[1].v=ae,Q}function V(D,K){var Q=j(D);return D.l+=K-10,Q}function Z(D,K){return D[D.l+K-1]==0?D.read_shift(K,"cstr"):""}function te(D,K){var Q=D[D.l++];Q>K-1&&(Q=K-1);for(var ae="";ae.length<Q;)ae+=String.fromCharCode(D[D.l++]);return ae}function q(D,K,Q){if(!(!Q.qpro||K<21)){var ae=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var se=D.read_shift(K-21,"cstr");return[ae,se]}}function Y(D,K){for(var Q={},ae=D.l+K;D.l<ae;){var se=D.read_shift(2);if(se==14e3){for(Q[se]=[0,""],Q[se][0]=D.read_shift(2);D[D.l];)Q[se][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return Q}function U(D,K){var Q=Et(5+D.length);Q.write_shift(2,14e3),Q.write_shift(2,K);for(var ae=0;ae<D.length;++ae){var se=D.charCodeAt(ae);Q[Q.l++]=se>127?95:se}return Q[Q.l++]=0,Q}var G={0:{n:"BOF",f:lo},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:te},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:O},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function oBe(e){var t={},r=e.match(Ws),n=0,a=!1;if(r)for(;n!=r.length;++n){var i=an(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=OR[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var sBe=function(){var e=dw("t"),t=dw("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var s={t:"s",v:Wn(o[1])},l=i.match(t);return l&&(s.s=oBe(l[1])),s}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(s){return s.v})}}(),lBe=function(){var t=/(\r\n|\n)/g;function r(a,i,o){var s=[];a.u&&s.push("text-decoration: underline;"),a.uval&&s.push("text-underline-style:"+a.uval+";"),a.sz&&s.push("font-size:"+a.sz+"pt;"),a.outline&&s.push("text-effect: outline;"),a.shadow&&s.push("text-shadow: auto;"),i.push('<span style="'+s.join("")+'">'),a.b&&(i.push("<b>"),o.push("</b>")),a.i&&(i.push("<i>"),o.push("</i>")),a.strike&&(i.push("<s>"),o.push("</s>"));var l=a.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(i.push("<"+l+">"),o.push("</"+l+">")),o.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),cBe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,uBe=/<(?:\w+:)?r>/,dBe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function tM(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Wn(Sa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Sa(e),r&&(n.h=UR(n.t))):e.match(uBe)&&(n.r=Sa(e),n.t=Wn(Sa((e.replace(dBe,"").match(cBe)||[]).join("").replace(Ws,""))),r&&(n.h=lBe(sBe(n.r)))),n):{t:""}}var fBe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,hBe=/<(?:\w+:)?(?:si|sstItem)>/g,pBe=/<\/(?:\w+:)?(?:si|sstItem)>/;function mBe(e,t){var r=[],n="";if(!e)return r;var a=e.match(fBe);if(a){n=a[2].replace(hBe,"").split(pBe);for(var i=0;i!=n.length;++i){var o=tM(n[i].trim(),t);o!=null&&(r[r.length]=o)}a=an(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var gBe=/^\s|\s$|[\t\n\r]/;function mie(e,t){if(!t.bookSST)return"";var r=[to];r[r.length]=tr("sst",null,{xmlns:Ig[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(gBe)&&(i+=' xml:space="preserve"'),i+=">"+_a(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function vBe(e){return[e.read_shift(4),e.read_shift(4)]}function yBe(e,t){var r=[],n=!1;return Lh(e,function(i,o,s){switch(s){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}}),r}function xBe(e,t){return t||(t=Et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var wBe=T9e;function _Be(e){var t=$l();It(t,159,xBe(e));for(var r=0;r<e.length;++r)It(t,19,wBe(e[r]));return It(t,160),t.end()}function gie(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function mh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function bBe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=mh(e,4),t.U=mh(e,4),t.W=mh(e,4),t}function SBe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function ABe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(SBe(e));return t}function NBe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function kBe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=mh(e,4),t.U=mh(e,4),t.W=mh(e,4),t}function EBe(e){var t=kBe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function vie(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function yie(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function CBe(e){var t=mh(e);switch(t.Minor){case 2:return[t.Minor,PBe(e)];case 3:return[t.Minor,TBe()];case 4:return[t.Minor,OBe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function PBe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=vie(e,r),a=yie(e,e.length-e.l);return{t:"Std",h:n,v:a}}function TBe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function OBe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Ws,function(i){var o=an(i);switch(yf(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(s){n[s]=o[s]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function DBe(e,t){var r={},n=r.EncryptionVersionInfo=mh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=vie(e,a),t-=a,r.EncryptionVerifier=yie(e,t),r}function IBe(e){var t={},r=t.EncryptionVersionInfo=mh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function rM(e){var t=0,r,n=gie(e),a=n.length+1,i,o,s,l,u;for(r=_m(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)o=r[i],s=(t&16384)===0?0:1,l=t<<1&32767,u=s|l,t=u^o;return t^52811}var xie=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,s){return n(o^s)},i=function(o){for(var s=t[o.length-1],l=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(s^=r[l]),d*=2,--l;return s};return function(o){for(var s=gie(o),l=i(s),u=s.length,d=_m(16),f=0;f!=16;++f)d[f]=0;var h,m,x;for((u&1)===1&&(h=l>>8,d[u]=a(e[0],h),--u,h=l&255,m=s[s.length-1],d[u]=a(m,h));u>0;)--u,h=l>>8,d[u]=a(s[u],h),--u,h=l&255,d[u]=a(s[u],h);for(u=15,x=15-s.length;x>0;)h=l>>8,d[u]=a(e[x],h),--u,--x,h=l&255,d[u]=a(s[u],h),--u,--x;return d}}(),RBe=function(e,t,r,n,a){a||(a=t),n||(n=xie(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,a[i]=o,++r;return[a,r,n]},MBe=function(e){var t=0,r=xie(e);return function(n){var a=RBe("",n,t,r);return t=a[1],a[0]}};function FBe(e,t,r,n){var a={key:lo(e),verificationBytes:lo(e)};return r.password&&(a.verifier=rM(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=MBe(r.password)),a}function LBe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=IBe(e):n.Data=DBe(e,t),n}function jBe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?LBe(e,t-2,n):FBe(e,r.biff>=8?t:t-2,r,n),n}var wie=function(){function e(a,i){switch(i.type){case"base64":return t(bc(a),i);case"binary":return t(a,i);case"buffer":return t(Sn&&Buffer.isBuffer(a)?a.toString("binary"):Lm(a),i);case"array":return t(pg(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var o=i||{},s=o.dense?[]:{},l=a.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(s)&&(s[f]=[]);for(var h=/\\\w+\b/g,m=0,x,g=-1;x=h.exec(d);){switch(x[0]){case"\\cell":var y=d.slice(m,h.lastIndex-x[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var _={v:y,t:"s"};Array.isArray(s)?s[f][g]=_:s[en({r:f,c:g})]=_}break}m=h.lastIndex}g>u.e.c&&(u.e.c=g)}),s["!ref"]=gn(u),s}function r(a,i){return jm(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],o=Vn(a["!ref"]),s,l=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=en({r:u,c:d});s=l?(a[u]||[])[d]:a[f],!(!s||s.v==null&&(!s.f||s.F))&&(i.push(" "+(s.w||(kh(s),s.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function $Be(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function mw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function BBe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),i=Math.min(t,r,n),o=a-i;if(o===0)return[0,0,t];var s=0,l=0,u=a+i;switch(l=o/(u>1?2-u:u),a){case t:s=((r-n)/o+6)%6;break;case r:s=(n-t)/o+2;break;case n:s=(t-r)/o+4;break}return[s/6,l,u/2]}function UBe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),i=n-a/2,o=[i,i,i],s=6*t,l;if(r!==0)switch(s|0){case 0:case 6:l=a*s,o[0]+=a,o[1]+=l;break;case 1:l=a*(2-s),o[0]+=l,o[1]+=a;break;case 2:l=a*(s-2),o[1]+=a,o[2]+=l;break;case 3:l=a*(4-s),o[1]+=l,o[2]+=a;break;case 4:l=a*(s-4),o[2]+=a,o[0]+=l;break;case 5:l=a*(6-s),o[2]+=l,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function YS(e,t){if(t===0)return e;var r=BBe($Be(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),mw(UBe(r))}var _ie=6,qBe=15,zBe=1,Is=_ie;function gw(e){return Math.floor((e+Math.round(128/Is)/256)*Is)}function vw(e){return Math.floor((e-5)/Is*100+.5)/100}function XS(e){return Math.round((e*Is+5)/Is*256)/256}function nT(e){return XS(vw(gw(e)))}function nM(e){var t=Math.abs(e-nT(e)),r=Is;if(t>.005)for(Is=zBe;Is<qBe;++Is)Math.abs(e-nT(e))<=t&&(t=Math.abs(e-nT(e)),r=Is);Is=r}function bm(e){e.width?(e.wpx=gw(e.width),e.wch=vw(e.wpx),e.MDW=Is):e.wpx?(e.wch=vw(e.wpx),e.width=XS(e.wch),e.MDW=Is):typeof e.wch=="number"&&(e.width=XS(e.wch),e.wpx=gw(e.width),e.MDW=Is),e.customWidth&&delete e.customWidth}var WBe=96,bie=WBe;function yw(e){return e*96/bie}function ty(e){return e*bie/96}var VBe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function HBe(e,t,r,n){t.Borders=[];var a={},i=!1;(e[0].match(Ws)||[]).forEach(function(o){var s=an(o);switch(yf(s[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},s.diagonalUp&&(a.diagonalUp=Xa(s.diagonalUp)),s.diagonalDown&&(a.diagonalDown=Xa(s.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+s[0]+" in borders")}})}function GBe(e,t,r,n){t.Fills=[];var a={},i=!1;(e[0].match(Ws)||[]).forEach(function(o){var s=an(o);switch(yf(s[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":s.patternType&&(a.patternType=s.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),s.indexed&&(a.bgColor.indexed=parseInt(s.indexed,10)),s.theme&&(a.bgColor.theme=parseInt(s.theme,10)),s.tint&&(a.bgColor.tint=parseFloat(s.tint)),s.rgb&&(a.bgColor.rgb=s.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),s.theme&&(a.fgColor.theme=parseInt(s.theme,10)),s.tint&&(a.fgColor.tint=parseFloat(s.tint)),s.rgb!=null&&(a.fgColor.rgb=s.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+s[0]+" in fills")}})}function KBe(e,t,r,n){t.Fonts=[];var a={},i=!1;(e[0].match(Ws)||[]).forEach(function(o){var s=an(o);switch(yf(s[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":s.val&&(a.name=Sa(s.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=s.val?Xa(s.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=s.val?Xa(s.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(s.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=s.val?Xa(s.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=s.val?Xa(s.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=s.val?Xa(s.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=s.val?Xa(s.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=s.val?Xa(s.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":s.val&&(a.sz=+s.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":s.val&&(a.vertAlign=s.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":s.val&&(a.family=parseInt(s.val,10));break;case"<family/>":case"</family>":break;case"<scheme":s.val&&(a.scheme=s.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(s.val=="1")break;s.codepage=OR[parseInt(s.val,10)];break;case"<color":if(a.color||(a.color={}),s.auto&&(a.color.auto=Xa(s.auto)),s.rgb)a.color.rgb=s.rgb.slice(-6);else if(s.indexed){a.color.index=parseInt(s.indexed,10);var l=V0[a.color.index];a.color.index==81&&(l=V0[1]),l||(l=V0[1]),a.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else s.theme&&(a.color.theme=parseInt(s.theme,10),s.tint&&(a.color.tint=parseFloat(s.tint)),s.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=YS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+s[0]+" in fonts")}})}function YBe(e,t,r){t.NumberFmt=[];for(var n=Di(Kr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Kr[n[a]];var i=e[0].match(Ws);if(i)for(a=0;a<i.length;++a){var o=an(i[a]);switch(yf(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var s=Wn(Sa(o.formatCode)),l=parseInt(o.numFmtId,10);if(t.NumberFmt[l]=s,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=s}ph(s,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function XBe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=tr("numFmt",null,{numFmtId:n,formatCode:_a(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=tr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Db=["numFmtId","fillId","fontId","borderId","xfId"],Ib=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ZBe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(Ws)||[]).forEach(function(i){var o=an(i),s=0;switch(yf(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],s=0;s<Db.length;++s)n[Db[s]]&&(n[Db[s]]=parseInt(n[Db[s]],10));for(s=0;s<Ib.length;++s)n[Ib[s]]&&(n[Ib[s]]=Xa(n[Ib[s]]));if(t.NumberFmt&&n.numFmtId>392){for(s=392;s>60;--s)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[s]){n.numFmtId=s;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};o.vertical&&(l.vertical=o.vertical),o.horizontal&&(l.horizontal=o.horizontal),o.textRotation!=null&&(l.textRotation=o.textRotation),o.indent&&(l.indent=o.indent),o.wrapText&&(l.wrapText=Xa(o.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function JBe(e){var t=[];return t[t.length]=tr("cellXfs",null),e.forEach(function(r){t[t.length]=tr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=tr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var QBe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,l,u){var d={};if(!s)return d;s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=s.match(t))&&YBe(f,d,u),(f=s.match(a))&&KBe(f,d,l,u),(f=s.match(n))&&GBe(f,d,l,u),(f=s.match(i))&&HBe(f,d,l,u),(f=s.match(r))&&ZBe(f,d,u),d}}();function Sie(e,t){var r=[to,tr("styleSheet",null,{xmlns:Ig[0],"xmlns:vt":xo.vt})],n;return e.SSF&&(n=XBe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=JBe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function eUe(e,t){var r=e.read_shift(2),n=js(e);return[r,n]}function tUe(e,t,r){r||(r=Et(6+4*t.length)),r.write_shift(2,e),Bo(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function rUe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=L9e(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var s=e.read_shift(1);s>0&&(n.family=s);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=F9e(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=js(e),n}function nUe(e,t){t||(t=Et(25+4*32)),t.write_shift(2,e.sz*20),j9e(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),HS(e.color,t);var n=0;return n=2,t.write_shift(1,n),Bo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var aUe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],aT,iUe=zs;function mV(e,t){t||(t=Et(4*3+8*7+16*1)),aT||(aT=q3(aUe));var r=aT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(HS({auto:1},t),HS({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function oUe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Aie(e,t,r){r||(r=Et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function m2(e,t){return t||(t=Et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var sUe=zs;function lUe(e,t){return t||(t=Et(51)),t.write_shift(1,0),m2(null,t),m2(null,t),m2(null,t),m2(null,t),m2(null,t),t.length>t.l?t.slice(0,t.l):t}function cUe(e,t){return t||(t=Et(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),VS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function uUe(e,t,r){var n=Et(2052);return n.write_shift(4,e),VS(t,n),VS(r,n),n.length>n.l?n.slice(0,n.l):n}function dUe(e,t,r){var n={};n.NumberFmt=[];for(var a in Kr)n.NumberFmt[a]=Kr[a];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Lh(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],ph(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=YS(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(d),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(d);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function fUe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(It(e,615,Zu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&It(e,44,tUe(a,t[a]))}),It(e,616))}}function hUe(e){var t=1;It(e,611,Zu(t)),It(e,43,nUe({sz:12,color:{theme:1},name:"Calibri",family:2})),It(e,612)}function pUe(e){var t=2;It(e,603,Zu(t)),It(e,45,mV({patternType:"none"})),It(e,45,mV({patternType:"gray125"})),It(e,604)}function mUe(e){var t=1;It(e,613,Zu(t)),It(e,46,lUe()),It(e,614)}function gUe(e){var t=1;It(e,626,Zu(t)),It(e,47,Aie({numFmtId:0},65535)),It(e,627)}function vUe(e,t){It(e,617,Zu(t.length)),t.forEach(function(r){It(e,47,Aie(r,0))}),It(e,618)}function yUe(e){var t=1;It(e,619,Zu(t)),It(e,48,cUe({xfId:0,name:"Normal"})),It(e,620)}function xUe(e){var t=0;It(e,505,Zu(t)),It(e,506)}function wUe(e){var t=0;It(e,508,uUe(t,"TableStyleMedium9","PivotStyleMedium4")),It(e,509)}function _Ue(e,t){var r=$l();return It(r,278),fUe(r,e.SSF),hUe(r),pUe(r),mUe(r),gUe(r),vUe(r,t.cellXfs),yUe(r),xUe(r),wUe(r),It(r,279),r.end()}var bUe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function SUe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Ws)||[]).forEach(function(a){var i=an(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[bUe.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function AUe(){}function NUe(){}var kUe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,EUe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,CUe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function PUe(e,t,r){t.themeElements={};var n;[["clrScheme",kUe,SUe],["fontScheme",EUe,AUe],["fmtScheme",CUe,NUe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var TUe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Nie(e,t){(!e||e.length===0)&&(e=aM());var r,n={};if(!(r=e.match(TUe)))throw new Error("themeElements not found in theme");return PUe(r[0],n,t),n.raw=e,n}function aM(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[to];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function OUe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=vae(i,{type:"array"})}catch{return}var s=hc(o,"theme/theme/theme1.xml",!0);if(s)return Nie(s,r)}}function DUe(e){return e.read_shift(4)}function IUe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=RUe(e,4);break;case 2:t.xclrValue=aie(e);break;case 3:t.xclrValue=DUe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function RUe(e,t){return zs(e,t)}function MUe(e,t){return zs(e,t)}function FUe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=IUe(e);break;case 6:n[1]=MUe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function LUe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(FUe(e,r-e.l));return{ixfe:n,ext:i}}function jUe(e,t){t.forEach(function(r){r[0]})}function $Ue(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:js(e)}}function BUe(e){var t=Et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Bo(e.name,t),t.slice(0,t.l)}function UUe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function qUe(e){var t=Et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function zUe(e,t){var r=Et(8+2*t.length);return r.write_shift(4,e),Bo(t,r),r.slice(0,r.l)}function WUe(e){return e.l+=4,e.read_shift(4)!=0}function VUe(e,t){var r=Et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function HUe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},i=[],o=!1,s=2;return Lh(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){s==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):s==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:s=l?1:0;break;case 338:s=2;break;case 35:i.push(d),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function GUe(){var e=$l();return It(e,332),It(e,334,Zu(1)),It(e,335,BUe({name:"XLDAPR",version:12e4,flags:3496657072})),It(e,336),It(e,339,zUe(1,"XLDAPR")),It(e,52),It(e,35,Zu(514)),It(e,4096,Zu(0)),It(e,4097,Kc(1)),It(e,36),It(e,53),It(e,340),It(e,337,VUe(1)),It(e,51,qUe([[1,0]])),It(e,338),It(e,333),e.end()}function KUe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,o;return e.replace(Ws,function(s){var l=an(s);switch(yf(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):i==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+l.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return s}),n}function kie(){var e=[to];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function YUe(e){var t=[];if(!e)return t;var r=1;return(e.match(Ws)||[]).forEach(function(n){var a=an(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function XUe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=en(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function ZUe(e,t,r){var n=[];return Lh(e,function(i,o,s){switch(s){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+s.toString(16))}}),n}function JUe(e,t,r,n){if(!e)return e;var a=n||{},i=!1;Lh(e,function(s,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!l.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function QUe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Kv=1024;function Eie(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[tr("xml",null,{"xmlns:v":lc.v,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:mv":lc.mv}).replace(/\/>/,">"),tr("o:shapelayout",tr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),tr("v:shapetype",[tr("v:stroke",null,{joinstyle:"miter"}),tr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Kv<e*1e3;)Kv+=1e3;return t.forEach(function(i){var o=yi(i[0]),s={color2:"#BEFF82",type:"gradient"};s.type=="gradient"&&(s.angle="-180");var l=s.type=="gradient"?tr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=tr("v:fill",l,s),d={on:"t",obscured:"t"};++Kv,a=a.concat(["<v:shape"+fw({id:"_x0000_s"+Kv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,tr("v:shadow",null,d),tr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",os("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),os("x:AutoFill","False"),os("x:Row",String(o.r)),os("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function gV(e,t,r,n){var a=Array.isArray(e),i;t.forEach(function(o){var s=yi(o.ref);if(a?(e[s.r]||(e[s.r]=[]),i=e[s.r][s.c]):i=e[o.ref],!i){i={t:"z"},a?e[s.r][s.c]=i:e[o.ref]=i;var l=Vn(e["!ref"]||"BDWGO1000001:A1");l.s.r>s.r&&(l.s.r=s.r),l.e.r<s.r&&(l.e.r=s.r),l.s.c>s.c&&(l.s.c=s.c),l.e.c<s.c&&(l.e.c=s.c);var u=gn(l);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}i.c.push(d)})}function eqe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var s=o.match(/<(?:\w+:)?author[^>]*>(.*)/);s&&r.push(s[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var s=o.match(/<(?:\w+:)?comment[^>]*>/);if(s){var l=an(s[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=yi(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&tM(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function Cie(e){var t=[to,tr("comments",null,{xmlns:Ig[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=_a(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(a=r.indexOf(_a(l.a))),i.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(os("t",_a(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,s=1;s<i.length;++s)o+=`Reply:
    `+i[s]+`
`;t.push(os("t",_a(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function tqe(e,t){var r=[],n=!1,a={},i=0;return e.replace(Ws,function(s,l){var u=an(s);switch(yf(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=l+s.length;break;case"</text>":a.t=e.slice(i,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return s}),r}function rqe(e,t,r){var n=[to,tr("ThreadedComments",null,{xmlns:xo.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(o,s){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var l={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};s==0?i=l.id:l.parentId=i,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(tr("threadedComment",os("text",o.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function nqe(e,t){var r=[],n=!1;return e.replace(Ws,function(i){var o=an(i);switch(yf(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function aqe(e){var t=[to,tr("personList",null,{xmlns:xo.TCMNT,"xmlns:x":Ig[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(tr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function iqe(e){var t={};t.iauthor=e.read_shift(4);var r=Lg(e);return t.rfx=r.s,t.ref=en(r.s),e.l+=16,t}function oqe(e,t){return t==null&&(t=Et(36)),t.write_shift(4,e[1].iauthor),Ay(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var sqe=js;function lqe(e){return Bo(e.slice(0,54))}function cqe(e,t){var r=[],n=[],a={},i=!1;return Lh(e,function(s,l,u){switch(u){case 632:n.push(s);break;case 635:a=s;break;case 637:a.t=s.t,a.h=s.h,a.r=s.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function uqe(e){var t=$l(),r=[];return It(t,628),It(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),It(t,632,lqe(a.a)))})}),It(t,631),It(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:yi(n[0]),e:yi(n[0])};It(t,635,oqe([i,a])),a.t&&a.t.length>0&&It(t,637,D9e(a)),It(t,636),delete a.iauthor})}),It(t,634),It(t,629),t.end()}var dqe="application/vnd.ms-office.vbaProject";function fqe(e){var t=Mr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Mr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Mr.write(t)}function hqe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Mr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Pie=["xlsb","xlsm","xlam","biff8","xla"];function pqe(){return{"!type":"dialog"}}function mqe(){return{"!type":"dialog"}}function gqe(){return{"!type":"macro"}}function vqe(){return{"!type":"macro"}}var h1=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,o){var s=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),o.length==0?s=!0:o.charAt(0)=="["&&(s=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return s?d+=t.c:--d,l?u+=t.r:--u,a+(s?"":"$")+vi(d)+(l?"":"$")+Ji(u)}return function(a,i){return t=i,a.replace(e,r)}}(),iM=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oM=function(){return function(t,r){return t.replace(iM,function(n,a,i,o,s,l){var u=HR(o)-(i?0:r.c),d=VR(l)-(s?0:r.r),f=d==0?"":s?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Tie(e,t){return e.replace(iM,function(r,n,a,i,o,s){return n+(a=="$"?a+i:vi(HR(i)+t.c))+(o=="$"?o+s:Ji(VR(s)+t.r))})}function yqe(e,t,r){var n=Bl(t),a=n.s,i=yi(r),o={r:i.r-a.r,c:i.c-a.c};return Tie(e,o)}function xqe(e){return e.length!=1}function vV(e){return e.replace(/_xlfn\./g,"")}function ao(e){e.l+=1}function Sm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Oie(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Die(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),o=Sm(e),s=Sm(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function Die(e){var t=Sm(e),r=Sm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function wqe(e,t,r){if(r.biff<8)return Die(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Sm(e),o=Sm(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Iie(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return _qe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Sm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function _qe(e){var t=Sm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function bqe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Sqe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Aqe(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,s=(i&32768)>>15;if(i&=16383,s==1)for(;a>524287;)a-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:o,rRel:s}}function Aqe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Nqe(e,t,r){var n=(e[e.l++]&96)>>5,a=Oie(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function kqe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=Oie(e,i,r);return[n,a,o]}function Eqe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Cqe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function Pqe(e,t,r){var n=(e[e.l++]&96)>>5,a=wqe(e,t-1,r);return[n,a]}function Tqe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function yV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Oqe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Dqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Iqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Rqe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Mqe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Rie(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Fqe(e){return e.read_shift(2),Rie(e)}function Lqe(e){return e.read_shift(2),Rie(e)}function jqe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Iie(e,0,r);return[n,a]}function $qe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Sqe(e,0,r);return[n,a]}function Bqe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=Iie(e,0,r);return[n,a,i]}function Uqe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[Wze[a],Lie[a],n]}function qqe(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:zqe(e);return[a,(i[0]===0?Lie:zze)[i[1]]]}function zqe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Wqe(e,t,r){e.l+=r&&r.biff==2?3:4}function Vqe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Hqe(e){return e.l++,jh[e.read_shift(1)]}function Gqe(e){return e.l++,e.read_shift(2)}function Kqe(e){return e.l++,e.read_shift(1)!==0}function Yqe(e){return e.l++,Fs(e)}function Xqe(e,t,r){return e.l++,r_(e,t-1,r)}function Zqe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=$i(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=jh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Fs(e);break;case 2:r[1]=jg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Jqe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?Lg:V3)(e));return a}function Qqe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var s=0;s!=a;++s)o[i][s]=Zqe(e,r.biff);return o}function eze(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function tze(e,t,r){if(r.biff==5)return rze(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function rze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function nze(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function aze(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ize(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function oze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var sze=zs,lze=zs,cze=zs;function a_(e,t,r){return e.l+=2,[bqe(e)]}function sM(e){return e.l+=6,[]}var uze=a_,dze=sM,fze=sM,hze=a_;function Mie(e){return e.l+=2,[lo(e),e.read_shift(2)&1]}var pze=a_,mze=Mie,gze=sM,vze=a_,yze=a_,xze=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function wze(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),o=xze[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:i}}function _ze(e){return e.l+=2,[e.read_shift(4)]}function bze(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Sze(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Aze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Nze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function kze(e){return e.l+=4,[0,0]}var xV={1:{n:"PtgExp",f:Vqe},2:{n:"PtgTbl",f:cze},3:{n:"PtgAdd",f:ao},4:{n:"PtgSub",f:ao},5:{n:"PtgMul",f:ao},6:{n:"PtgDiv",f:ao},7:{n:"PtgPower",f:ao},8:{n:"PtgConcat",f:ao},9:{n:"PtgLt",f:ao},10:{n:"PtgLe",f:ao},11:{n:"PtgEq",f:ao},12:{n:"PtgGe",f:ao},13:{n:"PtgGt",f:ao},14:{n:"PtgNe",f:ao},15:{n:"PtgIsect",f:ao},16:{n:"PtgUnion",f:ao},17:{n:"PtgRange",f:ao},18:{n:"PtgUplus",f:ao},19:{n:"PtgUminus",f:ao},20:{n:"PtgPercent",f:ao},21:{n:"PtgParen",f:ao},22:{n:"PtgMissArg",f:ao},23:{n:"PtgStr",f:Xqe},26:{n:"PtgSheet",f:bze},27:{n:"PtgEndSheet",f:Sze},28:{n:"PtgErr",f:Hqe},29:{n:"PtgBool",f:Kqe},30:{n:"PtgInt",f:Gqe},31:{n:"PtgNum",f:Yqe},32:{n:"PtgArray",f:Tqe},33:{n:"PtgFunc",f:Uqe},34:{n:"PtgFuncVar",f:qqe},35:{n:"PtgName",f:eze},36:{n:"PtgRef",f:jqe},37:{n:"PtgArea",f:Nqe},38:{n:"PtgMemArea",f:nze},39:{n:"PtgMemErr",f:sze},40:{n:"PtgMemNoMem",f:lze},41:{n:"PtgMemFunc",f:aze},42:{n:"PtgRefErr",f:ize},43:{n:"PtgAreaErr",f:Eqe},44:{n:"PtgRefN",f:$qe},45:{n:"PtgAreaN",f:Pqe},46:{n:"PtgMemAreaN",f:Aze},47:{n:"PtgMemNoMemN",f:Nze},57:{n:"PtgNameX",f:tze},58:{n:"PtgRef3d",f:Bqe},59:{n:"PtgArea3d",f:kqe},60:{n:"PtgRefErr3d",f:oze},61:{n:"PtgAreaErr3d",f:Cqe},255:{}},Eze={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Cze={1:{n:"PtgElfLel",f:Mie},2:{n:"PtgElfRw",f:vze},3:{n:"PtgElfCol",f:uze},6:{n:"PtgElfRwV",f:yze},7:{n:"PtgElfColV",f:hze},10:{n:"PtgElfRadical",f:pze},11:{n:"PtgElfRadicalS",f:gze},13:{n:"PtgElfColS",f:dze},15:{n:"PtgElfColSV",f:fze},16:{n:"PtgElfRadicalLel",f:mze},25:{n:"PtgList",f:wze},29:{n:"PtgSxName",f:_ze},255:{}},Pze={0:{n:"PtgAttrNoop",f:kze},1:{n:"PtgAttrSemi",f:Mqe},2:{n:"PtgAttrIf",f:Iqe},4:{n:"PtgAttrChoose",f:Oqe},8:{n:"PtgAttrGoto",f:Dqe},16:{n:"PtgAttrSum",f:Wqe},32:{n:"PtgAttrBaxcel",f:yV},33:{n:"PtgAttrBaxcel",f:yV},64:{n:"PtgAttrSpace",f:Fqe},65:{n:"PtgAttrSpaceSemi",f:Lqe},128:{n:"PtgAttrIfError",f:Rqe},255:{}};function i_(e,t,r,n){if(n.biff<8)return zs(e,t);for(var a=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Qqe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Jqe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&i.push(zs(e,t)),i}function o_(e,t,r){for(var n=e.l+t,a,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],a=xV[i]||xV[Eze[i]],(i===24||i===25)&&(a=(i===24?Cze:Pze)[e[e.l+1]]),!a||!a.f?zs(e,t):o.push([a.n,a.f(e,t,r)]);return o}function Tze(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Oze={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Dze(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Fie(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function wV(e,t,r){var n=Fie(e,t,r);return n=="#REF"?n:Dze(n,r)}function Os(e,t,r,n,a){var i=a&&a.biff||8,o={s:{c:0,r:0}},s=[],l,u,d,f=0,h=0,m,x="";if(!e[0]||!e[0][0])return"";for(var g=-1,y="",_=0,b=e[0].length;_<b;++_){var S=e[0][_];switch(S[0]){case"PtgUminus":s.push("-"+s.pop());break;case"PtgUplus":s.push("+"+s.pop());break;case"PtgPercent":s.push(s.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=s.pop(),u=s.pop(),g>=0){switch(e[0][g][1][0]){case 0:y=Ei(" ",e[0][g][1][1]);break;case 1:y=Ei("\r",e[0][g][1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}u=u+y,g=-1}s.push(u+Oze[S[0]]+l);break;case"PtgIsect":l=s.pop(),u=s.pop(),s.push(u+" "+l);break;case"PtgUnion":l=s.pop(),u=s.pop(),s.push(u+","+l);break;case"PtgRange":l=s.pop(),u=s.pop(),s.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=G2(S[1][1],o,a),s.push(K2(d,i));break;case"PtgRefN":d=r?G2(S[1][1],r,a):S[1][1],s.push(K2(d,i));break;case"PtgRef3d":f=S[1][1],d=G2(S[1][2],o,a),x=wV(n,f,a),s.push(x+"!"+K2(d,i));break;case"PtgFunc":case"PtgFuncVar":var C=S[1][0],E=S[1][1];C||(C=0),C&=127;var O=C==0?[]:s.slice(-C);s.length-=C,E==="User"&&(E=O.shift()),s.push(E+"("+O.join(",")+")");break;case"PtgBool":s.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":s.push(S[1]);break;case"PtgNum":s.push(String(S[1]));break;case"PtgStr":s.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":s.push(S[1]);break;case"PtgAreaN":m=YW(S[1][1],r?{s:r}:o,a),s.push(eT(m,a));break;case"PtgArea":m=YW(S[1][1],o,a),s.push(eT(m,a));break;case"PtgArea3d":f=S[1][1],m=S[1][2],x=wV(n,f,a),s.push(x+"!"+eT(m,a));break;case"PtgAttrSum":s.push("SUM("+s.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=S[1][2];var T=(n.names||[])[h-1]||(n[0]||[])[h],M=T?T.Name:"SH33TJSNAME"+String(h);M&&M.slice(0,6)=="_xlfn."&&!a.xlfn&&(M=M.slice(6)),s.push(M);break;case"PtgNameX":var L=S[1][1];h=S[1][2];var z;if(a.biff<=5)L<0&&(L=-L),n[L]&&(z=n[L][h]);else{var P="";if(((n[L]||[])[0]||[])[0]==14849||(((n[L]||[])[0]||[])[0]==1025?n[L][h]&&n[L][h].itab>0&&(P=n.SheetNames[n[L][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[L]&&n[L][h])P+=n[L][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var R=(Fie(n,L,a)||"").split(";;");R[h-1]?P=R[h-1]:P+="SH33TJSERRX"}s.push(P);break}z||(z={Name:"SH33TJSERRY"}),s.push(z.Name);break;case"PtgParen":var j="(",V=")";if(g>=0){switch(y="",e[0][g][1][0]){case 2:j=Ei(" ",e[0][g][1][1])+j;break;case 3:j=Ei("\r",e[0][g][1][1])+j;break;case 4:V=Ei(" ",e[0][g][1][1])+V;break;case 5:V=Ei("\r",e[0][g][1][1])+V;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}s.push(j+s.pop()+V);break;case"PtgRefErr":s.push("#REF!");break;case"PtgRefErr3d":s.push("#REF!");break;case"PtgExp":d={c:S[1][1],r:S[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[en(d)]){var te=n.sharedf[en(d)];s.push(Os(te,o,Z,n,a))}else{var q=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){s.push(Os(u[1],o,Z,n,a)),q=!0;break}q||s.push(S[1])}break;case"PtgArray":s.push("{"+Tze(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=_;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":s.push("");break;case"PtgAreaErr":s.push("#REF!");break;case"PtgAreaErr3d":s.push("#REF!");break;case"PtgList":s.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&g>=0&&Y.indexOf(e[0][_][0])==-1){S=e[0][g];var U=!0;switch(S[1][0]){case 4:U=!1;case 0:y=Ei(" ",S[1][1]);break;case 5:U=!1;case 1:y=Ei("\r",S[1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}s.push((U?y:"")+s.pop()+(U?"":y)),g=-1}}if(s.length>1&&a.WTF)throw new Error("bad formula stack");return s[0]}function Ize(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],zs(e,t-2)];var s=o_(e,o,r);return t!==o+a&&(i=i_(e,t-o-a,s,r)),e.l=n,[s,i]}function Rze(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],zs(e,t-2)];var s=o_(e,o,r);return t!==o+a&&(i=i_(e,t-o-a,s,r)),e.l=n,[s,i]}function Mze(e,t,r,n){var a=e.l+t,i=o_(e,n,r),o;return a!==e.l&&(o=i_(e,a-e.l,i,r)),[i,o]}function Fze(e,t,r){var n=e.l+t,a,i=e.read_shift(2),o=o_(e,i,r);return i==65535?[[],zs(e,t-2)]:(t!==i+2&&(a=i_(e,n-i-2,o,r)),[o,a])}function Lze(e){var t;if(ch(e,e.l+6)!==65535)return[Fs(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function jze(e){if(e==null){var t=Et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return mg(e);return mg(0)}function iT(e,t,r){var n=e.l+t,a=xf(e);r.biff==2&&++e.l;var i=Lze(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var s=Rze(e,n-e.l,r);return{cell:a,val:i[0],formula:s,shared:o>>3&1,tt:i[1]}}function $ze(e,t,r,n,a){var i=vg(t,r,a),o=jze(e.v),s=Et(6),l=33;s.write_shift(2,l),s.write_shift(4,0);for(var u=Et(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=$o([i,o,s,u]);return f}function H3(e,t,r){var n=e.read_shift(4),a=o_(e,n,r),i=e.read_shift(4),o=i>0?i_(e,i,a,r):null;return[a,o]}var Bze=H3,G3=H3,Uze=H3,qze=H3,zze={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Lie={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wze={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function _V(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Vze(e){var t="of:="+e.replace(iM,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function oT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Hze(e){return e.replace(/\./,"!")}var X2={},p1={},Z2=typeof Map<"u";function lM(e,t,r){var n=0,a=e.length;if(r){if(Z2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Z2?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Z2?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function K3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Is=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=vw(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=XS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function K0(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function $m(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){ph(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function jie(e,t,r,n,a,i){try{n.cellNF&&(e.z=Kr[t])}catch(s){if(n.WTF)throw s}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Kr[t]==null&&ph(zLe[t]||"General",t),e.t==="e")e.w=e.w||jh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uw(e.v);else if(e.t==="d"){var o=_o(e.v);(o|0)===o?e.w=o.toString(10):e.w=uw(o)}else{if(e.v===void 0)return"";e.w=hg(e.v,p1)}else e.t==="d"?e.w=au(t,_o(e.v),p1):e.w=au(t,e.v,p1)}catch(s){if(n.WTF)throw s}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=YS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=YS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(s){if(n.WTF&&i.Fills)throw s}}}function Gze(e,t,r){if(e&&e["!ref"]){var n=Vn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Kze(e,t){var r=Vn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=gn(r))}var Yze=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Xze=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Zze=/<(?:\w:)?hyperlink [^>]*>/mg,Jze=/"(\w*:\w*)"/,Qze=/<(?:\w:)?col\b[^>]*[\/]?>/g,eWe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,tWe=/<(?:\w:)?pageMargins[^>]*\/>/g,$ie=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,rWe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,nWe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function aWe(e,t,r,n,a,i,o){if(!e)return e;n||(n={"!id":{}});var s=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Xze);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match($ie);h?cM(h[0],s,a,r):(h=u.match(rWe))&&oWe(h[0],h[1]||"",s,a,r);var m=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=u.slice(m,m+50).match(Jze);x&&Kze(s,x[1])}var g=u.match(nWe);g&&g[1]&&xWe(g[1],a);var y=[];if(t.cellStyles){var _=u.match(Qze);_&&pWe(y,_)}f&&bWe(f[1],s,t,l,i,o);var b=d.match(eWe);b&&(s["!autofilter"]=gWe(b[0]));var S=[],C=d.match(Yze);if(C)for(m=0;m!=C.length;++m)S[m]=Vn(C[m].slice(C[m].indexOf('"')+1));var E=d.match(Zze);E&&dWe(s,E,n);var O=d.match(tWe);if(O&&(s["!margins"]=fWe(an(O[0]))),!s["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(s["!ref"]=gn(l)),t.sheetRows>0&&s["!ref"]){var T=Vn(s["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>l.e.r&&(T.e.r=l.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>l.e.c&&(T.e.c=l.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),s["!fullref"]=s["!ref"],s["!ref"]=gn(T))}return y.length>0&&(s["!cols"]=y),S.length>0&&(s["!merges"]=S),s}function iWe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+gn(e[r])+'"/>';return t+"</mergeCells>"}function cM(e,t,r,n){var a=an(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Wn(Sa(a.codeName)))}function oWe(e,t,r,n,a){cM(e.slice(0,e.indexOf(">")),r,n,a)}function sWe(e,t,r,n,a){var i=!1,o={},s=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}i=!0,o.codeName=Xd(_a(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),s=(s||"")+tr("outlinePr",null,u)}!i&&!s||(a[a.length]=tr("sheetPr",s,o))}var lWe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],cWe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function uWe(e){var t={sheet:1};return lWe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),cWe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=rM(e.password).toString(16).toUpperCase()),tr("sheetProtection",null,t)}function dWe(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var i=an(Sa(t[a]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Wn(i.location))):(i.Target="#"+Wn(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var s=Vn(i.ref),l=s.s.r;l<=s.e.r;++l)for(var u=s.s.c;u<=s.e.c;++u){var d=en({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=i):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=i)}}}function fWe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function hWe(e){return K0(e),tr("pageMargins",null,e)}function pWe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=an(t[n],!0);a.hidden&&(a.hidden=Xa(a.hidden));var i=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,nM(a.width)),bm(a);i<=o;)e[i++]=ei(a)}}function mWe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=tr("col",null,K3(a,n)));return r[r.length]="</cols>",r.join("")}function gWe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function vWe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:gn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Bl(a);o.s.r==o.e.r&&(o.e.r=Bl(t["!ref"]).e.r,a=gn(o));for(var s=0;s<i.length;++s){var l=i[s];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return s==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),tr("autoFilter",null,{ref:a})}var yWe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function xWe(e,t){t.Views||(t.Views=[{}]),(e.match(yWe)||[]).forEach(function(r,n){var a=an(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Xa(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function wWe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),tr("sheetViews",tr("sheetView",null,a),{})}function _We(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=jh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=ei(e),e.t="n",a=""+(e.v=_o(Qa(e.v)))),typeof e.z>"u"&&(e.z=Kr[14]);break;default:a=e.v;break}var s=os("v",_a(a)),l={r:t},u=$m(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){s=os("v",""+lM(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;s=tr("f",_a(e.f),d)+(e.v!=null?s:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),tr("c",s,l)}var bWe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=dw("v"),o=dw("f");return function(l,u,d,f,h,m){for(var x=0,g="",y=[],_=[],b=0,S=0,C=0,E="",O,T,M=0,L=0,z,P,R=0,j=0,V=Array.isArray(m.CellXf),Z,te=[],q=[],Y=Array.isArray(u),U=[],G={},J=!1,D=!!d.sheetStubs,K=l.split(t),Q=0,ae=K.length;Q!=ae;++Q){g=K[Q].trim();var se=g.length;if(se!==0){var fe=0;e:for(x=0;x<se;++x)switch(g[x]){case">":if(g[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(T=an(g.slice(fe,x),!0),M=T.r!=null?parseInt(T.r,10):M+1,L=-1,d.sheetRows&&d.sheetRows<M)continue;G={},J=!1,T.ht&&(J=!0,G.hpt=parseFloat(T.ht),G.hpx=ty(G.hpt)),T.hidden=="1"&&(J=!0,G.hidden=!0),T.outlineLevel!=null&&(J=!0,G.level=+T.outlineLevel),J&&(U[M-1]=G)}break;case"<":fe=x;break}if(fe>=x)break;if(T=an(g.slice(fe,x),!0),M=T.r!=null?parseInt(T.r,10):M+1,L=-1,!(d.sheetRows&&d.sheetRows<M)){f.s.r>M-1&&(f.s.r=M-1),f.e.r<M-1&&(f.e.r=M-1),d&&d.cellStyles&&(G={},J=!1,T.ht&&(J=!0,G.hpt=parseFloat(T.ht),G.hpx=ty(G.hpt)),T.hidden=="1"&&(J=!0,G.hidden=!0),T.outlineLevel!=null&&(J=!0,G.level=+T.outlineLevel),J&&(U[M-1]=G)),y=g.slice(x).split(e);for(var ie=0;ie!=y.length&&y[ie].trim().charAt(0)=="<";++ie);for(y=y.slice(ie),x=0;x!=y.length;++x)if(g=y[x].trim(),g.length!==0){if(_=g.match(r),b=x,S=0,C=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,_!=null&&_.length===2){for(b=0,E=_[1],S=0;S!=E.length&&!((C=E.charCodeAt(S)-64)<1||C>26);++S)b=26*b+C;--b,L=b}else++L;for(S=0;S!=g.length&&g.charCodeAt(S)!==62;++S);if(++S,T=an(g.slice(0,S),!0),T.r||(T.r=en({r:M-1,c:L})),E=g.slice(S),O={t:""},(_=E.match(i))!=null&&_[1]!==""&&(O.v=Wn(_[1])),d.cellFormula){if((_=E.match(o))!=null&&_[1]!==""){if(O.f=Wn(Sa(_[1])).replace(/\r\n/g,`
`),d.xlfn||(O.f=vV(O.f)),_[0].indexOf('t="array"')>-1)O.F=(E.match(a)||[])[1],O.F.indexOf(":")>-1&&te.push([Vn(O.F),O.F]);else if(_[0].indexOf('t="shared"')>-1){P=an(_[0]);var X=Wn(Sa(_[1]));d.xlfn||(X=vV(X)),q[parseInt(P.si,10)]=[P,X,T.r]}}else(_=E.match(/<f[^>]*\/>/))&&(P=an(_[0]),q[P.si]&&(O.f=yqe(q[P.si][1],q[P.si][2],T.r)));var ue=yi(T.r);for(S=0;S<te.length;++S)ue.r>=te[S][0].s.r&&ue.r<=te[S][0].e.r&&ue.c>=te[S][0].s.c&&ue.c<=te[S][0].e.c&&(O.F=te[S][1])}if(T.t==null&&O.v===void 0)if(O.f||O.F)O.v=0,O.t="n";else if(D)O.t="z";else continue;else O.t=T.t||"n";switch(f.s.c>L&&(f.s.c=L),f.e.c<L&&(f.e.c=L),O.t){case"n":if(O.v==""||O.v==null){if(!D)continue;O.t="z"}else O.v=parseFloat(O.v);break;case"s":if(typeof O.v>"u"){if(!D)continue;O.t="z"}else z=X2[parseInt(O.v,10)],O.v=z.t,O.r=z.r,d.cellHTML&&(O.h=z.h);break;case"str":O.t="s",O.v=O.v!=null?Sa(O.v):"",d.cellHTML&&(O.h=UR(O.v));break;case"inlineStr":_=E.match(n),O.t="s",_!=null&&(z=tM(_[1]))?(O.v=z.t,d.cellHTML&&(O.h=z.h)):O.v="";break;case"b":O.v=Xa(O.v);break;case"d":d.cellDates?O.v=Qa(O.v,1):(O.v=_o(Qa(O.v,1)),O.t="n");break;case"e":(!d||d.cellText!==!1)&&(O.w=O.v),O.v=Uae[O.v];break}if(R=j=0,Z=null,V&&T.s!==void 0&&(Z=m.CellXf[T.s],Z!=null&&(Z.numFmtId!=null&&(R=Z.numFmtId),d.cellStyles&&Z.fillId!=null&&(j=Z.fillId))),jie(O,R,j,d,h,m),d.cellDates&&V&&O.t=="n"&&_y(Kr[R])&&(O.t="d",O.v=W3(O.v)),T.cm&&d.xlmeta){var de=(d.xlmeta.Cell||[])[+T.cm-1];de&&de.type=="XLDAPR"&&(O.D=!0)}if(Y){var re=yi(T.r);u[re.r]||(u[re.r]=[]),u[re.r][re.c]=O}else u[T.r]=O}}}}U.length>0&&(u["!rows"]=U)}}();function SWe(e,t,r,n){var a=[],i=[],o=Vn(e["!ref"]),s="",l,u="",d=[],f=0,h=0,m=e["!rows"],x=Array.isArray(e),g={r:u},y,_=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=vi(h);for(f=o.s.r;f<=o.e.r;++f){for(i=[],u=Ji(f),h=o.s.c;h<=o.e.c;++h){l=d[h]+u;var b=x?(e[f]||[])[h]:e[l];b!==void 0&&(s=_We(b,l,e,t))!=null&&i.push(s)}(i.length>0||m&&m[f])&&(g={r:u},m&&m[f]&&(y=m[f],y.hidden&&(g.hidden=1),_=-1,y.hpx?_=yw(y.hpx):y.hpt&&(_=y.hpt),_>-1&&(g.ht=_,g.customHeight=1),y.level&&(g.outlineLevel=y.level)),a[a.length]=tr("row",i.join(""),g))}if(m)for(;f<m.length;++f)m&&m[f]&&(g={r:f+1},y=m[f],y.hidden&&(g.hidden=1),_=-1,y.hpx?_=yw(y.hpx):y.hpt&&(_=y.hpt),_>-1&&(g.ht=_,g.customHeight=1),y.level&&(g.outlineLevel=y.level),a[a.length]=tr("row","",g));return a.join("")}function Bie(e,t,r,n){var a=[to,tr("worksheet",null,{xmlns:Ig[0],"xmlns:r":xo.r})],i=r.SheetNames[e],o=0,s="",l=r.Sheets[i];l==null&&(l={});var u=l["!ref"]||"A1",d=Vn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=gn(d)}n||(n={}),l["!comments"]=[];var f=[];sWe(l,r,e,t,a),a[a.length]=tr("dimension",null,{ref:u}),a[a.length]=wWe(l,t,e,r),t.sheetFormat&&(a[a.length]=tr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(a[a.length]=mWe(l,l["!cols"])),a[o=a.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(s=SWe(l,t),s.length>0&&(a[a.length]=s)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),l["!protect"]&&(a[a.length]=uWe(l["!protect"])),l["!autofilter"]!=null&&(a[a.length]=vWe(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(a[a.length]=iWe(l["!merges"]));var h=-1,m,x=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(x=xa(n,-1,_a(g[1].Target).replace(/#.*$/,""),Nn.HLINK),m["r:id"]="rId"+x),(h=g[1].Target.indexOf("#"))>-1&&(m.location=_a(g[1].Target.slice(h+1))),g[1].Tooltip&&(m.tooltip=_a(g[1].Tooltip)),a[a.length]=tr("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(a[a.length]=hWe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=os("ignoredErrors",tr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=xa(n,-1,"../drawings/drawing"+(e+1)+".xml",Nn.DRAW),a[a.length]=tr("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=xa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Nn.VML),a[a.length]=tr("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function AWe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function NWe(e,t,r){var n=Et(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=yw(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var s=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[en(u)];x&&(f<0&&(f=m),h=m)}f<0||(++s,n.write_shift(4,f),n.write_shift(4,h))}var g=n.l;return n.l=l,n.write_shift(4,s),n.l=g,n.length>n.l?n.slice(0,n.l):n}function kWe(e,t,r,n){var a=NWe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&It(e,0,a)}var EWe=Lg,CWe=Ay;function PWe(){}function TWe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=I9e(e),r}function OWe(e,t,r){r==null&&(r=Et(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return HS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Fae(e,r),r.slice(0,r.l)}function DWe(e){var t=lu(e);return[t]}function IWe(e,t,r){return r==null&&(r=Et(8)),Rg(t,r)}function RWe(e){var t=Mg(e);return[t]}function MWe(e,t,r){return r==null&&(r=Et(4)),Fg(t,r)}function FWe(e){var t=lu(e),r=e.read_shift(1);return[t,r,"b"]}function LWe(e,t,r){return r==null&&(r=Et(9)),Rg(t,r),r.write_shift(1,e.v?1:0),r}function jWe(e){var t=Mg(e),r=e.read_shift(1);return[t,r,"b"]}function $We(e,t,r){return r==null&&(r=Et(5)),Fg(t,r),r.write_shift(1,e.v?1:0),r}function BWe(e){var t=lu(e),r=e.read_shift(1);return[t,r,"e"]}function UWe(e,t,r){return r==null&&(r=Et(9)),Rg(t,r),r.write_shift(1,e.v),r}function qWe(e){var t=Mg(e),r=e.read_shift(1);return[t,r,"e"]}function zWe(e,t,r){return r==null&&(r=Et(8)),Fg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function WWe(e){var t=lu(e),r=e.read_shift(4);return[t,r,"s"]}function VWe(e,t,r){return r==null&&(r=Et(12)),Rg(t,r),r.write_shift(4,t.v),r}function HWe(e){var t=Mg(e),r=e.read_shift(4);return[t,r,"s"]}function GWe(e,t,r){return r==null&&(r=Et(8)),Fg(t,r),r.write_shift(4,t.v),r}function KWe(e){var t=lu(e),r=Fs(e);return[t,r,"n"]}function YWe(e,t,r){return r==null&&(r=Et(16)),Rg(t,r),mg(e.v,r),r}function Uie(e){var t=Mg(e),r=Fs(e);return[t,r,"n"]}function XWe(e,t,r){return r==null&&(r=Et(12)),Fg(t,r),mg(e.v,r),r}function ZWe(e){var t=lu(e),r=XR(e);return[t,r,"n"]}function JWe(e,t,r){return r==null&&(r=Et(12)),Rg(t,r),Lae(e.v,r),r}function QWe(e){var t=Mg(e),r=XR(e);return[t,r,"n"]}function eVe(e,t,r){return r==null&&(r=Et(8)),Fg(t,r),Lae(e.v,r),r}function tVe(e){var t=lu(e),r=GR(e);return[t,r,"is"]}function rVe(e){var t=lu(e),r=js(e);return[t,r,"str"]}function nVe(e,t,r){return r==null&&(r=Et(12+4*e.v.length)),Rg(t,r),Bo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function aVe(e){var t=Mg(e),r=js(e);return[t,r,"str"]}function iVe(e,t,r){return r==null&&(r=Et(8+4*e.v.length)),Fg(t,r),Bo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"b"];if(r.cellFormula){e.l+=2;var s=G3(e,n-e.l,r);o[3]=Os(s,null,a,r.supbooks,r)}else e.l=n;return o}function sVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"e"];if(r.cellFormula){e.l+=2;var s=G3(e,n-e.l,r);o[3]=Os(s,null,a,r.supbooks,r)}else e.l=n;return o}function lVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=Fs(e),o=[a,i,"n"];if(r.cellFormula){e.l+=2;var s=G3(e,n-e.l,r);o[3]=Os(s,null,a,r.supbooks,r)}else e.l=n;return o}function cVe(e,t,r){var n=e.l+t,a=lu(e);a.r=r["!row"];var i=js(e),o=[a,i,"str"];if(r.cellFormula){e.l+=2;var s=G3(e,n-e.l,r);o[3]=Os(s,null,a,r.supbooks,r)}else e.l=n;return o}var uVe=Lg,dVe=Ay;function fVe(e,t){return t==null&&(t=Et(4)),t.write_shift(4,e),t}function hVe(e,t){var r=e.l+t,n=Lg(e),a=KR(e),i=js(e),o=js(e),s=js(e);e.l=r;var l={rfx:n,relId:a,loc:i,display:s};return o&&(l.Tooltip=o),l}function pVe(e,t){var r=Et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Ay({s:yi(e[0]),e:yi(e[0])},r),YR("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Bo(a||"",r),Bo(e[1].Tooltip||"",r),Bo("",r),r.slice(0,r.l)}function mVe(){}function gVe(e,t,r){var n=e.l+t,a=jae(e),i=e.read_shift(1),o=[a];if(o[2]=i,r.cellFormula){var s=Bze(e,n-e.l,r);o[1]=s}else e.l=n;return o}function vVe(e,t,r){var n=e.l+t,a=Lg(e),i=[a];if(r.cellFormula){var o=qze(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function yVe(e,t,r){r==null&&(r=Et(18));var n=K3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var qie=["left","right","top","bottom","header","footer"];function xVe(e){var t={};return qie.forEach(function(r){t[r]=Fs(e)}),t}function wVe(e,t){return t==null&&(t=Et(6*8)),K0(e),qie.forEach(function(r){mg(e[r],t)}),t}function _Ve(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function bVe(e,t,r){r==null&&(r=Et(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function SVe(e){var t=Et(24);return t.write_shift(4,4),t.write_shift(4,1),Ay(e,t),t}function AVe(e,t){return t==null&&(t=Et(16*4+2)),t.write_shift(2,e.password?rM(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function NVe(){}function kVe(){}function EVe(e,t,r,n,a,i,o){if(!e)return e;var s=t||{};n||(n={"!id":{}});var l=s.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,m,x,g,y,_,b,S,C,E,O=[];s.biff=12,s["!row"]=0;var T=0,M=!1,L=[],z={},P=s.supbooks||a.supbooks||[[]];if(P.sharedf=z,P.arrayf=L,P.SheetNames=a.SheetNames||a.Sheets.map(function(Y){return Y.name}),!s.supbooks&&(s.supbooks=P,a.Names))for(var R=0;R<a.Names.length;++R)P[0][R+1]=a.Names[R];var j=[],V=[],Z=!1;xw[16]={n:"BrtShortReal",f:Uie};var te;if(Lh(e,function(U,G,J){if(!h)switch(J){case 148:u=U;break;case 0:m=U,s.sheetRows&&s.sheetRows<=m.r&&(h=!0),C=Ji(y=m.r),s["!row"]=m.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=ty(U.hpt)),V[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:U[2]},U[2]){case"n":x.v=U[1];break;case"s":S=X2[U[1]],x.v=S.t,x.r=S.r;break;case"b":x.v=!!U[1];break;case"e":x.v=U[1],s.cellText!==!1&&(x.w=jh[x.v]);break;case"str":x.t="s",x.v=U[1];break;case"is":x.t="s",x.v=U[1].t;break}if((g=o.CellXf[U[0].iStyleRef])&&jie(x,g.numFmtId,null,s,i,o),_=U[0].c==-1?_+1:U[0].c,s.dense?(l[y]||(l[y]=[]),l[y][_]=x):l[vi(_)+C]=x,s.cellFormula){for(M=!1,T=0;T<L.length;++T){var D=L[T];m.r>=D[0].s.r&&m.r<=D[0].e.r&&_>=D[0].s.c&&_<=D[0].e.c&&(x.F=gn(D[0]),M=!0)}!M&&U.length>3&&(x.f=U[3])}if(d.s.r>m.r&&(d.s.r=m.r),d.s.c>_&&(d.s.c=_),d.e.r<m.r&&(d.e.r=m.r),d.e.c<_&&(d.e.c=_),s.cellDates&&g&&x.t=="n"&&_y(Kr[g.numFmtId])){var K=j0(x.v);K&&(x.t="d",x.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 1:case 12:if(!s.sheetStubs||f)break;x={t:"z",v:void 0},_=U[0].c==-1?_+1:U[0].c,s.dense?(l[y]||(l[y]=[]),l[y][_]=x):l[vi(_)+C]=x,d.s.r>m.r&&(d.s.r=m.r),d.s.c>_&&(d.s.c=_),d.e.r<m.r&&(d.e.r=m.r),d.e.c<_&&(d.e.c=_),te&&(te.type=="XLDAPR"&&(x.D=!0),te=void 0);break;case 176:O.push(U);break;case 49:te=((s.xlmeta||{}).Cell||[])[U-1];break;case 494:var Q=n["!id"][U.relId];for(Q?(U.Target=Q.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=Q):U.relId==""&&(U.Target="#"+U.loc),y=U.rfx.s.r;y<=U.rfx.e.r;++y)for(_=U.rfx.s.c;_<=U.rfx.e.c;++_)s.dense?(l[y]||(l[y]=[]),l[y][_]||(l[y][_]={t:"z",v:void 0}),l[y][_].l=U):(b=en({c:_,r:y}),l[b]||(l[b]={t:"z",v:void 0}),l[b].l=U);break;case 426:if(!s.cellFormula)break;L.push(U),E=s.dense?l[y][_]:l[vi(_)+C],E.f=Os(U[1],d,{r:m.r,c:_},P,s),E.F=gn(U[0]);break;case 427:if(!s.cellFormula)break;z[en(U[0].s)]=U[1],E=s.dense?l[y][_]:l[vi(_)+C],E.f=Os(U[1],d,{r:m.r,c:_},P,s);break;case 60:if(!s.cellStyles)break;for(;U.e>=U.s;)j[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},Z||(Z=!0,nM(U.w/256)),bm(j[U.e+1]);break;case 161:l["!autofilter"]={ref:gn(U)};break;case 476:l["!margins"]=U;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),U.name&&(a.Sheets[r].CodeName=U.name),(U.above||U.left)&&(l["!outline"]={above:U.above,left:U.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),U.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!G.T){if(!f||s.WTF)throw new Error("Unexpected record 0x"+J.toString(16))}}},s),delete s.supbooks,delete s["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=gn(u||d)),s.sheetRows&&l["!ref"]){var q=Vn(l["!ref"]);s.sheetRows<=+q.e.r&&(q.e.r=s.sheetRows-1,q.e.r>d.e.r&&(q.e.r=d.e.r),q.e.r<q.s.r&&(q.s.r=q.e.r),q.e.c>d.e.c&&(q.e.c=d.e.c),q.e.c<q.s.c&&(q.s.c=q.e.c),l["!fullref"]=l["!ref"],l["!ref"]=gn(q))}return O.length>0&&(l["!merges"]=O),j.length>0&&(l["!cols"]=j),V.length>0&&(l["!rows"]=V),l}function CVe(e,t,r,n,a,i,o){if(t.v===void 0)return!1;var s="";switch(t.t){case"b":s=t.v?"1":"0";break;case"d":t=ei(t),t.z=t.z||Kr[14],t.v=_o(Qa(t.v)),t.t="n";break;case"n":case"e":s=""+t.v;break;default:s=t.v;break}var l={r,c:n};switch(l.s=$m(a.cellXfs,t,a),t.l&&i["!links"].push([en(l),t.l]),t.c&&i["!comments"].push([en(l),t.c]),t.t){case"s":case"str":return a.bookSST?(s=lM(a.Strings,t.v,a.revStrings),l.t="s",l.v=s,o?It(e,18,GWe(t,l)):It(e,7,VWe(t,l))):(l.t="str",o?It(e,17,iVe(t,l)):It(e,6,nVe(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?It(e,13,eVe(t,l)):It(e,2,JWe(t,l)):o?It(e,16,XWe(t,l)):It(e,5,YWe(t,l)),!0;case"b":return l.t="b",o?It(e,15,$We(t,l)):It(e,4,LWe(t,l)),!0;case"e":return l.t="e",o?It(e,14,zWe(t,l)):It(e,3,UWe(t,l)),!0}return o?It(e,12,MWe(t,l)):It(e,1,IWe(t,l)),!0}function PVe(e,t,r,n){var a=Vn(t["!ref"]||"A1"),i,o="",s=[];It(e,145);var l=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Ji(d),kWe(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(s[h]=vi(h)),i=s[h]+o;var m=l?(t[d]||[])[h]:t[i];if(!m){f=!1;continue}f=CVe(e,m,d,h,n,t,f)}}It(e,146)}function TVe(e,t){!t||!t["!merges"]||(It(e,177,fVe(t["!merges"].length)),t["!merges"].forEach(function(r){It(e,176,dVe(r))}),It(e,178))}function OVe(e,t){!t||!t["!cols"]||(It(e,390),t["!cols"].forEach(function(r,n){r&&It(e,60,yVe(n,r))}),It(e,391))}function DVe(e,t){!t||!t["!ref"]||(It(e,648),It(e,649,SVe(Vn(t["!ref"]))),It(e,650))}function IVe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=xa(r,-1,n[1].Target.replace(/#.*$/,""),Nn.HLINK);It(e,494,pVe(n,a))}}),delete t["!links"]}function RVe(e,t,r,n){if(t["!comments"].length>0){var a=xa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Nn.VML);It(e,551,YR("rId"+a)),t["!legacy"]=a}}function MVe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:gn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,s=Bl(i);s.s.r==s.e.r&&(s.e.r=Bl(t["!ref"]).e.r,i=gn(s));for(var l=0;l<o.length;++l){var u=o[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),It(e,161,Ay(Vn(i))),It(e,162)}}function FVe(e,t,r){It(e,133),It(e,137,bVe(t,r)),It(e,138),It(e,134)}function LVe(e,t){t["!protect"]&&It(e,535,AVe(t["!protect"]))}function jVe(e,t,r,n){var a=$l(),i=r.SheetNames[e],o=r.Sheets[i]||{},s=i;try{r&&r.Workbook&&(s=r.Workbook.Sheets[e].CodeName||s)}catch{}var l=Vn(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],It(a,129),(r.vbaraw||o["!outline"])&&It(a,147,OWe(s,o["!outline"])),It(a,148,CWe(l)),FVe(a,o,r.Workbook),OVe(a,o),PVe(a,o,e,t),LVe(a,o),MVe(a,o,r,e),TVe(a,o),IVe(a,o,n),o["!margins"]&&It(a,476,wVe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&DVe(a,o),RVe(a,o,e,n),It(a,130),a.end()}function $Ve(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Wn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,a,n]}function BVe(e,t,r,n,a,i){var o=i||{"!type":"chart"};if(!e)return i;var s=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=$Ve(f);d.s.r=d.s.c=0,d.e.c=s,u=vi(s),h[0].forEach(function(m,x){o[u+Ji(x)]={t:"n",v:m,z:h[1]},l=x}),d.e.r<l&&(d.e.r=l),++s}),s>0&&(o["!ref"]=gn(d)),o}function UVe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,s=e.match($ie);return s&&cM(s[0],i,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function qVe(e,t){e.l+=10;var r=js(e);return{name:r}}function zVe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Lh(e,function(l,u,d){switch(d){case 550:i["!rel"]=l;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),l.name&&(a.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var uM=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WVe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],VVe=[],HVe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function bV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var i=t[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Xa(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function SV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Xa(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function zie(e){SV(e.WBProps,uM),SV(e.CalcPr,HVe),bV(e.WBView,WVe),bV(e.Sheets,VVe),p1.date1904=Xa(e.WBProps.date1904)}function GVe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Xa(e.Workbook.WBProps.date1904)?"true":"false"}var KVe="][*?/\\".split("");function Wie(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return KVe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function YVe(e,t,r){e.forEach(function(n,a){Wie(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function XVe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];YVe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Gze(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var ZVe=/<\w+:workbook/;function JVe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},o=0;if(e.replace(Ws,function(l,u){var d=an(l);switch(yf(d[0])){case"<?xml":break;case"<workbook":l.match(ZVe)&&(a="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":uM.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Xa(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Sa(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Wn(Sa(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Sa(d.name),d.comment&&(i.Comment=d.comment),d.localSheetId&&(i.Sheet=+d.localSheetId),Xa(d.hidden||"0")&&(i.Hidden=!0),o=u+l.length;break;case"</definedName>":i.Ref=Wn(Sa(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Ig.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return zie(r),r}function Vie(e){var t=[to];t[t.length]=tr("workbook",null,{xmlns:Ig[0],"xmlns:r":xo.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(uM.forEach(function(s){e.Workbook.WBProps[s[0]]!=null&&e.Workbook.WBProps[s[0]]!=s[1]&&(n[s[0]]=e.Workbook.WBProps[s[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=tr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:_a(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=tr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(s){var l={name:s.Name};s.Comment&&(l.comment=s.Comment),s.Sheet!=null&&(l.localSheetId=""+s.Sheet),s.Hidden&&(l.hidden="1"),s.Ref&&(t[t.length]=tr("definedName",_a(s.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function QVe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=v8(e),r.name=js(e),r}function eHe(e,t){return t||(t=Et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),YR(e.strRelID,t),Bo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function tHe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?js(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function rHe(e,t){t||(t=Et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Fae(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function nHe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function aHe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=R9e(e),o=Uze(e,0,r),s=KR(e);e.l=n;var l={Name:i,Ptg:o};return a<268435455&&(l.Sheet=a),s&&(l.Comment=s),l}function iHe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],xw[16]={n:"BrtFRTArchID$",f:nHe},Lh(e,function(l,u,d){switch(d){case 156:o.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=Os(l.Ptg,null,null,o,t),delete t.SID,delete l.Ptg,i.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,l]):o[0]=[d,l],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(l),o.XTI=o.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),zie(r),r.Names=i,r.supbooks=o,r}function oHe(e,t){It(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};It(e,156,eHe(a))}It(e,144)}function sHe(e,t){t||(t=Et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Bo("SheetJS",t),Bo($S.version,t),Bo($S.version,t),Bo("7262",t),t.length>t.l?t.slice(0,t.l):t}function lHe(e,t){t||(t=Et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function cHe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(It(e,135),It(e,158,lHe(a)),It(e,136))}}function uHe(e,t){var r=$l();return It(r,131),It(r,128,sHe()),It(r,153,rHe(e.Workbook&&e.Workbook.WBProps||null)),cHe(r,e),oHe(r,e),It(r,132),r.end()}function dHe(e,t,r){return t.slice(-4)===".bin"?iHe(e,r):JVe(e,r)}function fHe(e,t,r,n,a,i,o,s){return t.slice(-4)===".bin"?EVe(e,n,r,a,i,o,s):aWe(e,n,r,a,i,o,s)}function hHe(e,t,r,n,a,i,o,s){return t.slice(-4)===".bin"?zVe(e,n,r,a,i):UVe(e,n,r,a,i)}function pHe(e,t,r,n,a,i,o,s){return t.slice(-4)===".bin"?gqe():vqe()}function mHe(e,t,r,n,a,i,o,s){return t.slice(-4)===".bin"?pqe():mqe()}function gHe(e,t,r,n){return t.slice(-4)===".bin"?dUe(e,r,n):QBe(e,r,n)}function vHe(e,t,r){return Nie(e,r)}function yHe(e,t,r){return t.slice(-4)===".bin"?yBe(e,r):mBe(e,r)}function xHe(e,t,r){return t.slice(-4)===".bin"?cqe(e,r):eqe(e,r)}function wHe(e,t,r){return t.slice(-4)===".bin"?ZUe(e):YUe(e)}function _He(e,t,r,n){return r.slice(-4)===".bin"?JUe(e,t,r,n):void 0}function bHe(e,t,r){return t.slice(-4)===".bin"?HUe(e,t,r):KUe(e,t,r)}function SHe(e,t,r){return(t.slice(-4)===".bin"?uHe:Vie)(e)}function AHe(e,t,r,n,a){return(t.slice(-4)===".bin"?jVe:Bie)(e,r,n,a)}function NHe(e,t,r){return(t.slice(-4)===".bin"?_Ue:Sie)(e,r)}function kHe(e,t,r){return(t.slice(-4)===".bin"?_Be:mie)(e,r)}function EHe(e,t,r){return(t.slice(-4)===".bin"?uqe:Cie)(e)}function CHe(e){return(e.slice(-4)===".bin"?GUe:kie)()}var Hie=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Gie=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ru(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Hie),i,o,s,l;if(a)for(l=0;l!=a.length;++l)i=a[l].match(Gie),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(o+1),n[s]=i[2].slice(1,i[2].length-1));return n}function PHe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Hie),a,i,o,s;if(n)for(s=0;s!=n.length;++s)a=n[s].match(Gie),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}var J2;function THe(e,t){var r=J2[e]||Wn(e);return r==="General"?hg(t):au(r,t)}function OHe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Xa(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Wn(t)]=a}function DHe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||jh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uw(e.v):e.w=hg(e.v):e.w=THe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=J2[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&_y(n)){var a=j0(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function IHe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=VBe[n.Pattern]||n.Pattern)}e[t.ID]=t}function RHe(e,t,r,n,a,i,o,s,l,u){var d="General",f=n.StyleID,h={};u=u||{};var m=[],x=0;for(f===void 0&&s&&(f=s.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(d=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Xa(e);break;case"String":n.t="s",n.r=BW(Wn(e)),n.v=e.indexOf("<")>-1?Wn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Wn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Uae[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=BW(t||e));break}if(DHe(n,d,u),u.cellFormula!==!1)if(n.Formula){var g=Wn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=h1(g,a),delete n.Formula,n.ArrayRange=="RC"?n.F=h1("RC:RC",a):n.ArrayRange&&(n.F=h1(n.ArrayRange,a),l.push([Vn(n.F),n.F]))}else for(x=0;x<l.length;++x)a.r>=l[x][0].s.r&&a.r<=l[x][0].e.r&&a.c>=l[x][0].s.c&&a.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(m.forEach(function(y){!h.patternType&&y.patternType&&(h.patternType=y.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function MHe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function sT(e,t){var r=t||{};by();var n=C2(qR(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Sa(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=ei(r);return o.type="string",ey.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Qe){a.indexOf("<"+Qe)>=0&&(i=!0)}),i)return wGe(n,r);J2={"General Number":"General","General Date":Kr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Kr[15],"Short Date":Kr[14],"Long Time":Kr[19],"Medium Time":Kr[18],"Short Time":Kr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Kr[2],Standard:Kr[4],Percent:Kr[10],Scientific:Kr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var s,l=[],u,d={},f=[],h=r.dense?[]:{},m="",x={},g={},y=Ru('<Data ss:Type="String">'),_=0,b=0,S=0,C={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},O={},T="",M=0,L=[],z={},P={},R=0,j=[],V=[],Z={},te=[],q,Y=!1,U=[],G=[],J={},D=0,K=0,Q={Sheets:[],WBProps:{date1904:!1}},ae={};hw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var se="";s=hw.exec(n);)switch(s[3]=(se=s[3]).toLowerCase()){case"data":if(se=="data"){if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&l.push([s[3],!0]);break}if(l[l.length-1][1])break;s[1]==="/"?RHe(n.slice(_,s.index),T,y,l[l.length-1][0]=="comment"?Z:x,{c:b,r:S},E,te[b],g,U,r):(T="",y=Ru(s[0]),_=s.index+s[0].length);break;case"cell":if(s[1]==="/")if(V.length>0&&(x.c=V),(!r.sheetRows||r.sheetRows>S)&&x.v!==void 0&&(r.dense?(h[S]||(h[S]=[]),h[S][b]=x):h[vi(b)+Ji(S)]=x),x.HRef&&(x.l={Target:Wn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(D=b+(parseInt(x.MergeAcross,10)|0),K=S+(parseInt(x.MergeDown,10)|0),L.push({s:{c:b,r:S},e:{c:D,r:K}})),!r.sheetStubs)x.MergeAcross?b=D+1:++b;else if(x.MergeAcross||x.MergeDown){for(var fe=b;fe<=D;++fe)for(var ie=S;ie<=K;++ie)(fe>b||ie>S)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][fe]={t:"z"}):h[vi(fe)+Ji(ie)]={t:"z"});b=D+1}else++b;else x=PHe(s[0]),x.Index&&(b=+x.Index-1),b<C.s.c&&(C.s.c=b),b>C.e.c&&(C.e.c=b),s[0].slice(-2)==="/>"&&++b,V=[];break;case"row":s[1]==="/"||s[0].slice(-2)==="/>"?(S<C.s.r&&(C.s.r=S),S>C.e.r&&(C.e.r=S),s[0].slice(-2)==="/>"&&(g=Ru(s[0]),g.Index&&(S=+g.Index-1)),b=0,++S):(g=Ru(s[0]),g.Index&&(S=+g.Index-1),J={},(g.AutoFitHeight=="0"||g.Height)&&(J.hpx=parseInt(g.Height,10),J.hpt=yw(J.hpx),G[S]=J),g.Hidden=="1"&&(J.hidden=!0,G[S]=J));break;case"worksheet":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"));f.push(m),C.s.r<=C.e.r&&C.s.c<=C.e.c&&(h["!ref"]=gn(C),r.sheetRows&&r.sheetRows<=C.e.r&&(h["!fullref"]=h["!ref"],C.e.r=r.sheetRows-1,h["!ref"]=gn(C))),L.length&&(h["!merges"]=L),te.length>0&&(h["!cols"]=te),G.length>0&&(h["!rows"]=G),d[m]=h}else C={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=b=0,l.push([s[3],!1]),u=Ru(s[0]),m=Wn(u.Name),h=r.dense?[]:{},L=[],U=[],G=[],ae={name:m,Hidden:0},Q.Sheets.push(ae);break;case"table":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else{if(s[0].slice(-2)=="/>")break;l.push([s[3],!1]),te=[],Y=!1}break;case"style":s[1]==="/"?IHe(E,O,r):O=Ru(s[0]);break;case"numberformat":O.nf=Wn(Ru(s[0]).Format||"General"),J2[O.nf]&&(O.nf=J2[O.nf]);for(var X=0;X!=392&&Kr[X]!=O.nf;++X);if(X==392){for(X=57;X!=392;++X)if(Kr[X]==null){ph(O.nf,X);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(q=Ru(s[0]),q.Hidden&&(q.hidden=!0,delete q.Hidden),q.Width&&(q.wpx=parseInt(q.Width,10)),!Y&&q.wpx>10){Y=!0,Is=_ie;for(var ue=0;ue<te.length;++ue)te[ue]&&bm(te[ue])}Y&&bm(q),te[q.Index-1||te.length]=q;for(var de=0;de<+q.Span;++de)te[te.length]=ei(q);break;case"namedrange":if(s[1]==="/")break;Q.Names||(Q.Names=[]);var re=an(s[0]),ke={Name:re.Name,Ref:h1(re.RefersTo.slice(1),{r:0,c:0})};Q.Sheets.length>0&&(ke.Sheet=Q.Sheets.length-1),Q.Names.push(ke);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(s[0].slice(-2)==="/>")break;s[1]==="/"?T+=n.slice(M,s.index):M=s.index+s[0].length;break;case"interior":if(!r.cellStyles)break;O.Interior=Ru(s[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(s[0].slice(-2)==="/>")break;s[1]==="/"?ije(z,se,n.slice(R,s.index)):R=s.index+s[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else l.push([s[3],!1]);break;case"comment":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"));MHe(Z),V.push(Z)}else l.push([s[3],!1]),u=Ru(s[0]),Z={a:u.Author};break;case"autofilter":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else if(s[0].charAt(s[0].length-2)!=="/"){var Re=Ru(s[0]);h["!autofilter"]={ref:h1(Re.Range).replace(/\$/g,"")},l.push([s[3],!0])}break;case"name":break;case"datavalidation":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&l.push([s[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(s[1]==="/"){if((u=l.pop())[0]!==s[3])throw new Error("Bad state: "+u.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&l.push([s[3],!0]);break;case"null":break;default:if(l.length==0&&s[3]=="document"||l.length==0&&s[3]=="uof")return CV(n,r);var Pe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Pe=!1}break;case"componentoptions":switch(s[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Pe=!1}break;case"excelworkbook":switch(s[3]){case"date1904":Q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Pe=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":break;case"height":break;case"width":break;default:Pe=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if(s[0].slice(-2)!=="/>")if(s[1]==="/")switch(n.slice(R,s.index)){case"SheetHidden":ae.Hidden=1;break;case"SheetVeryHidden":ae.Hidden=2;break}else R=s.index+s[0].length;break;case"header":h["!margins"]||K0(h["!margins"]={},"xlml"),isNaN(+an(s[0]).Margin)||(h["!margins"].header=+an(s[0]).Margin);break;case"footer":h["!margins"]||K0(h["!margins"]={},"xlml"),isNaN(+an(s[0]).Margin)||(h["!margins"].footer=+an(s[0]).Margin);break;case"pagemargins":var ge=an(s[0]);h["!margins"]||K0(h["!margins"]={},"xlml"),isNaN(+ge.Top)||(h["!margins"].top=+ge.Top),isNaN(+ge.Left)||(h["!margins"].left=+ge.Left),isNaN(+ge.Right)||(h["!margins"].right=+ge.Right),isNaN(+ge.Bottom)||(h["!margins"].bottom=+ge.Bottom);break;case"displayrighttoleft":Q.Views||(Q.Views=[]),Q.Views[0]||(Q.Views[0]={}),Q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Pe=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Pe=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Pe=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Pe=!1}break;case"querytable":switch(s[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Pe=!1}break;case"datavalidation":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Pe=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Pe=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Pe=!1}break;case"smarttags":break;default:Pe=!1;break}if(Pe||s[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(s[0].slice(-2)==="/>")break;s[1]==="/"?OHe(P,se,j,n.slice(R,s.index)):(j=s,R=s.index+s[0].length);break}if(r.WTF)throw"Unrecognized tag: "+s[3]+"|"+l.join("|")}var Ye={};return!r.bookSheets&&!r.bookProps&&(Ye.Sheets=d),Ye.SheetNames=f,Ye.Workbook=Q,Ye.SSF=ei(Kr),Ye.Props=z,Ye.Custprops=P,Ye}function A8(e,t){switch(fM(t=t||{}),t.type||"base64"){case"base64":return sT(bc(e),t);case"binary":case"buffer":case"file":return sT(e,t);case"array":return sT(Lm(e),t)}}function FHe(e,t){var r=[];return e.Props&&r.push(oje(e.Props,t)),e.Custprops&&r.push(sje(e.Props,e.Custprops)),r.join("")}function LHe(){return""}function jHe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(tr("NumberFormat",null,{"ss:Format":_a(Kr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(tr("Style",i.join(""),o))}),tr("Styles",r.join(""))}function Kie(e){return tr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+oM(e.Ref,{r:0,c:0})})}function $He(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Kie(a)))}return tr("Names",r.join(""))}function BHe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],o=0;o<a.length;++o){var s=a[o];s.Sheet==r&&(s.Name.match(/^_xlfn\./)||i.push(Kie(s)))}return i.join("")}function UHe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(tr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(tr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(tr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(tr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(os("ProtectContents","True")),e["!protect"].objects&&a.push(os("ProtectObjects","True")),e["!protect"].scenarios&&a.push(os("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(os("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(os("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":tr("WorksheetOptions",a.join(""),{xmlns:lc.x})}function qHe(e){return e.map(function(t){var r=c9e(t.t||""),n=tr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return tr("Comment",n,{"ss:Author":t.a})}).join("")}function zHe(e,t,r,n,a,i,o){if(!e||e.v==null&&e.f==null)return"";var s={};if(e.f&&(s["ss:Formula"]="="+_a(oM(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=yi(e.F.slice(t.length+1));s["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(s["ss:HRef"]=_a(e.l.Target),e.l.Tooltip&&(s["x:HRefScreenTip"]=_a(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(s["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(s["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=jh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Kr[14]);break;case"s":f="String",h=l9e(e.v||"");break}var m=$m(n.cellXfs,e,n);s["ss:StyleID"]="s"+(21+m),s["ss:Index"]=o.c+1;var x=e.v!=null?h:"",g=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(g+=qHe(e.c)),tr("Cell",g,s)}function WHe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=ty(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function VHe(e,t,r,n){if(!e["!ref"])return"";var a=Vn(e["!ref"]),i=e["!merges"]||[],o=0,s=[];e["!cols"]&&e["!cols"].forEach(function(y,_){bm(y);var b=!!y.width,S=K3(_,y),C={"ss:Index":_+1};b&&(C["ss:Width"]=gw(S.width)),y.hidden&&(C["ss:Hidden"]="1"),s.push(tr("Column",null,C))});for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[WHe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>u)&&!(i[o].e.c<f)&&!(i[o].e.r<u)){(i[o].s.c!=f||i[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},x=en(m),g=l?(e[u]||[])[f]:e[x];d.push(zHe(g,x,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&s.push(d.join(""))}return s.join("")}function HHe(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],o=i?BHe(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?VHe(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(UHe(i,t,e,r)),n.join("")}function GHe(e,t){t||(t={}),e.SSF||(e.SSF=ei(Kr)),e.SSF&&(by(),U3(e.SSF),t.revssf=z3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],$m(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(FHe(e,t)),r.push(LHe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(tr("Worksheet",HHe(n,t,e),{"ss:Name":_a(e.SheetNames[n])}));return r[2]=jHe(e,t),r[3]=$He(e),to+tr("Workbook",r.join(""),{xmlns:lc.ss,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:ss":lc.ss,"xmlns:dt":lc.dt,"xmlns:html":lc.html})}function KHe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=$9e(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=B9e(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var YHe=[60,1084,2066,2165,2175];function XHe(e,t,r,n,a){var i=n,o=[],s=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&s.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(s)}o.push(s),r.l+=i;for(var l=ch(r,r.l),u=N8[l],d=0;u!=null&&YHe.indexOf(l)>-1;)i=ch(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),s=r.slice(d,r.l+4+i),o.push(s),r.l+=4+i,u=N8[l=ch(r,r.l)];var f=$o(o);as(f,0);var h=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(h),h+=o[m].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function Fd(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Kr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||jh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uw(e.v):e.w=hg(e.v):e.w=au(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&_y(Kr[n]||String(n))){var a=j0(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Rb(e,t,r){return{v:e,ixfe:t,t:r}}function ZHe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},i={},o={},s=null,l=[],u="",d={},f,h="",m,x,g,y,_={},b=[],S,C,E=[],O=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},M={},L=function(_t){return _t<8?V0[_t]:_t<64&&O[_t-8]||V0[_t]},z=function(_t,pt,Pr){var Bt=pt.XF.data;if(!(!Bt||!Bt.patternType||!Pr||!Pr.cellStyles)){pt.s={},pt.s.patternType=Bt.patternType;var dr;(dr=mw(L(Bt.icvFore)))&&(pt.s.fgColor={rgb:dr}),(dr=mw(L(Bt.icvBack)))&&(pt.s.bgColor={rgb:dr})}},P=function(_t,pt,Pr){if(!(J>1)&&!(Pr.sheetRows&&_t.r>=Pr.sheetRows)){if(Pr.cellStyles&&pt.XF&&pt.XF.data&&z(_t,pt,Pr),delete pt.ixfe,delete pt.XF,f=_t,h=en(_t),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),_t.r<o.s.r&&(o.s.r=_t.r),_t.c<o.s.c&&(o.s.c=_t.c),_t.r+1>o.e.r&&(o.e.r=_t.r+1),_t.c+1>o.e.c&&(o.e.c=_t.c+1),Pr.cellFormula&&pt.f){for(var Bt=0;Bt<b.length;++Bt)if(!(b[Bt][0].s.c>_t.c||b[Bt][0].s.r>_t.r)&&!(b[Bt][0].e.c<_t.c||b[Bt][0].e.r<_t.r)){pt.F=gn(b[Bt][0]),(b[Bt][0].s.c!=_t.c||b[Bt][0].s.r!=_t.r)&&delete pt.f,pt.f&&(pt.f=""+Os(b[Bt][1],o,_t,U,R));break}}Pr.dense?(a[_t.r]||(a[_t.r]=[]),a[_t.r][_t.c]=pt):a[h]=pt}},R={enc:!1,sbcch:0,snames:[],sharedf:_,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(R.password=t.password);var j,V=[],Z=[],te=[],q=[],Y=!1,U=[];U.SheetNames=R.snames,U.sharedf=R.sharedf,U.arrayf=R.arrayf,U.names=[],U.XTI=[];var G=0,J=0,D=0,K=[],Q=[],ae;R.codepage=1200,Vu(1200);for(var se=!1;e.l<e.length-1;){var fe=e.l,ie=e.read_shift(2);if(ie===0&&G===10)break;var X=e.l===e.length?0:e.read_shift(2),ue=N8[ie];if(ue&&ue.f){if(t.bookSheets&&G===133&&ie!==133)break;if(G=ie,ue.r===2||ue.r==12){var de=e.read_shift(2);if(X-=2,!R.enc&&de!==ie&&((de&255)<<8|de>>8)!==ie)throw new Error("rt mismatch: "+de+"!="+ie);ue.r==12&&(e.l+=10,X-=10)}var re={};if(ie===10?re=ue.f(e,X,R):re=XHe(ie,ue,e,X,R),J==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(ie){case 34:r.opts.Date1904=T.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(R.enc||(e.l=0),R.enc=re,!t.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:R.lastuser=re;break;case 66:var ke=Number(re);switch(ke){case 21010:ke=1200;break;case 32768:ke=1e4;break;case 32769:ke=1252;break}Vu(R.codepage=ke),se=!0;break;case 317:R.rrtabid=re;break;case 25:R.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:R.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(a["!type"]="dialog"),re.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),re.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:E.push(re);break;case 430:U.push([re]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(re);break;case 24:case 536:ae={Name:re.Name,Ref:Os(re.rgce,o,null,U,R)},re.itab>0&&(ae.Sheet=re.itab-1),U.names.push(ae),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(Q[re.itab-1]={ref:gn(re.rgce[0][0][1][2])});break;case 22:R.ExternCount=re;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(re),U.XTI=U.XTI.concat(re);break;case 2196:if(R.biff<8)break;ae!=null&&(ae.Comment=re[1]);break;case 18:a["!protect"]=re;break;case 19:re!==0&&R.WTF&&console.error("Password verifier: "+re);break;case 133:i[re.pos]=re,R.snames.push(re.name);break;case 10:{if(--J)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=gn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Re=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=gn(o),o.e.r=Re}o.e.r++,o.e.c++}V.length>0&&(a["!merges"]=V),Z.length>0&&(a["!objects"]=Z),te.length>0&&(a["!cols"]=te),q.length>0&&(a["!rows"]=q),T.Sheets.push(M)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(R.biff===8&&(R.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),R.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(R.biff=5,se=!0,Vu(R.codepage=28591)),R.biff==8&&re.BIFFVer==0&&re.dt==16&&(R.biff=2),J++)break;if(a=t.dense?[]:{},R.biff<8&&!se&&(se=!0,Vu(R.codepage=t.codepage||1252)),R.biff<5||re.BIFFVer==0&&re.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var Pe={pos:e.l-X,name:u};i[Pe.pos]=Pe,R.snames.push(u)}else u=(i[fe]||{name:""}).name;re.dt==32&&(a["!type"]="chart"),re.dt==64&&(a["!type"]="macro"),V=[],Z=[],R.arrayf=b=[],te=[],q=[],Y=!1,M={Hidden:(i[fe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[re.r]||[])[re.c]:a[en({c:re.c,r:re.r})])&&++re.c,S={ixfe:re.ixfe,XF:E[re.ixfe]||{},v:re.val,t:"n"},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t);break;case 5:case 517:S={ixfe:re.ixfe,XF:E[re.ixfe],v:re.val,t:re.t},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t);break;case 638:S={ixfe:re.ixfe,XF:E[re.ixfe],v:re.rknum,t:"n"},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t);break;case 189:for(var ge=re.c;ge<=re.C;++ge){var Ye=re.rkrec[ge-re.c][0];S={ixfe:Ye,XF:E[Ye],v:re.rkrec[ge-re.c][1],t:"n"},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:ge,r:re.r},S,t)}break;case 6:case 518:case 1030:{if(re.val=="String"){s=re;break}if(S=Rb(re.val,re.cell.ixfe,re.tt),S.XF=E[S.ixfe],t.cellFormula){var Qe=re.formula;if(Qe&&Qe[0]&&Qe[0][0]&&Qe[0][0][0]=="PtgExp"){var st=Qe[0][0][1][0],Pt=Qe[0][0][1][1],ft=en({r:st,c:Pt});_[ft]?S.f=""+Os(re.formula,o,re.cell,U,R):S.F=((t.dense?(a[st]||[])[Pt]:a[ft])||{}).F}else S.f=""+Os(re.formula,o,re.cell,U,R)}D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P(re.cell,S,t),s=re}break;case 7:case 519:if(s)s.val=re,S=Rb(re,s.cell.ixfe,"s"),S.XF=E[S.ixfe],t.cellFormula&&(S.f=""+Os(s.formula,o,s.cell,U,R)),D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P(s.cell,S,t),s=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(re);var _e=en(re[0].s);if(m=t.dense?(a[re[0].s.r]||[])[re[0].s.c]:a[_e],t.cellFormula&&m){if(!s||!_e||!m)break;m.f=""+Os(re[1],o,re[0],U,R),m.F=gn(re[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!s)break;_[en(s.cell)]=re[0],m=t.dense?(a[s.cell.r]||[])[s.cell.c]:a[en(s.cell)],(m||{}).f=""+Os(re[0],o,f,U,R)}}break;case 253:S=Rb(l[re.isst].t,re.ixfe,"s"),l[re.isst].h&&(S.h=l[re.isst].h),S.XF=E[S.ixfe],D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t);break;case 513:t.sheetStubs&&(S={ixfe:re.ixfe,XF:E[re.ixfe],t:"z"},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t));break;case 190:if(t.sheetStubs)for(var Te=re.c;Te<=re.C;++Te){var qe=re.ixfe[Te-re.c];S={ixfe:qe,XF:E[qe],t:"z"},D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:Te,r:re.r},S,t)}break;case 214:case 516:case 4:S=Rb(re.val,re.ixfe,"s"),S.XF=E[S.ixfe],D>0&&(S.z=K[S.ixfe>>8&63]),Fd(S,t,r.opts.Date1904),P({c:re.c,r:re.r},S,t);break;case 0:case 512:J===1&&(o=re);break;case 252:l=re;break;case 1054:if(R.biff==4){K[D++]=re[1];for(var yt=0;yt<D+163&&Kr[yt]!=re[1];++yt);yt>=163&&ph(re[1],D+163)}else ph(re[1],re[0]);break;case 30:{K[D++]=re;for(var vt=0;vt<D+163&&Kr[vt]!=re;++vt);vt>=163&&ph(re,D+163)}break;case 229:V=V.concat(re);break;case 93:Z[re.cmo[0]]=R.lastobj=re;break;case 438:R.lastobj.TxO=re;break;case 127:R.lastobj.ImData=re;break;case 440:for(y=re[0].s.r;y<=re[0].e.r;++y)for(g=re[0].s.c;g<=re[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[en({c:g,r:y})],m&&(m.l=re[1]);break;case 2048:for(y=re[0].s.r;y<=re[0].e.r;++y)for(g=re[0].s.c;g<=re[0].e.c;++g)m=t.dense?(a[y]||[])[g]:a[en({c:g,r:y})],m&&m.l&&(m.l.Tooltip=re[1]);break;case 28:{if(R.biff<=5&&R.biff>=2)break;m=t.dense?(a[re[0].r]||[])[re[0].c]:a[en(re[0])];var ht=Z[re[2]];m||(t.dense?(a[re[0].r]||(a[re[0].r]=[]),m=a[re[0].r][re[0].c]={t:"z"}):m=a[en(re[0])]={t:"z"},o.e.r=Math.max(o.e.r,re[0].r),o.s.r=Math.min(o.s.r,re[0].r),o.e.c=Math.max(o.e.c,re[0].c),o.s.c=Math.min(o.s.c,re[0].c)),m.c||(m.c=[]),x={a:re[1],t:ht.TxO.t},m.c.push(x)}break;case 2173:jUe(E[re.ixfe],re.ext);break;case 125:{if(!R.cellStyles)break;for(;re.e>=re.s;)te[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},Y||(Y=!0,nM(re.w/256)),bm(te[re.e+1])}break;case 520:{var Ie={};re.level!=null&&(q[re.r]=Ie,Ie.level=re.level),re.hidden&&(q[re.r]=Ie,Ie.hidden=!0),re.hpt&&(q[re.r]=Ie,Ie.hpt=re.hpt,Ie.hpx=ty(re.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||K0(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=re;break;case 161:a["!margins"]||K0(a["!margins"]={}),a["!margins"].header=re.header,a["!margins"].footer=re.footer;break;case 574:re.RTL&&(T.Views[0].RTL=!0);break;case 146:O=re;break;case 2198:j=re;break;case 140:C=re;break;case 442:u?M.CodeName=re||M.name:T.WBProps.CodeName=re||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=X}return r.SheetNames=Di(i).sort(function(Ze,_t){return Number(Ze)-Number(_t)}).map(function(Ze){return i[Ze].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Q.forEach(function(Ze,_t){r.Sheets[r.SheetNames[_t]]["!autofilter"]=Ze}),r.Strings=l,r.SSF=ei(Kr),R.enc&&(r.Encryption=R.enc),j&&(r.Themes=j),r.Metadata={},C!==void 0&&(r.Metadata.Country=C),U.names.length>0&&(T.Names=U.names),r.Workbook=T,r}var Q2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function JHe(e,t,r){var n=Mr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=aV(n,y8,Q2.DSI);for(var i in a)t[i]=a[i]}catch(u){if(r.WTF)throw u}var o=Mr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var s=aV(o,x8,Q2.SI);for(var l in s)t[l]==null&&(t[l]=s[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Gae(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function QHe(e,t){var r=[],n=[],a=[],i=0,o,s=RW(y8,"n"),l=RW(x8,"n");if(e.Props)for(o=Di(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(s,o[i])?r:Object.prototype.hasOwnProperty.call(l,o[i])?n:a).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Di(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(s,o[i])?r:Object.prototype.hasOwnProperty.call(l,o[i])?n:a).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<a.length;++i)eie.indexOf(a[i][0])>-1||Hae.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Mr.utils.cfb_add(t,"/SummaryInformation",iV(n,Q2.SI,l,x8)),(r.length||u.length)&&Mr.utils.cfb_add(t,"/DocumentSummaryInformation",iV(r,Q2.DSI,s,y8,u.length?u:null,Q2.UDI))}function Yie(e,t){t||(t={}),fM(t),IR(),t.codepage&&DR(t.codepage);var r,n;if(e.FullPaths){if(Mr.find(e,"/encryption"))throw new Error("File is password-protected");r=Mr.find(e,"!CompObj"),n=Mr.find(e,"/Workbook")||Mr.find(e,"/Book")}else{switch(t.type){case"base64":e=fc(bc(e));break;case"binary":e=fc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}as(e,0),n={content:e}}var a,i;if(r&&KHe(r),t.bookProps&&!t.bookSheets)a={};else{var o=Sn?"buffer":"array";if(n&&n.content)a=ZHe(n.content,t);else if((i=Mr.find(e,"PerfectOffice_MAIN"))&&i.content)a=G0.to_workbook(i.content,(t.type=o,t));else if((i=Mr.find(e,"NativeContent_MAIN"))&&i.content)a=G0.to_workbook(i.content,(t.type=o,t));else throw(i=Mr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Mr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=fqe(e))}var s={};return e.FullPaths&&JHe(e,s,t),a.Props=a.Custprops=s,t.bookFiles&&(a.cfb=e),a}function eGe(e,t){var r=t||{},n=Mr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Mr.utils.cfb_add(n,a,Xie(e,r)),r.biff==8&&(e.Props||e.Custprops)&&QHe(e,n),r.biff==8&&e.vbaraw&&hqe(n,Mr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var xw={0:{f:AWe},1:{f:DWe},2:{f:ZWe},3:{f:BWe},4:{f:FWe},5:{f:KWe},6:{f:rVe},7:{f:WWe},8:{f:cVe},9:{f:lVe},10:{f:oVe},11:{f:sVe},12:{f:RWe},13:{f:QWe},14:{f:qWe},15:{f:jWe},16:{f:Uie},17:{f:aVe},18:{f:HWe},19:{f:GR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:aHe},40:{},42:{},43:{f:rUe},44:{f:eUe},45:{f:iUe},46:{f:sUe},47:{f:oUe},48:{},49:{f:E9e},50:{},51:{f:UUe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:die},62:{f:tVe},63:{f:XUe},64:{f:NVe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:zs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_Ve},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:TWe},148:{f:EWe,p:16},151:{f:mVe},152:{},153:{f:tHe},154:{},155:{},156:{f:QVe},157:{},158:{},159:{T:1,f:vBe},160:{T:-1},161:{T:1,f:Lg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uVe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:$Ue},336:{T:-1},337:{f:WUe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:v8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:uie},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gVe},427:{f:vVe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:xVe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:PWe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hVe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:v8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:sqe},633:{T:1},634:{T:-1},635:{T:1,f:iqe},636:{T:-1},637:{f:O9e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:qVe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:kVe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},N8={6:{f:iT},10:{f:Mp},12:{f:lo},13:{f:lo},14:{f:$i},15:{f:$i},16:{f:Fs},17:{f:$i},18:{f:$i},19:{f:lo},20:{f:dV},21:{f:dV},23:{f:uie},24:{f:hV},25:{f:$i},26:{},27:{},28:{f:k$e},29:{},34:{f:$i},35:{f:fV},38:{f:Fs},39:{f:Fs},40:{f:Fs},41:{f:Fs},42:{f:$i},43:{f:$i},47:{f:jBe},49:{f:Qje},51:{f:lo},60:{},61:{f:Kje},64:{f:$i},65:{f:Jje},66:{f:lo},77:{},80:{},81:{},82:{},85:{f:lo},89:{},90:{},91:{},92:{f:Lje},93:{f:P$e},94:{},95:{f:$i},96:{},97:{},99:{f:$i},125:{f:die},128:{f:p$e},129:{f:$je},130:{f:lo},131:{f:$i},132:{f:$i},133:{f:Bje},134:{},140:{f:L$e},141:{f:lo},144:{},146:{f:B$e},151:{},152:{},153:{},154:{},155:{},156:{f:lo},157:{},158:{},160:{f:G$e},161:{f:z$e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:u$e},190:{f:d$e},193:{f:Mp},197:{},198:{},199:{},200:{},201:{},202:{f:$i},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:lo},220:{},221:{f:$i},222:{},224:{f:h$e},225:{f:Fje},226:{f:Mp},227:{},229:{f:E$e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:qje},253:{f:t$e},255:{f:Wje},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:tie},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:$i},353:{f:Mp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:x$e},431:{f:$i},432:{},433:{},434:{},437:{},438:{f:D$e},439:{f:$i},440:{f:I$e},441:{},442:{f:n_},443:{},444:{f:lo},445:{},446:{},448:{f:Mp},449:{f:Gje,r:2},450:{f:Mp},512:{f:lV},513:{f:H$e},515:{f:v$e},516:{f:n$e},517:{f:uV},519:{f:K$e},520:{f:Vje},523:{},545:{f:pV},549:{f:sV},566:{},574:{f:Xje},638:{f:c$e},659:{},1048:{},1054:{f:i$e},1084:{},1212:{f:S$e},2048:{f:M$e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ob},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Mp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:U$e,r:12},2173:{f:LUe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:$i,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:b$e,r:12},2197:{},2198:{f:OUe,r:12},2199:{},2200:{},2201:{},2202:{f:A$e,r:12},2203:{f:Mp},2204:{},2205:{},2206:{},2207:{},2211:{f:Hje},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:lo},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:W$e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:$$e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:lV},1:{},2:{f:Q$e},3:{f:Z$e},4:{f:X$e},5:{f:uV},7:{f:tBe},8:{},9:{f:Ob},11:{},22:{f:lo},30:{f:s$e},31:{},32:{},33:{f:pV},36:{},37:{f:sV},50:{f:rBe},62:{},52:{},67:{},68:{f:lo},69:{},86:{},126:{},127:{f:Y$e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:nBe},223:{},234:{},354:{},421:{},518:{f:iT},521:{f:Ob},536:{f:hV},547:{f:fV},561:{},579:{},1030:{f:iT},1033:{f:Ob},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function rr(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&WR(r)&&e.push(r)}}function tGe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return rr(e,t,r,a);var i=t;if(!isNaN(i)){for(var o=r.parts||[],s=0,l=0,u=0;u+(o[s]||8224)<=8224;)u+=o[s]||8224,s++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[s]||8224)<=8224;)u+=o[s]||8224,s++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function s_(e,t,r){return e||(e=Et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function rGe(e,t,r,n){var a=Et(9);return s_(a,e,t),rie(r,n||"b",a),a}function nGe(e,t,r){var n=Et(8+2*r.length);return s_(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function aGe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?_o(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?rr(e,2,eBe(r,n,a)):rr(e,3,J$e(r,n,a));return;case"b":case"e":rr(e,5,rGe(r,n,t.v,t.t));return;case"s":case"str":rr(e,4,nGe(r,n,(t.v||"").slice(0,255)));return}rr(e,1,s_(null,r,n))}function iGe(e,t,r,n){var a=Array.isArray(t),i=Vn(t["!ref"]||"A1"),o,s="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=gn(i)}for(var u=i.s.r;u<=i.e.r;++u){s=Ji(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(l[d]=vi(d)),o=l[d]+s;var f=a?(t[u]||[])[d]:t[o];f&&aGe(e,f,u,d)}}}function oGe(e,t){for(var r=t||{},n=$l(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return rr(n,r.biff==4?1033:r.biff==3?521:9,eM(e,16,r)),iGe(n,e.Sheets[e.SheetNames[a]],a,r),rr(n,10),n.end()}function sGe(e,t,r){rr(e,49,e$e({sz:12,name:"Arial"},r))}function lGe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&rr(e,1054,o$e(a,t[a],r))})}function cGe(e,t){var r=Et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),rr(e,2151,r),r=Et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),sie(Vn(t["!ref"]||"A1"),r),r.write_shift(4,4),rr(e,2152,r)}function uGe(e,t){for(var r=0;r<16;++r)rr(e,224,cV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){rr(e,224,cV(n,0,t))})}function dGe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];rr(e,440,R$e(n)),n[1].Tooltip&&rr(e,2048,F$e(n))}delete t["!links"]}function fGe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&rr(e,125,q$e(K3(a,n),a))})}}function hGe(e,t,r,n,a){var i=16+$m(a.cellXfs,t,a);if(t.v==null&&!t.bf){rr(e,513,vg(r,n,i));return}if(t.bf)rr(e,6,$ze(t,r,n,a,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?_o(Qa(t.v)):t.v;rr(e,515,y$e(r,n,o,i));break;case"b":case"e":rr(e,517,g$e(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var s=lM(a.Strings,t.v,a.revStrings);rr(e,253,r$e(r,n,s,i))}else rr(e,516,a$e(r,n,(t.v||"").slice(0,255),i,a));break;default:rr(e,513,vg(r,n,i))}}function pGe(e,t,r){var n=$l(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=(r||{}).Workbook||{},s=(o.Sheets||[])[e]||{},l=Array.isArray(i),u=t.biff==8,d,f="",h=[],m=Vn(i["!ref"]||"A1"),x=u?65536:16384;if(m.e.c>255||m.e.r>=x){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,x-1)}rr(n,2057,eM(r,16,t)),rr(n,13,Kc(1)),rr(n,12,Kc(100)),rr(n,15,ol(!0)),rr(n,17,ol(!1)),rr(n,16,mg(.001)),rr(n,95,ol(!0)),rr(n,42,ol(!1)),rr(n,43,ol(!1)),rr(n,130,Kc(1)),rr(n,128,m$e()),rr(n,131,ol(!1)),rr(n,132,ol(!1)),u&&fGe(n,i["!cols"]),rr(n,512,l$e(m,t)),u&&(i["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){f=Ji(g);for(var y=m.s.c;y<=m.e.c;++y){g===m.s.r&&(h[y]=vi(y)),d=h[y]+f;var _=l?(i[g]||[])[y]:i[d];_&&(hGe(n,_,g,y,t),u&&_.l&&i["!links"].push([d,_.l]))}}var b=s.CodeName||s.name||a;return u&&rr(n,574,Zje((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&rr(n,229,C$e(i["!merges"])),u&&dGe(n,i),rr(n,442,nie(b)),u&&cGe(n,i),rr(n,10),n.end()}function mGe(e,t,r){var n=$l(),a=(e||{}).Workbook||{},i=a.Sheets||[],o=a.WBProps||{},s=r.biff==8,l=r.biff==5;if(rr(n,2057,eM(e,5,r)),r.bookType=="xla"&&rr(n,135),rr(n,225,s?Kc(1200):null),rr(n,193,gje(2)),l&&rr(n,191),l&&rr(n,192),rr(n,226),rr(n,92,jje("SheetJS",r)),rr(n,66,Kc(s?1200:1252)),s&&rr(n,353,Kc(0)),s&&rr(n,448),rr(n,317,V$e(e.SheetNames.length)),s&&e.vbaraw&&rr(n,211),s&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";rr(n,442,nie(u))}rr(n,156,Kc(17)),rr(n,25,ol(!1)),rr(n,18,ol(!1)),rr(n,19,Kc(0)),s&&rr(n,431,ol(!1)),s&&rr(n,444,Kc(0)),rr(n,61,Yje()),rr(n,64,ol(!1)),rr(n,141,Kc(0)),rr(n,34,ol(GVe(e)=="true")),rr(n,14,ol(!0)),s&&rr(n,439,ol(!1)),rr(n,218,Kc(0)),sGe(n,e,r),lGe(n,e.SSF,r),uGe(n,r),s&&rr(n,352,ol(!1));var d=n.end(),f=$l();s&&rr(f,140,j$e()),s&&r.Strings&&tGe(f,252,zje(r.Strings)),rr(f,10);var h=f.end(),m=$l(),x=0,g=0;for(g=0;g<e.SheetNames.length;++g)x+=(s?12:11)+(s?2:1)*e.SheetNames[g].length;var y=d.length+x+h.length;for(g=0;g<e.SheetNames.length;++g){var _=i[g]||{};rr(m,133,Uje({pos:y,hs:_.Hidden||0,dt:0,name:e.SheetNames[g]},r)),y+=t[g].length}var b=m.end();if(x!=b.length)throw new Error("BS8 "+x+" != "+b.length);var S=[];return d.length&&S.push(d),b.length&&S.push(b),h.length&&S.push(h),$o(S)}function gGe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=ei(Kr)),e&&e.SSF&&(by(),U3(e.SSF),r.revssf=z3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,hM(r),r.cellXfs=[],$m(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=pGe(a,r,e);return n.unshift(mGe(e,n,r)),$o(n)}function Xie(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Bl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return gGe(e,t);case 4:case 3:case 2:return oGe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function AV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=a.index,s=i&&i.index||e.length,l=e9e(e.slice(o,s),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(o=0;o<l.length;++o){var g=l[o].trim(),y=g.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(y!="<td"&&y!="<th")){var _=g.split(/<\/t[dh]>/i);for(s=0;s<_.length;++s){var b=_[s].trim();if(b.match(/<t[dh]/i)){for(var S=b,C=0;S.charAt(0)=="<"&&(C=S.indexOf(">"))>-1;)S=S.slice(C+1);for(var E=0;E<x.length;++E){var O=x[E];O.s.c==d&&O.s.r<u&&u<=O.e.r&&(d=O.e.c+1,E=-1)}var T=an(b.slice(0,b.indexOf(">")));h=T.colspan?+T.colspan:1,((f=+T.rowspan)>1||h>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var M=T.t||T["data-t"]||"";if(!S.length){d+=h;continue}if(S=wae(S),m.s.r>u&&(m.s.r=u),m.e.r<u&&(m.e.r=u),m.s.c>d&&(m.s.c=d),m.e.c<d&&(m.e.c=d),!S.length){d+=h;continue}var L={t:"s",v:S};r.raw||!S.trim().length||M=="s"||(S==="TRUE"?L={t:"b",v:!0}:S==="FALSE"?L={t:"b",v:!1}:isNaN(Xu(S))?isNaN(Q1(S).getDate())||(L={t:"d",v:Qa(S)},r.cellDates||(L={t:"n",v:_o(L.v)}),L.z=r.dateNF||Kr[14]):L={t:"n",v:Xu(S)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=L):n[en({r:u,c:d})]=L,d+=h}}}}return n["!ref"]=gn(m),x.length&&(n["!merges"]=x),n}function vGe(e,t,r,n){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var s=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){s=-1;break}s=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(s<0)){var d=en({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||UR(f.w||(kh(f),f.w)||""))||"",m={};s>1&&(m.rowspan=s),l>1&&(m.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,i.push(tr("td",h,m))}}var x="<tr>";return x+i.join("")+"</tr>"}var yGe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',xGe="</body></html>";function wGe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return jm(AV(r[0],t),t);var n=vM();return r.forEach(function(a,i){yM(n,AV(a,t),"Sheet"+(i+1))}),n}function _Ge(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Zie(e,t){var r=t||{},n=r.header!=null?r.header:yGe,a=r.footer!=null?r.footer:xGe,i=[n],o=Bl(e["!ref"]);r.dense=Array.isArray(e),i.push(_Ge(e,o,r));for(var s=o.s.r;s<=o.e.r;++s)i.push(vGe(e,o,s,r));return i.push("</table>"+a),i.join("")}function Jie(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?yi(n.origin):n.origin;a=o.r,i=o.c}var s=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,s.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=Bl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),x=0,g=0,y=0,_=0,b=0,S=0;for(e["!cols"]||(e["!cols"]=[]);x<s.length&&g<l;++x){var C=s[x];if(NV(C)){if(n.display)continue;m[g]={hidden:!0}}var E=C.children;for(y=_=0;y<E.length;++y){var O=E[y];if(!(n.display&&NV(O))){var T=O.hasAttribute("data-v")?O.getAttribute("data-v"):O.hasAttribute("v")?O.getAttribute("v"):wae(O.innerHTML),M=O.getAttribute("data-z")||O.getAttribute("z");for(h=0;h<f.length;++h){var L=f[h];L.s.c==_+i&&L.s.r<g+a&&g+a<=L.e.r&&(_=L.e.c+1-i,h=-1)}S=+O.getAttribute("colspan")||1,((b=+O.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:g+a,c:_+i},e:{r:g+a+(b||1)-1,c:_+i+(S||1)-1}});var z={t:"s",v:T},P=O.getAttribute("data-t")||O.getAttribute("t")||"";T!=null&&(T.length==0?z.t=P||"z":n.raw||T.trim().length==0||P=="s"||(T==="TRUE"?z={t:"b",v:!0}:T==="FALSE"?z={t:"b",v:!1}:isNaN(Xu(T))?isNaN(Q1(T).getDate())||(z={t:"d",v:Qa(T)},n.cellDates||(z={t:"n",v:_o(z.v)}),z.z=n.dateNF||Kr[14]):z={t:"n",v:Xu(T)})),z.z===void 0&&M!=null&&(z.z=M);var R="",j=O.getElementsByTagName("A");if(j&&j.length)for(var V=0;V<j.length&&!(j[V].hasAttribute("href")&&(R=j[V].getAttribute("href"),R.charAt(0)!="#"));++V);R&&R.charAt(0)!="#"&&(z.l={Target:R}),n.dense?(e[g+a]||(e[g+a]=[]),e[g+a][_+i]=z):e[en({c:_+i,r:g+a})]=z,u.e.c<_+i&&(u.e.c=_+i),_+=S}}++g}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,g-1+a),e["!ref"]=gn(u),g>=l&&(e["!fullref"]=gn((u.e.r=s.length-x+g-1+a,u))),e}function Qie(e,t){var r=t||{},n=r.dense?[]:{};return Jie(n,e,t)}function bGe(e,t){return jm(Qie(e,t),t)}function NV(e){var t="",r=SGe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function SGe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function AGe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Wn(t.replace(/<[^>]*>/g,""));return[r]}var kV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function eoe(e,t){var r=t||{},n=qR(e),a=[],i,o,s={name:""},l="",u=0,d,f,h={},m=[],x=r.dense?[]:{},g,y,_={value:""},b="",S=0,C=[],E=-1,O=-1,T={s:{r:1e6,c:1e7},e:{r:0,c:0}},M=0,L={},z=[],P={},R=0,j=0,V=[],Z=1,te=1,q=[],Y={Names:[]},U={},G=["",""],J=[],D={},K="",Q=0,ae=!1,se=!1,fe=0;for(hw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=hw.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(T.e.c>=T.s.c&&T.e.r>=T.s.r?x["!ref"]=gn(T):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=T.e.r&&(x["!fullref"]=x["!ref"],T.e.r=r.sheetRows-1,x["!ref"]=gn(T)),z.length&&(x["!merges"]=z),V.length&&(x["!rows"]=V),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),m.push(d.name),h[d.name]=x,se=!1):g[0].charAt(g[0].length-2)!=="/"&&(d=an(g[0],!1),E=O=-1,T.s.r=T.s.c=1e7,T.e.r=T.e.c=0,x=r.dense?[]:{},z=[],V=[],se=!0);break;case"table-row-group":g[1]==="/"?--M:++M;break;case"table-row":case"":if(g[1]==="/"){E+=Z,Z=1;break}if(f=an(g[0],!1),f.?E=f.-1:E==-1&&(E=0),Z=+f["number-rows-repeated"]||1,Z<10)for(fe=0;fe<Z;++fe)M>0&&(V[E+fe]={level:M});O=-1;break;case"covered-table-cell":g[1]!=="/"&&++O,r.sheetStubs&&(r.dense?(x[E]||(x[E]=[]),x[E][O]={t:"z"}):x[en({r:E,c:O})]={t:"z"}),b="",C=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++O,_=an(g[0],!1),te=parseInt(_["number-columns-repeated"]||"1",10),y={t:"z",v:null},_.formula&&r.cellFormula!=!1&&(y.f=_V(Wn(_.formula))),(_.||_["value-type"])=="string"&&(y.t="s",y.v=Wn(_["string-value"]||""),r.dense?(x[E]||(x[E]=[]),x[E][O]=y):x[en({r:E,c:O})]=y),O+=te-1;else if(g[1]!=="/"){++O,b="",S=0,C=[],te=1;var ie=Z?E+Z-1:E;if(O>T.e.c&&(T.e.c=O),O<T.s.c&&(T.s.c=O),E<T.s.r&&(T.s.r=E),ie>T.e.r&&(T.e.r=ie),_=an(g[0],!1),J=[],D={},y={t:_.||_["value-type"],v:null},r.cellFormula)if(_.formula&&(_.formula=Wn(_.formula)),_["number-matrix-columns-spanned"]&&_["number-matrix-rows-spanned"]&&(R=parseInt(_["number-matrix-rows-spanned"],10)||0,j=parseInt(_["number-matrix-columns-spanned"],10)||0,P={s:{r:E,c:O},e:{r:E+R-1,c:O+j-1}},y.F=gn(P),q.push([P,y.F])),_.formula)y.f=_V(_.formula);else for(fe=0;fe<q.length;++fe)E>=q[fe][0].s.r&&E<=q[fe][0].e.r&&O>=q[fe][0].s.c&&O<=q[fe][0].e.c&&(y.F=q[fe][1]);switch((_["number-columns-spanned"]||_["number-rows-spanned"])&&(R=parseInt(_["number-rows-spanned"],10)||0,j=parseInt(_["number-columns-spanned"],10)||0,P={s:{r:E,c:O},e:{r:E+R-1,c:O+j-1}},z.push(P)),_["number-columns-repeated"]&&(te=parseInt(_["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Xa(_["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(_.value);break;case"percentage":y.t="n",y.v=parseFloat(_.value);break;case"currency":y.t="n",y.v=parseFloat(_.value);break;case"date":y.t="d",y.v=Qa(_["date-value"]),r.cellDates||(y.t="n",y.v=_o(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=ZLe(_["time-value"])/86400,r.cellDates&&(y.t="d",y.v=W3(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(_.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",_["string-value"]!=null&&(b=Wn(_["string-value"]),C=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(ae=!1,y.t==="s"&&(y.v=b||"",C.length&&(y.R=C),ae=S==0),U.Target&&(y.l=U),J.length>0&&(y.c=J,J=[]),b&&r.cellText!==!1&&(y.w=b),ae&&(y.t="z",delete y.v),(!ae||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var X=0;X<Z;++X){if(te=parseInt(_["number-columns-repeated"]||"1",10),r.dense)for(x[E+X]||(x[E+X]=[]),x[E+X][O]=X==0?y:ei(y);--te>0;)x[E+X][O+te]=ei(y);else for(x[en({r:E+X,c:O})]=y;--te>0;)x[en({r:E+X,c:O+te})]=ei(y);T.e.c<=O&&(T.e.c=O)}te=parseInt(_["number-columns-repeated"]||"1",10),O+=te-1,te=0,y={},b="",C=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i;D.t=b,C.length&&(D.R=C),D.a=K,J.push(D)}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);K="",Q=0,b="",S=0,C=[];break;case"creator":g[1]==="/"?K=n.slice(Q,g.index):Q=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&a.push([g[3],!1]);b="",S=0,C=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(L[s.name]=l,(i=a.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(l="",s=an(g[0],!1),a.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=an(g[0],!1),l+=kV[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=an(g[0],!1),l+=kV[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,g.index);break}else u=g.index+g[0].length;break;case"named-range":o=an(g[0],!1),G=oT(o["cell-range-address"]);var ue={Name:o.name,Ref:G[0]+"!"+G[1]};se&&(ue.Sheet=m.length),Y.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(g[1]==="/"&&(!_||!_["string-value"])){var de=AGe(n.slice(S,g.index));b=(b.length>0?b+`
`:"")+de[0]}else an(g[0],!1),S=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{G=oT(an(g[0])["target-range-address"]),h[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(U=an(g[0],!1),!U.href)break;U.Target=Wn(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(G=oT(U.Target.slice(1)),U.Target="#"+G[0]+"!"+G[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var re={Sheets:h,SheetNames:m,Workbook:Y};return r.bookSheets&&delete re.Sheets,re}function EV(e,t){t=t||{},Gc(e,"META-INF/manifest.xml")&&Z9e(so(e,"META-INF/manifest.xml"),t);var r=hc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=eoe(Sa(r),t);return Gc(e,"meta.xml")&&(n.Props=Wae(so(e,"meta.xml"))),n}function CV(e,t){return eoe(e,t)}var NGe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+fw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return to+t}}(),PV=function(){var e=function(i){return _a(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,s){var l=[];l.push('      <table:table table:name="'+_a(o.SheetNames[s])+`" table:style-name="ta1">
`);var u=0,d=0,f=Bl(i["!ref"]||"A1"),h=i["!merges"]||[],m=0,x=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var g="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;u<=f.e.r;++u){for(g=y[u]?' table:style-name="ro'+y[u].ods+'"':"",l.push("        <table:table-row"+g+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var _=!1,b={},S="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(_=!0),b["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,b["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(_){l.push(r);continue}var C=en({r:u,c:d}),E=x?(i[u]||[])[d]:i[C];if(E&&E.f&&(b["table:formula"]=_a(Vze(E.f)),E.F&&E.F.slice(0,C.length)==C)){var O=Bl(E.F);b["table:number-matrix-columns-spanned"]=O.e.c-O.s.c+1,b["table:number-matrix-rows-spanned"]=O.e.r-O.s.r+1}if(!E){l.push(t);continue}switch(E.t){case"b":S=E.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=E.v?"true":"false";break;case"n":S=E.w||String(E.v||0),b["office:value-type"]="float",b["office:value"]=E.v||0;break;case"s":case"str":S=E.v==null?"":E.v,b["office:value-type"]="string";break;case"d":S=E.w||Qa(E.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=Qa(E.v).toISOString(),b["table:style-name"]="ce1";break;default:l.push(t);continue}var T=e(S);if(E.l&&E.l.Target){var M=E.l.Target;M=M.charAt(0)=="#"?"#"+Hze(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),T=tr("text:a",T,{"xlink:href":M.replace(/&/g,"&amp;")})}l.push("          "+tr("table:table-cell",tr("text:p",T,{}),b)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},a=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var s=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;bm(f),f.ods=s;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+s+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++s}}});var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++l}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,s){var l=[to],u=fw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=fw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});s.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(zae().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),a(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)l.push(n(o.Sheets[o.SheetNames[f]],o,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),s.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function toe(e,t){if(t.bookType=="fods")return PV(e,t);var r=jR(),n="",a=[],i=[];return n="mimetype",_n(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",_n(r,n,PV(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",_n(r,n,NGe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",_n(r,n,to+zae()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",_n(r,n,eje(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",_n(r,n,J9e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function yg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function k8(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Sa(Lm(e))}function kGe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):fc(Xd(e))}function EGe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Am(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function TV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function CGe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function PGe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function ww(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ya(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ti(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Xn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=ww(e,r),i=a&7;a=Math.floor(a/8);var o=0,s;if(a==0)break;switch(i){case 0:{for(var l=r[0];e[r[0]++]>=128;);s=e.slice(l,r[0])}break;case 5:o=4,s=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,s=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=ww(e,r),s=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:s,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Jo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ya(n*8+a.type)),a.type==2&&t.push(ya(a.data.length)),t.push(a.data))})}),Am(t)}function dM(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Vc(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=ww(e,n),i=Xn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Ti(i[1][0].data),messages:[]};i[2].forEach(function(s){var l=Xn(s.data),u=Ti(l[3][0].data);o.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=Ti(i[3][0].data)>>>0>0),r.push(o)}return r}function Rv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ya(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ya(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:ya(o.data.length)}],n[2].push({data:Jo(o.meta),type:2})});var i=Jo(n);t.push(ya(i.length)),t.push(i),a.forEach(function(o){return t.push(o)})}),Am(t)}function TGe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=ww(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var s=o-59;o=t[r[0]],s>1&&(o|=t[r[0]+1]<<8),s>2&&(o|=t[r[0]+2]<<16),s>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=s}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var l=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Am(a)],l==0)throw new Error("Invalid offset 0");if(l>a[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(a.push(a[0].slice(-l)),u-=l;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-l,-l+u))}}var d=Am(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Hc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(TGe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Am(t)}function Mv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=ya(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Am(t)}function OGe(e,t,r,n){var a=yg(e),i=a.getUint32(4,!0),o=(n>1?12:8)+TV(i&(n>1?3470:398))*4,s=-1,l=-1,u=NaN,d=new Date(2001,0,1);i&512&&(s=a.getUint32(o,!0),o+=4),o+=TV(i&(n>1?12288:4096))*4,i&16&&(l=a.getUint32(o,!0),o+=4),i&32&&(u=a.getFloat64(o,!0),o+=8),i&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function DGe(e,t,r){var n=yg(e),a=n.getUint32(8,!0),i=12,o=-1,s=-1,l=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(l=CGe(e,i),i+=16),a&2&&(u=n.getFloat64(i,!0),i+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(s=n.getUint32(i,!0),i+=4),a&16&&(o=n.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[s]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function lT(e,t){var r=new Uint8Array(32),n=yg(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,PGe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function cT(e,t){var r=new Uint8Array(32),n=yg(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function IGe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return OGe(e,t,r,e[0]);case 5:return DGe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ts(e){var t=Xn(e);return ww(t[1][0].data)}function OV(e,t){var r=Xn(t.data),n=Ti(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(o){var s=Xn(o.data),l=Ti(s[1][0].data)>>>0;switch(n){case 1:i[l]=k8(s[3][0].data);break;case 8:{var u=e[Ts(s[9][0].data)][0],d=Xn(u.data),f=e[Ts(d[1][0].data)][0],h=Ti(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var m=Xn(f.data);i[l]=m[3].map(function(x){return k8(x.data)}).join("")}break}}),i}function RGe(e,t){var r,n,a,i,o,s,l,u,d,f,h,m,x,g,y=Xn(e),_=Ti(y[1][0].data)>>>0,b=Ti(y[2][0].data)>>>0,S=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&Ti(y[8][0].data)>0||!1,C,E;if((i=(a=y[7])==null?void 0:a[0])!=null&&i.data&&t!=0)C=(s=(o=y[7])==null?void 0:o[0])==null?void 0:s.data,E=(u=(l=y[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=y[4])==null?void 0:d[0])!=null&&f.data&&t!=1)C=(m=(h=y[4])==null?void 0:h[0])==null?void 0:m.data,E=(g=(x=y[3])==null?void 0:x[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var O=S?4:1,T=yg(C),M=[],L=0;L<C.length/2;++L){var z=T.getUint16(L*2,!0);z<65535&&M.push([L,z])}if(M.length!=b)throw"Expected ".concat(b," cells, found ").concat(M.length);var P=[];for(L=0;L<M.length-1;++L)P[M[L][0]]=E.subarray(M[L][1]*O,M[L+1][1]*O);return M.length>=1&&(P[M[M.length-1][0]]=E.subarray(M[M.length-1][1]*O)),{R:_,cells:P}}function MGe(e,t){var r,n=Xn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ti(n[7][0].data)>>>0>0?1:0:-1,i=dM(n[5],function(o){return RGe(o,a)});return{nrows:Ti(n[4][0].data)>>>0,data:i.reduce(function(o,s){return o[s.R]||(o[s.R]=[]),s.cells.forEach(function(l,u){if(o[s.R][u])throw new Error("Duplicate cell r=".concat(s.R," c=").concat(u));o[s.R][u]=l}),o},[])}}function FGe(e,t,r){var n,a=Xn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ti(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(Ti(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=gn(i);var o=Xn(a[4][0].data),s=OV(e,e[Ts(o[4][0].data)][0]),l=(n=o[17])!=null&&n[0]?OV(e,e[Ts(o[17][0].data)][0]):[],u=Xn(o[3][0].data),d=0;u[1].forEach(function(f){var h=Xn(f.data),m=e[Ts(h[2][0].data)][0],x=Ti(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var g=MGe(e,m);g.data.forEach(function(y,_){y.forEach(function(b,S){var C=en({r:d+_,c:S}),E=IGe(b,s,l);E&&(r[C]=E)})}),d+=g.nrows})}function LGe(e,t){var r=Xn(t.data),n={"!ref":"A1"},a=e[Ts(r[2][0].data)],i=Ti(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return FGe(e,a[0],n),n}function jGe(e,t){var r,n=Xn(t.data),a={name:(r=n[1])!=null&&r[0]?k8(n[1][0].data):"",sheets:[]},i=dM(n[2],Ts);return i.forEach(function(o){e[o].forEach(function(s){var l=Ti(s.meta[1][0].data);l==6e3&&a.sheets.push(LGe(e,s))})}),a}function $Ge(e,t){var r=vM(),n=Xn(t.data),a=dM(n[1],Ts);if(a.forEach(function(i){e[i].forEach(function(o){var s=Ti(o.meta[1][0].data);if(s==2){var l=jGe(e,o);l.sheets.forEach(function(u,d){yM(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function uT(e){var t,r,n,a,i={},o=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Hc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=Vc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var s=((a=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ti(i[1][0].meta[1][0].data)==1&&i[1][0];if(s||o.forEach(function(l){i[l].forEach(function(u){var d=Ti(u.meta[1][0].data)>>>0;if(d==1)if(!s)s=u;else throw new Error("Document has multiple roots")})}),!s)throw new Error("Cannot find Document root");return $Ge(i,s)}function BGe(e,t,r){var n,a,i,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var s=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ti(e[8][0].data)>0||!1;if(s)throw"Math only works with normal offsets";for(var l=0,u=yg(e[7][0].data),d=0,f=[],h=yg(e[4][0].data),m=0,x=[],g=0;g<t.length;++g){if(t[g]==null){u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}u.setUint16(g*2,d,!0),h.setUint16(g*2,m,!0);var y,_;switch(typeof t[g]){case"string":y=lT({t:"s",v:t[g]},r),_=cT({t:"s",v:t[g]},r);break;case"number":y=lT({t:"n",v:t[g]},r),_=cT({t:"n",v:t[g]},r);break;case"boolean":y=lT({t:"b",v:t[g]},r),_=cT({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}f.push(y),d+=y.length,x.push(_),m+=_.length,++l}for(e[2][0].data=ya(l);g<e[7][0].data.length/2;++g)u.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return e[6][0].data=Am(f),e[3][0].data=Am(x),l}function UGe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Bl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(gn(n)));var i=ZS(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(K){return K.forEach(function(Q){typeof Q=="string"&&o.push(Q)})});var s={},l=[],u=Mr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(K,Q){return[K,u.FullPaths[Q]]}).forEach(function(K){var Q=K[0],ae=K[1];if(Q.type==2&&Q.name.match(/\.iwa/)){var se=Q.content,fe=Hc(se),ie=Vc(fe);ie.forEach(function(X){l.push(X.id),s[X.id]={deps:[],location:ae,type:Ti(X.messages[0].meta[1][0].data)}})}}),l.sort(function(K,Q){return K-Q});var d=l.filter(function(K){return K>1}).map(function(K){return[K,ya(K)]});u.FileIndex.map(function(K,Q){return[K,u.FullPaths[Q]]}).forEach(function(K){var Q=K[0];if(K[1],!!Q.name.match(/\.iwa/)){var ae=Vc(Hc(Q.content));ae.forEach(function(se){se.messages.forEach(function(fe){d.forEach(function(ie){se.messages.some(function(X){return Ti(X.meta[1][0].data)!=11006&&EGe(X.data,ie[1])})&&s[ie[0]].deps.push(se.id)})})})}});for(var f=Mr.find(u,s[1].location),h=Vc(Hc(f.content)),m,x=0;x<h.length;++x){var g=h[x];g.id==1&&(m=g)}var y=Ts(Xn(m.messages[0].data)[1][0].data);for(f=Mr.find(u,s[y].location),h=Vc(Hc(f.content)),x=0;x<h.length;++x)g=h[x],g.id==y&&(m=g);for(y=Ts(Xn(m.messages[0].data)[2][0].data),f=Mr.find(u,s[y].location),h=Vc(Hc(f.content)),x=0;x<h.length;++x)g=h[x],g.id==y&&(m=g);for(y=Ts(Xn(m.messages[0].data)[2][0].data),f=Mr.find(u,s[y].location),h=Vc(Hc(f.content)),x=0;x<h.length;++x)g=h[x],g.id==y&&(m=g);var _=Xn(m.messages[0].data);{_[6][0].data=ya(n.e.r+1),_[7][0].data=ya(n.e.c+1);var b=Ts(_[46][0].data),S=Mr.find(u,s[b].location),C=Vc(Hc(S.content));{for(var E=0;E<C.length&&C[E].id!=b;++E);if(C[E].id!=b)throw"Bad ColumnRowUIDMapArchive";var O=Xn(C[E].messages[0].data);O[1]=[],O[2]=[],O[3]=[];for(var T=0;T<=n.e.c;++T){var M=[];M[1]=M[2]=[{type:0,data:ya(T+420690)}],O[1].push({type:2,data:Jo(M)}),O[2].push({type:0,data:ya(T)}),O[3].push({type:0,data:ya(T)})}O[4]=[],O[5]=[],O[6]=[];for(var L=0;L<=n.e.r;++L)M=[],M[1]=M[2]=[{type:0,data:ya(L+726270)}],O[4].push({type:2,data:Jo(M)}),O[5].push({type:0,data:ya(L)}),O[6].push({type:0,data:ya(L)});C[E].messages[0].data=Jo(O)}S.content=Mv(Rv(C)),S.size=S.content.length,delete _[46];var z=Xn(_[4][0].data);{z[7][0].data=ya(n.e.r+1);var P=Xn(z[1][0].data),R=Ts(P[2][0].data);S=Mr.find(u,s[R].location),C=Vc(Hc(S.content));{if(C[0].id!=R)throw"Bad HeaderStorageBucket";var j=Xn(C[0].messages[0].data);for(L=0;L<i.length;++L){var V=Xn(j[2][0].data);V[1][0].data=ya(L),V[4][0].data=ya(i[L].length),j[2][L]={type:j[2][0].type,data:Jo(V)}}C[0].messages[0].data=Jo(j)}S.content=Mv(Rv(C)),S.size=S.content.length;var Z=Ts(z[2][0].data);S=Mr.find(u,s[Z].location),C=Vc(Hc(S.content));{if(C[0].id!=Z)throw"Bad HeaderStorageBucket";for(j=Xn(C[0].messages[0].data),T=0;T<=n.e.c;++T)V=Xn(j[2][0].data),V[1][0].data=ya(T),V[4][0].data=ya(n.e.r+1),j[2][T]={type:j[2][0].type,data:Jo(V)};C[0].messages[0].data=Jo(j)}S.content=Mv(Rv(C)),S.size=S.content.length;var te=Ts(z[4][0].data);(function(){for(var K=Mr.find(u,s[te].location),Q=Vc(Hc(K.content)),ae,se=0;se<Q.length;++se){var fe=Q[se];fe.id==te&&(ae=fe)}var ie=Xn(ae.messages[0].data);{ie[3]=[];var X=[];o.forEach(function(re,ke){X[1]=[{type:0,data:ya(ke)}],X[2]=[{type:0,data:ya(1)}],X[3]=[{type:2,data:kGe(re)}],ie[3].push({type:2,data:Jo(X)})})}ae.messages[0].data=Jo(ie);var ue=Rv(Q),de=Mv(ue);K.content=de,K.size=K.content.length})();var q=Xn(z[3][0].data);{var Y=q[1][0];delete q[2];var U=Xn(Y.data);{var G=Ts(U[2][0].data);(function(){for(var K=Mr.find(u,s[G].location),Q=Vc(Hc(K.content)),ae,se=0;se<Q.length;++se){var fe=Q[se];fe.id==G&&(ae=fe)}var ie=Xn(ae.messages[0].data);{delete ie[6],delete q[7];var X=new Uint8Array(ie[5][0].data);ie[5]=[];for(var ue=0,de=0;de<=n.e.r;++de){var re=Xn(X);ue+=BGe(re,i[de],o),re[1][0].data=ya(de),ie[5].push({data:Jo(re),type:2})}ie[1]=[{type:0,data:ya(n.e.c+1)}],ie[2]=[{type:0,data:ya(n.e.r+1)}],ie[3]=[{type:0,data:ya(ue)}],ie[4]=[{type:0,data:ya(n.e.r+1)}]}ae.messages[0].data=Jo(ie);var ke=Rv(Q),Re=Mv(ke);K.content=Re,K.size=K.content.length})()}Y.data=Jo(U)}z[3][0].data=Jo(q)}_[4][0].data=Jo(z)}m.messages[0].data=Jo(_);var J=Rv(h),D=Mv(J);return f.content=D,f.size=f.content.length,u}function roe(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function fM(e){roe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function hM(e){roe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function qGe(e){return Nn.WS.indexOf(e)>-1?"sheet":e==Nn.CS?"chart":e==Nn.DS?"dialog":e==Nn.MS?"macro":e&&e.length?e:"sheet"}function zGe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,qGe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function WGe(e,t,r,n,a,i,o,s,l,u,d,f){try{i[n]=Y2(hc(e,r,!0),t);var h=so(e,t),m;switch(s){case"sheet":m=fHe(h,t,a,l,i[n],u,d,f);break;case"chart":if(m=hHe(h,t,a,l,i[n],u,d,f),!m||!m["!drawel"])break;var x=T2(m["!drawel"].Target,t),g=pw(x),y=QUe(hc(e,x,!0),Y2(hc(e,g,!0),x)),_=T2(y,x),b=pw(_);m=BVe(hc(e,_,!0),_,l,Y2(hc(e,b,!0),_),u,m);break;case"macro":m=pHe(h,t,a,l,i[n],u,d,f);break;case"dialog":m=mHe(h,t,a,l,i[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+s)}o[n]=m;var S=[];i&&i[n]&&Di(i[n]).forEach(function(C){var E="";if(i[n][C].Type==Nn.CMNT){E=T2(i[n][C].Target,t);var O=xHe(so(e,E,!0),E,l);if(!O||!O.length)return;gV(m,O,!1)}i[n][C].Type==Nn.TCMNT&&(E=T2(i[n][C].Target,t),S=S.concat(tqe(so(e,E,!0),l)))}),S&&S.length&&gV(m,S,!0,l.people||[])}catch(C){if(l.WTF)throw C}}function zc(e){return e.charAt(0)=="/"?e.slice(1):e}function VGe(e,t){if(by(),t=t||{},fM(t),Gc(e,"META-INF/manifest.xml")||Gc(e,"objectdata.xml"))return EV(e,t);if(Gc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof uT<"u"){if(e.FileIndex)return uT(e);var r=Mr.utils.cfb_new();return LW(e).forEach(function(V){_n(r,V,r9e(e,V))}),uT(r)}throw new Error("Unsupported NUMBERS file")}if(!Gc(e,"[Content_Types].xml"))throw Gc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LW(e),a=Y9e(hc(e,"[Content_Types].xml")),i=!1,o,s;if(a.workbooks.length===0&&(s="xl/workbook.xml",so(e,s,!0)&&a.workbooks.push(s)),a.workbooks.length===0){if(s="xl/workbook.bin",!so(e,s,!0))throw new Error("Could not find workbook");a.workbooks.push(s),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(X2=[],a.sst)try{X2=yHe(so(e,zc(a.sst)),a.sst,t)}catch(V){if(t.WTF)throw V}t.cellStyles&&a.themes.length&&(l=vHe(hc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=gHe(so(e,zc(a.style)),a.style,l,t))}a.links.map(function(V){try{var Z=Y2(hc(e,pw(zc(V))),V);return _He(so(e,zc(V)),Z,V,t)}catch{}});var d=dHe(so(e,zc(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=so(e,zc(a.coreprops[0]),!0),h&&(f=Wae(h)),a.extprops.length!==0&&(h=so(e,zc(a.extprops[0]),!0),h&&rje(h,f,t)));var m={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=hc(e,zc(a.custprops[0]),!0),h&&(m=aje(h,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?o=d.Sheets.map(function(Z){return Z.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=m),t.bookSheets&&typeof o<"u"&&(x.SheetNames=o),t.bookSheets?x.SheetNames:t.bookProps))return x;o={};var g={};t.bookDeps&&a.calcchain&&(g=wHe(so(e,zc(a.calcchain)),a.calcchain));var y=0,_={},b,S;{var C=d.Sheets;f.Worksheets=C.length,f.SheetNames=[];for(var E=0;E!=C.length;++E)f.SheetNames[E]=C[E].name}var O=i?"bin":"xml",T=a.workbooks[0].lastIndexOf("/"),M=(a.workbooks[0].slice(0,T+1)+"_rels/"+a.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");Gc(e,M)||(M="xl/_rels/workbook."+O+".rels");var L=Y2(hc(e,M,!0),M.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=bHe(so(e,zc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=nqe(so(e,zc(a.people[0])),t)),L&&(L=zGe(L,d.Sheets));var z=so(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var P="sheet";if(L&&L[y]?(b="xl/"+L[y][1].replace(/[\/]?xl\//,""),Gc(e,b)||(b=L[y][1]),Gc(e,b)||(b=M.replace(/_rels\/.*$/,"")+L[y][1]),P=L[y][2]):(b="xl/worksheets/sheet"+(y+1-z)+"."+O,b=b.replace(/sheet0\./,"sheet.")),S=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var R=!1,j=0;j!=t.sheets.length;++j)typeof t.sheets[j]=="number"&&t.sheets[j]==y&&(R=1),typeof t.sheets[j]=="string"&&t.sheets[j].toLowerCase()==f.SheetNames[y].toLowerCase()&&(R=1);if(!R)continue e}}WGe(e,b,S,f.SheetNames[y],y,_,o,P,t,d,l,u)}return x={Directory:a,Workbook:d,Props:f,Custprops:m,Deps:g,Sheets:o,SheetNames:f.SheetNames,Strings:X2,Styles:u,Themes:l,SSF:ei(Kr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(V,Z){V=V.replace(/^Root Entry[\/]/,""),x.keys.push(V),x.files[V]=e.FileIndex[Z]}))),t&&t.bookVBA&&(a.vba.length>0?x.vbaraw=so(e,zc(a.vba[0]),!0):a.defaults&&a.defaults.bin===dqe&&(x.vbaraw=so(e,"xl/vbaProject.bin",!0))),x}function HGe(e,t){var r=t||{},n="Workbook",a=Mr.find(e,n);try{if(n="/!DataSpaces/Version",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(bBe(a.content),n="/!DataSpaces/DataSpaceMap",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=ABe(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=NBe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);EBe(a.content)}catch{}if(n="/EncryptionInfo",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=CBe(a.content);if(n="/EncryptedPackage",a=Mr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(s[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(s[1],a.content,r.password||"",r);if(s[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(s[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function GGe(e,t){return t.bookType=="ods"?toe(e,t):t.bookType=="numbers"?UGe(e,t):t.bookType=="xlsb"?KGe(e,t):YGe(e,t)}function KGe(e,t){Kv=1024,e&&!e.SSF&&(e.SSF=ei(Kr)),e&&e.SSF&&(by(),U3(e.SSF),t.revssf=z3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Z2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Pie.indexOf(t.bookType)>-1,a=JR();hM(t=t||{});var i=jR(),o="",s=0;if(t.cellXfs=[],$m(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",_n(i,o,Vae(e.Props,t)),a.coreprops.push(o),xa(t.rels,2,o,Nn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,_n(i,o,Kae(e.Props)),a.extprops.push(o),xa(t.rels,3,o,Nn.EXT_PROPS),e.Custprops!==e.Props&&Di(e.Custprops||{}).length>0&&(o="docProps/custom.xml",_n(i,o,Yae(e.Custprops)),a.custprops.push(o),xa(t.rels,4,o,Nn.CUST_PROPS)),s=1;s<=e.SheetNames.length;++s){var d={"!id":{}},f=e.Sheets[e.SheetNames[s-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+s+"."+r,_n(i,o,AHe(s-1,o,t,e,d)),a.sheets.push(o),xa(t.wbrels,-1,"worksheets/sheet"+s+"."+r,Nn.WS[0])}if(f){var m=f["!comments"],x=!1,g="";m&&m.length>0&&(g="xl/comments"+s+"."+r,_n(i,g,EHe(m,g)),a.comments.push(g),xa(d,-1,"../comments"+s+"."+r,Nn.CMNT),x=!0),f["!legacy"]&&x&&_n(i,"xl/drawings/vmlDrawing"+s+".vml",Eie(s,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&_n(i,pw(o),f1(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,_n(i,o,kHe(t.Strings,o,t)),a.strs.push(o),xa(t.wbrels,-1,"sharedStrings."+r,Nn.SST)),o="xl/workbook."+r,_n(i,o,SHe(e,o)),a.workbooks.push(o),xa(t.rels,1,o,Nn.WB),o="xl/theme/theme1.xml",_n(i,o,aM(e.Themes,t)),a.themes.push(o),xa(t.wbrels,-1,"theme/theme1.xml",Nn.THEME),o="xl/styles."+r,_n(i,o,NHe(e,o,t)),a.styles.push(o),xa(t.wbrels,-1,"styles."+r,Nn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",_n(i,o,e.vbaraw),a.vba.push(o),xa(t.wbrels,-1,"vbaProject.bin",Nn.VBA)),o="xl/metadata."+r,_n(i,o,CHe(o)),a.metadata.push(o),xa(t.wbrels,-1,"metadata."+r,Nn.XLMETA),_n(i,"[Content_Types].xml",qae(a,t)),_n(i,"_rels/.rels",f1(t.rels)),_n(i,"xl/_rels/workbook."+r+".rels",f1(t.wbrels)),delete t.revssf,delete t.ssf,i}function YGe(e,t){Kv=1024,e&&!e.SSF&&(e.SSF=ei(Kr)),e&&e.SSF&&(by(),U3(e.SSF),t.revssf=z3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Z2?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Pie.indexOf(t.bookType)>-1,a=JR();hM(t=t||{});var i=jR(),o="",s=0;if(t.cellXfs=[],$m(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",_n(i,o,Vae(e.Props,t)),a.coreprops.push(o),xa(t.rels,2,o,Nn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,_n(i,o,Kae(e.Props)),a.extprops.push(o),xa(t.rels,3,o,Nn.EXT_PROPS),e.Custprops!==e.Props&&Di(e.Custprops||{}).length>0&&(o="docProps/custom.xml",_n(i,o,Yae(e.Custprops)),a.custprops.push(o),xa(t.rels,4,o,Nn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,s=1;s<=e.SheetNames.length;++s){var f={"!id":{}},h=e.Sheets[e.SheetNames[s-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+s+"."+r,_n(i,o,Bie(s-1,t,e,f)),a.sheets.push(o),xa(t.wbrels,-1,"worksheets/sheet"+s+"."+r,Nn.WS[0])}if(h){var x=h["!comments"],g=!1,y="";if(x&&x.length>0){var _=!1;x.forEach(function(b){b[1].forEach(function(S){S.T==!0&&(_=!0)})}),_&&(y="xl/threadedComments/threadedComment"+s+"."+r,_n(i,y,rqe(x,d,t)),a.threadedcomments.push(y),xa(f,-1,"../threadedComments/threadedComment"+s+"."+r,Nn.TCMNT)),y="xl/comments"+s+"."+r,_n(i,y,Cie(x)),a.comments.push(y),xa(f,-1,"../comments"+s+"."+r,Nn.CMNT),g=!0}h["!legacy"]&&g&&_n(i,"xl/drawings/vmlDrawing"+s+".vml",Eie(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&_n(i,pw(o),f1(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,_n(i,o,mie(t.Strings,t)),a.strs.push(o),xa(t.wbrels,-1,"sharedStrings."+r,Nn.SST)),o="xl/workbook."+r,_n(i,o,Vie(e)),a.workbooks.push(o),xa(t.rels,1,o,Nn.WB),o="xl/theme/theme1.xml",_n(i,o,aM(e.Themes,t)),a.themes.push(o),xa(t.wbrels,-1,"theme/theme1.xml",Nn.THEME),o="xl/styles."+r,_n(i,o,Sie(e,t)),a.styles.push(o),xa(t.wbrels,-1,"styles."+r,Nn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",_n(i,o,e.vbaraw),a.vba.push(o),xa(t.wbrels,-1,"vbaProject.bin",Nn.VBA)),o="xl/metadata."+r,_n(i,o,kie()),a.metadata.push(o),xa(t.wbrels,-1,"metadata."+r,Nn.XLMETA),d.length>1&&(o="xl/persons/person.xml",_n(i,o,aqe(d)),a.people.push(o),xa(t.wbrels,-1,"persons/person.xml",Nn.PEOPLE)),_n(i,"[Content_Types].xml",qae(a,t)),_n(i,"_rels/.rels",f1(t.rels)),_n(i,"xl/_rels/workbook."+r+".rels",f1(t.wbrels)),delete t.revssf,delete t.ssf,i}function pM(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=bc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function XGe(e,t){return Mr.find(e,"EncryptedPackage")?HGe(e,t):Yie(e,t)}function ZGe(e,t){var r,n=e,a=t||{};return a.type||(a.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r=vae(n,a),VGe(r,a)}function noe(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return A8(e.slice(r),t);default:break e}return ey.to_workbook(e,t)}function JGe(e,t){var r="",n=pM(e,t);switch(t.type){case"base64":r=bc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=pg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Sa(r)),t.type="binary",noe(r,t)}function QGe(e,t){var r=e;return t.type=="base64"&&(r=bc(r)),r=m8.utils.decode(1200,r.slice(2),"str"),t.type="binary",noe(r,t)}function eKe(e){return e.match(/[^\x00-\x7F]/)?Xd(e):e}function dT(e,t,r,n){return n?(r.type="string",ey.to_workbook(e,r)):ey.to_workbook(t,r)}function E8(e,t){IR();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return E8(new Uint8Array(e),(r=ei(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),p1={},r.dateNF&&(p1.dateNF=r.dateNF),r.type||(r.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Sn?"buffer":"binary",n=KLe(e),typeof Uint8Array<"u"&&!Sn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=eKe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),s=new Uint8Array(o);if(s.foo="bar",!s.foo)return r=ei(r),r.type="array",E8(RR(n),r)}switch((a=pM(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return XGe(Mr.read(n,r),r);break;case 9:if(a[1]<=8)return Yie(n,r);break;case 60:return A8(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return iBe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return hie.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?ZGe(n,r):dT(e,n,r,i);case 239:return a[3]===60?A8(n,r):dT(e,n,r,i);case 255:if(a[1]===254)return QGe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return G0.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return G0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return S8.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return wie.to_workbook(n,r);break;case 10:case 13:case 32:return JGe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return aBe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?S8.to_workbook(n,r):dT(e,n,r,i)}function aoe(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return e_(t.file,Mr.write(e,{type:Sn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Mr.write(e,t)}function tKe(e,t){var r=ei(t||{}),n=GGe(e,r);return rKe(n,r)}function rKe(e,t){var r={},n=Sn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Mr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(B3(a))}return t.password&&typeof encrypt_agile<"u"?aoe(encrypt_agile(a,t.password),t):t.type==="file"?e_(t.file,a):t.type=="string"?Sa(a):a}function nKe(e,t){var r=t||{},n=eGe(e,r);return aoe(n,r)}function Bd(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return cw(Xd(n));case"binary":return Xd(n);case"string":return e;case"file":return e_(t.file,n,"utf8");case"buffer":return Sn?Fh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Bd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function aKe(e,t){switch(t.type){case"base64":return cw(e);case"binary":return e;case"string":return e;case"file":return e_(t.file,e,"binary");case"buffer":return Sn?Fh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Mb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?cw(r):t.type=="string"?Sa(r):r;case"file":return e_(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function ioe(e,t){IR(),XVe(e);var r=ei(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=ioe(e,r);return r.type="array",B3(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Bd(GHe(e,r),r);case"slk":case"sylk":return Bd(fie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Bd(Zie(e.Sheets[e.SheetNames[a]],r),r);case"txt":return aKe(ooe(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Bd(gM(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Bd(hie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return Mb(S8.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Bd(ey.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Bd(wie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Bd(pie.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Bd(toe(e,r),r);case"wk1":return Mb(G0.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return Mb(G0.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Mb(Xie(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),nKe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return tKe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function iKe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function mM(e,t,r){var n={};return n.type="file",n.file=t,iKe(n),ioe(e,n)}function oKe(e,t,r,n,a,i,o,s){var l=Ji(r),u=s.defval,d=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var x=o?e[r][m]:e[n[m]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;i[m]!=null&&(h[i[m]]=u);continue}var g=x.v;switch(x.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[m]!=null){if(g==null)if(x.t=="e"&&g===null)h[i[m]]=null;else if(u!==void 0)h[i[m]]=u;else if(d&&g===null)h[i[m]]=null;else continue;else h[i[m]]=d&&(x.t!=="n"||x.t==="n"&&s.rawNumbers!==!1)?g:kh(x,g,s);g!=null&&(f=!1)}}return{row:h,isempty:f}}function ZS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],o=0,s="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Vn(d);break;case"number":l=Vn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(a=0);var f=Ji(l.s.r),h=[],m=[],x=0,g=0,y=Array.isArray(e),_=l.s.r,b=0,S={};y&&!e[_]&&(e[_]=[]);var C=u.skipHidden&&e["!cols"]||[],E=u.skipHidden&&e["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(C[b]||{}).hidden)switch(h[b]=vi(b),r=y?e[_][b]:e[h[b]+f],n){case 1:i[b]=b-l.s.c;break;case 2:i[b]=h[b];break;case 3:i[b]=u.header[b-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),s=o=kh(r,null,u),g=S[o]||0,!g)S[o]=1;else{do s=o+"_"+g++;while(S[s]);S[o]=g,S[s]=1}i[b]=s}for(_=l.s.r+a;_<=l.e.r;++_)if(!(E[_]||{}).hidden){var O=oKe(e,l,_,h,n,i,y,u);(O.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[x++]=O.row)}return m.length=x,m}var DV=/"/g;function sKe(e,t,r,n,a,i,o,s){for(var l=!0,u=[],d="",f=Ji(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=s.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){l=!1,d=""+(s.rawNumbers&&m.t=="n"?m.v:kh(m,null,s));for(var x=0,g=0;x!==d.length;++x)if((g=d.charCodeAt(x))===a||g===i||g===34||s.forceQuotes){d='"'+d.replace(DV,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(l=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(DV,'""')+'"')):d="";u.push(d)}return s.blankrows===!1&&l?null:u.join(o)}function gM(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Vn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),s=n.RS!==void 0?n.RS:`
`,l=s.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],x=a.s.c;x<=a.e.c;++x)(h[x]||{}).hidden||(f[x]=vi(x));for(var g=0,y=a.s.r;y<=a.e.r;++y)(m[y]||{}).hidden||(d=sKe(e,a,y,f,o,l,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((g++?s:"")+d)));return delete n.dense,r.join("")}function ooe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=gM(e,t);return r}function lKe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Vn(e["!ref"]),i="",o=[],s,l=[],u=Array.isArray(e);for(s=a.s.c;s<=a.e.c;++s)o[s]=vi(s);for(var d=a.s.r;d<=a.e.r;++d)for(i=Ji(d),s=a.s.c;s<=a.e.c;++s)if(t=o[s]+i,r=u?(e[d]||[])[s]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function soe(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},o=0,s=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var l=typeof n.origin=="string"?yi(n.origin):n.origin;o=l.r,s=l.c}var u,d={s:{c:0,r:0},e:{c:s,r:o+t.length-1+a}};if(i["!ref"]){var f=Vn(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(g,y){Di(g).forEach(function(_){(m=h.indexOf(_))==-1&&(h[m=h.length]=_);var b=g[_],S="z",C="",E=en({c:s+m,r:o+y+a});u=_w(i,E),b&&typeof b=="object"&&!(b instanceof Date)?i[E]=b:(typeof b=="number"?S="n":typeof b=="boolean"?S="b":typeof b=="string"?S="s":b instanceof Date?(S="d",n.cellDates||(S="n",b=_o(b)),C=n.dateNF||Kr[14]):b===null&&n.nullError&&(S="e",b=0),u?(u.t=S,u.v=b,delete u.w,delete u.R,C&&(u.z=C)):i[E]=u={t:S,v:b},C&&(u.z=C))})}),d.e.c=Math.max(d.e.c,s+h.length-1);var x=Ji(o);if(a)for(m=0;m<h.length;++m)i[vi(m+s)+x]={t:"s",v:h[m]};return i["!ref"]=gn(d),i}function cKe(e,t){return soe(null,e,t)}function _w(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=yi(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?_w(e,en(t)):_w(e,en({r:t,c:r||0}))}function uKe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function vM(){return{SheetNames:[],Sheets:{}}}function yM(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Wie(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function dKe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=uKe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function fKe(e,t){return e.z=t,e}function loe(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function hKe(e,t,r){return loe(e,"#"+t,r)}function pKe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function mKe(e,t,r,n){for(var a=typeof t!="string"?t:Vn(t),i=typeof t=="string"?t:gn(t),o=a.s.r;o<=a.e.r;++o)for(var s=a.s.c;s<=a.e.c;++s){var l=_w(e,o,s);l.t="n",l.F=i,delete l.v,o==a.s.r&&s==a.s.c&&(l.f=r,n&&(l.D=!0))}return e}var af={encode_col:vi,encode_row:Ji,encode_cell:en,encode_range:gn,decode_col:HR,decode_row:VR,split_cell:k9e,decode_cell:yi,decode_range:Bl,format_cell:kh,sheet_add_aoa:Mae,sheet_add_json:soe,sheet_add_dom:Jie,aoa_to_sheet:Sy,json_to_sheet:cKe,table_to_sheet:Qie,table_to_book:bGe,sheet_to_csv:gM,sheet_to_txt:ooe,sheet_to_json:ZS,sheet_to_html:Zie,sheet_to_formulae:lKe,sheet_to_row_object_array:ZS,sheet_get_cell:_w,book_new:vM,book_append_sheet:yM,book_set_sheet_visibility:dKe,cell_set_number_format:fKe,cell_set_hyperlink:loe,cell_set_internal_link:hKe,cell_add_comment:pKe,sheet_set_array_formula:mKe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gKe=(e,t="inventory_export")=>{const r=e.map(o=>({"Item Name":o.item_name,Category:o.category,Quantity:o.quantity,"Expiry Date":o.expiry_date?new Date(o.expiry_date).toLocaleDateString():"N/A","Supplier Info":o.supplier_info||"N/A","Purchase Price":o.purchase_price!=null?Number(o.purchase_price):"N/A",Status:o.stock_status,"Low Stock Threshold":o.low_stock_threshold,"Created At":new Date(o.created_at).toLocaleString()})),n=af.json_to_sheet(r),a=[{wch:30},{wch:15},{wch:10},{wch:15},{wch:25},{wch:15},{wch:12},{wch:20},{wch:20}];n["!cols"]=a;const i=af.book_new();af.book_append_sheet(i,n,"Inventory"),mM(i,`${t}.xlsx`)},vKe=(e,t="inventory_export")=>{const r=new $r,n=["Item Name","Category","Qty","Expiry","Supplier","Price","Status"],a=e.map(i=>[i.item_name,i.category,i.quantity,i.expiry_date?new Date(i.expiry_date).toLocaleDateString():"N/A",i.supplier_info||"N/A",i.purchase_price!=null?`$${Number(i.purchase_price).toFixed(2)}`:"N/A",i.stock_status]);r.setFontSize(18),r.text("Inventory Report",14,22),r.setFontSize(11),r.setTextColor(100),r.text(`Generated on: ${new Date().toLocaleDateString()}`,14,29),PR(r,{head:[n],body:a,startY:35,theme:"grid",headStyles:{fillColor:[22,160,133]},styles:{fontSize:8},columnStyles:{0:{cellWidth:40},2:{halign:"right"},5:{halign:"right"}}}),r.save(`${t}.pdf`)},yKe=()=>{const[e,t]=A.useState(!1),[r,n]=A.useState(null),[a,i]=A.useState(""),[o,s]=A.useState("all"),[l,u]=A.useState([]),[d,f]=A.useState(0),[h,m]=A.useState(!1),[x,g]=A.useState(!1),y=()=>{n(null),t(!0)},_=T=>{n(T),t(!0)},b=()=>{t(!1),n(null)},S=T=>{console.log("Item saved:",T),b(),f(M=>M+1)},C=()=>{x&&!h||(h?(m(!1),g(!1)):(g(!0),m(!0)))},E=T=>{},O=()=>{g(!1)};return w("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[w(Aa,{heading:"Inventory Management",text:"Track medicines, tools, and consumables.",className:"flex items-center justify-between",children:[w(ja,{open:e,onOpenChange:t,children:[c(Hw,{asChild:!0,children:w(Fe,{onClick:y,children:[c(Ch,{className:"mr-2 h-4 w-4"})," Add New Item"]})}),w(Pa,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[c(Ta,{children:c(Oa,{children:r?"Edit Inventory Item":"Add New Inventory Item"})}),c(fLe,{itemToEdit:r,onSave:S,onCancel:b})]})]}),c(Fe,{variant:"outline",onClick:C,disabled:x&&!h,className:`ai-insights-button ${x&&h?"opacity-100 cursor-not-allowed":""}`,style:x&&h?{opacity:1}:{},children:x&&h?w(_r,{children:[c(uh,{className:"mr-2 h-4 w-4 animate-spin"}),"AI is thinking... (this may take up to 2 minutes)"]}):w(_r,{children:[c(qH,{className:"mr-2 h-4 w-4"}),h?"Hide AI Insights":"Show AI Insights"]})})]}),w("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[w("div",{className:"relative flex-1",children:[c(s4,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),c(ct,{type:"search",placeholder:"Search by item name...",className:"pl-8 sm:w-full",value:a,onChange:T=>i(T.target.value)})]}),w(Wr,{value:o,onValueChange:T=>s(T),children:[c(Br,{className:"w-full sm:w-[180px]",children:c(Vr,{placeholder:"Filter by category"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Categories"}),c(wt,{value:"Medicines",children:"Medicines"}),c(wt,{value:"Tools",children:"Tools"}),c(wt,{value:"Consumables",children:"Consumables"})]})]}),w(Fe,{variant:"outline",onClick:()=>gKe(l),disabled:l.length===0,className:"w-full sm:w-auto",children:[c(Y7,{className:"mr-2 h-4 w-4"})," Export Excel"]}),w(Fe,{variant:"outline",onClick:()=>vKe(l),disabled:l.length===0,className:"w-full sm:w-auto",children:[c(Y7,{className:"mr-2 h-4 w-4"})," Export PDF"]})]}),h&&c(mLe,{onLoadingChange:E,onInitialFetchComplete:O}),c(sLe,{onEditItem:_,refreshTrigger:d,searchTerm:a,categoryFilter:o,onDataFiltered:u})]})},xKe=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(!0),[a,i]=A.useState(null),[o,s]=A.useState(null),{toast:l}=yn();A.useEffect(()=>{(async()=>{n(!0),i(null);try{const f=await cLe();Array.isArray(f)?t(f):(console.warn("Fetched invoices data is not an array:",f),t([]))}catch(f){console.error("Failed to fetch invoices:",f);const h=f instanceof Error?f.message:"An unknown error occurred";i(h),l({title:"Error Fetching Invoices",description:h,variant:"destructive"})}finally{n(!1)}})()},[l]);const u=async d=>{s(d.id);try{const f=await uLe(d.storage_path);window.open(f,"_blank")}catch(f){console.error("Failed to get download URL:",f),l({title:"Error Getting Download Link",description:f instanceof Error?f.message:"Could not generate link.",variant:"destructive"})}finally{s(null)}};return r?c("div",{className:"space-y-2",children:[...Array(3)].map((d,f)=>c(jl,{className:"h-10 w-full"},f))}):a?w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:a})]}):e.length===0?c("p",{className:"text-center text-gray-500 mt-4",children:"No invoices found."}):c("div",{className:"rounded-md border",children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"File Name"}),c(Gt,{children:"Related Item"}),c(Gt,{children:"Uploaded At"}),c(Gt,{children:"Uploaded By"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:e.map(d=>{var f;return w(kn,{children:[c($t,{className:"font-medium",children:d.file_name}),c($t,{children:((f=d.inventory_items)==null?void 0:f.item_name)??c("span",{className:"text-xs text-muted-foreground",children:"N/A"})}),c($t,{children:new Date(d.uploaded_at).toLocaleString()}),c($t,{className:"text-xs text-muted-foreground",children:d.uploaded_by_user_id?"User ID: ..."+d.uploaded_by_user_id.slice(-6):"Unknown"}),w($t,{className:"text-right space-x-1",children:[c(Fe,{variant:"ghost",size:"icon",onClick:()=>u(d),disabled:o===d.id,title:"View Invoice",children:o===d.id?c("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):c(kw,{className:"h-4 w-4"})}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>u(d),disabled:o===d.id,title:"Download/View Invoice",children:o===d.id?c("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):c(GH,{className:"h-4 w-4"})})]})]},d.id)})})]})})},wKe=()=>w("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[c(Aa,{heading:"Uploaded Invoices",text:"View and download previously uploaded invoices."}),c(xKe,{})]}),_Ke=({asset:e,isOpen:t,onOpenChange:r,onIntervalSet:n})=>{const{toast:a}=yn(),[i,o]=A.useState(e.maintenance_interval_value||""),[s,l]=A.useState(e.maintenance_interval_unit||void 0),[u,d]=A.useState(!1);A.useEffect(()=>{o(e.maintenance_interval_value||""),l(e.maintenance_interval_unit||void 0)},[e,t]);const f=async()=>{if(i===""||!s){a({title:"Validation Error",description:"Please provide both interval period and unit.",variant:"destructive"});return}if(i<=0){a({title:"Validation Error",description:"Interval period must be positive.",variant:"destructive"});return}d(!0);try{const{error:h}=await Le.from("assets").update({maintenance_interval_value:i,maintenance_interval_unit:s}).eq("id",e.id);if(h)throw h;a({title:"Success",description:`Maintenance interval for ${e.asset_name} updated.`}),n(),r(!1)}catch(h){a({title:"Error updating interval",description:h.message||"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}};return c(ja,{open:t,onOpenChange:r,children:w(Pa,{className:"sm:max-w-[425px]",children:[w(Ta,{children:[c(Oa,{children:"Set Maintenance Interval"}),w(Yi,{children:["Configure the maintenance interval for asset: ",c("strong",{children:e.asset_name}),"."]})]}),w("div",{className:"grid gap-4 py-4",children:[w("div",{className:"grid grid-cols-4 items-center gap-4",children:[c(er,{htmlFor:"intervalValue",className:"text-right",children:"Interval Period"}),c(ct,{id:"intervalValue",type:"number",value:i,onChange:h=>o(h.target.value===""?"":parseInt(h.target.value,10)),className:"col-span-3",min:"1",placeholder:"e.g., 3"})]}),w("div",{className:"grid grid-cols-4 items-center gap-4",children:[c(er,{htmlFor:"intervalUnit",className:"text-right",children:"Interval"}),w(Wr,{value:s,onValueChange:h=>l(h),children:[c(Br,{className:"col-span-3",children:c(Vr,{placeholder:"Select unit"})}),w(Ur,{children:[c(wt,{value:"days",children:"Days"}),c(wt,{value:"weeks",children:"Weeks"}),c(wt,{value:"months",children:"Months"}),c(wt,{value:"years",children:"Years"})]})]})]})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>r(!1),disabled:u,children:"Cancel"}),c(Fe,{onClick:f,disabled:u,children:u?"Saving...":"Save Interval"})]})]})})};function bKe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function SKe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var AKe=function(){function e(r){var n=this;this._insertTag=function(a){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,i),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(SKe(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=bKe(a);try{i.insertRule(n,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var a;return(a=n.parentNode)==null?void 0:a.removeChild(n)}),this.tags=[],this.ctr=0},e}(),ks="-ms-",JS="-moz-",na="-webkit-",coe="comm",xM="rule",wM="decl",NKe="@import",uoe="@keyframes",kKe="@layer",EKe=Math.abs,Y3=String.fromCharCode,CKe=Object.assign;function PKe(e,t){return is(e,0)^45?(((t<<2^is(e,0))<<2^is(e,1))<<2^is(e,2))<<2^is(e,3):0}function doe(e){return e.trim()}function TKe(e,t){return(e=t.exec(e))?e[0]:e}function aa(e,t,r){return e.replace(t,r)}function C8(e,t){return e.indexOf(t)}function is(e,t){return e.charCodeAt(t)|0}function bw(e,t,r){return e.slice(t,r)}function Ud(e){return e.length}function _M(e){return e.length}function Fb(e,t){return t.push(e),e}function OKe(e,t){return e.map(t).join("")}var X3=1,ry=1,foe=0,Ul=0,co=0,Ny="";function Z3(e,t,r,n,a,i,o){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:X3,column:ry,length:o,return:""}}function g2(e,t){return CKe(Z3("",null,null,"",null,null,0),e,{length:-e.length},t)}function DKe(){return co}function IKe(){return co=Ul>0?is(Ny,--Ul):0,ry--,co===10&&(ry=1,X3--),co}function wc(){return co=Ul<foe?is(Ny,Ul++):0,ry++,co===10&&(ry=1,X3++),co}function of(){return is(Ny,Ul)}function a5(){return Ul}function l_(e,t){return bw(Ny,e,t)}function Sw(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hoe(e){return X3=ry=1,foe=Ud(Ny=e),Ul=0,[]}function poe(e){return Ny="",e}function i5(e){return doe(l_(Ul-1,P8(e===91?e+2:e===40?e+1:e)))}function RKe(e){for(;(co=of())&&co<33;)wc();return Sw(e)>2||Sw(co)>3?"":" "}function MKe(e,t){for(;--t&&wc()&&!(co<48||co>102||co>57&&co<65||co>70&&co<97););return l_(e,a5()+(t<6&&of()==32&&wc()==32))}function P8(e){for(;wc();)switch(co){case e:return Ul;case 34:case 39:e!==34&&e!==39&&P8(co);break;case 40:e===41&&P8(e);break;case 92:wc();break}return Ul}function FKe(e,t){for(;wc()&&e+co!==57;)if(e+co===84&&of()===47)break;return"/*"+l_(t,Ul-1)+"*"+Y3(e===47?e:wc())}function LKe(e){for(;!Sw(of());)wc();return l_(e,Ul)}function jKe(e){return poe(o5("",null,null,null,[""],e=hoe(e),0,[0],e))}function o5(e,t,r,n,a,i,o,s,l){for(var u=0,d=0,f=o,h=0,m=0,x=0,g=1,y=1,_=1,b=0,S="",C=a,E=i,O=n,T=S;y;)switch(x=b,b=wc()){case 40:if(x!=108&&is(T,f-1)==58){C8(T+=aa(i5(b),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:T+=i5(b);break;case 9:case 10:case 13:case 32:T+=RKe(x);break;case 92:T+=MKe(a5()-1,7);continue;case 47:switch(of()){case 42:case 47:Fb($Ke(FKe(wc(),a5()),t,r),l);break;default:T+="/"}break;case 123*g:s[u++]=Ud(T)*_;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+d:_==-1&&(T=aa(T,/\f/g,"")),m>0&&Ud(T)-f&&Fb(m>32?RV(T+";",n,r,f-1):RV(aa(T," ","")+";",n,r,f-2),l);break;case 59:T+=";";default:if(Fb(O=IV(T,t,r,u,d,a,s,S,C=[],E=[],f),i),b===123)if(d===0)o5(T,t,O,O,C,i,f,s,E);else switch(h===99&&is(T,3)===110?100:h){case 100:case 108:case 109:case 115:o5(e,O,O,n&&Fb(IV(e,O,O,0,0,a,s,S,a,C=[],f),E),a,E,f,s,n?C:E);break;default:o5(T,O,O,O,[""],E,0,s,E)}}u=d=m=0,g=_=1,S=T="",f=o;break;case 58:f=1+Ud(T),m=x;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&IKe()==125)continue}switch(T+=Y3(b),b*g){case 38:_=d>0?1:(T+="\f",-1);break;case 44:s[u++]=(Ud(T)-1)*_,_=1;break;case 64:of()===45&&(T+=i5(wc())),h=of(),d=f=Ud(S=T+=LKe(a5())),b++;break;case 45:x===45&&Ud(T)==2&&(g=0)}}return i}function IV(e,t,r,n,a,i,o,s,l,u,d){for(var f=a-1,h=a===0?i:[""],m=_M(h),x=0,g=0,y=0;x<n;++x)for(var _=0,b=bw(e,f+1,f=EKe(g=o[x])),S=e;_<m;++_)(S=doe(g>0?h[_]+" "+b:aa(b,/&\f/g,h[_])))&&(l[y++]=S);return Z3(e,t,r,a===0?xM:s,l,u,d)}function $Ke(e,t,r){return Z3(e,t,r,coe,Y3(DKe()),bw(e,2,-2),0)}function RV(e,t,r,n){return Z3(e,t,r,wM,bw(e,0,n),bw(e,n+1,-1),n)}function m1(e,t){for(var r="",n=_M(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function BKe(e,t,r,n){switch(e.type){case kKe:if(e.children.length)break;case NKe:case wM:return e.return=e.return||e.value;case coe:return"";case uoe:return e.return=e.value+"{"+m1(e.children,n)+"}";case xM:e.value=e.props.join(",")}return Ud(r=m1(e.children,n))?e.return=e.value+"{"+r+"}":""}function UKe(e){var t=_M(e);return function(r,n,a,i){for(var o="",s=0;s<t;s++)o+=e[s](r,n,a,i)||"";return o}}function qKe(e){return function(t){t.root||(t=t.return)&&e(t)}}function zKe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var WKe=function(t,r,n){for(var a=0,i=0;a=i,i=of(),a===38&&i===12&&(r[n]=1),!Sw(i);)wc();return l_(t,Ul)},VKe=function(t,r){var n=-1,a=44;do switch(Sw(a)){case 0:a===38&&of()===12&&(r[n]=1),t[n]+=WKe(Ul-1,r,n);break;case 2:t[n]+=i5(a);break;case 4:if(a===44){t[++n]=of()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Y3(a)}while(a=wc());return t},HKe=function(t,r){return poe(VKe(hoe(t),r))},MV=new WeakMap,GKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,a=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!MV.get(n))&&!a){MV.set(t,!0);for(var i=[],o=HKe(r,i),s=n.props,l=0,u=0;l<o.length;l++)for(var d=0;d<s.length;d++,u++)t.props[u]=i[l]?o[l].replace(/&\f/g,s[d]):s[d]+" "+o[l]}}},KKe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function moe(e,t){switch(PKe(e,t)){case 5103:return na+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return na+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return na+e+JS+e+ks+e+e;case 6828:case 4268:return na+e+ks+e+e;case 6165:return na+e+ks+"flex-"+e+e;case 5187:return na+e+aa(e,/(\w+).+(:[^]+)/,na+"box-$1$2"+ks+"flex-$1$2")+e;case 5443:return na+e+ks+"flex-item-"+aa(e,/flex-|-self/,"")+e;case 4675:return na+e+ks+"flex-line-pack"+aa(e,/align-content|flex-|-self/,"")+e;case 5548:return na+e+ks+aa(e,"shrink","negative")+e;case 5292:return na+e+ks+aa(e,"basis","preferred-size")+e;case 6060:return na+"box-"+aa(e,"-grow","")+na+e+ks+aa(e,"grow","positive")+e;case 4554:return na+aa(e,/([^-])(transform)/g,"$1"+na+"$2")+e;case 6187:return aa(aa(aa(e,/(zoom-|grab)/,na+"$1"),/(image-set)/,na+"$1"),e,"")+e;case 5495:case 3959:return aa(e,/(image-set\([^]*)/,na+"$1$`$1");case 4968:return aa(aa(e,/(.+:)(flex-)?(.*)/,na+"box-pack:$3"+ks+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+na+e+e;case 4095:case 3583:case 4068:case 2532:return aa(e,/(.+)-inline(.+)/,na+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ud(e)-1-t>6)switch(is(e,t+1)){case 109:if(is(e,t+4)!==45)break;case 102:return aa(e,/(.+:)(.+)-([^]+)/,"$1"+na+"$2-$3$1"+JS+(is(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~C8(e,"stretch")?moe(aa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(is(e,t+1)!==115)break;case 6444:switch(is(e,Ud(e)-3-(~C8(e,"!important")&&10))){case 107:return aa(e,":",":"+na)+e;case 101:return aa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+na+(is(e,14)===45?"inline-":"")+"box$3$1"+na+"$2$3$1"+ks+"$2box$3")+e}break;case 5936:switch(is(e,t+11)){case 114:return na+e+ks+aa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return na+e+ks+aa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return na+e+ks+aa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return na+e+ks+e+e}return e}var YKe=function(t,r,n,a){if(t.length>-1&&!t.return)switch(t.type){case wM:t.return=moe(t.value,t.length);break;case uoe:return m1([g2(t,{value:aa(t.value,"@","@"+na)})],a);case xM:if(t.length)return OKe(t.props,function(i){switch(TKe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return m1([g2(t,{props:[aa(i,/:(read-\w+)/,":"+JS+"$1")]})],a);case"::placeholder":return m1([g2(t,{props:[aa(i,/:(plac\w+)/,":"+na+"input-$1")]}),g2(t,{props:[aa(i,/:(plac\w+)/,":"+JS+"$1")]}),g2(t,{props:[aa(i,/:(plac\w+)/,ks+"input-$1")]})],a)}return""})}},XKe=[YKe],ZKe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var a=t.stylisPlugins||XKe,i={},o,s=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),_=1;_<y.length;_++)i[y[_]]=!0;s.push(g)});var l,u=[GKe,KKe];{var d,f=[BKe,qKe(function(g){d.insert(g)})],h=UKe(u.concat(a,f)),m=function(y){return m1(jKe(y),h)};l=function(y,_,b,S){d=b,m(y?y+"{"+_.styles+"}":_.styles),S&&(x.inserted[_.name]=!0)}}var x={key:r,sheet:new AKe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:l};return x.sheet.hydrate(s),x},fT={exports:{}},da={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FV;function JKe(){if(FV)return da;FV=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function S(E){if(typeof E=="object"&&E!==null){var O=E.$$typeof;switch(O){case t:switch(E=E.type,E){case l:case u:case n:case i:case a:case f:return E;default:switch(E=E&&E.$$typeof,E){case s:case d:case x:case m:case o:return E;default:return O}}case r:return O}}}function C(E){return S(E)===u}return da.AsyncMode=l,da.ConcurrentMode=u,da.ContextConsumer=s,da.ContextProvider=o,da.Element=t,da.ForwardRef=d,da.Fragment=n,da.Lazy=x,da.Memo=m,da.Portal=r,da.Profiler=i,da.StrictMode=a,da.Suspense=f,da.isAsyncMode=function(E){return C(E)||S(E)===l},da.isConcurrentMode=C,da.isContextConsumer=function(E){return S(E)===s},da.isContextProvider=function(E){return S(E)===o},da.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},da.isForwardRef=function(E){return S(E)===d},da.isFragment=function(E){return S(E)===n},da.isLazy=function(E){return S(E)===x},da.isMemo=function(E){return S(E)===m},da.isPortal=function(E){return S(E)===r},da.isProfiler=function(E){return S(E)===i},da.isStrictMode=function(E){return S(E)===a},da.isSuspense=function(E){return S(E)===f},da.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===u||E===i||E===a||E===f||E===h||typeof E=="object"&&E!==null&&(E.$$typeof===x||E.$$typeof===m||E.$$typeof===o||E.$$typeof===s||E.$$typeof===d||E.$$typeof===y||E.$$typeof===_||E.$$typeof===b||E.$$typeof===g)},da.typeOf=S,da}var LV;function QKe(){return LV||(LV=1,fT.exports=JKe()),fT.exports}var hT,jV;function eYe(){if(jV)return hT;jV=1;var e=QKe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=a;function o(x){return e.isMemo(x)?a:i[x.$$typeof]||t}var s=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function m(x,g,y){if(typeof g!="string"){if(h){var _=f(g);_&&_!==h&&m(x,_,y)}var b=l(g);u&&(b=b.concat(u(g)));for(var S=o(x),C=o(g),E=0;E<b.length;++E){var O=b[E];if(!r[O]&&!(y&&y[O])&&!(C&&C[O])&&!(S&&S[O])){var T=d(g,O);try{s(x,O,T)}catch{}}}}return x}return hT=m,hT}eYe();var tYe=!0;function rYe(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(n+=a+" ")}),n}var goe=function(t,r,n){var a=t.key+"-"+r.name;(n===!1||tYe===!1)&&t.registered[a]===void 0&&(t.registered[a]=r.styles)},nYe=function(t,r,n){goe(t,r,n);var a=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+a:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function aYe(e){for(var t=0,r,n=0,a=e.length;a>=4;++n,a-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var iYe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oYe=/[A-Z]|^ms/g,sYe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,voe=function(t){return t.charCodeAt(1)===45},$V=function(t){return t!=null&&typeof t!="boolean"},pT=zKe(function(e){return voe(e)?e:e.replace(oYe,"-$&").toLowerCase()}),BV=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(sYe,function(n,a,i){return qd={name:a,styles:i,next:qd},a})}return iYe[t]!==1&&!voe(t)&&typeof r=="number"&&r!==0?r+"px":r};function Aw(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var a=r;if(a.anim===1)return qd={name:a.name,styles:a.styles,next:qd},a.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)qd={name:o.name,styles:o.styles,next:qd},o=o.next;var s=i.styles+";";return s}return lYe(e,t,r)}case"function":{if(e!==void 0){var l=qd,u=r(e);return qd=l,Aw(e,t,u)}break}}var d=r;return d}function lYe(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=Aw(e,t,r[a])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var s=o;$V(s)&&(n+=pT(i)+":"+BV(i,s)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var l=0;l<o.length;l++)$V(o[l])&&(n+=pT(i)+":"+BV(i,o[l])+";");else{var u=Aw(e,t,o);switch(i){case"animation":case"animationName":{n+=pT(i)+":"+u+";";break}default:n+=i+"{"+u+"}"}}}return n}var UV=/label:\s*([^\s;{]+)\s*(;|$)/g,qd;function yoe(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";qd=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,a+=Aw(r,t,i);else{var o=i;a+=o[0]}for(var s=1;s<e.length;s++)if(a+=Aw(r,t,e[s]),n){var l=i;a+=l[s]}UV.lastIndex=0;for(var u="",d;(d=UV.exec(a))!==null;)u+="-"+d[1];var f=aYe(a)+u;return{name:f,styles:a,next:qd}}var cYe=function(t){return t()},uYe=ex.useInsertionEffect?ex.useInsertionEffect:!1,dYe=uYe||cYe,xoe=A.createContext(typeof HTMLElement<"u"?ZKe({key:"css"}):null);xoe.Provider;var fYe=function(t){return A.forwardRef(function(r,n){var a=A.useContext(xoe);return t(r,a,n)})},hYe=A.createContext({}),bM={}.hasOwnProperty,T8="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pYe=function(t,r){var n={};for(var a in r)bM.call(r,a)&&(n[a]=r[a]);return n[T8]=t,n},mYe=function(t){var r=t.cache,n=t.serialized,a=t.isStringTag;return goe(r,n,a),dYe(function(){return nYe(r,n,a)}),null},gYe=fYe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[T8],i=[n],o="";typeof e.className=="string"?o=rYe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var s=yoe(i,void 0,A.useContext(hYe));o+=t.key+"-"+s.name;var l={};for(var u in e)bM.call(e,u)&&u!=="css"&&u!==T8&&(l[u]=e[u]);return l.className=o,r&&(l.ref=r),A.createElement(A.Fragment,null,A.createElement(mYe,{cache:t,serialized:s,isStringTag:typeof a=="string"}),A.createElement(a,l))}),vYe=gYe,qV=function(t,r){var n=arguments;if(r==null||!bM.call(r,"css"))return A.createElement.apply(void 0,n);var a=n.length,i=new Array(a);i[0]=vYe,i[1]=pYe(t,r);for(var o=2;o<a;o++)i[o]=n[o];return A.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(qV||(qV={}));function yYe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return yoe(t)}function xYe(){var e=yYe.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const Lb=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch{return"Invalid Date"}};xYe`
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
`;const wYe=({status:e})=>{if(!e)return c(ed,{variant:"outline",className:"bg-gray-200 text-gray-700",children:"Unknown"});let t="default",r="";switch(e){case"Active":t="default",r="bg-green-100 text-green-800";break;case"Under Maintenance":t="secondary",r="bg-yellow-100 text-yellow-800 animate-blink";break;case"Retired":t="outline",r="bg-gray-200 text-gray-700";break;case"Disposed":t="destructive",r="bg-red-100 text-red-800";break;default:t="outline",r="bg-gray-200 text-gray-700";break}return c(ed,{variant:t,className:r,children:e})},_Ye=({onMarkAsServiced:e,onDisposeAsset:t,refreshTrigger:r,searchTerm:n,categoryFilter:a,statusFilter:i,tagFilter:o,onDataFiltered:s})=>{const[l,u]=A.useState([]),[d,f]=A.useState(!0),[h,m]=A.useState(null),[x,g]=A.useState("asset_name"),[y,_]=A.useState("asc"),{toast:b}=yn(),[S,C]=A.useState(!1),[E,O]=A.useState(null),T=A.useCallback(async()=>{f(!0),m(null);try{let P=Le.from("assets").select(`
        *,
        asset_tags (
          tags (id, name, color)
        )
      `);n&&(P=P.or(`asset_name.ilike.%${n}%,serial_number.ilike.%${n}%`)),a!=="all"&&(P=P.eq("category",a)),i!=="all"&&(P=P.eq("status",i)),o!=="all"&&console.warn("Tag filtering in AssetList is not fully implemented for direct client-side query. Requires RPC or subquery.");const R={ascending:y==="asc"},j=["serial_number","location","purchase_date","warranty_expiry_date","next_maintenance_due_date","status"];j.includes(x)&&y==="asc"?R.nullsFirst=!1:j.includes(x)&&y==="desc"&&(R.nullsFirst=!0),P=P.order(x,R);const{data:V,error:Z}=await P;if(Z)throw Z;const te=(V||[]).map(q=>({...q,tags:Array.isArray(q.asset_tags)?q.asset_tags.map(Y=>Y.tags).filter(Boolean):[]}));u(te),s(te)}catch(P){console.error("Failed to fetch assets:",P),m(P instanceof Error?P.message:"An unknown error occurred"),b({title:"Error Fetching Assets",description:P instanceof Error?P.message:"Could not load assets.",variant:"destructive"})}finally{f(!1)}},[b,n,a,i,o,x,y,s]),M=P=>{O(P),C(!0)};A.useEffect(()=>{T()},[T,r]),A.useEffect(()=>{if(!Le)return;const P=Le.channel("assets_changes").on("postgres_changes",{event:"*",schema:"public",table:"assets"},R=>{console.log("Asset Realtime change received:",R),T()}).subscribe((R,j)=>{R==="SUBSCRIBED"&&console.log("Subscribed to asset changes!"),(R==="CHANNEL_ERROR"||R==="TIMED_OUT"||R==="CLOSED")&&console.error("Asset Realtime subscription error/closed:",R,j)});return()=>{console.log("Unsubscribing from asset changes"),Le.removeChannel(P)}},[Le,b,T]);const L=P=>{x===P?_(R=>R==="asc"?"desc":"asc"):(g(P),_("asc"))},z=P=>x!==P?c(u5,{className:"ml-2 h-4 w-4 opacity-30 group-hover:opacity-100"}):c(u5,{className:`ml-2 h-4 w-4 ${y==="asc"?"":"rotate-180"}`});return d?c("div",{className:"space-y-2",children:[...Array(5)].map((P,R)=>c(jl,{className:"h-10 w-full"},R))}):h?w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:h})]}):l.length===0?c("p",{className:"text-center text-gray-500 mt-4",children:"No assets found matching the criteria."}):w("div",{className:"rounded-md border",children:[w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:w(Fe,{variant:"ghost",onClick:()=>L("asset_name"),className:"px-0 group",children:["Asset Name ",z("asset_name")]})}),c(Gt,{children:w(Fe,{variant:"ghost",onClick:()=>L("category"),className:"px-0 group",children:["Category ",z("category")]})}),c(Gt,{children:"Tags"}),c(Gt,{children:w(Fe,{variant:"ghost",onClick:()=>L("serial_number"),className:"px-0 group",children:["Serial No. ",z("serial_number")]})}),c(Gt,{children:w(Fe,{variant:"ghost",onClick:()=>L("location"),className:"px-0 group",children:["Location ",z("location")]})}),c(Gt,{children:w(Fe,{variant:"ghost",onClick:()=>L("status"),className:"px-0 group",children:["Status ",z("status")]})}),c(Gt,{className:"hidden md:table-cell",children:w(Fe,{variant:"ghost",onClick:()=>L("purchase_date"),className:"px-0 group",children:["Purchase Date ",z("purchase_date")]})}),c(Gt,{className:"hidden md:table-cell",children:w(Fe,{variant:"ghost",onClick:()=>L("warranty_expiry_date"),className:"px-0 group",children:["Warranty Expiry ",z("warranty_expiry_date")]})}),c(Gt,{className:"hidden md:table-cell",children:w(Fe,{variant:"ghost",onClick:()=>L("last_serviced_date"),className:"px-0 group",children:["Last Serviced ",z("last_serviced_date")]})}),c(Gt,{className:"hidden md:table-cell",children:w(Fe,{variant:"ghost",onClick:()=>L("next_maintenance_due_date"),className:"px-0 group",children:["Next Due ",z("next_maintenance_due_date")]})}),c(Gt,{className:"text-right",children:"Actions"})," "]})}),c(qs,{children:l.map(P=>w(kn,{children:[c($t,{className:"font-medium p-2 text-center text-sm",children:P.asset_name}),c($t,{className:"p-2 text-center text-sm",children:P.category}),c($t,{className:"p-2 text-center text-sm",children:P.tags&&P.tags.length>0?P.tags.map(R=>c(ed,{variant:"outline",className:"mr-1 mb-1 text-xs",style:R.color?{backgroundColor:R.color,color:"#fff",borderColor:R.color}:{},children:R.name},R.id)):"-"}),c($t,{className:"p-2 text-center text-sm",children:P.serial_number||"N/A"}),c($t,{className:"p-2 text-center text-sm",children:P.location||"N/A"}),c($t,{className:"p-2 text-center text-sm",children:c(wYe,{status:P.status})}),c($t,{className:"hidden md:table-cell p-2 text-center text-sm",children:Lb(P.purchase_date)}),c($t,{className:"hidden md:table-cell p-2 text-center text-sm",children:Lb(P.warranty_expiry_date)}),c($t,{className:"hidden md:table-cell p-2 text-center text-sm",children:Lb(P.last_serviced_date)}),c($t,{className:"hidden md:table-cell p-2 text-center text-sm",children:Lb(P.next_maintenance_due_date)}),c($t,{className:"text-right p-2 text-sm",children:w("div",{className:"flex items-center justify-end space-x-1",children:[P.service_document_url&&c(Fe,{variant:"ghost",size:"icon",asChild:!0,title:"View Service Document",children:c("a",{href:P.service_document_url,target:"_blank",rel:"noopener noreferrer",children:c(_ce,{className:"h-4 w-4"})})}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>e(P),title:"Mark as Serviced",disabled:P.status==="Retired"||P.status==="Disposed",children:c($ce,{className:"h-4 w-4"})}),c(Fe,{variant:"ghost",size:"icon",asChild:!0,title:"View Details",children:c(Vi,{to:`/assets/${P.id}`,children:c(kw,{className:"h-4 w-4"})})}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>t(P),title:"Dispose Asset",disabled:P.status==="Disposed"||P.status==="Retired",children:c(UH,{className:"h-4 w-4"})}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>M(P),title:"Set Maintenance Interval",children:c(uce,{className:"h-4 w-4"})})]})})]},P.id))})]}),S&&E&&c(_Ke,{asset:E,isOpen:S,onOpenChange:C,onIntervalSet:()=>{T(),b({title:"Success",description:"Maintenance interval updated."})}})]})},SM="assets",bYe=async()=>{const{data:e,error:t}=await Le.from(SM).select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching assets:",t),new Error(t.message);return e||[]},SYe=async e=>{const t={...e,serial_number:e.serial_number||null,location:e.location||null,supplier_info:e.supplier_info||null,service_document_url:e.service_document_url||null,barcode_value:e.barcode_value||null},{data:r,error:n}=await Le.from(SM).insert([t]).select().single();if(n)throw console.error("Error adding asset:",n),n.code==="23505"?new Error(`Failed to add asset. ${n.details||"A unique value (like Serial Number or Barcode) might already exist."}`):new Error(n.message);if(!r)throw new Error("Failed to add asset, no data returned.");return r},AYe=async(e,t)=>{const r={...t};r.serial_number===""&&(r.serial_number=null),r.location===""&&(r.location=null),r.supplier_info===""&&(r.supplier_info=null),r.service_document_url===""&&(r.service_document_url=null),r.barcode_value===""&&(r.barcode_value=null);const{data:n,error:a}=await Le.from(SM).update(r).eq("id",e).select().single();if(a)throw console.error(`Error updating asset ${e}:`,a),a.code==="23505"?a.details.includes("serial_number")?new Error("Failed to update asset. The provided Serial Number already exists."):a.details.includes("barcode_value")?new Error("Failed to update asset. The provided Barcode/QR Code Value already exists."):new Error(`Failed to update asset. ${a.details||"A unique value (like Serial Number or Barcode) might already exist."}`):new Error(a.message);if(!n)throw new Error(`Failed to update asset ${e}, no data returned.`);return n},NYe=P3({asset_name:es().min(1,{message:"Asset name is required"}),category:sw(["Equipment & Tools","Furniture","IT","Other"],{required_error:"Category is required"}),serial_number:es().optional().nullable(),location:es().optional().nullable(),purchase_date:es().optional().nullable(),purchase_price:uR.number().min(0,{message:"Price must be 0 or greater"}).optional().nullable(),warranty_expiry_date:es().optional().nullable(),last_serviced_date:es().optional().nullable(),next_maintenance_due_date:es().optional().nullable(),status:sw(["Active","Under Maintenance","Retired","Disposed"],{required_error:"Status is required"}),supplier_info:es().optional().nullable(),service_document_url:es().url({message:"Please enter a valid URL"}).optional().nullable(),barcode_value:es().optional().nullable(),requires_maintenance:cR().optional().default(!1)}),kYe=({assetToEdit:e,onSave:t,onCancel:r})=>{const{toast:n}=yn(),a=!!e,i=["Equipment & Tools","Furniture","IT","Other"],o=["Active","Under Maintenance","Retired","Disposed"],s=g=>{if(g&&i.includes(g))return g},l=g=>{if(g&&o.includes(g))return g},u=g=>{if(g)try{return new Date(g).toISOString().split("T")[0]}catch{return}},d=dd({resolver:fd(NYe),defaultValues:{asset_name:(e==null?void 0:e.asset_name)??"",category:s(e==null?void 0:e.category),serial_number:(e==null?void 0:e.serial_number)??"",location:(e==null?void 0:e.location)??"",purchase_date:u(e==null?void 0:e.purchase_date),purchase_price:e!=null&&e.purchase_price?Number(e.purchase_price):null,warranty_expiry_date:u(e==null?void 0:e.warranty_expiry_date),last_serviced_date:u(e==null?void 0:e.last_serviced_date),next_maintenance_due_date:u(e==null?void 0:e.next_maintenance_due_date),status:l(e==null?void 0:e.status)??"Active",supplier_info:(e==null?void 0:e.supplier_info)??"",service_document_url:(e==null?void 0:e.service_document_url)??"",barcode_value:(e==null?void 0:e.barcode_value)??"",requires_maintenance:(e==null?void 0:e.requires_maintenance)??!1}}),{handleSubmit:f,control:h,reset:m}=d;return A.useEffect(()=>{m(e?{asset_name:e.asset_name,category:s(e.category),serial_number:e.serial_number??"",location:e.location??"",purchase_date:u(e.purchase_date),purchase_price:e.purchase_price?Number(e.purchase_price):null,warranty_expiry_date:u(e.warranty_expiry_date),last_serviced_date:u(e.last_serviced_date),next_maintenance_due_date:u(e.next_maintenance_due_date),status:l(e.status),supplier_info:e.supplier_info??"",service_document_url:e.service_document_url??"",barcode_value:e.barcode_value??"",requires_maintenance:e.requires_maintenance??!1}:{asset_name:"",category:void 0,serial_number:"",location:"",purchase_date:"",purchase_price:null,warranty_expiry_date:"",last_serviced_date:"",next_maintenance_due_date:"",status:"Active",supplier_info:"",service_document_url:"",barcode_value:"",requires_maintenance:!1})},[e,m]),c(Rh,{...d,children:w("form",{onSubmit:f(async g=>{try{let y;const _={...g};a&&e?(y=await AYe(e.id,_),n({title:"Success",description:"Asset updated."})):(y=await SYe(_),n({title:"Success",description:"New asset added."})),t(y)}catch(y){console.error("Failed to save asset:",y),n({title:"Error",description:`Failed to save asset: ${y instanceof Error?y.message:"Unknown error"}`,variant:"destructive"})}}),className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Basic Information"}),c(He,{control:h,name:"asset_name",render:({field:g})=>w(De,{children:[c(Oe,{children:"Asset Name *"}),c(Me,{children:c(ct,{placeholder:"e.g., Dental Chair Unit X1",...g})}),c(Xe,{})]})}),c(He,{control:h,name:"category",render:({field:g})=>w(De,{children:[c(Oe,{children:"Category *"}),w(Wr,{onValueChange:g.onChange,value:g.value??"",defaultValue:g.value??"",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select a category"})})}),c(Ur,{children:i.map(y=>c(wt,{value:y,children:y},y))})]}),c(Xe,{})]})}),c(He,{control:h,name:"serial_number",render:({field:g})=>w(De,{children:[c(Oe,{children:"Serial Number"}),c(Me,{children:c(ct,{placeholder:"Asset Serial Number",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"location",render:({field:g})=>w(De,{children:[c(Oe,{children:"Location"}),c(Me,{children:c(ct,{placeholder:"e.g., Room 3, North Branch",...g,value:g.value??""})}),c(Xe,{})]})})]}),w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Status & Warranty"}),c(He,{control:h,name:"status",render:({field:g})=>w(De,{children:[c(Oe,{children:"Status *"}),w(Wr,{onValueChange:g.onChange,value:g.value??"",defaultValue:g.value??"",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select asset status"})})}),c(Ur,{children:o.map(y=>c(wt,{value:y,children:y},y))})]}),c(Xe,{})]})}),c(He,{control:h,name:"warranty_expiry_date",render:({field:g})=>w(De,{children:[c(Oe,{children:"Warranty Expiry"}),c(Me,{children:c(ct,{type:"date",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"requires_maintenance",render:({field:g})=>c(De,{className:"md:col-span-2",children:w("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[c(Me,{children:c(Rs,{checked:g.value,onCheckedChange:g.onChange})}),w("div",{className:"space-y-1 leading-none",children:[c(Oe,{children:"Requires Maintenance"}),c(hi,{children:"Check this box if the asset currently requires maintenance."})]})]})})})]}),w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Purchase Details"}),c(He,{control:h,name:"purchase_date",render:({field:g})=>w(De,{children:[c(Oe,{children:"Date"}),c(Me,{children:c(ct,{type:"date",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"purchase_price",render:({field:g})=>w(De,{children:[c(Oe,{children:"Price"}),c(Me,{children:c(ct,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...g,value:String(g.value??"")})}),c(Xe,{})]})})]}),w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Maintenance Details"}),c(He,{control:h,name:"last_serviced_date",render:({field:g})=>w(De,{children:[c(Oe,{children:"Last Serviced"}),c(Me,{children:c(ct,{type:"date",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"next_maintenance_due_date",render:({field:g})=>w(De,{children:[c(Oe,{children:"Next Due"}),c(Me,{children:c(ct,{type:"date",...g,value:g.value??""})}),c(Xe,{})]})})]}),w("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold md:col-span-2",children:"Additional Information"}),c(He,{control:h,name:"supplier_info",render:({field:g})=>w(De,{className:"md:col-span-2",children:[c(Oe,{children:"Supplier Info"}),c(Me,{children:c(Qr,{placeholder:"Supplier name, contact, notes...",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"service_document_url",render:({field:g})=>w(De,{children:[c(Oe,{children:"Service Doc URL"}),c(Me,{children:c(ct,{type:"url",placeholder:"https://example.com/invoice.pdf",...g,value:g.value??""})}),c(Xe,{})]})}),c(He,{control:h,name:"barcode_value",render:({field:g})=>w(De,{children:[c(Oe,{children:"Barcode/QR"}),c(Me,{children:c(ct,{placeholder:"Scan or enter code",...g,value:g.value??""})}),c(Xe,{})]})})]}),w("div",{className:"md:col-span-2 rounded-md border p-4",children:[c("h3",{className:"text-lg font-semibold mb-4",children:"Tags"}),c("div",{className:"min-h-[60px] text-muted-foreground",children:"Tag management UI will be implemented here. (e.g., Multi-select combobox)"})]}),w("div",{className:"md:col-span-2 flex justify-end space-x-2 pt-4",children:[c(Fe,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),c(Fe,{type:"submit",disabled:d.formState.isSubmitting,children:d.formState.isSubmitting?"Saving...":a?"Update Asset":"Add Asset"})]})]})})},EYe=({asset:e,open:t,onOpenChange:r,onSuccess:n})=>{const[a,i]=A.useState(""),[o,s]=A.useState(""),[l,u]=A.useState(void 0),[d,f]=A.useState([]),[h,m]=A.useState(!1),[x,g]=A.useState(!1),{toast:y}=yn();A.useEffect(()=>{(async()=>{if(e!=null&&e.id&&t){g(!0);const{data:S,error:C}=await Le.from("asset_documents").select("id, file_name").eq("asset_id",e.id).order("uploaded_at",{ascending:!1});C?(console.error("Error fetching asset documents for dialog:",C),y({title:"Error",description:"Could not load documents for invoice selection.",variant:"destructive"})):f(S||[]),g(!1)}else t||f([])})()},[e,t,y]),A.useEffect(()=>{t&&(i(""),s(""),u(void 0))},[t,e]);const _=async()=>{if(!e||!e.id){y({title:"Error",description:"No asset selected.",variant:"destructive"});return}if(!e.maintenance_interval_months||e.maintenance_interval_months<=0){y({title:"Configuration Error",description:"Maintenance interval is not set for this asset. Please edit the asset to set a valid maintenance interval.",variant:"destructive"});return}const{data:{user:b},error:S}=await Le.auth.getUser();if(S||!b){y({title:"Authentication Error",description:"Could not get current user. Please ensure you are logged in.",variant:"destructive"});return}const C=b.id,E=parseFloat(o)||0;m(!0);try{const{error:O}=await Le.rpc("mark_asset_as_serviced",{p_asset_id:e.id,p_serviced_by_user_id:C,p_service_notes:a,p_maintenance_cost:E,p_invoice_document_id:l||null});if(O)throw O;y({title:"Success",description:`${e.asset_name} marked as serviced.`}),n(),r(!1)}catch(O){console.error("Error marking asset as serviced:",O),y({title:"Error",description:O.message||"Could not mark asset as serviced.",variant:"destructive"})}finally{m(!1)}};return e?c(ja,{open:t,onOpenChange:r,children:w(Pa,{className:"sm:max-w-md",children:[c(Ta,{children:w(Oa,{children:["Mark as Serviced: ",e.asset_name]})}),w("div",{className:"py-4 grid gap-4",children:[w("div",{children:[w("p",{children:[c("strong",{children:"Asset:"})," ",e.asset_name]}),w("p",{children:[c("strong",{children:"Last Serviced:"})," ",e.last_serviced_date?new Date(e.last_serviced_date).toLocaleDateString():"N/A"]}),w("p",{children:[c("strong",{children:"Next Due:"})," ",e.next_maintenance_due_date?new Date(e.next_maintenance_due_date).toLocaleDateString():"N/A"]})]}),w("div",{children:[c(er,{htmlFor:"maintenance-cost",children:"Maintenance Cost ()"}),c(ct,{id:"maintenance-cost",type:"number",value:o,onChange:b=>s(b.target.value),placeholder:"0.00"})]}),w("div",{children:[c(er,{htmlFor:"invoice-document",children:"Link Invoice (Optional)"}),w(Wr,{onValueChange:u,value:l,children:[c(Br,{id:"invoice-document",disabled:x||d.length===0,children:c(Vr,{placeholder:x?"Loading documents...":d.length===0?"No documents available":"Select an invoice"})}),w(Ur,{children:[c(wt,{value:"none",children:"None"}),d.map(b=>c(wt,{value:b.id,children:b.file_name},b.id))]})]}),d.length===0&&!x&&c("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload documents on the asset detail page first."})]}),w("div",{children:[c(er,{htmlFor:"service-notes",children:"Service Notes (Optional)"}),c(Qr,{id:"service-notes",value:a,onChange:b=>i(b.target.value),placeholder:"Enter any notes about the service performed..."})]}),(!e.maintenance_interval_months||e.maintenance_interval_months<=0)&&c("p",{className:"text-sm text-destructive",children:"Warning: Maintenance interval is not set for this asset. The next due date cannot be calculated automatically. Please edit the asset to set a maintenance interval."})]}),w(Qi,{children:[c(x3,{asChild:!0,children:c(Fe,{variant:"outline",children:"Cancel"})}),c(Fe,{onClick:_,disabled:h||!e.maintenance_interval_months||e.maintenance_interval_months<=0,children:h?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):"Confirm Service"})]})]})}):null},CYe=["Sold","Scrapped","Donated","Stolen","Obsolete","Other"],PYe=({asset:e,open:t,onOpenChange:r,onSuccess:n})=>{const[a,i]=A.useState(new Date),[o,s]=A.useState(void 0),[l,u]=A.useState(""),[d,f]=A.useState(""),[h,m]=A.useState(!1),{toast:x}=yn();A.useEffect(()=>{t&&(i(new Date),s(void 0),u(""),f(""))},[t,e]);const g=async()=>{if(!e||!e.id){x({title:"Error",description:"No asset selected.",variant:"destructive"});return}if(!a){x({title:"Validation Error",description:"Disposal date is required.",variant:"destructive"});return}if(!o){x({title:"Validation Error",description:"Disposal reason is required.",variant:"destructive"});return}const{data:{user:y},error:_}=await Le.auth.getUser();if(_||!y){x({title:"Authentication Error",description:"Could not get current user.",variant:"destructive"});return}m(!0);try{const b=parseFloat(d)||0,S=Ut(a,"yyyy-MM-dd"),{error:C}=await Le.rpc("dispose_asset",{p_asset_id:e.id,p_disposed_by_user_id:y.id,p_disposal_date:S,p_disposal_reason:o,p_salvage_value:b,p_disposal_notes:l});if(C)throw C;x({title:"Success",description:`${e.asset_name} marked as disposed.`}),n(),r(!1)}catch(b){console.error("Error disposing asset:",b),x({title:"Error",description:b.message||"Could not dispose asset.",variant:"destructive"})}finally{m(!1)}};return e?c(ja,{open:t,onOpenChange:r,children:w(Pa,{className:"sm:max-w-[500px]",children:[c(Ta,{children:w(Oa,{children:["Dispose Asset: ",e.asset_name]})}),w("div",{className:"py-4 grid gap-4",children:[w("div",{children:[c(er,{htmlFor:"disposal-date",children:"Disposal Date"}),w(dg,{children:[c(fg,{asChild:!0,children:w(Fe,{variant:"outline",className:Rt("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[c(Hi,{className:"mr-2 h-4 w-4"}),a?Ut(a,"PPP"):c("span",{children:"Pick a date"})]})}),c(vm,{className:"w-auto p-0",children:c(ym,{mode:"single",selected:a,onSelect:i,initialFocus:!0})})]})]}),w("div",{children:[c(er,{htmlFor:"disposal-reason",children:"Reason"}),w(Wr,{onValueChange:y=>s(y),value:o,children:[c(Br,{id:"disposal-reason",children:c(Vr,{placeholder:"Select disposal reason"})}),c(Ur,{children:CYe.map(y=>c(wt,{value:y,children:y},y))})]})]}),w("div",{children:[c(er,{htmlFor:"salvage-value",children:"Salvage Value ()"}),c(ct,{id:"salvage-value",type:"number",value:d,onChange:y=>f(y.target.value),placeholder:"0.00"})]}),w("div",{children:[c(er,{htmlFor:"disposal-notes",children:"Notes (Optional)"}),c(Qr,{id:"disposal-notes",value:l,onChange:y=>u(y.target.value),placeholder:"Enter any additional notes about the disposal..."})]})]}),w(Qi,{children:[c(x3,{asChild:!0,children:c(Fe,{variant:"outline",children:"Cancel"})}),c(Fe,{onClick:g,disabled:h||!a||!o,children:h?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):"Confirm Disposal"})]})]})}):null},TYe=()=>{const[e,t]=A.useState(!1),[r,n]=A.useState(null),[a,i]=A.useState(null),[o,s]=A.useState(!1),[l,u]=A.useState(null),[d,f]=A.useState(!1),[h,m]=A.useState(0),[x,g]=A.useState(""),[y,_]=A.useState("all"),[b,S]=A.useState("all"),[C,E]=A.useState("all"),[O,T]=A.useState([]),[M,L]=A.useState([]);A.useEffect(()=>{(async()=>{const{data:D,error:K}=await Le.from("tags").select("id, name").order("name");K?console.error("Error fetching tags:",K):T(D||[])})()},[]);const z=J=>{n(null),t(!0)},P=()=>{t(!1),n(null)},R=J=>{i(J),s(!0)},j=J=>{u(J),f(!0)},V=()=>{m(J=>J+1)},Z=J=>{console.log("Asset saved:",J),P(),m(D=>D+1)},te=J=>{g(J.target.value),m(D=>D+1)},q=J=>{_(J),m(D=>D+1)},Y=J=>{S(J),m(D=>D+1)},U=J=>{E(J),m(D=>D+1)},G=A.useCallback(J=>{L(J)},[]);return w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"Asset Management"})," ",w("div",{className:"mb-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[w("div",{className:"flex flex-col md:flex-row gap-2 flex-grow",children:[c(ct,{placeholder:"Search by name or serial...",value:x,onChange:te,className:"max-w-sm"}),w(Wr,{value:y,onValueChange:q,children:[c(Br,{className:"w-full md:w-[180px]",children:c(Vr,{placeholder:"Filter by Category"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Categories"}),c(wt,{value:"Equipment",children:"Equipment"}),c(wt,{value:"Furniture",children:"Furniture"}),c(wt,{value:"IT",children:"IT"}),c(wt,{value:"Other",children:"Other"})]})]}),w(Wr,{value:b,onValueChange:Y,children:[c(Br,{className:"w-full md:w-[180px]",children:c(Vr,{placeholder:"Filter by Status"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Statuses"}),c(wt,{value:"Active",children:"Active"}),c(wt,{value:"Under Maintenance",children:"Under Maintenance"}),c(wt,{value:"Retired",children:"Retired"}),c(wt,{value:"Disposed",children:"Disposed"})]})]}),w(Wr,{value:C,onValueChange:U,children:[c(Br,{className:"w-full md:w-[180px]",children:c(Vr,{placeholder:"Filter by Tag"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Tags"}),O.map(J=>c(wt,{value:J.id,children:J.name},J.id))]})]})]}),c("div",{className:"flex gap-2",children:w(ja,{open:e,onOpenChange:t,children:[c(Hw,{asChild:!0,children:w(Fe,{onClick:()=>z(),children:[c(Ch,{className:"mr-2 h-4 w-4"})," Add New Asset"]})}),w(Pa,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[c(Ta,{children:c(Oa,{children:r?"Edit Asset":"Add New Asset"})}),c(kYe,{assetToEdit:r,onSave:Z,onCancel:P})]})]})})]}),c(_Ye,{onMarkAsServiced:R,onDisposeAsset:j,refreshTrigger:h,searchTerm:x,categoryFilter:y,statusFilter:b,onDataFiltered:G}),a&&c(EYe,{asset:a,open:o,onOpenChange:s,onSuccess:V}),l&&c(PYe,{asset:l,open:d,onOpenChange:f,onSuccess:V})]})},OYe=()=>{var C,E;const{assetId:e}=iy(),[t,r]=A.useState(null),[n,a]=A.useState([]),[i,o]=A.useState([]),[s,l]=A.useState([]),[u,d]=A.useState(!0),[f,h]=A.useState(null),[m,x]=A.useState(!1),g=tt.useRef(null),{toast:y}=yn(),_=async()=>{if(!e)return;const{data:O,error:T}=await Le.from("asset_documents").select("*").eq("asset_id",e).order("uploaded_at",{ascending:!1});T?console.error("Error fetching documents:",T):o(O||[])};A.useEffect(()=>{(async()=>{if(!e){h("Asset ID is missing."),d(!1);return}d(!0),h(null);try{const{data:T,error:M}=await Le.from("assets").select(`
            *,
            asset_tags (
              tag_id,
              tags (id, name, color)
            )
          `).eq("id",e).single();if(M)throw M;const L=T?{...T,tags:Array.isArray(T.asset_tags)?T.asset_tags.map(V=>V.tags).filter(Boolean):[]}:null;r(L);const{data:z,error:P}=await Le.from("maintenance_log").select("*").eq("asset_id",e).order("serviced_at",{ascending:!1});if(P)throw P;a(z||[]);const{data:R,error:j}=await Le.from("asset_documents").select("*").eq("asset_id",e).order("uploaded_at",{ascending:!1});if(j)throw j;if(o(R||[]),T&&(T.status==="Disposed"||T.status==="Retired")){const{data:V,error:Z}=await Le.from("asset_disposal_log").select("*").eq("asset_id",e).order("disposal_recorded_at",{ascending:!1});if(Z)throw Z;l(V||[])}}catch(T){console.error("Failed to fetch asset details:",T),h(T.message||"An unknown error occurred")}finally{d(!1)}})()},[e]);const b=async O=>{const T=O.target.files;if(!T||T.length===0||!e)return;const M=T[0];x(!0);try{const{data:{user:L},error:z}=await Le.auth.getUser();if(z||!L)throw new Error("User not authenticated.");const P=`public/${e}/${Date.now()}_${M.name}`,{error:R}=await Le.storage.from("asset-documents").upload(P,M);if(R)throw R;const{data:j}=Le.storage.from("asset-documents").getPublicUrl(P);if(!(j!=null&&j.publicUrl))throw new Error("Could not get public URL.");const{error:V}=await Le.from("asset_documents").insert({asset_id:e,file_name:M.name,file_url:j.publicUrl,file_type:M.type,file_size_bytes:M.size,uploaded_by_user_id:L.id});if(V)throw V;y({title:"Success",description:"Document uploaded successfully."}),_()}catch(L){console.error("Error uploading document:",L),y({title:"Upload Error",description:L.message||"Failed to upload document.",variant:"destructive"})}finally{x(!1),g.current&&(g.current.value="")}};if(u)return w("div",{className:"container mx-auto p-4 md:p-6 space-y-4",children:[c(jl,{className:"h-8 w-1/4"}),c(jl,{className:"h-40 w-full"}),c(jl,{className:"h-40 w-full"})]});if(f)return c("div",{className:"container mx-auto p-4 md:p-6",children:w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:f})]})});if(!t)return c("div",{className:"container mx-auto p-4 md:p-6",children:"Asset not found."});const S=O=>{if(!O)return"N/A";try{const T=new Date(O);return O.includes("T")?T.toLocaleString():T.toLocaleDateString()}catch{return"Invalid Date"}};return w("div",{className:"container mx-auto p-4 md:p-6 space-y-6",children:[c(Aa,{heading:`Asset Details: ${t.asset_name}`}),w(sr,{children:[c(yr,{children:c(xr,{children:"Asset Information"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("div",{children:[c("strong",{children:"Name:"})," ",t.asset_name]}),w("div",{children:[c("strong",{children:"Category:"})," ",t.category]}),w("div",{children:[c("strong",{children:"Serial Number:"})," ",t.serial_number||"N/A"]}),w("div",{children:[c("strong",{children:"Location:"})," ",t.location||"N/A"]}),w("div",{children:[c("strong",{children:"Status:"})," ",t.status]}),w("div",{children:[c("strong",{children:"Purchase Date:"})," ",S(t.purchase_date)]}),w("div",{children:[c("strong",{children:"Warranty Expiry:"})," ",S(t.warranty_expiry_date)]}),w("div",{children:[c("strong",{children:"Supplier Info:"})," ",t.supplier_info||"N/A"]}),w("div",{children:[c("strong",{children:"Maintenance Interval:"})," ",t.maintenance_interval_months?`${t.maintenance_interval_months} months`:"Not Set"]}),w("div",{children:[c("strong",{children:"Last Serviced:"})," ",S(t.last_serviced_date)]}),w("div",{children:[c("strong",{children:"Next Due:"})," ",S(t.next_maintenance_due_date)]}),w("div",{children:[c("strong",{children:"Purchase Cost:"})," ",((C=t.purchase_price)==null?void 0:C.toFixed(2))||"0.00"]}),w("div",{className:"md:col-span-2",children:[c("strong",{children:"Tags:"}),t.tags&&t.tags.length>0?c("span",{className:"ml-2",children:t.tags.map(O=>c(ed,{variant:"secondary",className:"mr-1 mb-1",style:O.color?{backgroundColor:O.color,color:"#fff"}:{},children:O.name},O.id))}):c("span",{className:"ml-2 text-muted-foreground",children:"No tags"})]})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Cost Tracking"})}),c(mr,{children:(()=>{const O=t.purchase_price||0,T=n.reduce((z,P)=>z+(P.maintenance_cost||0),0),M=(t.status==="Disposed"||t.status==="Retired")&&t.salvage_value||0,L=O+T-M;return w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("div",{children:[c("strong",{children:"Purchase Cost:"})," ",O.toFixed(2)]}),w("div",{children:[c("strong",{children:"Total Maintenance Cost:"})," ",T.toFixed(2)]}),(t.status==="Disposed"||t.status==="Retired")&&w("div",{children:[c("strong",{children:"Salvage Value:"})," ",M.toFixed(2)]}),w("div",{children:[c("strong",{children:"Total Cost of Ownership:"})," ",L.toFixed(2)]})]})})()})]}),(t.status==="Disposed"||t.status==="Retired")&&t.disposal_date&&w(sr,{className:"border-destructive",children:[c(yr,{children:c(xr,{className:"text-destructive",children:"Disposal Information"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("div",{children:[c("strong",{children:"Disposal Date:"})," ",S(t.disposal_date)]}),w("div",{children:[c("strong",{children:"Reason:"})," ",t.disposal_reason||"N/A"]}),w("div",{children:[c("strong",{children:"Salvage Value:"})," ",((E=t.salvage_value)==null?void 0:E.toFixed(2))||"0.00"]}),t.disposal_notes&&w("div",{className:"md:col-span-2",children:[c("strong",{children:"Notes:"})," ",t.disposal_notes]})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Maintenance History"})}),c(mr,{children:n.length>0?c("div",{className:"overflow-x-auto",children:w("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[c("thead",{className:"bg-gray-50",children:w("tr",{children:[c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Serviced At"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Prev. Next Due"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"New Next Due"})]})}),c("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(O=>{var M;const T=i.find(L=>L.id===O.invoice_document_id);return w("tr",{children:[c("td",{className:"px-4 py-2 whitespace-nowrap",children:S(O.serviced_at)}),w("td",{className:"px-4 py-2 whitespace-nowrap",children:["",((M=O.maintenance_cost)==null?void 0:M.toFixed(2))||"0.00"]}),c("td",{className:"px-4 py-2 whitespace-nowrap",children:T?c("a",{href:T.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:T.file_name}):O.invoice_document_id?"Invoice not found":"-"}),c("td",{className:"px-4 py-2",children:O.notes||"-"}),c("td",{className:"px-4 py-2 whitespace-nowrap",children:S(O.previous_next_maintenance_due_date)}),c("td",{className:"px-4 py-2 whitespace-nowrap",children:S(O.new_next_maintenance_due_date)})]},O.id)})})]})}):c("p",{className:"text-gray-500",children:"No maintenance history recorded."})})]}),s.length>0&&w(sr,{children:[c(yr,{children:c(xr,{children:"Disposal Log"})}),c(mr,{children:c("div",{className:"overflow-x-auto",children:w("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[c("thead",{className:"bg-gray-50",children:w("tr",{children:[c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Recorded At"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Disposal Date"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Salvage Value ()"}),c("th",{scope:"col",className:"px-4 py-2 text-left font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),c("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(O=>{var T;return w("tr",{children:[c("td",{className:"px-4 py-2 whitespace-nowrap",children:S(O.disposal_recorded_at)}),c("td",{className:"px-4 py-2 whitespace-nowrap",children:S(O.disposal_date)}),c("td",{className:"px-4 py-2",children:O.disposal_reason}),w("td",{className:"px-4 py-2 whitespace-nowrap",children:["",((T=O.salvage_value)==null?void 0:T.toFixed(2))||"0.00"]}),c("td",{className:"px-4 py-2",children:O.disposal_notes||"-"})]},O.id)})})]})})})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Documents"})}),w(mr,{children:[i.length>0?c("ul",{children:i.map(O=>w("li",{children:[c("a",{href:O.file_url,target:"_blank",rel:"noopener noreferrer",children:O.file_name})," (Uploaded: ",S(O.uploaded_at),")"]},O.id))}):c("p",{children:"No documents uploaded."}),w("div",{className:"mt-4 border-t pt-4",children:[c("h4",{className:"font-semibold mb-2",children:"Upload New Document"}),w("div",{className:"flex items-center gap-2",children:[c(ct,{type:"file",ref:g,onChange:b,disabled:m,className:"flex-grow"}),w(Fe,{size:"sm",onClick:()=>{var O;return(O=g.current)==null?void 0:O.click()},disabled:m,children:[m?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(Y0,{className:"mr-2 h-4 w-4"}),m?"Uploading...":"Choose File"]})]})]})]})]})]})};function AM({className:e,date:t,onDateChange:r}){return c("div",{className:Rt("grid gap-2",e),children:w(dg,{children:[c(fg,{asChild:!0,children:w(Fe,{id:"date",variant:"outline",className:Rt("w-[300px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[c(Hi,{className:"mr-2 h-4 w-4"}),t!=null&&t.from?t.to?w(_r,{children:[Ut(t.from,"LLL dd, y")," -"," ",Ut(t.to,"LLL dd, y")]}):Ut(t.from,"LLL dd, y"):c("span",{children:"Pick a date range"})]})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{initialFocus:!0,mode:"range",defaultMonth:t==null?void 0:t.from,selected:t,onSelect:r,numberOfMonths:2})})]})})}const jb=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],zV={"In Stock":"#22C55E","Low Stock":"#FBBF24",Expired:"#F87171"},WV=["#4F46E5","#A5B4FC"],DYe=({inventoryData:e=[],logData:t=[]})=>{const r=A.useMemo(()=>{const l={Medicines:0,Tools:0,Consumables:0};return e.forEach(u=>{const d=u.category;d&&l[d]!==void 0&&l[d]++}),Object.entries(l).map(([u,d])=>({name:u,value:d}))},[e]),n=A.useMemo(()=>{const l={"In Stock":0,"Low Stock":0,Expired:0};return e.forEach(u=>{l[u.stock_status]!==void 0&&l[u.stock_status]++}),Object.entries(l).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]);e.length;const a=r.reduce((l,u)=>l+u.value,0),i=n.reduce((l,u)=>l+u.value,0),o=()=>{var h;const l=e.reduce((m,x)=>m+(x.quantity||0),0),u=[...t].sort((m,x)=>new Date(m.created_at).getTime()-new Date(x.created_at).getTime()),d=new Map;if(u.length===0){const m=Date.now();d.set(m,{timestamp:m,name:new Date(m).toLocaleDateString(),value:l})}else{const m=u.reduce((O,T)=>O+T.quantity_change,0),x=l-m,y=new Date(u[0].created_at).getTime()-1;d.set(y,{timestamp:y,name:new Date(y).toLocaleDateString(),value:x});let _=x;u.forEach(O=>{_+=O.quantity_change;const T=new Date(O.created_at).getTime();d.set(T,{timestamp:T,name:new Date(T).toLocaleDateString(),value:_})});const b=Array.from(d.keys()).pop()??y,S=Date.now(),C=24*60*60*1e3;(((h=d.get(b))==null?void 0:h.value)!==l||S-b>C)&&d.set(S,{timestamp:S,name:new Date(S).toLocaleDateString(),value:l})}return Array.from(d.values())},s=(l,u)=>{const{payload:d}=l;return c("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:d.map((f,h)=>{const m=u>0?(f.payload.value/u*100).toFixed(1):0;return w("div",{className:"flex items-center",children:[c("span",{className:"w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:f.color}}),f.payload.name," (",m,"%)"]},`legend-${f.payload.name}-${h}`)})})};return w("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[" ",w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Items by Category"})}),w(mr,{className:"flex flex-col items-center pt-4",children:[" ",c(Ps,{width:"100%",height:220,children:w(Xp,{children:[c(Ls,{data:r,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:r.map((l,u)=>c(Yc,{fill:jb[u%jb.length],stroke:jb[u%jb.length]},`cell-cat-${u}`))}),c(Za,{formatter:(l,u)=>[`${l} (${a>0?(l/a*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),c(Ku,{content:l=>s(l,a)})]})})]})]}),w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Items by Status"})}),w(mr,{className:"flex flex-col items-center pt-4",children:[" ",c(Ps,{width:"100%",height:220,children:w(Xp,{children:[c(Ls,{data:n,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:n.map((l,u)=>c(Yc,{fill:zV[l.name],stroke:zV[l.name]},`cell-stat-${u}`))}),c(Za,{formatter:(l,u)=>[`${l} (${i>0?(l/i*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),c(Ku,{content:l=>s(l,i)})]})})]})]}),w(sr,{className:"md:col-span-2 lg:col-span-3",children:[" ",w(yr,{className:"pb-2",children:[" ",c(xr,{className:"text-sm font-medium",children:"Item Quantities"}),c("p",{className:"text-xs text-muted-foreground",children:"Current stock vs. low stock threshold"})," "]}),w(mr,{className:"pb-4 pl-2 pr-4",children:[" ",c(Ps,{width:"100%",height:300,children:w(Hx,{data:e,margin:{top:5,right:5,left:-10,bottom:5},barGap:4,barCategoryGap:"20%",children:[c(Rl,{dataKey:"item_name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"10px"},interval:0,angle:-45,textAnchor:"end",height:60}),c(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1}),c(Za,{cursor:{fill:"rgba(79, 70, 229, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(l,u)=>[`${l}`,u==="quantity"?"Quantity":"Low Stock Threshold"]}),c(nu,{dataKey:"quantity",fill:WV[0],name:"Quantity",radius:[4,4,0,0],barSize:10}),c(nu,{dataKey:"low_stock_threshold",fill:WV[1],name:"Low Stock Threshold",radius:[4,4,0,0],barSize:10})]})})]})]}),w(sr,{className:"md:col-span-2 lg:col-span-3",children:[w(yr,{className:"flex flex-row items-center justify-between pb-2",children:[" ",w("div",{children:[c(xr,{className:"text-sm font-medium",children:"Overall Inventory Trend"}),c("p",{className:"text-xs text-muted-foreground",children:"Total quantity changes over time"})," "]})]}),w(mr,{className:"pb-4 pl-2 pr-4",children:[" ",c(Ps,{width:"100%",height:300,children:w(lee,{data:o(),margin:{top:5,right:10,left:-10,bottom:5},children:[c("defs",{children:w("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[c("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.8}),c("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),c(WI,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--muted))"}),c(Rl,{dataKey:"timestamp",type:"number",domain:["dataMin","dataMax"],axisLine:!1,tickLine:!1,tickFormatter:l=>new Date(l).toLocaleDateString(),dy:10,style:{fontSize:"12px"}}),c(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1,domain:[0,"dataMax + 10"]}),c(Za,{contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:(l,u,d)=>[`Total Quantity: ${l}`,d.payload.name]}),c(Ih,{type:"monotone",dataKey:"value",connectNulls:!0,stroke:"#4F46E5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:2,dot:{r:4,fill:"#4F46E5",stroke:"#fff",strokeWidth:2},activeDot:{r:6},name:"Total Quantity"})]})})]})]})]})},IYe=["Medicines","Tools","Consumables"],RYe=()=>{const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,s]=A.useState(null),[l,u]=A.useState(void 0),[d,f]=A.useState("all"),[h,m]=A.useState(""),[x,g]=A.useState({inventoryLevelStatus:{},upcomingExpiryItems:[]}),[y,_]=A.useState([]);A.useEffect(()=>{(async()=>{i(!0),s(null);try{const z=(await TR()).map(Z=>({...Z,stock_status:Z.quantity>Z.low_stock_threshold?"In Stock":"Low Stock"}));t(z),n(z);const P=new Date(0).toISOString(),R=new Date().toISOString(),j=await wW(P,R);_(j);const V=await b(z);g(V)}catch(L){const z=L instanceof Error?L.message:"Failed to load initial inventory or log data";s(z),console.error("Error fetching initial data:",L)}finally{i(!1)}})()},[]),A.useEffect(()=>{let M=[...e];l!=null&&l.from&&(l!=null&&l.to)?M=M.filter(L=>{const z=new Date(L.created_at);return z>=l.from&&z<=l.to}):l!=null&&l.from?M=M.filter(L=>new Date(L.created_at)>=l.from):l!=null&&l.to&&(M=M.filter(L=>new Date(L.created_at)<=l.to)),d!=="all"&&(M=M.filter(L=>L.category===d)),h&&(M=M.filter(L=>{var z;return(z=L.supplier_info)==null?void 0:z.toLowerCase().includes(h.toLowerCase())})),n(M)},[l,d,h,e]),A.useEffect(()=>{(async()=>{if(l!=null&&l.from&&(l!=null&&l.to)){i(!0),s(null);try{const L=l.from.toISOString(),z=l.to.toISOString(),P=await wW(L,z);_(P)}catch(L){s(`Error fetching inventory log data: ${L instanceof Error?L.message:String(L)}`)}finally{i(!1)}}else _([])})()},[l]);const b=async M=>{const L=M.reduce((P,R)=>(R.stock_status==="Low Stock"&&(P[R.item_name]=R.quantity),P),{}),z=M.filter(P=>{if(!P.expiry_date)return!1;const R=new Date(P.expiry_date),j=new Date;return j.setDate(j.getDate()+90),R<=j}).sort((P,R)=>new Date(P.expiry_date).getTime()-new Date(R.expiry_date).getTime());return{inventoryLevelStatus:L,upcomingExpiryItems:z}},S=M=>M?new Date(M).toLocaleDateString():"N/A",C=(M,L="Inventory Report")=>{const z=new $r;z.text(L,14,15);const P=["ID","Name","Category","Quantity","Unit Price","Supplier","Expiry Date","Status"],R=[];M.forEach(j=>{const V=[j.id,j.item_name,j.category,j.quantity,j.purchase_price??"N/A",j.supplier_info??"N/A",S(j.expiry_date),j.stock_status];R.push(V)}),PR(z,{head:[P],body:R,startY:20}),z.save(`${L.replace(/\s+/g,"_")}.pdf`)},E=(M,L="Inventory Report")=>{const z=M.map(j=>({ID:j.id,Name:j.item_name,Category:j.category,Quantity:j.quantity,"Unit Price":j.purchase_price??"N/A",Supplier:j.supplier_info??"N/A","Expiry Date":S(j.expiry_date),Status:j.stock_status,"Low Stock Threshold":j.low_stock_threshold,"Created At":S(j.created_at)})),P=af.json_to_sheet(z),R=af.book_new();af.book_append_sheet(R,P,"Inventory"),mM(R,`${L.replace(/\s+/g,"_")}.xlsx`)},O=()=>{if(console.log("Generating Stock Report with data:",r),r.length===0){s("No data available to generate report.");return}s(null);try{C(r,"Stock Report"),E(r,"Stock Report")}catch(M){console.error("Error generating stock report:",M),s(`Error generating stock report: ${M instanceof Error?M.message:String(M)}`)}},T=()=>{const M=new Date,L=new Date;L.setDate(M.getDate()+90);const z=r.filter(P=>P.expiry_date?new Date(P.expiry_date)<=L:!1).sort((P,R)=>{const j=P.expiry_date?new Date(P.expiry_date).getTime():0,V=R.expiry_date?new Date(R.expiry_date).getTime():0;return j-V});if(console.log("Generating Expiry Report with data:",z),z.length===0){s("No items expiring soon to generate report.");return}s(null);try{C(z,"Expiry Report (Next 90 Days)"),E(z,"Expiry Report (Next 90 Days)")}catch(P){console.error("Error generating expiry report:",P),s(`Error generating expiry report: ${P instanceof Error?P.message:String(P)}`)}};return w("div",{className:"space-y-4",children:[w(sr,{children:[c(yr,{children:c(xr,{children:"Filters"})}),w(mr,{className:"flex flex-col md:flex-row gap-4 items-end",children:[" ",w("div",{className:"flex-1",children:[c("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Date Range (Created At)"}),c(AM,{date:l,onDateChange:u})]}),w("div",{className:"flex-1",children:[c("label",{htmlFor:"inv-category-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Category"}),w(Wr,{value:d,onValueChange:M=>f(M),children:[c(Br,{id:"inv-category-filter",children:c(Vr,{placeholder:"Filter by Category"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Categories"}),IYe.map(M=>c(wt,{value:M,children:M},M))]})]})]}),w("div",{className:"flex-1",children:[c("label",{htmlFor:"inv-supplier-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Supplier"}),c(ct,{id:"inv-supplier-filter",placeholder:"Filter by supplier...",value:h,onChange:M=>m(M.target.value)})]})]})]}),w("div",{className:"flex gap-2",children:[c(Fe,{onClick:O,disabled:a,children:"Generate Stock Report"}),c(Fe,{onClick:T,variant:"outline",disabled:a,children:"Generate Expiry Report"})]}),a&&c("p",{children:"Loading report data..."}),o&&w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:o})]}),w("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Low Stock Items"}),c(mc,{className:"h-4 w-4 text-muted-foreground text-red-500"})]}),w(mr,{children:[c("div",{className:"text-2xl font-bold",children:Object.keys(x.inventoryLevelStatus).length}),w("ul",{className:"text-xs text-muted-foreground list-disc pl-4",children:[Object.entries(x.inventoryLevelStatus).slice(0,5).map(([M,L])=>w("li",{children:[M," (",L,")"]},M)),Object.keys(x.inventoryLevelStatus).length>5&&c("li",{children:"...and more"})]}),Object.keys(x.inventoryLevelStatus).length===0&&c("p",{className:"text-xs text-muted-foreground",children:"No items currently low on stock."})]})]}),w(sr,{children:[w(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Upcoming Expiry (90 days)"}),c(mc,{className:"h-4 w-4 text-muted-foreground text-orange-500"})]}),w(mr,{children:[c("div",{className:"text-2xl font-bold",children:x.upcomingExpiryItems.length}),w("ul",{className:"text-xs text-muted-foreground list-disc pl-4",children:[x.upcomingExpiryItems.slice(0,5).map(M=>w("li",{children:[M.item_name," (",S(M.expiry_date),")"]},M.id)),x.upcomingExpiryItems.length>5&&c("li",{children:"...and more"})]}),x.upcomingExpiryItems.length===0&&c("p",{className:"text-xs text-muted-foreground",children:"No items expiring soon."})]})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Report Data Preview & Charts"})}),w(mr,{children:[w("p",{className:"text-muted-foreground mb-4",children:["Filtered Items: ",r.length]}),c(DYe,{inventoryData:r,logData:y})]})]})]})},$b=["#4F46E5","#60A5FA","#34D399","#FBBF24","#F87171"],VV={Active:"#22C55E","Under Maintenance":"#FBBF24",Retired:"#9CA3AF",Disposed:"#F87171"},MYe="#8B5CF6",FYe="#F59E0B",LYe=({assetData:e=[]})=>{const t=A.useMemo(()=>{const l={"Equipment & Tools":0,Furniture:0,IT:0,Other:0};return e.forEach(u=>{const d=u.category;d&&l[d]!==void 0&&l[d]++}),Object.entries(l).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]),r=A.useMemo(()=>{const l={Active:0,"Under Maintenance":0,Retired:0,Disposed:0};return e.forEach(u=>{const d=u.status;d&&l[d]!==void 0&&l[d]++}),Object.entries(l).map(([u,d])=>({name:u,value:d})).filter(u=>u.value>0)},[e]),n=A.useMemo(()=>{const l={"0-500":0,"501-2000":0,"2001-10000":0,"10001+":0};return e.forEach(u=>{const d=u.purchase_price??0;d<=500?l["0-500"]++:d<=2e3?l["501-2000"]++:d<=1e4?l["2001-10000"]++:l["10001+"]++}),Object.entries(l).map(([u,d])=>({name:u,value:d}))},[e]),a=A.useMemo(()=>{const l=new Date;return e.filter(d=>d.next_maintenance_due_date).map(d=>({...d,daysUntilDue:W0e(zr(d.next_maintenance_due_date),l)})).filter(d=>d.daysUntilDue>=0&&d.daysUntilDue<=90).sort((d,f)=>d.daysUntilDue-f.daysUntilDue).slice(0,10).map(d=>({name:d.asset_name,value:d.daysUntilDue}))},[e]),i=t.reduce((l,u)=>l+u.value,0),o=r.reduce((l,u)=>l+u.value,0),s=(l,u)=>{const{payload:d}=l;return c("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2 w-full mt-4 text-xs",children:d.map((f,h)=>{const m=u>0?(f.payload.value/u*100).toFixed(1):0;return w("div",{className:"flex items-center",children:[c("span",{className:"w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:f.color}}),f.payload.name," (",m,"%)"]},`legend-${f.payload.name}-${h}`)})})};return w("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",children:[" ",w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Assets by Category"})}),c(mr,{className:"flex flex-col items-center pt-4",children:c(Ps,{width:"100%",height:180,children:w(Xp,{children:[c(Ls,{data:t,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:t.map((l,u)=>c(Yc,{fill:$b[u%$b.length],stroke:$b[u%$b.length]},`cell-asset-cat-${u}`))}),c(Za,{formatter:(l,u)=>[`${l} (${i>0?(l/i*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),c(Ku,{content:l=>s(l,i)})]})})})]}),w(sr,{children:[c(yr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:c(xr,{className:"text-sm font-medium",children:"Assets by Status"})}),c(mr,{className:"flex flex-col items-center pt-4",children:c(Ps,{width:"100%",height:180,children:w(Xp,{children:[c(Ls,{data:r,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:1,dataKey:"value",startAngle:90,endAngle:450,children:r.map((l,u)=>c(Yc,{fill:VV[l.name],stroke:VV[l.name]},`cell-asset-stat-${u}`))}),c(Za,{formatter:(l,u)=>[`${l} (${o>0?(l/o*100).toFixed(1):0}%)`,u],contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"}}),c(Ku,{content:l=>s(l,o)})]})})})]}),w(sr,{children:[w(yr,{className:"pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Asset Value Distribution"}),c("p",{className:"text-xs text-muted-foreground",children:"Count of assets by purchase price range"})]}),c(mr,{className:"pb-4 pl-2 pr-4",children:c(Ps,{width:"100%",height:200,children:w(Hx,{data:n,margin:{top:5,right:5,left:-10,bottom:5},barCategoryGap:"20%",children:[c(Rl,{dataKey:"name",axisLine:!1,tickLine:!1,dy:10,style:{fontSize:"12px"}}),c(Ml,{axisLine:!1,tickLine:!1,width:30,style:{fontSize:"12px"},allowDecimals:!1}),c(Za,{cursor:{fill:"rgba(139, 92, 246, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:l=>[`${l} Assets`,null]}),c(nu,{dataKey:"value",fill:MYe,name:"Assets",radius:[4,4,0,0],barSize:12})]})})})]}),w(sr,{children:[w(yr,{className:"pb-2",children:[c(xr,{className:"text-sm font-medium",children:"Upcoming Maintenance (Next 90 Days)"}),c("p",{className:"text-xs text-muted-foreground",children:"Assets needing maintenance soon (max 10 shown)"})]}),c(mr,{className:"pb-4 pl-2 pr-4",children:c(Ps,{width:"100%",height:200,children:w(Hx,{data:a,layout:"vertical",margin:{top:5,right:20,left:30,bottom:5},barCategoryGap:"20%",children:[c(Rl,{type:"number",hide:!0}),c(Ml,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,style:{fontSize:"10px"},width:100,interval:0}),c(Za,{cursor:{fill:"rgba(245, 158, 11, 0.1)"},contentStyle:{fontSize:"12px",padding:"4px 8px",borderRadius:"4px"},formatter:l=>[`Due in ${l} days`,null]}),c(nu,{dataKey:"value",fill:FYe,name:"Days Until Due",radius:[0,4,4,0],barSize:10})]})})})]})]})},jYe=["Equipment & Tools","Furniture","IT","Other"],$Ye=["Active","Under Maintenance","Retired","Disposed"],BYe=()=>{const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,s]=A.useState(null),[l,u]=A.useState(void 0),[d,f]=A.useState("all"),[h,m]=A.useState("all");A.useEffect(()=>{(async()=>{i(!0),s(null);try{const C=await bYe();t(C),n(C)}catch(C){s(C instanceof Error?C.message:"Failed to load asset data")}finally{i(!1)}})()},[]),A.useEffect(()=>{let S=[...e];l!=null&&l.from&&(l!=null&&l.to)?S=S.filter(C=>{if(!C.purchase_date)return!1;const E=new Date(C.purchase_date);return E>=l.from&&E<=l.to}):l!=null&&l.from?S=S.filter(C=>C.purchase_date&&new Date(C.purchase_date)>=l.from):l!=null&&l.to&&(S=S.filter(C=>C.purchase_date&&new Date(C.purchase_date)<=l.to)),d!=="all"&&(S=S.filter(C=>C.category===d)),h!=="all"&&(S=S.filter(C=>C.status===h)),n(S)},[l,d,h,e]);const x=S=>S?new Date(S).toLocaleDateString():"N/A",g=(S,C="Asset Report")=>{const E=new $r;E.text(C,14,15);const O=["ID","Name","Category","Status","Purchase Date","Purchase Price","Supplier"],T=[];S.forEach(M=>{const L=[M.id,M.asset_name,M.category,M.status,x(M.purchase_date),M.purchase_price??"N/A",M.supplier_info??"N/A"];T.push(L)}),PR(E,{head:[O],body:T,startY:20}),E.save(`${C.replace(/\s+/g,"_")}.pdf`)},y=(S,C="Asset Report")=>{const E=S.map(M=>({ID:M.id,Name:M.asset_name,Category:M.category,Status:M.status,"Purchase Date":x(M.purchase_date),"Purchase Price":M.purchase_price??"N/A",Supplier:M.supplier_info??"N/A",Location:M.location,"Next Maintenance":x(M.next_maintenance_due_date)})),O=af.json_to_sheet(E),T=af.book_new();af.book_append_sheet(T,O,"Assets"),mM(T,`${C.replace(/\s+/g,"_")}.xlsx`)},_=()=>{if(console.log("Generating Asset List Report with data:",r),r.length===0){s("No data available to generate report.");return}s(null);try{g(r,"Asset List Report"),y(r,"Asset List Report")}catch(S){console.error("Error generating asset list report:",S),s(`Error generating asset list report: ${S instanceof Error?S.message:String(S)}`)}},b=()=>{const S=r.filter(C=>C.last_serviced_date||C.next_maintenance_due_date);if(console.log("Generating Maintenance History Report with data:",S),S.length===0){s("No assets with maintenance data available to generate report.");return}s(null);try{g(S,"Asset Maintenance Report"),y(S,"Asset Maintenance Report")}catch(C){console.error("Error generating asset maintenance report:",C),s(`Error generating asset maintenance report: ${C instanceof Error?C.message:String(C)}`)}};return w("div",{className:"space-y-4",children:[w(sr,{children:[c(yr,{children:c(xr,{children:"Filters"})}),w(mr,{className:"flex flex-col md:flex-row gap-4 items-end",children:[w("div",{className:"flex-1",children:[c("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Purchase Date Range"}),c(AM,{date:l,onDateChange:u})]}),w("div",{className:"flex-1",children:[c("label",{htmlFor:"asset-category-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Category"}),w(Wr,{value:d,onValueChange:S=>f(S),children:[c(Br,{id:"asset-category-filter",children:c(Vr,{placeholder:"Filter by Category"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Categories"}),jYe.map(S=>c(wt,{value:S,children:S},S))]})]})]}),w("div",{className:"flex-1",children:[c("label",{htmlFor:"asset-status-filter",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),w(Wr,{value:h,onValueChange:S=>m(S),children:[c(Br,{id:"asset-status-filter",children:c(Vr,{placeholder:"Filter by Status"})}),w(Ur,{children:[c(wt,{value:"all",children:"All Statuses"}),$Ye.map(S=>c(wt,{value:S,children:S},S))]})]})]})]})]}),w("div",{className:"flex gap-2",children:[c(Fe,{onClick:_,disabled:a,children:"Generate Asset List"}),c(Fe,{onClick:b,variant:"outline",disabled:a,children:"Generate Maintenance Report"})]}),a&&c("p",{children:"Loading report data..."}),o&&w(id,{variant:"destructive",children:[c(mc,{className:"h-4 w-4"}),c(od,{children:"Error"}),c(sd,{children:o})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Report Data Preview & Charts"})}),w(mr,{children:[w("p",{className:"text-muted-foreground mb-4",children:["Filtered Assets: ",r.length]}),r.length>0?c("div",{className:"overflow-x-auto",children:w("table",{className:"table-auto w-full",children:[c("thead",{children:w("tr",{className:"text-left",children:[c("th",{className:"px-4 py-2",children:"Name"}),c("th",{className:"px-4 py-2",children:"Category"}),c("th",{className:"px-4 py-2",children:"Status"}),c("th",{className:"px-4 py-2",children:"Purchase Date"})]})}),c("tbody",{children:r.map(S=>w("tr",{children:[c("td",{className:"border px-4 py-2",children:S.asset_name}),c("td",{className:"border px-4 py-2",children:S.category}),c("td",{className:"border px-4 py-2",children:S.status}),c("td",{className:"border px-4 py-2",children:x(S.purchase_date)})]},S.id))})]})}):c("div",{className:"h-60 border rounded-md flex items-center justify-center text-muted-foreground",children:"No assets match the selected criteria."}),w("div",{className:"mt-6",children:[" ",c(LYe,{assetData:r})," "]})]})]})]})},UYe=[{name:"Page A",uv:4e3,pv:2400,amt:2400},{name:"Page B",uv:3e3,pv:1398,amt:2210},{name:"Page C",uv:2e3,pv:9800,amt:2290},{name:"Page D",uv:2780,pv:3908,amt:2e3},{name:"Page E",uv:1890,pv:4800,amt:2181},{name:"Page F",uv:2390,pv:3800,amt:2500},{name:"Page G",uv:3490,pv:4300,amt:2100}],qYe=()=>w("div",{className:"mt-4",children:[c("h2",{className:"text-lg font-semibold mb-2",children:"Report Data Preview"}),w(see,{width:500,height:300,data:UYe,margin:{top:5,right:30,left:20,bottom:5},children:[c(WI,{strokeDasharray:"3 3"}),c(Rl,{dataKey:"name"}),c(Ml,{}),c(Za,{}),c(Ku,{}),c(fm,{type:"monotone",dataKey:"pv",stroke:"#8884d8",activeDot:{r:8}}),c(fm,{type:"monotone",dataKey:"uv",stroke:"#82ca9d"})]})]}),zYe=()=>w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"Reports & Analytics"}),w(Tg,{defaultValue:"inventory",className:"mt-4",children:[w(Og,{className:"grid w-full grid-cols-2 md:w-[400px]",children:[c(dl,{value:"inventory",children:"Inventory Reports"}),c(dl,{value:"assets",children:"Asset Reports"}),c(dl,{value:"report-data-preview",children:"Report Data Preview"})]}),c(Ci,{value:"inventory",className:"mt-4",children:c(RYe,{})}),c(Ci,{value:"assets",className:"mt-4",children:c(BYe,{})}),c(Ci,{value:"report-data-preview",className:"mt-4",children:c(qYe,{})})]})]}),WYe=P3({message:es().min(1,"Reminder message is required."),reminder_date:Hte({required_error:"Please select a date."}),reminder_time:es().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Invalid time format (HH:MM)."}),recurrence_type:sw(["none","daily","weekly","monthly","yearly"]).default("none"),recurrence_interval:z2().int().min(1).optional(),recurrence_days:Gte(z2().int().min(0).max(6)).optional(),times_per_day:z2().int().min(1).optional()}).refine(e=>!(e.recurrence_type!=="none"&&!e.recurrence_interval||e.recurrence_type==="weekly"&&(!e.recurrence_days||e.recurrence_days.length===0)),{message:"Interval is required for recurrence. Days are required for weekly recurrence.",path:["recurrence_interval"]}),VYe=({initialData:e,onSaveSuccess:t})=>{const{user:r}=oi(),{toast:n}=yn(),[a,i]=A.useState(!1),o=dd({resolver:fd(WYe)});A.useEffect(()=>{var l,u,d,f;if(e){const h=new Date(e.reminder_datetime);o.reset({message:e.message,reminder_date:h,reminder_time:Ut(h,"HH:mm"),recurrence_type:((l=e.recurrence_config)==null?void 0:l.type)||"none",recurrence_interval:(u=e.recurrence_config)==null?void 0:u.interval,recurrence_days:(d=e.recurrence_config)==null?void 0:d.days,times_per_day:((f=e.recurrence_config)==null?void 0:f.times_per_day)||1})}else o.reset({message:"",reminder_date:void 0,reminder_time:"",recurrence_type:"none",recurrence_interval:1,recurrence_days:[],times_per_day:1})},[e,o]);const s=async l=>{i(!0);const[u,d]=l.reminder_time.split(":").map(Number);let f=i1e(a1e(l.reminder_date,u),d);if(f<new Date){o.setError("reminder_time",{message:"Reminder time cannot be in the past."}),o.setError("reminder_date",{message:"Reminder date/time cannot be in the past."}),i(!1);return}const h={type:l.recurrence_type,interval:l.recurrence_type!=="none"?l.recurrence_interval:void 0,days:l.recurrence_type==="weekly"?l.recurrence_days:void 0,times_per_day:l.recurrence_type==="daily"?l.times_per_day:void 0};Object.keys(h).forEach(g=>h[g]===void 0&&delete h[g]);let m=null,x=null;if(e!=null&&e.id)m={message:l.message,reminder_datetime:f.toISOString(),recurrence_config:h};else{if(!r){n({title:"Error",description:"You must be logged in to create a reminder.",variant:"destructive"}),i(!1);return}x={user_id:r.id,message:l.message,reminder_datetime:f.toISOString(),recurrence_config:h,is_active:!0}}try{if(e!=null&&e.id&&m)await ZY(e.id,m),n({title:"Success",description:"Reminder updated successfully."});else if(x)await D1e(x),n({title:"Success",description:"Reminder created successfully."});else throw new Error("Invalid state for saving reminder.");t()}catch(g){console.error("Failed to save reminder:",g),n({title:"Error",description:g.message||"Could not save reminder.",variant:"destructive"})}finally{i(!1)}};return c(Rh,{...o,children:w("form",{onSubmit:o.handleSubmit(s),className:"space-y-4",children:[c(He,{control:o.control,name:"message",render:({field:l})=>w(De,{children:[c(Oe,{children:"Reminder Message"}),c(Me,{children:c(Qr,{placeholder:"Enter reminder details...",...l})}),c(Xe,{})]})}),w("div",{className:"flex flex-col sm:flex-row gap-4",children:[c(He,{control:o.control,name:"reminder_date",render:({field:l})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Date"}),w(dg,{children:[c(fg,{asChild:!0,children:c(Me,{children:w(Fe,{variant:"outline",className:Rt("w-full sm:w-[240px] pl-3 text-left font-normal",!l.value&&"text-muted-foreground"),children:[l.value?Ut(l.value,"PPP"):c("span",{children:"Pick a date"}),c(Hi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{mode:"single",selected:l.value,onSelect:l.onChange,disabled:u=>u<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),c(Xe,{})]})}),c(He,{control:o.control,name:"reminder_time",render:({field:l})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Time (HH:MM)"}),c("div",{className:"relative",children:c(Me,{children:c(ct,{type:"time",className:"w-full sm:w-[120px] pl-3",...l})})}),c(Xe,{})]})})]}),c(He,{control:o.control,name:"recurrence_type",render:({field:l})=>w(De,{children:[c(Oe,{children:"Recurrence"}),w(Wr,{onValueChange:l.onChange,value:l.value??"none",children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select recurrence type"})})}),w(Ur,{children:[c(wt,{value:"none",children:"None"}),c(wt,{value:"daily",children:"Daily"}),c(wt,{value:"weekly",children:"Weekly"}),c(wt,{value:"monthly",children:"Monthly"}),c(wt,{value:"yearly",children:"Yearly"})]})]}),c(Xe,{})]})}),o.watch("recurrence_type")!=="none"&&w("div",{className:"p-4 border rounded-md bg-muted/40 space-y-4 mt-2",children:[c(He,{control:o.control,name:"recurrence_interval",render:({field:l})=>w(De,{children:[c(Oe,{children:"Repeat Every"}),w("div",{className:"flex items-center gap-2",children:[c(Me,{children:c(ct,{type:"number",min:"1",className:"w-20",...l,value:l.value??1,onChange:u=>l.onChange(parseInt(u.target.value,10)||1)})}),w("span",{children:[o.watch("recurrence_type")==="daily"&&"Day(s)",o.watch("recurrence_type")==="weekly"&&"Week(s)",o.watch("recurrence_type")==="monthly"&&"Month(s)",o.watch("recurrence_type")==="yearly"&&"Year(s)"]})]}),c(Xe,{})]})}),o.watch("recurrence_type")==="daily"&&c(He,{control:o.control,name:"times_per_day",render:({field:l})=>w(De,{children:[c(Oe,{children:"Times Per Day"}),w("div",{className:"flex items-center gap-2",children:[c(Me,{children:c(ct,{type:"number",min:"1",max:"24",className:"w-20",...l,value:l.value??1,onChange:u=>l.onChange(parseInt(u.target.value,10)||1)})}),c("span",{children:"time(s)"})]}),c(hi,{className:"text-xs",children:"How many times the reminder should trigger each day."}),c(Xe,{})]})}),o.watch("recurrence_type")==="weekly"&&c(He,{control:o.control,name:"recurrence_days",render:()=>w(De,{children:[c(Oe,{children:"Repeat On"}),c("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-7",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((l,u)=>c(He,{control:o.control,name:"recurrence_days",render:({field:d})=>{var f;return w(De,{className:"flex flex-row items-start space-x-2 space-y-0",children:[c(Me,{children:c(Rs,{checked:(f=d.value)==null?void 0:f.includes(u),onCheckedChange:h=>h?d.onChange([...d.value||[],u]):d.onChange((d.value||[]).filter(m=>m!==u))})}),c(Oe,{className:"font-normal",children:l})]},u)}},l))}),c(Xe,{})]})}),c("p",{className:"text-xs text-muted-foreground",children:"Monthly/Yearly options and End Date/Count coming soon."})]}),c(Fe,{type:"submit",disabled:a,children:a?"Saving...":e?"Update Reminder":"Create Reminder"}),e&&c(Fe,{type:"button",variant:"outline",onClick:()=>t(),className:"ml-2",children:"Cancel Edit"})]})})},HYe=({onEdit:e,refreshKey:t,activeReminderIds:r})=>{const{toast:n}=yn(),[a,i]=A.useState([]),[o,s]=A.useState(!0),[l,u]=A.useState(null),d=async()=>{s(!0),u(null);try{const x=await XY();i(x||[])}catch(x){console.error("Failed to fetch reminders:",x),u("Failed to load reminders. Please try again."),n({title:"Error",description:"Could not fetch reminders.",variant:"destructive"})}finally{s(!1)}};A.useEffect(()=>{d()},[t]);const f=async x=>{const g=x.is_active;i(y=>y.map(_=>_.id===x.id?{..._,is_active:!g}:_));try{await ZY(x.id,{is_active:!g}),n({title:"Success",description:`Reminder ${g?"deactivated":"activated"}.`})}catch(y){console.error("Failed to toggle reminder state:",y),i(_=>_.map(b=>b.id===x.id?{...b,is_active:g}:b)),n({title:"Error",description:"Could not update reminder status.",variant:"destructive"})}},h=async x=>{const g=[...a];i(y=>y.filter(_=>_.id!==x));try{await I1e(x),n({title:"Success",description:"Reminder deleted."})}catch(y){console.error("Failed to delete reminder:",y),i(g),n({title:"Error",description:"Could not delete reminder.",variant:"destructive"})}},m=x=>{e(x)};return o?w("div",{className:"space-y-4",children:[c(jl,{className:"h-24 w-full"}),c(jl,{className:"h-24 w-full"})]}):l?w(id,{variant:"destructive",children:[c(od,{children:"Error"}),c(sd,{children:l})]}):a.length===0?c("p",{className:"text-muted-foreground",children:"No reminders found."}):c("div",{className:"space-y-4",children:a.map(x=>{var g;return r.has(x.id),w(sr,{className:Rt(!x.is_active&&"opacity-60"),children:[w(yr,{className:"flex flex-row items-center justify-between pb-2",children:[c(xr,{className:"text-lg font-medium",children:x.message}),w("div",{className:"flex items-center space-x-2",children:[w(Fe,{variant:"ghost",size:"icon",onClick:()=>f(x),title:x.is_active?"Deactivate":"Activate",children:[x.is_active?c(sce,{className:"h-4 w-4"}):c(a4,{className:"h-4 w-4"})," "]}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>m(x),title:"Edit",children:c(Rce,{className:"h-4 w-4"})}),c(Fe,{variant:"ghost",size:"icon",onClick:()=>h(x.id),title:"Delete",children:c(om,{className:"h-4 w-4 text-destructive"})})]})]}),w(mr,{children:[w("p",{className:"text-sm text-muted-foreground",children:["Next due: ",Ut(new Date(x.reminder_datetime),"PPP 'at' HH:mm")]}),((g=x.recurrence_config)==null?void 0:g.type)&&x.recurrence_config.type!=="none"&&w("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:["Recurring: ",x.recurrence_config.type]}),!x.is_active&&c("p",{className:"text-xs text-amber-600 mt-1",children:"Inactive"})]})]},x.id)})})},GYe=()=>{const[e,t]=A.useState(0),[r,n]=A.useState(null),{activeReminderIds:a}=JY(),i=s=>{n(s),window.scrollTo({top:0,behavior:"smooth"})};return w("div",{className:"container mx-auto p-4",children:[c(Aa,{heading:"Reminders",text:"Create and manage reminders for yourself or the clinic."}),w("div",{className:"mt-6",children:[c("h2",{className:"text-xl font-semibold mb-4",children:r?"Edit Reminder":"Create New Reminder"}),c(VYe,{initialData:r,onSaveSuccess:()=>{n(null),t(s=>s+1)}},(r==null?void 0:r.id)||"new")]}),c(am,{className:"my-8"}),w("div",{className:"mt-8",children:[c("h2",{className:"text-xl font-semibold mb-4",children:"Existing Reminders"}),c(HYe,{onEdit:i,refreshKey:e,activeReminderIds:a})]})]})},Zo=[];for(let e=0;e<256;++e)Zo.push((e+256).toString(16).slice(1));function KYe(e,t=0){return(Zo[e[t+0]]+Zo[e[t+1]]+Zo[e[t+2]]+Zo[e[t+3]]+"-"+Zo[e[t+4]]+Zo[e[t+5]]+"-"+Zo[e[t+6]]+Zo[e[t+7]]+"-"+Zo[e[t+8]]+Zo[e[t+9]]+"-"+Zo[e[t+10]]+Zo[e[t+11]]+Zo[e[t+12]]+Zo[e[t+13]]+Zo[e[t+14]]+Zo[e[t+15]]).toLowerCase()}let mT;const YYe=new Uint8Array(16);function XYe(){if(!mT){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mT=crypto.getRandomValues.bind(crypto)}return mT(YYe)}const ZYe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),HV={randomUUID:ZYe};function Nw(e,t,r){var a;if(HV.randomUUID&&!e)return HV.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??XYe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,KYe(n)}const JYe=async()=>{const{data:e,error:t}=await Le.from("purchase_orders").select(`
      id,
      po_number,
      order_date,
      expected_delivery_date,
      status,
      total_amount,
      notes,
      created_at,
      updated_at,
      supplier_id,
      created_by,
      suppliers (
        name
      )
    `).order("order_date",{ascending:!1});if(t)throw console.error("Error fetching purchase orders:",t),t;return(e||[]).map(r=>{var n;return{id:r.id,po_number:r.po_number,supplier_id:r.supplier_id,supplier_name:((n=r.suppliers)==null?void 0:n.name)||"N/A",order_date:r.order_date,expected_delivery_date:r.expected_delivery_date,status:r.status,total_amount:r.total_amount,notes:r.notes,created_by:r.created_by,created_at:r.created_at,updated_at:r.updated_at}})},QYe=async()=>{const{data:e,error:t}=await Le.from("suppliers").select("id, name").order("name");if(t)throw console.error("Error fetching suppliers from Supabase:",t),t;return e?e.map(n=>({value:n.id,label:n.name})):[]},NM=async()=>{const{data:e,error:t}=await Le.from("inventory_items").select("id, item_name, category, is_batched, item_code").order("item_name");if(t)throw console.error("Error fetching inventory items from Supabase:",t),t;return e?e.map(n=>({value:n.id,label:n.item_name,category:n.category||void 0,is_batched:n.is_batched||!1,item_code:n.item_code||null})):[]},eXe=async(e,t)=>{const{data:r,error:n}=await Le.rpc("generate_po_number");if(n||!r)throw console.error("Error generating PO number:",n),n||new Error("Failed to generate PO number.");const i={po_number:r,supplier_id:e.supplier_id,order_date:e.order_date.toISOString().split("T")[0],expected_delivery_date:e.expected_delivery_date?e.expected_delivery_date.toISOString().split("T")[0]:null,notes:e.notes||null,status:"Pending",created_by:t||null},{data:o,error:s}=await Le.from("purchase_orders").insert(i).select("id, po_number").single();if(s||!o)throw console.error("Error creating purchase order header:",s),s||new Error("Failed to create purchase order header.");const l=e.items.map(d=>({purchase_order_id:o.id,inventory_item_id:d.inventory_item_id,description:d.description||null,quantity_ordered:d.quantity_ordered,unit_price:d.unit_price})),{error:u}=await Le.from("purchase_order_items").insert(l);if(u)throw console.error("Error creating purchase order items:",u),await Le.from("purchase_orders").delete().match({id:o.id}),u;return{id:o.id,po_number:o.po_number}},woe=async e=>{var o;const{data:t,error:r}=await Le.from("purchase_orders").select(`
      id,
      po_number,
      order_date,
      expected_delivery_date,
      status,
      total_amount,
      notes,
      created_at,
      updated_at,
      supplier_id,
      created_by,
      suppliers ( name )
    `).eq("id",e).single();if(r){if(console.error(`Error fetching purchase order ${e}:`,r),r.code==="PGRST116")return null;throw r}if(!t)return null;const{data:n,error:a}=await Le.from("purchase_order_items").select(`
      id,
      inventory_item_id,
      description,
      quantity_ordered,
      quantity_received,
      unit_price,
      subtotal,
      inventory_items ( item_name )
    `).eq("purchase_order_id",e);if(a)throw console.error(`Error fetching items for purchase order ${e}:`,a),a;const i=(n||[]).map(s=>{var l,u;return{id:s.id,inventory_item_id:s.inventory_item_id,description:s.description||((l=s.inventory_items)==null?void 0:l.item_name)||"N/A",product_name:((u=s.inventory_items)==null?void 0:u.item_name)||"N/A",quantity_ordered:s.quantity_ordered,quantity_received:s.quantity_received,unit_price:s.unit_price,subtotal:s.subtotal}});return{...t,supplier_name:((o=t.suppliers)==null?void 0:o.name)||"N/A",items:i,status:t.status}},tXe=async e=>{const{data:t,error:r}=await Le.rpc("handle_receive_po_item_batch",{p_po_item_id:e.p_po_item_id,p_quantity_received:e.p_quantity_received,p_batch_number:e.p_batch_number,p_expiry_date:e.p_expiry_date,p_purchase_price:e.p_purchase_price,p_received_by_user_id:e.p_received_by_user_id});if(r)throw console.error("Error receiving PO item batch via RPC:",r),r},rXe=async(e,t,r,n)=>{if(!n)throw new Error("User must be logged in to upload invoices.");if(!r)throw new Error("No file selected for upload.");const a=r.name.split(".").pop(),i=`${Nw()}.${a}`,o=`purchase_invoices/${t}/${i}`,{error:s}=await Le.storage.from("invoices").upload(o,r);if(s)throw console.error("Error uploading invoice file:",s),s;const{error:l}=await Le.from("invoices").insert({file_name:r.name,storage_path:o,uploaded_by_user_id:n,purchase_order_id:e});if(l)throw console.error("Error saving invoice record to database:",l),await Le.storage.from("invoices").remove([o]),l;return{storage_path:o}},GV=async e=>{const{data:t,error:r}=await Le.from("invoices").select("id, file_name, storage_path, uploaded_at, uploaded_by_user_id").eq("purchase_order_id",e).order("uploaded_at",{ascending:!1});if(r)throw console.error("Error fetching invoices for PO:",r),r;return t||[]},nXe=async e=>{const{data:t,error:r}=await Le.storage.from("invoices").createSignedUrl(e,300);return r?(console.error("Error creating signed URL:",r),null):(t==null?void 0:t.signedUrl)||null},aXe=async(e,t)=>{const{error:r}=await Le.from("purchase_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e);if(r)throw console.error(`Error updating purchase order ${e} status to ${t}:`,r),r},iXe=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(!0),[a,i]=A.useState(null);A.useEffect(()=>{(async()=>{try{n(!0);const l=await JYe();t(l),i(null)}catch(l){console.error(l),i("Failed to fetch purchase orders.")}finally{n(!1)}})()},[]);const o=s=>{switch(s){case"Pending":return"outline";case"Ordered":return"secondary";case"Partially Received":return"default";case"Received":return"default";case"Cancelled":return"destructive";default:return"outline"}};return w("div",{className:"container mx-auto p-4",children:[c(Aa,{heading:"Purchase Orders",text:"Manage and track all your purchase orders.",children:w(Vi,{to:"/purchases/create",children:[" ",w(Fe,{children:[c(Ch,{className:"mr-2 h-4 w-4"}),"Create New PO"]})]})}),w("div",{className:"mt-6",children:[r&&c("p",{children:"Loading purchase orders..."}),a&&c("p",{className:"text-red-500",children:a}),!r&&!a&&e.length===0&&c("p",{children:"No purchase orders found."}),!r&&!a&&e.length>0&&w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"PO Number"}),c(Gt,{children:"Supplier"}),c(Gt,{children:"Order Date"}),c(Gt,{children:"Status"}),c(Gt,{className:"text-right",children:"Total Amount"}),c(Gt,{children:"Actions"})]})}),c(qs,{children:e.map(s=>{var l;return w(kn,{children:[c($t,{className:"font-medium",children:s.po_number}),c($t,{children:s.supplier_name}),c($t,{children:new Date(s.order_date).toLocaleDateString()}),c($t,{children:c(ed,{variant:o(s.status),className:s.status==="Received"?"bg-green-500 hover:bg-green-600 text-white":"",children:s.status})}),c($t,{className:"text-right",children:((l=s.total_amount)==null?void 0:l.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"N/A"}),c($t,{className:"text-right",children:w(Vi,{to:`/purchases/${s.id}`,children:[" ",c(Fe,{variant:"outline",size:"sm",children:"View"})]})})]},s.id)})})]})]})]})},oXe=je.object({inventory_item_id:je.string().uuid({message:"Please select an inventory item."}),description:je.string().optional(),quantity_ordered:je.number().min(1,{message:"Quantity must be at least 1."}),unit_price:je.number().min(0,{message:"Unit price cannot be negative."})}),sXe=je.object({supplier_id:je.string().uuid({message:"Please select a supplier."}),order_date:je.date({required_error:"Order date is required.",invalid_type_error:"Invalid date format for order date."}),expected_delivery_date:je.date().nullable().optional(),notes:je.string().optional(),items:je.array(oXe).min(1,{message:"Please add at least one item to the purchase order."}),invoice_file:je.custom(e=>e==null||e instanceof File,"Invalid file format").refine(e=>!e||e.size<=5*1024*1024,"File size should be less than 5MB.").refine(e=>!e||["application/pdf","image/png","image/jpeg","image/jpg"].includes(e.type),"Only .pdf, .png, .jpg, .jpeg files are accepted.").optional().nullable()});function Eh(e){return Array.isArray?Array.isArray(e):Soe(e)==="[object Array]"}function lXe(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function cXe(e){return e==null?"":lXe(e)}function Zd(e){return typeof e=="string"}function _oe(e){return typeof e=="number"}function uXe(e){return e===!0||e===!1||dXe(e)&&Soe(e)=="[object Boolean]"}function boe(e){return typeof e=="object"}function dXe(e){return boe(e)&&e!==null}function uc(e){return e!=null}function gT(e){return!e.trim().length}function Soe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const fXe="Incorrect 'index' type",hXe=e=>`Invalid value for key ${e}`,pXe=e=>`Pattern length exceeds max of ${e}.`,mXe=e=>`Missing ${e} property in key`,gXe=e=>`Property 'weight' in key '${e}' must be a positive integer`,KV=Object.prototype.hasOwnProperty;class vXe{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let a=Aoe(n);this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Aoe(e){let t=null,r=null,n=null,a=1,i=null;if(Zd(e)||Eh(e))n=e,t=YV(e),r=O8(e);else{if(!KV.call(e,"name"))throw new Error(mXe("name"));const o=e.name;if(n=o,KV.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(gXe(o));t=YV(o),r=O8(o),i=e.getFn}return{path:t,id:r,weight:a,src:n,getFn:i}}function YV(e){return Eh(e)?e:e.split(".")}function O8(e){return Eh(e)?e.join("."):e}function yXe(e,t){let r=[],n=!1;const a=(i,o,s)=>{if(uc(i))if(!o[s])r.push(i);else{let l=o[s];const u=i[l];if(!uc(u))return;if(s===o.length-1&&(Zd(u)||_oe(u)||uXe(u)))r.push(cXe(u));else if(Eh(u)){n=!0;for(let d=0,f=u.length;d<f;d+=1)a(u[d],o,s+1)}else o.length&&a(u,o,s+1)}};return a(e,Zd(t)?t.split("."):t,0),n?r:r[0]}const xXe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},wXe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},_Xe={location:0,threshold:.6,distance:100},bXe={useExtendedSearch:!1,getFn:yXe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var on={...wXe,...xXe,..._Xe,...bXe};const SXe=/[^ ]+/g;function AXe(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(a){const i=a.match(SXe).length;if(r.has(i))return r.get(i);const o=1/Math.pow(i,.5*e),s=parseFloat(Math.round(o*n)/n);return r.set(i,s),s},clear(){r.clear()}}}class kM{constructor({getFn:t=on.getFn,fieldNormWeight:r=on.fieldNormWeight}={}){this.norm=AXe(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Zd(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();Zd(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!uc(t)||gT(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((a,i)=>{let o=a.getFn?a.getFn(t):this.getFn(t,a.path);if(uc(o)){if(Eh(o)){let s=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:d}=l.pop();if(uc(d))if(Zd(d)&&!gT(d)){let f={v:d,i:u,n:this.norm.get(d)};s.push(f)}else Eh(d)&&d.forEach((f,h)=>{l.push({nestedArrIndex:h,value:f})})}n.$[i]=s}else if(Zd(o)&&!gT(o)){let s={v:o,n:this.norm.get(o)};n.$[i]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Noe(e,t,{getFn:r=on.getFn,fieldNormWeight:n=on.fieldNormWeight}={}){const a=new kM({getFn:r,fieldNormWeight:n});return a.setKeys(e.map(Aoe)),a.setSources(t),a.create(),a}function NXe(e,{getFn:t=on.getFn,fieldNormWeight:r=on.fieldNormWeight}={}){const{keys:n,records:a}=e,i=new kM({getFn:t,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(a),i}function Bb(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:a=on.distance,ignoreLocation:i=on.ignoreLocation}={}){const o=t/e.length;if(i)return o;const s=Math.abs(n-r);return a?o+s/a:s?1:o}function kXe(e=[],t=on.minMatchCharLength){let r=[],n=-1,a=-1,i=0;for(let o=e.length;i<o;i+=1){let s=e[i];s&&n===-1?n=i:!s&&n!==-1&&(a=i-1,a-n+1>=t&&r.push([n,a]),n=-1)}return e[i-1]&&i-n>=t&&r.push([n,i-1]),r}const T0=32;function EXe(e,t,r,{location:n=on.location,distance:a=on.distance,threshold:i=on.threshold,findAllMatches:o=on.findAllMatches,minMatchCharLength:s=on.minMatchCharLength,includeMatches:l=on.includeMatches,ignoreLocation:u=on.ignoreLocation}={}){if(t.length>T0)throw new Error(pXe(T0));const d=t.length,f=e.length,h=Math.max(0,Math.min(n,f));let m=i,x=h;const g=s>1||l,y=g?Array(f):[];let _;for(;(_=e.indexOf(t,x))>-1;){let T=Bb(t,{currentLocation:_,expectedLocation:h,distance:a,ignoreLocation:u});if(m=Math.min(T,m),x=_+d,g){let M=0;for(;M<d;)y[_+M]=1,M+=1}}x=-1;let b=[],S=1,C=d+f;const E=1<<d-1;for(let T=0;T<d;T+=1){let M=0,L=C;for(;M<L;)Bb(t,{errors:T,currentLocation:h+L,expectedLocation:h,distance:a,ignoreLocation:u})<=m?M=L:C=L,L=Math.floor((C-M)/2+M);C=L;let z=Math.max(1,h-L+1),P=o?f:Math.min(h+L,f)+d,R=Array(P+2);R[P+1]=(1<<T)-1;for(let V=P;V>=z;V-=1){let Z=V-1,te=r[e.charAt(Z)];if(g&&(y[Z]=+!!te),R[V]=(R[V+1]<<1|1)&te,T&&(R[V]|=(b[V+1]|b[V])<<1|1|b[V+1]),R[V]&E&&(S=Bb(t,{errors:T,currentLocation:Z,expectedLocation:h,distance:a,ignoreLocation:u}),S<=m)){if(m=S,x=Z,x<=h)break;z=Math.max(1,2*h-x)}}if(Bb(t,{errors:T+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:u})>m)break;b=R}const O={isMatch:x>=0,score:Math.max(.001,S)};if(g){const T=kXe(y,s);T.length?l&&(O.indices=T):O.isMatch=!1}return O}function CXe(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<n-r-1}return t}const QS=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class koe{constructor(t,{location:r=on.location,threshold:n=on.threshold,distance:a=on.distance,includeMatches:i=on.includeMatches,findAllMatches:o=on.findAllMatches,minMatchCharLength:s=on.minMatchCharLength,isCaseSensitive:l=on.isCaseSensitive,ignoreDiacritics:u=on.ignoreDiacritics,ignoreLocation:d=on.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:d},t=l?t:t.toLowerCase(),t=u?QS(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(m,x)=>{this.chunks.push({pattern:m,alphabet:CXe(m),startIndex:x})},h=this.pattern.length;if(h>T0){let m=0;const x=h%T0,g=h-x;for(;m<g;)f(this.pattern.substr(m,T0),m),m+=T0;if(x){const y=h-T0;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:a}=this.options;if(t=r?t:t.toLowerCase(),t=n?QS(t):t,this.pattern===t){let g={isMatch:!0,score:0};return a&&(g.indices=[[0,t.length-1]]),g}const{location:i,distance:o,threshold:s,findAllMatches:l,minMatchCharLength:u,ignoreLocation:d}=this.options;let f=[],h=0,m=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:_})=>{const{isMatch:b,score:S,indices:C}=EXe(t,g,y,{location:i+_,distance:o,threshold:s,findAllMatches:l,minMatchCharLength:u,includeMatches:a,ignoreLocation:d});b&&(m=!0),h+=S,b&&C&&(f=[...f,...C])});let x={isMatch:m,score:m?h/this.chunks.length:1};return m&&a&&(x.indices=f),x}}class Bm{constructor(t){this.pattern=t}static isMultiMatch(t){return XV(t,this.multiRegex)}static isSingleMatch(t){return XV(t,this.singleRegex)}search(){}}function XV(e,t){const r=e.match(t);return r?r[1]:null}class PXe extends Bm{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class TXe extends Bm{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class OXe extends Bm{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class DXe extends Bm{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class IXe extends Bm{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class RXe extends Bm{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Eoe extends Bm{constructor(t,{location:r=on.location,threshold:n=on.threshold,distance:a=on.distance,includeMatches:i=on.includeMatches,findAllMatches:o=on.findAllMatches,minMatchCharLength:s=on.minMatchCharLength,isCaseSensitive:l=on.isCaseSensitive,ignoreDiacritics:u=on.ignoreDiacritics,ignoreLocation:d=on.ignoreLocation}={}){super(t),this._bitapSearch=new koe(t,{location:r,threshold:n,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Coe extends Bm{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const a=[],i=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+i,a.push([n,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const D8=[PXe,Coe,OXe,DXe,RXe,IXe,TXe,Eoe],ZV=D8.length,MXe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,FXe="|";function LXe(e,t={}){return e.split(FXe).map(r=>{let n=r.trim().split(MXe).filter(i=>i&&!!i.trim()),a=[];for(let i=0,o=n.length;i<o;i+=1){const s=n[i];let l=!1,u=-1;for(;!l&&++u<ZV;){const d=D8[u];let f=d.isMultiMatch(s);f&&(a.push(new d(f,t)),l=!0)}if(!l)for(u=-1;++u<ZV;){const d=D8[u];let f=d.isSingleMatch(s);if(f){a.push(new d(f,t));break}}}return a})}const jXe=new Set([Eoe.type,Coe.type]);class $Xe{constructor(t,{isCaseSensitive:r=on.isCaseSensitive,ignoreDiacritics:n=on.ignoreDiacritics,includeMatches:a=on.includeMatches,minMatchCharLength:i=on.minMatchCharLength,ignoreLocation:o=on.ignoreLocation,findAllMatches:s=on.findAllMatches,location:l=on.location,threshold:u=on.threshold,distance:d=on.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:a,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:l,threshold:u,distance:d},t=r?t:t.toLowerCase(),t=n?QS(t):t,this.pattern=t,this.query=LXe(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a,ignoreDiacritics:i}=this.options;t=a?t:t.toLowerCase(),t=i?QS(t):t;let o=0,s=[],l=0;for(let u=0,d=r.length;u<d;u+=1){const f=r[u];s.length=0,o=0;for(let h=0,m=f.length;h<m;h+=1){const x=f[h],{isMatch:g,indices:y,score:_}=x.search(t);if(g){if(o+=1,l+=_,n){const b=x.constructor.type;jXe.has(b)?s=[...s,...y]:s.push(y)}}else{l=0,o=0,s.length=0;break}}if(o){let h={isMatch:!0,score:l/o};return n&&(h.indices=s),h}}return{isMatch:!1,score:1}}}const I8=[];function BXe(...e){I8.push(...e)}function R8(e,t){for(let r=0,n=I8.length;r<n;r+=1){let a=I8[r];if(a.condition(e,t))return new a(e,t)}return new koe(e,t)}const e4={AND:"$and",OR:"$or"},M8={PATH:"$path",PATTERN:"$val"},F8=e=>!!(e[e4.AND]||e[e4.OR]),UXe=e=>!!e[M8.PATH],qXe=e=>!Eh(e)&&boe(e)&&!F8(e),JV=e=>({[e4.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Poe(e,t,{auto:r=!0}={}){const n=a=>{let i=Object.keys(a);const o=UXe(a);if(!o&&i.length>1&&!F8(a))return n(JV(a));if(qXe(a)){const l=o?a[M8.PATH]:i[0],u=o?a[M8.PATTERN]:a[l];if(!Zd(u))throw new Error(hXe(l));const d={keyId:O8(l),pattern:u};return r&&(d.searcher=R8(u,t)),d}let s={children:[],operator:i[0]};return i.forEach(l=>{const u=a[l];Eh(u)&&u.forEach(d=>{s.children.push(n(d))})}),s};return F8(e)||(e=JV(e)),n(e)}function zXe(e,{ignoreFieldNorm:t=on.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:a,norm:i,score:o})=>{const s=a?a.weight:null;n*=Math.pow(o===0&&s?Number.EPSILON:o,(s||1)*(t?1:i))}),r.score=n})}function WXe(e,t){const r=e.matches;t.matches=[],uc(r)&&r.forEach(n=>{if(!uc(n.indices)||!n.indices.length)return;const{indices:a,value:i}=n;let o={indices:a,value:i};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function VXe(e,t){t.score=e.score}function HXe(e,t,{includeMatches:r=on.includeMatches,includeScore:n=on.includeScore}={}){const a=[];return r&&a.push(WXe),n&&a.push(VXe),e.map(i=>{const{idx:o}=i,s={item:t[o],refIndex:o};return a.length&&a.forEach(l=>{l(i,s)}),s})}class ky{constructor(t,r={},n){this.options={...on,...r},this.options.useExtendedSearch,this._keyStore=new vXe(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof kM))throw new Error(fXe);this._myIndex=r||Noe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){uc(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,a=this._docs.length;n<a;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,a-=1,r.push(i))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let l=Zd(t)?Zd(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return zXe(l,{ignoreFieldNorm:s}),i&&l.sort(o),_oe(r)&&r>-1&&(l=l.slice(0,r)),HXe(l,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(t){const r=R8(t,this.options),{records:n}=this._myIndex,a=[];return n.forEach(({v:i,i:o,n:s})=>{if(!uc(i))return;const{isMatch:l,score:u,indices:d}=r.searchIn(i);l&&a.push({item:i,idx:o,matches:[{score:u,value:i,norm:s,indices:d}]})}),a}_searchLogical(t){const r=Poe(t,this.options),n=(s,l,u)=>{if(!s.children){const{keyId:f,searcher:h}=s,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:h});return m&&m.length?[{idx:u,item:l,matches:m}]:[]}const d=[];for(let f=0,h=s.children.length;f<h;f+=1){const m=s.children[f],x=n(m,l,u);if(x.length)d.push(...x);else if(s.operator===e4.AND)return[]}return d},a=this._myIndex.records,i={},o=[];return a.forEach(({$:s,i:l})=>{if(uc(s)){let u=n(r,s,l);u.length&&(i[l]||(i[l]={idx:l,item:s,matches:[]},o.push(i[l])),u.forEach(({matches:d})=>{i[l].matches.push(...d)}))}}),o}_searchObjectList(t){const r=R8(t,this.options),{keys:n,records:a}=this._myIndex,i=[];return a.forEach(({$:o,i:s})=>{if(!uc(o))return;let l=[];n.forEach((u,d)=>{l.push(...this._findMatches({key:u,value:o[d],searcher:r}))}),l.length&&i.push({idx:s,item:o,matches:l})}),i}_findMatches({key:t,value:r,searcher:n}){if(!uc(r))return[];let a=[];if(Eh(r))r.forEach(({v:i,i:o,n:s})=>{if(!uc(i))return;const{isMatch:l,score:u,indices:d}=n.searchIn(i);l&&a.push({score:u,key:t,value:i,idx:o,norm:s,indices:d})});else{const{v:i,n:o}=r,{isMatch:s,score:l,indices:u}=n.searchIn(i);s&&a.push({score:l,key:t,value:i,norm:o,indices:u})}return a}}ky.version="7.1.0";ky.createIndex=Noe;ky.parseIndex=NXe;ky.config=on;ky.parseQuery=Poe;BXe($Xe);const GXe={includeScore:!0,shouldSort:!0,minMatchCharLength:2,threshold:.4,keys:["name"]},t4=(e,t)=>{if(!e||t.length===0)return{bestMatch:null,bestMatchScore:void 0,allMatches:[]};const n=new ky(t,GXe).search(e);return n.length>0&&n[0].score!==void 0?{bestMatch:n[0].item,bestMatchScore:n[0].score,allMatches:n}:n.length>0?{bestMatch:n[0].item,bestMatchScore:void 0,allMatches:n}:{bestMatch:null,bestMatchScore:void 0,allMatches:[]}},QV=(e,t)=>e.map((r,n)=>{const{bestMatch:a,bestMatchScore:i,allMatches:o}=t4(r.name,t);return{originalOcrItemName:r.name,ocrItemIndex:n,bestMatch:a,bestMatchScore:i,allMatches:o}}),KXe="purchase_invoices",Toe=async(e,t)=>{const r=e.name.split(".").pop(),a=`${`${t?t+"_":""}${Date.now()}.${r}`}`,{data:i,error:o}=await Le.storage.from(KXe).upload(a,e,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Error uploading invoice file:",o),new Error(`Failed to upload invoice file: ${o.message}`);if(!i||!i.path)throw console.error("No path returned from storage upload"),new Error("Failed to upload invoice file: No path returned.");return i.path},Ooe=async e=>{const{data:t,error:r}=await Le.from("invoices").insert({supplier_id:e.supplier_id,invoice_date:e.invoice_date,total_amount:e.total_amount,status:e.status||"pending",notes:e.notes,purchase_order_id:e.purchase_order_id,invoice_url:e.file_path}).select().single();if(r)throw console.error("Error creating invoice record:",r),new Error(`Failed to create invoice record: ${r.message}`);if(!t)throw new Error("Failed to create invoice record: No data returned.");return t},YXe=()=>{const e=bo(),{toast:t}=yn(),{user:r}=oi(),[n,a]=A.useState([]),[i,o]=A.useState([]),[s,l]=A.useState([]),[u,d]=A.useState(!1),[f,h]=A.useState(!1),[m,x]=A.useState(null),[g,y]=A.useState(null),_=dd({resolver:fd(sXe),defaultValues:{supplier_id:"",order_date:new Date,expected_delivery_date:null,notes:"",items:[{inventory_item_id:"",quantity_ordered:1,unit_price:0,description:""}],invoice_file:null}}),{fields:b,append:S,remove:C,update:E}=AS({control:_.control,name:"items"});A.useEffect(()=>{(async()=>{try{const[P,R]=await Promise.all([QYe(),NM()]);a(P),o(R),l(R.map(j=>({id:j.value,name:j.label})))}catch{t({variant:"destructive",title:"Error fetching data",description:"Could not load suppliers or inventory items."})}})()},[t]);const O=async z=>{if(!(r!=null&&r.id)){t({variant:"destructive",title:"Authentication Error",description:"User ID not found."});return}d(!0);try{const P=await eXe(z,r.id);if(t({title:"Purchase Order Created",description:`PO #${P.po_number} has been successfully created.`}),z.invoice_file&&m)try{t({title:"Processing Invoice",description:"Uploading invoice file..."});const R=await Toe(z.invoice_file,P.po_number);await Ooe({file_path:R,purchase_order_id:P.id,supplier_id:z.supplier_id,invoice_date:m.invoice_date?new Date(m.invoice_date).toISOString().split("T")[0]:null,total_amount:m.total_amount,notes:`Invoice auto-linked from AI OCR. AI OCR Supplier: ${m.supplier_name||"N/A"}. AI OCR Date: ${m.invoice_date||"N/A"}. AI OCR Total: ${m.total_amount||"N/A"}`,file_name:z.invoice_file.name}),t({title:"Invoice Linked",description:`Invoice ${z.invoice_file.name} linked to PO #${P.po_number}.`})}catch(R){console.error("Failed to link invoice to PO:",R),t({variant:"destructive",title:"Invoice Linking Failed",description:(R==null?void 0:R.message)||"Could not link the uploaded invoice to the PO."})}e(`/purchases/${P.id}`)}catch(P){console.error("Failed to create PO:",P),t({variant:"destructive",title:"Failed to create Purchase Order",description:(P==null?void 0:P.message)||"An unexpected error occurred."})}finally{d(!1)}},T=(z,P)=>{const R=i.find(j=>j.value===P);R&&E(z,{..._.getValues(`items.${z}`),inventory_item_id:P,description:R.label})},M=async z=>{if(_.setValue("invoice_file",z,{shouldValidate:!0}),y(null),x(null),z){h(!0),t({title:"Processing Invoice",description:"Extracting data via AI, please wait..."});try{const P=new FileReader;P.readAsDataURL(z),P.onloadend=async()=>{const R=P.result,{data:j,error:V}=await Le.functions.invoke("ocr-invoice-parser",{body:{image_data_urls:[R],file_type:z.type}});if(V)throw V;const Z=j;x(Z);const te=n.map(U=>({id:U.value,name:U.label})),q=Z.supplier_name?t4(Z.supplier_name,te):null,Y=(Z.items||[]).map(U=>{const{bestMatch:G,allMatches:J,bestMatchScore:D}=t4(U.description,s);return{...U,inventoryItemId:(G==null?void 0:G.id.toString())||null,matchDetails:{originalOcrItemName:U.description,ocrItemIndex:-1,bestMatch:G,bestMatchScore:D,allMatches:J}}});y({...Z,items:Y,matchedSupplier:(q==null?void 0:q.bestMatch)||null}),t({title:"Invoice Scanned by AI",description:"Review extracted data below to pre-fill form."}),h(!1)},P.onerror=R=>{console.error("File reading error:",R),t({variant:"destructive",title:"File Error",description:"Could not read file for OCR."}),h(!1)}}catch(P){console.error("AI OCR processing failed:",P),t({variant:"destructive",title:"AI OCR Error",description:P.message||"Failed to process invoice with AI."}),h(!1)}}},L=()=>{var z;if(g){if((z=g.matchedSupplier)!=null&&z.id&&_.setValue("supplier_id",g.matchedSupplier.id.toString(),{shouldValidate:!0}),g.invoice_date)try{const P=new Date(g.invoice_date);isNaN(P.getTime())?t({variant:"destructive",title:"Invalid Date",description:"AI OCR extracted an invalid date format."}):_.setValue("order_date",P,{shouldValidate:!0})}catch{t({variant:"destructive",title:"Date Error",description:"Could not parse AI OCR date."})}g.items.length>0&&(b.forEach((P,R)=>C(R)),g.items.forEach(P=>{var R;S({inventory_item_id:P.inventoryItemId||"",description:P.inventoryItemId&&((R=i.find(j=>j.value===P.inventoryItemId))==null?void 0:R.label)||P.description,quantity_ordered:P.quantity||1,unit_price:P.unit_price||0})})),t({title:"OCR Data Applied",description:"Form has been pre-filled with data from invoice."}),y(null)}};return w("div",{className:"container mx-auto p-4",children:[c(Aa,{heading:"Create New Purchase Order",text:"Fill in the details to create a new purchase order."}),w(Rh,{..._,children:[" ",w("form",{onSubmit:_.handleSubmit(O),className:"space-y-8 mt-6",children:[w("div",{className:"my-6 p-6 border rounded-lg shadow-sm",children:[c("h3",{className:"text-xl font-semibold mb-4",children:"Upload Invoice (Optional)"}),c(He,{control:_.control,name:"invoice_file",render:({field:z})=>w(De,{children:[c(Oe,{children:"Invoice Document"})," ",c(Me,{children:c(nm,{value:z.value,onFileChange:M,accept:"image/png,image/jpeg,image/jpg,application/pdf",maxSize:5,disabled:f})}),c(hi,{children:"Upload an invoice image (PNG, JPG) or PDF. OCR pre-fill currently only supports images."}),c(Xe,{})]})}),f&&c("p",{className:"text-sm text-muted-foreground mt-2",children:"Processing invoice..."}),g&&!f&&w("div",{className:"mt-4 p-4 border rounded-md bg-muted/50 space-y-3",children:[c("h4",{className:"text-lg font-medium",children:"Extracted Invoice Data:"}),g.matchedSupplier&&w("p",{children:["Supplier: ",g.matchedSupplier.name," (Matched by AI & Fuzzy Search)"]}),!g.matchedSupplier&&g.supplier_name&&w("p",{children:["Supplier (AI OCR): ",g.supplier_name]}),g.invoice_date&&w("p",{children:["Date: ",g.invoice_date]}),g.total_amount&&w("p",{children:["Total: ",g.total_amount]}),w("p",{className:"font-medium mt-2",children:["Items (",g.items.length,"):"]}),w("ul",{className:"list-disc pl-5 text-sm",children:[g.items.slice(0,5).map((z,P)=>{var R;return w("li",{children:[z.description," (Qty: ",z.quantity??"N/A",", Price: ",z.unit_price??"N/A",")",z.inventoryItemId&&i.find(j=>j.value===z.inventoryItemId)&&w("span",{className:"text-green-600 ml-2",children:["(Matched: ",(R=i.find(j=>j.value===z.inventoryItemId))==null?void 0:R.label,")"]}),!z.inventoryItemId&&c("span",{className:"text-orange-600 ml-2",children:"(No direct match)"})]},P)}),g.items.length>5&&c("li",{children:"...and more"})]}),c(Fe,{type:"button",onClick:L,className:"mt-3",children:"Apply OCR Data to Form"})]})]}),c(am,{className:"my-8"}),w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c(He,{control:_.control,name:"supplier_id",render:({field:z})=>w(De,{children:[c(Oe,{children:"Supplier"}),w(Wr,{onValueChange:z.onChange,defaultValue:z.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select a supplier"})})}),c(Ur,{children:n.map(P=>c(wt,{value:P.value,children:P.label},P.value))})]}),c(Xe,{})]})}),c(He,{control:_.control,name:"order_date",render:({field:z})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Order Date"}),w(dg,{children:[c(fg,{asChild:!0,children:c(Me,{children:w(Fe,{variant:"outline",className:Rt("w-full pl-3 text-left font-normal",!z.value&&"text-muted-foreground"),children:[z.value?new Date(z.value).toLocaleDateString():c("span",{children:"Pick a date"}),c(Hi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{mode:"single",selected:z.value,onSelect:z.onChange,initialFocus:!0})})]}),c(Xe,{})]})}),c(He,{control:_.control,name:"expected_delivery_date",render:({field:z})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Expected Delivery Date (Optional)"}),w(dg,{children:[c(fg,{asChild:!0,children:c(Me,{children:w(Fe,{variant:"outline",className:Rt("w-full pl-3 text-left font-normal",!z.value&&"text-muted-foreground"),children:[z.value?new Date(z.value).toLocaleDateString():c("span",{children:"Pick a date"}),c(Hi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{mode:"single",selected:z.value||void 0,onSelect:z.onChange})})]}),c(Xe,{})]})})]}),c(He,{control:_.control,name:"notes",render:({field:z})=>w(De,{children:[c(Oe,{children:"Notes (Optional)"}),c(Me,{children:c(Qr,{placeholder:"Any additional notes for this purchase order",...z})}),c(Xe,{})]})}),w("div",{className:"space-y-4",children:[c(er,{className:"text-lg font-semibold",children:"Order Items"}),b.map((z,P)=>w("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 border p-4 rounded-md relative",children:[c("div",{className:"md:col-span-4",children:c(He,{control:_.control,name:`items.${P}.inventory_item_id`,render:({field:R})=>w(De,{children:[c(Oe,{children:"Item"}),w(Wr,{onValueChange:j=>{R.onChange(j),T(P,j)},defaultValue:R.value,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select an item"})})}),c(Ur,{children:i.map(j=>w(wt,{value:j.value,children:[j.label," ",j.category?`(${j.category})`:""]},j.value))})]}),(()=>{const j=_.getValues(`items.${P}.inventory_item_id`),V=i.find(Z=>Z.value===j);return V!=null&&V.item_code?w("p",{className:"text-xs text-muted-foreground mt-1",children:["Code: ",V.item_code]}):null})(),c(Xe,{})]})})}),c("div",{className:"md:col-span-3",children:c(He,{control:_.control,name:`items.${P}.description`,render:({field:R})=>w(De,{children:[c(Oe,{children:"Description"}),c(Me,{children:c(ct,{placeholder:"Item description",...R})}),c(Xe,{})]})})}),c("div",{className:"md:col-span-2",children:c(He,{control:_.control,name:`items.${P}.quantity_ordered`,render:({field:R})=>w(De,{children:[c(Oe,{children:"Quantity"}),c(Me,{children:c(ct,{type:"number",placeholder:"Qty",...R,onChange:j=>R.onChange(parseInt(j.target.value,10)||0)})}),c(Xe,{})]})})}),c("div",{className:"md:col-span-2",children:c(He,{control:_.control,name:`items.${P}.unit_price`,render:({field:R})=>w(De,{children:[c(Oe,{children:"Unit Price"}),c(Me,{children:c(ct,{type:"number",step:"0.01",placeholder:"Price",...R,onChange:j=>R.onChange(parseFloat(j.target.value)||0)})}),c(Xe,{})]})})}),c("div",{className:"md:col-span-1 flex items-end",children:b.length>1&&c(Fe,{type:"button",variant:"destructive",size:"icon",onClick:()=>C(P),children:c(om,{className:"h-4 w-4"})})})]},z.id)),w(Fe,{type:"button",variant:"outline",onClick:()=>S({inventory_item_id:"",quantity_ordered:1,unit_price:0,description:""}),children:[c(Ch,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),w("div",{className:"flex justify-end space-x-2",children:[c(Fe,{type:"button",variant:"outline",onClick:()=>e("/purchases"),disabled:u,children:"Cancel"}),c(Fe,{type:"submit",disabled:u,children:u?"Creating...":"Create Purchase Order"})]})]})]})]})};var vT={exports:{}},eH;function XXe(){return eH||(eH=1,function(e){var t=function(r){var n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(U,G,J){U[G]=J.value},o,s=typeof Symbol=="function"?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function f(U,G,J){return Object.defineProperty(U,G,{value:J,enumerable:!0,configurable:!0,writable:!0}),U[G]}try{f({},"")}catch{f=function(G,J,D){return G[J]=D}}function h(U,G,J,D){var K=G&&G.prototype instanceof S?G:S,Q=Object.create(K.prototype),ae=new te(D||[]);return i(Q,"_invoke",{value:R(U,J,ae)}),Q}r.wrap=h;function m(U,G,J){try{return{type:"normal",arg:U.call(G,J)}}catch(D){return{type:"throw",arg:D}}}var x="suspendedStart",g="suspendedYield",y="executing",_="completed",b={};function S(){}function C(){}function E(){}var O={};f(O,l,function(){return this});var T=Object.getPrototypeOf,M=T&&T(T(q([])));M&&M!==n&&a.call(M,l)&&(O=M);var L=E.prototype=S.prototype=Object.create(O);C.prototype=E,i(L,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:C,configurable:!0}),C.displayName=f(E,d,"GeneratorFunction");function z(U){["next","throw","return"].forEach(function(G){f(U,G,function(J){return this._invoke(G,J)})})}r.isGeneratorFunction=function(U){var G=typeof U=="function"&&U.constructor;return G?G===C||(G.displayName||G.name)==="GeneratorFunction":!1},r.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,E):(U.__proto__=E,f(U,d,"GeneratorFunction")),U.prototype=Object.create(L),U},r.awrap=function(U){return{__await:U}};function P(U,G){function J(Q,ae,se,fe){var ie=m(U[Q],U,ae);if(ie.type==="throw")fe(ie.arg);else{var X=ie.arg,ue=X.value;return ue&&typeof ue=="object"&&a.call(ue,"__await")?G.resolve(ue.__await).then(function(de){J("next",de,se,fe)},function(de){J("throw",de,se,fe)}):G.resolve(ue).then(function(de){X.value=de,se(X)},function(de){return J("throw",de,se,fe)})}}var D;function K(Q,ae){function se(){return new G(function(fe,ie){J(Q,ae,fe,ie)})}return D=D?D.then(se,se):se()}i(this,"_invoke",{value:K})}z(P.prototype),f(P.prototype,u,function(){return this}),r.AsyncIterator=P,r.async=function(U,G,J,D,K){K===void 0&&(K=Promise);var Q=new P(h(U,G,J,D),K);return r.isGeneratorFunction(G)?Q:Q.next().then(function(ae){return ae.done?ae.value:Q.next()})};function R(U,G,J){var D=x;return function(Q,ae){if(D===y)throw new Error("Generator is already running");if(D===_){if(Q==="throw")throw ae;return Y()}for(J.method=Q,J.arg=ae;;){var se=J.delegate;if(se){var fe=j(se,J);if(fe){if(fe===b)continue;return fe}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(D===x)throw D=_,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);D=y;var ie=m(U,G,J);if(ie.type==="normal"){if(D=J.done?_:g,ie.arg===b)continue;return{value:ie.arg,done:J.done}}else ie.type==="throw"&&(D=_,J.method="throw",J.arg=ie.arg)}}}function j(U,G){var J=G.method,D=U.iterator[J];if(D===o)return G.delegate=null,J==="throw"&&U.iterator.return&&(G.method="return",G.arg=o,j(U,G),G.method==="throw")||J!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+J+"' method")),b;var K=m(D,U.iterator,G.arg);if(K.type==="throw")return G.method="throw",G.arg=K.arg,G.delegate=null,b;var Q=K.arg;if(!Q)return G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,b;if(Q.done)G[U.resultName]=Q.value,G.next=U.nextLoc,G.method!=="return"&&(G.method="next",G.arg=o);else return Q;return G.delegate=null,b}z(L),f(L,d,"Generator"),f(L,l,function(){return this}),f(L,"toString",function(){return"[object Generator]"});function V(U){var G={tryLoc:U[0]};1 in U&&(G.catchLoc=U[1]),2 in U&&(G.finallyLoc=U[2],G.afterLoc=U[3]),this.tryEntries.push(G)}function Z(U){var G=U.completion||{};G.type="normal",delete G.arg,U.completion=G}function te(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(V,this),this.reset(!0)}r.keys=function(U){var G=Object(U),J=[];for(var D in G)J.push(D);return J.reverse(),function K(){for(;J.length;){var Q=J.pop();if(Q in G)return K.value=Q,K.done=!1,K}return K.done=!0,K}};function q(U){if(U){var G=U[l];if(G)return G.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var J=-1,D=function K(){for(;++J<U.length;)if(a.call(U,J))return K.value=U[J],K.done=!1,K;return K.value=o,K.done=!0,K};return D.next=D}}return{next:Y}}r.values=q;function Y(){return{value:o,done:!0}}return te.prototype={constructor:te,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Z),!U)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=o)},stop:function(){this.done=!0;var U=this.tryEntries[0],G=U.completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var G=this;function J(fe,ie){return Q.type="throw",Q.arg=U,G.next=fe,ie&&(G.method="next",G.arg=o),!!ie}for(var D=this.tryEntries.length-1;D>=0;--D){var K=this.tryEntries[D],Q=K.completion;if(K.tryLoc==="root")return J("end");if(K.tryLoc<=this.prev){var ae=a.call(K,"catchLoc"),se=a.call(K,"finallyLoc");if(ae&&se){if(this.prev<K.catchLoc)return J(K.catchLoc,!0);if(this.prev<K.finallyLoc)return J(K.finallyLoc)}else if(ae){if(this.prev<K.catchLoc)return J(K.catchLoc,!0)}else if(se){if(this.prev<K.finallyLoc)return J(K.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,G){for(var J=this.tryEntries.length-1;J>=0;--J){var D=this.tryEntries[J];if(D.tryLoc<=this.prev&&a.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var K=D;break}}K&&(U==="break"||U==="continue")&&K.tryLoc<=G&&G<=K.finallyLoc&&(K=null);var Q=K?K.completion:{};return Q.type=U,Q.arg=G,K?(this.method="next",this.next=K.finallyLoc,b):this.complete(Q)},complete:function(U,G){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&G&&(this.next=G),b},finish:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var J=this.tryEntries[G];if(J.finallyLoc===U)return this.complete(J.completion,J.afterLoc),Z(J),b}},catch:function(U){for(var G=this.tryEntries.length-1;G>=0;--G){var J=this.tryEntries[G];if(J.tryLoc===U){var D=J.completion;if(D.type==="throw"){var K=D.arg;Z(J)}return K}}throw new Error("illegal catch attempt")},delegateYield:function(U,G,J){return this.delegate={iterator:q(U),resultName:G,nextLoc:J},this.method==="next"&&(this.arg=o),b}},r}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(vT)),vT.exports}var yT,tH;function EM(){return tH||(tH=1,yT=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`),yT}var xT,rH;function Doe(){if(rH)return xT;rH=1;const e=EM();let t=0;return xT=({id:r,action:n,payload:a={}})=>{let i=r;return typeof i>"u"&&(i=e("Job",t),t+=1),{id:i,action:n,payload:a}},xT}var v2={},nH;function CM(){if(nH)return v2;nH=1;let e=!1;return v2.logging=e,v2.setLogging=t=>{e=t},v2.log=(...t)=>e?console.log.apply(this,t):null,v2}var wT,aH;function ZXe(){if(aH)return wT;aH=1;const e=Doe(),{log:t}=CM(),r=EM();let n=0;return wT=()=>{const a=r("Scheduler",n),i={},o={};let s=[];n+=1;const l=()=>s.length,u=()=>Object.keys(i).length,d=()=>{if(s.length!==0){const g=Object.keys(i);for(let y=0;y<g.length;y+=1)if(typeof o[g[y]]>"u"){s[0](i[g[y]]);break}}},f=(g,y)=>new Promise((_,b)=>{const S=e({action:g,payload:y});s.push(async C=>{s.shift(),o[C.id]=S;try{_(await C[g].apply(this,[...y,S.id]))}catch(E){b(E)}finally{delete o[C.id],d()}}),t(`[${a}]: Add ${S.id} to JobQueue`),t(`[${a}]: JobQueue length=${s.length}`),d()});return{addWorker:g=>(i[g.id]=g,t(`[${a}]: Add ${g.id}`),t(`[${a}]: Number of workers=${u()}`),d(),g.id),addJob:async(g,...y)=>{if(u()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return f(g,y)},terminate:async()=>{Object.keys(i).forEach(async g=>{await i[g].terminate()}),s=[]},getQueueLen:l,getNumWorkers:u}},wT}function JXe(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _T,iH;function QXe(){return iH||(iH=1,_T=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof JXe=="function"&&(t.type="node"),typeof e>"u"?t:t[e]}),_T}var bT,oH;function eZe(){if(oH)return bT;oH=1;const t=QXe()("type")==="browser"?r=>new URL(r,window.location.href).href:r=>r;return bT=r=>{const n={...r};return["corePath","workerPath","langPath"].forEach(a=>{r[a]&&(n[a]=t(n[a]))}),n},bT}var ST,sH;function Ioe(){return sH||(sH=1,ST={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ST}const tZe="6.0.1",rZe={version:tZe};var AT,lH;function nZe(){return lH||(lH=1,AT={workerBlobURL:!0,logger:()=>{}}),AT}var NT,cH;function aZe(){if(cH)return NT;cH=1;const e=rZe.version;return NT={...nZe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${e}/dist/worker.min.js`},NT}var kT,uH;function iZe(){return uH||(uH=1,kT=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const n=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(e);return r}),kT}var ET,dH;function oZe(){return dH||(dH=1,ET=e=>{e.terminate()}),ET}var CT,fH;function sZe(){return fH||(fH=1,CT=(e,t)=>{e.onmessage=({data:r})=>{t(r)}}),CT}var PT,hH;function lZe(){return hH||(hH=1,PT=async(e,t)=>{e.postMessage(t)}),PT}var TT,pH;function cZe(){if(pH)return TT;pH=1;const e=r=>new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:o}}})=>{a(Error(`File could not be read! Code=${o}`))},i.readAsArrayBuffer(r)}),t=async r=>{let n=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?n=atob(r.split(",")[1]).split("").map(a=>a.charCodeAt(0)):n=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(n=await t(r.src)),r.tagName==="VIDEO"&&(n=await t(r.poster)),r.tagName==="CANVAS"&&await new Promise(a=>{r.toBlob(async i=>{n=await e(i),a()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const a=await r.convertToBlob();n=await e(a)}else(r instanceof File||r instanceof Blob)&&(n=await e(r));return new Uint8Array(n)};return TT=t,TT}var OT,mH;function uZe(){if(mH)return OT;mH=1;const e=aZe(),t=iZe(),r=oZe(),n=sZe(),a=lZe(),i=cZe();return OT={defaultOptions:e,spawnWorker:t,terminateWorker:r,onMessage:n,send:a,loadImage:i},OT}var DT,gH;function Roe(){if(gH)return DT;gH=1;const e=eZe(),t=Doe(),{log:r}=CM(),n=EM(),a=Ioe(),{defaultOptions:i,spawnWorker:o,terminateWorker:s,onMessage:l,loadImage:u,send:d}=uZe();let f=0;return DT=async(h="eng",m=a.LSTM_ONLY,x={},g={})=>{const y=n("Worker",f),{logger:_,errorHandler:b,...S}=e({...i,...x}),C={},E=typeof h=="string"?h.split("+"):h;let O=m,T=g;const M=[a.DEFAULT,a.LSTM_ONLY].includes(m)&&!S.legacyCore;let L,z;const P=new Promise((X,ue)=>{z=X,L=ue}),R=X=>{L(X.message)};let j=o(S);j.onerror=R,f+=1;const V=({id:X,action:ue,payload:de})=>new Promise((re,ke)=>{r(`[${y}]: Start ${X}, action=${ue}`);const Re=`${ue}-${X}`;C[Re]={resolve:re,reject:ke},d(j,{workerId:y,jobId:X,action:ue,payload:de})}),Z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),te=X=>V(t({id:X,action:"load",payload:{options:{lstmOnly:M,corePath:S.corePath,logging:S.logging}}})),q=(X,ue,de)=>V(t({id:de,action:"FS",payload:{method:"writeFile",args:[X,ue]}})),Y=(X,ue)=>V(t({id:ue,action:"FS",payload:{method:"readFile",args:[X,{encoding:"utf8"}]}})),U=(X,ue)=>V(t({id:ue,action:"FS",payload:{method:"unlink",args:[X]}})),G=(X,ue,de)=>V(t({id:de,action:"FS",payload:{method:X,args:ue}})),J=(X,ue)=>V(t({id:ue,action:"loadLanguage",payload:{langs:X,options:{langPath:S.langPath,dataPath:S.dataPath,cachePath:S.cachePath,cacheMethod:S.cacheMethod,gzip:S.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(O)&&!S.legacyLang}}})),D=(X,ue,de,re)=>V(t({id:re,action:"initialize",payload:{langs:X,oem:ue,config:de}})),K=(X="eng",ue,de,re)=>{if(M&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(ue))throw Error("Legacy model requested but code missing.");const ke=ue||O;O=ke;const Re=de||T;T=Re;const ge=(typeof X=="string"?X.split("+"):X).filter(Ye=>!E.includes(Ye));return E.push(...ge),ge.length>0?J(ge,re).then(()=>D(X,ke,Re,re)):D(X,ke,Re,re)},Q=(X={},ue)=>V(t({id:ue,action:"setParameters",payload:{params:X}})),ae=async(X,ue={},de={text:!0},re)=>V(t({id:re,action:"recognize",payload:{image:await u(X),options:ue,output:de}})),se=async(X,ue)=>{if(M)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return V(t({id:ue,action:"detect",payload:{image:await u(X)}}))},fe=async()=>(j!==null&&(s(j),j=null),Promise.resolve());l(j,({workerId:X,jobId:ue,status:de,action:re,data:ke})=>{const Re=`${re}-${ue}`;if(de==="resolve")r(`[${X}]: Complete ${ue}`),C[Re].resolve({jobId:ue,data:ke}),delete C[Re];else if(de==="reject")if(C[Re].reject(ke),delete C[Re],re==="load"&&L(ke),b)b(ke);else throw Error(ke);else de==="progress"&&_({...ke,userJobId:ue})});const ie={id:y,worker:j,load:Z,writeText:q,readText:Y,removeFile:U,FS:G,reinitialize:K,setParameters:Q,recognize:ae,detect:se,terminate:fe};return te().then(()=>J(h)).then(()=>D(h,m,g)).then(()=>z(ie)).catch(()=>{}),P},DT}var IT,vH;function dZe(){if(vH)return IT;vH=1;const e=Roe();return IT={recognize:async(n,a,i)=>{const o=await e(a,1,i);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,a)=>{const i=await e("osd",0,a);return i.detect(n).finally(async()=>{await i.terminate()})}},IT}var RT,yH;function fZe(){return yH||(yH=1,RT={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),RT}var MT,xH;function hZe(){return xH||(xH=1,MT={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),MT}var FT,wH;function pZe(){if(wH)return FT;wH=1,XXe();const e=ZXe(),t=Roe(),r=dZe(),n=fZe(),a=Ioe(),i=hZe(),{setLogging:o}=CM();return FT={languages:n,OEM:a,PSM:i,createScheduler:e,createWorker:t,setLogging:o,...r},FT}var mZe=pZe();let Bu=null,O0=!1;const gZe=async()=>{if(Bu)return Bu;if(O0)return new Promise((e,t)=>{const r=setInterval(()=>{Bu?(clearInterval(r),e(Bu)):O0||(clearInterval(r),t(new Error("Tesseract worker initialization failed.")))},100)});O0=!0;try{return Bu=await mZe.createWorker("eng",void 0,{logger:t=>console.log(t)}),O0=!1,Bu}catch(e){throw console.error("Failed to initialize Tesseract worker:",e),O0=!1,e}},_H=async e=>{if(e.type==="application/pdf")throw console.warn("Attempted OCR on PDF file. Client-side Tesseract.js does not support PDF directly."),new Error("PDF processing via client-side OCR is not supported. Please use an image file (PNG, JPG) or implement server-side PDF OCR.");const t=await gZe();if(!t)throw new Error("Tesseract worker not available.");try{const{data:{text:r}}=await t.recognize(e);return r}catch(r){console.error("Error during OCR processing:",r);const n=Bu;if(Bu=null,O0=!1,n)try{await n.terminate()}catch(a){console.error("Error terminating worker:",a)}throw new Error("Failed to extract text using OCR.")}},vZe=async()=>{if(Bu){const e=Bu;Bu=null,O0=!1;try{await e.terminate(),console.log("Tesseract worker terminated.")}catch(t){console.error("Error terminating Tesseract worker:",t)}}},bH=e=>{var u;const t=e.split(`
`).map(d=>d.trim()).filter(d=>d!==""),r={items:[]},n=[/\b(\d{1,2}[-/.\s]\d{1,2}[-/.\s]\d{2,4})\b/,/\b(\d{4}[-/.\s]\d{1,2}[-/.\s]\d{1,2})\b/,/\b((?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*[.\s,]*\d{1,2}[,\s]*\d{2,4})\b/i],a=["supplier","vendor","from:","invoice from","sold by"],i=["total","grand total","amount due","total amount","balance due"];for(const d of t){for(const f of a)if(d.toLowerCase().includes(f)){let h=(u=d.toLowerCase().split(f)[1])==null?void 0:u.trim();if(h!=null&&h.startsWith(":")&&(h=h.substring(1).trim()),h&&h.length>2){r.supplier=h.split(",")[0].trim();break}}if(r.supplier)break}if(!r.supplier&&t.length>0){const d=t[0];!n.some(f=>f.test(d))&&!d.toLowerCase().includes("invoice")&&(/\b(ltd|inc|llc|co)\b/i.test(d)||/^[a-zA-Z\s&]+$/.test(d.split(",")[0].trim()))&&(r.supplier=d.split(",")[0].trim())}for(const d of t){for(const f of n){const h=d.match(f);if(h&&h[1]){r.date=h[1];break}}if(r.date)break}let o=[];t.forEach(d=>{for(const f of i)if(d.toLowerCase().includes(f)){const h=d.match(/[\d,]+\.?\d*/g);h&&h.forEach(m=>{o.push({value:parseFloat(m.replace(/,/g,"")),line:d})})}}),o.length>0&&(o.sort((d,f)=>f.value-d.value),r.totalAmount=o[0].value);const s=["description","item","product","service","qty","quantity","price","unit price","amount","subtotal"],l=/([\d,]*\.?\d+)/g;return t.forEach((d,f)=>{const m=d.toLowerCase().split(/\s+/);if(m.filter(y=>s.includes(y)).length/m.length>.4&&m.length<6||/^[\d\s.,$\-+()%]+$/.test(d.trim())||d.length<10)return;const g=Array.from(d.matchAll(l));if(g.length>=2){const y=g[g.length-1],_=g[g.length-2],b=y[0].replace(/,/g,""),S=_[0].replace(/,/g,""),C=parseFloat(b),E=parseInt(S,10);if(!isNaN(C)&&!isNaN(E)&&E.toString()===S&&!S.includes(".")){const O=_.index;if(O!==void 0&&O>0){let T=d.substring(0,O).trim().replace(/[.,:;]$/,"").trim();T.length>2&&r.items.push({name:T,quantity:E,price:C})}}}}),r.items.length===0&&t.length>0&&console.warn("OCR parsing (old logic) did not find structured item lines. Raw lines:",t),console.log("Parsed OCR Data (Old Logic - Restored):",r),r},yZe=async()=>{console.log("Attempting to fetch inventory items for select/search...");const{data:e,error:t}=await Le.from("inventory_items").select("id, item_name, category, is_batched").order("item_name",{ascending:!0});if(t)throw console.error("Error fetching inventory items for select:",t),new Error(`Failed to fetch inventory items: ${t.message}`);return e?e.map(r=>({value:r.id,label:r.item_name,category:r.category,is_batched:r.is_batched??!1})):(console.warn("No inventory items found for select."),[])},Moe=["application/pdf","image/png","image/jpeg","image/jpg"],Foe=5*1024*1024,xZe=je.object({quantity_received_now:je.number().min(1,"Quantity must be at least 1"),batch_number:je.string().optional(),expiry_date:je.date().nullable().optional(),invoice_file:je.custom(e=>e instanceof File||e===null||e===void 0,"Invalid file format").refine(e=>!e||e.size<=Foe,"File size should be less than 5MB.").refine(e=>!e||Moe.includes(e.type),"Only .pdf, .png, .jpg, .jpeg files are accepted.").optional().nullable()}),wZe=({poItem:e,purchaseOrderId:t,poNumber:r,inventoryItemInfo:n,remainingQuantity:a,onReceiveSuccess:i,children:o})=>{const{toast:s}=yn(),{user:l}=oi(),[u,d]=A.useState(!1),[f,h]=A.useState(!1),[m,x]=A.useState(!1),[g,y]=A.useState(null),[_,b]=A.useState(null),[S,C]=A.useState([]),[E,O]=A.useState(!1),T=(n==null?void 0:n.is_batched)??!1,M=dd({resolver:fd(xZe.refine(z=>z.quantity_received_now<=a,{message:`Quantity cannot exceed remaining quantity (${a})`,path:["quantity_received_now"]}).refine(z=>!T||z.batch_number&&z.batch_number.trim()!=="",{message:"Batch number is required for batched items.",path:["batch_number"]}).refine(z=>!T||z.expiry_date,{message:"Expiry date is required for batched items.",path:["expiry_date"]})),defaultValues:{quantity_received_now:a>0?1:0,batch_number:"",expiry_date:null,invoice_file:null}});A.useEffect(()=>{(async()=>{if(u&&S.length===0){O(!0);try{const P=await yZe();C(P.map(R=>({id:R.value,name:R.label})))}catch(P){console.error("Failed to fetch inventory items for search:",P),s({variant:"destructive",title:"Error",description:"Could not load inventory items for matching."})}finally{O(!1)}}})(),u?(M.reset({quantity_received_now:a>0?1:0,batch_number:"",expiry_date:null,invoice_file:null}),y(null),b(null)):m||vZe()},[u,a,M,m,s]);const L=async z=>{if(h(!0),!l||!l.id){s({variant:"destructive",title:"Authentication Error",description:"User ID not found. Cannot record receipt."}),h(!1);return}try{let P=e.unit_price;if(_&&_.items){const j=_.items.find(V=>V.inventoryItemId===e.inventory_item_id);j&&(P=j.price,s({title:"Price Note",description:`Using confirmed invoice price (${P}) for this receipt of "${e.description}".`,duration:4e3}))}await tXe({p_po_item_id:e.id,p_quantity_received:z.quantity_received_now,p_batch_number:z.batch_number||null,p_expiry_date:z.expiry_date?z.expiry_date.toISOString().split("T")[0]:null,p_purchase_price:P,p_received_by_user_id:l.id});let R=null;if(z.invoice_file&&!_){x(!0),s({title:"Processing Invoice",description:"Extracting text from invoice, please wait..."});try{const j=await _H(z.invoice_file),V=bH(j);y(V);const Z=QV(V.items,S),te=V.items.map((q,Y)=>{var G;const U=Z.find(J=>J.ocrItemIndex===Y);return{...q,inventoryItemId:((G=U==null?void 0:U.bestMatch)==null?void 0:G.id.toString())||null,matchDetails:U}});b({...V,items:te}),console.log("OCR Parsed Data:",V),console.log("Fuzzy Matched Items:",te),s({title:"Invoice Processed",description:"Review extracted and matched data below. Confirm to proceed."}),x(!1),h(!1);return}catch(j){console.error("OCR Error or Matching Error:",j),s({variant:"destructive",title:"Processing Failed",description:j.message}),x(!1),h(!1);return}}if(_&&z.invoice_file){console.log("Confirmed OCR Data, attempting to upload invoice and create record:",_),s({title:"Processing Confirmed Invoice",description:"Uploading file and creating invoice record..."});try{const j=await Toe(z.invoice_file,r);let V=null;try{const Z=await woe(t);Z?V=Z.supplier_id:s({variant:"destructive",title:"Warning",description:"Could not fetch PO details to link supplier to invoice. Supplier will be unlinked."})}catch(Z){console.error("Failed to fetch PO for supplier ID:",Z),s({variant:"destructive",title:"Warning",description:"Error fetching PO details for invoice supplier linking."})}await Ooe({file_path:j,purchase_order_id:t,supplier_id:V,invoice_date:_.date?new Date(_.date).toISOString().split("T")[0]:null,total_amount:_.totalAmount,notes:`Invoice uploaded for PO: ${r}. OCR Supplier: ${_.supplier||"N/A"}. OCR Date: ${_.date||"N/A"}. OCR Total: ${_.totalAmount||"N/A"}`}),s({title:"Invoice Saved",description:`Invoice for PO ${r} processed and saved.`})}catch(j){console.error("Failed to upload invoice or create record:",j),s({variant:"destructive",title:"Invoice Processing Failed",description:j.message||"Could not save the invoice details."})}}s({title:"Success",description:`${z.quantity_received_now} units of "${e.description}" received.`}),i(),d(!1)}catch(P){console.error("Failed to receive items or process invoice:",P),s({variant:"destructive",title:"Error Receiving Items",description:(P==null?void 0:P.message)||"An unexpected error occurred while recording received items."})}finally{h(!1)}};return w(ja,{open:u,onOpenChange:d,children:[c(Hw,{asChild:!0,children:o}),w(Pa,{className:"sm:max-w-[425px]",children:[w(Ta,{children:[w(Oa,{children:["Receive Item: ",e.description]}),w(Yi,{children:["Record quantity received for this item. Ordered: ",e.quantity_ordered,", Received: ",e.quantity_received,", Remaining: ",a,"."]})]}),c(Rh,{...M,children:w("form",{onSubmit:M.handleSubmit(L),className:"space-y-4",children:[c(He,{control:M.control,name:"quantity_received_now",render:({field:z})=>w(De,{children:[c(Oe,{children:"Quantity Receiving Now"}),c(Me,{children:c(ct,{type:"number",min:"1",max:a,...z,onChange:P=>z.onChange(parseInt(P.target.value,10)||0)})}),c(Xe,{})]})}),c(He,{control:M.control,name:"invoice_file",render:({field:z})=>w(De,{children:[c(Oe,{children:"Upload Invoice (Optional)"}),c(Me,{children:c(nm,{value:z.value,onFileChange:async P=>{if(z.onChange(P),b(null),y(null),P){x(!0),s({title:"Scanning Invoice",description:"Extracting text, please wait..."});try{const R=await _H(P),j=bH(R);y(j);const V=QV(j.items,S),Z=j.items.map((Y,U)=>{var J;const G=V.find(D=>D.ocrItemIndex===U);return{...Y,inventoryItemId:((J=G==null?void 0:G.bestMatch)==null?void 0:J.id.toString())||null,matchDetails:G}});b({...j,items:Z});const te=e.inventory_item_id,q=Z.find(Y=>Y.inventoryItemId===te);if(q&&Z.filter(Y=>Y.inventoryItemId===te).length===1){const Y=q.quantity,U=Math.min(Y,a);U>0&&M.getValues("quantity_received_now")!==U&&(M.setValue("quantity_received_now",U,{shouldValidate:!0}),s({title:"Quantity Pre-filled",description:`Quantity for "${e.description}" pre-filled from invoice.`}))}console.log("Live OCR Parsed Data:",j),console.log("Fuzzy Matched Items on change:",Z),s({title:"Invoice Scanned",description:"Review extracted and matched data below."})}catch(R){console.error("OCR Error on change:",R),s({variant:"destructive",title:"OCR Failed",description:R.message}),b(null)}finally{x(!1)}}else b(null),y(null)},accept:Moe.join(","),maxSize:Foe,disabled:m||f})}),c(Xe,{})]})}),m&&c("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Processing invoice, please wait..."}),_&&!m&&w("div",{className:"space-y-4 p-4 border rounded-md mt-4",children:[c("h4",{className:"text-md font-semibold mb-2",children:"Confirm or Edit Extracted Invoice Data"}),w(De,{children:[c(Oe,{children:"Invoice Supplier"}),c(Me,{children:c(ct,{value:_.supplier||"",onChange:z=>b(P=>P?{...P,supplier:z.target.value}:null),placeholder:"Supplier from invoice"})})]}),w(De,{children:[c(Oe,{children:"Invoice Date"}),c(Me,{children:c(ct,{value:_.date||"",onChange:z=>b(P=>P?{...P,date:z.target.value}:null),placeholder:"Date from invoice (e.g., YYYY-MM-DD)"})})]}),w(De,{children:[c(Oe,{children:"Invoice Total Amount"}),c(Me,{children:c(ct,{type:"number",value:_.totalAmount||"",onChange:z=>b(P=>P?{...P,totalAmount:parseFloat(z.target.value)||void 0}:null),placeholder:"Total amount from invoice"})})]}),w("div",{className:"space-y-2",children:[c(Oe,{children:"Invoice Items (Matched)"}),E&&c("p",{className:"text-sm text-muted-foreground",children:"Loading inventory for matching..."}),!E&&_.items.map((z,P)=>{var R;return w("div",{className:"p-3 border rounded-md space-y-2 bg-slate-50 dark:bg-slate-800",children:[w(De,{children:[c(Oe,{className:"text-xs",children:"OCR Item Name"}),c(ct,{value:z.name,onChange:j=>{const V=_.items.map((Z,te)=>te===P?{...Z,name:j.target.value}:Z);b(Z=>Z?{...Z,items:V}:null)},placeholder:"Item Name from Invoice",className:"text-sm"})]}),w("div",{className:"grid grid-cols-2 gap-2",children:[w(De,{children:[c(Oe,{className:"text-xs",children:"Qty"}),c(ct,{type:"number",value:z.quantity,onChange:j=>{const V=_.items.map((Z,te)=>te===P?{...Z,quantity:parseInt(j.target.value)||0}:Z);b(Z=>Z?{...Z,items:V}:null)},placeholder:"Qty",className:"text-sm"})]}),w(De,{children:[c(Oe,{className:"text-xs",children:"Price (Unit)"}),c(ct,{type:"number",value:z.price,onChange:j=>{const V=_.items.map((Z,te)=>te===P?{...Z,price:parseFloat(j.target.value)||0}:Z);b(Z=>Z?{...Z,items:V}:null)},placeholder:"Price",className:"text-sm"})]})]}),w(De,{children:[c(Oe,{className:"text-xs",children:"Match to Inventory Item"}),w(Wr,{value:z.inventoryItemId||"",onValueChange:j=>{const V=[..._.items];V[P].inventoryItemId=j==="NO_MATCH"?null:j,b(Z=>Z?{...Z,items:V}:null)},children:[c(Br,{className:"text-sm",children:c(Vr,{placeholder:"Select inventory match..."})}),w(Ur,{children:[((R=z.matchDetails)==null?void 0:R.bestMatch)&&w(wt,{value:z.matchDetails.bestMatch.id.toString(),children:["Best: ",z.matchDetails.bestMatch.name]}),S.filter(j=>{var V,Z;return j.id!==((Z=(V=z.matchDetails)==null?void 0:V.bestMatch)==null?void 0:Z.id)}).map(j=>c(wt,{value:j.id.toString(),children:j.name},j.id)),c(wt,{value:"NO_MATCH",children:"No Match / Manual Entry"})]})]}),z.matchDetails&&z.matchDetails.allMatches.length>1&&!z.inventoryItemId&&w("p",{className:"text-xs text-muted-foreground mt-1",children:["Other possible matches: ",z.matchDetails.allMatches.slice(1,3).map(j=>j.item.name).join(", ")]})]})]},P)}),_.items.length===0&&c("p",{className:"text-xs text-muted-foreground",children:"No items found or parsed from invoice."})]})]}),T&&!_&&w(_r,{children:[c(He,{control:M.control,name:"batch_number",render:({field:z})=>w(De,{children:[c(Oe,{children:"Batch Number"}),c(Me,{children:c(ct,{placeholder:"Enter batch number",...z})}),c(Xe,{})]})}),c(He,{control:M.control,name:"expiry_date",render:({field:z})=>w(De,{className:"flex flex-col",children:[c(Oe,{children:"Expiry Date"}),w(dg,{children:[c(fg,{asChild:!0,children:c(Me,{children:w(Fe,{variant:"outline",className:Rt("w-full pl-3 text-left font-normal",!z.value&&"text-muted-foreground"),children:[z.value?new Date(z.value).toLocaleDateString():c("span",{children:"Pick expiry date"}),c(Hi,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),c(vm,{className:"w-auto p-0",align:"start",children:c(ym,{mode:"single",selected:z.value||void 0,onSelect:z.onChange,initialFocus:!0})})]}),c(Xe,{})]})})]}),w(Qi,{children:[c(x3,{asChild:!0,children:c(Fe,{type:"button",variant:"outline",disabled:f||m,children:"Cancel"})}),c(Fe,{type:"submit",disabled:f||m||a<=0,children:f?"Saving Receipt...":m?"Processing Invoice...":"Confirm Receipt"})]})]})})]})]})},_Ze=()=>{var V;const{id:e}=iy(),t=bo(),{toast:r}=yn(),{user:n}=oi(),[a,i]=A.useState(null),[o,s]=A.useState([]),[l,u]=A.useState([]),[d,f]=A.useState(!0),[h,m]=A.useState(!1),[x,g]=A.useState(!1),[y,_]=A.useState(!1),[b,S]=A.useState(null),C=A.useCallback(async Z=>{f(!0),S(null);try{const[te,q,Y]=await Promise.all([woe(Z),NM(),GV(Z)]);te?i(te):(S("Purchase order not found."),i(null)),s(q),u(Y)}catch(te){console.error(te),S("Failed to fetch purchase order details or related data."),r({variant:"destructive",title:"Error",description:"Could not load purchase order details, items, or invoices."})}finally{f(!1)}},[r]);A.useEffect(()=>{e?C(e):(S("Purchase Order ID is missing."),f(!1))},[e,C]);const E=()=>{e&&(r({title:"Item Received",description:"Refreshing PO details..."}),C(e))},O=async Z=>{var q;const te=(q=Z.target.files)==null?void 0:q[0];if(!te||!e||!(a!=null&&a.po_number)||!(n!=null&&n.id)){r({variant:"destructive",title:"Upload Error",description:"Missing required information for upload."});return}if(!["application/pdf","image/png","image/jpeg"].includes(te.type)){r({variant:"destructive",title:"Invalid File Type",description:"Please upload a PDF, PNG, or JPG file."});return}m(!0);try{await rXe(e,a.po_number,te,n.id),r({title:"Success",description:`Invoice "${te.name}" uploaded.`});const Y=await GV(e);u(Y)}catch(Y){console.error("Invoice upload failed:",Y),r({variant:"destructive",title:"Upload Failed",description:(Y==null?void 0:Y.message)||"Could not upload invoice."})}finally{m(!1),Z.target.value=""}},T=async()=>{if(!(!e||!a)){g(!0);try{console.log(`Simulating approval for PO ID: ${e}`),i(Z=>Z?{...Z,status:"Approved"}:null),r({title:"PO Approved",description:`Purchase Order ${a.po_number} has been approved.`})}catch(Z){console.error("Failed to approve PO:",Z),r({variant:"destructive",title:"Approval Failed",description:(Z==null?void 0:Z.message)||"Could not approve purchase order."})}finally{g(!1)}}},M=async()=>{if(!(!e||!a)){_(!0);try{await aXe(e,"Ordered"),i(Z=>Z?{...Z,status:"Ordered"}:null),r({title:"PO Confirmed",description:`Purchase Order ${a.po_number} has been marked as Ordered.`})}catch(Z){console.error("Failed to confirm PO:",Z),r({variant:"destructive",title:"Confirmation Failed",description:(Z==null?void 0:Z.message)||"Could not confirm purchase order."})}finally{_(!1)}}},L=async Z=>{try{const te=await nXe(Z.storage_path);te?window.open(te,"_blank"):r({variant:"destructive",title:"Download Error",description:"Could not get download link."})}catch(te){console.error("Download failed:",te),r({variant:"destructive",title:"Download Failed",description:"Could not get download link."})}},z=Z=>{if(!Z)return"outline";switch(Z){case"Pending":return"outline";case"Approved":return"default";case"Ordered":return"secondary";case"Partially Received":return"default";case"Received":return"default";case"Cancelled":return"destructive";default:return"outline"}};if(d)return c("div",{className:"container mx-auto p-4",children:"Loading purchase order details..."});if(b)return w("div",{className:"container mx-auto p-4 text-red-500 flex items-center",children:[c(mc,{className:"mr-2"})," ",b]});if(!a)return c("div",{className:"container mx-auto p-4",children:"Purchase order not found."});const P=a.status==="Ordered"||a.status==="Partially Received",R=a.status==="Pending",j=a.status==="Approved";return w("div",{className:"container mx-auto p-4 space-y-6",children:[c(Aa,{heading:`Purchase Order: ${a.po_number}`,text:`Details for PO from ${a.supplier_name}`}),w(sr,{children:[c(yr,{children:c(xr,{children:"Order Summary"})}),w(mr,{className:"grid md:grid-cols-3 gap-4",children:[w("div",{children:[c("span",{className:"font-semibold",children:"PO Number:"})," ",a.po_number]}),w("div",{children:[c("span",{className:"font-semibold",children:"Supplier:"})," ",a.supplier_name]}),w("div",{children:[c("span",{className:"font-semibold",children:"Order Date:"})," ",new Date(a.order_date).toLocaleDateString()]}),w("div",{children:[c("span",{className:"font-semibold",children:"Expected Delivery:"})," ",a.expected_delivery_date?new Date(a.expected_delivery_date).toLocaleDateString():"N/A"]}),w("div",{children:[c("span",{className:"font-semibold",children:"Status:"})," ",c(ed,{variant:z(a.status),className:a.status==="Received"?"bg-green-500 hover:bg-green-600 text-white":"",children:a.status})]}),w("div",{children:[c("span",{className:"font-semibold",children:"Total Amount:"})," ",((V=a.total_amount)==null?void 0:V.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"N/A"]}),a.notes&&w("div",{className:"md:col-span-3",children:[c("span",{className:"font-semibold",children:"Notes:"})," ",a.notes]})]})]}),c(am,{}),w(sr,{children:[w(yr,{children:[c(xr,{children:"Associated Invoices"}),c(_c,{children:"Manage invoices related to this purchase order."})]}),w(mr,{className:"space-y-4",children:[l.length>0?c("ul",{className:"list-disc pl-5 space-y-2",children:l.map(Z=>w("li",{className:"flex justify-between items-center",children:[w("span",{children:[Z.file_name," ",w("span",{className:"text-xs text-muted-foreground",children:["(",new Date(Z.uploaded_at).toLocaleString(),")"]})]}),w(Fe,{variant:"outline",size:"sm",onClick:()=>L(Z),children:[c(GH,{className:"mr-2 h-4 w-4"})," Download"]})]},Z.id))}):c("p",{className:"text-sm text-muted-foreground",children:"No invoices uploaded yet."}),w("div",{className:"mt-4",children:[c(er,{htmlFor:"invoice-upload",className:"mb-2 block",children:"Upload New Invoice (PDF, PNG, JPG)"}),c(ct,{id:"invoice-upload",type:"file",accept:".pdf, image/png, image/jpeg",onChange:O,disabled:h||a.status==="Cancelled",className:"max-w-sm"}),h&&w("p",{className:"text-sm text-muted-foreground mt-2 flex items-center",children:[c(Y0,{className:"animate-pulse mr-1 h-4 w-4"})," Uploading..."]})]})]})]}),c(am,{}),P&&w(sr,{children:[w(yr,{children:[c(xr,{children:"Receive Items"}),c(_c,{children:"Record received quantities for items in this purchase order."})]}),c(mr,{className:"space-y-4",children:a.items.filter(Z=>Z.quantity_ordered-Z.quantity_received>0).length>0?a.items.map(Z=>{const te=Z.quantity_ordered-Z.quantity_received,q=o.find(Y=>Y.value===Z.inventory_item_id);return te<=0?null:w("div",{className:"flex justify-between items-center p-2 border rounded-md",children:[w("div",{children:[c("p",{className:"font-medium",children:Z.description||Z.product_name}),w("p",{className:"text-sm text-muted-foreground",children:["Ordered: ",Z.quantity_ordered,", Received: ",Z.quantity_received,", Remaining: ",te]})]}),c(wZe,{poItem:Z,purchaseOrderId:a.id,poNumber:a.po_number,inventoryItemInfo:q,remainingQuantity:te,onReceiveSuccess:E,children:w(Fe,{variant:"default",size:"sm",className:"bg-blue-500 hover:bg-blue-600 text-white",children:[c(Nce,{className:"mr-1 h-4 w-4"})," Receive"]})})]},`receive-${Z.id}`)}):c("p",{className:"text-sm text-muted-foreground",children:"All items have been fully received or no items are pending receipt."})})]}),c(am,{}),w("div",{className:"mt-8",children:[c(Aa,{heading:"Order Items Summary"}),w(Bs,{className:"mt-4",children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Item Description"}),c(Gt,{className:"text-right",children:"Ordered"}),c(Gt,{className:"text-right",children:"Received"}),c(Gt,{className:"text-right",children:"Remaining"}),c(Gt,{className:"text-right",children:"Unit Price"}),c(Gt,{className:"text-right",children:"Subtotal"})]})}),c(qs,{children:a.items.map(Z=>{const te=Z.quantity_ordered-Z.quantity_received;return w(kn,{children:[c($t,{children:Z.description||Z.product_name}),c($t,{className:"text-right",children:Z.quantity_ordered}),c($t,{className:"text-right",children:Z.quantity_received}),c($t,{className:"text-right font-medium",children:te}),c($t,{className:"text-right",children:Z.unit_price.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),c($t,{className:"text-right",children:Z.subtotal.toLocaleString("en-IN",{style:"currency",currency:"INR"})})]},Z.id)})})]})]}),w("div",{className:"flex justify-between items-center mt-6",children:[w("div",{children:[" ",R&&w(Fe,{onClick:T,disabled:x||d,variant:"default",className:"bg-green-500 hover:bg-green-600 text-white",children:[c(nx,{className:"mr-2 h-4 w-4"}),x?"Approving...":"Approve Order"]}),j&&w(Fe,{onClick:M,disabled:y||d,variant:"default",children:[c(Oce,{className:"mr-2 h-4 w-4"}),y?"Confirming...":"Confirm & Mark Ordered"]})]}),c(Fe,{variant:"outline",onClick:()=>t("/purchases"),children:"Back to Purchase Orders"})]})]})},bZe=async(e,t)=>{if(!e)throw new Error("No file provided for upload.");const r=e.name.split(".").pop(),n=`${Nw()}.${r}`,i=`${t?`urgent_purchase_slips/${t}`:"urgent_purchase_slips"}/${n}`,{error:o}=await Le.storage.from("urgent-purchase-slip").upload(i,e);if(o)throw console.error("Error uploading urgent purchase slip:",o),o;return{filePath:i,fileName:e.name}},SH=async e=>{const{data:t,error:r}=await Le.from("urgent_purchases").insert(e.header).select().single();if(r||!t)throw console.error("Error creating urgent purchase header:",r),r||new Error("Failed to create urgent purchase header.");const n=t;if(e.items&&e.items.length>0){const a=e.items.map(o=>({...o,urgent_purchase_id:n.id})),{error:i}=await Le.from("urgent_purchase_items").insert(a);if(i)throw console.error("Error creating urgent purchase items:",i),await Le.from("urgent_purchases").delete().match({id:n.id}),i}return{...n,items:(e.items||[]).map(a=>({...a,id:Nw(),urgent_purchase_id:n.id}))}},AH=async(e,t)=>{const{data:r,error:n}=await Le.from("urgent_purchases").select("requested_by_user_id, status").eq("id",e).single();if(n||!r)throw console.error("Error fetching urgent purchase for submission:",n),n||new Error("Urgent purchase not found for submission.");const a=r;if(a.requested_by_user_id!==t)throw new Error("User not authorized to submit this purchase for approval.");if(a.status!=="draft")throw new Error(`Urgent purchase is not in draft state (current: ${a.status}).`);const{data:i,error:o}=await Le.from("urgent_purchases").update({status:"pending_approval",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(o||!i)throw console.error("Error submitting urgent purchase for approval:",o),o||new Error("Failed to submit urgent purchase for approval.");return i},SZe=async(e,t,r)=>{const{data:n,error:a}=await Le.from("urgent_purchases").update({status:"approved",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r,updated_at:new Date().toISOString()}).eq("id",e).eq("status","pending_approval").select().single();if(a||!n)throw console.error("Error approving urgent purchase:",a),a||new Error("Failed to approve urgent purchase or not found/not pending.");const i=n;return await NZe(i.id,t),i},AZe=async(e,t,r)=>{if(!r||r.trim()==="")throw new Error("Reviewer notes are required for rejecting an urgent purchase.");const{data:n,error:a}=await Le.from("urgent_purchases").update({status:"rejected",reviewed_by_user_id:t,reviewed_at:new Date().toISOString(),reviewer_notes:r,updated_at:new Date().toISOString()}).eq("id",e).eq("status","pending_approval").select().single();if(a||!n)throw console.error("Error rejecting urgent purchase:",a),a||new Error("Failed to reject urgent purchase or not found/not pending.");return n},NZe=async(e,t)=>{const{data:r,error:n}=await Le.from("urgent_purchases").select(`
      *,
      urgent_purchase_items (*)
    `).eq("id",e).eq("status","approved").single();if(n||!r)throw console.error(`Error fetching approved urgent purchase ${e} for item processing:`,n),n||new Error("Approved urgent purchase not found or not in correct state for item processing.");const a=r;if(!a.urgent_purchase_items||a.urgent_purchase_items.length===0){console.log(`No items to process for urgent purchase ${e}.`);return}const i=a.urgent_purchase_items;for(const o of i){let s=null,l;const{data:u,error:d}=await Le.from("inventory_items").select("is_batched").eq("id",o.inventory_item_id).single();if(d||!u)throw console.error(`Inventory item ${o.inventory_item_id} not found for urgent purchase item ${o.id}`),d||new Error(`Inventory item ${o.inventory_item_id} not found.`);if(u.is_batched&&o.batch_number){l="BATCH_STOCK_IN";const{data:m,error:x}=await Le.from("inventory_item_batches").select("id").eq("inventory_item_id",o.inventory_item_id).eq("batch_number",o.batch_number).maybeSingle();if(x)throw console.error("Error fetching batch:",x),x;const g=m;if(g)s=g.id;else{const y={inventory_item_id:o.inventory_item_id,batch_number:o.batch_number,expiry_date:o.expiry_date||null,quantity_on_hand:0,purchase_price_at_receipt:0},{data:_,error:b}=await Le.from("inventory_item_batches").insert(y).select("id").single();if(b||!_)throw console.error("Error creating new batch:",b),b||new Error("Failed to create new batch.");s=_.id}}else l="add";const{error:h}=await Le.rpc("adjust_inventory_item_quantity",{p_inventory_item_id:o.inventory_item_id,p_quantity_change:o.quantity,p_change_type:l,p_user_id:t,p_notes:`Urgent purchase approved: ${a.id}. Slip: ${a.slip_filename||"N/A"}`,p_inventory_item_batch_id:s===null?void 0:s});if(h)throw console.error(`Error adjusting inventory for item ${o.inventory_item_id}:`,h),await Le.from("urgent_purchases").update({status:"rejected",reviewer_notes:`Item processing failed: ${h.message}`}).eq("id",e),h}console.log(`Successfully processed items for approved urgent purchase ${e}`)},kZe=async e=>{const{data:t,error:r}=await Le.from("urgent_purchases").select(`
      id,
      slip_image_path,
      slip_filename,
      invoice_delivery_date,
      status,
      confidence_score,
      notes,
      requested_by_user_id,
      requested_at,
      reviewed_by_user_id,
      reviewed_at,
      reviewer_notes,
      updated_at,
      urgent_purchase_items (*)
    `).eq("id",e).single();if(r){if(console.error(`Error fetching urgent purchase ${e}:`,r),r.code==="PGRST116")return null;throw r}if(!t)return null;const n=t;return{...n,items:n.urgent_purchase_items||[]}},J3=async e=>{let t=Le.from("urgent_purchases").select(`
      id,
      slip_filename,
      invoice_delivery_date,
      status,
      requested_by_user_id,
      requested_at,
      updated_at,
      target_approval_role,
      reviewed_by_user_id,
      reviewed_at,
      reviewer_notes
    `).order("updated_at",{ascending:!1});e!=null&&e.status&&(t=t.eq("status",e.status)),e!=null&&e.requested_by_user_id&&(t=t.eq("requested_by_user_id",e.requested_by_user_id));const{data:r,error:n}=await t;if(n)throw console.error("Error fetching urgent purchases list:",n),n;return(r||[]).map(i=>({...i,items:[]}))},EZe=({onFileSelect:e,processing:t=!1,className:r})=>{const[n,a]=A.useState(null),[i,o]=A.useState(null);return w("div",{className:r,children:[c(nm,{onFileChange:u=>{a(u),e(u),u?(i&&URL.revokeObjectURL(i),o(URL.createObjectURL(u))):(i&&URL.revokeObjectURL(i),o(null))},accept:"image/jpeg, image/png, image/webp, application/pdf",maxSize:10,uploading:t,value:n,preview:i||void 0,onRemove:()=>{a(null),e(null),i&&URL.revokeObjectURL(i),o(null)},id:"urgent-purchase-slip-upload"}),n&&!t&&w(id,{className:"mt-4",children:[c(J7,{className:"h-4 w-4"}),c(od,{children:"File Ready"}),w(sd,{children:["Selected: ",n.name," (",(n.size/1024/1024).toFixed(2)," MB). Ready for processing."]})]}),t&&w(id,{className:"mt-4",children:[c(J7,{className:"h-4 w-4"}),c(od,{children:"Processing..."}),c(sd,{children:"The slip is being uploaded and analyzed. Please wait."})]})]})},NH="__NO_MATCH_VALUE__",CZe=je.object({inventory_item_id:je.string().min(1,"Item selection is required."),quantity:je.number().min(1,"Quantity must be at least 1."),batch_number:je.string().optional().nullable(),expiry_date:je.date().optional().nullable()}),PZe=["admin","owner","doctor"],TZe=je.object({items:je.array(CZe).min(1,"At least one item is required."),invoice_delivery_date:je.date().optional().nullable(),notes:je.string().optional().nullable(),target_approval_role:je.string().min(1,"Target approval role is required.")}),OZe=({onClose:e,onSuccess:t})=>{const{toast:r}=yn(),{user:n}=oi(),[a,i]=A.useState("slip_upload"),[o,s]=A.useState(null),[l,u]=A.useState(!1),[d,f]=A.useState(null),[h,m]=A.useState([]),[x,g]=A.useState(""),[y,_]=A.useState([]),[b,S]=A.useState([]),[C,E]=A.useState(!1),O=PZe.filter(q=>q!==(n==null?void 0:n.role)),T=dd({resolver:fd(TZe),defaultValues:{items:[{inventory_item_id:"",quantity:1,batch_number:"",expiry_date:null}],invoice_delivery_date:new Date,notes:"",target_approval_role:""}}),{fields:M,append:L,remove:z}=AS({control:T.control,name:"items"});A.useEffect(()=>{(async()=>{try{const Y=await NM();_(Y),S(Y.map(U=>({id:U.value,name:U.label,item_code:U.item_code})))}catch{r({variant:"destructive",title:"Error",description:"Could not load inventory items."})}})()},[r]);const P=q=>new Promise((Y,U)=>{const G=new FileReader;G.onload=()=>Y(G.result),G.onerror=J=>U(J),G.readAsDataURL(q)}),R=async q=>{if(s(q),f(null),m([]),q){u(!0);try{const Y=await P(q),{data:U,error:G}=await Le.functions.invoke("ocr-slip-parser",{body:{image_data_urls:[Y],file_type:q.type}});if(G)throw G;const J=U;let D=0,K=0;const Q=J.items.map(fe=>{const{bestMatch:ie,bestMatchScore:X}=t4(fe.slip_text,b);let ue;return ie&&typeof X=="number"?(ue=1-X,ue=Math.max(0,Math.min(1,ue)),D+=ue,K++):ie?(ue=.75,D+=ue,K++):ue=.1,{...fe,matched_item_id:(ie==null?void 0:ie.id)||null,matched_item_name:(ie==null?void 0:ie.name)||null,confidence:ue}}),ae=K>0?D/K:J.overall_confidence||0,se={...J,items:Q,overall_confidence:ae};f(se),m(se.items.map(fe=>({...fe}))),r({title:"Slip Processed by Server",description:"Review the extracted items below."})}catch(Y){console.error("Error processing slip with Edge Function:",Y),r({variant:"destructive",title:"Processing Error",description:Y.message||"Failed to process slip using server function."})}finally{u(!1)}}},j=(q,Y,U)=>{const G=[...h];if(Y==="matched_item_id")if(U===NH||U==="")G[q][Y]=null,G[q].matched_item_name=null;else{G[q][Y]=U;const J=b.find(D=>D.id===U);G[q].matched_item_name=(J==null?void 0:J.name)||null}else G[q][Y]=U;m(G)},V=q=>{m(Y=>Y.filter((U,G)=>G!==q))},Z=async()=>{if(!n||!n.id){r({variant:"destructive",title:"Authentication Error",description:"User not logged in."});return}if(!d||h.length===0){r({variant:"destructive",title:"No Data",description:"No items to submit."});return}if(!x){r({variant:"destructive",title:"Validation Error",description:"Please select a target approval role."});return}E(!0);try{let q,Y;if(o){const J=await bZe(o,n.id);q=J.filePath,Y=J.fileName}const U={header:{slip_image_path:q||null,slip_filename:Y||null,invoice_delivery_date:d.invoice_delivery_date?d.invoice_delivery_date:null,status:"draft",confidence_score:d.overall_confidence,notes:`Urgent purchase via slip upload. OCR Confidence: ${((d.overall_confidence||0)*100).toFixed(0)}%`,requested_by_user_id:n.id,target_approval_role:x},items:h.filter(J=>J.matched_item_id&&(J.quantity||0)>0).map(J=>({inventory_item_id:J.matched_item_id,slip_text:J.slip_text,matched_item_name:J.matched_item_name||"Unknown Item",quantity:J.quantity||0,batch_number:J.batch_number||null,expiry_date:J.expiry_date||null}))};if(U.items.length===0){r({variant:"destructive",title:"No Valid Items",description:"No items with matched inventory ID and quantity > 0."}),E(!1);return}const G=await SH(U);if(G&&G.id)await AH(G.id,n.id),r({title:"Urgent Purchase Submitted",description:`Request ID: ${G.id} submitted for approval.`}),t();else throw new Error("Failed to get ID from created entry for submission.")}catch(q){r({variant:"destructive",title:"Submission Error",description:q.message||"Failed to submit urgent purchase for approval."})}finally{E(!1)}},te=async q=>{if(!n||!n.id){r({variant:"destructive",title:"Authentication Error",description:"User not logged in."});return}E(!0);try{const Y={header:{invoice_delivery_date:q.invoice_delivery_date?q.invoice_delivery_date.toISOString().split("T")[0]:null,status:"draft",notes:q.notes||"Urgent purchase via Quick Entry.",requested_by_user_id:n.id,confidence_score:null,target_approval_role:q.target_approval_role},items:q.items.map(G=>{const J=b.find(D=>D.id===G.inventory_item_id);return{inventory_item_id:G.inventory_item_id,matched_item_name:(J==null?void 0:J.name)||"Unknown Item",quantity:G.quantity,batch_number:G.batch_number||null,expiry_date:G.expiry_date?G.expiry_date.toISOString().split("T")[0]:null,slip_text:`Quick Entry: ${J==null?void 0:J.name}`}})},U=await SH(Y);if(U&&U.id)await AH(U.id,n.id),r({title:"Quick Entry Submitted",description:`Request ID: ${U.id} submitted for approval.`}),T.reset(),t();else throw new Error("Failed to get ID from created quick entry for submission.")}catch(Y){r({variant:"destructive",title:"Quick Entry Error",description:Y.message||"Failed to submit quick entry for approval."})}finally{E(!1)}};return w(Tg,{value:a,onValueChange:q=>i(q),className:"w-full",children:[w(Og,{className:"grid w-full grid-cols-2",children:[c(dl,{value:"slip_upload",children:"Upload Slip/Invoice"}),c(dl,{value:"quick_entry",children:"Quick Manual Entry"})]}),c(Ci,{value:"slip_upload",children:w(sr,{className:"border-0 shadow-none",children:[w(yr,{children:[c(xr,{children:"Upload Delivery Slip or Invoice"}),c(_c,{children:"Upload an image (PNG, JPG). PDF support requires server-side OCR."})]}),w(mr,{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[" ",c(EZe,{onFileSelect:R,processing:l}),l&&w("div",{className:"flex items-center text-muted-foreground",children:[c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing slip..."]}),d&&!l&&w("div",{className:"mt-4",children:[c(er,{htmlFor:"targetRoleSlip",children:"Send Approval To*"}),w(Wr,{value:x,onValueChange:g,children:[c(Br,{id:"targetRoleSlip",children:c(Vr,{placeholder:"Select role for approval..."})}),c(Ur,{children:O.map(q=>c(wt,{value:q,children:q.charAt(0).toUpperCase()+q.slice(1)},q))})]}),!x&&C&&c("p",{className:"text-xs text-destructive mt-1",children:"Target approval role is required."})]}),d&&h.length>0&&!l&&w("div",{className:"space-y-3 mt-4",children:[w("h3",{className:"text-md font-semibold",children:["Review Extracted Items (Confidence: ",((d.overall_confidence||0)*100).toFixed(0),"%)"]}),d.invoice_delivery_date&&w("p",{className:"text-sm",children:["Detected Invoice/Delivery Date: ",d.invoice_delivery_date]}),h.map((q,Y)=>c(sr,{className:"p-3 space-y-2 bg-muted/50 border",children:w("div",{className:"grid grid-cols-6 gap-3 items-end",children:[w("div",{className:"col-span-6 sm:col-span-3 md:col-span-2",children:[c(er,{htmlFor:`ocr-item-name-${Y}`,className:"text-xs",children:"Slip Text"}),c(ct,{id:`ocr-item-name-${Y}`,value:q.slip_text||"",onChange:U=>j(Y,"slip_text",U.target.value),className:"h-8 text-sm"})]}),w("div",{className:"col-span-6 sm:col-span-3 md:col-span-2",children:[c(er,{htmlFor:`ocr-item-inventory-${Y}`,className:"text-xs",children:"Matched Item"}),w(Wr,{value:q.matched_item_id||"",onValueChange:U=>j(Y,"matched_item_id",U),children:[c(Br,{className:"h-8 text-sm",children:c(Vr,{placeholder:"Select item..."})}),w(Ur,{children:[c(wt,{value:NH,className:"text-sm",children:c("em",{children:"No Match / Clear Selection"})}),y.map(U=>w(wt,{value:U.value,className:"text-sm",children:[U.label," ",U.item_code?`(${U.item_code})`:""]},U.value))]})]}),q.confidence!==void 0&&q.confidence!==null&&w("p",{className:"text-xs mt-1",children:["Match Confidence: ",((q.confidence||0)*100).toFixed(0),"%"]})]}),w("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[c(er,{htmlFor:`ocr-item-qty-${Y}`,className:"text-xs",children:"Quantity"}),c(ct,{id:`ocr-item-qty-${Y}`,type:"number",value:q.quantity||0,onChange:U=>j(Y,"quantity",parseInt(U.target.value)||0),className:"h-8 text-sm"})]}),w("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[c(er,{htmlFor:`ocr-item-batch-${Y}`,className:"text-xs",children:"Batch No."}),c(ct,{id:`ocr-item-batch-${Y}`,value:q.batch_number||"",onChange:U=>j(Y,"batch_number",U.target.value),className:"h-8 text-sm"})]}),w("div",{className:"col-span-3 sm:col-span-2 md:col-span-1",children:[c(er,{htmlFor:`ocr-item-expiry-${Y}`,className:"text-xs",children:"Expiry Date"}),c(ct,{id:`ocr-item-expiry-${Y}`,type:"date",placeholder:"YYYY-MM-DD",value:q.expiry_date||"",onChange:U=>j(Y,"expiry_date",U.target.value),className:"h-8 text-sm"})]}),c("div",{className:"col-span-3 sm:col-span-2 md:col-span-1 flex items-end justify-end",children:c(Fe,{variant:"ghost",size:"icon",onClick:()=>V(Y),className:"text-destructive h-8 w-8",children:c(om,{className:"h-4 w-4"})})})]})},Y))]})]}),w("div",{className:"flex justify-end space-x-2 p-4 border-t",children:[c(Fe,{variant:"outline",onClick:e,children:"Cancel"}),w(Fe,{onClick:Z,disabled:l||C||!d||h.length===0,children:[C?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(nx,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]})]})]})}),c(Ci,{value:"quick_entry",children:w(sr,{className:"border-0 shadow-none",children:[w(yr,{children:[c(xr,{children:"Quick Manual Entry"}),c(_c,{children:"Manually add items to stock."})]}),w("form",{onSubmit:T.handleSubmit(te),children:[w(mr,{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("div",{children:[c(er,{htmlFor:"target_approval_role_quick",children:"Send Approval To*"}),c(zp,{name:"target_approval_role",control:T.control,render:({field:q,fieldState:Y})=>w(_r,{children:[w(Wr,{onValueChange:q.onChange,defaultValue:q.value,children:[c(Br,{id:"target_approval_role_quick",children:c(Vr,{placeholder:"Select role..."})}),c(Ur,{children:O.map(U=>c(wt,{value:U,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})]}),Y.error&&c("p",{className:"text-xs text-destructive mt-1",children:Y.error.message})]})})]}),w("div",{children:[c(er,{htmlFor:"quick-invoice-date",children:"Invoice/Delivery Date (Optional)"}),c(zp,{name:"invoice_delivery_date",control:T.control,render:({field:q})=>c(ct,{type:"date",value:q.value?new Date(q.value).toISOString().split("T")[0]:"",onChange:Y=>q.onChange(Y.target.value?new Date(Y.target.value):null),className:"h-9"})})]}),w("div",{children:[c(er,{htmlFor:"quick-notes",children:"Notes (Optional)"}),c(Qr,{id:"quick-notes",...T.register("notes")})]})]}),c("h4",{className:"text-md font-semibold pt-4",children:"Items"}),M.map((q,Y)=>c(sr,{className:"p-3 space-y-2 bg-muted/50",children:w("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 items-end",children:[w("div",{className:"sm:col-span-2 md:col-span-2",children:[c(er,{htmlFor:`qitem-inventory-${Y}`,className:"text-xs",children:"Inventory Item*"}),c(zp,{name:`items.${Y}.inventory_item_id`,control:T.control,render:({field:U,fieldState:G})=>w(_r,{children:[w(Wr,{value:U.value||"",onValueChange:U.onChange,children:[c(Br,{className:"h-8 text-sm",children:c(Vr,{placeholder:"Select item..."})}),c(Ur,{children:y.map(J=>w(wt,{value:J.value,className:"text-sm",children:[J.label," ",J.item_code?`(${J.item_code})`:""]},J.value))})]}),G.error&&c("p",{className:"text-xs text-destructive mt-1",children:G.error.message})]})})]}),w("div",{children:[c(er,{htmlFor:`qitem-qty-${Y}`,className:"text-xs",children:"Quantity*"}),c(zp,{name:`items.${Y}.quantity`,control:T.control,render:({field:U,fieldState:G})=>w(_r,{children:[c(ct,{id:`qitem-qty-${Y}`,type:"number",value:U.value||0,onChange:J=>U.onChange(parseInt(J.target.value,10)||0),className:"h-8 text-sm"}),G.error&&c("p",{className:"text-xs text-destructive mt-1",children:G.error.message})]})})]}),w("div",{children:[c(er,{htmlFor:`qitem-batch-${Y}`,className:"text-xs",children:"Batch No."}),c(zp,{name:`items.${Y}.batch_number`,control:T.control,render:({field:U})=>c(ct,{id:`qitem-batch-${Y}`,...U,value:U.value||"",className:"h-8 text-sm"})})]}),w("div",{children:[c(er,{htmlFor:`qitem-expiry-${Y}`,className:"text-xs",children:"Expiry Date"}),c(zp,{name:`items.${Y}.expiry_date`,control:T.control,render:({field:U})=>c(ct,{type:"date",value:U.value?new Date(U.value).toISOString().split("T")[0]:"",onChange:G=>U.onChange(G.target.value?new Date(G.target.value):null),className:"h-8 text-sm"})})]}),c("div",{className:"flex items-center justify-end",children:M.length>1&&c(Fe,{type:"button",variant:"ghost",size:"icon",onClick:()=>z(Y),className:"text-destructive h-8 w-8",children:c(om,{className:"h-4 w-4"})})})]})},q.id)),w(Fe,{type:"button",variant:"outline",size:"sm",onClick:()=>L({inventory_item_id:"",quantity:1,batch_number:"",expiry_date:null}),children:[c(Ch,{className:"mr-2 h-4 w-4"})," Add Item"]})]}),w("div",{className:"flex justify-end space-x-2 p-4 border-t",children:[c(Fe,{variant:"outline",onClick:e,children:"Cancel"}),w(Fe,{type:"submit",disabled:C,children:[C?c(Bn,{className:"mr-2 h-4 w-4 animate-spin"}):c(nx,{className:"mr-2 h-4 w-4"}),"Submit for Approval"]})]})]})]})})]})},DZe=()=>{const{toast:e}=yn(),[t,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState(!1),s=async()=>{a(!0);try{const f=await J3();r(f)}catch(f){e({variant:"destructive",title:"Error fetching urgent purchases",description:f.message||"Could not load urgent purchase entries."})}finally{a(!1)}};A.useEffect(()=>{s()},[e]);const l=()=>{o(!1),s()},u=f=>{switch(f){case"approved":return"default";case"pending_approval":return"secondary";case"rejected":return"destructive";case"draft":return"outline";default:return"outline"}},d=f=>{if(!f)return!1;const h=new Date(f);return!isNaN(h.getTime())};return w("div",{className:"container mx-auto p-4",children:[c(Aa,{heading:"Urgent Purchase Entry",text:"Create or view history of urgent stock entries made without a PO.",children:w("div",{className:"flex gap-2",children:[w(ja,{open:i,onOpenChange:o,children:[c(Hw,{asChild:!0,children:w(Fe,{children:[c(Ch,{className:"mr-2 h-4 w-4"})," Create New Urgent Entry"]})}),w(Pa,{className:"sm:max-w-[80vw] md:max-w-[70vw] lg:max-w-[60vw] xl:max-w-[50vw]",children:[" ",w(Ta,{children:[c(Oa,{children:"Create Urgent Purchase Entry"}),w(Yi,{children:[" ","Upload a slip/invoice image for OCR processing or use the Quick Manual Entry tab."]})]}),c(OZe,{onClose:()=>o(!1),onSuccess:l})]})]}),c(Fe,{variant:"outline",asChild:!0,children:c(Vi,{to:"/purchases/urgent/history",children:"View Modification History"})}),c(Fe,{variant:"outline",asChild:!0,children:c(Vi,{to:"/purchases/urgent/my-requests",children:"View My Requests"})})]})}),n?c("div",{className:"flex justify-center items-center py-10",children:c(Bn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c(sr,{className:"mt-6",children:w(mr,{className:"p-0",children:[" ",w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Delivery Date"}),c(Gt,{children:"Status"}),c(Gt,{children:"Slip Filename"}),c(Gt,{children:"Requested At"}),c(Gt,{children:"Updated At"}),c(Gt,{children:"Actions"})]})}),c(qs,{children:t.length===0?c(kn,{children:c($t,{colSpan:6,className:"text-center text-muted-foreground py-10",children:"No urgent purchase entries found."})}):t.map(f=>w(kn,{children:[c($t,{children:d(f.invoice_delivery_date)?Ut(new Date(f.invoice_delivery_date),"PP"):"N/A"}),c($t,{children:c(ed,{variant:u(f.status),children:f.status.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())})}),c($t,{children:f.slip_filename||"N/A (Quick Entry)"}),c($t,{children:d(f.requested_at)?Ut(new Date(f.requested_at),"PPpp"):"N/A"}),c($t,{children:d(f.updated_at)?Ut(new Date(f.updated_at),"PPpp"):"N/A"}),c($t,{children:c(Fe,{variant:"outline",size:"sm",asChild:!0,children:w(Vi,{to:`/purchases/urgent/${f.id}`,children:[c(kw,{className:"mr-2 h-4 w-4"})," View Details"]})})})]},f.id))})]})]})})]})},IZe=()=>{const{id:e}=iy(),{toast:t}=yn(),[r,n]=A.useState(null),[a,i]=A.useState(!1),[o,s]=A.useState(null);A.useEffect(()=>{const u=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;(async()=>{if(!e||!u.test(e)){s("Invalid or no purchase ID provided."),i(!1);return}i(!0),s(null);try{const f=await kZe(e);f?n(f):(s("Urgent purchase entry not found."),t({variant:"destructive",title:"Not Found",description:`Urgent purchase with ID ${e} not found.`}))}catch(f){s("Failed to load purchase details."),t({variant:"destructive",title:"Error",description:f.message||"Could not load urgent purchase details."})}finally{i(!1)}})()},[e,t]);const l=u=>{switch(u){case"Auto-Confirmed":case"Manually Confirmed":return"default";case"Pending Review":return"secondary";case"Rejected":case"ProcessingError":return"destructive";default:return"outline"}};return a?c("div",{className:"flex justify-center items-center py-10",children:c(Bn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o?w("div",{className:"container mx-auto p-4 text-center text-destructive",children:[c("p",{children:o}),c(Fe,{variant:"link",asChild:!0,className:"mt-4",children:w(Vi,{to:"/purchases/urgent",children:[" ",c(c5,{className:"mr-2 h-4 w-4"})," Back to Log"]})})]}):r?w("div",{className:"container mx-auto p-4 space-y-6",children:[c(Aa,{heading:"Urgent Purchase Details",text:r.requested_at?`Details for entry created on ${Ut(new Date(r.requested_at),"PPp")}`:"Details for entry",children:c(Fe,{variant:"outline",asChild:!0,children:w(Vi,{to:"/purchases/urgent",children:[" ",c(c5,{className:"mr-2 h-4 w-4"})," Back to Log"]})})}),w(sr,{children:[c(yr,{children:c(xr,{children:"Summary"})}),w(mr,{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[w("div",{children:[c("strong",{children:"ID:"})," ",r.id]}),w("div",{children:[c("strong",{children:"Status:"})," ",c(ed,{variant:l(r.status),children:r.status})]}),w("div",{children:[c("strong",{children:"Invoice/Delivery Date:"})," ",r.invoice_delivery_date?Ut(new Date(r.invoice_delivery_date),"PP"):"N/A"]}),w("div",{children:[c("strong",{children:"Slip Filename:"})," ",r.slip_filename||"N/A"]}),w("div",{children:[c("strong",{children:"OCR Confidence:"}),r.confidence_score!==null&&r.confidence_score!==void 0?` ${(r.confidence_score*100).toFixed(0)}%`:" N/A"]}),w("div",{children:[c("strong",{children:"Requested By:"})," ",r.requested_by_user_id||"Unknown"]}),w("div",{className:"md:col-span-3",children:[c("strong",{children:"Notes:"})," ",r.notes||"N/A"]})]})]}),w(sr,{children:[c(yr,{children:c(xr,{children:"Items Received"})}),c(mr,{children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Matched Item"}),c(Gt,{children:"Slip Text"}),c(Gt,{children:"Quantity"}),c(Gt,{children:"Batch No."}),c(Gt,{children:"Expiry Date"})]})}),c(qs,{children:r.items.length===0?c(kn,{children:c($t,{colSpan:5,className:"text-center text-muted-foreground py-10",children:"No items found for this entry."})}):r.items.map(u=>w(kn,{children:[c($t,{children:u.matched_item_name}),c($t,{children:u.slip_text||"N/A"}),c($t,{children:u.quantity}),c($t,{children:u.batch_number||"N/A"}),c($t,{children:u.expiry_date?Ut(new Date(u.expiry_date),"PP"):"N/A"})]},u.id))})]})})]})]}):c("div",{className:"container mx-auto p-4 text-center",children:"Urgent purchase not found."})},kH=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},RZe=()=>{const{user:e}=oi(),{toast:t}=yn(),r=bo(),[n,a]=A.useState([]),[i,o]=A.useState(!0),s=A.useCallback(async()=>{o(!0);try{const d=await J3();a(d)}catch(d){console.error("Error fetching urgent purchase history:",d),t({variant:"destructive",title:"Error",description:"Could not load urgent purchase history."})}finally{o(!1)}},[t]);A.useEffect(()=>{s()},[s]);const l=d=>{r(`/purchases/urgent/${d}`)},u=d=>d?d.substring(0,8)+"...":"N/A";return w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"Urgent Purchase Modification History",text:"View the history and status of all urgent purchase entries.",children:c(Fe,{variant:"outline",asChild:!0,children:w(Vi,{to:"/purchases/urgent",children:[c(c5,{className:"mr-2 h-4 w-4"})," Back to Urgent Purchases"]})})}),c("div",{className:"mt-6",children:i?c("p",{children:"Loading history..."}):n.length===0?w(sr,{children:[c(yr,{children:c(xr,{children:"No Urgent Purchase History Found"})}),c(mr,{children:c("p",{children:"There are no urgent purchase entries in the system yet."})})]}):w(sr,{children:[w(yr,{children:[c(xr,{children:"Urgent Purchase History"}),w(_c,{children:[n.length," record(s) found."]})]}),c(mr,{children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Request ID / Slip"}),c(Gt,{children:"Status"}),c(Gt,{children:"Requested By"}),c(Gt,{children:"Requested At"}),c(Gt,{children:"Reviewed By"}),c(Gt,{children:"Reviewed At"}),c(Gt,{children:"Reviewer Notes"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:n.map(d=>w(kn,{children:[c($t,{children:d.slip_filename||d.id.substring(0,8)+"..."}),c($t,{children:c(ed,{variant:d.status==="approved"?"default":d.status==="rejected"?"destructive":d.status==="pending_approval"?"outline":(d.status==="draft","secondary"),className:d.status==="approved"?"bg-green-100 text-green-700 border-green-300":d.status==="rejected"?"bg-red-100 text-red-700 border-red-300":d.status==="pending_approval"?"bg-yellow-100 text-yellow-700 border-yellow-300":"",children:d.status?d.status.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()):"N/A"})}),c($t,{children:u(d.requested_by_user_id)}),c($t,{children:kH(d.requested_at)?Ut(new Date(d.requested_at),"PPp"):"N/A"}),c($t,{children:u(d.reviewed_by_user_id)}),c($t,{children:kH(d.reviewed_at)?Ut(new Date(d.reviewed_at),"PPp"):"N/A"}),c($t,{className:"max-w-xs truncate",title:d.reviewer_notes||void 0,children:d.reviewer_notes||"N/A"}),c($t,{className:"text-right",children:w(Fe,{variant:"outline",size:"sm",onClick:()=>l(d.id),children:[c(kw,{className:"mr-1 h-4 w-4"})," View"]})})]},d.id))})]})})]})})]})},EH=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},MZe=()=>{const{user:e}=oi(),{toast:t}=yn(),r=bo(),[n,a]=A.useState([]),[i,o]=A.useState(!0),s=A.useCallback(async()=>{if(!(e!=null&&e.id)){o(!1),t({variant:"destructive",title:"Error",description:"User not found. Please log in."});return}o(!0);try{const u=await J3({requested_by_user_id:e.id});a(u)}catch(u){console.error("Error fetching your urgent purchase requests:",u),t({variant:"destructive",title:"Error",description:"Could not load your urgent purchase requests."})}finally{o(!1)}},[t,e]);A.useEffect(()=>{s()},[s]);const l=u=>{r(`/purchases/urgent/${u}`)};return w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"My Urgent Purchase Requests",text:"View your urgent purchase requests and their status.",children:c(Fe,{variant:"outline",asChild:!0,children:w(Vi,{to:"/purchases/urgent",children:[c(c5,{className:"mr-2 h-4 w-4"})," Back to Urgent Purchases"]})})}),c("div",{className:"mt-6",children:i?c("p",{children:"Loading your requests..."}):n.length===0?w(sr,{children:[c(yr,{children:c(xr,{children:"No Urgent Purchase Requests Found"})}),c(mr,{children:c("p",{children:"You have not made any urgent purchase requests yet."})})]}):w(sr,{children:[w(yr,{children:[c(xr,{children:"Your Urgent Purchase Requests"}),w(_c,{children:[n.length," request(s) found."]})]}),c(mr,{children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Request ID / Slip"}),c(Gt,{children:"Status"}),c(Gt,{children:"Requested At"}),c(Gt,{children:"Last Updated"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:n.map(u=>w(kn,{children:[c($t,{children:u.slip_filename||u.id.substring(0,8)+"..."}),c($t,{children:c("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${u.status==="approved"?"bg-green-100 text-green-700":u.status==="rejected"?"bg-red-100 text-red-700":u.status==="pending_approval"?"bg-yellow-100 text-yellow-700":u.status==="draft"?"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"}`,children:u.status?u.status.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()):"N/A"})}),c($t,{children:EH(u.requested_at)?Ut(new Date(u.requested_at),"PPpp"):"N/A"}),c($t,{children:EH(u.updated_at)?Ut(new Date(u.updated_at),"PPpp"):"N/A"}),c($t,{className:"text-right",children:w(Fe,{variant:"outline",size:"sm",onClick:()=>l(u.id),children:[c(kw,{className:"mr-1 h-4 w-4"})," View"]})})]},u.id))})]})})]})})]})},FZe=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],L8=new Date().getFullYear(),LZe=Array.from({length:5},(e,t)=>L8-t),jZe=()=>{const{toast:e}=yn(),[t,r]=A.useState([]),[n,a]=A.useState([]),[i,o]=A.useState(!0),[s,l]=A.useState({}),[u,d]=A.useState(L8.toString()),[f,h]=A.useState(void 0),m=A.useCallback(async()=>{var _,b;o(!0);try{const S=await QFe({startDate:(_=s.dateRange)==null?void 0:_.from,endDate:(b=s.dateRange)==null?void 0:b.to,searchTerm:s.searchTerm});r(S||[]),a(S||[])}catch(S){console.error("Failed to fetch inventory logs:",S),e({variant:"destructive",title:"Error",description:"Failed to load inventory log history."}),r([]),a([])}finally{o(!1)}},[e,s.dateRange,s.searchTerm]);A.useEffect(()=>{m()},[m]),A.useEffect(()=>{let _=[...t];if(f&&u){const b=`${u}-${f}`;_=_.filter(S=>S.created_at.startsWith(b))}if(s.searchTerm){const b=s.searchTerm.toLowerCase();_=_.filter(S=>{var L,z,P,R,j,V;const C=(z=(L=S.inventory_items)==null?void 0:L.item_name)==null?void 0:z.toLowerCase().includes(b),E=(R=(P=S.inventory_items)==null?void 0:P.item_code)==null?void 0:R.toLowerCase().includes(b),O=S.change_type.toLowerCase().includes(b),T=(j=S.user_id)==null?void 0:j.toLowerCase().includes(b),M=(V=S.notes)==null?void 0:V.toLowerCase().includes(b);return C||E||O||T||M})}a(_)},[t,f,u,s.searchTerm]);const x=(_,b)=>{l(S=>({...S,[_]:b}))},g=()=>{if(u&&f&&!s.dateRange){const _=new Date(parseInt(u),parseInt(f)-1,1),b=new Date(parseInt(u),parseInt(f),0);x("dateRange",{from:_,to:b})}else!f&&!s.dateRange&&x("dateRange",void 0)};A.useEffect(()=>{g()},[f,u]);const y=()=>{l({}),h(void 0),d(L8.toString())};return w("div",{className:"space-y-4",children:[w("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-md bg-muted/40",children:[w("div",{children:[c("label",{className:"text-sm font-medium mb-1 block",children:"Date Range"}),c(AM,{date:s.dateRange,onDateChange:_=>{x("dateRange",_),h(void 0)},className:"w-full"})]}),w("div",{children:[c("label",{className:"text-sm font-medium mb-1 block",children:"Year"}),w(Wr,{value:u,onValueChange:d,children:[c(Br,{children:c(Vr,{placeholder:"Select Year"})}),c(Ur,{children:LZe.map(_=>c(wt,{value:_.toString(),children:_},_))})]})]}),w("div",{children:[c("label",{className:"text-sm font-medium mb-1 block",children:"Month"}),w(Wr,{value:f,onValueChange:h,children:[c(Br,{children:c(Vr,{placeholder:"Select Month (All)"})}),w(Ur,{children:[c(wt,{value:"ALL_MONTHS",children:"All Months"})," ",FZe.map(_=>c(wt,{value:_.value,children:_.label},_.value))]})]})]}),w("div",{children:[c("label",{className:"text-sm font-medium mb-1 block",children:"Search Logs"}),c(ct,{placeholder:"Search by item, user, notes...",value:s.searchTerm||"",onChange:_=>x("searchTerm",_.target.value),className:"w-full"})]}),c("div",{className:"lg:col-span-4 flex justify-end",children:c(Fe,{variant:"ghost",onClick:y,children:"Clear Filters"})})]}),c(rd,{className:"h-[400px] md:h-[500px] border rounded-md",children:w(Bs,{children:[c(Us,{className:"sticky top-0 bg-card z-10",children:w(kn,{children:[c(Gt,{children:"Date"}),c(Gt,{children:"Item Name"}),c(Gt,{children:"SKU"}),c(Gt,{className:"text-right",children:"Change"}),c(Gt,{children:"Type"}),c(Gt,{children:"User"}),c(Gt,{children:"Notes"})]})}),c(qs,{children:i?c(kn,{children:c($t,{colSpan:7,className:"text-center h-32",children:"Loading log history..."})}):n.length===0?c(kn,{children:c($t,{colSpan:7,className:"text-center h-32",children:"No log entries match your filters."})}):n.map(_=>{var b,S;return w(kn,{children:[c($t,{children:Ut(new Date(_.created_at),"MMM d, yyyy HH:mm")}),c($t,{className:"font-medium",children:((b=_.inventory_items)==null?void 0:b.item_name)||"N/A"}),c($t,{children:((S=_.inventory_items)==null?void 0:S.item_code)||"N/A"}),c($t,{className:`text-right font-semibold ${_.quantity_change>0?"text-green-600":"text-red-600"}`,children:_.quantity_change>0?`+${_.quantity_change}`:_.quantity_change}),c($t,{children:_.change_type.replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase())}),c($t,{children:_.user_id?`User: ${_.user_id.substring(0,8)}...`:"System"}),c($t,{className:"text-xs max-w-xs truncate",title:_.notes||"",children:_.notes||"N/A"})]},_.id)})})]})})]})},s5=["Expired","Damaged","Lost","Stock Count Correction","Used","Other"],$Ze=je.enum(s5),Loe=["image/png","image/jpeg","image/jpg"],joe=2*1024*1024,BZe=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"],UZe=je.object({quantity_to_decrease:je.number().int().positive({message:"Quantity must be a positive number."}).optional(),reason:$Ze.optional(),notes:je.string().min(1,{message:"Notes are required for adjustment requests."}),approver_role_target:je.enum(["admin","doctor","owner"],{message:"Please select an approver role."}).optional(),photo_file:je.custom(e=>e instanceof File,"Photo proof is required.").refine(e=>!e||e.size<=joe,"Photo size should be less than 2MB.").refine(e=>Loe.includes((e==null?void 0:e.type)||""),"Only .png, .jpg, .jpeg files are accepted."),customApproverEmails:je.string().optional()}),qZe=()=>{var ue;const{toast:e}=yn(),{user:t}=oi(),r=bo(),[n,a]=A.useState([]),[i,o]=A.useState([]),[s,l]=A.useState(""),[u,d]=A.useState(null),[f,h]=A.useState(!0),[m,x]=A.useState(!1),[g,y]=A.useState(null),[_,b]=A.useState(null),[S,C]=A.useState([]),[E,O]=A.useState(!1),[T,M]=A.useState(!1),[L,z]=A.useState(null),[P,R]=A.useState(!1),[j,V]=A.useState(null),[Z,te]=A.useState(!1),[q,Y]=A.useState([]),[U,G]=A.useState(!1),J=()=>{const de=t==null?void 0:t.role,re=[{value:"admin",label:"Admin"},{value:"doctor",label:"Doctor"},{value:"owner",label:"Owner"}];if(!de)return re;switch(de){case"admin":return re.filter(ke=>ke.value==="doctor"||ke.value==="owner");case"owner":return re.filter(ke=>ke.value==="admin"||ke.value==="doctor");case"doctor":return re.filter(ke=>ke.value==="admin"||ke.value==="owner");default:return re}},D=dd({resolver:fd(UZe),defaultValues:{notes:"",photo_file:null,customApproverEmails:"",approver_role_target:void 0}}),K=tt.useCallback(async()=>{h(!0);try{const de=await TR();a(de||[]),o(de||[])}catch(de){console.error("Failed to fetch inventory items:",de),e({variant:"destructive",title:"Error",description:"Failed to load items for selection."})}finally{h(!1)}},[e]);A.useEffect(()=>{K()},[K]),A.useEffect(()=>{const de=s.toLowerCase(),re=n.filter(ke=>ke.item_name.toLowerCase().includes(de)||ke.item_code&&ke.item_code.toLowerCase().includes(de)||ke.category&&ke.category.toLowerCase().includes(de));o(re)},[s,n]);const Q=de=>{d(de),O(!1),y(null),C([]),b(null),D.reset({quantity_to_decrease:void 0,reason:"Other",notes:D.getValues("notes")||"",photo_file:D.getValues("photo_file")||null,customApproverEmails:D.getValues("customApproverEmails")||""})},ae=A.useCallback(async()=>{if(!g){b("No file selected."),C([]);return}b(null),C([]),h(!0);try{const de=new FileReader;de.onload=async re=>{var ke;try{const Re=(ke=re.target)==null?void 0:ke.result;if(!Re){b("Failed to read file data."),h(!1);return}const Pe=E8(Re,{type:"array"}),ge=Pe.SheetNames[0],Ye=Pe.Sheets[ge],Qe=af.sheet_to_json(Ye);if(Qe.length===0){b("File is empty or has no data in the first sheet."),h(!1);return}let st=n;if(st.length===0){if(await K(),n.length===0){b("Inventory items not loaded. Please try again."),h(!1);return}st=n}const Pt=[],ft=[];Qe.forEach((_e,Te)=>{const qe=_e.SKU||_e["Item Name"]||_e.sku||_e.item_name,yt=parseInt(_e["Quantity to Decrease"]||_e.quantity_to_decrease,10),vt=_e.Reason||_e.reason;if(!qe){ft.push(`Row ${Te+2}: Missing SKU or Item Name.`);return}if(isNaN(yt)||yt<=0){ft.push(`Row ${Te+2}: Invalid or missing 'Quantity to Decrease' for ${qe}. Must be a positive number.`);return}if(!vt||!s5.includes(vt)){ft.push(`Row ${Te+2}: Invalid or missing 'Reason' for ${qe}. Valid reasons: ${s5.join(", ")}.`);return}const ht=st.find(Ie=>Ie.item_code&&Ie.item_code.toLowerCase()===String(qe).toLowerCase()||Ie.item_name.toLowerCase()===String(qe).toLowerCase());if(!ht){ft.push(`Row ${Te+2}: Item '${qe}' not found in inventory.`);return}if(yt>ht.quantity){ft.push(`Row ${Te+2}: Quantity to decrease (${yt}) for '${qe}' exceeds current stock (${ht.quantity}).`);return}Pt.push({inventory_item_id:ht.id,item_name:ht.item_name,current_stock:ht.quantity,quantity_to_decrease:yt,reason:vt})}),ft.length>0?(b(`Validation errors found in the file:
- ${ft.join(`
- `)}`),C([])):(C(Pt),e({title:"File Processed",description:`${Pt.length} items ready for adjustment.`}))}catch(Re){console.error("Error parsing file content:",Re),b(`Error parsing file: ${Re.message}`)}finally{h(!1)}},de.onerror=re=>{console.error("FileReader error:",re),b("Failed to read the file."),h(!1)},de.readAsArrayBuffer(g)}catch(de){console.error("Error initiating file read:",de),b(`Error reading file: ${de.message}`),h(!1)}},[g,n,e,K]),se=async()=>{if(t!=null&&t.id){G(!0);try{const de=["pending","approved","rejected"],re=await rLe(t.id,de,20);Y(re)}catch(de){console.error("Error fetching user's adjustment requests:",de),e({variant:"destructive",title:"Error",description:"Could not load your adjustment requests."})}finally{G(!1)}}},fe=()=>{se(),te(!0)},ie=async(de,re,ke)=>{var Re;R(!0),V(null);try{const Pe=await tLe(de);if(Pe){if(z(Pe),Pe.photo_url){const ge=await jS(Pe.photo_url);V(ge)}e({title:"Request Submitted Successfully",description:re?`${ke} adjustment requests initiated. Displaying details for the first item.`:`Adjustment request for ${((Re=Pe.inventory_items)==null?void 0:Re.item_name)||"item"} submitted.`})}else e({variant:"destructive",title:"Error",description:"Could not fetch details of the submitted request."})}catch(Pe){console.error("Failed to fetch submitted request details:",Pe),e({variant:"destructive",title:"Error",description:"Failed to load request details after submission."})}finally{D.reset({notes:"",photo_file:null,customApproverEmails:"",quantity_to_decrease:void 0,reason:void 0}),d(null),O(!1),y(null),C([]),b(null),K(),R(!1)}},X=async de=>{var re,ke;x(!0);try{if(!(t!=null&&t.id)){e({variant:"destructive",title:"Error",description:"User not authenticated."});return}if(!de.photo_file){D.setError("photo_file",{type:"manual",message:"Photo proof is required."});return}if(E&&S.length>0){if(_){e({variant:"destructive",title:"Error",description:"Cannot submit, please fix errors in the uploaded file."});return}try{const Re=Nw();e({title:"Uploading Photo...",description:"Please wait."});const Pe=await bW(de.photo_file,Re);e({title:"Submitting Bulk Request...",description:`Processing ${S.length} items from file.`});const ge=((re=de.customApproverEmails)==null?void 0:re.split(",").map(Qe=>Qe.trim()).filter(Qe=>Qe.length>0))||null;let Ye=null;for(const Qe of S){const st=await _W({inventory_item_id:Qe.inventory_item_id,quantity_to_decrease:Qe.quantity_to_decrease,reason:Qe.reason,notes:de.notes,photo_url:Pe,requested_by_user_id:t.id,custom_approver_emails:ge});Ye||(Ye=st.id)}Ye?await ie(Ye,!0,S.length):(e({title:"Success",description:`Bulk adjustment process completed for ${S.length} items. No specific request to display.`}),D.reset({notes:"",photo_file:null,customApproverEmails:""}),O(!1),y(null),C([]),b(null),K())}catch(Re){console.error("Failed to submit file-based bulk adjustment request:",Re),e({variant:"destructive",title:"Bulk Adjustment Failed",description:(Re==null?void 0:Re.message)||"An unexpected error occurred during bulk submission."})}}else if(u&&de.quantity_to_decrease!==void 0&&de.reason!==void 0){if(u.quantity-de.quantity_to_decrease<0){D.setError("quantity_to_decrease",{type:"manual",message:`Decrease quantity (${de.quantity_to_decrease}) exceeds current stock (${u.quantity}) for ${u.item_name}.`});return}try{const Re=Nw();e({title:"Uploading Photo...",description:"Please wait."});const Pe=await bW(de.photo_file,Re);e({title:"Submitting Request...",description:"Saving adjustment request details."});const ge=((ke=de.customApproverEmails)==null?void 0:ke.split(",").map(Qe=>Qe.trim()).filter(Qe=>Qe.length>0))||null,Ye=await _W({inventory_item_id:u.id,quantity_to_decrease:de.quantity_to_decrease,reason:de.reason,notes:de.notes,photo_url:Pe,requested_by_user_id:t.id,custom_approver_emails:ge});await ie(Ye.id,!1)}catch(Re){console.error("Failed to submit single adjustment request:",Re),e({variant:"destructive",title:"Adjustment Failed",description:(Re==null?void 0:Re.message)||"An unexpected error occurred during single item submission."})}}else{e({variant:"destructive",title:"Error",description:"Form data is incomplete or invalid."});return}}catch(Re){console.error("Overall submission process error:",Re),e({variant:"destructive",title:"Submission Process Error",description:(Re==null?void 0:Re.message)||"An unexpected error occurred."})}finally{x(!1)}};return w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:L?"Adjustment Request Submitted":"Create Stock Adjustment Request",text:L?`Details for request ID: ${L.id}`:E?"Adjust stock via file upload.":u?`Adjusting: ${u.item_name} (Current Stock: ${u.quantity})`:"Select an item or upload a file to adjust stock."}),P?c("div",{className:"flex justify-center items-center h-64",children:c("p",{children:"Loading request details..."})}):L?w(sr,{className:"max-w-2xl mx-auto mt-6",children:[w(yr,{children:[w(xr,{className:"flex items-center",children:["Request Details",L.status==="approved"&&c(dce,{className:"ml-2 h-6 w-6 text-green-500"}),L.status==="pending"&&c(mc,{className:"ml-2 h-6 w-6 text-yellow-500"}),L.status==="rejected"&&c(mc,{className:"ml-2 h-6 w-6 text-red-500"})]}),w(_c,{children:["Item: ",((ue=L.inventory_items)==null?void 0:ue.item_name)||"N/A"]})]}),w(mr,{className:"space-y-4",children:[w("div",{children:[c("strong",{children:"Request ID:"})," ",L.id]}),w("div",{children:[c("strong",{children:"Quantity Decreased:"})," ",L.quantity_to_decrease]}),w("div",{children:[c("strong",{children:"Reason:"})," ",L.reason]}),w("div",{children:[c("strong",{children:"Notes:"})," ",L.notes]}),w("div",{children:[c("strong",{children:"Status:"}),c("span",{className:`ml-1 font-semibold ${L.status==="approved"?"text-green-600":L.status==="rejected"?"text-red-600":"text-yellow-600"}`,children:L.status.toUpperCase()})]}),w("div",{children:[c("strong",{children:"Requested At:"})," ",new Date(L.requested_at).toLocaleString()]}),w("div",{children:[c("strong",{children:"Requested By:"})," ",L.requester_profile&&`${L.requester_profile.first_name||""} ${L.requester_profile.last_name||""}`.trim()||"N/A"]}),L.reviewed_by_user_id&&w(_r,{children:[w("div",{children:[c("strong",{children:"Reviewed At:"})," ",L.reviewed_at?new Date(L.reviewed_at).toLocaleString():"N/A"]}),w("div",{children:[c("strong",{children:"Reviewer Notes:"})," ",L.reviewer_notes||"N/A"]})]}),j?w("div",{className:"mt-4",children:[c("strong",{children:"Proof Photo:"}),c("img",{src:j,alt:"Adjustment Proof",className:"rounded-md border max-w-xs max-h-64 mt-2"})]}):L.photo_url?w("div",{className:"mt-4",children:[c("strong",{children:"Proof Photo:"}),w("div",{className:"flex items-center text-muted-foreground",children:[c(YH,{className:"mr-2 h-5 w-5"}),c("span",{children:"Loading photo or photo not available..."})]})]}):null,w("div",{className:"flex justify-end space-x-3 pt-4",children:[w(Fe,{variant:"outline",onClick:()=>{z(null),V(null)},children:[c(Ch,{className:"mr-2 h-4 w-4"})," Make Another Adjustment"]}),w(Fe,{onClick:()=>r("/inventory"),children:[c(xce,{className:"mr-2 h-4 w-4"})," Go to Inventory"]})]})]})]}):!u&&!E?w(_r,{children:[w("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center my-4 space-y-2 sm:space-y-0",children:[c(ct,{placeholder:"Search items by name, SKU, or category...",value:s,onChange:de=>l(de.target.value),className:"max-w-full sm:max-w-sm"}),w("div",{className:"flex space-x-2",children:[" ",w(Fe,{onClick:()=>{O(!0),d(null),C([]),b(null);const de={notes:D.getValues("notes"),photo_file:D.getValues("photo_file"),customApproverEmails:D.getValues("customApproverEmails")};D.reset({...de})},children:[c(Y0,{className:"mr-2 h-4 w-4"})," Adjust via Bulk Upload"]}),c(Fe,{variant:"outline",onClick:()=>M(!0),children:"View Modification History"}),w(Fe,{variant:"outline",onClick:fe,children:[c(XH,{className:"mr-2 h-4 w-4"})," View My Requests"]})]})]}),c(rd,{className:"h-[calc(100vh-420px)] border rounded-md",children:w(Bs,{children:[c(Us,{className:"sticky top-0 bg-card z-10",children:w(kn,{children:[c(Gt,{children:"Item Name"}),c(Gt,{children:"SKU"}),c(Gt,{children:"Category"}),c(Gt,{className:"text-right",children:"Current Stock"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:f?c(kn,{children:c($t,{colSpan:5,className:"text-center",children:"Loading items..."})}):i.length===0?c(kn,{children:c($t,{colSpan:5,className:"text-center",children:"No items match your search or no items available."})}):i.map(de=>w(kn,{children:[c($t,{className:"font-medium",children:de.item_name}),c($t,{children:de.item_code||"N/A"}),c($t,{children:de.category||"N/A"}),c($t,{className:"text-right",children:de.quantity}),c($t,{className:"text-right",children:c(Fe,{variant:"outline",size:"sm",onClick:()=>Q(de),disabled:m,children:"Adjust"})})]},de.id))})]})})]}):w("div",{className:"max-w-2xl mx-auto mt-6",children:[E?w("div",{className:"space-y-6 p-6 border rounded-lg shadow-sm bg-card mb-6",children:[" ",w("div",{className:"flex justify-between items-center",children:[c("h3",{className:"text-lg font-semibold",children:"Bulk Adjust via File Upload"}),c(Fe,{variant:"ghost",size:"sm",onClick:()=>{O(!1),y(null),C([]),b(null);const de={notes:D.getValues("notes"),photo_file:D.getValues("photo_file"),customApproverEmails:D.getValues("customApproverEmails")};D.reset({...de})},children:"Cancel File Upload"})]}),w("div",{children:[c("label",{htmlFor:"adjustment-file-upload",className:"block text-sm font-medium text-foreground mb-1",children:"Upload Adjustment File (.xlsx, .csv)"}),c("div",{className:"flex items-center justify-center w-full",children:w("label",{htmlFor:"adjustment-file-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-card hover:bg-muted/50",children:[w("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[c(Y0,{className:"w-8 h-8 mb-4 text-muted-foreground"}),w("p",{className:"mb-2 text-sm text-muted-foreground",children:[c("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),c("p",{className:"text-xs text-muted-foreground",children:"XLSX, CSV (MAX. 5MB)"})]}),c(ct,{id:"adjustment-file-upload",type:"file",className:"hidden",accept:BZe.join(","),onChange:de=>{y(de.target.files?de.target.files[0]:null),C([]),b(null)}})]})}),g&&w("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:["Selected: ",g.name]}),_&&c("p",{className:"text-sm font-medium text-destructive mt-1",children:_}),c("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:"Expected columns: 'SKU' (or 'Item Name'), 'Quantity to Decrease', 'Reason'."})]}),c(Fe,{onClick:ae,disabled:!g||f||m,children:f?"Processing File...":"Process Uploaded File"}),S.length>0&&!_&&w("div",{className:"mt-4 p-3 bg-green-100 border border-green-300 rounded-md",children:[w("p",{className:"text-green-700 font-semibold",children:[S.length," items parsed successfully and ready for adjustment."]}),c("p",{className:"text-xs text-green-600",children:"Review common fields below and submit."})]})]}):null,c(Rh,{...D,children:w("form",{onSubmit:D.handleSubmit(X),className:"space-y-8 p-6 border rounded-lg shadow-sm bg-card",children:[!E&&u&&w("h3",{className:"text-lg font-semibold",children:["Adjusting Single Item: ",u.item_name," (Current: ",u.quantity,")"]}),!E&&u&&w(_r,{children:[c(He,{control:D.control,name:"quantity_to_decrease",render:({field:de})=>w(De,{children:[c(Oe,{children:"Quantity to Decrease"}),c(Me,{children:c(ct,{type:"number",min:"1",placeholder:"Enter positive quantity",...de,onChange:re=>de.onChange(parseInt(re.target.value,10)||0),disabled:m})}),c(Xe,{})]})}),c(He,{control:D.control,name:"reason",render:({field:de})=>w(De,{children:[c(Oe,{children:"Reason for Adjustment"}),w(Wr,{onValueChange:de.onChange,defaultValue:de.value,disabled:m,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select reason"})})}),c(Ur,{children:s5.map(re=>c(wt,{value:re,children:re.replace(/_/g," ").replace(/\b\w/g,ke=>ke.toUpperCase())},re))})]}),c(Xe,{})]})})]}),(u||E&&S.length>0&&!_)&&w(_r,{children:[c(He,{control:D.control,name:"photo_file",render:({field:de})=>w(De,{children:[c(Oe,{children:"Photo Proof (Required)"}),c(Me,{children:c(nm,{value:de.value,onFileChange:re=>de.onChange(re),accept:Loe.join(","),maxSize:joe,disabled:m})}),c(Xe,{})]})}),c(He,{control:D.control,name:"notes",render:({field:de})=>w(De,{children:[c(Oe,{children:"Notes (Required)"}),c(Me,{children:c(Qr,{placeholder:"Explain the reason for adjustment...",...de,disabled:m})}),c(Xe,{})]})}),c(He,{control:D.control,name:"approver_role_target",render:({field:de})=>w(De,{children:[c(Oe,{children:"Assign Approver To"}),w(Wr,{onValueChange:re=>{de.onChange(re);const ke=J();ke.length===1&&ke[0].value},value:de.value,disabled:m,children:[c(Me,{children:c(Br,{children:c(Vr,{placeholder:"Select role to approve this request"})})}),c(Ur,{children:J().map(re=>c(wt,{value:re.value,children:re.label},re.value))})]}),c(Xe,{}),c("p",{className:"text-xs text-muted-foreground",children:"Select the role that should approve this request."})]})}),c(He,{control:D.control,name:"customApproverEmails",render:({field:de})=>w(De,{children:[c(Oe,{children:"Custom Approver Emails (Optional)"}),c(Me,{children:c(ct,{placeholder:"e.g., approver1@example.com, approver2@example.com",...de,disabled:m})}),c(Xe,{}),c("p",{className:"text-xs text-muted-foreground",children:"Enter comma-separated email addresses if you want to notify specific people instead of the default role-based approvers."})]})}),w("div",{className:"flex justify-end space-x-3 pt-4",children:[c(Fe,{type:"button",variant:"outline",onClick:()=>{d(null),O(!1),y(null),C([]),b(null),D.reset({notes:"",photo_file:null,customApproverEmails:"",approver_role_target:void 0,quantity_to_decrease:void 0,reason:void 0})},disabled:m,children:"Cancel"}),c(Fe,{type:"submit",disabled:m||!u&&!E||E&&S.length===0,children:m?"Submitting...":"Submit Adjustment Request(s)"})]})]})]})})]}),T&&c(ja,{open:T,onOpenChange:M,children:w(Pa,{className:"sm:max-w-xl md:max-w-2xl lg:max-w-4xl xl:max-w-5xl",children:[" ",c(Ta,{children:c(Oa,{children:"Inventory Modification Log"})}),w("div",{className:"py-1 max-h-[70vh] overflow-y-auto",children:[" ",c(jZe,{})]}),w(Qi,{className:"sm:justify-start",children:[" ",c(Fe,{variant:"outline",onClick:()=>M(!1),className:"mt-2 sm:mt-0",children:"Close"})]})]})}),Z&&c(ja,{open:Z,onOpenChange:te,children:w(Pa,{className:"sm:max-w-2xl md:max-w-3xl lg:max-w-4xl",children:[w(Ta,{children:[c(Oa,{children:"My Adjustment Requests"}),c(Yi,{children:"Showing your most recent adjustment requests. Click a request to view its full details."})]}),c("div",{className:"py-4 max-h-[70vh] overflow-y-auto",children:U?c("p",{children:"Loading your requests..."}):q.length===0?c("p",{children:"You have no adjustment requests."}):w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Item"}),c(Gt,{children:"Quantity"}),c(Gt,{children:"Reason"}),c(Gt,{children:"Date"}),c(Gt,{children:"Status"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:q.map(de=>{var re;return w(kn,{children:[c($t,{children:((re=de.inventory_items)==null?void 0:re.item_name)||"N/A"}),c($t,{children:de.quantity_to_decrease}),c($t,{children:de.reason}),c($t,{children:new Date(de.requested_at).toLocaleDateString()}),c($t,{children:c("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${de.status==="approved"?"bg-green-100 text-green-700":de.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:de.status.toUpperCase()})}),c($t,{className:"text-right",children:c(Fe,{variant:"outline",size:"sm",onClick:()=>{z(de),de.photo_url?jS(de.photo_url).then(V):V(null),te(!1)},children:"View Details"})})]},de.id)})})]})}),c(Qi,{children:c(Fe,{variant:"outline",onClick:()=>te(!1),children:"Close"})})]})})]})},zZe=()=>{const{toast:e}=yn(),{user:t}=oi(),r=bo(),[n,a]=A.useState([]),[i,o]=A.useState(!0),[s,l]=A.useState(!1),[u,d]=A.useState({}),[f,h]=A.useState(""),m=A.useCallback(async()=>{o(!0);try{const y=await TR();a(y||[]);const _={};(y||[]).forEach(b=>{_[b.id]={physicalCount:void 0,notes:""}}),d(_)}catch(y){console.error("Failed to fetch inventory items:",y),e({variant:"destructive",title:"Error",description:"Failed to load items for stock take."})}finally{o(!1)}},[e]);A.useEffect(()=>{m()},[m]);const x=(y,_,b)=>{d(S=>({...S,[y]:{...S[y],[_]:_==="physicalCount"?b===""?void 0:parseInt(String(b),10):String(b)}}))},g=async()=>{if(!(t!=null&&t.id)){e({variant:"destructive",title:"Error",description:"User not authenticated."});return}l(!0);const y=[];let _=0;if(n.forEach(b=>{const S=u[b.id];if(S&&S.physicalCount!==void 0&&S.physicalCount>=0){_++;const C={inventory_item_id:b.id,system_quantity_at_count:b.quantity,physical_counted_quantity:S.physicalCount,counted_by_user_id:t.id,notes:S.notes||f||null};y.push(aLe(C))}}),_===0){e({variant:"default",title:"No Data",description:"No physical counts entered to submit."}),l(!1);return}try{await Promise.all(y),e({title:"Success",description:`${_} stock take entries recorded successfully.`}),r("/inventory"),m(),h("")}catch(b){console.error("Failed to record one or more stock takes:",b),e({variant:"destructive",title:"Stock Take Submission Failed",description:"An error occurred while saving some entries. Please check and try again."})}finally{l(!1)}};return i?c("div",{className:"p-4",children:"Loading inventory items..."}):w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"Perform Stock Take",text:"Enter the physical count for each item. Only items with a physical count will be submitted."}),w("div",{className:"mt-6",children:[c("div",{className:"mb-4",children:c(Qr,{placeholder:"Global notes for this stock take session (optional)",value:f,onChange:y=>h(y.target.value),className:"max-w-xl",disabled:s})}),w(rd,{className:"h-[calc(100vh-300px)] border rounded-md",children:[" ",w(Bs,{children:[c(Us,{className:"sticky top-0 bg-background z-10",children:w(kn,{children:[c(Gt,{className:"w-[300px]",children:"Item Name"}),c(Gt,{className:"text-right",children:"System Qty"}),c(Gt,{className:"w-[150px] text-right",children:"Physical Count"}),c(Gt,{className:"w-[250px]",children:"Item Notes (Optional)"})]})}),c(qs,{children:n.length===0&&!i?c(kn,{children:c($t,{colSpan:4,className:"text-center",children:"No inventory items found."})}):n.map(y=>{var _,b;return w(kn,{children:[c($t,{className:"font-medium",children:y.item_name}),c($t,{className:"text-right",children:y.quantity}),c($t,{className:"text-right",children:c(ct,{type:"number",min:"0",placeholder:"Count",value:((_=u[y.id])==null?void 0:_.physicalCount)??"",onChange:S=>x(y.id,"physicalCount",S.target.value),className:"text-right",disabled:s})}),c($t,{children:c(ct,{type:"text",placeholder:"Notes for this item",value:((b=u[y.id])==null?void 0:b.notes)??"",onChange:S=>x(y.id,"notes",S.target.value),disabled:s})})]},y.id)})})]})]}),w("div",{className:"mt-6 flex justify-end space-x-3",children:[c(Fe,{type:"button",variant:"outline",onClick:()=>r("/inventory"),disabled:s,children:"Cancel"}),c(Fe,{onClick:g,disabled:s||i,children:s?"Submitting Stock Take...":"Submit Stock Take"})]})]})]})},WZe=({allowedRoles:e,children:t,fallback:r})=>{const{user:n,loading:a}=oi();if(a)return c("div",{className:"flex justify-center items-center h-screen",children:"Loading authentication status..."});if(!n)return c(_r,{children:r||c("div",{className:"flex justify-center items-center h-screen",children:"Access Denied: Not Logged In."})});const i=n.role;return!i||!e.includes(i)?c(_r,{children:r||c("div",{className:"flex justify-center items-center h-screen",children:"Access Denied: You do not have the required permissions."})}):c(_r,{children:t})},LT=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())},VZe=()=>{var Y,U,G,J;const{user:e}=oi(),{toast:t}=yn(),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,s]=A.useState(null),[l,u]=A.useState(null),[d,f]=A.useState([]),[h,m]=A.useState(!0),[x,g]=A.useState(null),[y,_]=A.useState(!1),[b,S]=A.useState(null),[C,E]=A.useState(""),[O,T]=A.useState(!1),[M,L]=A.useState(null),z=A.useCallback(async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.role)){i(!1),e!=null&&e.id&&!(e!=null&&e.role)&&t({variant:"destructive",title:"Error",description:"User role not found for adjustments."});return}i(!0);try{const D=await eLe(e.id,e.role);n(D)}catch(D){console.error("Error fetching pending adjustment requests:",D),t({variant:"destructive",title:"Error",description:"Could not load pending adjustment requests."})}finally{i(!1)}},[t,e]),P=A.useCallback(async()=>{if(!(e!=null&&e.id)||!(e!=null&&e.role)){m(!1),e!=null&&e.id&&!(e!=null&&e.role)&&t({variant:"destructive",title:"Error",description:"User role not found for urgent purchases."});return}m(!0);try{const K=(await J3({status:"pending_approval"})).filter(Q=>Q.requested_by_user_id!==e.id);f(K)}catch(D){console.error("Error fetching pending urgent purchases:",D),t({variant:"destructive",title:"Error",description:"Could not load pending urgent purchases."})}finally{m(!1)}},[t,e]);A.useEffect(()=>{e&&(z(),P())},[z,P,e]);const R=async(D,K)=>{if(s(D),L("adjustment"),S(K),_(!0),E(""),u(null),D.photo_url)try{const Q=await jS(D.photo_url);u(Q)}catch(Q){console.error("Error fetching photo preview for adjustment:",Q),t({variant:"destructive",title:"Error",description:"Could not load adjustment proof photo."})}},j=async(D,K)=>{g(D),L("urgent_purchase"),S(K),_(!0),E("")},V=async()=>{if(!(!b||!(e!=null&&e.id))&&!(M==="adjustment"&&!o)&&!(M==="urgent_purchase"&&!x)){T(!0);try{if(M==="adjustment"){const D=o;b==="approve"?(await Zne(D.id,e.id,C),t({title:"Success",description:`Adjustment Request ${D.id.substring(0,8)} approved.`})):(await Jne(D.id,e.id,C),t({title:"Success",description:`Adjustment Request ${D.id.substring(0,8)} rejected.`})),z()}else if(M==="urgent_purchase"){const D=x;if(b==="approve")await SZe(D.id,e.id,C),t({title:"Success",description:`Urgent Purchase ${D.id.substring(0,8)} approved.`});else{if(!C.trim()&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")){t({variant:"destructive",title:"Validation Error",description:"Reviewer notes are required to reject."}),T(!1);return}await AZe(D.id,e.id,C),t({title:"Success",description:`Urgent Purchase ${D.id.substring(0,8)} rejected.`})}P()}_(!1),s(null),g(null),L(null)}catch(D){console.error(`Error ${b}ing request:`,D),t({variant:"destructive",title:"Error",description:D.message||`Failed to ${b} request.`})}finally{T(!1)}}},Z=["admin","owner","doctor"],te=()=>c(_r,{children:a?c("p",{children:"Loading adjustment requests..."}):r.length===0?w(sr,{children:[c(yr,{children:c(xr,{children:"No Pending Adjustment Requests"})}),c(mr,{children:c("p",{children:"There are currently no inventory adjustment requests awaiting approval."})})]}):w(sr,{children:[w(yr,{children:[c(xr,{children:"Pending Adjustment Requests"}),w(_c,{children:[r.length," request(s) awaiting review."]})]}),c(mr,{children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Item Name"}),c(Gt,{children:"Quantity"}),c(Gt,{children:"Reason"}),c(Gt,{children:"Requested By"}),c(Gt,{children:"Date"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:r.map(D=>{var K,Q,ae;return w(kn,{children:[c($t,{children:((K=D.inventory_items)==null?void 0:K.item_name)||"N/A"}),c($t,{children:D.quantity_to_decrease}),c($t,{children:D.reason}),w($t,{children:[((Q=D.requester_profile)==null?void 0:Q.first_name)||""," ",((ae=D.requester_profile)==null?void 0:ae.last_name)||""]}),c($t,{children:new Date(D.requested_at).toLocaleDateString()}),w($t,{className:"text-right space-x-2",children:[w(Fe,{variant:"outline",size:"sm",onClick:()=>R(D,"approve"),children:[c(eF,{className:"mr-1 h-4 w-4"})," Approve"]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&w(Fe,{variant:"outline",size:"sm",onClick:()=>R(D,"reject"),children:[c(Q7,{className:"mr-1 h-4 w-4"})," Reject"]})]})]},D.id)})})]})})]})}),q=()=>c(_r,{children:h?c("p",{children:"Loading urgent purchase requests..."}):d.length===0?w(sr,{children:[c(yr,{children:c(xr,{children:"No Pending Urgent Purchases"})}),c(mr,{children:c("p",{children:"There are currently no urgent purchase requests awaiting approval."})})]}):w(sr,{children:[w(yr,{children:[c(xr,{children:"Pending Urgent Purchase Requests"}),w(_c,{children:[d.length," request(s) awaiting review."]})]}),c(mr,{children:w(Bs,{children:[c(Us,{children:w(kn,{children:[c(Gt,{children:"Slip/Notes"}),c(Gt,{children:"Items"}),c(Gt,{children:"Requested By (ID)"})," ",c(Gt,{children:"Targeted Role"}),c(Gt,{children:"Date"}),c(Gt,{className:"text-right",children:"Actions"})]})}),c(qs,{children:d.map(D=>{var K;return w(kn,{children:[w($t,{children:[D.slip_filename||((K=D.notes)==null?void 0:K.substring(0,30))||"N/A",D.notes&&D.notes.length>30?"...":""]}),w($t,{children:[D.items.length," item(s)"]}),w($t,{className:"font-mono text-xs",children:[D.requested_by_user_id.substring(0,8),"..."]}),c($t,{children:D.target_approval_role?D.target_approval_role.charAt(0).toUpperCase()+D.target_approval_role.slice(1):"N/A"}),c($t,{children:LT(D.requested_at)?Ut(new Date(D.requested_at),"PP"):"N/A"}),w($t,{className:"text-right space-x-2",children:[w(Fe,{variant:"outline",size:"sm",onClick:()=>j(D,"approve"),children:[c(eF,{className:"mr-1 h-4 w-4"})," Approve"]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&w(Fe,{variant:"outline",size:"sm",onClick:()=>j(D,"reject"),children:[c(Q7,{className:"mr-1 h-4 w-4"})," Reject"]})]})]},D.id)})})]})})]})});return w(WZe,{allowedRoles:Z,children:[w("div",{className:"container mx-auto p-4 md:p-6",children:[c(Aa,{heading:"Approval Requests",text:"Review and process pending requests."}),w(Tg,{defaultValue:"adjustments",className:"w-full mt-4",children:[w(Og,{className:"grid w-full grid-cols-2",children:[c(dl,{value:"adjustments",children:"Inventory Adjustments"}),c(dl,{value:"urgent_purchases",children:"Urgent Purchases"})]}),c(Ci,{value:"adjustments",className:"mt-4",children:te()}),c(Ci,{value:"urgent_purchases",className:"mt-4",children:q()})]})]}),y&&c(ja,{open:y,onOpenChange:D=>{_(D),D||(s(null),g(null),L(null))},children:w(Pa,{className:"sm:max-w-lg",children:[w(Ta,{children:[w(Oa,{children:[b==="approve"?"Approve":"Reject"," ",M==="adjustment"?"Adjustment":"Urgent Purchase"," Request"]}),M==="adjustment"&&o&&w(Yi,{children:["Review details for request ID: ",o.id.substring(0,8),"... for item: ",((Y=o.inventory_items)==null?void 0:Y.item_name)||"N/A"]}),M==="urgent_purchase"&&x&&w(Yi,{children:["Review details for urgent purchase ID: ",x.id.substring(0,8),"...",x.slip_filename?` (Slip: ${x.slip_filename})`:""]})]}),w("div",{className:"py-4 space-y-3 max-h-[60vh] overflow-y-auto",children:[M==="adjustment"&&o&&w(_r,{children:[w("p",{children:[c("strong",{children:"Item:"})," ",(U=o.inventory_items)==null?void 0:U.item_name]}),w("p",{children:[c("strong",{children:"Quantity to Decrease:"})," ",o.quantity_to_decrease]}),w("p",{children:[c("strong",{children:"Reason:"})," ",o.reason]}),w("p",{children:[c("strong",{children:"Notes by Requester:"})," ",o.notes]}),w("p",{children:[c("strong",{children:"Requested By:"})," ",((G=o.requester_profile)==null?void 0:G.first_name)||""," ",((J=o.requester_profile)==null?void 0:J.last_name)||""]}),w("p",{children:[c("strong",{children:"Requested At:"})," ",new Date(o.requested_at).toLocaleString()]}),o.photo_url&&w("div",{children:[c("strong",{children:"Proof Photo:"}),l?c("img",{src:l,alt:"Adjustment Proof",className:"rounded-md border max-w-xs max-h-64 mt-1"}):c("p",{className:"text-sm text-muted-foreground",children:"Loading photo..."})]})]}),M==="urgent_purchase"&&x&&w(_r,{children:[w("p",{children:[c("strong",{children:"Requested By (ID):"})," ",x.requested_by_user_id]})," ",w("p",{children:[c("strong",{children:"Requested At:"})," ",LT(x.requested_at)?Ut(new Date(x.requested_at),"PPpp"):"N/A"]}),w("p",{children:[c("strong",{children:"Targeted For Role:"})," ",x.target_approval_role?x.target_approval_role.charAt(0).toUpperCase()+x.target_approval_role.slice(1):"N/A"]}),x.slip_filename&&w("p",{children:[c("strong",{children:"Slip Filename:"})," ",x.slip_filename]}),x.invoice_delivery_date&&w("p",{children:[c("strong",{children:"Invoice/Delivery Date:"})," ",LT(x.invoice_delivery_date)?Ut(new Date(x.invoice_delivery_date),"PP"):"N/A"]}),w("p",{children:[c("strong",{children:"Notes:"})," ",x.notes||"N/A"]}),c("p",{children:c("strong",{children:"Items:"})}),c("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:x.items.map(D=>w("li",{children:[D.matched_item_name," (Qty: ",D.quantity,")",D.batch_number&&` - Batch: ${D.batch_number}`,D.expiry_date&&` - Expires: ${new Date(D.expiry_date).toLocaleDateString()}`]},D.id||D.inventory_item_id))})]}),w("div",{children:[w("label",{htmlFor:"reviewerNotes",className:"block text-sm font-medium",children:["Reviewer Notes ",b==="approve"?"(Optional)":"(Required for Reject)",":"]}),c(Qr,{id:"reviewerNotes",value:C,onChange:D=>E(D.target.value),placeholder:"Add any notes for this decision...",className:"mt-1",rows:3})]})]}),w(Qi,{children:[c(Fe,{variant:"outline",onClick:()=>_(!1),disabled:O,children:"Cancel"}),c(Fe,{onClick:V,disabled:O||b==="reject"&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")&&!C.trim(),variant:b==="reject"&&((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="owner")?"destructive":"default",children:O?"Submitting...":`Confirm ${b==="approve"?"Approve":"Reject"}`})]})]})})]})},HZe=()=>{const{requestId:e,approvalToken:t}=iy(),r=bo(),{user:n}=oi(),{toast:a}=yn(),[i,o]=A.useState(null),[s,l]=A.useState(null),[u,d]=A.useState(!0),[f,h]=A.useState(!1),[m,x]=A.useState(""),[g,y]=A.useState(null),_=A.useCallback(async()=>{if(!e||!t){y("Request ID or approval token is missing."),d(!1);return}d(!0);try{const C=await nLe(e,t);C?(o(C),C.photo_url&&jS(C.photo_url).then(E=>l(E)).catch(E=>console.error("Failed to load photo for approval page",E))):y("Invalid or expired approval link, or request not found/pending.")}catch(C){console.error("Error fetching request for approval:",C),y(C.message||"Could not load request details.")}finally{d(!1)}},[e,t]);A.useEffect(()=>{_()},[_]);const b=async()=>{if(!(!(n!=null&&n.id)||!i)){if(n.id===i.requested_by_user_id){a({variant:"destructive",title:"Action Denied",description:"You cannot approve your own request."});return}h(!0);try{await Zne(i.id,n.id,m),a({title:"Success",description:"Request approved and stock updated."}),r("/inventory/adjustment-requests")}catch(C){a({variant:"destructive",title:"Approval Failed",description:C.message})}finally{h(!1)}}},S=async()=>{if(!(!(n!=null&&n.id)||!i)){if(n.id===i.requested_by_user_id){a({variant:"destructive",title:"Action Denied",description:"You cannot reject your own request."});return}if(!m.trim()){a({variant:"destructive",title:"Validation Error",description:"Reviewer notes are required for rejection."});return}h(!0);try{await Jne(i.id,n.id,m),a({title:"Success",description:"Request rejected."}),r("/inventory/adjustment-requests")}catch(C){a({variant:"destructive",title:"Rejection Failed",description:C.message})}finally{h(!1)}}};return u?c("div",{className:"container mx-auto p-6 flex justify-center items-center min-h-[calc(100vh-200px)]",children:c(Bn,{className:"h-12 w-12 animate-spin text-primary"})}):g?w("div",{className:"container mx-auto p-6 text-center",children:[c(mc,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),c("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied or Error"}),c("p",{className:"text-red-500 mt-2",children:g}),c(Fe,{onClick:()=>r("/"),className:"mt-6",children:"Go to Dashboard"})]}):i?w("div",{className:"container mx-auto p-4 md:p-6 max-w-2xl",children:[c(Aa,{heading:"Approve Inventory Adjustment",text:`Review and process adjustment request ID: ...${i.id.slice(-8)}`}),w(sr,{className:"mt-6",children:[w(yr,{children:[w(xr,{children:["Item: ",i.item_name||"N/A"]}),w(_c,{children:["Requested by: ",i.requester_name||i.requested_by_user_id," on ",new Date(i.requested_at).toLocaleDateString()]})]}),w(mr,{className:"space-y-4",children:[w("p",{children:[c("strong",{children:"Quantity to Decrease:"})," ",i.quantity_to_decrease]}),w("p",{children:[c("strong",{children:"Reason:"})," ",i.reason]}),w("p",{children:[c("strong",{children:"Requester Notes:"})," ",i.notes]}),i.photo_url&&w("div",{children:[c("strong",{children:"Photo Proof:"}),c("br",{}),s?c("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:c("img",{src:s,alt:"Adjustment Proof",className:"max-w-full md:max-w-md border rounded mt-1"})}):c("p",{children:"Loading photo..."})]}),w("div",{className:"space-y-1",children:[c("label",{htmlFor:"reviewerNotes",className:"text-sm font-medium",children:"Your Reviewer Notes:"}),c(Qr,{id:"reviewerNotes",value:m,onChange:C=>x(C.target.value),placeholder:"Add notes for approval or rejection (required for rejection)",rows:3,disabled:f||i.status!=="pending"})]})]}),i.status==="pending"&&w(Z0,{className:"flex justify-end space-x-2",children:[w(Fe,{variant:"outline",onClick:S,disabled:f||(n==null?void 0:n.id)===i.requested_by_user_id,className:"text-red-600 border-red-600 hover:bg-red-50 disabled:opacity-50",title:(n==null?void 0:n.id)===i.requested_by_user_id?"Cannot reject your own request":"",children:[c(Bce,{className:"mr-2 h-4 w-4"})," Reject"]}),w(Fe,{onClick:b,disabled:f||(n==null?void 0:n.id)===i.requested_by_user_id,className:"bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",title:(n==null?void 0:n.id)===i.requested_by_user_id?"Cannot approve your own request":"",children:[c(nx,{className:"mr-2 h-4 w-4"})," Approve"]})]}),i.status!=="pending"&&c(Z0,{children:w("p",{className:"text-sm text-muted-foreground",children:["This request has already been processed (Status: ",i.status,")."]})})]})]}):c("div",{className:"container mx-auto p-6 text-center",children:"Request not found."})};function GZe(){const[e]=BH(),t=e.get("q"),[r,n]=A.useState([]),[a,i]=A.useState(!1),[o,s]=A.useState(null);return A.useEffect(()=>{t?(console.log(`Fetching patient search results for: ${t}`),i(!0),s(null),Vt.patients.search(t).then(l=>{n(l||[]),i(!1)}).catch(l=>{console.error("Patient search failed:",l),s(l.message||"Failed to fetch patient search results."),n([]),i(!1)})):(n([]),s(null))},[t]),w("div",{className:"space-y-6",children:[c(Aa,{heading:`Search Results for "${t||""}"`,text:a?"Searching patients...":o?"Error fetching results":`Found ${r.length} patient results.`}),a?c("div",{className:"flex justify-center items-center py-10",children:c(Bn,{className:"w-8 h-8 animate-spin text-primary"})}):o?c("div",{className:"text-center text-red-600 py-10",children:w("p",{children:["Error: ",o]})}):w("div",{className:"space-y-4",children:[r.length>0?r.map(l=>w("div",{className:"border p-4 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[w("h3",{className:"text-lg font-semibold",children:[l.first_name," ",l.last_name]}),l.email&&w("p",{className:"text-sm text-muted-foreground",children:["Email: ",l.email]}),l.phone&&w("p",{className:"text-sm text-muted-foreground",children:["Phone: ",l.phone]}),c(Vi,{to:`/patients/${l.id}`,className:"text-blue-600 hover:underline text-sm mt-1 inline-block",children:"View Details"})]},l.id)):!a&&t&&w("p",{className:"text-center text-muted-foreground",children:['No patient results found for "',t,'".']}),!t&&c("p",{className:"text-center text-muted-foreground",children:"Please enter a search term in the header."})]})]})}const KZe=({children:e})=>{const{user:t,loading:r}=oi();return r?w("div",{className:"p-4",children:[c(jl,{className:"h-8 w-1/4 mb-4"}),c(jl,{className:"h-4 w-full mb-2"}),c(jl,{className:"h-4 w-3/4"})]}):!t||t.role!=="admin"&&t.role!=="owner"?(console.warn(`Access denied: User role '${t==null?void 0:t.role}' is not 'admin' or 'owner'.`),c(BT,{to:"/",replace:!0})):e?c(_r,{children:e}):c($H,{})};var PM="ToastProvider",[TM,YZe,XZe]=Cw("Toast"),[$oe,VJe]=eo("Toast",[XZe]),[ZZe,Q3]=$oe(PM),Boe=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[s,l]=A.useState(null),[u,d]=A.useState(0),f=A.useRef(!1),h=A.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${PM}\`. Expected non-empty \`string\`.`),c(TM.Provider,{scope:t,children:c(ZZe,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:s,onViewportChange:l,onToastAdd:A.useCallback(()=>d(m=>m+1),[]),onToastRemove:A.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};Boe.displayName=PM;var Uoe="ToastViewport",JZe=["F8"],j8="toast.viewportPause",$8="toast.viewportResume",qoe=A.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=JZe,label:a="Notifications ({hotkey})",...i}=e,o=Q3(Uoe,r),s=YZe(r),l=A.useRef(null),u=A.useRef(null),d=A.useRef(null),f=A.useRef(null),h=Hr(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;A.useEffect(()=>{const y=_=>{var S;n.length!==0&&n.every(C=>_[C]||_.code===C)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),A.useEffect(()=>{const y=l.current,_=f.current;if(x&&y&&_){const b=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(j8);_.dispatchEvent(O),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent($8);_.dispatchEvent(O),o.isClosePausedRef.current=!1}},C=O=>{!y.contains(O.relatedTarget)&&S()},E=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",b),y.addEventListener("focusout",C),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",E),window.addEventListener("blur",b),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",E),window.removeEventListener("blur",b),window.removeEventListener("focus",S)}}},[x,o.isClosePausedRef]);const g=A.useCallback(({tabbingDirection:y})=>{const b=s().map(S=>{const C=S.ref.current,E=[C,...dJe(C)];return y==="forwards"?E:E.reverse()});return(y==="forwards"?b.reverse():b).flat()},[s]);return A.useEffect(()=>{const y=f.current;if(y){const _=b=>{var E,O,T;const S=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!S){const M=document.activeElement,L=b.shiftKey;if(b.target===y&&L){(E=u.current)==null||E.focus();return}const R=g({tabbingDirection:L?"backwards":"forwards"}),j=R.findIndex(V=>V===M);jT(R.slice(j+1))?b.preventDefault():L?(O=u.current)==null||O.focus():(T=d.current)==null||T.focus()}};return y.addEventListener("keydown",_),()=>y.removeEventListener("keydown",_)}},[s,g]),w(Bue,{ref:l,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&c(B8,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});jT(y)}}),c(TM.Slot,{scope:r,children:c(pr.ol,{tabIndex:-1,...i,ref:h})}),x&&c(B8,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});jT(y)}})]})});qoe.displayName=Uoe;var zoe="ToastFocusProxy",B8=A.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Q3(zoe,r);return c(O4,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const s=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(s))&&n()}})});B8.displayName=zoe;var c_="Toast",QZe="toast.swipeStart",eJe="toast.swipeMove",tJe="toast.swipeCancel",rJe="toast.swipeEnd",Woe=A.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[s,l]=hl({prop:n,defaultProp:a??!0,onChange:i,caller:c_});return c(cs,{present:r||s,children:c(iJe,{open:s,...o,ref:t,onClose:()=>l(!1),onPause:Pi(e.onPause),onResume:Pi(e.onResume),onSwipeStart:Wt(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Wt(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Wt(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Wt(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});Woe.displayName=c_;var[nJe,aJe]=$oe(c_,{onClose(){}}),iJe=A.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:s,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...x}=e,g=Q3(c_,r),[y,_]=A.useState(null),b=Hr(t,V=>_(V)),S=A.useRef(null),C=A.useRef(null),E=a||g.duration,O=A.useRef(0),T=A.useRef(E),M=A.useRef(0),{onToastAdd:L,onToastRemove:z}=g,P=Pi(()=>{var Z;(y==null?void 0:y.contains(document.activeElement))&&((Z=g.viewport)==null||Z.focus()),o()}),R=A.useCallback(V=>{!V||V===1/0||(window.clearTimeout(M.current),O.current=new Date().getTime(),M.current=window.setTimeout(P,V))},[P]);A.useEffect(()=>{const V=g.viewport;if(V){const Z=()=>{R(T.current),u==null||u()},te=()=>{const q=new Date().getTime()-O.current;T.current=T.current-q,window.clearTimeout(M.current),l==null||l()};return V.addEventListener(j8,te),V.addEventListener($8,Z),()=>{V.removeEventListener(j8,te),V.removeEventListener($8,Z)}}},[g.viewport,E,l,u,R]),A.useEffect(()=>{i&&!g.isClosePausedRef.current&&R(E)},[i,E,g.isClosePausedRef,R]),A.useEffect(()=>(L(),()=>z()),[L,z]);const j=A.useMemo(()=>y?Zoe(y):null,[y]);return g.viewport?w(_r,{children:[j&&c(oJe,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),c(nJe,{scope:r,onClose:P,children:ny.createPortal(c(TM.ItemSlot,{scope:r,children:c($ue,{asChild:!0,onEscapeKeyDown:Wt(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c(pr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Wt(e.onKeyDown,V=>{V.key==="Escape"&&(s==null||s(V.nativeEvent),V.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Wt(e.onPointerDown,V=>{V.button===0&&(S.current={x:V.clientX,y:V.clientY})}),onPointerMove:Wt(e.onPointerMove,V=>{if(!S.current)return;const Z=V.clientX-S.current.x,te=V.clientY-S.current.y,q=!!C.current,Y=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,G=Y?U(0,Z):0,J=Y?0:U(0,te),D=V.pointerType==="touch"?10:2,K={x:G,y:J},Q={originalEvent:V,delta:K};q?(C.current=K,Ub(eJe,f,Q,{discrete:!1})):CH(K,g.swipeDirection,D)?(C.current=K,Ub(QZe,d,Q,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(Z)>D||Math.abs(te)>D)&&(S.current=null)}),onPointerUp:Wt(e.onPointerUp,V=>{const Z=C.current,te=V.target;if(te.hasPointerCapture(V.pointerId)&&te.releasePointerCapture(V.pointerId),C.current=null,S.current=null,Z){const q=V.currentTarget,Y={originalEvent:V,delta:Z};CH(Z,g.swipeDirection,g.swipeThreshold)?Ub(rJe,m,Y,{discrete:!0}):Ub(tJe,h,Y,{discrete:!0}),q.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),oJe=e=>{const{__scopeToast:t,children:r,...n}=e,a=Q3(c_,t),[i,o]=A.useState(!1),[s,l]=A.useState(!1);return cJe(()=>o(!0)),A.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),s?null:c(cy,{asChild:!0,children:c(O4,{...n,children:i&&w(_r,{children:[a.label," ",r]})})})},sJe="ToastTitle",Voe=A.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return c(pr.div,{...n,ref:t})});Voe.displayName=sJe;var lJe="ToastDescription",Hoe=A.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return c(pr.div,{...n,ref:t})});Hoe.displayName=lJe;var Goe="ToastAction",Koe=A.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?c(Xoe,{altText:r,asChild:!0,children:c(OM,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Goe}\`. Expected non-empty \`string\`.`),null)});Koe.displayName=Goe;var Yoe="ToastClose",OM=A.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=aJe(Yoe,r);return c(Xoe,{asChild:!0,children:c(pr.button,{type:"button",...n,ref:t,onClick:Wt(e.onClick,a.onClose)})})});OM.displayName=Yoe;var Xoe=A.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return c(pr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Zoe(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),uJe(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Zoe(n))}}),t}function Ub(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Z8(a,i):a.dispatchEvent(i)}var CH=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function cJe(e=()=>{}){const t=Pi(e);ii(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function uJe(e){return e.nodeType===e.ELEMENT_NODE}function dJe(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function jT(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var fJe=Boe,Joe=qoe,Qoe=Woe,ese=Voe,tse=Hoe,rse=Koe,nse=OM;const hJe=fJe,ase=A.forwardRef(({className:e,...t},r)=>c(Joe,{ref:r,className:Rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ase.displayName=Joe.displayName;const pJe=Ew("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",warning:"warning group border-yellow-200 bg-yellow-50 text-yellow-800 dark:border-yellow-700/50 dark:bg-yellow-900/30 dark:text-yellow-300"}},defaultVariants:{variant:"default"}}),ise=A.forwardRef(({className:e,variant:t,...r},n)=>c(Qoe,{ref:n,className:Rt(pJe({variant:t}),e),...r}));ise.displayName=Qoe.displayName;const mJe=A.forwardRef(({className:e,...t},r)=>c(rse,{ref:r,className:Rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));mJe.displayName=rse.displayName;const ose=A.forwardRef(({className:e,...t},r)=>c(nse,{ref:r,className:Rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c(gh,{className:"h-4 w-4"})}));ose.displayName=nse.displayName;const sse=A.forwardRef(({className:e,...t},r)=>c(ese,{ref:r,className:Rt("text-sm font-semibold",e),...t}));sse.displayName=ese.displayName;const lse=A.forwardRef(({className:e,...t},r)=>c(tse,{ref:r,className:Rt("text-sm opacity-90",e),...t}));lse.displayName=tse.displayName;function gJe(){const{toasts:e}=yn();return w(hJe,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return w(ise,{...i,children:[w("div",{className:"grid gap-1",children:[r&&c(sse,{children:r}),n&&c(lse,{children:n})]}),a,c(ose,{})]},t)}),c(ase,{})]})}const vJe="https://i.postimg.cc/cL6vs7qQ/login-1.png",yJe=()=>{const{signIn:e}=oi(),[t,r]=A.useState(""),[n,a]=A.useState(""),[i,o]=A.useState(!1),[s,l]=A.useState(null);return c("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-bl from-brand-dark via-brand-medium to-brand-light p-4",children:w("div",{className:"w-full max-w-4xl bg-white/95 rounded-2xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 border border-white/10 backdrop-blur-sm",children:[w("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[c("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-2 tracking-tight",children:"LOGIN"}),c("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Access your AI-powered dashboard."}),w("form",{onSubmit:async h=>{h.preventDefault(),l(null),o(!0);try{await e(t,n),"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission().then(m=>{m==="granted"&&console.log("Notification permission granted.")})}catch(m){console.error("Login failed:",m),l(m.message||"Failed to log in. Please check your credentials.")}finally{o(!1)}},className:"space-y-5",children:[w("div",{className:"relative group",children:[c(er,{htmlFor:"email",className:"sr-only",children:"Email / Username"}),c(mi,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),c(ct,{id:"email",type:"email",placeholder:"Email or Username",value:t,onChange:h=>r(h.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-gray-50 text-sm shadow-inner transition-colors duration-200"})]}),w("div",{className:"relative group",children:[c(er,{htmlFor:"password",className:"sr-only",children:"Password"}),c(ZH,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),c(ct,{id:"password",type:"password",placeholder:"Password",value:n,onChange:h=>a(h.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-gray-50 text-sm shadow-inner transition-colors duration-200"})]}),s&&c("p",{className:"text-sm text-red-600 text-center",children:s}),c(Fe,{type:"submit",className:"w-full bg-gradient-to-r from-brand-medium to-brand-dark hover:from-brand-medium/90 hover:to-brand-dark/90 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out disabled:opacity-70",disabled:i,children:i?"Authenticating...":"Login Now"})]}),w("div",{className:"mt-8 text-center",children:[c("p",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4",children:"Or login with"}),w("div",{className:"flex justify-center gap-4",children:[w(Fe,{variant:"outline",onClick:()=>console.log("Google login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-gray-100 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[c(WH,{className:"h-4 w-4"})," Google"]}),w(Fe,{variant:"outline",onClick:()=>console.log("Facebook login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-gray-100 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[c(KH,{className:"h-4 w-4"})," Facebook"]})]})]}),w("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Need an account?"," ",c(Vi,{to:"/signup",className:"font-semibold text-brand-medium hover:text-brand-dark hover:underline",children:"Sign up Free"})]})]}),w("div",{className:"hidden md:flex items-center justify-center p-8 bg-gradient-to-br from-brand-light via-brand-medium to-brand-dark relative overflow-hidden rounded-r-2xl",children:[w("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-white/10 backdrop-blur-xl rounded-xl shadow-xl border border-white/20 p-4 flex items-center justify-center",children:[c("img",{src:vJe,alt:"AI Tech Feature",className:"max-w-full max-h-full object-contain rounded-lg opacity-95"}),c(zH,{className:"absolute top-4 right-4 h-8 w-8 text-white/60 opacity-70"})]}),c("div",{className:"absolute -bottom-1/4 -left-1/4 w-2/3 h-2/3 bg-brand-very-light/5 rounded-full blur-3xl opacity-50 animate-pulse"}),c("div",{className:"absolute -top-1/4 -right-1/3 w-1/2 h-1/2 bg-white/5 rounded-full blur-3xl opacity-40 animate-pulse animation-delay-2000"})]})]})})},xJe="https://i.postimg.cc/cL6vs7qQ/login-1.png",wJe=()=>{const{toast:e}=yn(),[t,r]=A.useState(""),[n,a]=A.useState(""),[i,o]=A.useState(""),[s,l]=A.useState(!1),[u,d]=A.useState(!1),[f,h]=A.useState(null);return c("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-bl from-brand-dark via-brand-medium to-brand-light p-4",children:w("div",{className:"w-full max-w-4xl bg-white/90 rounded-2xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 border border-white/10 backdrop-blur-sm",children:[w("div",{className:"p-8 md:p-12 flex flex-col justify-center",children:[c("h2",{className:"text-3xl font-bold text-center text-brand-dark mb-2 tracking-tight",children:"SIGN UP"}),c("p",{className:"text-center text-gray-500 text-sm mb-8",children:"Create your account to unlock AI features."}),w("form",{onSubmit:async y=>{var _,b;if(y.preventDefault(),h(null),!s){h("You must agree to the Terms & Privacy policy.");return}d(!0);try{const{data:S,error:C}=await Le.auth.signUp({email:n,password:i,options:{data:{full_name:t}}});if(C)throw C;e({title:"Account Created!",description:((b=(_=S.user)==null?void 0:_.identities)==null?void 0:b.length)===0?"Please check your email to confirm your account.":"You can now log in.",variant:"default"}),r(""),a(""),o(""),l(!1)}catch(S){console.error("Sign up failed:",S),h(S.message||"Failed to create account. Please try again."),e({title:"Sign Up Error",description:S.message||"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}},className:"space-y-5",children:[w("div",{className:"relative group",children:[c(er,{htmlFor:"name",className:"sr-only",children:"Full Name"}),c(mi,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),c(ct,{id:"name",type:"text",placeholder:"Full Name",value:t,onChange:y=>r(y.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),w("div",{className:"relative group",children:[c(er,{htmlFor:"email",className:"sr-only",children:"Email"}),c(o4,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),c(ct,{id:"email",type:"email",placeholder:"Email Address",value:n,onChange:y=>a(y.target.value),required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),w("div",{className:"relative group",children:[c(er,{htmlFor:"password",className:"sr-only",children:"Password"}),c(ZH,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-brand-medium transition-colors duration-200"}),c(ct,{id:"password",type:"password",placeholder:"Password (min 8 characters)",value:i,onChange:y=>o(y.target.value),required:!0,minLength:8,className:"pl-10 pr-4 py-3 w-full border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-light focus:border-transparent bg-brand-very-light/20 text-sm shadow-inner transition-colors duration-200"})]}),w("div",{className:"flex items-center space-x-2 pt-1",children:[c(Rs,{id:"terms",checked:s,onCheckedChange:y=>l(y),className:"border-gray-300 data-[state=checked]:bg-brand-dark data-[state=checked]:border-brand-dark data-[state=checked]:text-white focus:ring-brand-light focus:ring-offset-white"}),w("label",{htmlFor:"terms",className:"text-xs font-medium text-gray-600 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I agree to the ",c("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-brand-medium hover:text-brand-dark hover:underline",children:"Terms"})," & ",c("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-brand-medium hover:text-brand-dark hover:underline",children:"Privacy Policy"})]})]}),f&&c("p",{className:"text-sm text-red-600 text-center pt-1",children:f}),c(Fe,{type:"submit",className:"w-full bg-gradient-to-r from-brand-medium to-brand-dark hover:shadow-lg hover:opacity-95 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition-all duration-300 ease-in-out disabled:opacity-70",disabled:u||!s,children:u?"Creating Account...":"Sign Up Now"})]}),w("div",{className:"mt-8 text-center",children:[c("p",{className:"text-gray-500 text-xs uppercase tracking-wider mb-4",children:"Or sign up with"}),w("div",{className:"flex justify-center gap-4",children:[w(Fe,{variant:"outline",onClick:()=>console.log("Google login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-brand-very-light/20 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[c(WH,{className:"h-4 w-4"})," Google"]}),w(Fe,{variant:"outline",onClick:()=>console.log("Facebook login clicked"),className:"flex items-center justify-center gap-2 border-gray-300 hover:border-brand-light hover:bg-brand-very-light/20 rounded-lg px-6 py-2 text-sm text-gray-700 transition-colors duration-200 shadow-sm",children:[c(KH,{className:"h-4 w-4"})," Facebook"]})]})]}),w("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Already have an account?"," ",c(Vi,{to:"/login",className:"font-semibold text-brand-medium hover:text-brand-dark hover:underline",children:"Log In"})]})]}),w("div",{className:"hidden md:flex items-center justify-center p-8 bg-gradient-to-br from-brand-light via-brand-medium to-brand-dark relative overflow-hidden rounded-r-2xl",children:[w("div",{className:"relative w-full max-w-sm aspect-[3/4] bg-white/10 backdrop-blur-xl rounded-xl shadow-xl border border-white/20 p-4 flex items-center justify-center",children:[c("img",{src:xJe,alt:"AI Tech Feature",className:"max-w-full max-h-full object-contain rounded-lg opacity-95"}),c(zH,{className:"absolute top-4 right-4 h-8 w-8 text-white/60 opacity-70"})]}),c("div",{className:"absolute -bottom-1/4 -left-1/4 w-2/3 h-2/3 bg-brand-very-light/5 rounded-full blur-3xl opacity-50 animate-pulse"}),c("div",{className:"absolute -top-1/4 -right-1/3 w-1/2 h-1/2 bg-white/5 rounded-full blur-3xl opacity-40 animate-pulse animation-delay-2000"})]})]})})};function _Je(){const[e,t]=A.useState([]),[r,n]=A.useState(!0),a=A.useCallback(async()=>{try{n(!0);const[i,o,s,l]=await Promise.all([Vt.patients.getAll(),Vt.patients.getTreatmentPlans(null),Vt.patients.getMedicalRecords(null),Vt.appointments.getAll()]),u=x=>{if(!x)return"Unknown Patient";const g=i.find(y=>y.id===x);return g?`${g.first_name} ${g.last_name}`:"Unknown Patient"},d=l.filter(x=>x.status==="completed"&&x.start_time).map(x=>({id:x.id,type:"appointment",title:`Appointment ${x.type||""} Completed`,patientName:x.patients?`${x.patients.first_name} ${x.patients.last_name}`:"Unknown Patient",itemName:x.type||"Appointment",staffName:x.staff?`${x.staff.first_name} ${x.staff.last_name}`:void 0,timestamp:zr(x.start_time),icon:mi,details:`Notes: ${x.notes||"N/A"}`})),f=o.flatMap(x=>{const g=u(x.patient_id);return(x.treatments||[]).filter(y=>y.status==="completed"&&y.updated_at).map(y=>({id:y.id,type:"treatment",title:"Treatment Completed",patientName:g,itemName:y.type||"Treatment",timestamp:zr(y.updated_at),icon:$0,details:`Notes: ${y.notes||"N/A"}`}))}),h=s.filter(x=>x.created_at).map(x=>({id:x.id,type:"record",title:"Medical Record Added",patientName:u(x.patient_id),itemName:x.record_type||"Medical Record",timestamp:zr(x.created_at),icon:ls,details:`Summary: ${x.summary||"N/A"}`})),m=[...d,...f,...h].sort((x,g)=>g.timestamp.getTime()-x.timestamp.getTime());t(m)}catch(i){console.error("Error fetching activity log data:",i)}finally{n(!1)}},[]);return A.useEffect(()=>{a()},[a]),w("div",{className:"container mx-auto py-8",children:[c(Aa,{heading:"Full Activity Log",text:"Browse all recent activities in the system."}),w(rd,{className:"h-[calc(100vh-200px)] mt-6",children:[" ",w("div",{className:"space-y-4 pr-4",children:[" ",r?c("p",{className:"text-center text-muted-foreground py-10",children:"Loading activities..."}):e.length>0?e.map(i=>{const o=i.icon||$0;return w(sr,{className:"shadow-sm bg-card",children:[c(yr,{className:"pb-3 pt-4",children:w(xr,{className:"text-base flex items-center font-medium",children:[c("div",{className:`flex h-8 w-8 items-center justify-center rounded-full mr-3 flex-shrink-0 ${i.type==="appointment"?"bg-emerald-100":i.type==="treatment"?"bg-blue-100":"bg-purple-100"}`,children:c(o,{className:`h-5 w-5 ${i.type==="appointment"?"text-emerald-600":i.type==="treatment"?"text-blue-600":"text-purple-600"}`})}),i.title]})}),w(mr,{className:"space-y-1 text-sm pl-14 pr-6 pb-4",children:[i.patientName&&w("p",{children:[c("span",{className:"font-medium text-muted-foreground",children:"Patient:"})," ",i.patientName]}),i.itemName&&w("p",{children:[c("span",{className:"font-medium text-muted-foreground",children:"Item:"})," ",i.itemName]}),i.staffName&&w("p",{children:[c("span",{className:"font-medium text-muted-foreground",children:"Staff:"})," ",i.staffName]}),i.details&&w("p",{className:"text-xs italic text-muted-foreground",children:[c("span",{className:"font-medium not-italic",children:"Details:"})," ",i.details]}),c("p",{className:"text-xs text-muted-foreground pt-1",children:Ut(i.timestamp,"EEEE, MMM d, yyyy 'at' h:mm a")})]})]},i.id)}):c("p",{className:"text-center text-muted-foreground py-10",children:"No activities found."})]})]})]})}function bJe(){const{user:e,loading:t}=oi();return t?c("div",{className:"flex items-center justify-center min-h-screen",children:c(Bn,{className:"w-8 h-8 animate-spin text-primary"})}):w(Wle,{children:[e?w(Mn,{path:"/",element:c(B1e,{}),children:[c(Mn,{index:!0,element:c(MOe,{})})," ",c(Mn,{path:"appointments",element:c(hIe,{})}),c(Mn,{path:"patients",element:c(Iz,{})}),c(Mn,{path:"patients/:id",element:c(Iz,{})})," ",c(Mn,{path:"treatment-plans",element:c(IFe,{})}),c(Mn,{path:"profile",element:c(zFe,{})}),c(Mn,{path:"settings",element:c($Fe,{})}),c(Mn,{path:"payments-subscription",element:c(VFe,{})}),c(Mn,{path:"patient-medical-records",element:c(HFe,{})}),c(Mn,{path:"activity-log",element:c(_Je,{})})," ",w(Mn,{element:c(KZe,{}),children:[c(Mn,{path:"inventory",element:c(yKe,{})}),c(Mn,{path:"inventory/create-adjustment",element:c(qZe,{})})," ",c(Mn,{path:"inventory/stock-take",element:c(zZe,{})})," ",c(Mn,{path:"inventory/invoices",element:c(wKe,{})})," ",c(Mn,{path:"purchases",element:c(iXe,{})})," ",c(Mn,{path:"purchases/create",element:c(YXe,{})})," "," ",c(Mn,{path:"purchases/urgent",element:c(DZe,{})})," ",c(Mn,{path:"purchases/urgent/history",element:c(RZe,{})})," ",c(Mn,{path:"purchases/urgent/my-requests",element:c(MZe,{})})," ",c(Mn,{path:"purchases/urgent/:id",element:c(IZe,{})})," ",c(Mn,{path:"purchases/:id",element:c(_Ze,{})})," ",c(Mn,{path:"assets",element:c(TYe,{})}),c(Mn,{path:"assets/:assetId",element:c(OYe,{})})," ",c(Mn,{path:"reports",element:c(zYe,{})}),c(Mn,{path:"reminders",element:c(GYe,{})})]}),c(Mn,{path:"inventory-approvals",element:c(VZe,{})}),c(Mn,{path:"search",element:c(GZe,{})}),c(Mn,{path:"*",element:c(BT,{to:"/",replace:!0})})]}):w(_r,{children:[c(Mn,{path:"/login",element:c(yJe,{})}),c(Mn,{path:"/signup",element:c(wJe,{})}),c(Mn,{path:"*",element:c(BT,{to:"/login",replace:!0})})]}),c(Mn,{path:"/approve-adjustment/:requestId/:approvalToken",element:c(HZe,{})})]})}function SJe(){return c(C0e,{children:w(Jle,{children:[c(bJe,{})," ",c(gJe,{})]})})}Xse.createRoot(document.getElementById("root")).render(c(A.StrictMode,{children:c(SJe,{})}));export{wa as _,W_ as c,ia as g};
